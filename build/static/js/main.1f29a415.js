/*! For license information please see main.1f29a415.js.LICENSE.txt */
(()=>{var e={86:(e,t,n)=>{"use strict";function r(e,t){const n=this;if(n.vars&&"function"===typeof n.getColorSchemeSelector){const r=n.getColorSchemeSelector(e).replace(/(\[[^\]]+\])/,"*:where($1)");return{[r]:t}}return n.palette.mode===e?t:{}}n.d(t,{A:()=>r})},116:(e,t,n)=>{"use strict";n.r(t),n.d(t,{GlobalStyles:()=>x.A,StyledEngineProvider:()=>E,ThemeContext:()=>i.T,css:()=>v.AH,default:()=>_,internal_processStyles:()=>A,keyframes:()=>v.i7});var r=n(8168),i=n(7370),a=n(9015),o=n(6477),s=n(1783),l=n(9950),c=n(7923),u=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,d=(0,c.A)((function(e){return u.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91})),h=function(e){return"theme"!==e},p=function(e){return"string"===typeof e&&e.charCodeAt(0)>96?d:h},f=function(e,t,n){var r;if(t){var i=t.shouldForwardProp;r=e.__emotion_forwardProp&&i?function(t){return e.__emotion_forwardProp(t)&&i(t)}:i}return"function"!==typeof r&&n&&(r=e.__emotion_forwardProp),r},m=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;return(0,s.SF)(t,n,r),(0,o.s)((function(){return(0,s.sk)(t,n,r)})),null},g=function e(t,n){var o,c,u=t.__emotion_real===t,d=u&&t.__emotion_base||t;void 0!==n&&(o=n.label,c=n.target);var h=f(t,n,u),g=h||p(d),v=!g("as");return function(){var y=arguments,b=u&&void 0!==t.__emotion_styles?t.__emotion_styles.slice(0):[];if(void 0!==o&&b.push("label:"+o+";"),null==y[0]||void 0===y[0].raw)b.push.apply(b,y);else{var w=y[0];b.push(w[0]);for(var E=y.length,x=1;x<E;x++)b.push(y[x],w[x])}var _=(0,i.w)((function(e,t,n){var r=v&&e.as||d,o="",u=[],f=e;if(null==e.theme){for(var y in f={},e)f[y]=e[y];f.theme=l.useContext(i.T)}"string"===typeof e.className?o=(0,s.Rk)(t.registered,u,e.className):null!=e.className&&(o=e.className+" ");var w=(0,a.J)(b.concat(u),t.registered,f);o+=t.key+"-"+w.name,void 0!==c&&(o+=" "+c);var E=v&&void 0===h?p(r):g,x={};for(var _ in e)v&&"as"===_||E(_)&&(x[_]=e[_]);return x.className=o,n&&(x.ref=n),l.createElement(l.Fragment,null,l.createElement(m,{cache:t,serialized:w,isStringTag:"string"===typeof r}),l.createElement(r,x))}));return _.displayName=void 0!==o?o:"Styled("+("string"===typeof d?d:d.displayName||d.name||"Component")+")",_.defaultProps=t.defaultProps,_.__emotion_real=_,_.__emotion_base=d,_.__emotion_styles=b,_.__emotion_forwardProp=h,Object.defineProperty(_,"toString",{value:function(){return"."+c}}),_.withComponent=function(t,i){return e(t,(0,r.A)({},n,i,{shouldForwardProp:f(_,i,!0)})).apply(void 0,b)},_}}.bind(null);["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){g[e]=g(e)}));var v=n(8283),y=n(8603),b=n(4414);let w;function E(e){const{injectFirst:t,children:n}=e;return t&&w?(0,b.jsx)(i.C,{value:w,children:n}):n}"object"===typeof document&&(w=(0,y.A)({key:"css",prepend:!0}));var x=n(3158);function _(e,t){return g(e,t)}const A=(e,t)=>{Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))}},185:function(e,t,n){var r,i,a;e=n.nmd(e),i=[],void 0===(a="function"===typeof(r=function(){"use strict";var t={},n=null;function r(t){if(e&&e.exports)try{return Object(function(){var e=new Error("Cannot find module 'crypto'");throw e.code="MODULE_NOT_FOUND",e}())(t)}catch(i){}try{var r;return(self.crypto||self.msCrypto).getRandomValues(r=new Uint32Array(t)),Array.prototype.slice.call(r)}catch(i){}if(!n)throw Error("Neither WebCryptoAPI nor a crypto module is available. Use bcrypt.setRandomFallback to set an alternative");return n(t)}try{r(1)}catch(S){}function i(e,t){for(var n=0,r=0,i=0,a=e.length;i<a;++i)e.charCodeAt(i)===t.charCodeAt(i)?++n:++r;return!(n<0)&&0===r}n=null,t.setRandomFallback=function(e){n=e},t.genSaltSync=function(e,t){if("number"!==typeof(e=e||f))throw Error("Illegal arguments: "+typeof e+", "+typeof t);e<4?e=4:e>31&&(e=31);var n=[];return n.push("$2a$"),e<10&&n.push("0"),n.push(e.toString()),n.push("$"),n.push(u(r(p),p)),n.join("")},t.genSalt=function(e,n,r){if("function"===typeof n&&(r=n,n=void 0),"function"===typeof e&&(r=e,e=void 0),"undefined"===typeof e)e=f;else if("number"!==typeof e)throw Error("illegal arguments: "+typeof e);function i(n){a((function(){try{n(null,t.genSaltSync(e))}catch(r){n(r)}}))}if(!r)return new Promise((function(e,t){i((function(n,r){n?t(n):e(r)}))}));if("function"!==typeof r)throw Error("Illegal callback: "+typeof r);i(r)},t.hashSync=function(e,n){if("undefined"===typeof n&&(n=f),"number"===typeof n&&(n=t.genSaltSync(n)),"string"!==typeof e||"string"!==typeof n)throw Error("Illegal arguments: "+typeof e+", "+typeof n);return T(e,n)},t.hash=function(e,n,r,i){function o(r){"string"===typeof e&&"number"===typeof n?t.genSalt(n,(function(t,n){T(e,n,r,i)})):"string"===typeof e&&"string"===typeof n?T(e,n,r,i):a(r.bind(this,Error("Illegal arguments: "+typeof e+", "+typeof n)))}if(!r)return new Promise((function(e,t){o((function(n,r){n?t(n):e(r)}))}));if("function"!==typeof r)throw Error("Illegal callback: "+typeof r);o(r)},t.compareSync=function(e,n){if("string"!==typeof e||"string"!==typeof n)throw Error("Illegal arguments: "+typeof e+", "+typeof n);return 60===n.length&&i(t.hashSync(e,n.substr(0,n.length-31)),n)},t.compare=function(e,n,r,o){function s(r){"string"===typeof e&&"string"===typeof n?60===n.length?t.hash(e,n.substr(0,29),(function(e,t){e?r(e):r(null,i(t,n))}),o):a(r.bind(this,null,!1)):a(r.bind(this,Error("Illegal arguments: "+typeof e+", "+typeof n)))}if(!r)return new Promise((function(e,t){s((function(n,r){n?t(n):e(r)}))}));if("function"!==typeof r)throw Error("Illegal callback: "+typeof r);s(r)},t.getRounds=function(e){if("string"!==typeof e)throw Error("Illegal arguments: "+typeof e);return parseInt(e.split("$")[2],10)},t.getSalt=function(e){if("string"!==typeof e)throw Error("Illegal arguments: "+typeof e);if(60!==e.length)throw Error("Illegal hash length: "+e.length+" != 60");return e.substring(0,29)};var a="undefined"!==typeof process&&process&&"function"===typeof process.nextTick?"function"===typeof setImmediate?setImmediate:process.nextTick:setTimeout;function o(e){var t=[],n=0;return h.encodeUTF16toUTF8((function(){return n>=e.length?null:e.charCodeAt(n++)}),(function(e){t.push(e)})),t}var s="./ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),l=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,54,55,56,57,58,59,60,61,62,63,-1,-1,-1,-1,-1,-1,-1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,-1,-1,-1,-1,-1,-1,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,-1,-1,-1,-1,-1],c=String.fromCharCode;function u(e,t){var n,r,i=0,a=[];if(t<=0||t>e.length)throw Error("Illegal len: "+t);for(;i<t;){if(n=255&e[i++],a.push(s[n>>2&63]),n=(3&n)<<4,i>=t){a.push(s[63&n]);break}if(n|=(r=255&e[i++])>>4&15,a.push(s[63&n]),n=(15&r)<<2,i>=t){a.push(s[63&n]);break}n|=(r=255&e[i++])>>6&3,a.push(s[63&n]),a.push(s[63&r])}return a.join("")}function d(e,t){var n,r,i,a,o,s=0,u=e.length,d=0,h=[];if(t<=0)throw Error("Illegal len: "+t);for(;s<u-1&&d<t&&(n=(o=e.charCodeAt(s++))<l.length?l[o]:-1,r=(o=e.charCodeAt(s++))<l.length?l[o]:-1,-1!=n&&-1!=r)&&(a=n<<2>>>0,a|=(48&r)>>4,h.push(c(a)),!(++d>=t||s>=u))&&-1!=(i=(o=e.charCodeAt(s++))<l.length?l[o]:-1)&&(a=(15&r)<<4>>>0,a|=(60&i)>>2,h.push(c(a)),!(++d>=t||s>=u));)a=(3&i)<<6>>>0,a|=(o=e.charCodeAt(s++))<l.length?l[o]:-1,h.push(c(a)),++d;var p=[];for(s=0;s<d;s++)p.push(h[s].charCodeAt(0));return p}var h=function(){var e={MAX_CODEPOINT:1114111,encodeUTF8:function(e,t){var n=null;for("number"===typeof e&&(n=e,e=function(){return null});null!==n||null!==(n=e());)n<128?t(127&n):n<2048?(t(n>>6&31|192),t(63&n|128)):n<65536?(t(n>>12&15|224),t(n>>6&63|128),t(63&n|128)):(t(n>>18&7|240),t(n>>12&63|128),t(n>>6&63|128),t(63&n|128)),n=null},decodeUTF8:function(e,t){for(var n,r,i,a,o=function(e){e=e.slice(0,e.indexOf(null));var t=Error(e.toString());throw t.name="TruncatedError",t.bytes=e,t};null!==(n=e());)if(0===(128&n))t(n);else if(192===(224&n))null===(r=e())&&o([n,r]),t((31&n)<<6|63&r);else if(224===(240&n))(null===(r=e())||null===(i=e()))&&o([n,r,i]),t((15&n)<<12|(63&r)<<6|63&i);else{if(240!==(248&n))throw RangeError("Illegal starting byte: "+n);(null===(r=e())||null===(i=e())||null===(a=e()))&&o([n,r,i,a]),t((7&n)<<18|(63&r)<<12|(63&i)<<6|63&a)}},UTF16toUTF8:function(e,t){for(var n,r=null;null!==(n=null!==r?r:e());)n>=55296&&n<=57343&&null!==(r=e())&&r>=56320&&r<=57343?(t(1024*(n-55296)+r-56320+65536),r=null):t(n);null!==r&&t(r)},UTF8toUTF16:function(e,t){var n=null;for("number"===typeof e&&(n=e,e=function(){return null});null!==n||null!==(n=e());)n<=65535?t(n):(t(55296+((n-=65536)>>10)),t(n%1024+56320)),n=null},encodeUTF16toUTF8:function(t,n){e.UTF16toUTF8(t,(function(t){e.encodeUTF8(t,n)}))},decodeUTF8toUTF16:function(t,n){e.decodeUTF8(t,(function(t){e.UTF8toUTF16(t,n)}))},calculateCodePoint:function(e){return e<128?1:e<2048?2:e<65536?3:4},calculateUTF8:function(t){for(var n,r=0;null!==(n=t());)r+=e.calculateCodePoint(n);return r},calculateUTF16asUTF8:function(t){var n=0,r=0;return e.UTF16toUTF8(t,(function(t){++n,r+=e.calculateCodePoint(t)})),[n,r]}};return e}();Date.now=Date.now||function(){return+new Date};var p=16,f=10,m=16,g=100,v=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],y=[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946,1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055,3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504,976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462],b=[1332899944,1700884034,1701343084,1684370003,1668446532,1869963892];function w(e,t,n,r){var i,a=e[t],o=e[t+1];return i=r[(a^=n[0])>>>24],i+=r[256|a>>16&255],i^=r[512|a>>8&255],i=r[(o^=(i+=r[768|255&a])^n[1])>>>24],i+=r[256|o>>16&255],i^=r[512|o>>8&255],i=r[(a^=(i+=r[768|255&o])^n[2])>>>24],i+=r[256|a>>16&255],i^=r[512|a>>8&255],i=r[(o^=(i+=r[768|255&a])^n[3])>>>24],i+=r[256|o>>16&255],i^=r[512|o>>8&255],i=r[(a^=(i+=r[768|255&o])^n[4])>>>24],i+=r[256|a>>16&255],i^=r[512|a>>8&255],i=r[(o^=(i+=r[768|255&a])^n[5])>>>24],i+=r[256|o>>16&255],i^=r[512|o>>8&255],i=r[(a^=(i+=r[768|255&o])^n[6])>>>24],i+=r[256|a>>16&255],i^=r[512|a>>8&255],i=r[(o^=(i+=r[768|255&a])^n[7])>>>24],i+=r[256|o>>16&255],i^=r[512|o>>8&255],i=r[(a^=(i+=r[768|255&o])^n[8])>>>24],i+=r[256|a>>16&255],i^=r[512|a>>8&255],i=r[(o^=(i+=r[768|255&a])^n[9])>>>24],i+=r[256|o>>16&255],i^=r[512|o>>8&255],i=r[(a^=(i+=r[768|255&o])^n[10])>>>24],i+=r[256|a>>16&255],i^=r[512|a>>8&255],i=r[(o^=(i+=r[768|255&a])^n[11])>>>24],i+=r[256|o>>16&255],i^=r[512|o>>8&255],i=r[(a^=(i+=r[768|255&o])^n[12])>>>24],i+=r[256|a>>16&255],i^=r[512|a>>8&255],i=r[(o^=(i+=r[768|255&a])^n[13])>>>24],i+=r[256|o>>16&255],i^=r[512|o>>8&255],i=r[(a^=(i+=r[768|255&o])^n[14])>>>24],i+=r[256|a>>16&255],i^=r[512|a>>8&255],i=r[(o^=(i+=r[768|255&a])^n[15])>>>24],i+=r[256|o>>16&255],i^=r[512|o>>8&255],a^=(i+=r[768|255&o])^n[16],e[t]=o^n[m+1],e[t+1]=a,e}function E(e,t){for(var n=0,r=0;n<4;++n)r=r<<8|255&e[t],t=(t+1)%e.length;return{key:r,offp:t}}function x(e,t,n){for(var r,i=0,a=[0,0],o=t.length,s=n.length,l=0;l<o;l++)i=(r=E(e,i)).offp,t[l]=t[l]^r.key;for(l=0;l<o;l+=2)a=w(a,0,t,n),t[l]=a[0],t[l+1]=a[1];for(l=0;l<s;l+=2)a=w(a,0,t,n),n[l]=a[0],n[l+1]=a[1]}function _(e,t,n,r){for(var i,a=0,o=[0,0],s=n.length,l=r.length,c=0;c<s;c++)a=(i=E(t,a)).offp,n[c]=n[c]^i.key;for(a=0,c=0;c<s;c+=2)a=(i=E(e,a)).offp,o[0]^=i.key,a=(i=E(e,a)).offp,o[1]^=i.key,o=w(o,0,n,r),n[c]=o[0],n[c+1]=o[1];for(c=0;c<l;c+=2)a=(i=E(e,a)).offp,o[0]^=i.key,a=(i=E(e,a)).offp,o[1]^=i.key,o=w(o,0,n,r),r[c]=o[0],r[c+1]=o[1]}function A(e,t,n,r,i){var o,s=b.slice(),l=s.length;if(n<4||n>31){if(o=Error("Illegal number of rounds (4-31): "+n),r)return void a(r.bind(this,o));throw o}if(t.length!==p){if(o=Error("Illegal salt length: "+t.length+" != "+p),r)return void a(r.bind(this,o));throw o}n=1<<n>>>0;var c,u,d,h=0;function f(){if(i&&i(h/n),!(h<n)){for(h=0;h<64;h++)for(d=0;d<l>>1;d++)w(s,d<<1,c,u);var o=[];for(h=0;h<l;h++)o.push((s[h]>>24&255)>>>0),o.push((s[h]>>16&255)>>>0),o.push((s[h]>>8&255)>>>0),o.push((255&s[h])>>>0);return r?void r(null,o):o}for(var p=Date.now();h<n&&(h+=1,x(e,c,u),x(t,c,u),!(Date.now()-p>g)););r&&a(f)}if(Int32Array?(c=new Int32Array(v),u=new Int32Array(y)):(c=v.slice(),u=y.slice()),_(t,e,c,u),"undefined"!==typeof r)f();else for(var m;;)if("undefined"!==typeof(m=f()))return m||[]}function T(e,t,n,r){var i,s,l;if("string"!==typeof e||"string"!==typeof t){if(i=Error("Invalid string / salt: Not a string"),n)return void a(n.bind(this,i));throw i}if("$"!==t.charAt(0)||"2"!==t.charAt(1)){if(i=Error("Invalid salt version: "+t.substring(0,2)),n)return void a(n.bind(this,i));throw i}if("$"===t.charAt(2))s=String.fromCharCode(0),l=3;else{if("a"!==(s=t.charAt(2))&&"b"!==s&&"y"!==s||"$"!==t.charAt(3)){if(i=Error("Invalid salt revision: "+t.substring(2,4)),n)return void a(n.bind(this,i));throw i}l=4}if(t.charAt(l+2)>"$"){if(i=Error("Missing salt rounds"),n)return void a(n.bind(this,i));throw i}var c=10*parseInt(t.substring(l,l+1),10)+parseInt(t.substring(l+1,l+2),10),h=t.substring(l+3,l+25),f=o(e+=s>="a"?"\0":""),m=d(h,p);function g(e){var t=[];return t.push("$2"),s>="a"&&t.push(s),t.push("$"),c<10&&t.push("0"),t.push(c.toString()),t.push("$"),t.push(u(m,m.length)),t.push(u(e,4*b.length-1)),t.join("")}if("undefined"==typeof n)return g(A(f,m,c));A(f,m,c,(function(e,t){e?n(e,null):n(null,g(t))}),r)}return t.encodeBase64=u,t.decodeBase64=d,t})?r.apply(t,i):r)||(e.exports=a)},195:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=(0,n(4436).A)()},237:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var r=n(8168),i=n(8587),a=n(7483),o=n(8076);const s=["sx"],l=e=>{var t,n;const r={systemProps:{},otherProps:{}},i=null!=(t=null==e||null==(n=e.theme)?void 0:n.unstable_sxConfig)?t:o.A;return Object.keys(e).forEach((t=>{i[t]?r.systemProps[t]=e[t]:r.otherProps[t]=e[t]})),r};function c(e){const{sx:t}=e,n=(0,i.A)(e,s),{systemProps:o,otherProps:c}=l(n);let u;return u=Array.isArray(t)?[o,...t]:"function"===typeof t?function(){const e=t(...arguments);return(0,a.Q)(e)?(0,r.A)({},o,e):o}:(0,r.A)({},o,t),(0,r.A)({},c,{sx:u})}},304:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r.A});var r=n(5501)},423:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>a});var r=n(4501);const i={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function a(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui";const a=i[t];return a?`${n}-${a}`:`${r.A.generate(e)}-${t}`}},505:(e,t,n)=>{"use strict";n.d(t,{A:()=>u,k:()=>l});var r=n(5501),i=n(6206),a=n(2703),o=n(8286),s=n(8076);function l(){function e(e,t,n,i){const s={[e]:t,theme:n},l=i[e];if(!l)return{[e]:t};const{cssProperty:c=e,themeKey:u,transform:d,style:h}=l;if(null==t)return null;if("typography"===u&&"inherit"===t)return{[e]:t};const p=(0,a.Yn)(n,u)||{};if(h)return h(s);return(0,o.NI)(s,t,(t=>{let n=(0,a.BO)(p,d,t);return t===n&&"string"===typeof t&&(n=(0,a.BO)(p,d,`${e}${"default"===t?"":(0,r.A)(t)}`,t)),!1===c?n:{[c]:n}}))}return function t(n){var r;const{sx:a,theme:l={}}=n||{};if(!a)return null;const c=null!=(r=l.unstable_sxConfig)?r:s.A;function u(n){let r=n;if("function"===typeof n)r=n(l);else if("object"!==typeof n)return n;if(!r)return null;const a=(0,o.EU)(l.breakpoints),s=Object.keys(a);let u=a;return Object.keys(r).forEach((n=>{const a=(s=r[n],d=l,"function"===typeof s?s(d):s);var s,d;if(null!==a&&void 0!==a)if("object"===typeof a)if(c[n])u=(0,i.A)(u,e(n,a,l,c));else{const e=(0,o.NI)({theme:l},a,(e=>({[n]:e})));!function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t.reduce(((e,t)=>e.concat(Object.keys(t))),[]),i=new Set(r);return t.every((e=>i.size===Object.keys(e).length))}(e,a)?u=(0,i.A)(u,e):u[n]=t({sx:a,theme:l})}else u=(0,i.A)(u,e(n,a,l,c))})),(0,o.vf)(s,u)}return Array.isArray(a)?a.map(u):u(a)}}const c=l();c.filterProps=["sx"];const u=c},630:(e,t,n)=>{"use strict";e.exports=n(2138)},827:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=n(8635).A},1014:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=n(3539).A},1209:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=n(1927).A},1352:(e,t,n)=>{"use strict";var r=n(7119);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},1375:(e,t,n)=>{"use strict";n.d(t,{A:()=>p});var r=n(9950),i=n(1824);let a=!0,o=!1;const s=new i.E,l={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function c(e){e.metaKey||e.altKey||e.ctrlKey||(a=!0)}function u(){a=!1}function d(){"hidden"===this.visibilityState&&o&&(a=!0)}function h(e){const{target:t}=e;try{return t.matches(":focus-visible")}catch(n){}return a||function(e){const{type:t,tagName:n}=e;return!("INPUT"!==n||!l[t]||e.readOnly)||"TEXTAREA"===n&&!e.readOnly||!!e.isContentEditable}(t)}function p(){const e=r.useCallback((e=>{var t;null!=e&&((t=e.ownerDocument).addEventListener("keydown",c,!0),t.addEventListener("mousedown",u,!0),t.addEventListener("pointerdown",u,!0),t.addEventListener("touchstart",u,!0),t.addEventListener("visibilitychange",d,!0))}),[]),t=r.useRef(!1);return{isFocusVisibleRef:t,onFocus:function(e){return!!h(e)&&(t.current=!0,!0)},onBlur:function(){return!!t.current&&(o=!0,s.start(100,(()=>{o=!1})),t.current=!1,!0)},ref:e}}},1397:function(e,t,n){var r;e=n.nmd(e),function(){var i,a="Expected a function",o="__lodash_hash_undefined__",s="__lodash_placeholder__",l=16,c=32,u=64,d=128,h=256,p=1/0,f=9007199254740991,m=NaN,g=4294967295,v=[["ary",d],["bind",1],["bindKey",2],["curry",8],["curryRight",l],["flip",512],["partial",c],["partialRight",u],["rearg",h]],y="[object Arguments]",b="[object Array]",w="[object Boolean]",E="[object Date]",x="[object Error]",_="[object Function]",A="[object GeneratorFunction]",T="[object Map]",S="[object Number]",k="[object Object]",C="[object Promise]",I="[object RegExp]",R="[object Set]",D="[object String]",L="[object Symbol]",P="[object WeakMap]",M="[object ArrayBuffer]",N="[object DataView]",O="[object Float32Array]",j="[object Float64Array]",F="[object Int8Array]",U="[object Int16Array]",B="[object Int32Array]",$="[object Uint8Array]",V="[object Uint8ClampedArray]",W="[object Uint16Array]",z="[object Uint32Array]",H=/\b__p \+= '';/g,q=/\b(__p \+=) '' \+/g,G=/(__e\(.*?\)|\b__t\)) \+\n'';/g,K=/&(?:amp|lt|gt|quot|#39);/g,Y=/[&<>"']/g,Q=RegExp(K.source),X=RegExp(Y.source),Z=/<%-([\s\S]+?)%>/g,J=/<%([\s\S]+?)%>/g,ee=/<%=([\s\S]+?)%>/g,te=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ne=/^\w*$/,re=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ie=/[\\^$.*+?()[\]{}|]/g,ae=RegExp(ie.source),oe=/^\s+/,se=/\s/,le=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ce=/\{\n\/\* \[wrapped with (.+)\] \*/,ue=/,? & /,de=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,he=/[()=,{}\[\]\/\s]/,pe=/\\(\\)?/g,fe=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,me=/\w*$/,ge=/^[-+]0x[0-9a-f]+$/i,ve=/^0b[01]+$/i,ye=/^\[object .+?Constructor\]$/,be=/^0o[0-7]+$/i,we=/^(?:0|[1-9]\d*)$/,Ee=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,xe=/($^)/,_e=/['\n\r\u2028\u2029\\]/g,Ae="\\ud800-\\udfff",Te="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Se="\\u2700-\\u27bf",ke="a-z\\xdf-\\xf6\\xf8-\\xff",Ce="A-Z\\xc0-\\xd6\\xd8-\\xde",Ie="\\ufe0e\\ufe0f",Re="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",De="['\u2019]",Le="["+Ae+"]",Pe="["+Re+"]",Me="["+Te+"]",Ne="\\d+",Oe="["+Se+"]",je="["+ke+"]",Fe="[^"+Ae+Re+Ne+Se+ke+Ce+"]",Ue="\\ud83c[\\udffb-\\udfff]",Be="[^"+Ae+"]",$e="(?:\\ud83c[\\udde6-\\uddff]){2}",Ve="[\\ud800-\\udbff][\\udc00-\\udfff]",We="["+Ce+"]",ze="\\u200d",He="(?:"+je+"|"+Fe+")",qe="(?:"+We+"|"+Fe+")",Ge="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Ke="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Ye="(?:"+Me+"|"+Ue+")"+"?",Qe="["+Ie+"]?",Xe=Qe+Ye+("(?:"+ze+"(?:"+[Be,$e,Ve].join("|")+")"+Qe+Ye+")*"),Ze="(?:"+[Oe,$e,Ve].join("|")+")"+Xe,Je="(?:"+[Be+Me+"?",Me,$e,Ve,Le].join("|")+")",et=RegExp(De,"g"),tt=RegExp(Me,"g"),nt=RegExp(Ue+"(?="+Ue+")|"+Je+Xe,"g"),rt=RegExp([We+"?"+je+"+"+Ge+"(?="+[Pe,We,"$"].join("|")+")",qe+"+"+Ke+"(?="+[Pe,We+He,"$"].join("|")+")",We+"?"+He+"+"+Ge,We+"+"+Ke,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ne,Ze].join("|"),"g"),it=RegExp("["+ze+Ae+Te+Ie+"]"),at=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ot=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],st=-1,lt={};lt[O]=lt[j]=lt[F]=lt[U]=lt[B]=lt[$]=lt[V]=lt[W]=lt[z]=!0,lt[y]=lt[b]=lt[M]=lt[w]=lt[N]=lt[E]=lt[x]=lt[_]=lt[T]=lt[S]=lt[k]=lt[I]=lt[R]=lt[D]=lt[P]=!1;var ct={};ct[y]=ct[b]=ct[M]=ct[N]=ct[w]=ct[E]=ct[O]=ct[j]=ct[F]=ct[U]=ct[B]=ct[T]=ct[S]=ct[k]=ct[I]=ct[R]=ct[D]=ct[L]=ct[$]=ct[V]=ct[W]=ct[z]=!0,ct[x]=ct[_]=ct[P]=!1;var ut={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},dt=parseFloat,ht=parseInt,pt="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,ft="object"==typeof self&&self&&self.Object===Object&&self,mt=pt||ft||Function("return this")(),gt=t&&!t.nodeType&&t,vt=gt&&e&&!e.nodeType&&e,yt=vt&&vt.exports===gt,bt=yt&&pt.process,wt=function(){try{var e=vt&&vt.require&&vt.require("util").types;return e||bt&&bt.binding&&bt.binding("util")}catch(t){}}(),Et=wt&&wt.isArrayBuffer,xt=wt&&wt.isDate,_t=wt&&wt.isMap,At=wt&&wt.isRegExp,Tt=wt&&wt.isSet,St=wt&&wt.isTypedArray;function kt(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function Ct(e,t,n,r){for(var i=-1,a=null==e?0:e.length;++i<a;){var o=e[i];t(r,o,n(o),e)}return r}function It(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function Rt(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function Dt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function Lt(e,t){for(var n=-1,r=null==e?0:e.length,i=0,a=[];++n<r;){var o=e[n];t(o,n,e)&&(a[i++]=o)}return a}function Pt(e,t){return!!(null==e?0:e.length)&&Wt(e,t,0)>-1}function Mt(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function Nt(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function Ot(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function jt(e,t,n,r){var i=-1,a=null==e?0:e.length;for(r&&a&&(n=e[++i]);++i<a;)n=t(n,e[i],i,e);return n}function Ft(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function Ut(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var Bt=Gt("length");function $t(e,t,n){var r;return n(e,(function(e,n,i){if(t(e,n,i))return r=n,!1})),r}function Vt(e,t,n,r){for(var i=e.length,a=n+(r?1:-1);r?a--:++a<i;)if(t(e[a],a,e))return a;return-1}function Wt(e,t,n){return t===t?function(e,t,n){var r=n-1,i=e.length;for(;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):Vt(e,Ht,n)}function zt(e,t,n,r){for(var i=n-1,a=e.length;++i<a;)if(r(e[i],t))return i;return-1}function Ht(e){return e!==e}function qt(e,t){var n=null==e?0:e.length;return n?Qt(e,t)/n:m}function Gt(e){return function(t){return null==t?i:t[e]}}function Kt(e){return function(t){return null==e?i:e[t]}}function Yt(e,t,n,r,i){return i(e,(function(e,i,a){n=r?(r=!1,e):t(n,e,i,a)})),n}function Qt(e,t){for(var n,r=-1,a=e.length;++r<a;){var o=t(e[r]);o!==i&&(n=n===i?o:n+o)}return n}function Xt(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function Zt(e){return e?e.slice(0,gn(e)+1).replace(oe,""):e}function Jt(e){return function(t){return e(t)}}function en(e,t){return Nt(t,(function(t){return e[t]}))}function tn(e,t){return e.has(t)}function nn(e,t){for(var n=-1,r=e.length;++n<r&&Wt(t,e[n],0)>-1;);return n}function rn(e,t){for(var n=e.length;n--&&Wt(t,e[n],0)>-1;);return n}var an=Kt({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"}),on=Kt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function sn(e){return"\\"+ut[e]}function ln(e){return it.test(e)}function cn(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function un(e,t){return function(n){return e(t(n))}}function dn(e,t){for(var n=-1,r=e.length,i=0,a=[];++n<r;){var o=e[n];o!==t&&o!==s||(e[n]=s,a[i++]=n)}return a}function hn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function pn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}function fn(e){return ln(e)?function(e){var t=nt.lastIndex=0;for(;nt.test(e);)++t;return t}(e):Bt(e)}function mn(e){return ln(e)?function(e){return e.match(nt)||[]}(e):function(e){return e.split("")}(e)}function gn(e){for(var t=e.length;t--&&se.test(e.charAt(t)););return t}var vn=Kt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var yn=function e(t){var n=(t=null==t?mt:yn.defaults(mt.Object(),t,yn.pick(mt,ot))).Array,r=t.Date,se=t.Error,Ae=t.Function,Te=t.Math,Se=t.Object,ke=t.RegExp,Ce=t.String,Ie=t.TypeError,Re=n.prototype,De=Ae.prototype,Le=Se.prototype,Pe=t["__core-js_shared__"],Me=De.toString,Ne=Le.hasOwnProperty,Oe=0,je=function(){var e=/[^.]+$/.exec(Pe&&Pe.keys&&Pe.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Fe=Le.toString,Ue=Me.call(Se),Be=mt._,$e=ke("^"+Me.call(Ne).replace(ie,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ve=yt?t.Buffer:i,We=t.Symbol,ze=t.Uint8Array,He=Ve?Ve.allocUnsafe:i,qe=un(Se.getPrototypeOf,Se),Ge=Se.create,Ke=Le.propertyIsEnumerable,Ye=Re.splice,Qe=We?We.isConcatSpreadable:i,Xe=We?We.iterator:i,Ze=We?We.toStringTag:i,Je=function(){try{var e=da(Se,"defineProperty");return e({},"",{}),e}catch(t){}}(),nt=t.clearTimeout!==mt.clearTimeout&&t.clearTimeout,it=r&&r.now!==mt.Date.now&&r.now,ut=t.setTimeout!==mt.setTimeout&&t.setTimeout,pt=Te.ceil,ft=Te.floor,gt=Se.getOwnPropertySymbols,vt=Ve?Ve.isBuffer:i,bt=t.isFinite,wt=Re.join,Bt=un(Se.keys,Se),Kt=Te.max,bn=Te.min,wn=r.now,En=t.parseInt,xn=Te.random,_n=Re.reverse,An=da(t,"DataView"),Tn=da(t,"Map"),Sn=da(t,"Promise"),kn=da(t,"Set"),Cn=da(t,"WeakMap"),In=da(Se,"create"),Rn=Cn&&new Cn,Dn={},Ln=ja(An),Pn=ja(Tn),Mn=ja(Sn),Nn=ja(kn),On=ja(Cn),jn=We?We.prototype:i,Fn=jn?jn.valueOf:i,Un=jn?jn.toString:i;function Bn(e){if(ts(e)&&!zo(e)&&!(e instanceof zn)){if(e instanceof Wn)return e;if(Ne.call(e,"__wrapped__"))return Fa(e)}return new Wn(e)}var $n=function(){function e(){}return function(t){if(!es(t))return{};if(Ge)return Ge(t);e.prototype=t;var n=new e;return e.prototype=i,n}}();function Vn(){}function Wn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=i}function zn(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=g,this.__views__=[]}function Hn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function qn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Gn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Kn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Gn;++t<n;)this.add(e[t])}function Yn(e){var t=this.__data__=new qn(e);this.size=t.size}function Qn(e,t){var n=zo(e),r=!n&&Wo(e),i=!n&&!r&&Ko(e),a=!n&&!r&&!i&&cs(e),o=n||r||i||a,s=o?Xt(e.length,Ce):[],l=s.length;for(var c in e)!t&&!Ne.call(e,c)||o&&("length"==c||i&&("offset"==c||"parent"==c)||a&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||ya(c,l))||s.push(c);return s}function Xn(e){var t=e.length;return t?e[Kr(0,t-1)]:i}function Zn(e,t){return Ma(Ii(e),sr(t,0,e.length))}function Jn(e){return Ma(Ii(e))}function er(e,t,n){(n!==i&&!Bo(e[t],n)||n===i&&!(t in e))&&ar(e,t,n)}function tr(e,t,n){var r=e[t];Ne.call(e,t)&&Bo(r,n)&&(n!==i||t in e)||ar(e,t,n)}function nr(e,t){for(var n=e.length;n--;)if(Bo(e[n][0],t))return n;return-1}function rr(e,t,n,r){return hr(e,(function(e,i,a){t(r,e,n(e),a)})),r}function ir(e,t){return e&&Ri(t,Ds(t),e)}function ar(e,t,n){"__proto__"==t&&Je?Je(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function or(e,t){for(var r=-1,a=t.length,o=n(a),s=null==e;++r<a;)o[r]=s?i:Ss(e,t[r]);return o}function sr(e,t,n){return e===e&&(n!==i&&(e=e<=n?e:n),t!==i&&(e=e>=t?e:t)),e}function lr(e,t,n,r,a,o){var s,l=1&t,c=2&t,u=4&t;if(n&&(s=a?n(e,r,a,o):n(e)),s!==i)return s;if(!es(e))return e;var d=zo(e);if(d){if(s=function(e){var t=e.length,n=new e.constructor(t);t&&"string"==typeof e[0]&&Ne.call(e,"index")&&(n.index=e.index,n.input=e.input);return n}(e),!l)return Ii(e,s)}else{var h=fa(e),p=h==_||h==A;if(Ko(e))return _i(e,l);if(h==k||h==y||p&&!a){if(s=c||p?{}:ga(e),!l)return c?function(e,t){return Ri(e,pa(e),t)}(e,function(e,t){return e&&Ri(t,Ls(t),e)}(s,e)):function(e,t){return Ri(e,ha(e),t)}(e,ir(s,e))}else{if(!ct[h])return a?e:{};s=function(e,t,n){var r=e.constructor;switch(t){case M:return Ai(e);case w:case E:return new r(+e);case N:return function(e,t){var n=t?Ai(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case O:case j:case F:case U:case B:case $:case V:case W:case z:return Ti(e,n);case T:return new r;case S:case D:return new r(e);case I:return function(e){var t=new e.constructor(e.source,me.exec(e));return t.lastIndex=e.lastIndex,t}(e);case R:return new r;case L:return i=e,Fn?Se(Fn.call(i)):{}}var i}(e,h,l)}}o||(o=new Yn);var f=o.get(e);if(f)return f;o.set(e,s),os(e)?e.forEach((function(r){s.add(lr(r,t,n,r,e,o))})):ns(e)&&e.forEach((function(r,i){s.set(i,lr(r,t,n,i,e,o))}));var m=d?i:(u?c?ia:ra:c?Ls:Ds)(e);return It(m||e,(function(r,i){m&&(r=e[i=r]),tr(s,i,lr(r,t,n,i,e,o))})),s}function cr(e,t,n){var r=n.length;if(null==e)return!r;for(e=Se(e);r--;){var a=n[r],o=t[a],s=e[a];if(s===i&&!(a in e)||!o(s))return!1}return!0}function ur(e,t,n){if("function"!=typeof e)throw new Ie(a);return Ra((function(){e.apply(i,n)}),t)}function dr(e,t,n,r){var i=-1,a=Pt,o=!0,s=e.length,l=[],c=t.length;if(!s)return l;n&&(t=Nt(t,Jt(n))),r?(a=Mt,o=!1):t.length>=200&&(a=tn,o=!1,t=new Kn(t));e:for(;++i<s;){var u=e[i],d=null==n?u:n(u);if(u=r||0!==u?u:0,o&&d===d){for(var h=c;h--;)if(t[h]===d)continue e;l.push(u)}else a(t,d,r)||l.push(u)}return l}Bn.templateSettings={escape:Z,evaluate:J,interpolate:ee,variable:"",imports:{_:Bn}},Bn.prototype=Vn.prototype,Bn.prototype.constructor=Bn,Wn.prototype=$n(Vn.prototype),Wn.prototype.constructor=Wn,zn.prototype=$n(Vn.prototype),zn.prototype.constructor=zn,Hn.prototype.clear=function(){this.__data__=In?In(null):{},this.size=0},Hn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Hn.prototype.get=function(e){var t=this.__data__;if(In){var n=t[e];return n===o?i:n}return Ne.call(t,e)?t[e]:i},Hn.prototype.has=function(e){var t=this.__data__;return In?t[e]!==i:Ne.call(t,e)},Hn.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=In&&t===i?o:t,this},qn.prototype.clear=function(){this.__data__=[],this.size=0},qn.prototype.delete=function(e){var t=this.__data__,n=nr(t,e);return!(n<0)&&(n==t.length-1?t.pop():Ye.call(t,n,1),--this.size,!0)},qn.prototype.get=function(e){var t=this.__data__,n=nr(t,e);return n<0?i:t[n][1]},qn.prototype.has=function(e){return nr(this.__data__,e)>-1},qn.prototype.set=function(e,t){var n=this.__data__,r=nr(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},Gn.prototype.clear=function(){this.size=0,this.__data__={hash:new Hn,map:new(Tn||qn),string:new Hn}},Gn.prototype.delete=function(e){var t=ca(this,e).delete(e);return this.size-=t?1:0,t},Gn.prototype.get=function(e){return ca(this,e).get(e)},Gn.prototype.has=function(e){return ca(this,e).has(e)},Gn.prototype.set=function(e,t){var n=ca(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Kn.prototype.add=Kn.prototype.push=function(e){return this.__data__.set(e,o),this},Kn.prototype.has=function(e){return this.__data__.has(e)},Yn.prototype.clear=function(){this.__data__=new qn,this.size=0},Yn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Yn.prototype.get=function(e){return this.__data__.get(e)},Yn.prototype.has=function(e){return this.__data__.has(e)},Yn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof qn){var r=n.__data__;if(!Tn||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Gn(r)}return n.set(e,t),this.size=n.size,this};var hr=Pi(wr),pr=Pi(Er,!0);function fr(e,t){var n=!0;return hr(e,(function(e,r,i){return n=!!t(e,r,i)})),n}function mr(e,t,n){for(var r=-1,a=e.length;++r<a;){var o=e[r],s=t(o);if(null!=s&&(l===i?s===s&&!ls(s):n(s,l)))var l=s,c=o}return c}function gr(e,t){var n=[];return hr(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n}function vr(e,t,n,r,i){var a=-1,o=e.length;for(n||(n=va),i||(i=[]);++a<o;){var s=e[a];t>0&&n(s)?t>1?vr(s,t-1,n,r,i):Ot(i,s):r||(i[i.length]=s)}return i}var yr=Mi(),br=Mi(!0);function wr(e,t){return e&&yr(e,t,Ds)}function Er(e,t){return e&&br(e,t,Ds)}function xr(e,t){return Lt(t,(function(t){return Xo(e[t])}))}function _r(e,t){for(var n=0,r=(t=bi(t,e)).length;null!=e&&n<r;)e=e[Oa(t[n++])];return n&&n==r?e:i}function Ar(e,t,n){var r=t(e);return zo(e)?r:Ot(r,n(e))}function Tr(e){return null==e?e===i?"[object Undefined]":"[object Null]":Ze&&Ze in Se(e)?function(e){var t=Ne.call(e,Ze),n=e[Ze];try{e[Ze]=i;var r=!0}catch(o){}var a=Fe.call(e);r&&(t?e[Ze]=n:delete e[Ze]);return a}(e):function(e){return Fe.call(e)}(e)}function Sr(e,t){return e>t}function kr(e,t){return null!=e&&Ne.call(e,t)}function Cr(e,t){return null!=e&&t in Se(e)}function Ir(e,t,r){for(var a=r?Mt:Pt,o=e[0].length,s=e.length,l=s,c=n(s),u=1/0,d=[];l--;){var h=e[l];l&&t&&(h=Nt(h,Jt(t))),u=bn(h.length,u),c[l]=!r&&(t||o>=120&&h.length>=120)?new Kn(l&&h):i}h=e[0];var p=-1,f=c[0];e:for(;++p<o&&d.length<u;){var m=h[p],g=t?t(m):m;if(m=r||0!==m?m:0,!(f?tn(f,g):a(d,g,r))){for(l=s;--l;){var v=c[l];if(!(v?tn(v,g):a(e[l],g,r)))continue e}f&&f.push(g),d.push(m)}}return d}function Rr(e,t,n){var r=null==(e=ka(e,t=bi(t,e)))?e:e[Oa(Ya(t))];return null==r?i:kt(r,e,n)}function Dr(e){return ts(e)&&Tr(e)==y}function Lr(e,t,n,r,a){return e===t||(null==e||null==t||!ts(e)&&!ts(t)?e!==e&&t!==t:function(e,t,n,r,a,o){var s=zo(e),l=zo(t),c=s?b:fa(e),u=l?b:fa(t),d=(c=c==y?k:c)==k,h=(u=u==y?k:u)==k,p=c==u;if(p&&Ko(e)){if(!Ko(t))return!1;s=!0,d=!1}if(p&&!d)return o||(o=new Yn),s||cs(e)?ta(e,t,n,r,a,o):function(e,t,n,r,i,a,o){switch(n){case N:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case M:return!(e.byteLength!=t.byteLength||!a(new ze(e),new ze(t)));case w:case E:case S:return Bo(+e,+t);case x:return e.name==t.name&&e.message==t.message;case I:case D:return e==t+"";case T:var s=cn;case R:var l=1&r;if(s||(s=hn),e.size!=t.size&&!l)return!1;var c=o.get(e);if(c)return c==t;r|=2,o.set(e,t);var u=ta(s(e),s(t),r,i,a,o);return o.delete(e),u;case L:if(Fn)return Fn.call(e)==Fn.call(t)}return!1}(e,t,c,n,r,a,o);if(!(1&n)){var f=d&&Ne.call(e,"__wrapped__"),m=h&&Ne.call(t,"__wrapped__");if(f||m){var g=f?e.value():e,v=m?t.value():t;return o||(o=new Yn),a(g,v,n,r,o)}}if(!p)return!1;return o||(o=new Yn),function(e,t,n,r,a,o){var s=1&n,l=ra(e),c=l.length,u=ra(t),d=u.length;if(c!=d&&!s)return!1;var h=c;for(;h--;){var p=l[h];if(!(s?p in t:Ne.call(t,p)))return!1}var f=o.get(e),m=o.get(t);if(f&&m)return f==t&&m==e;var g=!0;o.set(e,t),o.set(t,e);var v=s;for(;++h<c;){var y=e[p=l[h]],b=t[p];if(r)var w=s?r(b,y,p,t,e,o):r(y,b,p,e,t,o);if(!(w===i?y===b||a(y,b,n,r,o):w)){g=!1;break}v||(v="constructor"==p)}if(g&&!v){var E=e.constructor,x=t.constructor;E==x||!("constructor"in e)||!("constructor"in t)||"function"==typeof E&&E instanceof E&&"function"==typeof x&&x instanceof x||(g=!1)}return o.delete(e),o.delete(t),g}(e,t,n,r,a,o)}(e,t,n,r,Lr,a))}function Pr(e,t,n,r){var a=n.length,o=a,s=!r;if(null==e)return!o;for(e=Se(e);a--;){var l=n[a];if(s&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++a<o;){var c=(l=n[a])[0],u=e[c],d=l[1];if(s&&l[2]){if(u===i&&!(c in e))return!1}else{var h=new Yn;if(r)var p=r(u,d,c,e,t,h);if(!(p===i?Lr(d,u,3,r,h):p))return!1}}return!0}function Mr(e){return!(!es(e)||(t=e,je&&je in t))&&(Xo(e)?$e:ye).test(ja(e));var t}function Nr(e){return"function"==typeof e?e:null==e?rl:"object"==typeof e?zo(e)?$r(e[0],e[1]):Br(e):hl(e)}function Or(e){if(!_a(e))return Bt(e);var t=[];for(var n in Se(e))Ne.call(e,n)&&"constructor"!=n&&t.push(n);return t}function jr(e){if(!es(e))return function(e){var t=[];if(null!=e)for(var n in Se(e))t.push(n);return t}(e);var t=_a(e),n=[];for(var r in e)("constructor"!=r||!t&&Ne.call(e,r))&&n.push(r);return n}function Fr(e,t){return e<t}function Ur(e,t){var r=-1,i=qo(e)?n(e.length):[];return hr(e,(function(e,n,a){i[++r]=t(e,n,a)})),i}function Br(e){var t=ua(e);return 1==t.length&&t[0][2]?Ta(t[0][0],t[0][1]):function(n){return n===e||Pr(n,e,t)}}function $r(e,t){return wa(e)&&Aa(t)?Ta(Oa(e),t):function(n){var r=Ss(n,e);return r===i&&r===t?ks(n,e):Lr(t,r,3)}}function Vr(e,t,n,r,a){e!==t&&yr(t,(function(o,s){if(a||(a=new Yn),es(o))!function(e,t,n,r,a,o,s){var l=Ca(e,n),c=Ca(t,n),u=s.get(c);if(u)return void er(e,n,u);var d=o?o(l,c,n+"",e,t,s):i,h=d===i;if(h){var p=zo(c),f=!p&&Ko(c),m=!p&&!f&&cs(c);d=c,p||f||m?zo(l)?d=l:Go(l)?d=Ii(l):f?(h=!1,d=_i(c,!0)):m?(h=!1,d=Ti(c,!0)):d=[]:is(c)||Wo(c)?(d=l,Wo(l)?d=vs(l):es(l)&&!Xo(l)||(d=ga(c))):h=!1}h&&(s.set(c,d),a(d,c,r,o,s),s.delete(c));er(e,n,d)}(e,t,s,n,Vr,r,a);else{var l=r?r(Ca(e,s),o,s+"",e,t,a):i;l===i&&(l=o),er(e,s,l)}}),Ls)}function Wr(e,t){var n=e.length;if(n)return ya(t+=t<0?n:0,n)?e[t]:i}function zr(e,t,n){t=t.length?Nt(t,(function(e){return zo(e)?function(t){return _r(t,1===e.length?e[0]:e)}:e})):[rl];var r=-1;t=Nt(t,Jt(la()));var i=Ur(e,(function(e,n,i){var a=Nt(t,(function(t){return t(e)}));return{criteria:a,index:++r,value:e}}));return function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(i,(function(e,t){return function(e,t,n){var r=-1,i=e.criteria,a=t.criteria,o=i.length,s=n.length;for(;++r<o;){var l=Si(i[r],a[r]);if(l)return r>=s?l:l*("desc"==n[r]?-1:1)}return e.index-t.index}(e,t,n)}))}function Hr(e,t,n){for(var r=-1,i=t.length,a={};++r<i;){var o=t[r],s=_r(e,o);n(s,o)&&Jr(a,bi(o,e),s)}return a}function qr(e,t,n,r){var i=r?zt:Wt,a=-1,o=t.length,s=e;for(e===t&&(t=Ii(t)),n&&(s=Nt(e,Jt(n)));++a<o;)for(var l=0,c=t[a],u=n?n(c):c;(l=i(s,u,l,r))>-1;)s!==e&&Ye.call(s,l,1),Ye.call(e,l,1);return e}function Gr(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==a){var a=i;ya(i)?Ye.call(e,i,1):di(e,i)}}return e}function Kr(e,t){return e+ft(xn()*(t-e+1))}function Yr(e,t){var n="";if(!e||t<1||t>f)return n;do{t%2&&(n+=e),(t=ft(t/2))&&(e+=e)}while(t);return n}function Qr(e,t){return Da(Sa(e,t,rl),e+"")}function Xr(e){return Xn(Bs(e))}function Zr(e,t){var n=Bs(e);return Ma(n,sr(t,0,n.length))}function Jr(e,t,n,r){if(!es(e))return e;for(var a=-1,o=(t=bi(t,e)).length,s=o-1,l=e;null!=l&&++a<o;){var c=Oa(t[a]),u=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return e;if(a!=s){var d=l[c];(u=r?r(d,c,l):i)===i&&(u=es(d)?d:ya(t[a+1])?[]:{})}tr(l,c,u),l=l[c]}return e}var ei=Rn?function(e,t){return Rn.set(e,t),e}:rl,ti=Je?function(e,t){return Je(e,"toString",{configurable:!0,enumerable:!1,value:el(t),writable:!0})}:rl;function ni(e){return Ma(Bs(e))}function ri(e,t,r){var i=-1,a=e.length;t<0&&(t=-t>a?0:a+t),(r=r>a?a:r)<0&&(r+=a),a=t>r?0:r-t>>>0,t>>>=0;for(var o=n(a);++i<a;)o[i]=e[i+t];return o}function ii(e,t){var n;return hr(e,(function(e,r,i){return!(n=t(e,r,i))})),!!n}function ai(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t===t&&i<=2147483647){for(;r<i;){var a=r+i>>>1,o=e[a];null!==o&&!ls(o)&&(n?o<=t:o<t)?r=a+1:i=a}return i}return oi(e,t,rl,n)}function oi(e,t,n,r){var a=0,o=null==e?0:e.length;if(0===o)return 0;for(var s=(t=n(t))!==t,l=null===t,c=ls(t),u=t===i;a<o;){var d=ft((a+o)/2),h=n(e[d]),p=h!==i,f=null===h,m=h===h,g=ls(h);if(s)var v=r||m;else v=u?m&&(r||p):l?m&&p&&(r||!f):c?m&&p&&!f&&(r||!g):!f&&!g&&(r?h<=t:h<t);v?a=d+1:o=d}return bn(o,4294967294)}function si(e,t){for(var n=-1,r=e.length,i=0,a=[];++n<r;){var o=e[n],s=t?t(o):o;if(!n||!Bo(s,l)){var l=s;a[i++]=0===o?0:o}}return a}function li(e){return"number"==typeof e?e:ls(e)?m:+e}function ci(e){if("string"==typeof e)return e;if(zo(e))return Nt(e,ci)+"";if(ls(e))return Un?Un.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function ui(e,t,n){var r=-1,i=Pt,a=e.length,o=!0,s=[],l=s;if(n)o=!1,i=Mt;else if(a>=200){var c=t?null:Yi(e);if(c)return hn(c);o=!1,i=tn,l=new Kn}else l=t?[]:s;e:for(;++r<a;){var u=e[r],d=t?t(u):u;if(u=n||0!==u?u:0,o&&d===d){for(var h=l.length;h--;)if(l[h]===d)continue e;t&&l.push(d),s.push(u)}else i(l,d,n)||(l!==s&&l.push(d),s.push(u))}return s}function di(e,t){return null==(e=ka(e,t=bi(t,e)))||delete e[Oa(Ya(t))]}function hi(e,t,n,r){return Jr(e,t,n(_r(e,t)),r)}function pi(e,t,n,r){for(var i=e.length,a=r?i:-1;(r?a--:++a<i)&&t(e[a],a,e););return n?ri(e,r?0:a,r?a+1:i):ri(e,r?a+1:0,r?i:a)}function fi(e,t){var n=e;return n instanceof zn&&(n=n.value()),jt(t,(function(e,t){return t.func.apply(t.thisArg,Ot([e],t.args))}),n)}function mi(e,t,r){var i=e.length;if(i<2)return i?ui(e[0]):[];for(var a=-1,o=n(i);++a<i;)for(var s=e[a],l=-1;++l<i;)l!=a&&(o[a]=dr(o[a]||s,e[l],t,r));return ui(vr(o,1),t,r)}function gi(e,t,n){for(var r=-1,a=e.length,o=t.length,s={};++r<a;){var l=r<o?t[r]:i;n(s,e[r],l)}return s}function vi(e){return Go(e)?e:[]}function yi(e){return"function"==typeof e?e:rl}function bi(e,t){return zo(e)?e:wa(e,t)?[e]:Na(ys(e))}var wi=Qr;function Ei(e,t,n){var r=e.length;return n=n===i?r:n,!t&&n>=r?e:ri(e,t,n)}var xi=nt||function(e){return mt.clearTimeout(e)};function _i(e,t){if(t)return e.slice();var n=e.length,r=He?He(n):new e.constructor(n);return e.copy(r),r}function Ai(e){var t=new e.constructor(e.byteLength);return new ze(t).set(new ze(e)),t}function Ti(e,t){var n=t?Ai(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function Si(e,t){if(e!==t){var n=e!==i,r=null===e,a=e===e,o=ls(e),s=t!==i,l=null===t,c=t===t,u=ls(t);if(!l&&!u&&!o&&e>t||o&&s&&c&&!l&&!u||r&&s&&c||!n&&c||!a)return 1;if(!r&&!o&&!u&&e<t||u&&n&&a&&!r&&!o||l&&n&&a||!s&&a||!c)return-1}return 0}function ki(e,t,r,i){for(var a=-1,o=e.length,s=r.length,l=-1,c=t.length,u=Kt(o-s,0),d=n(c+u),h=!i;++l<c;)d[l]=t[l];for(;++a<s;)(h||a<o)&&(d[r[a]]=e[a]);for(;u--;)d[l++]=e[a++];return d}function Ci(e,t,r,i){for(var a=-1,o=e.length,s=-1,l=r.length,c=-1,u=t.length,d=Kt(o-l,0),h=n(d+u),p=!i;++a<d;)h[a]=e[a];for(var f=a;++c<u;)h[f+c]=t[c];for(;++s<l;)(p||a<o)&&(h[f+r[s]]=e[a++]);return h}function Ii(e,t){var r=-1,i=e.length;for(t||(t=n(i));++r<i;)t[r]=e[r];return t}function Ri(e,t,n,r){var a=!n;n||(n={});for(var o=-1,s=t.length;++o<s;){var l=t[o],c=r?r(n[l],e[l],l,n,e):i;c===i&&(c=e[l]),a?ar(n,l,c):tr(n,l,c)}return n}function Di(e,t){return function(n,r){var i=zo(n)?Ct:rr,a=t?t():{};return i(n,e,la(r,2),a)}}function Li(e){return Qr((function(t,n){var r=-1,a=n.length,o=a>1?n[a-1]:i,s=a>2?n[2]:i;for(o=e.length>3&&"function"==typeof o?(a--,o):i,s&&ba(n[0],n[1],s)&&(o=a<3?i:o,a=1),t=Se(t);++r<a;){var l=n[r];l&&e(t,l,r,o)}return t}))}function Pi(e,t){return function(n,r){if(null==n)return n;if(!qo(n))return e(n,r);for(var i=n.length,a=t?i:-1,o=Se(n);(t?a--:++a<i)&&!1!==r(o[a],a,o););return n}}function Mi(e){return function(t,n,r){for(var i=-1,a=Se(t),o=r(t),s=o.length;s--;){var l=o[e?s:++i];if(!1===n(a[l],l,a))break}return t}}function Ni(e){return function(t){var n=ln(t=ys(t))?mn(t):i,r=n?n[0]:t.charAt(0),a=n?Ei(n,1).join(""):t.slice(1);return r[e]()+a}}function Oi(e){return function(t){return jt(Xs(Ws(t).replace(et,"")),e,"")}}function ji(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=$n(e.prototype),r=e.apply(n,t);return es(r)?r:n}}function Fi(e){return function(t,n,r){var a=Se(t);if(!qo(t)){var o=la(n,3);t=Ds(t),n=function(e){return o(a[e],e,a)}}var s=e(t,n,r);return s>-1?a[o?t[s]:s]:i}}function Ui(e){return na((function(t){var n=t.length,r=n,o=Wn.prototype.thru;for(e&&t.reverse();r--;){var s=t[r];if("function"!=typeof s)throw new Ie(a);if(o&&!l&&"wrapper"==oa(s))var l=new Wn([],!0)}for(r=l?r:n;++r<n;){var c=oa(s=t[r]),u="wrapper"==c?aa(s):i;l=u&&Ea(u[0])&&424==u[1]&&!u[4].length&&1==u[9]?l[oa(u[0])].apply(l,u[3]):1==s.length&&Ea(s)?l[c]():l.thru(s)}return function(){var e=arguments,r=e[0];if(l&&1==e.length&&zo(r))return l.plant(r).value();for(var i=0,a=n?t[i].apply(this,e):r;++i<n;)a=t[i].call(this,a);return a}}))}function Bi(e,t,r,a,o,s,l,c,u,h){var p=t&d,f=1&t,m=2&t,g=24&t,v=512&t,y=m?i:ji(e);return function d(){for(var b=arguments.length,w=n(b),E=b;E--;)w[E]=arguments[E];if(g)var x=sa(d),_=function(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}(w,x);if(a&&(w=ki(w,a,o,g)),s&&(w=Ci(w,s,l,g)),b-=_,g&&b<h){var A=dn(w,x);return Gi(e,t,Bi,d.placeholder,r,w,A,c,u,h-b)}var T=f?r:this,S=m?T[e]:e;return b=w.length,c?w=function(e,t){var n=e.length,r=bn(t.length,n),a=Ii(e);for(;r--;){var o=t[r];e[r]=ya(o,n)?a[o]:i}return e}(w,c):v&&b>1&&w.reverse(),p&&u<b&&(w.length=u),this&&this!==mt&&this instanceof d&&(S=y||ji(S)),S.apply(T,w)}}function $i(e,t){return function(n,r){return function(e,t,n,r){return wr(e,(function(e,i,a){t(r,n(e),i,a)})),r}(n,e,t(r),{})}}function Vi(e,t){return function(n,r){var a;if(n===i&&r===i)return t;if(n!==i&&(a=n),r!==i){if(a===i)return r;"string"==typeof n||"string"==typeof r?(n=ci(n),r=ci(r)):(n=li(n),r=li(r)),a=e(n,r)}return a}}function Wi(e){return na((function(t){return t=Nt(t,Jt(la())),Qr((function(n){var r=this;return e(t,(function(e){return kt(e,r,n)}))}))}))}function zi(e,t){var n=(t=t===i?" ":ci(t)).length;if(n<2)return n?Yr(t,e):t;var r=Yr(t,pt(e/fn(t)));return ln(t)?Ei(mn(r),0,e).join(""):r.slice(0,e)}function Hi(e){return function(t,r,a){return a&&"number"!=typeof a&&ba(t,r,a)&&(r=a=i),t=ps(t),r===i?(r=t,t=0):r=ps(r),function(e,t,r,i){for(var a=-1,o=Kt(pt((t-e)/(r||1)),0),s=n(o);o--;)s[i?o:++a]=e,e+=r;return s}(t,r,a=a===i?t<r?1:-1:ps(a),e)}}function qi(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=gs(t),n=gs(n)),e(t,n)}}function Gi(e,t,n,r,a,o,s,l,d,h){var p=8&t;t|=p?c:u,4&(t&=~(p?u:c))||(t&=-4);var f=[e,t,a,p?o:i,p?s:i,p?i:o,p?i:s,l,d,h],m=n.apply(i,f);return Ea(e)&&Ia(m,f),m.placeholder=r,La(m,e,t)}function Ki(e){var t=Te[e];return function(e,n){if(e=gs(e),(n=null==n?0:bn(fs(n),292))&&bt(e)){var r=(ys(e)+"e").split("e");return+((r=(ys(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var Yi=kn&&1/hn(new kn([,-0]))[1]==p?function(e){return new kn(e)}:ll;function Qi(e){return function(t){var n=fa(t);return n==T?cn(t):n==R?pn(t):function(e,t){return Nt(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function Xi(e,t,r,o,p,f,m,g){var v=2&t;if(!v&&"function"!=typeof e)throw new Ie(a);var y=o?o.length:0;if(y||(t&=-97,o=p=i),m=m===i?m:Kt(fs(m),0),g=g===i?g:fs(g),y-=p?p.length:0,t&u){var b=o,w=p;o=p=i}var E=v?i:aa(e),x=[e,t,r,o,p,b,w,f,m,g];if(E&&function(e,t){var n=e[1],r=t[1],i=n|r,a=i<131,o=r==d&&8==n||r==d&&n==h&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;if(!a&&!o)return e;1&r&&(e[2]=t[2],i|=1&n?0:4);var l=t[3];if(l){var c=e[3];e[3]=c?ki(c,l,t[4]):l,e[4]=c?dn(e[3],s):t[4]}(l=t[5])&&(c=e[5],e[5]=c?Ci(c,l,t[6]):l,e[6]=c?dn(e[5],s):t[6]);(l=t[7])&&(e[7]=l);r&d&&(e[8]=null==e[8]?t[8]:bn(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0],e[1]=i}(x,E),e=x[0],t=x[1],r=x[2],o=x[3],p=x[4],!(g=x[9]=x[9]===i?v?0:e.length:Kt(x[9]-y,0))&&24&t&&(t&=-25),t&&1!=t)_=8==t||t==l?function(e,t,r){var a=ji(e);return function o(){for(var s=arguments.length,l=n(s),c=s,u=sa(o);c--;)l[c]=arguments[c];var d=s<3&&l[0]!==u&&l[s-1]!==u?[]:dn(l,u);return(s-=d.length)<r?Gi(e,t,Bi,o.placeholder,i,l,d,i,i,r-s):kt(this&&this!==mt&&this instanceof o?a:e,this,l)}}(e,t,g):t!=c&&33!=t||p.length?Bi.apply(i,x):function(e,t,r,i){var a=1&t,o=ji(e);return function t(){for(var s=-1,l=arguments.length,c=-1,u=i.length,d=n(u+l),h=this&&this!==mt&&this instanceof t?o:e;++c<u;)d[c]=i[c];for(;l--;)d[c++]=arguments[++s];return kt(h,a?r:this,d)}}(e,t,r,o);else var _=function(e,t,n){var r=1&t,i=ji(e);return function t(){return(this&&this!==mt&&this instanceof t?i:e).apply(r?n:this,arguments)}}(e,t,r);return La((E?ei:Ia)(_,x),e,t)}function Zi(e,t,n,r){return e===i||Bo(e,Le[n])&&!Ne.call(r,n)?t:e}function Ji(e,t,n,r,a,o){return es(e)&&es(t)&&(o.set(t,e),Vr(e,t,i,Ji,o),o.delete(t)),e}function ea(e){return is(e)?i:e}function ta(e,t,n,r,a,o){var s=1&n,l=e.length,c=t.length;if(l!=c&&!(s&&c>l))return!1;var u=o.get(e),d=o.get(t);if(u&&d)return u==t&&d==e;var h=-1,p=!0,f=2&n?new Kn:i;for(o.set(e,t),o.set(t,e);++h<l;){var m=e[h],g=t[h];if(r)var v=s?r(g,m,h,t,e,o):r(m,g,h,e,t,o);if(v!==i){if(v)continue;p=!1;break}if(f){if(!Ut(t,(function(e,t){if(!tn(f,t)&&(m===e||a(m,e,n,r,o)))return f.push(t)}))){p=!1;break}}else if(m!==g&&!a(m,g,n,r,o)){p=!1;break}}return o.delete(e),o.delete(t),p}function na(e){return Da(Sa(e,i,za),e+"")}function ra(e){return Ar(e,Ds,ha)}function ia(e){return Ar(e,Ls,pa)}var aa=Rn?function(e){return Rn.get(e)}:ll;function oa(e){for(var t=e.name+"",n=Dn[t],r=Ne.call(Dn,t)?n.length:0;r--;){var i=n[r],a=i.func;if(null==a||a==e)return i.name}return t}function sa(e){return(Ne.call(Bn,"placeholder")?Bn:e).placeholder}function la(){var e=Bn.iteratee||il;return e=e===il?Nr:e,arguments.length?e(arguments[0],arguments[1]):e}function ca(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function ua(e){for(var t=Ds(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,Aa(i)]}return t}function da(e,t){var n=function(e,t){return null==e?i:e[t]}(e,t);return Mr(n)?n:i}var ha=gt?function(e){return null==e?[]:(e=Se(e),Lt(gt(e),(function(t){return Ke.call(e,t)})))}:ml,pa=gt?function(e){for(var t=[];e;)Ot(t,ha(e)),e=qe(e);return t}:ml,fa=Tr;function ma(e,t,n){for(var r=-1,i=(t=bi(t,e)).length,a=!1;++r<i;){var o=Oa(t[r]);if(!(a=null!=e&&n(e,o)))break;e=e[o]}return a||++r!=i?a:!!(i=null==e?0:e.length)&&Jo(i)&&ya(o,i)&&(zo(e)||Wo(e))}function ga(e){return"function"!=typeof e.constructor||_a(e)?{}:$n(qe(e))}function va(e){return zo(e)||Wo(e)||!!(Qe&&e&&e[Qe])}function ya(e,t){var n=typeof e;return!!(t=null==t?f:t)&&("number"==n||"symbol"!=n&&we.test(e))&&e>-1&&e%1==0&&e<t}function ba(e,t,n){if(!es(n))return!1;var r=typeof t;return!!("number"==r?qo(n)&&ya(t,n.length):"string"==r&&t in n)&&Bo(n[t],e)}function wa(e,t){if(zo(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!ls(e))||(ne.test(e)||!te.test(e)||null!=t&&e in Se(t))}function Ea(e){var t=oa(e),n=Bn[t];if("function"!=typeof n||!(t in zn.prototype))return!1;if(e===n)return!0;var r=aa(n);return!!r&&e===r[0]}(An&&fa(new An(new ArrayBuffer(1)))!=N||Tn&&fa(new Tn)!=T||Sn&&fa(Sn.resolve())!=C||kn&&fa(new kn)!=R||Cn&&fa(new Cn)!=P)&&(fa=function(e){var t=Tr(e),n=t==k?e.constructor:i,r=n?ja(n):"";if(r)switch(r){case Ln:return N;case Pn:return T;case Mn:return C;case Nn:return R;case On:return P}return t});var xa=Pe?Xo:gl;function _a(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Le)}function Aa(e){return e===e&&!es(e)}function Ta(e,t){return function(n){return null!=n&&(n[e]===t&&(t!==i||e in Se(n)))}}function Sa(e,t,r){return t=Kt(t===i?e.length-1:t,0),function(){for(var i=arguments,a=-1,o=Kt(i.length-t,0),s=n(o);++a<o;)s[a]=i[t+a];a=-1;for(var l=n(t+1);++a<t;)l[a]=i[a];return l[t]=r(s),kt(e,this,l)}}function ka(e,t){return t.length<2?e:_r(e,ri(t,0,-1))}function Ca(e,t){if(("constructor"!==t||"function"!==typeof e[t])&&"__proto__"!=t)return e[t]}var Ia=Pa(ei),Ra=ut||function(e,t){return mt.setTimeout(e,t)},Da=Pa(ti);function La(e,t,n){var r=t+"";return Da(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(le,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return It(v,(function(n){var r="_."+n[0];t&n[1]&&!Pt(e,r)&&e.push(r)})),e.sort()}(function(e){var t=e.match(ce);return t?t[1].split(ue):[]}(r),n)))}function Pa(e){var t=0,n=0;return function(){var r=wn(),a=16-(r-n);if(n=r,a>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(i,arguments)}}function Ma(e,t){var n=-1,r=e.length,a=r-1;for(t=t===i?r:t;++n<t;){var o=Kr(n,a),s=e[o];e[o]=e[n],e[n]=s}return e.length=t,e}var Na=function(e){var t=Mo(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(re,(function(e,n,r,i){t.push(r?i.replace(pe,"$1"):n||e)})),t}));function Oa(e){if("string"==typeof e||ls(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function ja(e){if(null!=e){try{return Me.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function Fa(e){if(e instanceof zn)return e.clone();var t=new Wn(e.__wrapped__,e.__chain__);return t.__actions__=Ii(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Ua=Qr((function(e,t){return Go(e)?dr(e,vr(t,1,Go,!0)):[]})),Ba=Qr((function(e,t){var n=Ya(t);return Go(n)&&(n=i),Go(e)?dr(e,vr(t,1,Go,!0),la(n,2)):[]})),$a=Qr((function(e,t){var n=Ya(t);return Go(n)&&(n=i),Go(e)?dr(e,vr(t,1,Go,!0),i,n):[]}));function Va(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:fs(n);return i<0&&(i=Kt(r+i,0)),Vt(e,la(t,3),i)}function Wa(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var a=r-1;return n!==i&&(a=fs(n),a=n<0?Kt(r+a,0):bn(a,r-1)),Vt(e,la(t,3),a,!0)}function za(e){return(null==e?0:e.length)?vr(e,1):[]}function Ha(e){return e&&e.length?e[0]:i}var qa=Qr((function(e){var t=Nt(e,vi);return t.length&&t[0]===e[0]?Ir(t):[]})),Ga=Qr((function(e){var t=Ya(e),n=Nt(e,vi);return t===Ya(n)?t=i:n.pop(),n.length&&n[0]===e[0]?Ir(n,la(t,2)):[]})),Ka=Qr((function(e){var t=Ya(e),n=Nt(e,vi);return(t="function"==typeof t?t:i)&&n.pop(),n.length&&n[0]===e[0]?Ir(n,i,t):[]}));function Ya(e){var t=null==e?0:e.length;return t?e[t-1]:i}var Qa=Qr(Xa);function Xa(e,t){return e&&e.length&&t&&t.length?qr(e,t):e}var Za=na((function(e,t){var n=null==e?0:e.length,r=or(e,t);return Gr(e,Nt(t,(function(e){return ya(e,n)?+e:e})).sort(Si)),r}));function Ja(e){return null==e?e:_n.call(e)}var eo=Qr((function(e){return ui(vr(e,1,Go,!0))})),to=Qr((function(e){var t=Ya(e);return Go(t)&&(t=i),ui(vr(e,1,Go,!0),la(t,2))})),no=Qr((function(e){var t=Ya(e);return t="function"==typeof t?t:i,ui(vr(e,1,Go,!0),i,t)}));function ro(e){if(!e||!e.length)return[];var t=0;return e=Lt(e,(function(e){if(Go(e))return t=Kt(e.length,t),!0})),Xt(t,(function(t){return Nt(e,Gt(t))}))}function io(e,t){if(!e||!e.length)return[];var n=ro(e);return null==t?n:Nt(n,(function(e){return kt(t,i,e)}))}var ao=Qr((function(e,t){return Go(e)?dr(e,t):[]})),oo=Qr((function(e){return mi(Lt(e,Go))})),so=Qr((function(e){var t=Ya(e);return Go(t)&&(t=i),mi(Lt(e,Go),la(t,2))})),lo=Qr((function(e){var t=Ya(e);return t="function"==typeof t?t:i,mi(Lt(e,Go),i,t)})),co=Qr(ro);var uo=Qr((function(e){var t=e.length,n=t>1?e[t-1]:i;return n="function"==typeof n?(e.pop(),n):i,io(e,n)}));function ho(e){var t=Bn(e);return t.__chain__=!0,t}function po(e,t){return t(e)}var fo=na((function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,a=function(t){return or(t,e)};return!(t>1||this.__actions__.length)&&r instanceof zn&&ya(n)?((r=r.slice(n,+n+(t?1:0))).__actions__.push({func:po,args:[a],thisArg:i}),new Wn(r,this.__chain__).thru((function(e){return t&&!e.length&&e.push(i),e}))):this.thru(a)}));var mo=Di((function(e,t,n){Ne.call(e,n)?++e[n]:ar(e,n,1)}));var go=Fi(Va),vo=Fi(Wa);function yo(e,t){return(zo(e)?It:hr)(e,la(t,3))}function bo(e,t){return(zo(e)?Rt:pr)(e,la(t,3))}var wo=Di((function(e,t,n){Ne.call(e,n)?e[n].push(t):ar(e,n,[t])}));var Eo=Qr((function(e,t,r){var i=-1,a="function"==typeof t,o=qo(e)?n(e.length):[];return hr(e,(function(e){o[++i]=a?kt(t,e,r):Rr(e,t,r)})),o})),xo=Di((function(e,t,n){ar(e,n,t)}));function _o(e,t){return(zo(e)?Nt:Ur)(e,la(t,3))}var Ao=Di((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]}));var To=Qr((function(e,t){if(null==e)return[];var n=t.length;return n>1&&ba(e,t[0],t[1])?t=[]:n>2&&ba(t[0],t[1],t[2])&&(t=[t[0]]),zr(e,vr(t,1),[])})),So=it||function(){return mt.Date.now()};function ko(e,t,n){return t=n?i:t,t=e&&null==t?e.length:t,Xi(e,d,i,i,i,i,t)}function Co(e,t){var n;if("function"!=typeof t)throw new Ie(a);return e=fs(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=i),n}}var Io=Qr((function(e,t,n){var r=1;if(n.length){var i=dn(n,sa(Io));r|=c}return Xi(e,r,t,n,i)})),Ro=Qr((function(e,t,n){var r=3;if(n.length){var i=dn(n,sa(Ro));r|=c}return Xi(t,r,e,n,i)}));function Do(e,t,n){var r,o,s,l,c,u,d=0,h=!1,p=!1,f=!0;if("function"!=typeof e)throw new Ie(a);function m(t){var n=r,a=o;return r=o=i,d=t,l=e.apply(a,n)}function g(e){var n=e-u;return u===i||n>=t||n<0||p&&e-d>=s}function v(){var e=So();if(g(e))return y(e);c=Ra(v,function(e){var n=t-(e-u);return p?bn(n,s-(e-d)):n}(e))}function y(e){return c=i,f&&r?m(e):(r=o=i,l)}function b(){var e=So(),n=g(e);if(r=arguments,o=this,u=e,n){if(c===i)return function(e){return d=e,c=Ra(v,t),h?m(e):l}(u);if(p)return xi(c),c=Ra(v,t),m(u)}return c===i&&(c=Ra(v,t)),l}return t=gs(t)||0,es(n)&&(h=!!n.leading,s=(p="maxWait"in n)?Kt(gs(n.maxWait)||0,t):s,f="trailing"in n?!!n.trailing:f),b.cancel=function(){c!==i&&xi(c),d=0,r=u=o=c=i},b.flush=function(){return c===i?l:y(So())},b}var Lo=Qr((function(e,t){return ur(e,1,t)})),Po=Qr((function(e,t,n){return ur(e,gs(t)||0,n)}));function Mo(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Ie(a);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=e.apply(this,r);return n.cache=a.set(i,o)||a,o};return n.cache=new(Mo.Cache||Gn),n}function No(e){if("function"!=typeof e)throw new Ie(a);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Mo.Cache=Gn;var Oo=wi((function(e,t){var n=(t=1==t.length&&zo(t[0])?Nt(t[0],Jt(la())):Nt(vr(t,1),Jt(la()))).length;return Qr((function(r){for(var i=-1,a=bn(r.length,n);++i<a;)r[i]=t[i].call(this,r[i]);return kt(e,this,r)}))})),jo=Qr((function(e,t){var n=dn(t,sa(jo));return Xi(e,c,i,t,n)})),Fo=Qr((function(e,t){var n=dn(t,sa(Fo));return Xi(e,u,i,t,n)})),Uo=na((function(e,t){return Xi(e,h,i,i,i,t)}));function Bo(e,t){return e===t||e!==e&&t!==t}var $o=qi(Sr),Vo=qi((function(e,t){return e>=t})),Wo=Dr(function(){return arguments}())?Dr:function(e){return ts(e)&&Ne.call(e,"callee")&&!Ke.call(e,"callee")},zo=n.isArray,Ho=Et?Jt(Et):function(e){return ts(e)&&Tr(e)==M};function qo(e){return null!=e&&Jo(e.length)&&!Xo(e)}function Go(e){return ts(e)&&qo(e)}var Ko=vt||gl,Yo=xt?Jt(xt):function(e){return ts(e)&&Tr(e)==E};function Qo(e){if(!ts(e))return!1;var t=Tr(e);return t==x||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!is(e)}function Xo(e){if(!es(e))return!1;var t=Tr(e);return t==_||t==A||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Zo(e){return"number"==typeof e&&e==fs(e)}function Jo(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=f}function es(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function ts(e){return null!=e&&"object"==typeof e}var ns=_t?Jt(_t):function(e){return ts(e)&&fa(e)==T};function rs(e){return"number"==typeof e||ts(e)&&Tr(e)==S}function is(e){if(!ts(e)||Tr(e)!=k)return!1;var t=qe(e);if(null===t)return!0;var n=Ne.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Me.call(n)==Ue}var as=At?Jt(At):function(e){return ts(e)&&Tr(e)==I};var os=Tt?Jt(Tt):function(e){return ts(e)&&fa(e)==R};function ss(e){return"string"==typeof e||!zo(e)&&ts(e)&&Tr(e)==D}function ls(e){return"symbol"==typeof e||ts(e)&&Tr(e)==L}var cs=St?Jt(St):function(e){return ts(e)&&Jo(e.length)&&!!lt[Tr(e)]};var us=qi(Fr),ds=qi((function(e,t){return e<=t}));function hs(e){if(!e)return[];if(qo(e))return ss(e)?mn(e):Ii(e);if(Xe&&e[Xe])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[Xe]());var t=fa(e);return(t==T?cn:t==R?hn:Bs)(e)}function ps(e){return e?(e=gs(e))===p||e===-1/0?17976931348623157e292*(e<0?-1:1):e===e?e:0:0===e?e:0}function fs(e){var t=ps(e),n=t%1;return t===t?n?t-n:t:0}function ms(e){return e?sr(fs(e),0,g):0}function gs(e){if("number"==typeof e)return e;if(ls(e))return m;if(es(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=es(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Zt(e);var n=ve.test(e);return n||be.test(e)?ht(e.slice(2),n?2:8):ge.test(e)?m:+e}function vs(e){return Ri(e,Ls(e))}function ys(e){return null==e?"":ci(e)}var bs=Li((function(e,t){if(_a(t)||qo(t))Ri(t,Ds(t),e);else for(var n in t)Ne.call(t,n)&&tr(e,n,t[n])})),ws=Li((function(e,t){Ri(t,Ls(t),e)})),Es=Li((function(e,t,n,r){Ri(t,Ls(t),e,r)})),xs=Li((function(e,t,n,r){Ri(t,Ds(t),e,r)})),_s=na(or);var As=Qr((function(e,t){e=Se(e);var n=-1,r=t.length,a=r>2?t[2]:i;for(a&&ba(t[0],t[1],a)&&(r=1);++n<r;)for(var o=t[n],s=Ls(o),l=-1,c=s.length;++l<c;){var u=s[l],d=e[u];(d===i||Bo(d,Le[u])&&!Ne.call(e,u))&&(e[u]=o[u])}return e})),Ts=Qr((function(e){return e.push(i,Ji),kt(Ms,i,e)}));function Ss(e,t,n){var r=null==e?i:_r(e,t);return r===i?n:r}function ks(e,t){return null!=e&&ma(e,t,Cr)}var Cs=$i((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Fe.call(t)),e[t]=n}),el(rl)),Is=$i((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Fe.call(t)),Ne.call(e,t)?e[t].push(n):e[t]=[n]}),la),Rs=Qr(Rr);function Ds(e){return qo(e)?Qn(e):Or(e)}function Ls(e){return qo(e)?Qn(e,!0):jr(e)}var Ps=Li((function(e,t,n){Vr(e,t,n)})),Ms=Li((function(e,t,n,r){Vr(e,t,n,r)})),Ns=na((function(e,t){var n={};if(null==e)return n;var r=!1;t=Nt(t,(function(t){return t=bi(t,e),r||(r=t.length>1),t})),Ri(e,ia(e),n),r&&(n=lr(n,7,ea));for(var i=t.length;i--;)di(n,t[i]);return n}));var Os=na((function(e,t){return null==e?{}:function(e,t){return Hr(e,t,(function(t,n){return ks(e,n)}))}(e,t)}));function js(e,t){if(null==e)return{};var n=Nt(ia(e),(function(e){return[e]}));return t=la(t),Hr(e,n,(function(e,n){return t(e,n[0])}))}var Fs=Qi(Ds),Us=Qi(Ls);function Bs(e){return null==e?[]:en(e,Ds(e))}var $s=Oi((function(e,t,n){return t=t.toLowerCase(),e+(n?Vs(t):t)}));function Vs(e){return Qs(ys(e).toLowerCase())}function Ws(e){return(e=ys(e))&&e.replace(Ee,an).replace(tt,"")}var zs=Oi((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),Hs=Oi((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),qs=Ni("toLowerCase");var Gs=Oi((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}));var Ks=Oi((function(e,t,n){return e+(n?" ":"")+Qs(t)}));var Ys=Oi((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),Qs=Ni("toUpperCase");function Xs(e,t,n){return e=ys(e),(t=n?i:t)===i?function(e){return at.test(e)}(e)?function(e){return e.match(rt)||[]}(e):function(e){return e.match(de)||[]}(e):e.match(t)||[]}var Zs=Qr((function(e,t){try{return kt(e,i,t)}catch(n){return Qo(n)?n:new se(n)}})),Js=na((function(e,t){return It(t,(function(t){t=Oa(t),ar(e,t,Io(e[t],e))})),e}));function el(e){return function(){return e}}var tl=Ui(),nl=Ui(!0);function rl(e){return e}function il(e){return Nr("function"==typeof e?e:lr(e,1))}var al=Qr((function(e,t){return function(n){return Rr(n,e,t)}})),ol=Qr((function(e,t){return function(n){return Rr(e,n,t)}}));function sl(e,t,n){var r=Ds(t),i=xr(t,r);null!=n||es(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=xr(t,Ds(t)));var a=!(es(n)&&"chain"in n)||!!n.chain,o=Xo(e);return It(i,(function(n){var r=t[n];e[n]=r,o&&(e.prototype[n]=function(){var t=this.__chain__;if(a||t){var n=e(this.__wrapped__);return(n.__actions__=Ii(this.__actions__)).push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,Ot([this.value()],arguments))})})),e}function ll(){}var cl=Wi(Nt),ul=Wi(Dt),dl=Wi(Ut);function hl(e){return wa(e)?Gt(Oa(e)):function(e){return function(t){return _r(t,e)}}(e)}var pl=Hi(),fl=Hi(!0);function ml(){return[]}function gl(){return!1}var vl=Vi((function(e,t){return e+t}),0),yl=Ki("ceil"),bl=Vi((function(e,t){return e/t}),1),wl=Ki("floor");var El=Vi((function(e,t){return e*t}),1),xl=Ki("round"),_l=Vi((function(e,t){return e-t}),0);return Bn.after=function(e,t){if("function"!=typeof t)throw new Ie(a);return e=fs(e),function(){if(--e<1)return t.apply(this,arguments)}},Bn.ary=ko,Bn.assign=bs,Bn.assignIn=ws,Bn.assignInWith=Es,Bn.assignWith=xs,Bn.at=_s,Bn.before=Co,Bn.bind=Io,Bn.bindAll=Js,Bn.bindKey=Ro,Bn.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return zo(e)?e:[e]},Bn.chain=ho,Bn.chunk=function(e,t,r){t=(r?ba(e,t,r):t===i)?1:Kt(fs(t),0);var a=null==e?0:e.length;if(!a||t<1)return[];for(var o=0,s=0,l=n(pt(a/t));o<a;)l[s++]=ri(e,o,o+=t);return l},Bn.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var a=e[t];a&&(i[r++]=a)}return i},Bn.concat=function(){var e=arguments.length;if(!e)return[];for(var t=n(e-1),r=arguments[0],i=e;i--;)t[i-1]=arguments[i];return Ot(zo(r)?Ii(r):[r],vr(t,1))},Bn.cond=function(e){var t=null==e?0:e.length,n=la();return e=t?Nt(e,(function(e){if("function"!=typeof e[1])throw new Ie(a);return[n(e[0]),e[1]]})):[],Qr((function(n){for(var r=-1;++r<t;){var i=e[r];if(kt(i[0],this,n))return kt(i[1],this,n)}}))},Bn.conforms=function(e){return function(e){var t=Ds(e);return function(n){return cr(n,e,t)}}(lr(e,1))},Bn.constant=el,Bn.countBy=mo,Bn.create=function(e,t){var n=$n(e);return null==t?n:ir(n,t)},Bn.curry=function e(t,n,r){var a=Xi(t,8,i,i,i,i,i,n=r?i:n);return a.placeholder=e.placeholder,a},Bn.curryRight=function e(t,n,r){var a=Xi(t,l,i,i,i,i,i,n=r?i:n);return a.placeholder=e.placeholder,a},Bn.debounce=Do,Bn.defaults=As,Bn.defaultsDeep=Ts,Bn.defer=Lo,Bn.delay=Po,Bn.difference=Ua,Bn.differenceBy=Ba,Bn.differenceWith=$a,Bn.drop=function(e,t,n){var r=null==e?0:e.length;return r?ri(e,(t=n||t===i?1:fs(t))<0?0:t,r):[]},Bn.dropRight=function(e,t,n){var r=null==e?0:e.length;return r?ri(e,0,(t=r-(t=n||t===i?1:fs(t)))<0?0:t):[]},Bn.dropRightWhile=function(e,t){return e&&e.length?pi(e,la(t,3),!0,!0):[]},Bn.dropWhile=function(e,t){return e&&e.length?pi(e,la(t,3),!0):[]},Bn.fill=function(e,t,n,r){var a=null==e?0:e.length;return a?(n&&"number"!=typeof n&&ba(e,t,n)&&(n=0,r=a),function(e,t,n,r){var a=e.length;for((n=fs(n))<0&&(n=-n>a?0:a+n),(r=r===i||r>a?a:fs(r))<0&&(r+=a),r=n>r?0:ms(r);n<r;)e[n++]=t;return e}(e,t,n,r)):[]},Bn.filter=function(e,t){return(zo(e)?Lt:gr)(e,la(t,3))},Bn.flatMap=function(e,t){return vr(_o(e,t),1)},Bn.flatMapDeep=function(e,t){return vr(_o(e,t),p)},Bn.flatMapDepth=function(e,t,n){return n=n===i?1:fs(n),vr(_o(e,t),n)},Bn.flatten=za,Bn.flattenDeep=function(e){return(null==e?0:e.length)?vr(e,p):[]},Bn.flattenDepth=function(e,t){return(null==e?0:e.length)?vr(e,t=t===i?1:fs(t)):[]},Bn.flip=function(e){return Xi(e,512)},Bn.flow=tl,Bn.flowRight=nl,Bn.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},Bn.functions=function(e){return null==e?[]:xr(e,Ds(e))},Bn.functionsIn=function(e){return null==e?[]:xr(e,Ls(e))},Bn.groupBy=wo,Bn.initial=function(e){return(null==e?0:e.length)?ri(e,0,-1):[]},Bn.intersection=qa,Bn.intersectionBy=Ga,Bn.intersectionWith=Ka,Bn.invert=Cs,Bn.invertBy=Is,Bn.invokeMap=Eo,Bn.iteratee=il,Bn.keyBy=xo,Bn.keys=Ds,Bn.keysIn=Ls,Bn.map=_o,Bn.mapKeys=function(e,t){var n={};return t=la(t,3),wr(e,(function(e,r,i){ar(n,t(e,r,i),e)})),n},Bn.mapValues=function(e,t){var n={};return t=la(t,3),wr(e,(function(e,r,i){ar(n,r,t(e,r,i))})),n},Bn.matches=function(e){return Br(lr(e,1))},Bn.matchesProperty=function(e,t){return $r(e,lr(t,1))},Bn.memoize=Mo,Bn.merge=Ps,Bn.mergeWith=Ms,Bn.method=al,Bn.methodOf=ol,Bn.mixin=sl,Bn.negate=No,Bn.nthArg=function(e){return e=fs(e),Qr((function(t){return Wr(t,e)}))},Bn.omit=Ns,Bn.omitBy=function(e,t){return js(e,No(la(t)))},Bn.once=function(e){return Co(2,e)},Bn.orderBy=function(e,t,n,r){return null==e?[]:(zo(t)||(t=null==t?[]:[t]),zo(n=r?i:n)||(n=null==n?[]:[n]),zr(e,t,n))},Bn.over=cl,Bn.overArgs=Oo,Bn.overEvery=ul,Bn.overSome=dl,Bn.partial=jo,Bn.partialRight=Fo,Bn.partition=Ao,Bn.pick=Os,Bn.pickBy=js,Bn.property=hl,Bn.propertyOf=function(e){return function(t){return null==e?i:_r(e,t)}},Bn.pull=Qa,Bn.pullAll=Xa,Bn.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?qr(e,t,la(n,2)):e},Bn.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?qr(e,t,i,n):e},Bn.pullAt=Za,Bn.range=pl,Bn.rangeRight=fl,Bn.rearg=Uo,Bn.reject=function(e,t){return(zo(e)?Lt:gr)(e,No(la(t,3)))},Bn.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],a=e.length;for(t=la(t,3);++r<a;){var o=e[r];t(o,r,e)&&(n.push(o),i.push(r))}return Gr(e,i),n},Bn.rest=function(e,t){if("function"!=typeof e)throw new Ie(a);return Qr(e,t=t===i?t:fs(t))},Bn.reverse=Ja,Bn.sampleSize=function(e,t,n){return t=(n?ba(e,t,n):t===i)?1:fs(t),(zo(e)?Zn:Zr)(e,t)},Bn.set=function(e,t,n){return null==e?e:Jr(e,t,n)},Bn.setWith=function(e,t,n,r){return r="function"==typeof r?r:i,null==e?e:Jr(e,t,n,r)},Bn.shuffle=function(e){return(zo(e)?Jn:ni)(e)},Bn.slice=function(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&ba(e,t,n)?(t=0,n=r):(t=null==t?0:fs(t),n=n===i?r:fs(n)),ri(e,t,n)):[]},Bn.sortBy=To,Bn.sortedUniq=function(e){return e&&e.length?si(e):[]},Bn.sortedUniqBy=function(e,t){return e&&e.length?si(e,la(t,2)):[]},Bn.split=function(e,t,n){return n&&"number"!=typeof n&&ba(e,t,n)&&(t=n=i),(n=n===i?g:n>>>0)?(e=ys(e))&&("string"==typeof t||null!=t&&!as(t))&&!(t=ci(t))&&ln(e)?Ei(mn(e),0,n):e.split(t,n):[]},Bn.spread=function(e,t){if("function"!=typeof e)throw new Ie(a);return t=null==t?0:Kt(fs(t),0),Qr((function(n){var r=n[t],i=Ei(n,0,t);return r&&Ot(i,r),kt(e,this,i)}))},Bn.tail=function(e){var t=null==e?0:e.length;return t?ri(e,1,t):[]},Bn.take=function(e,t,n){return e&&e.length?ri(e,0,(t=n||t===i?1:fs(t))<0?0:t):[]},Bn.takeRight=function(e,t,n){var r=null==e?0:e.length;return r?ri(e,(t=r-(t=n||t===i?1:fs(t)))<0?0:t,r):[]},Bn.takeRightWhile=function(e,t){return e&&e.length?pi(e,la(t,3),!1,!0):[]},Bn.takeWhile=function(e,t){return e&&e.length?pi(e,la(t,3)):[]},Bn.tap=function(e,t){return t(e),e},Bn.throttle=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new Ie(a);return es(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Do(e,t,{leading:r,maxWait:t,trailing:i})},Bn.thru=po,Bn.toArray=hs,Bn.toPairs=Fs,Bn.toPairsIn=Us,Bn.toPath=function(e){return zo(e)?Nt(e,Oa):ls(e)?[e]:Ii(Na(ys(e)))},Bn.toPlainObject=vs,Bn.transform=function(e,t,n){var r=zo(e),i=r||Ko(e)||cs(e);if(t=la(t,4),null==n){var a=e&&e.constructor;n=i?r?new a:[]:es(e)&&Xo(a)?$n(qe(e)):{}}return(i?It:wr)(e,(function(e,r,i){return t(n,e,r,i)})),n},Bn.unary=function(e){return ko(e,1)},Bn.union=eo,Bn.unionBy=to,Bn.unionWith=no,Bn.uniq=function(e){return e&&e.length?ui(e):[]},Bn.uniqBy=function(e,t){return e&&e.length?ui(e,la(t,2)):[]},Bn.uniqWith=function(e,t){return t="function"==typeof t?t:i,e&&e.length?ui(e,i,t):[]},Bn.unset=function(e,t){return null==e||di(e,t)},Bn.unzip=ro,Bn.unzipWith=io,Bn.update=function(e,t,n){return null==e?e:hi(e,t,yi(n))},Bn.updateWith=function(e,t,n,r){return r="function"==typeof r?r:i,null==e?e:hi(e,t,yi(n),r)},Bn.values=Bs,Bn.valuesIn=function(e){return null==e?[]:en(e,Ls(e))},Bn.without=ao,Bn.words=Xs,Bn.wrap=function(e,t){return jo(yi(t),e)},Bn.xor=oo,Bn.xorBy=so,Bn.xorWith=lo,Bn.zip=co,Bn.zipObject=function(e,t){return gi(e||[],t||[],tr)},Bn.zipObjectDeep=function(e,t){return gi(e||[],t||[],Jr)},Bn.zipWith=uo,Bn.entries=Fs,Bn.entriesIn=Us,Bn.extend=ws,Bn.extendWith=Es,sl(Bn,Bn),Bn.add=vl,Bn.attempt=Zs,Bn.camelCase=$s,Bn.capitalize=Vs,Bn.ceil=yl,Bn.clamp=function(e,t,n){return n===i&&(n=t,t=i),n!==i&&(n=(n=gs(n))===n?n:0),t!==i&&(t=(t=gs(t))===t?t:0),sr(gs(e),t,n)},Bn.clone=function(e){return lr(e,4)},Bn.cloneDeep=function(e){return lr(e,5)},Bn.cloneDeepWith=function(e,t){return lr(e,5,t="function"==typeof t?t:i)},Bn.cloneWith=function(e,t){return lr(e,4,t="function"==typeof t?t:i)},Bn.conformsTo=function(e,t){return null==t||cr(e,t,Ds(t))},Bn.deburr=Ws,Bn.defaultTo=function(e,t){return null==e||e!==e?t:e},Bn.divide=bl,Bn.endsWith=function(e,t,n){e=ys(e),t=ci(t);var r=e.length,a=n=n===i?r:sr(fs(n),0,r);return(n-=t.length)>=0&&e.slice(n,a)==t},Bn.eq=Bo,Bn.escape=function(e){return(e=ys(e))&&X.test(e)?e.replace(Y,on):e},Bn.escapeRegExp=function(e){return(e=ys(e))&&ae.test(e)?e.replace(ie,"\\$&"):e},Bn.every=function(e,t,n){var r=zo(e)?Dt:fr;return n&&ba(e,t,n)&&(t=i),r(e,la(t,3))},Bn.find=go,Bn.findIndex=Va,Bn.findKey=function(e,t){return $t(e,la(t,3),wr)},Bn.findLast=vo,Bn.findLastIndex=Wa,Bn.findLastKey=function(e,t){return $t(e,la(t,3),Er)},Bn.floor=wl,Bn.forEach=yo,Bn.forEachRight=bo,Bn.forIn=function(e,t){return null==e?e:yr(e,la(t,3),Ls)},Bn.forInRight=function(e,t){return null==e?e:br(e,la(t,3),Ls)},Bn.forOwn=function(e,t){return e&&wr(e,la(t,3))},Bn.forOwnRight=function(e,t){return e&&Er(e,la(t,3))},Bn.get=Ss,Bn.gt=$o,Bn.gte=Vo,Bn.has=function(e,t){return null!=e&&ma(e,t,kr)},Bn.hasIn=ks,Bn.head=Ha,Bn.identity=rl,Bn.includes=function(e,t,n,r){e=qo(e)?e:Bs(e),n=n&&!r?fs(n):0;var i=e.length;return n<0&&(n=Kt(i+n,0)),ss(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&Wt(e,t,n)>-1},Bn.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:fs(n);return i<0&&(i=Kt(r+i,0)),Wt(e,t,i)},Bn.inRange=function(e,t,n){return t=ps(t),n===i?(n=t,t=0):n=ps(n),function(e,t,n){return e>=bn(t,n)&&e<Kt(t,n)}(e=gs(e),t,n)},Bn.invoke=Rs,Bn.isArguments=Wo,Bn.isArray=zo,Bn.isArrayBuffer=Ho,Bn.isArrayLike=qo,Bn.isArrayLikeObject=Go,Bn.isBoolean=function(e){return!0===e||!1===e||ts(e)&&Tr(e)==w},Bn.isBuffer=Ko,Bn.isDate=Yo,Bn.isElement=function(e){return ts(e)&&1===e.nodeType&&!is(e)},Bn.isEmpty=function(e){if(null==e)return!0;if(qo(e)&&(zo(e)||"string"==typeof e||"function"==typeof e.splice||Ko(e)||cs(e)||Wo(e)))return!e.length;var t=fa(e);if(t==T||t==R)return!e.size;if(_a(e))return!Or(e).length;for(var n in e)if(Ne.call(e,n))return!1;return!0},Bn.isEqual=function(e,t){return Lr(e,t)},Bn.isEqualWith=function(e,t,n){var r=(n="function"==typeof n?n:i)?n(e,t):i;return r===i?Lr(e,t,i,n):!!r},Bn.isError=Qo,Bn.isFinite=function(e){return"number"==typeof e&&bt(e)},Bn.isFunction=Xo,Bn.isInteger=Zo,Bn.isLength=Jo,Bn.isMap=ns,Bn.isMatch=function(e,t){return e===t||Pr(e,t,ua(t))},Bn.isMatchWith=function(e,t,n){return n="function"==typeof n?n:i,Pr(e,t,ua(t),n)},Bn.isNaN=function(e){return rs(e)&&e!=+e},Bn.isNative=function(e){if(xa(e))throw new se("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Mr(e)},Bn.isNil=function(e){return null==e},Bn.isNull=function(e){return null===e},Bn.isNumber=rs,Bn.isObject=es,Bn.isObjectLike=ts,Bn.isPlainObject=is,Bn.isRegExp=as,Bn.isSafeInteger=function(e){return Zo(e)&&e>=-9007199254740991&&e<=f},Bn.isSet=os,Bn.isString=ss,Bn.isSymbol=ls,Bn.isTypedArray=cs,Bn.isUndefined=function(e){return e===i},Bn.isWeakMap=function(e){return ts(e)&&fa(e)==P},Bn.isWeakSet=function(e){return ts(e)&&"[object WeakSet]"==Tr(e)},Bn.join=function(e,t){return null==e?"":wt.call(e,t)},Bn.kebabCase=zs,Bn.last=Ya,Bn.lastIndexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var a=r;return n!==i&&(a=(a=fs(n))<0?Kt(r+a,0):bn(a,r-1)),t===t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,a):Vt(e,Ht,a,!0)},Bn.lowerCase=Hs,Bn.lowerFirst=qs,Bn.lt=us,Bn.lte=ds,Bn.max=function(e){return e&&e.length?mr(e,rl,Sr):i},Bn.maxBy=function(e,t){return e&&e.length?mr(e,la(t,2),Sr):i},Bn.mean=function(e){return qt(e,rl)},Bn.meanBy=function(e,t){return qt(e,la(t,2))},Bn.min=function(e){return e&&e.length?mr(e,rl,Fr):i},Bn.minBy=function(e,t){return e&&e.length?mr(e,la(t,2),Fr):i},Bn.stubArray=ml,Bn.stubFalse=gl,Bn.stubObject=function(){return{}},Bn.stubString=function(){return""},Bn.stubTrue=function(){return!0},Bn.multiply=El,Bn.nth=function(e,t){return e&&e.length?Wr(e,fs(t)):i},Bn.noConflict=function(){return mt._===this&&(mt._=Be),this},Bn.noop=ll,Bn.now=So,Bn.pad=function(e,t,n){e=ys(e);var r=(t=fs(t))?fn(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return zi(ft(i),n)+e+zi(pt(i),n)},Bn.padEnd=function(e,t,n){e=ys(e);var r=(t=fs(t))?fn(e):0;return t&&r<t?e+zi(t-r,n):e},Bn.padStart=function(e,t,n){e=ys(e);var r=(t=fs(t))?fn(e):0;return t&&r<t?zi(t-r,n)+e:e},Bn.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),En(ys(e).replace(oe,""),t||0)},Bn.random=function(e,t,n){if(n&&"boolean"!=typeof n&&ba(e,t,n)&&(t=n=i),n===i&&("boolean"==typeof t?(n=t,t=i):"boolean"==typeof e&&(n=e,e=i)),e===i&&t===i?(e=0,t=1):(e=ps(e),t===i?(t=e,e=0):t=ps(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var a=xn();return bn(e+a*(t-e+dt("1e-"+((a+"").length-1))),t)}return Kr(e,t)},Bn.reduce=function(e,t,n){var r=zo(e)?jt:Yt,i=arguments.length<3;return r(e,la(t,4),n,i,hr)},Bn.reduceRight=function(e,t,n){var r=zo(e)?Ft:Yt,i=arguments.length<3;return r(e,la(t,4),n,i,pr)},Bn.repeat=function(e,t,n){return t=(n?ba(e,t,n):t===i)?1:fs(t),Yr(ys(e),t)},Bn.replace=function(){var e=arguments,t=ys(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Bn.result=function(e,t,n){var r=-1,a=(t=bi(t,e)).length;for(a||(a=1,e=i);++r<a;){var o=null==e?i:e[Oa(t[r])];o===i&&(r=a,o=n),e=Xo(o)?o.call(e):o}return e},Bn.round=xl,Bn.runInContext=e,Bn.sample=function(e){return(zo(e)?Xn:Xr)(e)},Bn.size=function(e){if(null==e)return 0;if(qo(e))return ss(e)?fn(e):e.length;var t=fa(e);return t==T||t==R?e.size:Or(e).length},Bn.snakeCase=Gs,Bn.some=function(e,t,n){var r=zo(e)?Ut:ii;return n&&ba(e,t,n)&&(t=i),r(e,la(t,3))},Bn.sortedIndex=function(e,t){return ai(e,t)},Bn.sortedIndexBy=function(e,t,n){return oi(e,t,la(n,2))},Bn.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=ai(e,t);if(r<n&&Bo(e[r],t))return r}return-1},Bn.sortedLastIndex=function(e,t){return ai(e,t,!0)},Bn.sortedLastIndexBy=function(e,t,n){return oi(e,t,la(n,2),!0)},Bn.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var n=ai(e,t,!0)-1;if(Bo(e[n],t))return n}return-1},Bn.startCase=Ks,Bn.startsWith=function(e,t,n){return e=ys(e),n=null==n?0:sr(fs(n),0,e.length),t=ci(t),e.slice(n,n+t.length)==t},Bn.subtract=_l,Bn.sum=function(e){return e&&e.length?Qt(e,rl):0},Bn.sumBy=function(e,t){return e&&e.length?Qt(e,la(t,2)):0},Bn.template=function(e,t,n){var r=Bn.templateSettings;n&&ba(e,t,n)&&(t=i),e=ys(e),t=Es({},t,r,Zi);var a,o,s=Es({},t.imports,r.imports,Zi),l=Ds(s),c=en(s,l),u=0,d=t.interpolate||xe,h="__p += '",p=ke((t.escape||xe).source+"|"+d.source+"|"+(d===ee?fe:xe).source+"|"+(t.evaluate||xe).source+"|$","g"),f="//# sourceURL="+(Ne.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++st+"]")+"\n";e.replace(p,(function(t,n,r,i,s,l){return r||(r=i),h+=e.slice(u,l).replace(_e,sn),n&&(a=!0,h+="' +\n__e("+n+") +\n'"),s&&(o=!0,h+="';\n"+s+";\n__p += '"),r&&(h+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),u=l+t.length,t})),h+="';\n";var m=Ne.call(t,"variable")&&t.variable;if(m){if(he.test(m))throw new se("Invalid `variable` option passed into `_.template`")}else h="with (obj) {\n"+h+"\n}\n";h=(o?h.replace(H,""):h).replace(q,"$1").replace(G,"$1;"),h="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var g=Zs((function(){return Ae(l,f+"return "+h).apply(i,c)}));if(g.source=h,Qo(g))throw g;return g},Bn.times=function(e,t){if((e=fs(e))<1||e>f)return[];var n=g,r=bn(e,g);t=la(t),e-=g;for(var i=Xt(r,t);++n<e;)t(n);return i},Bn.toFinite=ps,Bn.toInteger=fs,Bn.toLength=ms,Bn.toLower=function(e){return ys(e).toLowerCase()},Bn.toNumber=gs,Bn.toSafeInteger=function(e){return e?sr(fs(e),-9007199254740991,f):0===e?e:0},Bn.toString=ys,Bn.toUpper=function(e){return ys(e).toUpperCase()},Bn.trim=function(e,t,n){if((e=ys(e))&&(n||t===i))return Zt(e);if(!e||!(t=ci(t)))return e;var r=mn(e),a=mn(t);return Ei(r,nn(r,a),rn(r,a)+1).join("")},Bn.trimEnd=function(e,t,n){if((e=ys(e))&&(n||t===i))return e.slice(0,gn(e)+1);if(!e||!(t=ci(t)))return e;var r=mn(e);return Ei(r,0,rn(r,mn(t))+1).join("")},Bn.trimStart=function(e,t,n){if((e=ys(e))&&(n||t===i))return e.replace(oe,"");if(!e||!(t=ci(t)))return e;var r=mn(e);return Ei(r,nn(r,mn(t))).join("")},Bn.truncate=function(e,t){var n=30,r="...";if(es(t)){var a="separator"in t?t.separator:a;n="length"in t?fs(t.length):n,r="omission"in t?ci(t.omission):r}var o=(e=ys(e)).length;if(ln(e)){var s=mn(e);o=s.length}if(n>=o)return e;var l=n-fn(r);if(l<1)return r;var c=s?Ei(s,0,l).join(""):e.slice(0,l);if(a===i)return c+r;if(s&&(l+=c.length-l),as(a)){if(e.slice(l).search(a)){var u,d=c;for(a.global||(a=ke(a.source,ys(me.exec(a))+"g")),a.lastIndex=0;u=a.exec(d);)var h=u.index;c=c.slice(0,h===i?l:h)}}else if(e.indexOf(ci(a),l)!=l){var p=c.lastIndexOf(a);p>-1&&(c=c.slice(0,p))}return c+r},Bn.unescape=function(e){return(e=ys(e))&&Q.test(e)?e.replace(K,vn):e},Bn.uniqueId=function(e){var t=++Oe;return ys(e)+t},Bn.upperCase=Ys,Bn.upperFirst=Qs,Bn.each=yo,Bn.eachRight=bo,Bn.first=Ha,sl(Bn,function(){var e={};return wr(Bn,(function(t,n){Ne.call(Bn.prototype,n)||(e[n]=t)})),e}(),{chain:!1}),Bn.VERSION="4.17.21",It(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Bn[e].placeholder=Bn})),It(["drop","take"],(function(e,t){zn.prototype[e]=function(n){n=n===i?1:Kt(fs(n),0);var r=this.__filtered__&&!t?new zn(this):this.clone();return r.__filtered__?r.__takeCount__=bn(n,r.__takeCount__):r.__views__.push({size:bn(n,g),type:e+(r.__dir__<0?"Right":"")}),r},zn.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),It(["filter","map","takeWhile"],(function(e,t){var n=t+1,r=1==n||3==n;zn.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:la(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}})),It(["head","last"],(function(e,t){var n="take"+(t?"Right":"");zn.prototype[e]=function(){return this[n](1).value()[0]}})),It(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");zn.prototype[e]=function(){return this.__filtered__?new zn(this):this[n](1)}})),zn.prototype.compact=function(){return this.filter(rl)},zn.prototype.find=function(e){return this.filter(e).head()},zn.prototype.findLast=function(e){return this.reverse().find(e)},zn.prototype.invokeMap=Qr((function(e,t){return"function"==typeof e?new zn(this):this.map((function(n){return Rr(n,e,t)}))})),zn.prototype.reject=function(e){return this.filter(No(la(e)))},zn.prototype.slice=function(e,t){e=fs(e);var n=this;return n.__filtered__&&(e>0||t<0)?new zn(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==i&&(n=(t=fs(t))<0?n.dropRight(-t):n.take(t-e)),n)},zn.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},zn.prototype.toArray=function(){return this.take(g)},wr(zn.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),a=Bn[r?"take"+("last"==t?"Right":""):t],o=r||/^find/.test(t);a&&(Bn.prototype[t]=function(){var t=this.__wrapped__,s=r?[1]:arguments,l=t instanceof zn,c=s[0],u=l||zo(t),d=function(e){var t=a.apply(Bn,Ot([e],s));return r&&h?t[0]:t};u&&n&&"function"==typeof c&&1!=c.length&&(l=u=!1);var h=this.__chain__,p=!!this.__actions__.length,f=o&&!h,m=l&&!p;if(!o&&u){t=m?t:new zn(this);var g=e.apply(t,s);return g.__actions__.push({func:po,args:[d],thisArg:i}),new Wn(g,h)}return f&&m?e.apply(this,s):(g=this.thru(d),f?r?g.value()[0]:g.value():g)})})),It(["pop","push","shift","sort","splice","unshift"],(function(e){var t=Re[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);Bn.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var i=this.value();return t.apply(zo(i)?i:[],e)}return this[n]((function(n){return t.apply(zo(n)?n:[],e)}))}})),wr(zn.prototype,(function(e,t){var n=Bn[t];if(n){var r=n.name+"";Ne.call(Dn,r)||(Dn[r]=[]),Dn[r].push({name:t,func:n})}})),Dn[Bi(i,2).name]=[{name:"wrapper",func:i}],zn.prototype.clone=function(){var e=new zn(this.__wrapped__);return e.__actions__=Ii(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Ii(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Ii(this.__views__),e},zn.prototype.reverse=function(){if(this.__filtered__){var e=new zn(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},zn.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=zo(e),r=t<0,i=n?e.length:0,a=function(e,t,n){var r=-1,i=n.length;for(;++r<i;){var a=n[r],o=a.size;switch(a.type){case"drop":e+=o;break;case"dropRight":t-=o;break;case"take":t=bn(t,e+o);break;case"takeRight":e=Kt(e,t-o)}}return{start:e,end:t}}(0,i,this.__views__),o=a.start,s=a.end,l=s-o,c=r?s:o-1,u=this.__iteratees__,d=u.length,h=0,p=bn(l,this.__takeCount__);if(!n||!r&&i==l&&p==l)return fi(e,this.__actions__);var f=[];e:for(;l--&&h<p;){for(var m=-1,g=e[c+=t];++m<d;){var v=u[m],y=v.iteratee,b=v.type,w=y(g);if(2==b)g=w;else if(!w){if(1==b)continue e;break e}}f[h++]=g}return f},Bn.prototype.at=fo,Bn.prototype.chain=function(){return ho(this)},Bn.prototype.commit=function(){return new Wn(this.value(),this.__chain__)},Bn.prototype.next=function(){this.__values__===i&&(this.__values__=hs(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?i:this.__values__[this.__index__++]}},Bn.prototype.plant=function(e){for(var t,n=this;n instanceof Vn;){var r=Fa(n);r.__index__=0,r.__values__=i,t?a.__wrapped__=r:t=r;var a=r;n=n.__wrapped__}return a.__wrapped__=e,t},Bn.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof zn){var t=e;return this.__actions__.length&&(t=new zn(this)),(t=t.reverse()).__actions__.push({func:po,args:[Ja],thisArg:i}),new Wn(t,this.__chain__)}return this.thru(Ja)},Bn.prototype.toJSON=Bn.prototype.valueOf=Bn.prototype.value=function(){return fi(this.__wrapped__,this.__actions__)},Bn.prototype.first=Bn.prototype.head,Xe&&(Bn.prototype[Xe]=function(){return this}),Bn}();mt._=yn,(r=function(){return yn}.call(t,n,t,e))===i||(e.exports=r)}.call(this)},1399:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(9950);const i="undefined"!==typeof window?r.useLayoutEffect:r.useEffect},1506:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=n(5393).A},1573:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=n(1375).A},1676:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=n(5501).A},1761:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var s=2*(r+1)-1,l=e[s],c=s+1,u=e[c];if(0>a(l,n))c<i&&0>a(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[s]=n,r=s);else{if(!(c<i&&0>a(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var c=[],u=[],d=1,h=null,p=3,f=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function E(e){if(g=!1,w(e),!m)if(null!==r(c))m=!0,P(x);else{var t=r(u);null!==t&&M(E,t.startTime-e)}}function x(e,n){m=!1,g&&(g=!1,y(S),S=-1),f=!0;var a=p;try{for(w(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!I());){var o=h.callback;if("function"===typeof o){h.callback=null,p=h.priorityLevel;var s=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?h.callback=s:h===r(c)&&i(c),w(n)}else i(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&M(E,d.startTime-n),l=!1}return l}finally{h=null,p=a,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var _,A=!1,T=null,S=-1,k=5,C=-1;function I(){return!(t.unstable_now()-C<k)}function R(){if(null!==T){var e=t.unstable_now();C=e;var n=!0;try{n=T(!0,e)}finally{n?_():(A=!1,T=null)}}else A=!1}if("function"===typeof b)_=function(){b(R)};else if("undefined"!==typeof MessageChannel){var D=new MessageChannel,L=D.port2;D.port1.onmessage=R,_=function(){L.postMessage(null)}}else _=function(){v(R,0)};function P(e){T=e,A||(A=!0,_())}function M(e,n){S=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,P(x))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>o?(e.sortIndex=a,n(u,e),null===r(c)&&e===r(u)&&(g?(y(S),S=-1):g=!0,M(E,a-o))):(e.sortIndex=s,n(c,e),m||f||(m=!0,P(x))),e},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},1763:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(423);function i(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui";const i={};return t.forEach((t=>{i[t]=(0,r.Ay)(e,t,n)})),i}},1783:(e,t,n)=>{"use strict";n.d(t,{Rk:()=>r,SF:()=>i,sk:()=>a});function r(e,t,n){var r="";return n.split(" ").forEach((function(n){void 0!==e[n]?t.push(e[n]+";"):n&&(r+=n+" ")})),r}var i=function(e,t,n){var r=e.key+"-"+t.name;!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles)},a=function(e,t,n){i(e,t,n);var r=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var a=t;do{e.insert(t===a?"."+r:"",a,e.sheet,!0),a=a.next}while(void 0!==a)}}},1824:(e,t,n)=>{"use strict";n.d(t,{E:()=>o,A:()=>s});var r=n(9950);const i={};const a=[];class o{constructor(){this.currentId=null,this.clear=()=>{null!==this.currentId&&(clearTimeout(this.currentId),this.currentId=null)},this.disposeEffect=()=>this.clear}static create(){return new o}start(e,t){this.clear(),this.currentId=setTimeout((()=>{this.currentId=null,t()}),e)}}function s(){const e=function(e,t){const n=r.useRef(i);return n.current===i&&(n.current=e(t)),n}(o.create).current;var t;return t=e.disposeEffect,r.useEffect(t,a),e}},1927:(e,t,n)=>{"use strict";function r(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function r(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];clearTimeout(t),t=setTimeout((()=>{e.apply(this,i)}),n)}return r.clear=()=>{clearTimeout(t)},r}n.d(t,{A:()=>r})},1942:(e,t,n)=>{e.exports=n(3488)()},1960:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=function(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}},1976:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=n(2529).A},2004:(e,t,n)=>{"use strict";function r(e){var t,n,i="";if("string"==typeof e||"number"==typeof e)i+=e;else if("object"==typeof e)if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(n=r(e[t]))&&(i&&(i+=" "),i+=n)}else for(n in e)e[n]&&(i&&(i+=" "),i+=n);return i}n.d(t,{A:()=>i});const i=function(){for(var e,t,n=0,i="",a=arguments.length;n<a;n++)(e=arguments[n])&&(t=r(e))&&(i&&(i+=" "),i+=t);return i}},2049:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var w=b.prototype=new y;w.constructor=b,m(w,v.prototype),w.isPureReactComponent=!0;var E=Array.isArray,x=Object.prototype.hasOwnProperty,_={current:null},A={key:!0,ref:!0,__self:!0,__source:!0};function T(e,t,r){var i,a={},o=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)x.call(t,i)&&!A.hasOwnProperty(i)&&(a[i]=t[i]);var l=arguments.length-2;if(1===l)a.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];a.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===a[i]&&(a[i]=l[i]);return{$$typeof:n,type:e,key:o,ref:s,props:a,_owner:_.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var k=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function I(e,t,i,a,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return o=o(l=e),e=""===a?"."+C(l,0):a,E(o)?(i="",null!=e&&(i=e.replace(k,"$&/")+"/"),I(o,t,i,"",(function(e){return e}))):null!=o&&(S(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(k,"$&/")+"/")+e)),t.push(o)),1;if(l=0,a=""===a?".":a+":",E(e))for(var c=0;c<e.length;c++){var u=a+C(s=e[c],c);l+=I(s,t,i,u,o)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(s=e.next()).done;)l+=I(s=s.value,t,i,u=a+C(s,c++),o);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function R(e,t,n){if(null==e)return e;var r=[],i=0;return I(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function D(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var L={current:null},P={transition:null},M={ReactCurrentDispatcher:L,ReactCurrentBatchConfig:P,ReactCurrentOwner:_};function N(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:R,forEach:function(e,t,n){R(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return R(e,(function(){t++})),t},toArray:function(e){return R(e,(function(e){return e}))||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=o,t.PureComponent=b,t.StrictMode=a,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M,t.act=N,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),a=e.key,o=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,s=_.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)x.call(t,c)&&!A.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=T,t.createFactory=function(e){var t=T.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:D}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=P.transition;P.transition={};try{e()}finally{P.transition=t}},t.unstable_act=N,t.useCallback=function(e,t){return L.current.useCallback(e,t)},t.useContext=function(e){return L.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return L.current.useDeferredValue(e)},t.useEffect=function(e,t){return L.current.useEffect(e,t)},t.useId=function(){return L.current.useId()},t.useImperativeHandle=function(e,t,n){return L.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return L.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return L.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return L.current.useMemo(e,t)},t.useReducer=function(e,t,n){return L.current.useReducer(e,t,n)},t.useRef=function(e){return L.current.useRef(e)},t.useState=function(e){return L.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return L.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return L.current.useTransition()},t.version="18.3.1"},2138:(e,t)=>{"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,u=n?Symbol.for("react.async_mode"):60111,d=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,p=n?Symbol.for("react.suspense"):60113,f=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,v=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,w=n?Symbol.for("react.scope"):60119;function E(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case u:case d:case a:case s:case o:case p:return e;default:switch(e=e&&e.$$typeof){case c:case h:case g:case m:case l:return e;default:return t}}case i:return t}}}function x(e){return E(e)===d}t.AsyncMode=u,t.ConcurrentMode=d,t.ContextConsumer=c,t.ContextProvider=l,t.Element=r,t.ForwardRef=h,t.Fragment=a,t.Lazy=g,t.Memo=m,t.Portal=i,t.Profiler=s,t.StrictMode=o,t.Suspense=p,t.isAsyncMode=function(e){return x(e)||E(e)===u},t.isConcurrentMode=x,t.isContextConsumer=function(e){return E(e)===c},t.isContextProvider=function(e){return E(e)===l},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return E(e)===h},t.isFragment=function(e){return E(e)===a},t.isLazy=function(e){return E(e)===g},t.isMemo=function(e){return E(e)===m},t.isPortal=function(e){return E(e)===i},t.isProfiler=function(e){return E(e)===s},t.isStrictMode=function(e){return E(e)===o},t.isSuspense=function(e){return E(e)===p},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===d||e===s||e===o||e===p||e===f||"object"===typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===m||e.$$typeof===l||e.$$typeof===c||e.$$typeof===h||e.$$typeof===y||e.$$typeof===b||e.$$typeof===w||e.$$typeof===v)},t.typeOf=E},2183:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var i=r(n(9526)),a=n(4414);t.A=(0,i.default)((0,a.jsx)("path",{d:"m12 21.35-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54z"}),"Favorite")},2529:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(9950),i=n(1399);const a=function(e){const t=r.useRef(e);return(0,i.A)((()=>{t.current=e})),r.useRef((function(){return(0,t.current)(...arguments)})).current}},2654:(e,t,n)=>{"use strict";var r=n(9950),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,r)&&!l.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:a,_owner:s.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},2703:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>s,BO:()=>o,Yn:()=>a});var r=n(5501),i=n(8286);function a(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t||"string"!==typeof t)return null;if(e&&e.vars&&n){const n=`vars.${t}`.split(".").reduce(((e,t)=>e&&e[t]?e[t]:null),e);if(null!=n)return n}return t.split(".").reduce(((e,t)=>e&&null!=e[t]?e[t]:null),e)}function o(e,t,n){let r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;return r="function"===typeof e?e(n):Array.isArray(e)?e[n]||i:a(e,n)||i,t&&(r=t(r,i,e)),r}const s=function(e){const{prop:t,cssProperty:n=e.prop,themeKey:s,transform:l}=e,c=e=>{if(null==e[t])return null;const c=e[t],u=a(e.theme,s)||{};return(0,i.NI)(e,c,(e=>{let i=o(u,l,e);return e===i&&"string"===typeof e&&(i=o(u,l,`${t}${"default"===e?"":(0,r.A)(e)}`,e)),!1===n?i:{[n]:i}}))};return c.propTypes={},c.filterProps=[t],c}},2860:(e,t,n)=>{"use strict";n.d(t,{A:()=>p});var r=n(8168),i=n(8587),a=n(7483),o=n(3628);const s={borderRadius:4};var l=n(7937);var c=n(505),u=n(8076),d=n(86);const h=["breakpoints","palette","spacing","shape"];const p=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{breakpoints:t={},palette:n={},spacing:p,shape:f={}}=e,m=(0,i.A)(e,h),g=(0,o.A)(t),v=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(e.mui)return e;const t=(0,l.LX)({spacing:e}),n=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(0===n.length?[1]:n).map((e=>{const n=t(e);return"number"===typeof n?`${n}px`:n})).join(" ")};return n.mui=!0,n}(p);let y=(0,a.A)({breakpoints:g,direction:"ltr",components:{},palette:(0,r.A)({mode:"light"},n),spacing:v,shape:(0,r.A)({},s,f)},m);y.applyStyles=d.A;for(var b=arguments.length,w=new Array(b>1?b-1:0),E=1;E<b;E++)w[E-1]=arguments[E];return y=w.reduce(((e,t)=>(0,a.A)(e,t)),y),y.unstable_sxConfig=(0,r.A)({},u.A,null==m?void 0:m.unstable_sxConfig),y.unstable_sx=function(e){return(0,c.A)({sx:e,theme:this})},y}},3158:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});n(9950);var r=n(8283),i=n(4414);function a(e){const{styles:t,defaultTheme:n={}}=e,a="function"===typeof t?e=>{return t(void 0===(r=e)||null===r||0===Object.keys(r).length?n:e);var r}:t;return(0,i.jsx)(r.mL,{styles:a})}},3488:(e,t,n)=>{"use strict";var r=n(3959);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,a,o){if(o!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},3539:(e,t,n)=>{"use strict";var r;n.d(t,{A:()=>s});var i=n(9950);let a=0;const o=(r||(r=n.t(i,2)))["useId".toString()];function s(e){if(void 0!==o){const t=o();return null!=e?e:t}return function(e){const[t,n]=i.useState(e),r=e||t;return i.useEffect((()=>{null==t&&(a+=1,n(`mui-${a}`))}),[t]),r}(e)}},3628:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(8587),i=n(8168);const a=["values","unit","step"],o=e=>{const t=Object.keys(e).map((t=>({key:t,val:e[t]})))||[];return t.sort(((e,t)=>e.val-t.val)),t.reduce(((e,t)=>(0,i.A)({},e,{[t.key]:t.val})),{})};function s(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:s=5}=e,l=(0,r.A)(e,a),c=o(t),u=Object.keys(c);function d(e){return`@media (min-width:${"number"===typeof t[e]?t[e]:e}${n})`}function h(e){return`@media (max-width:${("number"===typeof t[e]?t[e]:e)-s/100}${n})`}function p(e,r){const i=u.indexOf(r);return`@media (min-width:${"number"===typeof t[e]?t[e]:e}${n}) and (max-width:${(-1!==i&&"number"===typeof t[u[i]]?t[u[i]]:r)-s/100}${n})`}return(0,i.A)({keys:u,values:c,up:d,down:h,between:p,only:function(e){return u.indexOf(e)+1<u.length?p(e,u[u.indexOf(e)+1]):d(e)},not:function(e){const t=u.indexOf(e);return 0===t?d(u[1]):t===u.length-1?h(u[t]):p(e,u[u.indexOf(e)+1]).replace("@media","@media not all and")},unit:n},l)}},3828:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(9950);const i=function(e,t){var n,i;return r.isValidElement(e)&&-1!==t.indexOf(null!=(n=e.type.muiName)?n:null==(i=e.type)||null==(i=i._payload)||null==(i=i.value)?void 0:i.muiName)}},3876:(e,t,n)=>{"use strict";var r=n(630),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function l(e){return r.isMemo(e)?o:s[e.$$typeof]||i}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=o;var c=Object.defineProperty,u=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,f=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(f){var i=p(n);i&&i!==f&&e(t,i,r)}var o=u(n);d&&(o=o.concat(d(n)));for(var s=l(t),m=l(n),g=0;g<o.length;++g){var v=o[g];if(!a[v]&&(!r||!r[v])&&(!m||!m[v])&&(!s||!s[v])){var y=h(n,v);try{c(t,v,y)}catch(b){}}}}return t}},3931:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(9950);function i(e){let{controlled:t,default:n,name:i,state:a="value"}=e;const{current:o}=r.useRef(void 0!==t),[s,l]=r.useState(n);return[o?t:s,r.useCallback((e=>{o||l(e)}),[])]}},3959:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},4414:(e,t,n)=>{"use strict";e.exports=n(2654)},4436:(e,t,n)=>{"use strict";n.d(t,{A:()=>M});var r=n(8168),i=n(8587),a=n(8099),o=n(7483),s=n(8076),l=n(505),c=n(2860);var u=n(9269);const d={black:"#000",white:"#fff"},h={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},p={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},f={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},m={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},g={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},v={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},y={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},b=["mode","contrastThreshold","tonalOffset"],w={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:d.white,default:d.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},E={text:{primary:d.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:d.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function x(e,t,n,r){const i=r.light||r,a=r.dark||1.5*r;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=(0,u.a)(e.main,i):"dark"===t&&(e.dark=(0,u.e$)(e.main,a)))}function _(e){const{mode:t="light",contrastThreshold:n=3,tonalOffset:s=.2}=e,l=(0,i.A)(e,b),c=e.primary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:g[200],light:g[50],dark:g[400]}:{main:g[700],light:g[400],dark:g[800]}}(t),_=e.secondary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:p[200],light:p[50],dark:p[400]}:{main:p[500],light:p[300],dark:p[700]}}(t),A=e.error||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:f[500],light:f[300],dark:f[700]}:{main:f[700],light:f[400],dark:f[800]}}(t),T=e.info||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:v[400],light:v[300],dark:v[700]}:{main:v[700],light:v[500],dark:v[900]}}(t),S=e.success||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:y[400],light:y[300],dark:y[700]}:{main:y[800],light:y[500],dark:y[900]}}(t),k=e.warning||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:m[400],light:m[300],dark:m[700]}:{main:"#ed6c02",light:m[500],dark:m[900]}}(t);function C(e){return(0,u.eM)(e,E.text.primary)>=n?E.text.primary:w.text.primary}const I=e=>{let{color:t,name:n,mainShade:i=500,lightShade:o=300,darkShade:l=700}=e;if(t=(0,r.A)({},t),!t.main&&t[i]&&(t.main=t[i]),!t.hasOwnProperty("main"))throw new Error((0,a.A)(11,n?` (${n})`:"",i));if("string"!==typeof t.main)throw new Error((0,a.A)(12,n?` (${n})`:"",JSON.stringify(t.main)));return x(t,"light",o,s),x(t,"dark",l,s),t.contrastText||(t.contrastText=C(t.main)),t},R={dark:E,light:w};return(0,o.A)((0,r.A)({common:(0,r.A)({},d),mode:t,primary:I({color:c,name:"primary"}),secondary:I({color:_,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:I({color:A,name:"error"}),warning:I({color:k,name:"warning"}),info:I({color:T,name:"info"}),success:I({color:S,name:"success"}),grey:h,contrastThreshold:n,getContrastText:C,augmentColor:I,tonalOffset:s},R[t]),l)}const A=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];const T={textTransform:"uppercase"},S='"Roboto", "Helvetica", "Arial", sans-serif';function k(e,t){const n="function"===typeof t?t(e):t,{fontFamily:a=S,fontSize:s=14,fontWeightLight:l=300,fontWeightRegular:c=400,fontWeightMedium:u=500,fontWeightBold:d=700,htmlFontSize:h=16,allVariants:p,pxToRem:f}=n,m=(0,i.A)(n,A);const g=s/14,v=f||(e=>e/h*g+"rem"),y=(e,t,n,i,o)=>{return(0,r.A)({fontFamily:a,fontWeight:e,fontSize:v(t),lineHeight:n},a===S?{letterSpacing:(s=i/t,Math.round(1e5*s)/1e5)+"em"}:{},o,p);var s},b={h1:y(l,96,1.167,-1.5),h2:y(l,60,1.2,-.5),h3:y(c,48,1.167,0),h4:y(c,34,1.235,.25),h5:y(c,24,1.334,0),h6:y(u,20,1.6,.15),subtitle1:y(c,16,1.75,.15),subtitle2:y(u,14,1.57,.1),body1:y(c,16,1.5,.15),body2:y(c,14,1.43,.15),button:y(u,14,1.75,.4,T),caption:y(c,12,1.66,.4),overline:y(c,12,2.66,1,T),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return(0,o.A)((0,r.A)({htmlFontSize:h,pxToRem:v,fontFamily:a,fontSize:s,fontWeightLight:l,fontWeightRegular:c,fontWeightMedium:u,fontWeightBold:d},b),m,{clone:!1})}function C(){return[`${arguments.length<=0?void 0:arguments[0]}px ${arguments.length<=1?void 0:arguments[1]}px ${arguments.length<=2?void 0:arguments[2]}px ${arguments.length<=3?void 0:arguments[3]}px rgba(0,0,0,0.2)`,`${arguments.length<=4?void 0:arguments[4]}px ${arguments.length<=5?void 0:arguments[5]}px ${arguments.length<=6?void 0:arguments[6]}px ${arguments.length<=7?void 0:arguments[7]}px rgba(0,0,0,0.14)`,`${arguments.length<=8?void 0:arguments[8]}px ${arguments.length<=9?void 0:arguments[9]}px ${arguments.length<=10?void 0:arguments[10]}px ${arguments.length<=11?void 0:arguments[11]}px rgba(0,0,0,0.12)`].join(",")}const I=["none",C(0,2,1,-1,0,1,1,0,0,1,3,0),C(0,3,1,-2,0,2,2,0,0,1,5,0),C(0,3,3,-2,0,3,4,0,0,1,8,0),C(0,2,4,-1,0,4,5,0,0,1,10,0),C(0,3,5,-1,0,5,8,0,0,1,14,0),C(0,3,5,-1,0,6,10,0,0,1,18,0),C(0,4,5,-2,0,7,10,1,0,2,16,1),C(0,5,5,-3,0,8,10,1,0,3,14,2),C(0,5,6,-3,0,9,12,1,0,3,16,2),C(0,6,6,-3,0,10,14,1,0,4,18,3),C(0,6,7,-4,0,11,15,1,0,4,20,3),C(0,7,8,-4,0,12,17,2,0,5,22,4),C(0,7,8,-4,0,13,19,2,0,5,24,4),C(0,7,9,-4,0,14,21,2,0,5,26,4),C(0,8,9,-5,0,15,22,2,0,6,28,5),C(0,8,10,-5,0,16,24,2,0,6,30,5),C(0,8,11,-5,0,17,26,2,0,6,32,5),C(0,9,11,-5,0,18,28,2,0,7,34,6),C(0,9,12,-6,0,19,29,2,0,7,36,6),C(0,10,13,-6,0,20,31,3,0,8,38,7),C(0,10,13,-6,0,21,33,3,0,8,40,7),C(0,10,14,-6,0,22,35,3,0,8,42,7),C(0,11,14,-7,0,23,36,3,0,9,44,8),C(0,11,15,-7,0,24,38,3,0,9,46,8)];var R=n(5361);const D={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},L=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function P(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{mixins:t={},palette:n={},transitions:u={},typography:d={}}=e,h=(0,i.A)(e,L);if(e.vars&&void 0===e.generateCssVars)throw new Error((0,a.A)(18));const p=_(n),f=(0,c.A)(e);let m=(0,o.A)(f,{mixins:(g=f.breakpoints,v=t,(0,r.A)({toolbar:{minHeight:56,[g.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[g.up("sm")]:{minHeight:64}}},v)),palette:p,shadows:I.slice(),typography:k(p,d),transitions:(0,R.Ay)(u),zIndex:(0,r.A)({},D)});var g,v;m=(0,o.A)(m,h);for(var y=arguments.length,b=new Array(y>1?y-1:0),w=1;w<y;w++)b[w-1]=arguments[w];return m=b.reduce(((e,t)=>(0,o.A)(e,t)),m),m.unstable_sxConfig=(0,r.A)({},s.A,null==h?void 0:h.unstable_sxConfig),m.unstable_sx=function(e){return(0,l.A)({sx:e,theme:this})},m}const M=P},4453:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var i=r(n(9526)),a=n(4414);t.A=(0,i.default)((0,a.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"}),"MoreVert")},4501:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const r=e=>e,i=(()=>{let e=r;return{configure(t){e=t},generate:t=>e(t),reset(){e=r}}})()},4634:e=>{function t(){return e.exports=t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(null,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},4893:e=>{e.exports=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n},e.exports.__esModule=!0,e.exports.default=e.exports},4894:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},r=function(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},i={p:r,P:function(e,t){var i,a=e.match(/(P+)(p+)?/)||[],o=a[1],s=a[2];if(!s)return n(e,t);switch(o){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;default:i=t.dateTime({width:"full"})}return i.replace("{{date}}",n(o,t)).replace("{{time}}",r(s,t))}};t.default=i,e.exports=t.default},4994:e=>{e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},5329:(e,t,n)=>{"use strict";t.A=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=a(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=i?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}(n(9950)),i=n(116);function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(a=function(e){return e?n:t})(e)}t.A=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const t=r.useContext(i.ThemeContext);return t&&(n=t,0!==Object.keys(n).length)?t:e;var n}},5340:(e,t,n)=>{"use strict";e.exports=n(1761)},5361:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>u,p0:()=>s});var r=n(8587),i=n(8168);const a=["duration","easing","delay"],o={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},s={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function l(e){return`${Math.round(e)}ms`}function c(e){if(!e)return 0;const t=e/36;return Math.round(10*(4+15*t**.25+t/5))}function u(e){const t=(0,i.A)({},o,e.easing),n=(0,i.A)({},s,e.duration);return(0,i.A)({getAutoHeightDuration:c,create:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{duration:o=n.standard,easing:s=t.easeInOut,delay:c=0}=i;(0,r.A)(i,a);return(Array.isArray(e)?e:[e]).map((e=>`${e} ${"string"===typeof o?o:l(o)} ${s} ${"string"===typeof c?c:l(c)}`)).join(",")}},e,{easing:t,duration:n})}},5393:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(9950),i=n(5587);function a(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.useMemo((()=>t.every((e=>null==e))?null:e=>{t.forEach((t=>{(0,i.A)(t,e)}))}),t)}},5433:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var i=r(n(9526)),a=n(4414);t.A=(0,i.default)((0,a.jsx)("path",{d:"M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9m-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8z"}),"Restore")},5471:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(8168),i=n(9950),a=n(9360),o=n(4414);function s(e,t){function n(n,i){return(0,o.jsx)(a.A,(0,r.A)({"data-testid":`${t}Icon`,ref:i},n,{children:e}))}return n.muiName=a.A.muiName,i.memo(i.forwardRef(n))}},5501:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(8099);function i(e){if("string"!==typeof e)throw new Error((0,r.A)(7));return e.charAt(0).toUpperCase()+e.slice(1)}},5511:(e,t,n)=>{"use strict";function r(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(((e,t)=>null==t?e:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r),t.apply(this,r)}),(()=>{}))}n.d(t,{A:()=>r})},5537:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(8168);function i(e,t){const n=(0,r.A)({},t);return Object.keys(e).forEach((a=>{if(a.toString().match(/^(components|slots)$/))n[a]=(0,r.A)({},e[a],n[a]);else if(a.toString().match(/^(componentsProps|slotProps)$/)){const o=e[a]||{},s=t[a];n[a]={},s&&Object.keys(s)?o&&Object.keys(o)?(n[a]=(0,r.A)({},s),Object.keys(o).forEach((e=>{n[a][e]=i(o[e],s[e])}))):n[a]=s:n[a]=o}else void 0===n[a]&&(n[a]=e[a])})),n}},5587:(e,t,n)=>{"use strict";function r(e,t){"function"===typeof e?e(t):e&&(e.current=t)}n.d(t,{A:()=>r})},6171:(e,t,n)=>{"use strict";n.d(t,{A:()=>l,b:()=>s});var r=n(9950),i=n(5537),a=n(4414);const o=r.createContext(void 0);function s(e){let{props:t,name:n}=e;return function(e){const{theme:t,name:n,props:r}=e;if(!t||!t.components||!t.components[n])return r;const a=t.components[n];return a.defaultProps?(0,i.A)(a.defaultProps,r):a.styleOverrides||a.variants?r:(0,i.A)(a,r)}({props:t,name:n,theme:{components:r.useContext(o)}})}const l=function(e){let{value:t,children:n}=e;return(0,a.jsx)(o.Provider,{value:t,children:n})}},6206:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(7483);const i=function(e,t){return t?(0,r.A)(e,t,{clone:!1}):e}},6319:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var i=r(n(9526)),a=n(4414);t.A=(0,i.default)((0,a.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close")},6477:(e,t,n)=>{"use strict";var r;n.d(t,{i:()=>s,s:()=>o});var i=n(9950),a=!!(r||(r=n.t(i,2))).useInsertionEffect&&(r||(r=n.t(i,2))).useInsertionEffect,o=a||function(e){return e()},s=a||i.useLayoutEffect},6747:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MIN_SAFE_INTEGER,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.MAX_SAFE_INTEGER;return Math.max(t,Math.min(e,n))}},6832:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var i=r(n(9526)),a=n(4414);t.A=(0,i.default)((0,a.jsx)("path",{d:"M7 7h10v3l4-4-4-4v3H5v6h2zm10 10H7v-3l-4 4 4 4v-3h12v-6h-2z"}),"Repeat")},6879:(e,t)=>{"use strict";var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler");Symbol.for("react.provider");var s=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),f=Symbol.for("react.view_transition"),m=Symbol.for("react.client.reference");function g(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case i:case o:case a:case u:case d:case f:return e;default:switch(e=e&&e.$$typeof){case l:case c:case p:case h:case s:return e;default:return t}}case r:return t}}}t.vM=c,t.lD=h},6907:(e,t,n)=>{"use strict";function r(e){return e&&e.ownerDocument||document}n.d(t,{A:()=>r})},7034:(e,t,n)=>{"use strict";n.r(t),n.d(t,{capitalize:()=>i.A,createChainedFunction:()=>a,createSvgIcon:()=>o.A,debounce:()=>s.A,deprecatedPropType:()=>l,isMuiElement:()=>c.A,ownerDocument:()=>u.A,ownerWindow:()=>d.A,requirePropFactory:()=>h,setRef:()=>p,unstable_ClassNameGenerator:()=>E,unstable_useEnhancedEffect:()=>f.A,unstable_useId:()=>m.A,unsupportedProp:()=>g,useControlled:()=>v.A,useEventCallback:()=>y.A,useForkRef:()=>b.A,useIsFocusVisible:()=>w.A});var r=n(4501),i=n(1676);const a=n(5511).A;var o=n(5471),s=n(1209);const l=function(e,t){return()=>null};var c=n(3828),u=n(7402),d=n(827);const h=function(e,t){return()=>null};const p=n(5587).A;var f=n(9044),m=n(1014);const g=function(e,t,n,r,i){return null};var v=n(8733),y=n(1976),b=n(1506),w=n(1573);const E={configure:e=>{r.A.configure(e)}}},7119:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(8345)},7295:(e,t,n)=>{"use strict";var r=n(4994);t.Ay=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{themeId:t,defaultTheme:n=m,rootShouldForwardProp:r=f,slotShouldForwardProp:l=f}=e,u=e=>(0,c.default)((0,i.default)({},e,{theme:v((0,i.default)({},e,{defaultTheme:n,themeId:t}))}));return u.__mui_systemSx=!0,function(e){let c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,o.internal_processStyles)(e,(e=>e.filter((e=>!(null!=e&&e.__mui_systemSx)))));const{name:d,slot:p,skipVariantsResolver:m,skipSx:w,overridesResolver:E=y(g(p))}=c,x=(0,a.default)(c,h),_=void 0!==m?m:p&&"Root"!==p&&"root"!==p||!1,A=w||!1;let T=f;"Root"===p||"root"===p?T=r:p?T=l:function(e){return"string"===typeof e&&e.charCodeAt(0)>96}(e)&&(T=void 0);const S=(0,o.default)(e,(0,i.default)({shouldForwardProp:T,label:undefined},x)),k=e=>"function"===typeof e&&e.__emotion_real!==e||(0,s.isPlainObject)(e)?r=>b(e,(0,i.default)({},r,{theme:v({theme:r.theme,defaultTheme:n,themeId:t})})):e,C=function(r){let a=k(r);for(var o=arguments.length,s=new Array(o>1?o-1:0),l=1;l<o;l++)s[l-1]=arguments[l];const c=s?s.map(k):[];d&&E&&c.push((e=>{const r=v((0,i.default)({},e,{defaultTheme:n,themeId:t}));if(!r.components||!r.components[d]||!r.components[d].styleOverrides)return null;const a=r.components[d].styleOverrides,o={};return Object.entries(a).forEach((t=>{let[n,a]=t;o[n]=b(a,(0,i.default)({},e,{theme:r}))})),E(e,o)})),d&&!_&&c.push((e=>{var r;const a=v((0,i.default)({},e,{defaultTheme:n,themeId:t}));return b({variants:null==a||null==(r=a.components)||null==(r=r[d])?void 0:r.variants},(0,i.default)({},e,{theme:a}))})),A||c.push(u);const h=c.length-s.length;if(Array.isArray(r)&&h>0){const e=new Array(h).fill("");a=[...r,...e],a.raw=[...r.raw,...e]}const p=S(a,...c);return e.muiName&&(p.muiName=e.muiName),p};return S.withConfig&&(C.withConfig=S.withConfig),C}};var i=r(n(4634)),a=r(n(4893)),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var o=i?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}(n(116)),s=n(7785),l=(r(n(304)),r(n(8399)),r(n(9904))),c=r(n(8807));const u=["ownerState"],d=["variants"],h=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}function f(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}const m=(0,l.default)(),g=e=>e?e.charAt(0).toLowerCase()+e.slice(1):e;function v(e){let{defaultTheme:t,theme:n,themeId:r}=e;return i=n,0===Object.keys(i).length?t:n[r]||n;var i}function y(e){return e?(t,n)=>n[e]:null}function b(e,t){let{ownerState:n}=t,r=(0,a.default)(t,u);const o="function"===typeof e?e((0,i.default)({ownerState:n},r)):e;if(Array.isArray(o))return o.flatMap((e=>b(e,(0,i.default)({ownerState:n},r))));if(o&&"object"===typeof o&&Array.isArray(o.variants)){const{variants:e=[]}=o;let t=(0,a.default)(o,d);return e.forEach((e=>{let a=!0;"function"===typeof e.props?a=e.props((0,i.default)({ownerState:n},r,n)):Object.keys(e.props).forEach((t=>{(null==n?void 0:n[t])!==e.props[t]&&r[t]!==e.props[t]&&(a=!1)})),a&&(Array.isArray(t)||(t=[t]),t.push("function"===typeof e.style?e.style((0,i.default)({ownerState:n},r,n)):e.style))})),t}return o}},7370:(e,t,n)=>{"use strict";n.d(t,{C:()=>c,E:()=>g,T:()=>d,c:()=>f,h:()=>h,w:()=>u});var r=n(9950),i=n(8603),a=n(1783),o=n(9015),s=n(6477),l=r.createContext("undefined"!==typeof HTMLElement?(0,i.A)({key:"css"}):null),c=l.Provider,u=function(e){return(0,r.forwardRef)((function(t,n){var i=(0,r.useContext)(l);return e(t,i,n)}))},d=r.createContext({});var h={}.hasOwnProperty,p="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",f=function(e,t){var n={};for(var r in t)h.call(t,r)&&(n[r]=t[r]);return n[p]=e,n},m=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;return(0,a.SF)(t,n,r),(0,s.s)((function(){return(0,a.sk)(t,n,r)})),null},g=u((function(e,t,n){var i=e.css;"string"===typeof i&&void 0!==t.registered[i]&&(i=t.registered[i]);var s=e[p],l=[i],c="";"string"===typeof e.className?c=(0,a.Rk)(t.registered,l,e.className):null!=e.className&&(c=e.className+" ");var u=(0,o.J)(l,void 0,r.useContext(d));c+=t.key+"-"+u.name;var f={};for(var g in e)h.call(e,g)&&"css"!==g&&g!==p&&(f[g]=e[g]);return f.className=c,n&&(f.ref=n),r.createElement(r.Fragment,null,r.createElement(m,{cache:t,serialized:u,isStringTag:"string"===typeof s}),r.createElement(s,f))}))},7402:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=n(6907).A},7483:(e,t,n)=>{"use strict";n.d(t,{A:()=>s,Q:()=>a});var r=n(8168),i=n(9950);function a(e){if("object"!==typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function o(e){if(i.isValidElement(e)||!a(e))return e;const t={};return Object.keys(e).forEach((n=>{t[n]=o(e[n])})),t}function s(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0};const l=n.clone?(0,r.A)({},e):e;return a(e)&&a(t)&&Object.keys(t).forEach((r=>{i.isValidElement(t[r])?l[r]=t[r]:a(t[r])&&Object.prototype.hasOwnProperty.call(e,r)&&a(e[r])?l[r]=s(e[r],t[r],n):n.clone?l[r]=a(t[r])?o(t[r]):t[r]:l[r]=t[r]})),l}},7550:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r="$$material"},7785:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r.A,isPlainObject:()=>r.Q});var r=n(7483)},7813:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var i=r(n(9526)),a=n(4414);t.A=(0,i.default)((0,a.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zm2.46-7.12 1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14zM15.5 4l-1-1h-5l-1 1H5v2h14V4z"}),"DeleteForever")},7923:(e,t,n)=>{"use strict";function r(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}n.d(t,{A:()=>r})},7937:(e,t,n)=>{"use strict";n.d(t,{LX:()=>f,MA:()=>p,_W:()=>m,Lc:()=>y,Ms:()=>b});var r=n(8286),i=n(2703),a=n(6206);const o={m:"margin",p:"padding"},s={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},l={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},c=function(e){const t={};return n=>(void 0===t[n]&&(t[n]=e(n)),t[n])}((e=>{if(e.length>2){if(!l[e])return[e];e=l[e]}const[t,n]=e.split(""),r=o[t],i=s[n]||"";return Array.isArray(i)?i.map((e=>r+e)):[r+i]})),u=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],d=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],h=[...u,...d];function p(e,t,n,r){var a;const o=null!=(a=(0,i.Yn)(e,t,!1))?a:n;return"number"===typeof o?e=>"string"===typeof e?e:o*e:Array.isArray(o)?e=>"string"===typeof e?e:o[e]:"function"===typeof o?o:()=>{}}function f(e){return p(e,"spacing",8)}function m(e,t){if("string"===typeof t||null==t)return t;const n=e(Math.abs(t));return t>=0?n:"number"===typeof n?-n:`-${n}`}function g(e,t,n,i){if(-1===t.indexOf(n))return null;const a=function(e,t){return n=>e.reduce(((e,r)=>(e[r]=m(t,n),e)),{})}(c(n),i),o=e[n];return(0,r.NI)(e,o,a)}function v(e,t){const n=f(e.theme);return Object.keys(e).map((r=>g(e,t,r,n))).reduce(a.A,{})}function y(e){return v(e,u)}function b(e){return v(e,d)}function w(e){return v(e,h)}y.propTypes={},y.filterProps=u,b.propTypes={},b.filterProps=d,w.propTypes={},w.filterProps=h},7988:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var i=r(n(9526)),a=n(4414);t.A=(0,i.default)((0,a.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")},8076:(e,t,n)=>{"use strict";n.d(t,{A:()=>M});var r=n(7937),i=n(2703),a=n(6206);const o=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t.reduce(((e,t)=>(t.filterProps.forEach((n=>{e[n]=t})),e)),{}),i=e=>Object.keys(e).reduce(((t,n)=>r[n]?(0,a.A)(t,r[n](e)):t),{});return i.propTypes={},i.filterProps=t.reduce(((e,t)=>e.concat(t.filterProps)),[]),i};var s=n(8286);function l(e){return"number"!==typeof e?e:`${e}px solid`}function c(e,t){return(0,i.Ay)({prop:e,themeKey:"borders",transform:t})}const u=c("border",l),d=c("borderTop",l),h=c("borderRight",l),p=c("borderBottom",l),f=c("borderLeft",l),m=c("borderColor"),g=c("borderTopColor"),v=c("borderRightColor"),y=c("borderBottomColor"),b=c("borderLeftColor"),w=c("outline",l),E=c("outlineColor"),x=e=>{if(void 0!==e.borderRadius&&null!==e.borderRadius){const t=(0,r.MA)(e.theme,"shape.borderRadius",4,"borderRadius"),n=e=>({borderRadius:(0,r._W)(t,e)});return(0,s.NI)(e,e.borderRadius,n)}return null};x.propTypes={},x.filterProps=["borderRadius"];o(u,d,h,p,f,m,g,v,y,b,x,w,E);const _=e=>{if(void 0!==e.gap&&null!==e.gap){const t=(0,r.MA)(e.theme,"spacing",8,"gap"),n=e=>({gap:(0,r._W)(t,e)});return(0,s.NI)(e,e.gap,n)}return null};_.propTypes={},_.filterProps=["gap"];const A=e=>{if(void 0!==e.columnGap&&null!==e.columnGap){const t=(0,r.MA)(e.theme,"spacing",8,"columnGap"),n=e=>({columnGap:(0,r._W)(t,e)});return(0,s.NI)(e,e.columnGap,n)}return null};A.propTypes={},A.filterProps=["columnGap"];const T=e=>{if(void 0!==e.rowGap&&null!==e.rowGap){const t=(0,r.MA)(e.theme,"spacing",8,"rowGap"),n=e=>({rowGap:(0,r._W)(t,e)});return(0,s.NI)(e,e.rowGap,n)}return null};T.propTypes={},T.filterProps=["rowGap"];o(_,A,T,(0,i.Ay)({prop:"gridColumn"}),(0,i.Ay)({prop:"gridRow"}),(0,i.Ay)({prop:"gridAutoFlow"}),(0,i.Ay)({prop:"gridAutoColumns"}),(0,i.Ay)({prop:"gridAutoRows"}),(0,i.Ay)({prop:"gridTemplateColumns"}),(0,i.Ay)({prop:"gridTemplateRows"}),(0,i.Ay)({prop:"gridTemplateAreas"}),(0,i.Ay)({prop:"gridArea"}));function S(e,t){return"grey"===t?t:e}o((0,i.Ay)({prop:"color",themeKey:"palette",transform:S}),(0,i.Ay)({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:S}),(0,i.Ay)({prop:"backgroundColor",themeKey:"palette",transform:S}));function k(e){return e<=1&&0!==e?100*e+"%":e}const C=(0,i.Ay)({prop:"width",transform:k}),I=e=>{if(void 0!==e.maxWidth&&null!==e.maxWidth){const t=t=>{var n,r;const i=(null==(n=e.theme)||null==(n=n.breakpoints)||null==(n=n.values)?void 0:n[t])||s.zu[t];return i?"px"!==(null==(r=e.theme)||null==(r=r.breakpoints)?void 0:r.unit)?{maxWidth:`${i}${e.theme.breakpoints.unit}`}:{maxWidth:i}:{maxWidth:k(t)}};return(0,s.NI)(e,e.maxWidth,t)}return null};I.filterProps=["maxWidth"];const R=(0,i.Ay)({prop:"minWidth",transform:k}),D=(0,i.Ay)({prop:"height",transform:k}),L=(0,i.Ay)({prop:"maxHeight",transform:k}),P=(0,i.Ay)({prop:"minHeight",transform:k}),M=((0,i.Ay)({prop:"size",cssProperty:"width",transform:k}),(0,i.Ay)({prop:"size",cssProperty:"height",transform:k}),o(C,I,R,D,L,P,(0,i.Ay)({prop:"boxSizing"})),{border:{themeKey:"borders",transform:l},borderTop:{themeKey:"borders",transform:l},borderRight:{themeKey:"borders",transform:l},borderBottom:{themeKey:"borders",transform:l},borderLeft:{themeKey:"borders",transform:l},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:l},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:x},color:{themeKey:"palette",transform:S},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:S},backgroundColor:{themeKey:"palette",transform:S},p:{style:r.Ms},pt:{style:r.Ms},pr:{style:r.Ms},pb:{style:r.Ms},pl:{style:r.Ms},px:{style:r.Ms},py:{style:r.Ms},padding:{style:r.Ms},paddingTop:{style:r.Ms},paddingRight:{style:r.Ms},paddingBottom:{style:r.Ms},paddingLeft:{style:r.Ms},paddingX:{style:r.Ms},paddingY:{style:r.Ms},paddingInline:{style:r.Ms},paddingInlineStart:{style:r.Ms},paddingInlineEnd:{style:r.Ms},paddingBlock:{style:r.Ms},paddingBlockStart:{style:r.Ms},paddingBlockEnd:{style:r.Ms},m:{style:r.Lc},mt:{style:r.Lc},mr:{style:r.Lc},mb:{style:r.Lc},ml:{style:r.Lc},mx:{style:r.Lc},my:{style:r.Lc},margin:{style:r.Lc},marginTop:{style:r.Lc},marginRight:{style:r.Lc},marginBottom:{style:r.Lc},marginLeft:{style:r.Lc},marginX:{style:r.Lc},marginY:{style:r.Lc},marginInline:{style:r.Lc},marginInlineStart:{style:r.Lc},marginInlineEnd:{style:r.Lc},marginBlock:{style:r.Lc},marginBlockStart:{style:r.Lc},marginBlockEnd:{style:r.Lc},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:_},rowGap:{style:T},columnGap:{style:A},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:k},maxWidth:{style:I},minWidth:{transform:k},height:{transform:k},maxHeight:{transform:k},minHeight:{transform:k},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}})},8099:(e,t,n)=>{"use strict";function r(e){let t="https://mui.com/production-error/?code="+e;for(let n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}n.d(t,{A:()=>r})},8154:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var i=r(n(9526)),a=n(4414);t.A=(0,i.default)((0,a.jsx)("path",{d:"M21.99 4c0-1.1-.89-2-1.99-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h14l4 4zM18 14H6v-2h12zm0-3H6V9h12zm0-3H6V6h12z"}),"Comment")},8168:(e,t,n)=>{"use strict";function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(null,arguments)}n.d(t,{A:()=>r})},8283:(e,t,n)=>{"use strict";n.d(t,{AH:()=>u,i7:()=>d,mL:()=>c});var r=n(7370),i=n(9950),a=n(1783),o=n(6477),s=n(9015),l=(n(8603),n(3876),function(e,t){var n=arguments;if(null==t||!r.h.call(t,"css"))return i.createElement.apply(void 0,n);var a=n.length,o=new Array(a);o[0]=r.E,o[1]=(0,r.c)(e,t);for(var s=2;s<a;s++)o[s]=n[s];return i.createElement.apply(null,o)});!function(e){var t;t||(t=e.JSX||(e.JSX={}))}(l||(l={}));var c=(0,r.w)((function(e,t){var n=e.styles,l=(0,s.J)([n],void 0,i.useContext(r.T)),c=i.useRef();return(0,o.i)((function(){var e=t.key+"-global",n=new t.sheet.constructor({key:e,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),r=!1,i=document.querySelector('style[data-emotion="'+e+" "+l.name+'"]');return t.sheet.tags.length&&(n.before=t.sheet.tags[0]),null!==i&&(r=!0,i.setAttribute("data-emotion",e),n.hydrate([i])),c.current=[n,r],function(){n.flush()}}),[t]),(0,o.i)((function(){var e=c.current,n=e[0];if(e[1])e[1]=!1;else{if(void 0!==l.next&&(0,a.sk)(t,l.next,!0),n.tags.length){var r=n.tags[n.tags.length-1].nextElementSibling;n.before=r,n.flush()}t.insert("",l,n,!1)}}),[t,l.name]),null}));function u(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,s.J)(t)}function d(){var e=u.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}},8286:(e,t,n)=>{"use strict";n.d(t,{EU:()=>s,NI:()=>o,iZ:()=>c,kW:()=>u,vf:()=>l,zu:()=>i});var r=n(7483);const i={xs:0,sm:600,md:900,lg:1200,xl:1536},a={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${i[e]}px)`};function o(e,t,n){const r=e.theme||{};if(Array.isArray(t)){const e=r.breakpoints||a;return t.reduce(((r,i,a)=>(r[e.up(e.keys[a])]=n(t[a]),r)),{})}if("object"===typeof t){const e=r.breakpoints||a;return Object.keys(t).reduce(((r,a)=>{if(-1!==Object.keys(e.values||i).indexOf(a)){r[e.up(a)]=n(t[a],a)}else{const e=a;r[e]=t[e]}return r}),{})}return n(t)}function s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t;return(null==(t=e.keys)?void 0:t.reduce(((t,n)=>(t[e.up(n)]={},t)),{}))||{}}function l(e,t){return e.reduce(((e,t)=>{const n=e[t];return(!n||0===Object.keys(n).length)&&delete e[t],e}),t)}function c(e){const t=s(e);for(var n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];const o=[t,...i].reduce(((e,t)=>(0,r.A)(e,t)),{});return l(Object.keys(t),o)}function u(e){let{values:t,breakpoints:n,base:r}=e;const i=r||function(e,t){if("object"!==typeof e)return{};const n={},r=Object.keys(t);return Array.isArray(e)?r.forEach(((t,r)=>{r<e.length&&(n[t]=!0)})):r.forEach((t=>{null!=e[t]&&(n[t]=!0)})),n}(t,n),a=Object.keys(i);if(0===a.length)return t;let o;return a.reduce(((e,n,r)=>(Array.isArray(t)?(e[n]=null!=t[r]?t[r]:t[o],o=r):"object"===typeof t?(e[n]=null!=t[n]?t[n]:t[o],o=n):e[n]=t,e)),{})}},8345:(e,t,n)=>{"use strict";var r=n(9950),i=n(5340);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(s[e]=t,e=0;e<t.length;e++)o.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function m(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(f,e)||!d.call(p,e)&&(h.test(e)?f[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,E=Symbol.for("react.element"),x=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),k=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),L=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var M=Symbol.iterator;function N(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=M&&e[M]||e["@@iterator"])?e:null}var O,j=Object.assign;function F(e){if(void 0===O)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);O=t&&t[1]||""}return"\n"+O+e}var U=!1;function B(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||i[o]!==a[s]){var l="\n"+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=s);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function $(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=B(e.type,!1);case 11:return e=B(e.type.render,!1);case 1:return e=B(e.type,!0);default:return""}}function V(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case _:return"Fragment";case x:return"Portal";case T:return"Profiler";case A:return"StrictMode";case I:return"Suspense";case R:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case k:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case D:return null!==(t=e.displayName||null)?t:V(e.type)||"Memo";case L:t=e._payload,e=e._init;try{return V(e(t))}catch(n){}}return null}function W(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(t);case 8:return t===A?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function z(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function q(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function K(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return j({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Q(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=z(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function Z(e,t){X(e,t);var n=z(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,z(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function J(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&K(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+z(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return j({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:z(n)}}function ae(e,t){var n=z(t.value),r=z(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(pe).forEach((function(e){fe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]}))}));var ve=j({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function Ee(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xe=null,_e=null,Ae=null;function Te(e){if(e=bi(e)){if("function"!==typeof xe)throw Error(a(280));var t=e.stateNode;t&&(t=Ei(t),xe(e.stateNode,e.type,t))}}function Se(e){_e?Ae?Ae.push(e):Ae=[e]:_e=e}function ke(){if(_e){var e=_e,t=Ae;if(Ae=_e=null,Te(e),t)for(e=0;e<t.length;e++)Te(t[e])}}function Ce(e,t){return e(t)}function Ie(){}var Re=!1;function De(e,t,n){if(Re)return e(t,n);Re=!0;try{return Ce(e,t,n)}finally{Re=!1,(null!==_e||null!==Ae)&&(Ie(),ke())}}function Le(e,t){var n=e.stateNode;if(null===n)return null;var r=Ei(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Pe=!1;if(u)try{var Me={};Object.defineProperty(Me,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",Me,Me),window.removeEventListener("test",Me,Me)}catch(ue){Pe=!1}function Ne(e,t,n,r,i,a,o,s,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Oe=!1,je=null,Fe=!1,Ue=null,Be={onError:function(e){Oe=!0,je=e}};function $e(e,t,n,r,i,a,o,s,l){Oe=!1,je=null,Ne.apply(Be,arguments)}function Ve(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function We(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function ze(e){if(Ve(e)!==e)throw Error(a(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ve(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return ze(i),e;if(o===r)return ze(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=o;break}if(l===r){s=!0,r=i,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,r=i;break}if(l===r){s=!0,r=o,n=i;break}l=l.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?qe(e):null}function qe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=qe(e);if(null!==t)return t;e=e.sibling}return null}var Ge=i.unstable_scheduleCallback,Ke=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,Qe=i.unstable_requestPaint,Xe=i.unstable_now,Ze=i.unstable_getCurrentPriorityLevel,Je=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/lt|0)|0},st=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var s=o&~i;0!==s?r=dt(s):0!==(a&=o)&&(r=dt(a))}else 0!==(o=n&~i)?r=dt(o):0!==a&&(r=dt(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var bt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var Et,xt,_t,At,Tt,St=!1,kt=[],Ct=null,It=null,Rt=null,Dt=new Map,Lt=new Map,Pt=[],Mt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Nt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":It=null;break;case"mouseover":case"mouseout":Rt=null;break;case"pointerover":case"pointerout":Dt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Lt.delete(t.pointerId)}}function Ot(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=bi(t))&&xt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function jt(e){var t=yi(e.target);if(null!==t){var n=Ve(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=We(n)))return e.blockedOn=t,void Tt(e.priority,(function(){_t(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bi(n))&&xt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function Ut(e,t,n){Ft(e)&&n.delete(t)}function Bt(){St=!1,null!==Ct&&Ft(Ct)&&(Ct=null),null!==It&&Ft(It)&&(It=null),null!==Rt&&Ft(Rt)&&(Rt=null),Dt.forEach(Ut),Lt.forEach(Ut)}function $t(e,t){e.blockedOn===t&&(e.blockedOn=null,St||(St=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Bt)))}function Vt(e){function t(t){return $t(t,e)}if(0<kt.length){$t(kt[0],e);for(var n=1;n<kt.length;n++){var r=kt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&$t(Ct,e),null!==It&&$t(It,e),null!==Rt&&$t(Rt,e),Dt.forEach(t),Lt.forEach(t),n=0;n<Pt.length;n++)(r=Pt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Pt.length&&null===(n=Pt[0]).blockedOn;)jt(n),null===n.blockedOn&&Pt.shift()}var Wt=w.ReactCurrentBatchConfig,zt=!0;function Ht(e,t,n,r){var i=bt,a=Wt.transition;Wt.transition=null;try{bt=1,Gt(e,t,n,r)}finally{bt=i,Wt.transition=a}}function qt(e,t,n,r){var i=bt,a=Wt.transition;Wt.transition=null;try{bt=4,Gt(e,t,n,r)}finally{bt=i,Wt.transition=a}}function Gt(e,t,n,r){if(zt){var i=Yt(e,t,n,r);if(null===i)zr(e,t,r,Kt,n),Nt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Ot(Ct,e,t,n,r,i),!0;case"dragenter":return It=Ot(It,e,t,n,r,i),!0;case"mouseover":return Rt=Ot(Rt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Dt.set(a,Ot(Dt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Lt.set(a,Ot(Lt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Nt(e,r),4&t&&-1<Mt.indexOf(e)){for(;null!==i;){var a=bi(i);if(null!==a&&Et(a),null===(a=Yt(e,t,n,r))&&zr(e,t,r,Kt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else zr(e,t,r,null,n)}}var Kt=null;function Yt(e,t,n,r){if(Kt=null,null!==(e=yi(e=Ee(r))))if(null===(t=Ve(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=We(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Kt=e,null}function Qt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ze()){case Je:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,Zt=null,Jt=null;function en(){if(Jt)return Jt;var e,t,n=Zt,r=n.length,i="value"in Xt?Xt.value:Xt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Jt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return j(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,sn,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=an(cn),dn=j({},cn,{view:0,detail:0}),hn=an(dn),pn=j({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,sn=e.screenY-ln.screenY):sn=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),fn=an(pn),mn=an(j({},pn,{dataTransfer:0})),gn=an(j({},dn,{relatedTarget:0})),vn=an(j({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=j({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=an(yn),wn=an(j({},cn,{data:0})),En={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_n={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function An(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=_n[e])&&!!t[e]}function Tn(){return An}var Sn=j({},dn,{key:function(e){if(e.key){var t=En[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?xn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),kn=an(Sn),Cn=an(j({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),In=an(j({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tn})),Rn=an(j({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Dn=j({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ln=an(Dn),Pn=[9,13,27,32],Mn=u&&"CompositionEvent"in window,Nn=null;u&&"documentMode"in document&&(Nn=document.documentMode);var On=u&&"TextEvent"in window&&!Nn,jn=u&&(!Mn||Nn&&8<Nn&&11>=Nn),Fn=String.fromCharCode(32),Un=!1;function Bn(e,t){switch(e){case"keyup":return-1!==Pn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $n(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Vn=!1;var Wn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Wn[e.type]:"textarea"===t}function Hn(e,t,n,r){Se(r),0<(t=qr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var qn=null,Gn=null;function Kn(e){Fr(e,0)}function Yn(e){if(G(wi(e)))return e}function Qn(e,t){if("change"===e)return t}var Xn=!1;if(u){var Zn;if(u){var Jn="oninput"in document;if(!Jn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Jn="function"===typeof er.oninput}Zn=Jn}else Zn=!1;Xn=Zn&&(!document.documentMode||9<document.documentMode)}function tr(){qn&&(qn.detachEvent("onpropertychange",nr),Gn=qn=null)}function nr(e){if("value"===e.propertyName&&Yn(Gn)){var t=[];Hn(t,Gn,e,Ee(e)),De(Kn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(qn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Gn)}function ar(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!d.call(t,i)||!sr(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=K();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=K((e=t.contentWindow).document)}return t}function pr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&pr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=ur(n,a);var o=ur(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,vr=null,yr=null,br=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==gr||gr!==K(r)||("selectionStart"in(r=gr)&&pr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&lr(yr,r)||(yr=r,0<(r=qr(vr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function Er(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var xr={animationend:Er("Animation","AnimationEnd"),animationiteration:Er("Animation","AnimationIteration"),animationstart:Er("Animation","AnimationStart"),transitionend:Er("Transition","TransitionEnd")},_r={},Ar={};function Tr(e){if(_r[e])return _r[e];if(!xr[e])return e;var t,n=xr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ar)return _r[e]=n[t];return e}u&&(Ar=document.createElement("div").style,"AnimationEvent"in window||(delete xr.animationend.animation,delete xr.animationiteration.animation,delete xr.animationstart.animation),"TransitionEvent"in window||delete xr.transitionend.transition);var Sr=Tr("animationend"),kr=Tr("animationiteration"),Cr=Tr("animationstart"),Ir=Tr("transitionend"),Rr=new Map,Dr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Lr(e,t){Rr.set(e,t),l(t,[e])}for(var Pr=0;Pr<Dr.length;Pr++){var Mr=Dr[Pr];Lr(Mr.toLowerCase(),"on"+(Mr[0].toUpperCase()+Mr.slice(1)))}Lr(Sr,"onAnimationEnd"),Lr(kr,"onAnimationIteration"),Lr(Cr,"onAnimationStart"),Lr("dblclick","onDoubleClick"),Lr("focusin","onFocus"),Lr("focusout","onBlur"),Lr(Ir,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Nr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Or=new Set("cancel close invalid load scroll toggle".split(" ").concat(Nr));function jr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,s,l,c){if($e.apply(this,arguments),Oe){if(!Oe)throw Error(a(198));var u=je;Oe=!1,je=null,Fe||(Fe=!0,Ue=u)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==a&&i.isPropagationStopped())break e;jr(i,s,c),a=l}else for(o=0;o<r.length;o++){if(l=(s=r[o]).instance,c=s.currentTarget,s=s.listener,l!==a&&i.isPropagationStopped())break e;jr(i,s,c),a=l}}}if(Fe)throw e=Ue,Fe=!1,Ue=null,e}function Ur(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(Wr(t,e,2,!1),n.add(r))}function Br(e,t,n){var r=0;t&&(r|=4),Wr(n,e,r,t)}var $r="_reactListening"+Math.random().toString(36).slice(2);function Vr(e){if(!e[$r]){e[$r]=!0,o.forEach((function(t){"selectionchange"!==t&&(Or.has(t)||Br(t,!1,e),Br(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[$r]||(t[$r]=!0,Br("selectionchange",!1,t))}}function Wr(e,t,n,r){switch(Qt(t)){case 1:var i=Ht;break;case 4:i=qt;break;default:i=Gt}n=i.bind(null,t,n,e),i=void 0,!Pe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function zr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==s;){if(null===(o=yi(s)))return;if(5===(l=o.tag)||6===l){r=a=o;continue e}s=s.parentNode}}r=r.return}De((function(){var r=a,i=Ee(n),o=[];e:{var s=Rr.get(e);if(void 0!==s){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=kn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=In;break;case Sr:case kr:case Cr:l=vn;break;case Ir:l=Rn;break;case"scroll":l=hn;break;case"wheel":l=Ln;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Cn}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==s?s+"Capture":null:s;u=[];for(var p,f=r;null!==f;){var m=(p=f).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==h&&(null!=(m=Le(f,h))&&u.push(Hr(f,m,p)))),d)break;f=f.return}0<u.length&&(s=new l(s,c,null,n,i),o.push({event:s,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!yi(c)&&!c[fi])&&(l||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?yi(c):null)&&(c!==(d=Ve(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=fn,m="onMouseLeave",h="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(u=Cn,m="onPointerLeave",h="onPointerEnter",f="pointer"),d=null==l?s:wi(l),p=null==c?s:wi(c),(s=new u(m,f+"leave",l,n,i)).target=d,s.relatedTarget=p,m=null,yi(i)===r&&((u=new u(h,f+"enter",c,n,i)).target=p,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(h=c,f=0,p=u=l;p;p=Gr(p))f++;for(p=0,m=h;m;m=Gr(m))p++;for(;0<f-p;)u=Gr(u),f--;for(;0<p-f;)h=Gr(h),p--;for(;f--;){if(u===h||null!==h&&u===h.alternate)break e;u=Gr(u),h=Gr(h)}u=null}else u=null;null!==l&&Kr(o,s,l,u,!1),null!==c&&null!==d&&Kr(o,d,c,u,!0)}if("select"===(l=(s=r?wi(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var g=Qn;else if(zn(s))if(Xn)g=or;else{g=ir;var v=rr}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=ar);switch(g&&(g=g(e,r))?Hn(o,g,n,i):(v&&v(e,s,r),"focusout"===e&&(v=s._wrapperState)&&v.controlled&&"number"===s.type&&ee(s,"number",s.value)),v=r?wi(r):window,e){case"focusin":(zn(v)||"true"===v.contentEditable)&&(gr=v,vr=r,yr=null);break;case"focusout":yr=vr=gr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,wr(o,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":wr(o,n,i)}var y;if(Mn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Vn?Bn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(jn&&"ko"!==n.locale&&(Vn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Vn&&(y=en()):(Zt="value"in(Xt=i)?Xt.value:Xt.textContent,Vn=!0)),0<(v=qr(r,b)).length&&(b=new wn(b,e,null,n,i),o.push({event:b,listeners:v}),y?b.data=y:null!==(y=$n(n))&&(b.data=y))),(y=On?function(e,t){switch(e){case"compositionend":return $n(t);case"keypress":return 32!==t.which?null:(Un=!0,Fn);case"textInput":return(e=t.data)===Fn&&Un?null:e;default:return null}}(e,n):function(e,t){if(Vn)return"compositionend"===e||!Mn&&Bn(e,t)?(e=en(),Jt=Zt=Xt=null,Vn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return jn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=qr(r,"onBeforeInput")).length&&(i=new wn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=y))}Fr(o,t)}))}function Hr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function qr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Le(e,n))&&r.unshift(Hr(e,a,i)),null!=(a=Le(e,t))&&r.push(Hr(e,a,i))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Kr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var s=n,l=s.alternate,c=s.stateNode;if(null!==l&&l===r)break;5===s.tag&&null!==c&&(s=c,i?null!=(l=Le(n,a))&&o.unshift(Hr(n,l,s)):i||null!=(l=Le(n,a))&&o.push(Hr(n,l,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,Qr=/\u0000|\uFFFD/g;function Xr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Qr,"")}function Zr(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(a(425))}function Jr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(si)}:ri;function si(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Vt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Vt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var di=Math.random().toString(36).slice(2),hi="__reactFiber$"+di,pi="__reactProps$"+di,fi="__reactContainer$"+di,mi="__reactEvents$"+di,gi="__reactListeners$"+di,vi="__reactHandles$"+di;function yi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[hi])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function bi(e){return!(e=e[hi]||e[fi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function Ei(e){return e[pi]||null}var xi=[],_i=-1;function Ai(e){return{current:e}}function Ti(e){0>_i||(e.current=xi[_i],xi[_i]=null,_i--)}function Si(e,t){_i++,xi[_i]=e.current,e.current=t}var ki={},Ci=Ai(ki),Ii=Ai(!1),Ri=ki;function Di(e,t){var n=e.type.contextTypes;if(!n)return ki;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Li(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Pi(){Ti(Ii),Ti(Ci)}function Mi(e,t,n){if(Ci.current!==ki)throw Error(a(168));Si(Ci,t),Si(Ii,n)}function Ni(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,W(e)||"Unknown",i));return j({},n,r)}function Oi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ki,Ri=Ci.current,Si(Ci,e),Si(Ii,Ii.current),!0}function ji(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Ni(e,t,Ri),r.__reactInternalMemoizedMergedChildContext=e,Ti(Ii),Ti(Ci),Si(Ci,e)):Ti(Ii),Si(Ii,n)}var Fi=null,Ui=!1,Bi=!1;function $i(e){null===Fi?Fi=[e]:Fi.push(e)}function Vi(){if(!Bi&&null!==Fi){Bi=!0;var e=0,t=bt;try{var n=Fi;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fi=null,Ui=!1}catch(i){throw null!==Fi&&(Fi=Fi.slice(e+1)),Ge(Je,Vi),i}finally{bt=t,Bi=!1}}return null}var Wi=[],zi=0,Hi=null,qi=0,Gi=[],Ki=0,Yi=null,Qi=1,Xi="";function Zi(e,t){Wi[zi++]=qi,Wi[zi++]=Hi,Hi=e,qi=t}function Ji(e,t,n){Gi[Ki++]=Qi,Gi[Ki++]=Xi,Gi[Ki++]=Yi,Yi=e;var r=Qi;e=Xi;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Qi=1<<32-ot(t)+i|n<<i|r,Xi=a+e}else Qi=1<<a|n<<i|r,Xi=e}function ea(e){null!==e.return&&(Zi(e,1),Ji(e,1,0))}function ta(e){for(;e===Hi;)Hi=Wi[--zi],Wi[zi]=null,qi=Wi[--zi],Wi[zi]=null;for(;e===Yi;)Yi=Gi[--Ki],Gi[Ki]=null,Xi=Gi[--Ki],Gi[Ki]=null,Qi=Gi[--Ki],Gi[Ki]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Dc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function sa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:Qi,overflow:Xi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Dc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function la(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!sa(e,t)){if(la(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&sa(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(la(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function ua(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function da(e){if(e!==na)return!1;if(!ia)return ua(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(la(e))throw ha(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(ua(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=ra;e;)e=ci(e.nextSibling)}function pa(){ra=na=null,ia=!1}function fa(e){null===aa?aa=[e]:aa.push(e)}var ma=w.ReactCurrentBatchConfig;function ga(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function va(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ya(e){return(0,e._init)(e._payload)}function ba(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Pc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=jc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===_?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===L&&ya(a)===t.type)?((r=i(t,n.props)).ref=ga(e,t,n),r.return=e,r):((r=Mc(n.type,n.key,n.props,null,e.mode,r)).ref=ga(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,a){return null===t||7!==t.tag?((t=Nc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=jc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case E:return(n=Mc(t.type,t.key,t.props,null,e.mode,n)).ref=ga(e,null,t),n.return=e,n;case x:return(t=Fc(t,e.mode,n)).return=e,t;case L:return h(e,(0,t._init)(t._payload),n)}if(te(t)||N(t))return(t=Nc(t,e.mode,n,null)).return=e,t;va(e,t)}return null}function p(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case E:return n.key===i?c(e,t,n,r):null;case x:return n.key===i?u(e,t,n,r):null;case L:return p(e,t,(i=n._init)(n._payload),r)}if(te(n)||N(n))return null!==i?null:d(e,t,n,r,null);va(e,n)}return null}function f(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case E:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case x:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case L:return f(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||N(r))return d(t,e=e.get(n)||null,r,i,null);va(t,r)}return null}function m(i,a,s,l){for(var c=null,u=null,d=a,m=a=0,g=null;null!==d&&m<s.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var v=p(i,d,s[m],l);if(null===v){null===d&&(d=g);break}e&&d&&null===v.alternate&&t(i,d),a=o(v,a,m),null===u?c=v:u.sibling=v,u=v,d=g}if(m===s.length)return n(i,d),ia&&Zi(i,m),c;if(null===d){for(;m<s.length;m++)null!==(d=h(i,s[m],l))&&(a=o(d,a,m),null===u?c=d:u.sibling=d,u=d);return ia&&Zi(i,m),c}for(d=r(i,d);m<s.length;m++)null!==(g=f(d,i,m,s[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),a=o(g,a,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach((function(e){return t(i,e)})),ia&&Zi(i,m),c}function g(i,s,l,c){var u=N(l);if("function"!==typeof u)throw Error(a(150));if(null==(l=u.call(l)))throw Error(a(151));for(var d=u=null,m=s,g=s=0,v=null,y=l.next();null!==m&&!y.done;g++,y=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var b=p(i,m,y.value,c);if(null===b){null===m&&(m=v);break}e&&m&&null===b.alternate&&t(i,m),s=o(b,s,g),null===d?u=b:d.sibling=b,d=b,m=v}if(y.done)return n(i,m),ia&&Zi(i,g),u;if(null===m){for(;!y.done;g++,y=l.next())null!==(y=h(i,y.value,c))&&(s=o(y,s,g),null===d?u=y:d.sibling=y,d=y);return ia&&Zi(i,g),u}for(m=r(i,m);!y.done;g++,y=l.next())null!==(y=f(m,i,g,y.value,c))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),s=o(y,s,g),null===d?u=y:d.sibling=y,d=y);return e&&m.forEach((function(e){return t(i,e)})),ia&&Zi(i,g),u}return function e(r,a,o,l){if("object"===typeof o&&null!==o&&o.type===_&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case E:e:{for(var c=o.key,u=a;null!==u;){if(u.key===c){if((c=o.type)===_){if(7===u.tag){n(r,u.sibling),(a=i(u,o.props.children)).return=r,r=a;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===L&&ya(c)===u.type){n(r,u.sibling),(a=i(u,o.props)).ref=ga(r,u,o),a.return=r,r=a;break e}n(r,u);break}t(r,u),u=u.sibling}o.type===_?((a=Nc(o.props.children,r.mode,l,o.key)).return=r,r=a):((l=Mc(o.type,o.key,o.props,null,r.mode,l)).ref=ga(r,a,o),l.return=r,r=l)}return s(r);case x:e:{for(u=o.key;null!==a;){if(a.key===u){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Fc(o,r.mode,l)).return=r,r=a}return s(r);case L:return e(r,a,(u=o._init)(o._payload),l)}if(te(o))return m(r,a,o,l);if(N(o))return g(r,a,o,l);va(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=jc(o,r.mode,l)).return=r,r=a),s(r)):n(r,a)}}var wa=ba(!0),Ea=ba(!1),xa=Ai(null),_a=null,Aa=null,Ta=null;function Sa(){Ta=Aa=_a=null}function ka(e){var t=xa.current;Ti(xa),e._currentValue=t}function Ca(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ia(e,t){_a=e,Ta=Aa=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bs=!0),e.firstContext=null)}function Ra(e){var t=e._currentValue;if(Ta!==e)if(e={context:e,memoizedValue:t,next:null},null===Aa){if(null===_a)throw Error(a(308));Aa=e,_a.dependencies={lanes:0,firstContext:e}}else Aa=Aa.next=e;return t}var Da=null;function La(e){null===Da?Da=[e]:Da.push(e)}function Pa(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,La(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ma(e,r)}function Ma(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Na=!1;function Oa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ja(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ua(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Cl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ma(e,n)}return null===(i=r.interleaved)?(t.next=t,La(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ma(e,n)}function Ba(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function $a(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Va(e,t,n,r){var i=e.updateQueue;Na=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var l=s,c=l.next;l.next=null,null===o?a=c:o.next=c,o=l;var u=e.alternate;null!==u&&((s=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===s?u.firstBaseUpdate=c:s.next=c,u.lastBaseUpdate=l))}if(null!==a){var d=i.baseState;for(o=0,u=c=l=null,s=a;;){var h=s.lane,p=s.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:p,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var f=e,m=s;switch(h=t,p=n,m.tag){case 1:if("function"===typeof(f=m.payload)){d=f.call(p,d,h);break e}d=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(h="function"===typeof(f=m.payload)?f.call(p,d,h):f)||void 0===h)break e;d=j({},d,h);break e;case 2:Na=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[s]:h.push(s))}else p={eventTime:p,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===u?(c=u=p,l=d):u=u.next=p,o|=h;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(h=s).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Ol|=o,e.lanes=o,e.memoizedState=d}}function Wa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var za={},Ha=Ai(za),qa=Ai(za),Ga=Ai(za);function Ka(e){if(e===za)throw Error(a(174));return e}function Ya(e,t){switch(Si(Ga,t),Si(qa,e),Si(Ha,za),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ti(Ha),Si(Ha,t)}function Qa(){Ti(Ha),Ti(qa),Ti(Ga)}function Xa(e){Ka(Ga.current);var t=Ka(Ha.current),n=le(t,e.type);t!==n&&(Si(qa,e),Si(Ha,n))}function Za(e){qa.current===e&&(Ti(Ha),Ti(qa))}var Ja=Ai(0);function eo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var to=[];function no(){for(var e=0;e<to.length;e++)to[e]._workInProgressVersionPrimary=null;to.length=0}var ro=w.ReactCurrentDispatcher,io=w.ReactCurrentBatchConfig,ao=0,oo=null,so=null,lo=null,co=!1,uo=!1,ho=0,po=0;function fo(){throw Error(a(321))}function mo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function go(e,t,n,r,i,o){if(ao=o,oo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ro.current=null===e||null===e.memoizedState?Jo:es,e=n(r,i),uo){o=0;do{if(uo=!1,ho=0,25<=o)throw Error(a(301));o+=1,lo=so=null,t.updateQueue=null,ro.current=ts,e=n(r,i)}while(uo)}if(ro.current=Zo,t=null!==so&&null!==so.next,ao=0,lo=so=oo=null,co=!1,t)throw Error(a(300));return e}function vo(){var e=0!==ho;return ho=0,e}function yo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===lo?oo.memoizedState=lo=e:lo=lo.next=e,lo}function bo(){if(null===so){var e=oo.alternate;e=null!==e?e.memoizedState:null}else e=so.next;var t=null===lo?oo.memoizedState:lo.next;if(null!==t)lo=t,so=e;else{if(null===e)throw Error(a(310));e={memoizedState:(so=e).memoizedState,baseState:so.baseState,baseQueue:so.baseQueue,queue:so.queue,next:null},null===lo?oo.memoizedState=lo=e:lo=lo.next=e}return lo}function wo(e,t){return"function"===typeof t?t(e):t}function Eo(e){var t=bo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=so,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var l=s=null,c=null,u=o;do{var d=u.lane;if((ao&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,s=r):c=c.next=h,oo.lanes|=d,Ol|=d}u=u.next}while(null!==u&&u!==o);null===c?s=r:c.next=l,sr(r,t.memoizedState)||(bs=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,oo.lanes|=o,Ol|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function xo(e){var t=bo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);sr(o,t.memoizedState)||(bs=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function _o(){}function Ao(e,t){var n=oo,r=bo(),i=t(),o=!sr(r.memoizedState,i);if(o&&(r.memoizedState=i,bs=!0),r=r.queue,Oo(ko.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==lo&&1&lo.memoizedState.tag){if(n.flags|=2048,Do(9,So.bind(null,n,r,i,t),void 0,null),null===Il)throw Error(a(349));0!==(30&ao)||To(n,t,i)}return i}function To(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function So(e,t,n,r){t.value=n,t.getSnapshot=r,Co(t)&&Io(e)}function ko(e,t,n){return n((function(){Co(t)&&Io(e)}))}function Co(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function Io(e){var t=Ma(e,1);null!==t&&nc(t,e,1,-1)}function Ro(e){var t=yo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wo,lastRenderedState:e},t.queue=e,e=e.dispatch=Ko.bind(null,oo,e),[t.memoizedState,e]}function Do(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Lo(){return bo().memoizedState}function Po(e,t,n,r){var i=yo();oo.flags|=e,i.memoizedState=Do(1|t,n,void 0,void 0===r?null:r)}function Mo(e,t,n,r){var i=bo();r=void 0===r?null:r;var a=void 0;if(null!==so){var o=so.memoizedState;if(a=o.destroy,null!==r&&mo(r,o.deps))return void(i.memoizedState=Do(t,n,a,r))}oo.flags|=e,i.memoizedState=Do(1|t,n,a,r)}function No(e,t){return Po(8390656,8,e,t)}function Oo(e,t){return Mo(2048,8,e,t)}function jo(e,t){return Mo(4,2,e,t)}function Fo(e,t){return Mo(4,4,e,t)}function Uo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Bo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Mo(4,4,Uo.bind(null,t,e),n)}function $o(){}function Vo(e,t){var n=bo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&mo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Wo(e,t){var n=bo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&mo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function zo(e,t,n){return 0===(21&ao)?(e.baseState&&(e.baseState=!1,bs=!0),e.memoizedState=n):(sr(n,t)||(n=mt(),oo.lanes|=n,Ol|=n,e.baseState=!0),t)}function Ho(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=io.transition;io.transition={};try{e(!1),t()}finally{bt=n,io.transition=r}}function qo(){return bo().memoizedState}function Go(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Yo(e))Qo(t,n);else if(null!==(n=Pa(e,t,n,r))){nc(n,e,r,ec()),Xo(n,t,r)}}function Ko(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Yo(e))Qo(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,sr(s,o)){var l=t.interleaved;return null===l?(i.next=i,La(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Pa(e,t,i,r))&&(nc(n,e,r,i=ec()),Xo(n,t,r))}}function Yo(e){var t=e.alternate;return e===oo||null!==t&&t===oo}function Qo(e,t){uo=co=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Xo(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var Zo={readContext:Ra,useCallback:fo,useContext:fo,useEffect:fo,useImperativeHandle:fo,useInsertionEffect:fo,useLayoutEffect:fo,useMemo:fo,useReducer:fo,useRef:fo,useState:fo,useDebugValue:fo,useDeferredValue:fo,useTransition:fo,useMutableSource:fo,useSyncExternalStore:fo,useId:fo,unstable_isNewReconciler:!1},Jo={readContext:Ra,useCallback:function(e,t){return yo().memoizedState=[e,void 0===t?null:t],e},useContext:Ra,useEffect:No,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Po(4194308,4,Uo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Po(4194308,4,e,t)},useInsertionEffect:function(e,t){return Po(4,2,e,t)},useMemo:function(e,t){var n=yo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=yo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Go.bind(null,oo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},yo().memoizedState=e},useState:Ro,useDebugValue:$o,useDeferredValue:function(e){return yo().memoizedState=e},useTransition:function(){var e=Ro(!1),t=e[0];return e=Ho.bind(null,e[1]),yo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=oo,i=yo();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Il)throw Error(a(349));0!==(30&ao)||To(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,No(ko.bind(null,r,o,e),[e]),r.flags|=2048,Do(9,So.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=yo(),t=Il.identifierPrefix;if(ia){var n=Xi;t=":"+t+"R"+(n=(Qi&~(1<<32-ot(Qi)-1)).toString(32)+n),0<(n=ho++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=po++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},es={readContext:Ra,useCallback:Vo,useContext:Ra,useEffect:Oo,useImperativeHandle:Bo,useInsertionEffect:jo,useLayoutEffect:Fo,useMemo:Wo,useReducer:Eo,useRef:Lo,useState:function(){return Eo(wo)},useDebugValue:$o,useDeferredValue:function(e){return zo(bo(),so.memoizedState,e)},useTransition:function(){return[Eo(wo)[0],bo().memoizedState]},useMutableSource:_o,useSyncExternalStore:Ao,useId:qo,unstable_isNewReconciler:!1},ts={readContext:Ra,useCallback:Vo,useContext:Ra,useEffect:Oo,useImperativeHandle:Bo,useInsertionEffect:jo,useLayoutEffect:Fo,useMemo:Wo,useReducer:xo,useRef:Lo,useState:function(){return xo(wo)},useDebugValue:$o,useDeferredValue:function(e){var t=bo();return null===so?t.memoizedState=e:zo(t,so.memoizedState,e)},useTransition:function(){return[xo(wo)[0],bo().memoizedState]},useMutableSource:_o,useSyncExternalStore:Ao,useId:qo,unstable_isNewReconciler:!1};function ns(e,t){if(e&&e.defaultProps){for(var n in t=j({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function rs(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:j({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var is={isMounted:function(e){return!!(e=e._reactInternals)&&Ve(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),a=Fa(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Ua(e,a,i))&&(nc(t,e,i,r),Ba(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),a=Fa(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Ua(e,a,i))&&(nc(t,e,i,r),Ba(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=Fa(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Ua(e,i,r))&&(nc(t,e,r,n),Ba(t,e,r))}};function as(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,a))}function os(e,t,n){var r=!1,i=ki,a=t.contextType;return"object"===typeof a&&null!==a?a=Ra(a):(i=Li(t)?Ri:Ci.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Di(e,i):ki),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=is,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function ss(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&is.enqueueReplaceState(t,t.state,null)}function ls(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Oa(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Ra(a):(a=Li(t)?Ri:Ci.current,i.context=Di(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(rs(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&is.enqueueReplaceState(i,i.state,null),Va(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function cs(e,t){try{var n="",r=t;do{n+=$(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function us(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ds(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var hs="function"===typeof WeakMap?WeakMap:Map;function ps(e,t,n){(n=Fa(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){zl||(zl=!0,Hl=r),ds(0,t)},n}function fs(e,t,n){(n=Fa(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ds(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){ds(0,t),"function"!==typeof r&&(null===ql?ql=new Set([this]):ql.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ms(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new hs;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Tc.bind(null,e,t,n),t.then(e,e))}function gs(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vs(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Fa(-1,1)).tag=2,Ua(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ys=w.ReactCurrentOwner,bs=!1;function ws(e,t,n,r){t.child=null===e?Ea(t,null,n,r):wa(t,e.child,n,r)}function Es(e,t,n,r,i){n=n.render;var a=t.ref;return Ia(t,i),r=go(e,t,n,r,a,i),n=vo(),null===e||bs?(ia&&n&&ea(t),t.flags|=1,ws(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,zs(e,t,i))}function xs(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Lc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Mc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,_s(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(o,r)&&e.ref===t.ref)return zs(e,t,i)}return t.flags|=1,(e=Pc(a,r)).ref=t.ref,e.return=t,t.child=e}function _s(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(lr(a,r)&&e.ref===t.ref){if(bs=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,zs(e,t,i);0!==(131072&e.flags)&&(bs=!0)}}return Ss(e,t,n,r,i)}function As(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Si(Pl,Ll),Ll|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Si(Pl,Ll),Ll|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Si(Pl,Ll),Ll|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Si(Pl,Ll),Ll|=r;return ws(e,t,i,n),t.child}function Ts(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ss(e,t,n,r,i){var a=Li(n)?Ri:Ci.current;return a=Di(t,a),Ia(t,i),n=go(e,t,n,r,a,i),r=vo(),null===e||bs?(ia&&r&&ea(t),t.flags|=1,ws(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,zs(e,t,i))}function ks(e,t,n,r,i){if(Li(n)){var a=!0;Oi(t)}else a=!1;if(Ia(t,i),null===t.stateNode)Ws(e,t),os(t,n,r),ls(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var l=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ra(c):c=Di(t,c=Li(n)?Ri:Ci.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof o.getSnapshotBeforeUpdate;d||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||l!==c)&&ss(t,o,r,c),Na=!1;var h=t.memoizedState;o.state=h,Va(t,r,o,i),l=t.memoizedState,s!==r||h!==l||Ii.current||Na?("function"===typeof u&&(rs(t,n,u,r),l=t.memoizedState),(s=Na||as(t,n,s,r,h,l,c))?(d||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=c,r=s):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,ja(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:ns(t.type,s),o.props=c,d=t.pendingProps,h=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ra(l):l=Di(t,l=Li(n)?Ri:Ci.current);var p=n.getDerivedStateFromProps;(u="function"===typeof p||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==d||h!==l)&&ss(t,o,r,l),Na=!1,h=t.memoizedState,o.state=h,Va(t,r,o,i);var f=t.memoizedState;s!==d||h!==f||Ii.current||Na?("function"===typeof p&&(rs(t,n,p,r),f=t.memoizedState),(c=Na||as(t,n,c,r,h,f,l)||!1)?(u||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,f,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),o.props=r,o.state=f,o.context=l,r=c):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Cs(e,t,n,r,a,i)}function Cs(e,t,n,r,i,a){Ts(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&ji(t,n,!1),zs(e,t,a);r=t.stateNode,ys.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=wa(t,e.child,null,a),t.child=wa(t,null,s,a)):ws(e,t,s,a),t.memoizedState=r.state,i&&ji(t,n,!0),t.child}function Is(e){var t=e.stateNode;t.pendingContext?Mi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Mi(0,t.context,!1),Ya(e,t.containerInfo)}function Rs(e,t,n,r,i){return pa(),fa(i),t.flags|=256,ws(e,t,n,r),t.child}var Ds,Ls,Ps,Ms,Ns={dehydrated:null,treeContext:null,retryLane:0};function Os(e){return{baseLanes:e,cachePool:null,transitions:null}}function js(e,t,n){var r,i=t.pendingProps,o=Ja.current,s=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Si(Ja,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,s?(i=t.mode,s=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=l):s=Oc(l,i,0,null),e=Nc(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Os(n),t.memoizedState=Ns,e):Fs(t,l));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,s){if(n)return 256&t.flags?(t.flags&=-257,Us(e,t,s,r=us(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Oc({mode:"visible",children:r.children},i,0,null),(o=Nc(o,i,s,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&wa(t,e.child,null,s),t.child.memoizedState=Os(s),t.memoizedState=Ns,o);if(0===(1&t.mode))return Us(e,t,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Us(e,t,s,r=us(o=Error(a(419)),r,void 0))}if(l=0!==(s&e.childLanes),bs||l){if(null!==(r=Il)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|s))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Ma(e,i),nc(r,e,i,-1))}return mc(),Us(e,t,s,r=us(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=kc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Gi[Ki++]=Qi,Gi[Ki++]=Xi,Gi[Ki++]=Yi,Qi=e.id,Xi=e.overflow,Yi=t),t=Fs(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,o,n);if(s){s=i.fallback,l=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Pc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?s=Pc(r,s):(s=Nc(s,l,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,l=null===(l=e.child.memoizedState)?Os(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=e.childLanes&~n,t.memoizedState=Ns,i}return e=(s=e.child).sibling,i=Pc(s,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Fs(e,t){return(t=Oc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Us(e,t,n,r){return null!==r&&fa(r),wa(t,e.child,null,n),(e=Fs(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Bs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ca(e.return,t,n)}function $s(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function Vs(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(ws(e,t,r.children,n),0!==(2&(r=Ja.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Bs(e,n,t);else if(19===e.tag)Bs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Si(Ja,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===eo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),$s(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===eo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}$s(t,!0,n,null,a);break;case"together":$s(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ws(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function zs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ol|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Pc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Pc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Hs(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function qs(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Gs(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qs(t),null;case 1:case 17:return Li(t.type)&&Pi(),qs(t),null;case 3:return r=t.stateNode,Qa(),Ti(Ii),Ti(Ci),no(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(da(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(oc(aa),aa=null))),Ls(e,t),qs(t),null;case 5:Za(t);var i=Ka(Ga.current);if(n=t.type,null!==e&&null!=t.stateNode)Ps(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return qs(t),null}if(e=Ka(Ha.current),da(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[pi]=o,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<Nr.length;i++)Ur(Nr[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":Q(r,o),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ur("invalid",r);break;case"textarea":ie(r,o),Ur("invalid",r)}for(var l in ye(n,o),i=null,o)if(o.hasOwnProperty(l)){var c=o[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Zr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Zr(r.textContent,c,e),i=["children",""+c]):s.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Ur("scroll",r)}switch(n){case"input":q(r),J(r,o,!0);break;case"textarea":q(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Jr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[hi]=t,e[pi]=r,Ds(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<Nr.length;i++)Ur(Nr[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":Q(e,r),i=Y(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=j({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(o in ye(n,i),c=i)if(c.hasOwnProperty(o)){var u=c[o];"style"===o?ge(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===o?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(s.hasOwnProperty(o)?null!=u&&"onScroll"===o&&Ur("scroll",e):null!=u&&b(e,o,u,l))}switch(n){case"input":q(e),J(e,r,!1);break;case"textarea":q(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+z(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Jr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return qs(t),null;case 6:if(e&&null!=t.stateNode)Ms(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=Ka(Ga.current),Ka(Ha.current),da(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Zr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Zr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return qs(t),null;case 13:if(Ti(Ja),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))ha(),pa(),t.flags|=98560,o=!1;else if(o=da(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[hi]=t}else pa(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;qs(t),o=!1}else null!==aa&&(oc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Ja.current)?0===Ml&&(Ml=3):mc())),null!==t.updateQueue&&(t.flags|=4),qs(t),null);case 4:return Qa(),Ls(e,t),null===e&&Vr(t.stateNode.containerInfo),qs(t),null;case 10:return ka(t.type._context),qs(t),null;case 19:if(Ti(Ja),null===(o=t.memoizedState))return qs(t),null;if(r=0!==(128&t.flags),null===(l=o.rendering))if(r)Hs(o,!1);else{if(0!==Ml||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=eo(e))){for(t.flags|=128,Hs(o,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Si(Ja,1&Ja.current|2),t.child}e=e.sibling}null!==o.tail&&Xe()>Vl&&(t.flags|=128,r=!0,Hs(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=eo(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Hs(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!ia)return qs(t),null}else 2*Xe()-o.renderingStartTime>Vl&&1073741824!==n&&(t.flags|=128,r=!0,Hs(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Xe(),t.sibling=null,n=Ja.current,Si(Ja,r?1&n|2:1&n),t):(qs(t),null);case 22:case 23:return dc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ll)&&(qs(t),6&t.subtreeFlags&&(t.flags|=8192)):qs(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Ks(e,t){switch(ta(t),t.tag){case 1:return Li(t.type)&&Pi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Qa(),Ti(Ii),Ti(Ci),no(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Za(t),null;case 13:if(Ti(Ja),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));pa()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ti(Ja),null;case 4:return Qa(),null;case 10:return ka(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Ds=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ls=function(){},Ps=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Ka(Ha.current);var a,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=j({},i,{value:void 0}),r=j({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Jr)}for(u in ye(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(s.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(o=o||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(s.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Ur("scroll",e),o||l===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},Ms=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ys=!1,Qs=!1,Xs="function"===typeof WeakSet?WeakSet:Set,Zs=null;function Js(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ac(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){Ac(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&el(t,n,a)}i=i.next}while(i!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function il(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function al(e){var t=e.alternate;null!==t&&(e.alternate=null,al(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[pi],delete t[mi],delete t[gi],delete t[vi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ol(e){return 5===e.tag||3===e.tag||4===e.tag}function sl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ol(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Jr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var ul=null,dl=!1;function hl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(s){}switch(n.tag){case 5:Qs||Js(n,t);case 6:var r=ul,i=dl;ul=null,hl(e,t,n),dl=i,null!==(ul=r)&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Vt(e)):li(ul,n.stateNode));break;case 4:r=ul,i=dl,ul=n.stateNode.containerInfo,dl=!0,hl(e,t,n),ul=r,dl=i;break;case 0:case 11:case 14:case 15:if(!Qs&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&el(n,t,o),i=i.next}while(i!==r)}hl(e,t,n);break;case 1:if(!Qs&&(Js(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Ac(n,t,s)}hl(e,t,n);break;case 21:hl(e,t,n);break;case 22:1&n.mode?(Qs=(r=Qs)||null!==n.memoizedState,hl(e,t,n),Qs=r):hl(e,t,n);break;default:hl(e,t,n)}}function fl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xs),t.forEach((function(t){var r=Cc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ml(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,dl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===ul)throw Error(a(160));pl(o,s,i),ul=null,dl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){Ac(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),vl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(g){Ac(e,e.return,g)}try{nl(5,e,e.return)}catch(g){Ac(e,e.return,g)}}break;case 1:ml(t,e),vl(e),512&r&&null!==n&&Js(n,n.return);break;case 5:if(ml(t,e),vl(e),512&r&&null!==n&&Js(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(g){Ac(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,s=null!==n?n.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===o.type&&null!=o.name&&X(i,o),be(l,s);var u=be(l,o);for(s=0;s<c.length;s+=2){var d=c[s],h=c[s+1];"style"===d?ge(i,h):"dangerouslySetInnerHTML"===d?de(i,h):"children"===d?he(i,h):b(i,d,h,u)}switch(l){case"input":Z(i,o);break;case"textarea":ae(i,o);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var f=o.value;null!=f?ne(i,!!o.multiple,f,!1):p!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[pi]=o}catch(g){Ac(e,e.return,g)}}break;case 6:if(ml(t,e),vl(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(g){Ac(e,e.return,g)}}break;case 3:if(ml(t,e),vl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Vt(t.containerInfo)}catch(g){Ac(e,e.return,g)}break;case 4:default:ml(t,e),vl(e);break;case 13:ml(t,e),vl(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||($l=Xe())),4&r&&fl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Qs=(u=Qs)||d,ml(t,e),Qs=u):ml(t,e),vl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(Zs=e,d=e.child;null!==d;){for(h=Zs=d;null!==Zs;){switch(f=(p=Zs).child,p.tag){case 0:case 11:case 14:case 15:nl(4,p,p.return);break;case 1:Js(p,p.return);var m=p.stateNode;if("function"===typeof m.componentWillUnmount){r=p,n=p.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Ac(r,n,g)}}break;case 5:Js(p,p.return);break;case 22:if(null!==p.memoizedState){El(h);continue}}null!==f?(f.return=p,Zs=f):El(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{i=h.stateNode,u?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=h.stateNode,s=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",s))}catch(g){Ac(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){Ac(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ml(t,e),vl(e),4&r&&fl(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ol(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),cl(e,sl(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;ll(e,sl(e),o);break;default:throw Error(a(161))}}catch(s){Ac(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yl(e,t,n){Zs=e,bl(e,t,n)}function bl(e,t,n){for(var r=0!==(1&e.mode);null!==Zs;){var i=Zs,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Ys;if(!o){var s=i.alternate,l=null!==s&&null!==s.memoizedState||Qs;s=Ys;var c=Qs;if(Ys=o,(Qs=l)&&!c)for(Zs=i;null!==Zs;)l=(o=Zs).child,22===o.tag&&null!==o.memoizedState?xl(i):null!==l?(l.return=o,Zs=l):xl(i);for(;null!==a;)Zs=a,bl(a,t,n),a=a.sibling;Zs=i,Ys=s,Qs=c}wl(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Zs=a):wl(e)}}function wl(e){for(;null!==Zs;){var t=Zs;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Qs||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Qs)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ns(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Wa(t,o,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Wa(t,s,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Vt(h)}}}break;default:throw Error(a(163))}Qs||512&t.flags&&il(t)}catch(p){Ac(t,t.return,p)}}if(t===e){Zs=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zs=n;break}Zs=t.return}}function El(e){for(;null!==Zs;){var t=Zs;if(t===e){Zs=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zs=n;break}Zs=t.return}}function xl(e){for(;null!==Zs;){var t=Zs;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){Ac(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Ac(t,i,l)}}var a=t.return;try{il(t)}catch(l){Ac(t,a,l)}break;case 5:var o=t.return;try{il(t)}catch(l){Ac(t,o,l)}}}catch(l){Ac(t,t.return,l)}if(t===e){Zs=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Zs=s;break}Zs=t.return}}var _l,Al=Math.ceil,Tl=w.ReactCurrentDispatcher,Sl=w.ReactCurrentOwner,kl=w.ReactCurrentBatchConfig,Cl=0,Il=null,Rl=null,Dl=0,Ll=0,Pl=Ai(0),Ml=0,Nl=null,Ol=0,jl=0,Fl=0,Ul=null,Bl=null,$l=0,Vl=1/0,Wl=null,zl=!1,Hl=null,ql=null,Gl=!1,Kl=null,Yl=0,Ql=0,Xl=null,Zl=-1,Jl=0;function ec(){return 0!==(6&Cl)?Xe():-1!==Zl?Zl:Zl=Xe()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Cl)&&0!==Dl?Dl&-Dl:null!==ma.transition?(0===Jl&&(Jl=mt()),Jl):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Qt(e.type)}function nc(e,t,n,r){if(50<Ql)throw Ql=0,Xl=null,Error(a(185));vt(e,n,r),0!==(2&Cl)&&e===Il||(e===Il&&(0===(2&Cl)&&(jl|=n),4===Ml&&sc(e,Dl)),rc(e,r),1===n&&0===Cl&&0===(1&t.mode)&&(Vl=Xe()+500,Ui&&Vi()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),s=1<<o,l=i[o];-1===l?0!==(s&n)&&0===(s&r)||(i[o]=pt(s,t)):l<=t&&(e.expiredLanes|=s),a&=~s}}(e,t);var r=ht(e,e===Il?Dl:0);if(0===r)null!==n&&Ke(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ke(n),1===t)0===e.tag?function(e){Ui=!0,$i(e)}(lc.bind(null,e)):$i(lc.bind(null,e)),oi((function(){0===(6&Cl)&&Vi()})),n=null;else{switch(wt(r)){case 1:n=Je;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ic(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Zl=-1,Jl=0,0!==(6&Cl))throw Error(a(327));var n=e.callbackNode;if(xc()&&e.callbackNode!==n)return null;var r=ht(e,e===Il?Dl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gc(e,r);else{t=r;var i=Cl;Cl|=2;var o=fc();for(Il===e&&Dl===t||(Wl=null,Vl=Xe()+500,hc(e,t));;)try{yc();break}catch(l){pc(e,l)}Sa(),Tl.current=o,Cl=i,null!==Rl?t=0:(Il=null,Dl=0,t=Ml)}if(0!==t){if(2===t&&(0!==(i=ft(e))&&(r=i,t=ac(e,i))),1===t)throw n=Nl,hc(e,0),sc(e,r),rc(e,Xe()),n;if(6===t)sc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!sr(a(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=gc(e,r))&&(0!==(o=ft(e))&&(r=o,t=ac(e,o))),1===t))throw n=Nl,hc(e,0),sc(e,r),rc(e,Xe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:Ec(e,Bl,Wl);break;case 3:if(sc(e,r),(130023424&r)===r&&10<(t=$l+500-Xe())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(Ec.bind(null,e,Bl,Wl),t);break}Ec(e,Bl,Wl);break;case 4:if(sc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-ot(r);o=1<<s,(s=t[s])>i&&(i=s),r&=~o}if(r=i,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Al(r/1960))-r)){e.timeoutHandle=ri(Ec.bind(null,e,Bl,Wl),r);break}Ec(e,Bl,Wl);break;default:throw Error(a(329))}}}return rc(e,Xe()),e.callbackNode===n?ic.bind(null,e):null}function ac(e,t){var n=Ul;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Bl,Bl=n,null!==t&&oc(t)),e}function oc(e){null===Bl?Bl=e:Bl.push.apply(Bl,e)}function sc(e,t){for(t&=~Fl,t&=~jl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(0!==(6&Cl))throw Error(a(327));xc();var t=ht(e,0);if(0===(1&t))return rc(e,Xe()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var r=ft(e);0!==r&&(t=r,n=ac(e,r))}if(1===n)throw n=Nl,hc(e,0),sc(e,t),rc(e,Xe()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ec(e,Bl,Wl),rc(e,Xe()),null}function cc(e,t){var n=Cl;Cl|=1;try{return e(t)}finally{0===(Cl=n)&&(Vl=Xe()+500,Ui&&Vi())}}function uc(e){null!==Kl&&0===Kl.tag&&0===(6&Cl)&&xc();var t=Cl;Cl|=1;var n=kl.transition,r=bt;try{if(kl.transition=null,bt=1,e)return e()}finally{bt=r,kl.transition=n,0===(6&(Cl=t))&&Vi()}}function dc(){Ll=Pl.current,Ti(Pl)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Rl)for(n=Rl.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Pi();break;case 3:Qa(),Ti(Ii),Ti(Ci),no();break;case 5:Za(r);break;case 4:Qa();break;case 13:case 19:Ti(Ja);break;case 10:ka(r.type._context);break;case 22:case 23:dc()}n=n.return}if(Il=e,Rl=e=Pc(e.current,null),Dl=Ll=t,Ml=0,Nl=null,Fl=jl=Ol=0,Bl=Ul=null,null!==Da){for(t=0;t<Da.length;t++)if(null!==(r=(n=Da[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Da=null}return e}function pc(e,t){for(;;){var n=Rl;try{if(Sa(),ro.current=Zo,co){for(var r=oo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}co=!1}if(ao=0,lo=so=oo=null,uo=!1,ho=0,Sl.current=null,null===n||null===n.return){Ml=1,Nl=t,Rl=null;break}e:{var o=e,s=n.return,l=n,c=t;if(t=Dl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var f=gs(s);if(null!==f){f.flags&=-257,vs(f,s,l,0,t),1&f.mode&&ms(o,u,t),c=u;var m=(t=f).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){ms(o,u,t),mc();break e}c=Error(a(426))}else if(ia&&1&l.mode){var v=gs(s);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),vs(v,s,l,0,t),fa(cs(c,l));break e}}o=c=cs(c,l),4!==Ml&&(Ml=2),null===Ul?Ul=[o]:Ul.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,$a(o,ps(0,c,t));break e;case 1:l=c;var y=o.type,b=o.stateNode;if(0===(128&o.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===ql||!ql.has(b)))){o.flags|=65536,t&=-t,o.lanes|=t,$a(o,fs(o,l,t));break e}}o=o.return}while(null!==o)}wc(n)}catch(w){t=w,Rl===n&&null!==n&&(Rl=n=n.return);continue}break}}function fc(){var e=Tl.current;return Tl.current=Zo,null===e?Zo:e}function mc(){0!==Ml&&3!==Ml&&2!==Ml||(Ml=4),null===Il||0===(268435455&Ol)&&0===(268435455&jl)||sc(Il,Dl)}function gc(e,t){var n=Cl;Cl|=2;var r=fc();for(Il===e&&Dl===t||(Wl=null,hc(e,t));;)try{vc();break}catch(i){pc(e,i)}if(Sa(),Cl=n,Tl.current=r,null!==Rl)throw Error(a(261));return Il=null,Dl=0,Ml}function vc(){for(;null!==Rl;)bc(Rl)}function yc(){for(;null!==Rl&&!Ye();)bc(Rl)}function bc(e){var t=_l(e.alternate,e,Ll);e.memoizedProps=e.pendingProps,null===t?wc(e):Rl=t,Sl.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Gs(n,t,Ll)))return void(Rl=n)}else{if(null!==(n=Ks(n,t)))return n.flags&=32767,void(Rl=n);if(null===e)return Ml=6,void(Rl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Rl=t);Rl=t=e}while(null!==t);0===Ml&&(Ml=5)}function Ec(e,t,n){var r=bt,i=kl.transition;try{kl.transition=null,bt=1,function(e,t,n,r){do{xc()}while(null!==Kl);if(0!==(6&Cl))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Il&&(Rl=Il=null,Dl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Gl||(Gl=!0,Ic(tt,(function(){return xc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=kl.transition,kl.transition=null;var s=bt;bt=1;var l=Cl;Cl|=4,Sl.current=null,function(e,t){if(ei=zt,pr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(E){n=null;break e}var s=0,l=-1,c=-1,u=0,d=0,h=e,p=null;t:for(;;){for(var f;h!==n||0!==i&&3!==h.nodeType||(l=s+i),h!==o||0!==r&&3!==h.nodeType||(c=s+r),3===h.nodeType&&(s+=h.nodeValue.length),null!==(f=h.firstChild);)p=h,h=f;for(;;){if(h===e)break t;if(p===n&&++u===i&&(l=s),p===o&&++d===r&&(c=s),null!==(f=h.nextSibling))break;p=(h=p).parentNode}h=f}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},zt=!1,Zs=t;null!==Zs;)if(e=(t=Zs).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zs=e;else for(;null!==Zs;){t=Zs;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:ns(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(a(163))}}catch(E){Ac(t,t.return,E)}if(null!==(e=t.sibling)){e.return=t.return,Zs=e;break}Zs=t.return}m=tl,tl=!1}(e,n),gl(n,e),fr(ti),zt=!!ei,ti=ei=null,e.current=n,yl(n,e,i),Qe(),Cl=l,bt=s,kl.transition=o}else e.current=n;if(Gl&&(Gl=!1,Kl=e,Yl=i),o=e.pendingLanes,0===o&&(ql=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(zl)throw zl=!1,e=Hl,Hl=null,e;0!==(1&Yl)&&0!==e.tag&&xc(),o=e.pendingLanes,0!==(1&o)?e===Xl?Ql++:(Ql=0,Xl=e):Ql=0,Vi()}(e,t,n,r)}finally{kl.transition=i,bt=r}return null}function xc(){if(null!==Kl){var e=wt(Yl),t=kl.transition,n=bt;try{if(kl.transition=null,bt=16>e?16:e,null===Kl)var r=!1;else{if(e=Kl,Kl=null,Yl=0,0!==(6&Cl))throw Error(a(331));var i=Cl;for(Cl|=4,Zs=e.current;null!==Zs;){var o=Zs,s=o.child;if(0!==(16&Zs.flags)){var l=o.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Zs=u;null!==Zs;){var d=Zs;switch(d.tag){case 0:case 11:case 15:nl(8,d,o)}var h=d.child;if(null!==h)h.return=d,Zs=h;else for(;null!==Zs;){var p=(d=Zs).sibling,f=d.return;if(al(d),d===u){Zs=null;break}if(null!==p){p.return=f,Zs=p;break}Zs=f}}}var m=o.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Zs=o}}if(0!==(2064&o.subtreeFlags)&&null!==s)s.return=o,Zs=s;else e:for(;null!==Zs;){if(0!==(2048&(o=Zs).flags))switch(o.tag){case 0:case 11:case 15:nl(9,o,o.return)}var y=o.sibling;if(null!==y){y.return=o.return,Zs=y;break e}Zs=o.return}}var b=e.current;for(Zs=b;null!==Zs;){var w=(s=Zs).child;if(0!==(2064&s.subtreeFlags)&&null!==w)w.return=s,Zs=w;else e:for(s=b;null!==Zs;){if(0!==(2048&(l=Zs).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(x){Ac(l,l.return,x)}if(l===s){Zs=null;break e}var E=l.sibling;if(null!==E){E.return=l.return,Zs=E;break e}Zs=l.return}}if(Cl=i,Vi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(x){}r=!0}return r}finally{bt=n,kl.transition=t}}return!1}function _c(e,t,n){e=Ua(e,t=ps(0,t=cs(n,t),1),1),t=ec(),null!==e&&(vt(e,1,t),rc(e,t))}function Ac(e,t,n){if(3===e.tag)_c(e,e,n);else for(;null!==t;){if(3===t.tag){_c(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===ql||!ql.has(r))){t=Ua(t,e=fs(t,e=cs(n,e),1),1),e=ec(),null!==t&&(vt(t,1,e),rc(t,e));break}}t=t.return}}function Tc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Il===e&&(Dl&n)===n&&(4===Ml||3===Ml&&(130023424&Dl)===Dl&&500>Xe()-$l?hc(e,0):Fl|=n),rc(e,t)}function Sc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=ec();null!==(e=Ma(e,t))&&(vt(e,t,n),rc(e,n))}function kc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Sc(e,n)}function Cc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Sc(e,n)}function Ic(e,t){return Ge(e,t)}function Rc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dc(e,t,n,r){return new Rc(e,t,n,r)}function Lc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Pc(e,t){var n=e.alternate;return null===n?((n=Dc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Mc(e,t,n,r,i,o){var s=2;if(r=e,"function"===typeof e)Lc(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case _:return Nc(n.children,i,o,t);case A:s=8,i|=8;break;case T:return(e=Dc(12,n,t,2|i)).elementType=T,e.lanes=o,e;case I:return(e=Dc(13,n,t,i)).elementType=I,e.lanes=o,e;case R:return(e=Dc(19,n,t,i)).elementType=R,e.lanes=o,e;case P:return Oc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:s=10;break e;case k:s=9;break e;case C:s=11;break e;case D:s=14;break e;case L:s=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Dc(s,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Nc(e,t,n,r){return(e=Dc(7,e,r,t)).lanes=n,e}function Oc(e,t,n,r){return(e=Dc(22,e,r,t)).elementType=P,e.lanes=n,e.stateNode={isHidden:!1},e}function jc(e,t,n){return(e=Dc(6,e,null,t)).lanes=n,e}function Fc(e,t,n){return(t=Dc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Uc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Bc(e,t,n,r,i,a,o,s,l){return e=new Uc(e,t,n,s,l),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Dc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Oa(a),e}function $c(e){if(!e)return ki;e:{if(Ve(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Li(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Li(n))return Ni(e,n,t)}return t}function Vc(e,t,n,r,i,a,o,s,l){return(e=Bc(n,r,!0,e,0,a,0,s,l)).context=$c(null),n=e.current,(a=Fa(r=ec(),i=tc(n))).callback=void 0!==t&&null!==t?t:null,Ua(n,a,i),e.current.lanes=i,vt(e,i,r),rc(e,r),e}function Wc(e,t,n,r){var i=t.current,a=ec(),o=tc(i);return n=$c(n),null===t.context?t.context=n:t.pendingContext=n,(t=Fa(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Ua(i,t,o))&&(nc(e,i,o,a),Ba(e,i,o)),o}function zc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function qc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}_l=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ii.current)bs=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bs=!1,function(e,t,n){switch(t.tag){case 3:Is(t),pa();break;case 5:Xa(t);break;case 1:Li(t.type)&&Oi(t);break;case 4:Ya(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Si(xa,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Si(Ja,1&Ja.current),t.flags|=128,null):0!==(n&t.child.childLanes)?js(e,t,n):(Si(Ja,1&Ja.current),null!==(e=zs(e,t,n))?e.sibling:null);Si(Ja,1&Ja.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Vs(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Si(Ja,Ja.current),r)break;return null;case 22:case 23:return t.lanes=0,As(e,t,n)}return zs(e,t,n)}(e,t,n);bs=0!==(131072&e.flags)}else bs=!1,ia&&0!==(1048576&t.flags)&&Ji(t,qi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ws(e,t),e=t.pendingProps;var i=Di(t,Ci.current);Ia(t,n),i=go(null,t,r,e,i,n);var o=vo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Li(r)?(o=!0,Oi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Oa(t),i.updater=is,t.stateNode=i,i._reactInternals=t,ls(t,r,e,n),t=Cs(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),ws(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ws(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Lc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===D)return 14}return 2}(r),e=ns(r,e),i){case 0:t=Ss(null,t,r,e,n);break e;case 1:t=ks(null,t,r,e,n);break e;case 11:t=Es(null,t,r,e,n);break e;case 14:t=xs(null,t,r,ns(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ss(e,t,r,i=t.elementType===r?i:ns(r,i),n);case 1:return r=t.type,i=t.pendingProps,ks(e,t,r,i=t.elementType===r?i:ns(r,i),n);case 3:e:{if(Is(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,ja(e,t),Va(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Rs(e,t,r,n,i=cs(Error(a(423)),t));break e}if(r!==i){t=Rs(e,t,r,n,i=cs(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Ea(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(pa(),r===i){t=zs(e,t,n);break e}ws(e,t,r,n)}t=t.child}return t;case 5:return Xa(t),null===e&&ca(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,ni(r,i)?s=null:null!==o&&ni(r,o)&&(t.flags|=32),Ts(e,t),ws(e,t,s,n),t.child;case 6:return null===e&&ca(t),null;case 13:return js(e,t,n);case 4:return Ya(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=wa(t,null,r,n):ws(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Es(e,t,r,i=t.elementType===r?i:ns(r,i),n);case 7:return ws(e,t,t.pendingProps,n),t.child;case 8:case 12:return ws(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value,Si(xa,r._currentValue),r._currentValue=s,null!==o)if(sr(o.value,s)){if(o.children===i.children&&!Ii.current){t=zs(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){s=o.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Fa(-1,n&-n)).tag=2;var u=o.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),Ca(o.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(a(341));s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),Ca(s,n,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}ws(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ia(t,n),r=r(i=Ra(i)),t.flags|=1,ws(e,t,r,n),t.child;case 14:return i=ns(r=t.type,t.pendingProps),xs(e,t,r,i=ns(r.type,i),n);case 15:return _s(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ns(r,i),Ws(e,t),t.tag=1,Li(r)?(e=!0,Oi(t)):e=!1,Ia(t,n),os(t,r,i),ls(t,r,i,n),Cs(null,t,r,!0,e,n);case 19:return Vs(e,t,n);case 22:return As(e,t,n)}throw Error(a(156,t.tag))};var Gc="function"===typeof reportError?reportError:function(e){console.error(e)};function Kc(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function Qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function Jc(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var s=i;i=function(){var e=zc(o);s.call(e)}}Wc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=zc(o);a.call(e)}}var o=Vc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[fi]=o.current,Vr(8===e.nodeType?e.parentNode:e),uc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var s=r;r=function(){var e=zc(l);s.call(e)}}var l=Bc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=l,e[fi]=l.current,Vr(8===e.nodeType?e.parentNode:e),uc((function(){Wc(t,l,n,r)})),l}(n,t,e,i,r);return zc(o)}Yc.prototype.render=Kc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Wc(e,t,null,null)},Yc.prototype.unmount=Kc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc((function(){Wc(null,e,null,null)})),t[fi]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=At();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pt.length&&0!==t&&t<Pt[n].priority;n++);Pt.splice(n,0,e),0===n&&jt(e)}},Et=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(yt(t,1|n),rc(t,Xe()),0===(6&Cl)&&(Vl=Xe()+500,Vi()))}break;case 13:uc((function(){var t=Ma(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),qc(e,1)}},xt=function(e){if(13===e.tag){var t=Ma(e,134217728);if(null!==t)nc(t,e,134217728,ec());qc(e,134217728)}},_t=function(e){if(13===e.tag){var t=tc(e),n=Ma(e,t);if(null!==n)nc(n,e,t,ec());qc(e,t)}},At=function(){return bt},Tt=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},xe=function(e,t,n){switch(t){case"input":if(Z(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Ei(r);if(!i)throw Error(a(90));G(r),Z(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=cc,Ie=uc;var eu={usingClientEntryPoint:!1,Events:[bi,wi,Ei,Se,ke,cc]},tu={findFiberByHostInstance:yi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{it=ru.inject(nu),at=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Qc(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Qc(e))throw Error(a(299));var n=!1,r="",i=Gc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Bc(e,1,!1,null,0,n,0,r,i),e[fi]=t.current,Vr(8===e.nodeType?e.parentNode:e),new Kc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!Xc(t))throw Error(a(200));return Jc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Qc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",s=Gc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Vc(t,null,e,1,null!=n?n:null,i,0,o,s),e[fi]=t.current,Vr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yc(t)},t.render=function(e,t,n){if(!Xc(t))throw Error(a(200));return Jc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xc(e))throw Error(a(40));return!!e._reactRootContainer&&(uc((function(){Jc(null,null,e,!1,(function(){e._reactRootContainer=null,e[fi]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return Jc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},8399:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>l,getFunctionName:()=>a});var r=n(6879);const i=/^\s*function(?:\s|\s*\/\*.*\*\/\s*)+([^(\s/]*)\s*/;function a(e){const t=`${e}`.match(i);return t&&t[1]||""}function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e.displayName||e.name||a(e)||t}function s(e,t,n){const r=o(t);return e.displayName||(""!==r?`${n}(${r})`:n)}function l(e){if(null!=e){if("string"===typeof e)return e;if("function"===typeof e)return o(e,"Component");if("object"===typeof e)switch(e.$$typeof){case r.vM:return s(e,e.render,"ForwardRef");case r.lD:return s(e,e.type,"memo");default:return}}}},8463:(e,t,n)=>{"use strict";n.d(t,{b:()=>i});n(9950);var r=n(6171);n(4414);function i(e){return(0,r.b)(e)}},8465:(e,t,n)=>{"use strict";function r(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;const r={};return Object.keys(e).forEach((i=>{r[i]=e[i].reduce(((e,r)=>{if(r){const i=t(r);""!==i&&e.push(i),n&&n[r]&&e.push(n[r])}return e}),[]).join(" ")})),r}n.d(t,{A:()=>r})},8587:(e,t,n)=>{"use strict";function r(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}n.d(t,{A:()=>r})},8603:(e,t,n)=>{"use strict";n.d(t,{A:()=>ie});var r=function(){function e(e){var t=this;this._insertTag=function(e){var n;n=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,n),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{n.insertRule(e,n.cssRules.length)}catch(r){}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){var t;return null==(t=e.parentNode)?void 0:t.removeChild(e)})),this.tags=[],this.ctr=0},e}(),i=Math.abs,a=String.fromCharCode,o=Object.assign;function s(e){return e.trim()}function l(e,t,n){return e.replace(t,n)}function c(e,t){return e.indexOf(t)}function u(e,t){return 0|e.charCodeAt(t)}function d(e,t,n){return e.slice(t,n)}function h(e){return e.length}function p(e){return e.length}function f(e,t){return t.push(e),e}var m=1,g=1,v=0,y=0,b=0,w="";function E(e,t,n,r,i,a,o){return{value:e,root:t,parent:n,type:r,props:i,children:a,line:m,column:g,length:o,return:""}}function x(e,t){return o(E("",null,null,"",null,null,0),e,{length:-e.length},t)}function _(){return b=y>0?u(w,--y):0,g--,10===b&&(g=1,m--),b}function A(){return b=y<v?u(w,y++):0,g++,10===b&&(g=1,m++),b}function T(){return u(w,y)}function S(){return y}function k(e,t){return d(w,e,t)}function C(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function I(e){return m=g=1,v=h(w=e),y=0,[]}function R(e){return w="",e}function D(e){return s(k(y-1,M(91===e?e+2:40===e?e+1:e)))}function L(e){for(;(b=T())&&b<33;)A();return C(e)>2||C(b)>3?"":" "}function P(e,t){for(;--t&&A()&&!(b<48||b>102||b>57&&b<65||b>70&&b<97););return k(e,S()+(t<6&&32==T()&&32==A()))}function M(e){for(;A();)switch(b){case e:return y;case 34:case 39:34!==e&&39!==e&&M(b);break;case 40:41===e&&M(e);break;case 92:A()}return y}function N(e,t){for(;A()&&e+b!==57&&(e+b!==84||47!==T()););return"/*"+k(t,y-1)+"*"+a(47===e?e:A())}function O(e){for(;!C(T());)A();return k(e,y)}var j="-ms-",F="-moz-",U="-webkit-",B="comm",$="rule",V="decl",W="@keyframes";function z(e,t){for(var n="",r=p(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||"";return n}function H(e,t,n,r){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case V:return e.return=e.return||e.value;case B:return"";case W:return e.return=e.value+"{"+z(e.children,r)+"}";case $:e.value=e.props.join(",")}return h(n=z(e.children,r))?e.return=e.value+"{"+n+"}":""}function q(e){return R(G("",null,null,null,[""],e=I(e),0,[0],e))}function G(e,t,n,r,i,o,s,d,p){for(var m=0,g=0,v=s,y=0,b=0,w=0,E=1,x=1,k=1,C=0,I="",R=i,M=o,j=r,F=I;x;)switch(w=C,C=A()){case 40:if(108!=w&&58==u(F,v-1)){-1!=c(F+=l(D(C),"&","&\f"),"&\f")&&(k=-1);break}case 34:case 39:case 91:F+=D(C);break;case 9:case 10:case 13:case 32:F+=L(w);break;case 92:F+=P(S()-1,7);continue;case 47:switch(T()){case 42:case 47:f(Y(N(A(),S()),t,n),p);break;default:F+="/"}break;case 123*E:d[m++]=h(F)*k;case 125*E:case 59:case 0:switch(C){case 0:case 125:x=0;case 59+g:-1==k&&(F=l(F,/\f/g,"")),b>0&&h(F)-v&&f(b>32?Q(F+";",r,n,v-1):Q(l(F," ","")+";",r,n,v-2),p);break;case 59:F+=";";default:if(f(j=K(F,t,n,m,g,i,d,I,R=[],M=[],v),o),123===C)if(0===g)G(F,t,j,j,R,o,v,d,M);else switch(99===y&&110===u(F,3)?100:y){case 100:case 108:case 109:case 115:G(e,j,j,r&&f(K(e,j,j,0,0,i,d,I,i,R=[],v),M),i,M,v,d,r?R:M);break;default:G(F,j,j,j,[""],M,0,d,M)}}m=g=b=0,E=k=1,I=F="",v=s;break;case 58:v=1+h(F),b=w;default:if(E<1)if(123==C)--E;else if(125==C&&0==E++&&125==_())continue;switch(F+=a(C),C*E){case 38:k=g>0?1:(F+="\f",-1);break;case 44:d[m++]=(h(F)-1)*k,k=1;break;case 64:45===T()&&(F+=D(A())),y=T(),g=v=h(I=F+=O(S())),C++;break;case 45:45===w&&2==h(F)&&(E=0)}}return o}function K(e,t,n,r,a,o,c,u,h,f,m){for(var g=a-1,v=0===a?o:[""],y=p(v),b=0,w=0,x=0;b<r;++b)for(var _=0,A=d(e,g+1,g=i(w=c[b])),T=e;_<y;++_)(T=s(w>0?v[_]+" "+A:l(A,/&\f/g,v[_])))&&(h[x++]=T);return E(e,t,n,0===a?$:u,h,f,m)}function Y(e,t,n){return E(e,t,n,B,a(b),d(e,2,-2),0)}function Q(e,t,n,r){return E(e,t,n,V,d(e,0,r),d(e,r+1,-1),r)}var X=function(e,t,n){for(var r=0,i=0;r=i,i=T(),38===r&&12===i&&(t[n]=1),!C(i);)A();return k(e,y)},Z=function(e,t){return R(function(e,t){var n=-1,r=44;do{switch(C(r)){case 0:38===r&&12===T()&&(t[n]=1),e[n]+=X(y-1,t,n);break;case 2:e[n]+=D(r);break;case 4:if(44===r){e[++n]=58===T()?"&\f":"",t[n]=e[n].length;break}default:e[n]+=a(r)}}while(r=A());return e}(I(e),t))},J=new WeakMap,ee=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,n=e.parent,r=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||J.get(n))&&!r){J.set(e,!0);for(var i=[],a=Z(t,i),o=n.props,s=0,l=0;s<a.length;s++)for(var c=0;c<o.length;c++,l++)e.props[l]=i[s]?a[s].replace(/&\f/g,o[c]):o[c]+" "+a[s]}}},te=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}};function ne(e,t){switch(function(e,t){return 45^u(e,0)?(((t<<2^u(e,0))<<2^u(e,1))<<2^u(e,2))<<2^u(e,3):0}(e,t)){case 5103:return U+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return U+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return U+e+F+e+j+e+e;case 6828:case 4268:return U+e+j+e+e;case 6165:return U+e+j+"flex-"+e+e;case 5187:return U+e+l(e,/(\w+).+(:[^]+)/,U+"box-$1$2"+j+"flex-$1$2")+e;case 5443:return U+e+j+"flex-item-"+l(e,/flex-|-self/,"")+e;case 4675:return U+e+j+"flex-line-pack"+l(e,/align-content|flex-|-self/,"")+e;case 5548:return U+e+j+l(e,"shrink","negative")+e;case 5292:return U+e+j+l(e,"basis","preferred-size")+e;case 6060:return U+"box-"+l(e,"-grow","")+U+e+j+l(e,"grow","positive")+e;case 4554:return U+l(e,/([^-])(transform)/g,"$1"+U+"$2")+e;case 6187:return l(l(l(e,/(zoom-|grab)/,U+"$1"),/(image-set)/,U+"$1"),e,"")+e;case 5495:case 3959:return l(e,/(image-set\([^]*)/,U+"$1$`$1");case 4968:return l(l(e,/(.+:)(flex-)?(.*)/,U+"box-pack:$3"+j+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+U+e+e;case 4095:case 3583:case 4068:case 2532:return l(e,/(.+)-inline(.+)/,U+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(h(e)-1-t>6)switch(u(e,t+1)){case 109:if(45!==u(e,t+4))break;case 102:return l(e,/(.+:)(.+)-([^]+)/,"$1"+U+"$2-$3$1"+F+(108==u(e,t+3)?"$3":"$2-$3"))+e;case 115:return~c(e,"stretch")?ne(l(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==u(e,t+1))break;case 6444:switch(u(e,h(e)-3-(~c(e,"!important")&&10))){case 107:return l(e,":",":"+U)+e;case 101:return l(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+U+(45===u(e,14)?"inline-":"")+"box$3$1"+U+"$2$3$1"+j+"$2box$3")+e}break;case 5936:switch(u(e,t+11)){case 114:return U+e+j+l(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return U+e+j+l(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return U+e+j+l(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return U+e+j+e+e}return e}var re=[function(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case V:e.return=ne(e.value,e.length);break;case W:return z([x(e,{value:l(e.value,"@","@"+U)})],r);case $:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return z([x(e,{props:[l(t,/:(read-\w+)/,":-moz-$1")]})],r);case"::placeholder":return z([x(e,{props:[l(t,/:(plac\w+)/,":"+U+"input-$1")]}),x(e,{props:[l(t,/:(plac\w+)/,":-moz-$1")]}),x(e,{props:[l(t,/:(plac\w+)/,j+"input-$1")]})],r)}return""}))}}],ie=function(e){var t=e.key;if("css"===t){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var i,a,o=e.stylisPlugins||re,s={},l=[];i=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),n=1;n<t.length;n++)s[t[n]]=!0;l.push(e)}));var c,u,d=[H,(u=function(e){c.insert(e)},function(e){e.root||(e=e.return)&&u(e)})],h=function(e){var t=p(e);return function(n,r,i,a){for(var o="",s=0;s<t;s++)o+=e[s](n,r,i,a)||"";return o}}([ee,te].concat(o,d));a=function(e,t,n,r){c=n,z(q(e?e+"{"+t.styles+"}":t.styles),h),r&&(f.inserted[t.name]=!0)};var f={key:t,sheet:new r({key:t,container:i,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:a};return f.sheet.hydrate(l),f}},8635:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(6907);function i(e){return(0,r.A)(e).defaultView||window}},8733:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=n(3931).A},8807:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r.A,extendSxProp:()=>i.A,unstable_createStyleFunctionSx:()=>r.k,unstable_defaultSxConfig:()=>a.A});var r=n(505),i=n(237),a=n(8076)},9015:(e,t,n)=>{"use strict";n.d(t,{J:()=>g});var r={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},i=n(7923),a=!1,o=/[A-Z]|^ms/g,s=/_EMO_([^_]+?)_([^]*?)_EMO_/g,l=function(e){return 45===e.charCodeAt(1)},c=function(e){return null!=e&&"boolean"!==typeof e},u=(0,i.A)((function(e){return l(e)?e:e.replace(o,"-$&").toLowerCase()})),d=function(e,t){switch(e){case"animation":case"animationName":if("string"===typeof t)return t.replace(s,(function(e,t,n){return f={name:t,styles:n,next:f},t}))}return 1===r[e]||l(e)||"number"!==typeof t||0===t?t:t+"px"},h="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function p(e,t,n){if(null==n)return"";var r=n;if(void 0!==r.__emotion_styles)return r;switch(typeof n){case"boolean":return"";case"object":var i=n;if(1===i.anim)return f={name:i.name,styles:i.styles,next:f},i.name;var o=n;if(void 0!==o.styles){var s=o.next;if(void 0!==s)for(;void 0!==s;)f={name:s.name,styles:s.styles,next:f},s=s.next;return o.styles+";"}return function(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=p(e,t,n[i])+";";else for(var o in n){var s=n[o];if("object"!==typeof s){var l=s;null!=t&&void 0!==t[l]?r+=o+"{"+t[l]+"}":c(l)&&(r+=u(o)+":"+d(o,l)+";")}else{if("NO_COMPONENT_SELECTOR"===o&&a)throw new Error(h);if(!Array.isArray(s)||"string"!==typeof s[0]||null!=t&&void 0!==t[s[0]]){var f=p(e,t,s);switch(o){case"animation":case"animationName":r+=u(o)+":"+f+";";break;default:r+=o+"{"+f+"}"}}else for(var m=0;m<s.length;m++)c(s[m])&&(r+=u(o)+":"+d(o,s[m])+";")}}return r}(e,t,n);case"function":if(void 0!==e){var l=f,m=n(e);return f=l,p(e,t,m)}}var g=n;if(null==t)return g;var v=t[g];return void 0!==v?v:g}var f,m=/label:\s*([^\s;{]+)\s*(;|$)/g;function g(e,t,n){if(1===e.length&&"object"===typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var r=!0,i="";f=void 0;var a=e[0];null==a||void 0===a.raw?(r=!1,i+=p(n,t,a)):i+=a[0];for(var o=1;o<e.length;o++){if(i+=p(n,t,e[o]),r)i+=a[o]}m.lastIndex=0;for(var s,l="";null!==(s=m.exec(i));)l+="-"+s[1];var c=function(e){for(var t,n=0,r=0,i=e.length;i>=4;++r,i-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(i){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)}(i)+l;return{name:c,styles:i,next:f}}},9044:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=n(1399).A},9234:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r.A});var r=n(8099)},9254:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>s});var r=n(7295),i=n(195),a=n(7550),o=n(9608);const s=(0,r.Ay)({themeId:a.A,defaultTheme:i.A,rootShouldForwardProp:o.A})},9269:(e,t,n)=>{"use strict";var r=n(4994);t.X4=p,t.e$=f,t.tL=g,t.eM=function(e,t){const n=h(e),r=h(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)},t.a=m;var i=r(n(9234)),a=r(n(9344));function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return(0,a.default)(e,t,n)}function s(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let n=e.match(t);return n&&1===n[0].length&&(n=n.map((e=>e+e))),n?`rgb${4===n.length?"a":""}(${n.map(((e,t)=>t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3)).join(", ")})`:""}function l(e){if(e.type)return e;if("#"===e.charAt(0))return l(s(e));const t=e.indexOf("("),n=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla","color"].indexOf(n))throw new Error((0,i.default)(9,e));let r,a=e.substring(t+1,e.length-1);if("color"===n){if(a=a.split(" "),r=a.shift(),4===a.length&&"/"===a[3].charAt(0)&&(a[3]=a[3].slice(1)),-1===["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(r))throw new Error((0,i.default)(10,r))}else a=a.split(",");return a=a.map((e=>parseFloat(e))),{type:n,values:a,colorSpace:r}}const c=e=>{const t=l(e);return t.values.slice(0,3).map(((e,n)=>-1!==t.type.indexOf("hsl")&&0!==n?`${e}%`:e)).join(" ")};function u(e){const{type:t,colorSpace:n}=e;let{values:r}=e;return-1!==t.indexOf("rgb")?r=r.map(((e,t)=>t<3?parseInt(e,10):e)):-1!==t.indexOf("hsl")&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),r=-1!==t.indexOf("color")?`${n} ${r.join(" ")}`:`${r.join(", ")}`,`${t}(${r})`}function d(e){e=l(e);const{values:t}=e,n=t[0],r=t[1]/100,i=t[2]/100,a=r*Math.min(i,1-i),o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+n/30)%12;return i-a*Math.max(Math.min(t-3,9-t,1),-1)};let s="rgb";const c=[Math.round(255*o(0)),Math.round(255*o(8)),Math.round(255*o(4))];return"hsla"===e.type&&(s+="a",c.push(t[3])),u({type:s,values:c})}function h(e){let t="hsl"===(e=l(e)).type||"hsla"===e.type?l(d(e)).values:e.values;return t=t.map((t=>("color"!==e.type&&(t/=255),t<=.03928?t/12.92:((t+.055)/1.055)**2.4))),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function p(e,t){return e=l(e),t=o(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),"color"===e.type?e.values[3]=`/${t}`:e.values[3]=t,u(e)}function f(e,t){if(e=l(e),t=o(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb")||-1!==e.type.indexOf("color"))for(let n=0;n<3;n+=1)e.values[n]*=1-t;return u(e)}function m(e,t){if(e=l(e),t=o(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(let n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(-1!==e.type.indexOf("color"))for(let n=0;n<3;n+=1)e.values[n]+=(1-e.values[n])*t;return u(e)}function g(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.15;return h(e)>.5?f(e,t):m(e,t)}},9344:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r.A});var r=n(6747)},9360:(e,t,n)=>{"use strict";n.d(t,{A:()=>y});var r=n(8168),i=n(8587),a=n(9950),o=n(2004),s=n(8465),l=n(1676),c=n(8463),u=n(9254),d=n(1763),h=n(423);function p(e){return(0,h.Ay)("MuiSvgIcon",e)}(0,d.A)("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);var f=n(4414);const m=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],g=(0,u.Ay)("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"inherit"!==n.color&&t[`color${(0,l.A)(n.color)}`],t[`fontSize${(0,l.A)(n.fontSize)}`]]}})((e=>{let{theme:t,ownerState:n}=e;var r,i,a,o,s,l,c,u,d,h,p,f,m;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:n.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:null==(r=t.transitions)||null==(i=r.create)?void 0:i.call(r,"fill",{duration:null==(a=t.transitions)||null==(a=a.duration)?void 0:a.shorter}),fontSize:{inherit:"inherit",small:(null==(o=t.typography)||null==(s=o.pxToRem)?void 0:s.call(o,20))||"1.25rem",medium:(null==(l=t.typography)||null==(c=l.pxToRem)?void 0:c.call(l,24))||"1.5rem",large:(null==(u=t.typography)||null==(d=u.pxToRem)?void 0:d.call(u,35))||"2.1875rem"}[n.fontSize],color:null!=(h=null==(p=(t.vars||t).palette)||null==(p=p[n.color])?void 0:p.main)?h:{action:null==(f=(t.vars||t).palette)||null==(f=f.action)?void 0:f.active,disabled:null==(m=(t.vars||t).palette)||null==(m=m.action)?void 0:m.disabled,inherit:void 0}[n.color]}})),v=a.forwardRef((function(e,t){const n=(0,c.b)({props:e,name:"MuiSvgIcon"}),{children:u,className:d,color:h="inherit",component:v="svg",fontSize:y="medium",htmlColor:b,inheritViewBox:w=!1,titleAccess:E,viewBox:x="0 0 24 24"}=n,_=(0,i.A)(n,m),A=a.isValidElement(u)&&"svg"===u.type,T=(0,r.A)({},n,{color:h,component:v,fontSize:y,instanceFontSize:e.fontSize,inheritViewBox:w,viewBox:x,hasSvgAsChild:A}),S={};w||(S.viewBox=x);const k=(e=>{const{color:t,fontSize:n,classes:r}=e,i={root:["root","inherit"!==t&&`color${(0,l.A)(t)}`,`fontSize${(0,l.A)(n)}`]};return(0,s.A)(i,p,r)})(T);return(0,f.jsxs)(g,(0,r.A)({as:v,className:(0,o.A)(k.root,d),focusable:"false",color:b,"aria-hidden":!E||void 0,role:E?"img":void 0,ref:t},S,_,A&&u.props,{ownerState:T,children:[A?u.props.children:u,E?(0,f.jsx)("title",{children:E}):null]}))}));v.muiName="SvgIcon";const y=v},9526:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r.createSvgIcon}});var r=n(7034)},9608:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(1960);const i=e=>(0,r.A)(e)&&"classes"!==e},9693:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var i=r(n(9526)),a=n(4414);t.A=(0,i.default)((0,a.jsx)("path",{d:"M2.01 21 23 12 2.01 3 2 10l15 2-15 2z"}),"Send")},9904:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r.A,private_createBreakpoints:()=>i.A,unstable_applyStyles:()=>a.A});var r=n(2860),i=n(3628),a=n(86)},9950:(e,t,n)=>{"use strict";e.exports=n(2049)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var o={};e=e||[null,t({}),t([]),t(t)];for(var s=2&i&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((e=>o[e]=()=>r[e]));return o.default=()=>r,n.d(a,o),a}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{"use strict";var e,t=n(9950),r=n.t(t,2),i=n(1352);function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(e||(e={}));const o="popstate";function s(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function l(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(Q_){}}}function c(e,t){return{usr:e.state,key:e.key,idx:t}}function u(e,t,n,r){return void 0===n&&(n=null),a({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?h(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function d(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function h(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function p(t,n,r,i){void 0===i&&(i={});let{window:l=document.defaultView,v5Compat:h=!1}=i,p=l.history,f=e.Pop,m=null,g=v();function v(){return(p.state||{idx:null}).idx}function y(){f=e.Pop;let t=v(),n=null==t?null:t-g;g=t,m&&m({action:f,location:w.location,delta:n})}function b(e){let t="null"!==l.location.origin?l.location.origin:l.location.href,n="string"===typeof e?e:d(e);return n=n.replace(/ $/,"%20"),s(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,p.replaceState(a({},p.state,{idx:g}),""));let w={get action(){return f},get location(){return t(l,p)},listen(e){if(m)throw new Error("A history only accepts one active listener");return l.addEventListener(o,y),m=e,()=>{l.removeEventListener(o,y),m=null}},createHref:e=>n(l,e),createURL:b,encodeLocation(e){let t=b(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(t,n){f=e.Push;let i=u(w.location,t,n);r&&r(i,t),g=v()+1;let a=c(i,g),o=w.createHref(i);try{p.pushState(a,"",o)}catch(Rb){if(Rb instanceof DOMException&&"DataCloneError"===Rb.name)throw Rb;l.location.assign(o)}h&&m&&m({action:f,location:w.location,delta:1})},replace:function(t,n){f=e.Replace;let i=u(w.location,t,n);r&&r(i,t),g=v();let a=c(i,g),o=w.createHref(i);p.replaceState(a,"",o),h&&m&&m({action:f,location:w.location,delta:0})},go:e=>p.go(e)};return w}var f;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(f||(f={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function m(e,t,n){return void 0===n&&(n="/"),g(e,t,n,!1)}function g(e,t,n,r){let i=R(("string"===typeof t?h(t):t).pathname||"/",n);if(null==i)return null;let a=v(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(a);let o=null;for(let s=0;null==o&&s<a.length;++s){let e=I(i);o=k(a[s],e,r)}return o}function v(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,a)=>{let o={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(s(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));let l=N([r,o.relativePath]),c=n.concat(o);e.children&&e.children.length>0&&(s(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+l+'".'),v(e.children,t,c,l)),(null!=e.path||e.index)&&t.push({path:l,score:S(l,e.index),routesMeta:c})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of y(e.path))i(e,t,r);else i(e,t)})),t}function y(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(0===r.length)return i?[a,""]:[a];let o=y(r.join("/")),s=[];return s.push(...o.map((e=>""===e?a:[a,e].join("/")))),i&&s.push(...o),s.map((t=>e.startsWith("/")&&""===t?"/":t))}const b=/^:[\w-]+$/,w=3,E=2,x=1,_=10,A=-2,T=e=>"*"===e;function S(e,t){let n=e.split("/"),r=n.length;return n.some(T)&&(r+=A),t&&(r+=E),n.filter((e=>!T(e))).reduce(((e,t)=>e+(b.test(t)?w:""===t?x:_)),r)}function k(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,i={},a="/",o=[];for(let s=0;s<r.length;++s){let e=r[s],l=s===r.length-1,c="/"===a?t:t.slice(a.length)||"/",u=C({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=C({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(i,u.params),o.push({params:i,pathname:N([a,u.pathname]),pathnameBase:O(N([a,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(a=N([a,u.pathnameBase]))}return o}function C(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);l("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let a=new RegExp(i,t?void 0:"i");return[a,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),s=i.slice(1);return{params:r.reduce(((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=s[n]||"";o=a.slice(0,a.length-e.length).replace(/(.)\/+$/,"$1")}const l=s[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e}),{}),pathname:a,pathnameBase:o,pattern:e}}function I(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(Rb){return l(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+Rb+")."),e}}function R(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function D(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function L(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function P(e,t){let n=L(e);return t?n.map(((e,t)=>t===n.length-1?e.pathname:e.pathnameBase)):n.map((e=>e.pathnameBase))}function M(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=h(e):(i=a({},e),s(!i.pathname||!i.pathname.includes("?"),D("?","pathname","search",i)),s(!i.pathname||!i.pathname.includes("#"),D("#","pathname","hash",i)),s(!i.search||!i.search.includes("#"),D("#","search","hash",i)));let o,l=""===e||""===i.pathname,c=l?"/":i.pathname;if(null==c)o=n;else{let e=t.length-1;if(!r&&c.startsWith("..")){let t=c.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}o=e>=0?t[e]:"/"}let u=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?h(e):e,a=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:a,search:j(r),hash:F(i)}}(i,o),d=c&&"/"!==c&&c.endsWith("/"),p=(l||"."===c)&&n.endsWith("/");return u.pathname.endsWith("/")||!d&&!p||(u.pathname+="/"),u}const N=e=>e.join("/").replace(/\/\/+/g,"/"),O=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),j=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",F=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function U(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const B=["post","put","patch","delete"],$=(new Set(B),["get",...B]);new Set($),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function V(){return V=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},V.apply(this,arguments)}const W=t.createContext(null);const z=t.createContext(null);const H=t.createContext(null);const q=t.createContext(null);const G=t.createContext({outlet:null,matches:[],isDataRoute:!1});const K=t.createContext(null);function Y(){return null!=t.useContext(q)}function Q(){return Y()||s(!1),t.useContext(q).location}function X(e){t.useContext(H).static||t.useLayoutEffect(e)}function Z(){let{isDataRoute:e}=t.useContext(G);return e?function(){let{router:e}=ce(se.UseNavigateStable),n=de(le.UseNavigateStable),r=t.useRef(!1);return X((()=>{r.current=!0})),t.useCallback((function(t,i){void 0===i&&(i={}),r.current&&("number"===typeof t?e.navigate(t):e.navigate(t,V({fromRouteId:n},i)))}),[e,n])}():function(){Y()||s(!1);let e=t.useContext(W),{basename:n,future:r,navigator:i}=t.useContext(H),{matches:a}=t.useContext(G),{pathname:o}=Q(),l=JSON.stringify(P(a,r.v7_relativeSplatPath)),c=t.useRef(!1);return X((()=>{c.current=!0})),t.useCallback((function(t,r){if(void 0===r&&(r={}),!c.current)return;if("number"===typeof t)return void i.go(t);let a=M(t,JSON.parse(l),o,"path"===r.relative);null==e&&"/"!==n&&(a.pathname="/"===a.pathname?n:N([n,a.pathname])),(r.replace?i.replace:i.push)(a,r.state,r)}),[n,i,l,o,e])}()}function J(){let{matches:e}=t.useContext(G),n=e[e.length-1];return n?n.params:{}}function ee(e,n){let{relative:r}=void 0===n?{}:n,{future:i}=t.useContext(H),{matches:a}=t.useContext(G),{pathname:o}=Q(),s=JSON.stringify(P(a,i.v7_relativeSplatPath));return t.useMemo((()=>M(e,JSON.parse(s),o,"path"===r)),[e,s,o,r])}function te(n,r,i,a){Y()||s(!1);let{navigator:o,static:l}=t.useContext(H),{matches:c}=t.useContext(G),u=c[c.length-1],d=u?u.params:{},p=(u&&u.pathname,u?u.pathnameBase:"/");u&&u.route;let f,g=Q();if(r){var v;let e="string"===typeof r?h(r):r;"/"===p||(null==(v=e.pathname)?void 0:v.startsWith(p))||s(!1),f=e}else f=g;let y=f.pathname||"/",b=y;if("/"!==p){let e=p.replace(/^\//,"").split("/");b="/"+y.replace(/^\//,"").split("/").slice(e.length).join("/")}let w=!l&&i&&i.matches&&i.matches.length>0?i.matches:m(n,{pathname:b});let E=oe(w&&w.map((e=>Object.assign({},e,{params:Object.assign({},d,e.params),pathname:N([p,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?p:N([p,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),c,i,a);return r&&E?t.createElement(q.Provider,{value:{location:V({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:e.Pop}},E):E}function ne(){let e=function(){var e;let n=t.useContext(K),r=ue(le.UseRouteError),i=de(le.UseRouteError);if(void 0!==n)return n;return null==(e=r.errors)?void 0:e[i]}(),n=U(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i};return t.createElement(t.Fragment,null,t.createElement("h2",null,"Unexpected Application Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},n),r?t.createElement("pre",{style:a},r):null,null)}const re=t.createElement(ne,null);class ie extends t.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?t.createElement(G.Provider,{value:this.props.routeContext},t.createElement(K.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ae(e){let{routeContext:n,match:r,children:i}=e,a=t.useContext(W);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),t.createElement(G.Provider,{value:n},i)}function oe(e,n,r,i){var a;if(void 0===n&&(n=[]),void 0===r&&(r=null),void 0===i&&(i=null),null==e){var o;if(!r)return null;if(r.errors)e=r.matches;else{if(!(null!=(o=i)&&o.v7_partialHydration&&0===n.length&&!r.initialized&&r.matches.length>0))return null;e=r.matches}}let l=e,c=null==(a=r)?void 0:a.errors;if(null!=c){let e=l.findIndex((e=>e.route.id&&void 0!==(null==c?void 0:c[e.route.id])));e>=0||s(!1),l=l.slice(0,Math.min(l.length,e+1))}let u=!1,d=-1;if(r&&i&&i.v7_partialHydration)for(let t=0;t<l.length;t++){let e=l[t];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(d=t),e.route.id){let{loaderData:t,errors:n}=r,i=e.route.loader&&void 0===t[e.route.id]&&(!n||void 0===n[e.route.id]);if(e.route.lazy||i){u=!0,l=d>=0?l.slice(0,d+1):[l[0]];break}}}return l.reduceRight(((e,i,a)=>{let o,s=!1,h=null,p=null;var f;r&&(o=c&&i.route.id?c[i.route.id]:void 0,h=i.route.errorElement||re,u&&(d<0&&0===a?(f="route-fallback",!1||he[f]||(he[f]=!0),s=!0,p=null):d===a&&(s=!0,p=i.route.hydrateFallbackElement||null)));let m=n.concat(l.slice(0,a+1)),g=()=>{let n;return n=o?h:s?p:i.route.Component?t.createElement(i.route.Component,null):i.route.element?i.route.element:e,t.createElement(ae,{match:i,routeContext:{outlet:e,matches:m,isDataRoute:null!=r},children:n})};return r&&(i.route.ErrorBoundary||i.route.errorElement||0===a)?t.createElement(ie,{location:r.location,revalidation:r.revalidation,component:h,error:o,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()}),null)}var se=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(se||{}),le=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(le||{});function ce(e){let n=t.useContext(W);return n||s(!1),n}function ue(e){let n=t.useContext(z);return n||s(!1),n}function de(e){let n=function(){let e=t.useContext(G);return e||s(!1),e}(),r=n.matches[n.matches.length-1];return r.route.id||s(!1),r.route.id}const he={};function pe(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}r.startTransition;function fe(e){let{to:n,replace:r,state:i,relative:a}=e;Y()||s(!1);let{future:o,static:l}=t.useContext(H),{matches:c}=t.useContext(G),{pathname:u}=Q(),d=Z(),h=M(n,P(c,o.v7_relativeSplatPath),u,"path"===a),p=JSON.stringify(h);return t.useEffect((()=>d(JSON.parse(p),{replace:r,state:i,relative:a})),[d,p,a,r,i]),null}function me(e){s(!1)}function ge(n){let{basename:r="/",children:i=null,location:a,navigationType:o=e.Pop,navigator:l,static:c=!1,future:u}=n;Y()&&s(!1);let d=r.replace(/^\/*/,"/"),p=t.useMemo((()=>({basename:d,navigator:l,static:c,future:V({v7_relativeSplatPath:!1},u)})),[d,u,l,c]);"string"===typeof a&&(a=h(a));let{pathname:f="/",search:m="",hash:g="",state:v=null,key:y="default"}=a,b=t.useMemo((()=>{let e=R(f,d);return null==e?null:{location:{pathname:e,search:m,hash:g,state:v,key:y},navigationType:o}}),[d,f,m,g,v,y,o]);return null==b?null:t.createElement(H.Provider,{value:p},t.createElement(q.Provider,{children:i,value:b}))}function ve(e){let{children:t,location:n}=e;return te(ye(t),n)}new Promise((()=>{}));t.Component;function ye(e,n){void 0===n&&(n=[]);let r=[];return t.Children.forEach(e,((e,i)=>{if(!t.isValidElement(e))return;let a=[...n,i];if(e.type===t.Fragment)return void r.push.apply(r,ye(e.props.children,a));e.type!==me&&s(!1),e.props.index&&e.props.children&&s(!1);let o={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=ye(e.props.children,a)),r.push(o)})),r}var be=n(7119),we=n.t(be,2);function Ee(){return Ee=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ee.apply(this,arguments)}function xe(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const _e=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(Q_){}new Map;const Ae=r.startTransition;we.flushSync,r.useId;function Te(e){let{basename:n,children:r,future:i,window:a}=e,o=t.useRef();var s;null==o.current&&(o.current=(void 0===(s={window:a,v5Compat:!0})&&(s={}),p((function(e,t){let{pathname:n,search:r,hash:i}=e.location;return u("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:d(t)}),null,s)));let l=o.current,[c,h]=t.useState({action:l.action,location:l.location}),{v7_startTransition:f}=i||{},m=t.useCallback((e=>{f&&Ae?Ae((()=>h(e))):h(e)}),[h,f]);return t.useLayoutEffect((()=>l.listen(m)),[l,m]),t.useEffect((()=>pe(i)),[i]),t.createElement(ge,{basename:n,children:r,location:c.location,navigationType:c.action,navigator:l,future:i})}const Se="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,ke=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ce=t.forwardRef((function(e,n){let r,{onClick:i,relative:a,reloadDocument:o,replace:l,state:c,target:u,to:h,preventScrollReset:p,viewTransition:f}=e,m=xe(e,_e),{basename:g}=t.useContext(H),v=!1;if("string"===typeof h&&ke.test(h)&&(r=h,Se))try{let e=new URL(window.location.href),t=h.startsWith("//")?new URL(e.protocol+h):new URL(h),n=R(t.pathname,g);t.origin===e.origin&&null!=n?h=n+t.search+t.hash:v=!0}catch(Q_){}let y=function(e,n){let{relative:r}=void 0===n?{}:n;Y()||s(!1);let{basename:i,navigator:a}=t.useContext(H),{hash:o,pathname:l,search:c}=ee(e,{relative:r}),u=l;return"/"!==i&&(u="/"===l?i:N([i,l])),a.createHref({pathname:u,search:c,hash:o})}(h,{relative:a}),b=function(e,n){let{target:r,replace:i,state:a,preventScrollReset:o,relative:s,viewTransition:l}=void 0===n?{}:n,c=Z(),u=Q(),h=ee(e,{relative:s});return t.useCallback((t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,r)){t.preventDefault();let n=void 0!==i?i:d(u)===d(h);c(e,{replace:n,state:a,preventScrollReset:o,relative:s,viewTransition:l})}}),[u,c,h,i,a,r,e,o,s,l])}(h,{replace:l,state:c,target:u,preventScrollReset:p,relative:a,viewTransition:f});return t.createElement("a",Ee({},m,{href:r||y,onClick:v||o?i:function(e){i&&i(e),e.defaultPrevented||b(e)},ref:n,target:u}))}));var Ie,Re;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Ie||(Ie={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Re||(Re={}));var De=n(8168),Le=n(8587),Pe=n(2004),Me=n(116),Ne=n(505),Oe=n(237),je=n(2860),Fe=n(7370);const Ue=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const n=t.useContext(Fe.T);return n&&(r=n,0!==Object.keys(r).length)?n:e;var r},Be=(0,je.A)();const $e=function(){return Ue(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be)};var Ve=n(4414);const We=["className","component"];var ze=n(4501),He=n(4436),qe=n(7550),Ge=n(1763);const Ke=(0,Ge.A)("MuiBox",["root"]),Ye=(0,He.A)(),Qe=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{themeId:n,defaultTheme:r,defaultClassName:i="MuiBox-root",generateClassName:a}=e,o=(0,Me.default)("div",{shouldForwardProp:e=>"theme"!==e&&"sx"!==e&&"as"!==e})(Ne.A),s=t.forwardRef((function(e,t){const s=$e(r),l=(0,Oe.A)(e),{className:c,component:u="div"}=l,d=(0,Le.A)(l,We);return(0,Ve.jsx)(o,(0,De.A)({as:u,ref:t,className:(0,Pe.A)(c,a?a(i):i),theme:n&&s[n]||s},d))}));return s}({themeId:qe.A,defaultTheme:Ye,defaultClassName:Ke.root,generateClassName:ze.A.generate}),Xe=Qe;var Ze=n(8463),Je=n(3158);const et=function(e){let{styles:t,themeId:n,defaultTheme:r={}}=e;const i=$e(r),a="function"===typeof t?t(n&&i[n]||i):t;return(0,Ve.jsx)(Je.A,{styles:a})};var tt=n(195);const nt=function(e){return(0,Ve.jsx)(et,(0,De.A)({},e,{defaultTheme:tt.A,themeId:qe.A}))},rt=(e,t)=>(0,De.A)({WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%"},t&&!e.vars&&{colorScheme:e.palette.mode}),it=e=>(0,De.A)({color:(e.vars||e).palette.text.primary},e.typography.body1,{backgroundColor:(e.vars||e).palette.background.default,"@media print":{backgroundColor:(e.vars||e).palette.common.white}});const at=function(e){const n=(0,Ze.b)({props:e,name:"MuiCssBaseline"}),{children:r,enableColorScheme:i=!1}=n;return(0,Ve.jsxs)(t.Fragment,{children:[(0,Ve.jsx)(nt,{styles:e=>function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var n;const r={};t&&e.colorSchemes&&Object.entries(e.colorSchemes).forEach((t=>{let[n,i]=t;var a;r[e.getColorSchemeSelector(n).replace(/\s*&/,"")]={colorScheme:null==(a=i.palette)?void 0:a.mode}}));let i=(0,De.A)({html:rt(e,t),"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:e.typography.fontWeightBold},body:(0,De.A)({margin:0},it(e),{"&::backdrop":{backgroundColor:(e.vars||e).palette.background.default}})},r);const a=null==(n=e.components)||null==(n=n.MuiCssBaseline)?void 0:n.styleOverrides;return a&&(i=[i,a]),i}(e,i)}),r]})},ot=!1,st=!1,lt="${JSCORE_VERSION}",ct=function(e,t){if(!e)throw ut(t)},ut=function(e){return new Error("Firebase Database ("+lt+") INTERNAL ASSERT FAILED: "+e)},dt=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},ht={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],a=i+1<e.length,o=a?e[i+1]:0,s=i+2<e.length,l=s?e[i+2]:0,c=t>>2,u=(3&t)<<4|o>>4;let d=(15&o)<<2|l>>6,h=63&l;s||(h=64,a||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(dt(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){const a=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(a>>10)),t[r++]=String.fromCharCode(56320+(1023&a))}else{const a=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&a)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const s=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==a||null==o||null==s)throw new pt;const l=t<<2|a>>4;if(r.push(l),64!==o){const e=a<<4&240|o>>2;if(r.push(e),64!==s){const e=o<<6&192|s;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class pt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ft=function(e){const t=dt(e);return ht.encodeByteArray(t,!0)},mt=function(e){return ft(e).replace(/\./g,"")},gt=function(e){try{return ht.decodeString(e,!0)}catch(Q_){console.error("base64Decode failed: ",Q_)}return null};function vt(e){return yt(void 0,e)}function yt(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=yt(e[n],t[n]));return e}const bt=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,wt=()=>{try{return bt()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_ALGOLIA_API_KEY:"b94f7163a6855940c1a0d94e635a307c",REACT_APP_ALGOLIA_APP_ID:"7PVTC2J64R",REACT_APP_ALGOLIA_INDEX_NAME:"searches",REACT_APP_API_URL:"https://sideeye-backend-production.up.railway.app",REACT_APP_FIREBASE_API_KEY:"AIzaSyBI9pvyseKR-5dw3eXuZgTLnG3OcvNGbeI",REACT_APP_FIREBASE_APP_ID:"1:864667627333:web:1ec087179141d1e91a982c",REACT_APP_FIREBASE_AUTH_DOMAIN:"sideeye.uk",REACT_APP_FIREBASE_DATABASE_URL:"https://sideeye-bafda-default-rtdb.europe-west1.firebasedatabase.app",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"864667627333",REACT_APP_FIREBASE_PROJECT_ID:"sideeye-bafda",REACT_APP_FIREBASE_STORAGE_BUCKET:"sideeye-bafda.firebasestorage.app"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(Q_){return}const t=e&&gt(e[1]);return t&&JSON.parse(t)})()}catch(Q_){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${Q_}`)}},Et=e=>{var t,n;return null===(n=null===(t=wt())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},xt=e=>{const t=Et(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},_t=()=>{var e;return null===(e=wt())||void 0===e?void 0:e.config},At=e=>{var t;return null===(t=wt())||void 0===t?void 0:t[`_${e}`]};class Tt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function St(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[mt(JSON.stringify({alg:"none",type:"JWT"})),mt(JSON.stringify(a)),""].join(".")}function kt(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Ct(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(kt())}function It(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function Rt(){return!0===ot||!0===st}function Dt(){return!function(){var e;const t=null===(e=wt())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(Q_){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Lt(){try{return"object"===typeof indexedDB}catch(Q_){return!1}}class Pt extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Pt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Mt.prototype.create)}}class Mt{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n=`${this.service}/${e}`,r=this.errors[e],i=r?function(e,t){return e.replace(Nt,((e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`}))}(r,t):"Error",a=`${this.serviceName}: ${i} (${n}).`;return new Pt(n,a,t)}}const Nt=/\{\$([^}]+)}/g;function Ot(e){return JSON.parse(e)}function jt(e){return JSON.stringify(e)}const Ft=function(e){let t={},n={},r={},i="";try{const a=e.split(".");t=Ot(gt(a[0])||""),n=Ot(gt(a[1])||""),i=a[2],r=n.d||{},delete n.d}catch(Q_){}return{header:t,claims:n,data:r,signature:i}};function Ut(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Bt(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function $t(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Vt(e,t,n){const r={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function Wt(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],a=t[i];if(zt(n)&&zt(a)){if(!Wt(n,a))return!1}else if(n!==a)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function zt(e){return null!==e&&"object"===typeof e}function Ht(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function qt(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function Gt(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class Kt{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const n=this.W_;if("string"===typeof e)for(let u=0;u<16;u++)n[u]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let u=0;u<16;u++)n[u]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let u=16;u<80;u++){const e=n[u-3]^n[u-8]^n[u-14]^n[u-16];n[u]=4294967295&(e<<1|e>>>31)}let r,i,a=this.chain_[0],o=this.chain_[1],s=this.chain_[2],l=this.chain_[3],c=this.chain_[4];for(let u=0;u<80;u++){u<40?u<20?(r=l^o&(s^l),i=1518500249):(r=o^s^l,i=1859775393):u<60?(r=o&s|l&(o|s),i=2400959708):(r=o^s^l,i=3395469782);const e=(a<<5|a>>>27)+r+c+i+n[u]&4294967295;c=l,l=s,s=4294967295&(o<<30|o>>>2),o=a,a=e}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+s&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const n=t-this.blockSize;let r=0;const i=this.buf_;let a=this.inbuf_;for(;r<t;){if(0===a)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[a]=e.charCodeAt(r),++a,++r,a===this.blockSize){this.compress_(i),a=0;break}}else for(;r<t;)if(i[a]=e[r],++a,++r,a===this.blockSize){this.compress_(i),a=0;break}}this.inbuf_=a,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=255&t,t/=256;this.compress_(this.buf_);let n=0;for(let r=0;r<5;r++)for(let t=24;t>=0;t-=8)e[n]=this.chain_[r]>>t&255,++n;return e}}class Yt{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=Qt),void 0===r.error&&(r.error=Qt),void 0===r.complete&&(r.complete=Qt);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(Q_){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(Q_){"undefined"!==typeof console&&console.error&&console.error(Q_)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function Qt(){}function Xt(e,t){return`${e} failed: ${t} argument `}const Zt=function(e){let t=0;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function Jt(e){return e&&e._delegate?e._delegate:e}class en{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const tn="[DEFAULT]";class nn{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Tt;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(Q_){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(Q_){if(r)return null;throw Q_}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:tn})}catch(Q_){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(Q_){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tn;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tn;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tn;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,a]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&a.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const a=this.instances.get(r);return a&&e(a,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch(Lz){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:rn(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(Lz){}return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tn;return this.component?this.component.multipleInstances?e:tn:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}function rn(e){return e===tn?void 0:e}class an{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new nn(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const on=[];var sn;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(sn||(sn={}));const ln={debug:sn.DEBUG,verbose:sn.VERBOSE,info:sn.INFO,warn:sn.WARN,error:sn.ERROR,silent:sn.SILENT},cn=sn.INFO,un={[sn.DEBUG]:"log",[sn.VERBOSE]:"log",[sn.INFO]:"info",[sn.WARN]:"warn",[sn.ERROR]:"error"},dn=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=un[t];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);for(var i=arguments.length,a=new Array(i>2?i-2:0),o=2;o<i;o++)a[o-2]=arguments[o];console[r](`[${n}]  ${e.name}:`,...a)};class hn{constructor(e){this.name=e,this._logLevel=cn,this._logHandler=dn,this._userLogHandler=null,on.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in sn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?ln[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,sn.DEBUG,...t),this._logHandler(this,sn.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,sn.VERBOSE,...t),this._logHandler(this,sn.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,sn.INFO,...t),this._logHandler(this,sn.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,sn.WARN,...t),this._logHandler(this,sn.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,sn.ERROR,...t),this._logHandler(this,sn.ERROR,...t)}}let pn,fn;const mn=new WeakMap,gn=new WeakMap,vn=new WeakMap,yn=new WeakMap,bn=new WeakMap;let wn={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return gn.get(e);if("objectStoreNames"===t)return e.objectStoreNames||vn.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return _n(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function En(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(fn||(fn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(An(this),n),_n(mn.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return _n(e.apply(An(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const a=e.call(An(this),t,...r);return vn.set(a,t.sort?t.sort():[t]),_n(a)}}function xn(e){return"function"===typeof e?En(e):(e instanceof IDBTransaction&&function(e){if(gn.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=()=>{t(),r()},a=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));gn.set(e,t)}(e),t=e,(pn||(pn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,wn):e);var t}function _n(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",a)},i=()=>{t(_n(e.result)),r()},a=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((t=>{t instanceof IDBCursor&&mn.set(t,e)})).catch((()=>{})),bn.set(t,e),t}(e);if(yn.has(e))return yn.get(e);const t=xn(e);return t!==e&&(yn.set(e,t),bn.set(t,e)),t}const An=e=>bn.get(e);const Tn=["get","getKey","getAll","getAllKeys","count"],Sn=["put","add","delete","clear"],kn=new Map;function Cn(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(kn.get(t))return kn.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Sn.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Tn.includes(n))return;const a=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let a=t.store;for(var o=arguments.length,s=new Array(o>1?o-1:0),l=1;l<o;l++)s[l-1]=arguments[l];return r&&(a=a.index(s.shift())),(await Promise.all([a[n](...s),i&&t.done]))[0]};return kn.set(t,a),a}wn=(e=>({...e,get:(t,n,r)=>Cn(t,n)||e.get(t,n,r),has:(t,n)=>!!Cn(t,n)||e.has(t,n)}))(wn);class In{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const Rn="@firebase/app",Dn="0.11.4",Ln=new hn("@firebase/app"),Pn="@firebase/app-compat",Mn="@firebase/analytics-compat",Nn="@firebase/analytics",On="@firebase/app-check-compat",jn="@firebase/app-check",Fn="@firebase/auth",Un="@firebase/auth-compat",Bn="@firebase/database",$n="@firebase/data-connect",Vn="@firebase/database-compat",Wn="@firebase/functions",zn="@firebase/functions-compat",Hn="@firebase/installations",qn="@firebase/installations-compat",Gn="@firebase/messaging",Kn="@firebase/messaging-compat",Yn="@firebase/performance",Qn="@firebase/performance-compat",Xn="@firebase/remote-config",Zn="@firebase/remote-config-compat",Jn="@firebase/storage",er="@firebase/storage-compat",tr="@firebase/firestore",nr="@firebase/vertexai",rr="@firebase/firestore-compat",ir="firebase",ar="[DEFAULT]",or={[Rn]:"fire-core",[Pn]:"fire-core-compat",[Nn]:"fire-analytics",[Mn]:"fire-analytics-compat",[jn]:"fire-app-check",[On]:"fire-app-check-compat",[Fn]:"fire-auth",[Un]:"fire-auth-compat",[Bn]:"fire-rtdb",[$n]:"fire-data-connect",[Vn]:"fire-rtdb-compat",[Wn]:"fire-fn",[zn]:"fire-fn-compat",[Hn]:"fire-iid",[qn]:"fire-iid-compat",[Gn]:"fire-fcm",[Kn]:"fire-fcm-compat",[Yn]:"fire-perf",[Qn]:"fire-perf-compat",[Xn]:"fire-rc",[Zn]:"fire-rc-compat",[Jn]:"fire-gcs",[er]:"fire-gcs-compat",[tr]:"fire-fst",[rr]:"fire-fst-compat",[nr]:"fire-vertex","fire-js":"fire-js",[ir]:"fire-js-all"},sr=new Map,lr=new Map,cr=new Map;function ur(e,t){try{e.container.addComponent(t)}catch(Q_){Ln.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,Q_)}}function dr(e){const t=e.name;if(cr.has(t))return Ln.debug(`There were multiple attempts to register component ${t}.`),!1;cr.set(t,e);for(const n of sr.values())ur(n,e);for(const n of lr.values())ur(n,e);return!0}function hr(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function pr(e){return null!==e&&void 0!==e&&void 0!==e.settings}const fr=new Mt("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class mr{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new en("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw fr.create("app-deleted",{appName:this._name})}}const gr="11.6.0";function vr(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:ar,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw fr.create("bad-app-name",{appName:String(i)});if(n||(n=_t()),!n)throw fr.create("no-options");const a=sr.get(i);if(a){if(Wt(n,a.options)&&Wt(r,a.config))return a;throw fr.create("duplicate-app",{appName:i})}const o=new an(i);for(const l of cr.values())o.addComponent(l);const s=new mr(n,r,o);return sr.set(i,s),s}function yr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ar;const t=sr.get(e);if(!t&&e===ar&&_t())return vr();if(!t)throw fr.create("no-app",{appName:e});return t}function br(e,t,n){var r;let i=null!==(r=or[e])&&void 0!==r?r:e;n&&(i+=`-${n}`);const a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){const e=[`Unable to register library "${i}" with version "${t}":`];return a&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&o&&e.push("and"),o&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void Ln.warn(e.join(" "))}dr(new en(`${i}-version`,(()=>({library:i,version:t})),"VERSION"))}const wr="firebase-heartbeat-store";let Er=null;function xr(){return Er||(Er=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),s=_n(o);return r&&o.addEventListener("upgradeneeded",(e=>{r(_n(o.result),e.oldVersion,e.newVersion,_n(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),s.then((e=>{a&&e.addEventListener("close",(()=>a())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),s}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(wr)}catch(Q_){console.warn(Q_)}}}).catch((e=>{throw fr.create("idb-open",{originalErrorMessage:e.message})}))),Er}async function _r(e,t){try{const n=(await xr()).transaction(wr,"readwrite"),r=n.objectStore(wr);await r.put(t,Ar(e)),await n.done}catch(Q_){if(Q_ instanceof Pt)Ln.warn(Q_.message);else{const t=fr.create("idb-set",{originalErrorMessage:null===Q_||void 0===Q_?void 0:Q_.message});Ln.warn(t.message)}}}function Ar(e){return`${e.name}!${e.options.appId}`}class Tr{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new kr(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Sr();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(Q_){Ln.warn(Q_)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=Sr(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),Cr(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Cr(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=mt(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(Q_){return Ln.warn(Q_),""}}}function Sr(){return(new Date).toISOString().substring(0,10)}class kr{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!Lt()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(Rb){t(Rb)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await xr()).transaction(wr),n=await t.objectStore(wr).get(Ar(e));return await t.done,n}catch(Q_){if(Q_ instanceof Pt)Ln.warn(Q_.message);else{const t=fr.create("idb-get",{originalErrorMessage:null===Q_||void 0===Q_?void 0:Q_.message});Ln.warn(t.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return _r(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return _r(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Cr(e){return mt(JSON.stringify({version:2,heartbeats:e})).length}var Ir;Ir="",dr(new en("platform-logger",(e=>new In(e)),"PRIVATE")),dr(new en("heartbeat",(e=>new Tr(e)),"PRIVATE")),br(Rn,Dn,Ir),br(Rn,Dn,"esm2017"),br("fire-js","");br("firebase","11.6.0","app");function Rr(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function Dr(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Lr=Dr,Pr=new Mt("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Mr=new hn("@firebase/auth");function Nr(e){if(Mr.logLevel<=sn.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Mr.error(`Auth (${gr}): ${e}`,...n)}}function Or(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Br(e,...n)}function jr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Br(e,...n)}function Fr(e,t,n){const r=Object.assign(Object.assign({},Lr()),{[t]:n});return new Mt("auth","Firebase",r).create(t,{appName:e.name})}function Ur(e){return Fr(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Br(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return Pr.create(e,...n)}function $r(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Br(t,...r)}}function Vr(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Nr(t),new Error(t)}function Wr(e,t){e||Vr(t)}function zr(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Hr(){return"http:"===qr()||"https:"===qr()}function qr(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function Gr(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Hr()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class Kr{constructor(e,t){this.shortDelay=e,this.longDelay=t,Wr(t>e,"Short delay should be less than long delay!"),this.isMobile=Ct()||It()}get(){return Gr()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Yr(e,t){Wr(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class Qr{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void Vr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void Vr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void Vr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Xr={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Zr=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Jr=new Kr(3e4,6e4);function ei(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function ti(e,t,n,r){return ni(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let i={},a={};r&&("GET"===t?a=r:i={body:JSON.stringify(r)});const o=Ht(Object.assign({key:e.config.apiKey},a)).slice(1),s=await e._getAdditionalHeaders();s["Content-Type"]="application/json",e.languageCode&&(s["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:s},i);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),Qr.fetch()(await ii(e,e.config.apiHost,n,o),l)}))}async function ni(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Xr),t);try{const t=new oi(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw si(e,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const t=i.ok?a.errorMessage:a.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw si(e,"credential-already-in-use",a);if("EMAIL_EXISTS"===n)throw si(e,"email-already-in-use",a);if("USER_DISABLED"===n)throw si(e,"user-disabled",a);const s=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw Fr(e,s,o);Or(e,s)}}catch(Q_){if(Q_ instanceof Pt)throw Q_;Or(e,"network-request-failed",{message:String(Q_)})}}async function ri(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const a=await ti(e,t,n,r,i);return"mfaPendingCredential"in a&&Or(e,"multi-factor-auth-required",{_serverResponse:a}),a}async function ii(e,t,n,r){const i=`${t}${n}?${r}`,a=e,o=a.config.emulator?Yr(e.config,i):`${e.config.apiScheme}://${i}`;if(Zr.includes(n)&&(await a._persistenceManagerAvailable,"COOKIE"===a._getPersistenceType())){return a._getPersistence()._getFinalTarget(o).toString()}return o}function ai(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class oi{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(jr(this.auth,"network-request-failed"))),Jr.get())}))}}function si(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=jr(e,t,r);return i.customData._tokenResponse=n,i}function li(e){return void 0!==e&&void 0!==e.enterprise}class ci{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return ai(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function ui(e,t){return ti(e,"GET","/v2/recaptchaConfig",ei(e,t))}async function di(e,t){return ti(e,"POST","/v1/accounts:lookup",t)}function hi(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(Q_){}}function pi(e){return 1e3*Number(e)}function fi(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Nr("JWT malformed, contained fewer than 3 sections"),null;try{const e=gt(n);return e?JSON.parse(e):(Nr("Failed to decode base64 JWT payload"),null)}catch(Q_){return Nr("Caught error parsing JWT payload as JSON",null===Q_||void 0===Q_?void 0:Q_.toString()),null}}function mi(e){const t=fi(e);return $r(t,"internal-error"),$r("undefined"!==typeof t.exp,"internal-error"),$r("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function gi(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(Q_){throw Q_ instanceof Pt&&function(e){let{code:t}=e;return"auth/user-disabled"===t||"auth/user-token-expired"===t}(Q_)&&e.auth.currentUser===e&&await e.auth.signOut(),Q_}}class vi{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(Q_){return void("auth/network-request-failed"===(null===Q_||void 0===Q_?void 0:Q_.code)&&this.schedule(!0))}this.schedule()}}class yi{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=hi(this.lastLoginAt),this.creationTime=hi(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function bi(e){var t;const n=e.auth,r=await e.getIdToken(),i=await gi(e,di(n,{idToken:r}));$r(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const a=i.users[0];e._notifyReloadListener(a);const o=(null===(t=a.providerUserInfo)||void 0===t?void 0:t.length)?wi(a.providerUserInfo):[],s=function(e,t){const n=e.filter((e=>!t.some((t=>t.providerId===e.providerId))));return[...n,...t]}(e.providerData,o),l=e.isAnonymous,c=!(e.email&&a.passwordHash)&&!(null===s||void 0===s?void 0:s.length),u=!!l&&c,d={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:s,metadata:new yi(a.createdAt,a.lastLoginAt),isAnonymous:u};Object.assign(e,d)}function wi(e){return e.map((e=>{var{providerId:t}=e,n=Rr(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}class Ei{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){$r(e.idToken,"internal-error"),$r("undefined"!==typeof e.idToken,"internal-error"),$r("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):mi(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){$r(0!==e.length,"internal-error");const t=mi(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?($r(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await ni(e,{},(async()=>{const n=Ht({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,a=await ii(e,r,"/v1/token",`key=${i}`),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",Qr.fetch()(a,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,a=new Ei;return n&&($r("string"===typeof n,"internal-error",{appName:e}),a.refreshToken=n),r&&($r("string"===typeof r,"internal-error",{appName:e}),a.accessToken=r),i&&($r("number"===typeof i,"internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ei,this.toJSON())}_performRefresh(){return Vr("not implemented")}}function xi(e,t){$r("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class _i{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=Rr(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new vi(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new yi(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await gi(this,this.stsTokenManager.getToken(this.auth,e));return $r(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=Jt(e),r=await n.getIdToken(t),i=fi(r);$r(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const a="object"===typeof i.firebase?i.firebase:void 0,o=null===a||void 0===a?void 0:a.sign_in_provider;return{claims:i,token:r,authTime:hi(pi(i.auth_time)),issuedAtTime:hi(pi(i.iat)),expirationTime:hi(pi(i.exp)),signInProvider:o||null,signInSecondFactor:(null===a||void 0===a?void 0:a.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=Jt(e);await bi(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&($r(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new _i(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){$r(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await bi(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(pr(this.auth.app))return Promise.reject(Ur(this.auth));const e=await this.getIdToken();return await gi(this,async function(e,t){return ti(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,a,o,s,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,p=null!==(a=t.photoURL)&&void 0!==a?a:void 0,f=null!==(o=t.tenantId)&&void 0!==o?o:void 0,m=null!==(s=t._redirectEventId)&&void 0!==s?s:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,v=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:y,emailVerified:b,isAnonymous:w,providerData:E,stsTokenManager:x}=t;$r(y&&x,e,"internal-error");const _=Ei.fromJSON(this.name,x);$r("string"===typeof y,e,"internal-error"),xi(u,e.name),xi(d,e.name),$r("boolean"===typeof b,e,"internal-error"),$r("boolean"===typeof w,e,"internal-error"),xi(h,e.name),xi(p,e.name),xi(f,e.name),xi(m,e.name),xi(g,e.name),xi(v,e.name);const A=new _i({uid:y,auth:e,email:d,emailVerified:b,displayName:u,isAnonymous:w,photoURL:p,phoneNumber:h,tenantId:f,stsTokenManager:_,createdAt:g,lastLoginAt:v});return E&&Array.isArray(E)&&(A.providerData=E.map((e=>Object.assign({},e)))),m&&(A._redirectEventId=m),A}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new Ei;r.updateFromServerResponse(t);const i=new _i({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await bi(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];$r(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?wi(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length),o=new Ei;o.updateFromIdToken(n);const s=new _i({uid:r.localId,auth:e,stsTokenManager:o,isAnonymous:a}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new yi(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length)};return Object.assign(s,l),s}}const Ai=new Map;function Ti(e){Wr(e instanceof Function,"Expected a class definition");let t=Ai.get(e);return t?(Wr(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Ai.set(e,t),t)}class Si{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Si.type="NONE";const ki=Si;function Ci(e,t,n){return`firebase:${e}:${t}:${n}`}class Ii{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=Ci(this.userKey,r.apiKey,i),this.fullPersistenceKey=Ci("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"===typeof e){const t=await di(this.auth,{idToken:e}).catch((()=>{}));return t?_i._fromGetAccountInfoResponse(this.auth,t,e):null}return _i._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new Ii(Ti(ki),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||Ti(ki);const a=Ci(n,e.config.apiKey,e.name);let o=null;for(const l of t)try{const t=await l._get(a);if(t){let n;if("string"===typeof t){const r=await di(e,{idToken:t}).catch((()=>{}));if(!r)break;n=await _i._fromGetAccountInfoResponse(e,r,t)}else n=_i._fromJSON(e,t);l!==i&&(o=n),i=l;break}}catch(Lz){}const s=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&s.length?(i=s[0],o&&await i._set(a,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(a)}catch(Lz){}}))),new Ii(i,e,n)):new Ii(i,e,n)}}function Ri(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Mi(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Di(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Oi(t))return"Blackberry";if(ji(t))return"Webos";if(Li(t))return"Safari";if((t.includes("chrome/")||Pi(t))&&!t.includes("edge/"))return"Chrome";if(Ni(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Di(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt();return/firefox\//i.test(e)}function Li(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Pi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt();return/crios\//i.test(e)}function Mi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt();return/iemobile/i.test(e)}function Ni(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt();return/android/i.test(e)}function Oi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt();return/blackberry/i.test(e)}function ji(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt();return/webos/i.test(e)}function Fi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Ui(){return function(){const e=kt();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function Bi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt();return Fi(e)||Ni(e)||ji(e)||Oi(e)||/windows phone/i.test(e)||Mi(e)}function $i(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Ri(kt());break;case"Worker":t=`${Ri(kt())}-${e}`;break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return`${t}/JsCore/${gr}/${r}`}class Vi{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(Q_){r(Q_)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(Q_){t.reverse();for(const n of t)try{n()}catch(PA){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===Q_||void 0===Q_?void 0:Q_.message})}}}class Wi{constructor(e){var t,n,r,i;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=a.minPasswordLength)&&void 0!==t?t:6,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),void 0!==a.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),void 0!==a.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),void 0!==a.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),void 0!==a.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,a,o;const s={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,s),this.validatePasswordCharacterOptions(e,s),s.isValid&&(s.isValid=null===(t=s.meetsMinPasswordLength)||void 0===t||t),s.isValid&&(s.isValid=null===(n=s.meetsMaxPasswordLength)||void 0===n||n),s.isValid&&(s.isValid=null===(r=s.containsLowercaseLetter)||void 0===r||r),s.isValid&&(s.isValid=null===(i=s.containsUppercaseLetter)||void 0===i||i),s.isValid&&(s.isValid=null===(a=s.containsNumericCharacter)||void 0===a||a),s.isValid&&(s.isValid=null===(o=s.containsNonAlphanumericCharacter)||void 0===o||o),s}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class zi{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new qi(this),this.idTokenSubscription=new qi(this),this.beforeStateQueue=new Vi(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Pr,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise((e=>this._resolvePersistenceManagerAvailable=e))}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ti(t)),this._initializationPromise=this.queue((async()=>{var n,r,i;if(!this._deleted&&(this.persistenceManager=await Ii.create(this,e),null===(n=this._resolvePersistenceManagerAvailable)||void 0===n||n.call(this),!this._deleted)){if(null===(r=this._popupRedirectResolver)||void 0===r?void 0:r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(Q_){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await di(this,{idToken:e}),n=await _i._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(pr(this.app)){const e=this.app.settings.authIdToken;return e?new Promise((t=>{setTimeout((()=>this.initializeCurrentUserFromIdToken(e).then(t,t)))})):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,a=null===r||void 0===r?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==a||!(null===o||void 0===o?void 0:o.user)||(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(Q_){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(Q_)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return $r(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(Q_){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await bi(e)}catch(Q_){if("auth/network-request-failed"!==(null===Q_||void 0===Q_?void 0:Q_.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(pr(this.app))return Promise.reject(Ur(this));const t=e?Jt(e):null;return t&&$r(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&$r(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return pr(this.app)?Promise.reject(Ur(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return pr(this.app)?Promise.reject(Ur(this)):this.queue((async()=>{await this.assertedPersistence.setPersistence(Ti(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return ti(e,"GET","/v2/passwordPolicy",ei(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new Wi(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Mt("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return ti(e,"POST","/v2/accounts:revokeToken",ei(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ti(e)||this._popupRedirectResolver;$r(t,this,"argument-error"),this.redirectPersistenceManager=await Ii.create(this,[Ti(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let a=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if($r(o,this,"internal-error"),o.then((()=>{a||i(this.currentUser)})),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{a=!0,i()}}{const n=e.addObserver(t);return()=>{a=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return $r(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=$i(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if(pr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(Mr.logLevel<=sn.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Mr.warn(`Auth (${gr}): ${e}`,...n)}}(`Error while retrieving App Check token: ${t.error}`),null===t||void 0===t?void 0:t.token}}function Hi(e){return Jt(e)}class qi{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new Yt(e,t);return n.subscribe.bind(n)}((e=>this.observer=e))}get next(){return $r(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Gi={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Ki(e){return Gi.loadJS(e)}function Yi(e){return`__${e}${Math.floor(1e6*Math.random())}`}class Qi{constructor(){this.enterprise=new Xi}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Xi{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Zi="NO_RECAPTCHA";class Ji{constructor(e){this.type="recaptcha-enterprise",this.auth=Hi(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;li(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n(Zi)}))})):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new Qi).execute("siteKey",{action:"verify"})}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{ui(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new ci(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&li(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=Gi.recaptchaEnterpriseScript;0!==t.length&&(t+=i),Ki(t).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function ea(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const a=new Ji(e);let o;if(i)o=Zi;else try{o=await a.verify(n)}catch(Rb){o=await a.verify(n,!0)}const s=Object.assign({},t);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in s){const e=s.phoneEnrollmentInfo.phoneNumber,t=s.phoneEnrollmentInfo.recaptchaToken;Object.assign(s,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in s){const e=s.phoneSignInInfo.recaptchaToken;Object.assign(s,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return s}return r?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),s}async function ta(e,t,n,r,i){var a,o;if("EMAIL_PASSWORD_PROVIDER"===i){if(null===(a=e._getRecaptchaConfig())||void 0===a?void 0:a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await ea(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch((async i=>{if("auth/missing-recaptcha-token"===i.code){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const i=await ea(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)}))}if("PHONE_PROVIDER"===i){if(null===(o=e._getRecaptchaConfig())||void 0===o?void 0:o.isProviderEnabled("PHONE_PROVIDER")){const i=await ea(e,t,n);return r(e,i).catch((async i=>{var a;if("AUDIT"===(null===(a=e._getRecaptchaConfig())||void 0===a?void 0:a.getProviderEnforcementState("PHONE_PROVIDER"))&&("auth/missing-recaptcha-token"===i.code||"auth/invalid-app-credential"===i.code)){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const i=await ea(e,t,n,!1,!0);return r(e,i)}return Promise.reject(i)}))}{const i=await ea(e,t,n,!1,!0);return r(e,i)}}return Promise.reject(i+" provider is not supported.")}async function na(e){const t=Hi(e),n=await ui(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new ci(n);if(null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()){new Ji(t).verify()}}function ra(e,t,n){const r=Hi(e);$r(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=ia(t),{host:o,port:s}=function(e){const t=ia(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:aa(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:aa(t)}}}(t),l={url:`${a}//${o}${null===s?"":`:${s}`}/`},c=Object.freeze({host:o,port:s,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator)return $r(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void $r(Wt(l,r.config.emulator)&&Wt(c,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=l,r.emulatorConfig=c,r.settings.appVerificationDisabledForTesting=!0,i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function ia(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function aa(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class oa{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Vr("not implemented")}_getIdTokenResponse(e){return Vr("not implemented")}_linkToIdToken(e,t){return Vr("not implemented")}_getReauthenticationResolver(e){return Vr("not implemented")}}async function sa(e,t){return ti(e,"POST","/v1/accounts:signUp",t)}async function la(e,t){return ri(e,"POST","/v1/accounts:signInWithPassword",ei(e,t))}async function ca(e,t){return ti(e,"POST","/v1/accounts:sendOobCode",ei(e,t))}async function ua(e,t){return ca(e,t)}class da extends oa{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new da(e,t,"password")}static _fromEmailAndCode(e,t){return new da(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return ta(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",la,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return ri(e,"POST","/v1/accounts:signInWithEmailLink",ei(e,t))}(e,{email:this._email,oobCode:this._password});default:Or(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return ta(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",sa,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return ri(e,"POST","/v1/accounts:signInWithEmailLink",ei(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Or(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function ha(e,t){return ri(e,"POST","/v1/accounts:signInWithIdp",ei(e,t))}class pa extends oa{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new pa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Or("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=Rr(t,["providerId","signInMethod"]);if(!n||!r)return null;const a=new pa(n,r);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){return ha(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,ha(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ha(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ht(t)}return e}}async function fa(e,t){return ti(e,"POST","/v1/accounts:sendVerificationCode",ei(e,t))}const ma={USER_NOT_FOUND:"user-not-found"};class ga extends oa{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new ga({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new ga({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return ri(e,"POST","/v1/accounts:signInWithPhoneNumber",ei(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await ri(e,"POST","/v1/accounts:signInWithPhoneNumber",ei(e,t));if(n.temporaryProof)throw si(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return ri(e,"POST","/v1/accounts:signInWithPhoneNumber",ei(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),ma)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new ga({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class va{constructor(e){var t,n,r,i,a,o;const s=qt(Gt(e)),l=null!==(t=s.apiKey)&&void 0!==t?t:null,c=null!==(n=s.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=s.mode)&&void 0!==r?r:null);$r(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=s.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(a=s.languageCode)&&void 0!==a?a:null,this.tenantId=null!==(o=s.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=qt(Gt(e)).link,n=t?qt(Gt(t)).deep_link_id:null,r=qt(Gt(e)).deep_link_id;return(r?qt(Gt(r)).link:null)||r||n||t||e}(e);try{return new va(t)}catch(Lz){return null}}}class ya{constructor(){this.providerId=ya.PROVIDER_ID}static credential(e,t){return da._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=va.parseLink(t);return $r(n,"argument-error"),da._fromEmailAndCode(e,n.code,n.tenantId)}}ya.PROVIDER_ID="password",ya.EMAIL_PASSWORD_SIGN_IN_METHOD="password",ya.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class ba{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class wa extends ba{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ea extends wa{constructor(){super("facebook.com")}static credential(e){return pa._fromParams({providerId:Ea.PROVIDER_ID,signInMethod:Ea.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ea.credentialFromTaggedObject(e)}static credentialFromError(e){return Ea.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Ea.credential(t.oauthAccessToken)}catch(Lz){return null}}}Ea.FACEBOOK_SIGN_IN_METHOD="facebook.com",Ea.PROVIDER_ID="facebook.com";class xa extends wa{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return pa._fromParams({providerId:xa.PROVIDER_ID,signInMethod:xa.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return xa.credentialFromTaggedObject(e)}static credentialFromError(e){return xa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return xa.credential(n,r)}catch(Lz){return null}}}xa.GOOGLE_SIGN_IN_METHOD="google.com",xa.PROVIDER_ID="google.com";class _a extends wa{constructor(){super("github.com")}static credential(e){return pa._fromParams({providerId:_a.PROVIDER_ID,signInMethod:_a.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _a.credentialFromTaggedObject(e)}static credentialFromError(e){return _a.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return _a.credential(t.oauthAccessToken)}catch(Lz){return null}}}_a.GITHUB_SIGN_IN_METHOD="github.com",_a.PROVIDER_ID="github.com";class Aa extends wa{constructor(){super("twitter.com")}static credential(e,t){return pa._fromParams({providerId:Aa.PROVIDER_ID,signInMethod:Aa.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Aa.credentialFromTaggedObject(e)}static credentialFromError(e){return Aa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Aa.credential(n,r)}catch(Lz){return null}}}async function Ta(e,t){return ri(e,"POST","/v1/accounts:signUp",ei(e,t))}Aa.TWITTER_SIGN_IN_METHOD="twitter.com",Aa.PROVIDER_ID="twitter.com";class Sa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await _i._fromIdTokenResponse(e,n,r),a=ka(n);return new Sa({user:i,providerId:a,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=ka(n);return new Sa({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function ka(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Ca extends Pt{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Ca.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Ca(e,t,n,r)}}function Ia(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw Ca._fromErrorAndOperation(e,n,t,r);throw n}))}async function Ra(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await gi(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Sa._forOperation(e,"link",r)}async function Da(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(pr(r.app))return Promise.reject(Ur(r));const i="reauthenticate";try{const a=await gi(e,Ia(r,i,t,e),n);$r(a.idToken,r,"internal-error");const o=fi(a.idToken);$r(o,r,"internal-error");const{sub:s}=o;return $r(e.uid===s,r,"user-mismatch"),Sa._forOperation(e,i,a)}catch(Q_){throw"auth/user-not-found"===(null===Q_||void 0===Q_?void 0:Q_.code)&&Or(r,"user-mismatch"),Q_}}async function La(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(pr(e.app))return Promise.reject(Ur(e));const r="signIn",i=await Ia(e,r,t),a=await Sa._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(a.user),a}async function Pa(e,t){return La(Hi(e),t)}async function Ma(e,t){return Da(Jt(e),t)}function Na(e,t,n){var r;$r((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),$r("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),$r("undefined"===typeof n.linkDomain||n.linkDomain.length>0,e,"invalid-hosting-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.linkDomain=n.linkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&($r(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&($r(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function Oa(e){const t=Hi(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function ja(e,t){const n=Jt(e),r={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&Na(n.auth,r,t);const{email:i}=await async function(e,t){return ca(e,t)}(n.auth,r);i!==e.email&&await e.reload()}async function Fa(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const i=Jt(e),a={idToken:await i.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},o=await gi(i,async function(e,t){return ti(e,"POST","/v1/accounts:update",t)}(i.auth,a));i.displayName=o.displayName||null,i.photoURL=o.photoUrl||null;const s=i.providerData.find((e=>{let{providerId:t}=e;return"password"===t}));s&&(s.displayName=i.displayName,s.photoURL=i.photoURL),await i._updateTokensIfNecessary(o)}function Ua(e,t,n,r){return Jt(e).onAuthStateChanged(t,n,r)}function Ba(e){return Jt(e).signOut()}function $a(e,t){return ti(e,"POST","/v2/accounts/mfaEnrollment:start",ei(e,t))}new WeakMap;const Va="__sak";class Wa{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Va,"1"),this.storage.removeItem(Va),Promise.resolve(!0)):Promise.resolve(!1)}catch(Lz){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class za extends Wa{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Bi(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);Ui()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}za.type="LOCAL";const Ha=za;function qa(e){var t,n;const r=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),i=RegExp(`${r}=([^;]+)`);return null!==(n=null===(t=document.cookie.match(i))||void 0===t?void 0:t[1])&&void 0!==n?n:null}function Ga(e){return`${"http:"===window.location.protocol?"__dev_":"__HOST-"}FIREBASE_${e.split(":")[3]}`}class Ka{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(void 0===typeof window)return e;const t=new URL(`${window.location.origin}/__cookies__`);return t.searchParams.set("finalTarget",e),t}async _isAvailable(){var e;return!("boolean"===typeof isSecureContext&&!isSecureContext)&&("undefined"!==typeof navigator&&"undefined"!==typeof document&&(null===(e=navigator.cookieEnabled)||void 0===e||e))}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;const t=Ga(e);if(window.cookieStore){const e=await window.cookieStore.get(t);return null===e||void 0===e?void 0:e.value}return qa(t)}async _remove(e){if(!this._isAvailable())return;if(!await this._get(e))return;const t=Ga(e);document.cookie=`${t}=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High`,await fetch("/__cookies__",{method:"DELETE"}).catch((()=>{}))}_addListener(e,t){if(!this._isAvailable())return;const n=Ga(e);if(window.cookieStore){const e=e=>{const r=e.changed.find((e=>e.name===n));r&&t(r.value);e.deleted.find((e=>e.name===n))&&t(null)},r=()=>window.cookieStore.removeEventListener("change",e);return this.listenerUnsubscribes.set(t,r),window.cookieStore.addEventListener("change",e)}let r=qa(n);const i=setInterval((()=>{const e=qa(n);e!==r&&(t(e),r=e)}),1e3);this.listenerUnsubscribes.set(t,(()=>clearInterval(i)))}_removeListener(e,t){const n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}}Ka.type="COOKIE";class Ya extends Wa{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Ya.type="SESSION";const Qa=Ya;class Xa{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new Xa(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,a=this.handlersMap[r];if(!(null===a||void 0===a?void 0:a.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(a).map((async e=>e(t.origin,i))),s=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:s})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Za(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Xa.receivers=[];class Ja{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,a;return new Promise(((o,s)=>{const l=Za("",20);r.port1.start();const c=setTimeout((()=>{s(new Error("unsupported_event"))}),n);a={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout((()=>{s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(c),clearTimeout(i),s(new Error("invalid_response"))}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])})).finally((()=>{a&&this.removeMessageHandler(a)}))}}function eo(){return window}function to(){return"undefined"!==typeof eo().WorkerGlobalScope&&"function"===typeof eo().importScripts}const no="firebaseLocalStorageDb",ro="firebaseLocalStorage",io="fbase_key";class ao{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function oo(e,t){return e.transaction([ro],t?"readwrite":"readonly").objectStore(ro)}function so(){const e=indexedDB.open(no,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(ro,{keyPath:io})}catch(Q_){n(Q_)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(ro)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(no);return new ao(e).toPromise()}(),t(await so()))}))}))}async function lo(e,t,n){const r=oo(e,!0).put({[io]:t,value:n});return new ao(r).toPromise()}function co(e,t){const n=oo(e,!0).delete(t);return new ao(n).toPromise()}class uo{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await so()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(Q_){if(t++>3)throw Q_;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return to()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Xa._getInstance(to()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Ja(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(Lz){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await so();return await lo(e,Va,"1"),await co(e,Va),!0}catch(Lz){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>lo(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=oo(e,!1).get(t),r=await new ao(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>co(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=oo(e,!1).getAll();return new ao(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}uo.type="LOCAL";const ho=uo;function po(e,t){return ti(e,"POST","/v2/accounts/mfaSignIn:start",ei(e,t))}Yi("rcb"),new Kr(3e4,6e4);const fo="recaptcha";async function mo(e,t,n){var r;if(!e._getRecaptchaConfig())try{await na(e)}catch(Rb){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(i="string"===typeof t?{phoneNumber:t}:t,"session"in i){const t=i.session;if("phoneNumber"in i){$r("enroll"===t.type,e,"internal-error");const r={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},a=async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===Zi){$r((null===n||void 0===n?void 0:n.type)===fo,e,"argument-error");return $a(e,await go(e,t,n))}return $a(e,t)},o=ta(e,r,"mfaSmsEnrollment",a,"PHONE_PROVIDER"),s=await o.catch((e=>Promise.reject(e)));return s.phoneSessionInfo.sessionInfo}{$r("signin"===t.type,e,"internal-error");const a=(null===(r=i.multiFactorHint)||void 0===r?void 0:r.uid)||i.multiFactorUid;$r(a,e,"missing-multi-factor-info");const o={mfaPendingCredential:t.credential,mfaEnrollmentId:a,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},s=async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===Zi){$r((null===n||void 0===n?void 0:n.type)===fo,e,"argument-error");return po(e,await go(e,t,n))}return po(e,t)},l=ta(e,o,"mfaSmsSignIn",s,"PHONE_PROVIDER"),c=await l.catch((e=>Promise.reject(e)));return c.phoneResponseInfo.sessionInfo}}{const t={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"},r=async(e,t)=>{if(t.captchaResponse===Zi){$r((null===n||void 0===n?void 0:n.type)===fo,e,"argument-error");return fa(e,await go(e,t,n))}return fa(e,t)},a=ta(e,t,"sendVerificationCode",r,"PHONE_PROVIDER"),o=await a.catch((e=>Promise.reject(e)));return o.sessionInfo}}finally{null===n||void 0===n||n._reset()}}async function go(e,t,n){$r(n.type===fo,e,"argument-error");const r=await n.verify();$r("string"===typeof r,e,"argument-error");const i=Object.assign({},t);if("phoneEnrollmentInfo"in i){const e=i.phoneEnrollmentInfo.phoneNumber,t=i.phoneEnrollmentInfo.captchaResponse,n=i.phoneEnrollmentInfo.clientType,a=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:a}}),i}if("phoneSignInInfo"in i){const e=i.phoneSignInInfo.captchaResponse,t=i.phoneSignInInfo.clientType,n=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),i}return Object.assign(i,{recaptchaToken:r}),i}class vo{constructor(e){this.providerId=vo.PROVIDER_ID,this.auth=Hi(e)}verifyPhoneNumber(e,t){return mo(this.auth,e,Jt(t))}static credential(e,t){return ga._fromVerification(e,t)}static credentialFromResult(e){const t=e;return vo.credentialFromTaggedObject(t)}static credentialFromError(e){return vo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?ga._fromTokenResponse(n,r):null}}function yo(e,t){return t?Ti(t):($r(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}vo.PROVIDER_ID="phone",vo.PHONE_SIGN_IN_METHOD="phone";class bo extends oa{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ha(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ha(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ha(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function wo(e){return La(e.auth,new bo(e),e.bypassAuthState)}function Eo(e){const{auth:t,user:n}=e;return $r(n,t,"internal-error"),Da(n,new bo(e),e.bypassAuthState)}async function xo(e){const{auth:t,user:n}=e;return $r(n,t,"internal-error"),Ra(n,new bo(e),e.bypassAuthState)}class _o{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(Q_){this.reject(Q_)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:a,type:o}=e;if(a)return void this.reject(a);const s={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(s))}catch(Q_){this.reject(Q_)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return wo;case"linkViaPopup":case"linkViaRedirect":return xo;case"reauthViaPopup":case"reauthViaRedirect":return Eo;default:Or(this.auth,"internal-error")}}resolve(e){Wr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Wr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ao=new Kr(2e3,1e4);class To extends _o{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,To.currentPopupAction&&To.currentPopupAction.cancel(),To.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return $r(e,this.auth,"internal-error"),e}async onExecution(){Wr(1===this.filter.length,"Popup operations only handle one event");const e=Za();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(jr(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(jr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,To.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(jr(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,Ao.get())};e()}}To.currentPopupAction=null;const So=new Map;class ko extends _o{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=So.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=Ro(t),r=Io(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(Q_){e=()=>Promise.reject(Q_)}So.set(this.auth._key(),e)}return this.bypassAuthState||So.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Co(e,t){So.set(e._key(),t)}function Io(e){return Ti(e._redirectPersistence)}function Ro(e){return Ci("pendingRedirect",e.config.apiKey,e.name)}async function Do(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(pr(e.app))return Promise.reject(Ur(e));const r=Hi(e),i=yo(r,t),a=new ko(r,i,n),o=await a.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}class Lo{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Mo(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Mo(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(jr(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Po(e))}saveEventToCache(e){this.cachedEventUids.add(Po(e)),this.lastProcessedEventTime=Date.now()}}function Po(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function Mo(e){let{type:t,error:n}=e;return"unknown"===t&&"auth/no-auth-event"===(null===n||void 0===n?void 0:n.code)}const No=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Oo=/^https?/;async function jo(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return ti(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const n of t)try{if(Fo(n))return}catch(Lz){}Or(e,"unauthorized-domain")}function Fo(e){const t=zr(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!Oo.test(n))return!1;if(No.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Uo=new Kr(3e4,6e4);function Bo(){const e=eo().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function $o(e){return new Promise(((t,n)=>{var r,i,a;function o(){Bo(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Bo(),n(jr(e,"network-request-failed"))},timeout:Uo.get()})}if(null===(i=null===(r=eo().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=eo().gapi)||void 0===a?void 0:a.load)){const t=Yi("iframefcb");return eo()[t]=()=>{gapi.load?o():n(jr(e,"network-request-failed"))},Ki(`${Gi.gapiScript}?onload=${t}`).catch((e=>n(e)))}o()}})).catch((e=>{throw Vo=null,e}))}let Vo=null;const Wo=new Kr(5e3,15e3),zo={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ho=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function qo(e){const t=e.config;$r(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Yr(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:t.apiKey,appName:e.name,v:gr},i=Ho.get(e.config.apiHost);i&&(r.eid=i);const a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${Ht(r).slice(1)}`}async function Go(e){const t=await function(e){return Vo=Vo||$o(e),Vo}(e),n=eo().gapi;return $r(n,e,"internal-error"),t.open({where:document.body,url:qo(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:zo,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=jr(e,"network-request-failed"),a=eo().setTimeout((()=>{r(i)}),Wo.get());function o(){eo().clearTimeout(a),n(t)}t.ping(o).then(o,(()=>{r(i)}))}))))}const Ko={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Yo{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(Q_){}}}function Qo(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let s="";const l=Object.assign(Object.assign({},Ko),{width:r.toString(),height:i.toString(),top:a,left:o}),c=kt().toLowerCase();n&&(s=Pi(c)?"_blank":n),Di(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce(((e,t)=>{let[n,r]=t;return`${e}${n}=${r},`}),"");if(function(){var e;return Fi(arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==s)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",s),new Yo(null);const d=window.open(t||"",s,u);$r(d,e,"popup-blocked");try{d.focus()}catch(Q_){}return new Yo(d)}const Xo="__/auth/handler",Zo="emulator/auth/handler",Jo=encodeURIComponent("fac");async function es(e,t,n,r,i,a){$r(e.config.authDomain,e,"auth-domain-config-required"),$r(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:gr,eventId:i};if(t instanceof ba){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",$t(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(a||{}))o[e]=t}if(t instanceof wa){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const s=o;for(const u of Object.keys(s))void 0===s[u]&&delete s[u];const l=await e._getAppCheckToken(),c=l?`#${Jo}=${encodeURIComponent(l)}`:"";return`${function(e){let{config:t}=e;if(!t.emulator)return`https://${t.authDomain}/${Xo}`;return Yr(t,Zo)}(e)}?${Ht(s).slice(1)}${c}`}const ts="webStorageSupport";const ns=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Qa,this._completeRedirectFn=Do,this._overrideRedirectResult=Co}async _openPopup(e,t,n,r){var i;Wr(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return Qo(e,await es(e,t,n,zr(),r),Za())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){eo().location.href=e}(await es(e,t,n,zr(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Wr(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await Go(e),n=new Lo(e);return t.register("authEvent",(t=>{$r(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(ts,{type:ts},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[ts];void 0!==i&&t(!!i),Or(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=jo(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Bi()||Li()||Fi()}};var rs="@firebase/auth",is="1.10.0";class as{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){$r(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const os=At("authIdTokenMaxAge")||300;let ss=null;var ls;!function(e){Gi=e}({loadJS:e=>new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=jr("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),ls="Browser",dr(new en("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:o,authDomain:s}=r.options;$r(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:s,clientPlatform:ls,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:$i(ls)},c=new zi(r,i,a,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ti);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),dr(new en("auth-internal",(e=>(e=>new as(e))(Hi(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),br(rs,is,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(ls)),br(rs,is,"esm2017");var cs,us,ds="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},hs={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var a=e.g[3],o=t+(a^n&(i^a))+r[0]+3614090360&4294967295;o=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=n+(o<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^a&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^a)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~a))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((a=(t=n+((o=t+(i^(n|~a))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=a+((o=i+(t^(a|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+a&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var a=0|e[i];r&&a==t||(n[i]=a,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}(t,(function(){this.blockSize=-1})),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,i=this.B,a=this.h,o=0;o<t;){if(0==a)for(;o<=r;)n(this,e,o),o+=this.blockSize;if("string"===typeof e){for(;o<t;)if(i[a++]=e.charCodeAt(o++),a==this.blockSize){n(this,i),a=0;break}}else for(;o<t;)if(i[a++]=e[o++],a==this.blockSize){n(this,i),a=0;break}}this.h=a,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var i={};function a(e){return-128<=e&&128>e?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new r([0|e],0>e?-1:0)})):new r([0|e],0>e?-1:0)}function o(e){if(isNaN(e)||!isFinite(e))return s;if(0>e)return h(o(-e));for(var t=[],n=1,i=0;e>=n;i++)t[i]=e/n|0,n*=4294967296;return new r(t,0)}var s=a(0),l=a(1),c=a(16777216);function u(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function d(e){return-1==e.h}function h(e){for(var t=e.g.length,n=[],i=0;i<t;i++)n[i]=~e.g[i];return new r(n,~e.h).add(l)}function p(e,t){return e.add(h(t))}function f(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function m(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new m(s,s);if(d(e))return t=g(h(e),t),new m(h(t.g),h(t.h));if(d(t))return t=g(e,h(t)),new m(h(t.g),t.h);if(30<e.g.length){if(d(e)||d(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=v(n),r=v(r);var i=y(n,1),a=y(r,1);for(r=y(r,2),n=y(n,2);!u(r);){var c=a.add(r);0>=c.l(e)&&(i=i.add(n),a=c),r=y(r,1),n=y(n,1)}return t=p(e,i.j(t)),new m(i,t)}for(i=s;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),c=(a=o(n)).j(t);d(c)||0<c.l(e);)c=(a=o(n-=r)).j(t);u(a)&&(a=l),i=i.add(a),e=p(e,c)}return new m(i,e)}function v(e){for(var t=e.g.length+1,n=[],i=0;i<t;i++)n[i]=e.i(i)<<1|e.i(i-1)>>>31;return new r(n,e.h)}function y(e,t){var n=t>>5;t%=32;for(var i=e.g.length-n,a=[],o=0;o<i;o++)a[o]=0<t?e.i(o+n)>>>t|e.i(o+n+1)<<32-t:e.i(o+n);return new r(a,e.h)}(e=r.prototype).m=function(){if(d(this))return-h(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(d(this))return"-"+h(this).toString(e);for(var t=o(Math.pow(e,6)),n=this,r="";;){var i=g(n,t).g,a=((0<(n=p(n,i.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(u(n=i))return a+r;for(;6>a.length;)a="0"+a;r=a+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return d(e=p(this,e))?-1:u(e)?0:1},e.abs=function(){return d(this)?h(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0,a=0;a<=t;a++){var o=i+(65535&this.i(a))+(65535&e.i(a)),s=(o>>>16)+(this.i(a)>>>16)+(e.i(a)>>>16);i=s>>>16,o&=65535,s&=65535,n[a]=s<<16|o}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return s;if(d(this))return d(e)?h(this).j(h(e)):h(h(this).j(e));if(d(e))return h(this.j(h(e)));if(0>this.l(c)&&0>e.l(c))return o(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var a=0;a<e.g.length;a++){var l=this.i(i)>>>16,p=65535&this.i(i),m=e.i(a)>>>16,g=65535&e.i(a);n[2*i+2*a]+=p*g,f(n,2*i+2*a),n[2*i+2*a+1]+=l*g,f(n,2*i+2*a+1),n[2*i+2*a+1]+=p*m,f(n,2*i+2*a+1),n[2*i+2*a+2]+=l*m,f(n,2*i+2*a+2)}for(i=0;i<t;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=t;i<2*t;i++)n[i]=0;return new r(n,0)},e.A=function(e){return g(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)&e.i(i);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)|e.i(i);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)^e.i(i);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,us=hs.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=o,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return h(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=o(Math.pow(n,8)),i=s,a=0;a<t.length;a+=8){var l=Math.min(8,t.length-a),c=parseInt(t.substring(a,a+l),n);8>l?(l=o(Math.pow(n,l)),i=i.j(l).add(o(c))):i=(i=i.j(r)).add(o(c))}return i},cs=hs.Integer=r}).apply("undefined"!==typeof ds?ds:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var ps,fs,ms,gs,vs,ys,bs,ws,Es="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},xs={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Es&&Es];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var i=n;e=e.split(".");for(var a=0;a<e.length-1;a++){var o=e[a];if(!(o in i))break e;i=i[o]}(r=r(a=i[e=e[e.length-1]]))!=a&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,(function(e,t){return t}))}}));var r=r||{},i=this||self;function a(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function o(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function s(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?s:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function d(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function h(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function p(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(a(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function f(e){return/^[\s\xa0]*$/.test(e)}function m(){var e=i.navigator;return e&&(e=e.userAgent)?e:""}function g(e){return g[" "](e),e}g[" "]=function(){};var v=-1!=m().indexOf("Gecko")&&!(-1!=m().toLowerCase().indexOf("webkit")&&-1==m().indexOf("Edge"))&&!(-1!=m().indexOf("Trident")||-1!=m().indexOf("MSIE"))&&-1==m().indexOf("Edge");function y(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function b(e){const t={};for(const n in e)t[n]=e[n];return t}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<w.length;t++)n=w[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function x(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function _(e){i.setTimeout((()=>{throw e}),0)}function A(){var e=I;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var T=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new S),(e=>e.reset()));class S{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let k,C=!1,I=new class{constructor(){this.h=this.g=null}add(e,t){const n=T.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},R=()=>{const e=i.Promise.resolve(void 0);k=()=>{e.then(D)}};var D=()=>{for(var e;e=A();){try{e.h.call(e.g)}catch(nA){_(nA)}var t=T;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}C=!1};function L(){this.s=this.s,this.C=this.C}function P(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}L.prototype.s=!1,L.prototype.ma=function(){this.s||(this.s=!0,this.N())},L.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},P.prototype.h=function(){this.defaultPrevented=!0};var M=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};i.addEventListener("test",e,t),i.removeEventListener("test",e,t)}catch(nA){}return e}();function N(e,t){if(P.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(v){e:{try{g(t.nodeName);var i=!0;break e}catch(sA){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:O[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&N.aa.h.call(this)}}d(N,P);var O={2:"touch",3:"pen",4:"mouse"};N.prototype.h=function(){N.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var j="closure_listenable_"+(1e6*Math.random()|0),F=0;function U(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++F,this.da=this.fa=!1}function B(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function $(e){this.src=e,this.g={},this.h=0}function V(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=Array.prototype.indexOf.call(i,t,void 0);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(B(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function W(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.da&&a.listener==t&&a.capture==!!n&&a.ha==r)return i}return-1}$.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=W(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new U(t,this.src,a,!!r,i)).fa=n,e.push(t)),t};var z="closure_lm_"+(1e6*Math.random()|0),H={};function q(e,t,n,r,i){if(r&&r.once)return K(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)q(e,t[a],n,r,i);return null}return n=te(n),e&&e[j]?e.K(t,n,o(r)?!!r.capture:!!r,i):G(e,t,n,!1,r,i)}function G(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var s=o(i)?!!i.capture:!!i,l=J(e);if(l||(e[z]=l=new $(e)),(n=l.add(t,n,r,s,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=Z;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)M||(i=s),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(X(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function K(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)K(e,t[a],n,r,i);return null}return n=te(n),e&&e[j]?e.L(t,n,o(r)?!!r.capture:!!r,i):G(e,t,n,!0,r,i)}function Y(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)Y(e,t[a],n,r,i);else r=o(r)?!!r.capture:!!r,n=te(n),e&&e[j]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=W(a=e.g[t],n,r,i))&&(B(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=J(e))&&(t=e.g[t.toString()],e=-1,t&&(e=W(t,n,r,i)),(n=-1<e?t[e]:null)&&Q(n))}function Q(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[j])V(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(X(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=J(t))?(V(n,e),0==n.h&&(n.src=null,t[z]=null)):B(e)}}}function X(e){return e in H?H[e]:H[e]="on"+e}function Z(e,t){if(e.da)e=!0;else{t=new N(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&Q(e),e=n.call(r,t)}return e}function J(e){return(e=e[z])instanceof $?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){L.call(this),this.i=new $(this),this.M=this,this.F=null}function re(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new P(t,e);else if(t instanceof P)t.target=t.target||e;else{var i=t;E(t=new P(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=ie(o,r,!0,t)&&i}if(i=ie(o=t.g=e,r,!0,t)&&i,i=ie(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=ie(o=t.g=n[a],r,!1,t)&&i}function ie(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.da&&o.capture==n){var s=o.listener,l=o.ha||o.src;o.fa&&V(e.i,o),i=!1!==s.call(l,r)&&i}}return i&&!r.defaultPrevented}function ae(e,t,n){if("function"===typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:i.setTimeout(e,t||0)}function oe(e){e.g=ae((()=>{e.g=null,e.i&&(e.i=!1,oe(e))}),e.l);const t=e.h;e.h=null,e.m.apply(null,t)}d(ne,L),ne.prototype[j]=!0,ne.prototype.removeEventListener=function(e,t,n,r){Y(this,e,t,n,r)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)B(n[r]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ne.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class se extends L{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:oe(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(e){L.call(this),this.h=e,this.g={}}d(le,L);var ce=[];function ue(e){y(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Q(e)}),e),e.g={}}le.prototype.N=function(){le.aa.N.call(this),ue(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var de=i.JSON.stringify,he=i.JSON.parse,pe=class{stringify(e){return i.JSON.stringify(e,void 0)}parse(e){return i.JSON.parse(e,void 0)}};function fe(){}function me(e){return e.h||(e.h=e.i())}function ge(){}fe.prototype.h=null;var ve={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ye(){P.call(this,"d")}function be(){P.call(this,"c")}d(ye,P),d(be,P);var we={},Ee=null;function xe(){return Ee=Ee||new ne}function _e(e){P.call(this,we.La,e)}function Ae(e){const t=xe();re(t,new _e(t))}function Te(e,t){P.call(this,we.STAT_EVENT,e),this.stat=t}function Se(e){const t=xe();re(t,new Te(t,e))}function ke(e,t){P.call(this,we.Ma,e),this.size=t}function Ce(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout((function(){e()}),t)}function Ie(){this.g=!0}function Re(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return de(n)}catch(s){return t}}(e,n)+(r?" "+r:"")}))}we.La="serverreachability",d(_e,P),we.STAT_EVENT="statevent",d(Te,P),we.Ma="timingevent",d(ke,P),Ie.prototype.xa=function(){this.g=!1},Ie.prototype.info=function(){};var De,Le={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Pe={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Me(){}function Ne(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Oe}function Oe(){this.i=null,this.g="",this.h=!1}d(Me,fe),Me.prototype.g=function(){return new XMLHttpRequest},Me.prototype.i=function(){return{}},De=new Me;var je={},Fe={};function Ue(e,t,n){e.L=1,e.v=dt(ot(t)),e.m=n,e.P=!0,Be(e,null)}function Be(e,t){e.F=Date.now(),We(e),e.A=ot(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),At(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Oe,e.g=hn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new se(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var i="readystatechange";Array.isArray(i)||(i&&(ce[0]=i.toString()),i=ce);for(var a=0;a<i.length;a++){var o=q(n,i[a],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}t=e.H?b(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Ae(),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",s=a.split("&"),l=0;l<s.length;l++){var c=s[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");o=2<=d.length&&"type"==d[1]?o+(u+"=")+c+"&":o+(u+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.i,e.u,e.A,e.l,e.R,e.m)}function $e(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function Ve(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Fe:(n=Number(t.substring(n,r)),isNaN(n)?je:(r+=1)+n>t.length?Fe:(t=t.slice(r,r+n),e.C=r+n,t))}function We(e){e.S=Date.now()+e.I,ze(e,e.I)}function ze(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ce(c(e.ba,e),t)}function He(e){e.B&&(i.clearTimeout(e.B),e.B=null)}function qe(e){0==e.j.G||e.J||sn(e.j,e)}function Ge(e){He(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ue(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function Ke(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Je(n.h,e)))if(!e.K&&Je(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(Z_){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;on(n),Yt(n)}nn(n),Se(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=Ce(c(n.Za,n),6e3));if(1>=Ze(n.h)&&n.ca){try{n.ca()}catch(Z_){}n.ca=void 0}}else cn(n,11)}else if((e.K||n.g==e)&&on(n),!f(t))for(i=n.Da.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const i=c[4];null!=i&&(n.Aa=i,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var a=r.h;a.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(a.j=a.l,a.g=new Set,a.h&&(et(a,a.h),a.h=null))}if(r.D){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,ut(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var o=e;if((r=n).qa=dn(r,r.J?r.ia:null,r.W),o.K){tt(r.h,o);var s=o,l=r.L;l&&(s.I=l),s.B&&(He(s),We(s)),r.g=o}else tn(r);0<n.i.length&&Xt(n)}else"stop"!=c[0]&&"close"!=c[0]||cn(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?cn(n,7):Kt(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}Ae()}catch(Z_){}}Ne.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==zt(e)?t.j():this.Y(e)},Ne.prototype.Y=function(e){try{if(e==this.g)e:{const h=zt(this.g);var t=this.g.Ba();this.g.Z();if(!(3>h)&&(3!=h||this.g&&(this.h.h||this.g.oa()||Ht(this.g)))){this.J||4!=h||7==t||Ae(),He(this);var n=this.g.Z();this.X=n;t:if($e(this)){var r=Ht(this.g);e="";var a=r.length,o=4==zt(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ge(this),qe(this);var s="";break t}this.h.i=new i.TextDecoder}for(t=0;t<a;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(o&&t==a-1)});r.length=0,this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.oa();if(this.o=200==n,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.i,this.u,this.A,this.l,this.R,h,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!f(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,Se(12),Ge(this),qe(this);break e}Re(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ke(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<s.length;){if(e=Ve(this,s),e==Fe){4==h&&(this.s=4,Se(14),n=!1),Re(this.i,this.l,null,"[Incomplete Response]");break}if(e==je){this.s=4,Se(15),Re(this.i,this.l,s,"[Invalid Chunk]"),n=!1;break}Re(this.i,this.l,e,null),Ke(this,e)}if($e(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=h||0!=s.length||this.h.h||(this.s=1,Se(16),n=!1),this.o=this.o&&n,n){if(0<s.length&&!this.W){this.W=!0;var d=this.j;d.g==this&&d.ba&&!d.M&&(d.j.info("Great, no buffering proxy detected. Bytes received: "+s.length),rn(d),d.M=!0,Se(11))}}else Re(this.i,this.l,s,"[Invalid Chunked Response]"),Ge(this),qe(this)}else Re(this.i,this.l,s,null),Ke(this,s);4==h&&Ge(this),this.o&&!this.J&&(4==h?sn(this.j,this):(this.o=!1,We(this)))}else(function(e){const t={};e=(e.g&&2<=zt(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(f(e[r]))continue;var n=x(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const a=t[i]||[];t[i]=a,a.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<s.indexOf("Unknown SID")?(this.s=3,Se(12)):(this.s=0,Se(13)),Ge(this),qe(this)}}}catch(B8){}},Ne.prototype.cancel=function(){this.J=!0,Ge(this)},Ne.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.i,this.A),2!=this.L&&(Ae(),Se(17)),Ge(this),this.s=2,qe(this)):ze(this,this.S-e)};var Ye=class{constructor(e,t){this.g=e,this.map=t}};function Qe(e){this.l=e||10,i.PerformanceNavigationTiming?e=0<(e=i.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Xe(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Ze(e){return e.h?1:e.g?e.g.size:0}function Je(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function et(e,t){e.g?e.g.add(t):e.h=t}function tt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return h(e.i)}function rt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(a(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(a(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(a(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}Qe.prototype.cancel=function(){if(this.i=nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var it=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function at(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof at){this.h=e.h,st(this,e.j),this.o=e.o,this.g=e.g,lt(this,e.s),this.l=e.l;var t=e.i,n=new wt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ct(this,n),this.m=e.m}else e&&(t=String(e).match(it))?(this.h=!1,st(this,t[1]||"",!0),this.o=ht(t[2]||""),this.g=ht(t[3]||"",!0),lt(this,t[4]),this.l=ht(t[5]||"",!0),ct(this,t[6]||"",!0),this.m=ht(t[7]||"")):(this.h=!1,this.i=new wt(null,this.h))}function ot(e){return new at(e)}function st(e,t,n){e.j=n?ht(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function lt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ct(e,t,n){t instanceof wt?(e.i=t,function(e,t){t&&!e.j&&(Et(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(xt(this,t),At(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=pt(t,yt)),e.i=new wt(t,e.h))}function ut(e,t,n){e.i.set(t,n)}function dt(e){return ut(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ht(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function pt(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,ft),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function ft(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}at.prototype.toString=function(){var e=[],t=this.j;t&&e.push(pt(t,mt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(pt(t,mt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(pt(n,"/"==n.charAt(0)?vt:gt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",pt(n,bt)),e.join("")};var mt=/[#\/\?@]/g,gt=/[#\?:]/g,vt=/[#\?]/g,yt=/[#\?@]/g,bt=/#/g;function wt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Et(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function xt(e,t){Et(e),t=Tt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function _t(e,t){return Et(e),t=Tt(e,t),e.g.has(t)}function At(e,t,n){xt(e,t),0<n.length&&(e.i=null,e.g.set(Tt(e,t),h(n)),e.h+=n.length)}function Tt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function St(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(sA){}}function kt(){this.g=new pe}function Ct(e,t,n){const r=n||"";try{rt(e,(function(e,n){let i=e;o(e)&&(i=de(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(Q_){throw t.push(r+"type="+encodeURIComponent("_badmap")),Q_}}function It(e){this.l=e.Ub||null,this.j=e.eb||!1}function Rt(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Dt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Lt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Pt(e)}function Pt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Mt(e){let t="";return y(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Nt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Mt(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ut(e,t,n))}function Ot(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=wt.prototype).add=function(e,t){Et(this),this.i=null,e=Tt(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){Et(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},e.na=function(){Et(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},e.V=function(e){Et(this);let t=[];if("string"===typeof e)_t(this,e)&&(t=t.concat(this.g.get(Tt(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return Et(this),this.i=null,_t(this,e=Tt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const a=encodeURIComponent(String(r)),o=this.V(r);for(r=0;r<o.length;r++){var i=a;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")},d(It,fe),It.prototype.g=function(){return new Rt(this.l,this.j)},It.prototype.i=function(e){return function(){return e}}({}),d(Rt,ne),(e=Rt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Pt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||i).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Lt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Pt(this)),this.g&&(this.readyState=3,Pt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Dt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Lt(this):Pt(this),3==this.readyState&&Dt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Lt(this))},e.Qa=function(e){this.g&&(this.response=e,Lt(this))},e.ga=function(){this.g&&Lt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Rt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),d(Ot,ne);var jt=/^https?$/i,Ft=["POST","PUT"];function Ut(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Bt(e),Vt(e)}function Bt(e){e.A||(e.A=!0,re(e,"complete"),re(e,"error"))}function $t(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=zt(e)||2!=e.Z()))if(e.u&&4==zt(e))ae(e.Ea,0,e);else if(re(e,"readystatechange"),4==zt(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var a;if(a=0===r){var o=String(e.D).match(it)[1]||null;!o&&i.self&&i.self.location&&(o=i.self.location.protocol.slice(0,-1)),a=!jt.test(o?o.toLowerCase():"")}n=a}if(n)re(e,"complete"),re(e,"success");else{e.m=6;try{var s=2<zt(e)?e.g.statusText:""}catch(l){s=""}e.l=s+" ["+e.Z()+"]",Bt(e)}}finally{Vt(e)}}}function Vt(e,t){if(e.g){Wt(e);const n=e.g,r=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||re(e,"ready");try{n.onreadystatechange=r}catch(Q_){}}}function Wt(e){e.I&&(i.clearTimeout(e.I),e.I=null)}function zt(e){return e.g?e.g.readyState:0}function Ht(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(As){return null}}function qt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Gt(e){this.Aa=0,this.i=[],this.j=new Ie,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=qt("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=qt("baseRetryDelayMs",5e3,e),this.cb=qt("retryDelaySeedMs",1e4,e),this.Wa=qt("forwardChannelMaxRetries",2,e),this.wa=qt("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Qe(e&&e.concurrentRequestLimit),this.Da=new kt,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Kt(e){if(Qt(e),3==e.G){var t=e.U++,n=ot(e.I);if(ut(n,"SID",e.K),ut(n,"RID",t),ut(n,"TYPE","terminate"),Jt(e,n),(t=new Ne(e,e.j,t)).L=2,t.v=dt(ot(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(t.v.toString(),"")}catch(oA){}!n&&i.Image&&((new Image).src=t.v,n=!0),n||(t.g=hn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),We(t)}un(e)}function Yt(e){e.g&&(rn(e),e.g.cancel(),e.g=null)}function Qt(e){Yt(e),e.u&&(i.clearTimeout(e.u),e.u=null),on(e),e.h.cancel(),e.s&&("number"===typeof e.s&&i.clearTimeout(e.s),e.s=null)}function Xt(e){if(!Xe(e.h)&&!e.s){e.s=!0;var t=e.Ga;k||R(),C||(k(),C=!0),I.add(t,e),e.B=0}}function Zt(e,t){var n;n=t?t.l:e.U++;const r=ot(e.I);ut(r,"SID",e.K),ut(r,"RID",n),ut(r,"AID",e.T),Jt(e,r),e.m&&e.o&&Nt(r,e.m,e.o),n=new Ne(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=en(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),et(e.h,n),Ue(n,r,t)}function Jt(e,t){e.H&&y(e.H,(function(e,n){ut(t,n,e)})),e.l&&rt({},(function(e,n){ut(t,n,e)}))}function en(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let a=!0;for(let o=0;o<n;o++){let n=i[o].g;const s=i[o].map;if(n-=t,0>n)t=Math.max(0,i[o].g-100),a=!1;else try{Ct(s,e,"req"+n+"_")}catch(B8){r&&r(s)}}if(a){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function tn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;k||R(),C||(k(),C=!0),I.add(t,e),e.v=0}}function nn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Ce(c(e.Fa,e),ln(e,e.v)),e.v++,!0)}function rn(e){null!=e.A&&(i.clearTimeout(e.A),e.A=null)}function an(e){e.g=new Ne(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=ot(e.qa);ut(t,"RID","rpc"),ut(t,"SID",e.K),ut(t,"AID",e.T),ut(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&ut(t,"TO",e.ja),ut(t,"TYPE","xmlhttp"),Jt(e,t),e.m&&e.o&&Nt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=dt(ot(t)),n.m=null,n.P=!0,Be(n,e)}function on(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function sn(e,t){var n=null;if(e.g==t){on(e),rn(e),e.g=null;var r=2}else{if(!Je(e.h,t))return;n=t.D,tt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var i=e.B;re(r=xe(),new ke(r,n)),Xt(e)}else tn(e);else if(3==(i=t.s)||0==i&&0<t.X||!(1==r&&function(e,t){return!(Ze(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=Ce(c(e.Ga,e,t),ln(e,e.B)),e.B++,!0))}(e,t)||2==r&&nn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:cn(e,5);break;case 4:cn(e,10);break;case 3:cn(e,6);break;default:cn(e,2)}}function ln(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function cn(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new at(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||st(r,"https"),dt(r),t?function(e,t){const n=new Ie;if(i.Image){const r=new Image;r.onload=u(St,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(St,n,"TestLoadImage: error",!1,t,r),r.onabort=u(St,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(St,n,"TestLoadImage: timeout",!1,t,r),i.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Ie;const n=new AbortController,r=setTimeout((()=>{n.abort(),St(0,0,!1,t)}),1e4);fetch(e,{signal:n.signal}).then((e=>{clearTimeout(r),e.ok?St(0,0,!0,t):St(0,0,!1,t)})).catch((()=>{clearTimeout(r),St(0,0,!1,t)}))}(r.toString(),n)}else Se(2);e.G=0,e.l&&e.l.sa(t),un(e),Qt(e)}function un(e){if(e.G=0,e.ka=[],e.l){const t=nt(e.h);0==t.length&&0==e.i.length||(p(e.ka,t),p(e.ka,e.i),e.h.i.length=0,h(e.i),e.i.length=0),e.l.ra()}}function dn(e,t,n){var r=n instanceof at?ot(n):new at(n);if(""!=r.g)t&&(r.g=t+"."+r.g),lt(r,r.s);else{var a=i.location;r=a.protocol,t=t?t+"."+a.hostname:a.hostname,a=+a.port;var o=new at(null);r&&st(o,r),t&&(o.g=t),a&&lt(o,a),n&&(o.l=n),r=o}return n=e.D,t=e.ya,n&&t&&ut(r,n,t),ut(r,"VER",e.la),Jt(e,r),r}function hn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Ot(new It({eb:n})):new Ot(e.pa)).Ha(e.J),t}function pn(){}function fn(){}function mn(e,t){ne.call(this),this.g=new Gt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!f(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!f(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new yn(this)}function gn(e){ye.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function vn(){be.call(this),this.status=1}function yn(e){this.g=e}(e=Ot.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():De.g(),this.v=this.o?me(this.o):me(De),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(sA){return void Ut(this,sA)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var a in r)n.set(a,r[a]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),a=i.FormData&&e instanceof i.FormData,!(0<=Array.prototype.indexOf.call(Ft,t,void 0))||r||a||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,o]of n)this.g.setRequestHeader(i,o);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Wt(this),this.u=!0,this.g.send(e),this.u=!1}catch(sA){Ut(this,sA)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,re(this,"complete"),re(this,"abort"),Vt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Vt(this,!0)),Ot.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?$t(this):this.bb())},e.bb=function(){$t(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<zt(this)?this.g.status:-1}catch(J_){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(J_){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),he(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Gt.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){Se(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=dn(this,null,this.W),Xt(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const i=new Ne(this,this.j,e);let a=this.o;if(this.S&&(a?(a=b(a),E(a,this.S)):a=this.S),null!==this.m||this.O||(i.H=a,a=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=en(this,i,t),ut(n=ot(this.I),"RID",e),ut(n,"CVER",22),this.D&&ut(n,"X-HTTP-Session-Id",this.D),Jt(this,n),a&&(this.O?t="headers="+encodeURIComponent(String(Mt(a)))+"&"+t:this.m&&Nt(n,this.m,a)),et(this.h,i),this.Ua&&ut(n,"TYPE","init"),this.P?(ut(n,"$req",t),ut(n,"SID","null"),i.T=!0,Ue(i,n,null)):Ue(i,n,t),this.G=2}}else 3==this.G&&(e?Zt(this,e):0==this.i.length||Xe(this.h)||Zt(this))},e.Fa=function(){if(this.u=null,an(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Ce(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Se(10),Yt(this),an(this))},e.Za=function(){null!=this.C&&(this.C=null,Yt(this),nn(this),Se(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Se(2)):(this.j.info("Failed to ping google.com"),Se(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=pn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},fn.prototype.g=function(e,t){return new mn(e,t)},d(mn,ne),mn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},mn.prototype.close=function(){Kt(this.g)},mn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=de(e),e=n);t.i.push(new Ye(t.Ya++,e)),3==t.G&&Xt(t)},mn.prototype.N=function(){this.g.l=null,delete this.j,Kt(this.g),delete this.g,mn.aa.N.call(this)},d(gn,ye),d(vn,be),d(yn,pn),yn.prototype.ua=function(){re(this.g,"a")},yn.prototype.ta=function(e){re(this.g,new gn(e))},yn.prototype.sa=function(e){re(this.g,new vn)},yn.prototype.ra=function(){re(this.g,"b")},fn.prototype.createWebChannel=fn.prototype.g,mn.prototype.send=mn.prototype.o,mn.prototype.open=mn.prototype.m,mn.prototype.close=mn.prototype.close,ws=xs.createWebChannelTransport=function(){return new fn},bs=xs.getStatEventTarget=function(){return xe()},ys=xs.Event=we,vs=xs.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Le.NO_ERROR=0,Le.TIMEOUT=8,Le.HTTP_ERROR=6,gs=xs.ErrorCode=Le,Pe.COMPLETE="complete",ms=xs.EventType=Pe,ge.EventType=ve,ve.OPEN="a",ve.CLOSE="b",ve.ERROR="c",ve.MESSAGE="d",ne.prototype.listen=ne.prototype.K,fs=xs.WebChannel=ge,xs.FetchXmlHttpFactory=It,Ot.prototype.listenOnce=Ot.prototype.L,Ot.prototype.getLastError=Ot.prototype.Ka,Ot.prototype.getLastErrorCode=Ot.prototype.Ba,Ot.prototype.getStatus=Ot.prototype.Z,Ot.prototype.getResponseJson=Ot.prototype.Oa,Ot.prototype.getResponseText=Ot.prototype.oa,Ot.prototype.send=Ot.prototype.ea,Ot.prototype.setWithCredentials=Ot.prototype.Ha,ps=xs.XhrIo=Ot}).apply("undefined"!==typeof Es?Es:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const _s="@firebase/firestore",As="4.7.10";class Ts{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ts.UNAUTHENTICATED=new Ts(null),Ts.GOOGLE_CREDENTIALS=new Ts("google-credentials-uid"),Ts.FIRST_PARTY=new Ts("first-party-uid"),Ts.MOCK_USER=new Ts("mock-user");let Ss="11.5.0";const ks=new hn("@firebase/firestore");function Cs(){return ks.logLevel}function Is(e){if(ks.logLevel<=sn.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Ls);ks.debug(`Firestore (${Ss}): ${e}`,...i)}}function Rs(e){if(ks.logLevel<=sn.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Ls);ks.error(`Firestore (${Ss}): ${e}`,...i)}}function Ds(e){if(ks.logLevel<=sn.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Ls);ks.warn(`Firestore (${Ss}): ${e}`,...i)}}function Ls(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(X_){return e}}function Ps(){const e=`FIRESTORE (${Ss}) INTERNAL ASSERTION FAILED: `+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state");throw Rs(e),new Error(e)}function Ms(e,t){e||Ps()}function Ns(e,t){return e}const Os={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class js extends Pt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Fs{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Us{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Bs{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Ts.UNAUTHENTICATED)))}shutdown(){}}class $s{constructor(e){this.t=e,this.currentUser=Ts.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ms(void 0===this.o);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Fs;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Fs,e.enqueueRetryable((()=>r(this.currentUser)))};const a=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{Is("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(Is("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Fs)}}),0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(Is("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Ms("string"==typeof t.accessToken),new Us(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ms(null===e||"string"==typeof e),new Ts(e)}}class Vs{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=Ts.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class Ws{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new Vs(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(Ts.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class zs{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Hs{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,pr(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){Ms(void 0===this.o);const n=e=>{null!=e.error&&Is("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.R;return this.R=e.token,Is("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{Is("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):Is("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.V)return Promise.resolve(new zs(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(Ms("string"==typeof e.token),this.R=e.token,new zs(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function qs(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}function Gs(){return new TextEncoder}class Ks{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=qs(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function Ys(e,t){return e<t?-1:e>t?1:0}function Qs(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=e.codePointAt(n),i=t.codePointAt(n);if(r!==i){if(r<128&&i<128)return Ys(r,i);{const a=Gs(),o=Zs(a.encode(Xs(e,n)),a.encode(Xs(t,n)));return 0!==o?o:Ys(r,i)}}n+=r>65535?2:1}return Ys(e.length,t.length)}function Xs(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function Zs(e,t){for(let n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return Ys(e[n],t[n]);return Ys(e.length,t.length)}function Js(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}const el=-62135596800,tl=1e6;class nl{static now(){return nl.fromMillis(Date.now())}static fromDate(e){return nl.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*tl);return new nl(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new js(Os.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new js(Os.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<el)throw new js(Os.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new js(Os.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/tl}_compareTo(e){return this.seconds===e.seconds?Ys(this.nanoseconds,e.nanoseconds):Ys(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-el;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class rl{static fromTimestamp(e){return new rl(e)}static min(){return new rl(new nl(0,0))}static max(){return new rl(new nl(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const il="__name__";class al{constructor(e,t,n){void 0===t?t=0:t>e.length&&Ps(),void 0===n?n=e.length-t:n>e.length-t&&Ps(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===al.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof al?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=al.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return Ys(e.length,t.length)}static compareSegments(e,t){const n=al.isNumericId(e),r=al.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?al.extractNumericId(e).compare(al.extractNumericId(t)):Qs(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return cs.fromString(e.substring(4,e.length-2))}}class ol extends al{construct(e,t,n){return new ol(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new js(Os.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter((e=>e.length>0)))}return new ol(e)}static emptyPath(){return new ol([])}}const sl=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ll extends al{construct(e,t,n){return new ll(e,t,n)}static isValidIdentifier(e){return sl.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ll.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===il}static keyField(){return new ll([il])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new js(Os.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let a=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new js(Os.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new js(Os.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(a=!a,r++):"."!==t||a?(n+=t,r++):(i(),r++)}if(i(),a)throw new js(Os.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ll(t)}static emptyPath(){return new ll([])}}class cl{constructor(e){this.path=e}static fromPath(e){return new cl(ol.fromString(e))}static fromName(e){return new cl(ol.fromString(e).popFirst(5))}static empty(){return new cl(ol.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ol.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return ol.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new cl(new ol(e.slice()))}}const ul=-1;class dl{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}dl.UNKNOWN_ID=-1;function hl(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=rl.fromTimestamp(1e9===r?new nl(n+1,0):new nl(n,r));return new fl(i,cl.empty(),t)}function pl(e){return new fl(e.readTime,e.key,ul)}class fl{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new fl(rl.min(),cl.empty(),ul)}static max(){return new fl(rl.max(),cl.empty(),ul)}}function ml(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=cl.comparator(e.documentKey,t.documentKey),0!==n?n:Ys(e.largestBatchId,t.largestBatchId))}const gl="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class vl{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function yl(e){if(e.code!==Os.FAILED_PRECONDITION||e.message!==gl)throw e;Is("LocalStore","Unexpectedly lost primary lease")}class bl{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ps(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new bl(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof bl?t:bl.resolve(t)}catch(e){return bl.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):bl.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):bl.reject(t)}static resolve(e){return new bl(((t,n)=>{t(e)}))}static reject(e){return new bl(((t,n)=>{n(e)}))}static waitFor(e){return new bl(((t,n)=>{let r=0,i=0,a=!1;e.forEach((e=>{++r,e.next((()=>{++i,a&&i===r&&t()}),(e=>n(e)))})),a=!0,i===r&&t()}))}static or(e){let t=bl.resolve(!1);for(const n of e)t=t.next((e=>e?bl.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new bl(((n,r)=>{const i=e.length,a=new Array(i);let o=0;for(let s=0;s<i;s++){const l=s;t(e[l]).next((e=>{a[l]=e,++o,o===i&&n(a)}),(e=>r(e)))}}))}static doWhile(e,t){return new bl(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}function wl(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function El(e){return"IndexedDbTransactionError"===e.name}class xl{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.oe(e),this._e=e=>t.writeSequenceNumber(e))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}xl.ae=-1;const _l=-1;function Al(e){return null==e}function Tl(e){return 0===e&&1/e==-1/0}function Sl(e){return"number"==typeof e&&Number.isInteger(e)&&!Tl(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const kl="\x01";function Cl(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Rl(t)),t=Il(e.get(n),t);return Rl(t)}function Il(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case kl:n+="\x01\x11";break;default:n+=t}}return n}function Rl(e){return e+kl+"\x01"}const Dl="remoteDocuments",Ll="owner",Pl="mutationQueues",Ml="mutations";const Nl="documentMutations",Ol="remoteDocumentsV14",jl="remoteDocumentGlobal",Fl="targets",Ul="targetDocuments",Bl="targetGlobal",$l="collectionParents",Vl="clientMetadata",Wl="bundles",zl="namedQueries",Hl="indexConfiguration",ql="indexState",Gl="indexEntries",Kl="documentOverlays",Yl="globals",Ql=[Pl,Ml,Nl,Dl,Fl,Ll,Bl,Ul,Vl,jl,$l,Wl,zl],Xl=[Pl,Ml,Nl,Ol,Fl,Ll,Bl,Ul,Vl,jl,$l,Wl,zl,Kl],Zl=Xl,Jl=[...Zl,Hl,ql,Gl];function ec(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function tc(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function nc(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class rc{constructor(e,t){this.comparator=e,this.root=t||ac.EMPTY}insert(e,t){return new rc(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ac.BLACK,null,null))}remove(e){return new rc(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ac.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ic(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ic(this.root,e,this.comparator,!1)}getReverseIterator(){return new ic(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ic(this.root,e,this.comparator,!0)}}class ic{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ac{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:ac.RED,this.left=null!=r?r:ac.EMPTY,this.right=null!=i?i:ac.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new ac(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ac.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return ac.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ac.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ac.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ps();if(this.right.isRed())throw Ps();const e=this.left.check();if(e!==this.right.check())throw Ps();return e+(this.isRed()?0:1)}}ac.EMPTY=null,ac.RED=!0,ac.BLACK=!1,ac.EMPTY=new class{constructor(){this.size=0}get key(){throw Ps()}get value(){throw Ps()}get color(){throw Ps()}get left(){throw Ps()}get right(){throw Ps()}copy(e,t,n,r,i){return this}insert(e,t,n){return new ac(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class oc{constructor(e){this.comparator=e,this.data=new rc(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new sc(this.data.getIterator())}getIteratorFrom(e){return new sc(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof oc))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new oc(this.comparator);return t.data=e,t}}class sc{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class lc{constructor(e){this.fields=e,e.sort(ll.comparator)}static empty(){return new lc([])}unionWith(e){let t=new oc(ll.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new lc(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Js(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class cc extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class uc{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new cc("Invalid base64 string: "+e):e}}(e);return new uc(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new uc(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ys(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}uc.EMPTY_BYTE_STRING=new uc("");const dc=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function hc(e){if(Ms(!!e),"string"==typeof e){let t=0;const n=dc.exec(e);if(Ms(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:pc(e.seconds),nanos:pc(e.nanos)}}function pc(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function fc(e){return"string"==typeof e?uc.fromBase64String(e):uc.fromUint8Array(e)}const mc="server_timestamp",gc="__type__",vc="__previous_value__",yc="__local_write_time__";function bc(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[gc])||void 0===n?void 0:n.stringValue)===mc}function wc(e){const t=e.mapValue.fields[vc];return bc(t)?wc(t):t}function Ec(e){const t=hc(e.mapValue.fields[yc].timestampValue);return new nl(t.seconds,t.nanos)}class xc{constructor(e,t,n,r,i,a,o,s,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=s,this.useFetchStreams=l}}const _c="(default)";class Ac{constructor(e,t){this.projectId=e,this.database=t||_c}static empty(){return new Ac("","")}get isDefaultDatabase(){return this.database===_c}isEqual(e){return e instanceof Ac&&e.projectId===this.projectId&&e.database===this.database}}const Tc="__type__",Sc="__max__",kc={mapValue:{fields:{__type__:{stringValue:Sc}}}},Cc="__vector__",Ic="value";function Rc(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?bc(e)?4:Gc(e)?9007199254740991:Hc(e)?10:11:Ps()}function Dc(e,t){if(e===t)return!0;const n=Rc(e);if(n!==Rc(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Ec(e).isEqual(Ec(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=hc(e.timestampValue),r=hc(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return fc(e.bytesValue).isEqual(fc(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return pc(e.geoPointValue.latitude)===pc(t.geoPointValue.latitude)&&pc(e.geoPointValue.longitude)===pc(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return pc(e.integerValue)===pc(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=pc(e.doubleValue),r=pc(t.doubleValue);return n===r?Tl(n)===Tl(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Js(e.arrayValue.values||[],t.arrayValue.values||[],Dc);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(ec(n)!==ec(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Dc(n[i],r[i])))return!1;return!0}(e,t);default:return Ps()}}function Lc(e,t){return void 0!==(e.values||[]).find((e=>Dc(e,t)))}function Pc(e,t){if(e===t)return 0;const n=Rc(e),r=Rc(t);if(n!==r)return Ys(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ys(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=pc(e.integerValue||e.doubleValue),r=pc(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Mc(e.timestampValue,t.timestampValue);case 4:return Mc(Ec(e),Ec(t));case 5:return Qs(e.stringValue,t.stringValue);case 6:return function(e,t){const n=fc(e),r=fc(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=Ys(n[i],r[i]);if(0!==e)return e}return Ys(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Ys(pc(e.latitude),pc(t.latitude));return 0!==n?n:Ys(pc(e.longitude),pc(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Nc(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,i,a;const o=e.fields||{},s=t.fields||{},l=null===(n=o[Ic])||void 0===n?void 0:n.arrayValue,c=null===(r=s[Ic])||void 0===r?void 0:r.arrayValue,u=Ys((null===(i=null==l?void 0:l.values)||void 0===i?void 0:i.length)||0,(null===(a=null==c?void 0:c.values)||void 0===a?void 0:a.length)||0);return 0!==u?u:Nc(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===kc.mapValue&&t===kc.mapValue)return 0;if(e===kc.mapValue)return 1;if(t===kc.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(let o=0;o<r.length&&o<a.length;++o){const e=Qs(r[o],a[o]);if(0!==e)return e;const t=Pc(n[r[o]],i[a[o]]);if(0!==t)return t}return Ys(r.length,a.length)}(e.mapValue,t.mapValue);default:throw Ps()}}function Mc(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Ys(e,t);const n=hc(e),r=hc(t),i=Ys(n.seconds,r.seconds);return 0!==i?i:Ys(n.nanos,r.nanos)}function Nc(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Pc(n[i],r[i]);if(e)return e}return Ys(n.length,r.length)}function Oc(e){return jc(e)}function jc(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=hc(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return fc(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return cl.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=jc(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+=`${i}:${jc(e.fields[i])}`;return n+"}"}(e.mapValue):Ps()}function Fc(e){switch(Rc(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=wc(e);return t?16+Fc(t):16;case 5:return 2*e.stringValue.length;case 6:return fc(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce(((e,t)=>e+Fc(t)),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return tc(e.fields,((e,n)=>{t+=e.length+Fc(n)})),t}(e.mapValue);default:throw Ps()}}function Uc(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Bc(e){return!!e&&"integerValue"in e}function $c(e){return!!e&&"arrayValue"in e}function Vc(e){return!!e&&"nullValue"in e}function Wc(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function zc(e){return!!e&&"mapValue"in e}function Hc(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[Tc])||void 0===n?void 0:n.stringValue)===Cc}function qc(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return tc(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=qc(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=qc(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Gc(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===Sc}class Kc{constructor(e){this.value=e}static empty(){return new Kc({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!zc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=qc(t)}setAll(e){let t=ll.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=qc(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());zc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Dc(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];zc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){tc(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new Kc(qc(this.value))}}function Yc(e){const t=[];return tc(e.fields,((e,n)=>{const r=new ll([e]);if(zc(n)){const e=Yc(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new lc(t)}class Qc{constructor(e,t,n,r,i,a,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=a,this.documentState=o}static newInvalidDocument(e){return new Qc(e,0,rl.min(),rl.min(),rl.min(),Kc.empty(),0)}static newFoundDocument(e,t,n,r){return new Qc(e,1,t,rl.min(),n,r,0)}static newNoDocument(e,t){return new Qc(e,2,t,rl.min(),rl.min(),Kc.empty(),0)}static newUnknownDocument(e,t){return new Qc(e,3,t,rl.min(),rl.min(),Kc.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(rl.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Kc.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Kc.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=rl.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Qc&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Qc(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Xc{constructor(e,t){this.position=e,this.inclusive=t}}function Zc(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const a=t[i],o=e.position[i];if(r=a.field.isKeyField()?cl.comparator(cl.fromName(o.referenceValue),n.key):Pc(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function Jc(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Dc(e.position[n],t.position[n]))return!1;return!0}class eu{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function tu(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class nu{}class ru extends nu{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new du(e,t,n):"array-contains"===t?new mu(e,n):"in"===t?new gu(e,n):"not-in"===t?new vu(e,n):"array-contains-any"===t?new yu(e,n):new ru(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new hu(e,n):new pu(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Pc(t,this.value)):null!==t&&Rc(this.value)===Rc(t)&&this.matchesComparison(Pc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ps()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class iu extends nu{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new iu(e,t)}matches(e){return au(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ce||(this.ce=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function au(e){return"and"===e.op}function ou(e){return su(e)&&au(e)}function su(e){for(const t of e.filters)if(t instanceof iu)return!1;return!0}function lu(e){if(e instanceof ru)return e.field.canonicalString()+e.op.toString()+Oc(e.value);if(ou(e))return e.filters.map((e=>lu(e))).join(",");{const t=e.filters.map((e=>lu(e))).join(",");return`${e.op}(${t})`}}function cu(e,t){return e instanceof ru?function(e,t){return t instanceof ru&&e.op===t.op&&e.field.isEqual(t.field)&&Dc(e.value,t.value)}(e,t):e instanceof iu?function(e,t){return t instanceof iu&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&cu(n,t.filters[r])),!0)}(e,t):void Ps()}function uu(e){return e instanceof ru?function(e){return`${e.field.canonicalString()} ${e.op} ${Oc(e.value)}`}(e):e instanceof iu?function(e){return e.op.toString()+" {"+e.getFilters().map(uu).join(" ,")+"}"}(e):"Filter"}class du extends ru{constructor(e,t,n){super(e,t,n),this.key=cl.fromName(n.referenceValue)}matches(e){const t=cl.comparator(e.key,this.key);return this.matchesComparison(t)}}class hu extends ru{constructor(e,t){super(e,"in",t),this.keys=fu("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class pu extends ru{constructor(e,t){super(e,"not-in",t),this.keys=fu("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function fu(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>cl.fromName(e.referenceValue)))}class mu extends ru{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return $c(t)&&Lc(t.arrayValue,this.value)}}class gu extends ru{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Lc(this.value.arrayValue,t)}}class vu extends ru{constructor(e,t){super(e,"not-in",t)}matches(e){if(Lc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Lc(this.value.arrayValue,t)}}class yu extends ru{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!$c(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>Lc(this.value.arrayValue,e)))}}class bu{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=a,this.endAt=o,this.le=null}}function wu(e){return new bu(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Eu(e){const t=Ns(e);if(null===t.le){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>lu(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),Al(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>Oc(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>Oc(e))).join(",")),t.le=e}return t.le}function xu(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!tu(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!cu(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Jc(e.startAt,t.startAt)&&Jc(e.endAt,t.endAt)}function _u(e){return cl.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Au{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=a,this.startAt=o,this.endAt=s,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function Tu(e,t,n,r,i,a,o,s){return new Au(e,t,n,r,i,a,o,s)}function Su(e){return new Au(e)}function ku(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Cu(e){return null!==e.collectionGroup}function Iu(e){const t=Ns(e);if(null===t.he){t.he=[];const e=new Set;for(const i of t.explicitOrderBy)t.he.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new oc(ll.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.he.push(new eu(r,n))})),e.has(ll.keyField().canonicalString())||t.he.push(new eu(ll.keyField(),n))}return t.he}function Ru(e){const t=Ns(e);return t.Pe||(t.Pe=Du(t,Iu(e))),t.Pe}function Du(e,t){if("F"===e.limitType)return wu(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new eu(e.field,t)}));const n=e.endAt?new Xc(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Xc(e.startAt.position,e.startAt.inclusive):null;return wu(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Lu(e,t){const n=e.filters.concat([t]);return new Au(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Pu(e,t,n){return new Au(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Mu(e,t){return xu(Ru(e),Ru(t))&&e.limitType===t.limitType}function Nu(e){return`${Eu(Ru(e))}|lt:${e.limitType}`}function Ou(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((e=>uu(e))).join(", ")}]`),Al(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e))).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>Oc(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>Oc(e))).join(",")),`Target(${t})`}(Ru(e))}; limitType=${e.limitType})`}function ju(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):cl.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Iu(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=Zc(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Iu(e),t))&&!(e.endAt&&!function(e,t,n){const r=Zc(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Iu(e),t))}(e,t)}function Fu(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Uu(e){return(t,n)=>{let r=!1;for(const i of Iu(e)){const e=Bu(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Bu(e,t,n){const r=e.field.isKeyField()?cl.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Pc(r,i):Ps()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Ps()}}class $u{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){tc(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return nc(this.inner)}size(){return this.innerSize}}const Vu=new rc(cl.comparator);function Wu(){return Vu}const zu=new rc(cl.comparator);function Hu(){let e=zu;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function qu(e){let t=zu;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function Gu(){return Yu()}function Ku(){return Yu()}function Yu(){return new $u((e=>e.toString()),((e,t)=>e.isEqual(t)))}const Qu=new rc(cl.comparator),Xu=new oc(cl.comparator);function Zu(){let e=Xu;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const Ju=new oc(Ys);function ed(){return Ju}function td(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Tl(t)?"-0":t}}function nd(e){return{integerValue:""+e}}function rd(e,t){return Sl(t)?nd(t):td(e,t)}class id{constructor(){this._=void 0}}function ad(e,t,n){return e instanceof ld?function(e,t){const n={fields:{[gc]:{stringValue:mc},[yc]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&bc(t)&&(t=wc(t)),t&&(n.fields[vc]=t),{mapValue:n}}(n,t):e instanceof cd?ud(e,t):e instanceof dd?hd(e,t):function(e,t){const n=sd(e,t),r=fd(n)+fd(e.Ie);return Bc(n)&&Bc(e.Ie)?nd(r):td(e.serializer,r)}(e,t)}function od(e,t,n){return e instanceof cd?ud(e,t):e instanceof dd?hd(e,t):n}function sd(e,t){return e instanceof pd?function(e){return Bc(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class ld extends id{}class cd extends id{constructor(e){super(),this.elements=e}}function ud(e,t){const n=md(t);for(const r of e.elements)n.some((e=>Dc(e,r)))||n.push(r);return{arrayValue:{values:n}}}class dd extends id{constructor(e){super(),this.elements=e}}function hd(e,t){let n=md(t);for(const r of e.elements)n=n.filter((e=>!Dc(e,r)));return{arrayValue:{values:n}}}class pd extends id{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function fd(e){return pc(e.integerValue||e.doubleValue)}function md(e){return $c(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class gd{constructor(e,t){this.field=e,this.transform=t}}class vd{constructor(e,t){this.version=e,this.transformResults=t}}class yd{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new yd}static exists(e){return new yd(void 0,e)}static updateTime(e){return new yd(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function bd(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class wd{}function Ed(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Dd(e.key,yd.none()):new Sd(e.key,e.data,yd.none());{const n=e.data,r=Kc.empty();let i=new oc(ll.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new kd(e.key,r,new lc(i.toArray()),yd.none())}}function xd(e,t,n){e instanceof Sd?function(e,t,n){const r=e.value.clone(),i=Id(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof kd?function(e,t,n){if(!bd(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Id(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Cd(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function _d(e,t,n,r){return e instanceof Sd?function(e,t,n,r){if(!bd(e.precondition,t))return n;const i=e.value.clone(),a=Rd(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof kd?function(e,t,n,r){if(!bd(e.precondition,t))return n;const i=Rd(e.fieldTransforms,r,t),a=t.data;return a.setAll(Cd(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return bd(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Ad(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=sd(r.transform,e||null);null!=i&&(null===n&&(n=Kc.empty()),n.set(r.field,i))}return n||null}function Td(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Js(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof cd&&t instanceof cd||e instanceof dd&&t instanceof dd?Js(e.elements,t.elements,Dc):e instanceof pd&&t instanceof pd?Dc(e.Ie,t.Ie):e instanceof ld&&t instanceof ld}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Sd extends wd{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class kd extends wd{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Cd(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function Id(e,t,n){const r=new Map;Ms(e.length===n.length);for(let i=0;i<n.length;i++){const a=e[i],o=a.transform,s=t.data.field(a.field);r.set(a.field,od(o,s,n[i]))}return r}function Rd(e,t,n){const r=new Map;for(const i of e){const e=i.transform,a=n.data.field(i.field);r.set(i.field,ad(e,a,t))}return r}class Dd extends wd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ld extends wd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Pd{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&xd(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=_d(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=_d(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Ku();return this.mutations.forEach((r=>{const i=e.get(r.key),a=i.overlayedDocument;let o=this.applyToLocalView(a,i.mutatedFields);o=t.has(r.key)?null:o;const s=Ed(a,o);null!==s&&n.set(r.key,s),a.isValidDocument()||a.convertToNoDocument(rl.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Zu())}isEqual(e){return this.batchId===e.batchId&&Js(this.mutations,e.mutations,((e,t)=>Td(e,t)))&&Js(this.baseMutations,e.baseMutations,((e,t)=>Td(e,t)))}}class Md{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Ms(e.mutations.length===n.length);let r=Qu;const i=e.mutations;for(let a=0;a<i.length;a++)r=r.insert(i[a].key,n[a].version);return new Md(e,t,n,r)}}class Nd{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Od{constructor(e,t){this.count=e,this.unchangedNames=t}}var jd,Fd;function Ud(e){switch(e){case Os.OK:return Ps();case Os.CANCELLED:case Os.UNKNOWN:case Os.DEADLINE_EXCEEDED:case Os.RESOURCE_EXHAUSTED:case Os.INTERNAL:case Os.UNAVAILABLE:case Os.UNAUTHENTICATED:return!1;case Os.INVALID_ARGUMENT:case Os.NOT_FOUND:case Os.ALREADY_EXISTS:case Os.PERMISSION_DENIED:case Os.FAILED_PRECONDITION:case Os.ABORTED:case Os.OUT_OF_RANGE:case Os.UNIMPLEMENTED:case Os.DATA_LOSS:return!0;default:return Ps()}}function Bd(e){if(void 0===e)return Rs("GRPC error has no .code"),Os.UNKNOWN;switch(e){case jd.OK:return Os.OK;case jd.CANCELLED:return Os.CANCELLED;case jd.UNKNOWN:return Os.UNKNOWN;case jd.DEADLINE_EXCEEDED:return Os.DEADLINE_EXCEEDED;case jd.RESOURCE_EXHAUSTED:return Os.RESOURCE_EXHAUSTED;case jd.INTERNAL:return Os.INTERNAL;case jd.UNAVAILABLE:return Os.UNAVAILABLE;case jd.UNAUTHENTICATED:return Os.UNAUTHENTICATED;case jd.INVALID_ARGUMENT:return Os.INVALID_ARGUMENT;case jd.NOT_FOUND:return Os.NOT_FOUND;case jd.ALREADY_EXISTS:return Os.ALREADY_EXISTS;case jd.PERMISSION_DENIED:return Os.PERMISSION_DENIED;case jd.FAILED_PRECONDITION:return Os.FAILED_PRECONDITION;case jd.ABORTED:return Os.ABORTED;case jd.OUT_OF_RANGE:return Os.OUT_OF_RANGE;case jd.UNIMPLEMENTED:return Os.UNIMPLEMENTED;case jd.DATA_LOSS:return Os.DATA_LOSS;default:return Ps()}}(Fd=jd||(jd={}))[Fd.OK=0]="OK",Fd[Fd.CANCELLED=1]="CANCELLED",Fd[Fd.UNKNOWN=2]="UNKNOWN",Fd[Fd.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Fd[Fd.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Fd[Fd.NOT_FOUND=5]="NOT_FOUND",Fd[Fd.ALREADY_EXISTS=6]="ALREADY_EXISTS",Fd[Fd.PERMISSION_DENIED=7]="PERMISSION_DENIED",Fd[Fd.UNAUTHENTICATED=16]="UNAUTHENTICATED",Fd[Fd.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Fd[Fd.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Fd[Fd.ABORTED=10]="ABORTED",Fd[Fd.OUT_OF_RANGE=11]="OUT_OF_RANGE",Fd[Fd.UNIMPLEMENTED=12]="UNIMPLEMENTED",Fd[Fd.INTERNAL=13]="INTERNAL",Fd[Fd.UNAVAILABLE=14]="UNAVAILABLE",Fd[Fd.DATA_LOSS=15]="DATA_LOSS";let $d=null;const Vd=new cs([4294967295,4294967295],0);function Wd(e){const t=Gs().encode(e),n=new us;return n.update(t),new Uint8Array(n.digest())}function zd(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new cs([n,r],0),new cs([i,a],0)]}class Hd{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new qd(`Invalid padding: ${t}`);if(n<0)throw new qd(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new qd(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new qd(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=cs.fromNumber(this.Ee)}Ae(e,t,n){let r=e.add(t.multiply(cs.fromNumber(n)));return 1===r.compare(Vd)&&(r=new cs([r.getBits(0),r.getBits(1)],0)),r.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ee)return!1;const t=Wd(e),[n,r]=zd(t);for(let i=0;i<this.hashCount;i++){const e=this.Ae(n,r,i);if(!this.Re(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new Hd(i,r,t);return n.forEach((e=>a.insert(e))),a}insert(e){if(0===this.Ee)return;const t=Wd(e),[n,r]=zd(t);for(let i=0;i<this.hashCount;i++){const e=this.Ae(n,r,i);this.Ve(e)}}Ve(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class qd extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Gd{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Kd.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Gd(rl.min(),r,new rc(Ys),Wu(),Zu())}}class Kd{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Kd(n,t,Zu(),Zu(),Zu())}}class Yd{constructor(e,t,n,r){this.me=e,this.removedTargetIds=t,this.key=n,this.fe=r}}class Qd{constructor(e,t){this.targetId=e,this.ge=t}}class Xd{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:uc.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Zd{constructor(){this.pe=0,this.ye=th(),this.we=uc.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return 0!==this.pe}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=Zu(),t=Zu(),n=Zu();return this.ye.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Ps()}})),new Kd(this.we,this.Se,e,t,n)}Me(){this.be=!1,this.ye=th()}xe(e,t){this.be=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,Ms(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class Jd{constructor(e){this.ke=e,this.qe=new Map,this.Qe=Wu(),this.$e=eh(),this.Ue=eh(),this.Ke=new rc(Ys)}We(e){for(const t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(const t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,(t=>{const n=this.He(t);switch(e.state){case 0:this.Je(t)&&n.Ce(e.resumeToken);break;case 1:n.Be(),n.De||n.Me(),n.Ce(e.resumeToken);break;case 2:n.Be(),n.De||this.removeTarget(t);break;case 3:this.Je(t)&&(n.Le(),n.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),n.Ce(e.resumeToken));break;default:Ps()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach(((e,n)=>{this.Je(n)&&t(n)}))}Ze(e){const t=e.targetId,n=e.ge.count,r=this.Xe(t);if(r){const i=r.target;if(_u(i))if(0===n){const e=new cl(i.path);this.ze(t,e,Qc.newNoDocument(e,rl.min()))}else Ms(1===n);else{const r=this.et(t);if(r!==n){const n=this.tt(e),i=n?this.nt(n,e,r):1;if(0!==i){this.Ye(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,e)}null==$d||$d.rt(function(e,t,n,r,i){var a,o,s,l,c,u;const d={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},h=t.unchangedNames;return h&&(d.bloomFilter={applied:0===i,hashCount:null!==(a=null==h?void 0:h.hashCount)&&void 0!==a?a:0,bitmapLength:null!==(l=null===(s=null===(o=null==h?void 0:h.bits)||void 0===o?void 0:o.bitmap)||void 0===s?void 0:s.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==h?void 0:h.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),d}(r,e.ge,this.ke.it(),n,i))}}}}tt(e){const t=e.ge.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let a,o;try{a=fc(n).toUint8Array()}catch(e){if(e instanceof cc)return Ds("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new Hd(a,r,i)}catch(e){return Ds(e instanceof qd?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.Ee?null:o}nt(e,t,n){return t.ge.count===n-this.st(e,t.targetId)?0:2}st(e,t){const n=this.ke.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.ke.it(),a=`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;e.mightContain(a)||(this.ze(t,n,null),r++)})),r}ot(e){const t=new Map;this.qe.forEach(((n,r)=>{const i=this.Xe(r);if(i){if(n.current&&_u(i.target)){const t=new cl(i.target.path);this._t(t).has(r)||this.ut(r,t)||this.ze(r,t,Qc.newNoDocument(t,e))}n.ve&&(t.set(r,n.Fe()),n.Me())}}));let n=Zu();this.Ue.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Xe(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.Qe.forEach(((t,n)=>n.setReadTime(e)));const r=new Gd(e,t,this.Ke,this.Qe,n);return this.Qe=Wu(),this.$e=eh(),this.Ue=eh(),this.Ke=new rc(Ys),r}Ge(e,t){if(!this.Je(e))return;const n=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,n),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ue=this.Ue.insert(t.key,this.ct(t.key).add(e))}ze(e,t,n){if(!this.Je(e))return;const r=this.He(e);this.ut(e,t)?r.xe(t,1):r.Oe(t),this.Ue=this.Ue.insert(t,this.ct(t).delete(e)),this.Ue=this.Ue.insert(t,this.ct(t).add(e)),n&&(this.Qe=this.Qe.insert(t,n))}removeTarget(e){this.qe.delete(e)}et(e){const t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new Zd,this.qe.set(e,t)),t}ct(e){let t=this.Ue.get(e);return t||(t=new oc(Ys),this.Ue=this.Ue.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new oc(Ys),this.$e=this.$e.insert(e,t)),t}Je(e){const t=null!==this.Xe(e);return t||Is("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new Zd),this.ke.getRemoteKeysForTarget(e).forEach((t=>{this.ze(e,t,null)}))}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}}function eh(){return new rc(cl.comparator)}function th(){return new rc(cl.comparator)}const nh={asc:"ASCENDING",desc:"DESCENDING"},rh={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ih={and:"AND",or:"OR"};class ah{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function oh(e,t){return e.useProto3Json||Al(t)?t:{value:t}}function sh(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function lh(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function ch(e,t){return sh(e,t.toTimestamp())}function uh(e){return Ms(!!e),rl.fromTimestamp(function(e){const t=hc(e);return new nl(t.seconds,t.nanos)}(e))}function dh(e,t){return hh(e,t).canonicalString()}function hh(e,t){const n=function(e){return new ol(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function ph(e){const t=ol.fromString(e);return Ms(Ph(t)),t}function fh(e,t){return dh(e.databaseId,t.path)}function mh(e,t){const n=ph(t);if(n.get(1)!==e.databaseId.projectId)throw new js(Os.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new js(Os.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new cl(bh(n))}function gh(e,t){return dh(e.databaseId,t)}function vh(e){const t=ph(e);return 4===t.length?ol.emptyPath():bh(t)}function yh(e){return new ol(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function bh(e){return Ms(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function wh(e,t,n){return{name:fh(e,t),fields:n.value.mapValue.fields}}function Eh(e,t){let n;if(t instanceof Sd)n={update:wh(e,t.key,t.value)};else if(t instanceof Dd)n={delete:fh(e,t.key)};else if(t instanceof kd)n={update:wh(e,t.key,t.data),updateMask:Lh(t.fieldMask)};else{if(!(t instanceof Ld))return Ps();n={verify:fh(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof ld)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof cd)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof dd)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof pd)return{fieldPath:t.field.canonicalString(),increment:n.Ie};throw Ps()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:ch(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Ps()}(e,t.precondition)),n}function xh(e,t){return{documents:[gh(e,t.path)]}}function _h(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=gh(e,i);const a=function(e){if(0!==e.length)return Dh(iu.create(e,"and"))}(t.filters);a&&(n.structuredQuery.where=a);const o=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:Ih(e.field),direction:Sh(e.dir)}}(e)))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const s=oh(e,t.limit);return null!==s&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ht:n,parent:i}}function Ah(e){let t=vh(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ms(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let a=[];n.where&&(a=function(e){const t=Th(e);return t instanceof iu&&ou(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map((e=>function(e){return new eu(Rh(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let s=null;n.limit&&(s=function(e){let t;return t="object"==typeof e?e.value:e,Al(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Xc(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new Xc(n,t)}(n.endAt)),Tu(t,i,o,a,s,"F",l,c)}function Th(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Rh(e.unaryFilter.field);return ru.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Rh(e.unaryFilter.field);return ru.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Rh(e.unaryFilter.field);return ru.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Rh(e.unaryFilter.field);return ru.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Ps()}}(e):void 0!==e.fieldFilter?function(e){return ru.create(Rh(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ps()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return iu.create(e.compositeFilter.filters.map((e=>Th(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Ps()}}(e.compositeFilter.op))}(e):Ps()}function Sh(e){return nh[e]}function kh(e){return rh[e]}function Ch(e){return ih[e]}function Ih(e){return{fieldPath:e.canonicalString()}}function Rh(e){return ll.fromServerFormat(e.fieldPath)}function Dh(e){return e instanceof ru?function(e){if("=="===e.op){if(Wc(e.value))return{unaryFilter:{field:Ih(e.field),op:"IS_NAN"}};if(Vc(e.value))return{unaryFilter:{field:Ih(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Wc(e.value))return{unaryFilter:{field:Ih(e.field),op:"IS_NOT_NAN"}};if(Vc(e.value))return{unaryFilter:{field:Ih(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ih(e.field),op:kh(e.op),value:e.value}}}(e):e instanceof iu?function(e){const t=e.getFilters().map((e=>Dh(e)));return 1===t.length?t[0]:{compositeFilter:{op:Ch(e.op),filters:t}}}(e):Ps()}function Lh(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function Ph(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Mh{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:rl.min(),a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:rl.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:uc.EMPTY_BYTE_STRING,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=s}withSequenceNumber(e){return new Mh(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Mh(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Mh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Mh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Nh{constructor(e){this.Tt=e}}function Oh(e){const t=Ah({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Pu(t,t.limit,"L"):t}class jh{constructor(){}At(e,t){this.Rt(e,t),t.Vt()}Rt(e,t){if("nullValue"in e)this.ft(t,5);else if("booleanValue"in e)this.ft(t,10),t.gt(e.booleanValue?1:0);else if("integerValue"in e)this.ft(t,15),t.gt(pc(e.integerValue));else if("doubleValue"in e){const n=pc(e.doubleValue);isNaN(n)?this.ft(t,13):(this.ft(t,15),Tl(n)?t.gt(0):t.gt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.ft(t,20),"string"==typeof n&&(n=hc(n)),t.yt(`${n.seconds||""}`),t.gt(n.nanos||0)}else if("stringValue"in e)this.wt(e.stringValue,t),this.St(t);else if("bytesValue"in e)this.ft(t,30),t.bt(fc(e.bytesValue)),this.St(t);else if("referenceValue"in e)this.Dt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.ft(t,45),t.gt(n.latitude||0),t.gt(n.longitude||0)}else"mapValue"in e?Gc(e)?this.ft(t,Number.MAX_SAFE_INTEGER):Hc(e)?this.vt(e.mapValue,t):(this.Ct(e.mapValue,t),this.St(t)):"arrayValue"in e?(this.Ft(e.arrayValue,t),this.St(t)):Ps()}wt(e,t){this.ft(t,25),this.Mt(e,t)}Mt(e,t){t.yt(e)}Ct(e,t){const n=e.fields||{};this.ft(t,55);for(const r of Object.keys(n))this.wt(r,t),this.Rt(n[r],t)}vt(e,t){var n,r;const i=e.fields||{};this.ft(t,53);const a=Ic,o=(null===(r=null===(n=i[a].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.length)||0;this.ft(t,15),t.gt(pc(o)),this.wt(a,t),this.Rt(i[a],t)}Ft(e,t){const n=e.values||[];this.ft(t,50);for(const r of n)this.Rt(r,t)}Dt(e,t){this.ft(t,37),cl.fromName(e).path.forEach((e=>{this.ft(t,60),this.Mt(e,t)}))}ft(e,t){e.gt(t)}St(e){e.gt(2)}}jh.xt=new jh;class Fh{constructor(){this.Tn=new Uh}addToCollectionParentIndex(e,t){return this.Tn.add(t),bl.resolve()}getCollectionParents(e,t){return bl.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return bl.resolve()}deleteFieldIndex(e,t){return bl.resolve()}deleteAllFieldIndexes(e){return bl.resolve()}createTargetIndexes(e,t){return bl.resolve()}getDocumentsMatchingTarget(e,t){return bl.resolve(null)}getIndexType(e,t){return bl.resolve(0)}getFieldIndexes(e,t){return bl.resolve([])}getNextCollectionGroupToUpdate(e){return bl.resolve(null)}getMinOffset(e,t){return bl.resolve(fl.min())}getMinOffsetFromCollectionGroup(e,t){return bl.resolve(fl.min())}updateCollectionGroup(e,t,n){return bl.resolve()}updateIndexEntries(e,t){return bl.resolve()}}class Uh{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new oc(ol.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new oc(ol.comparator)).toArray()}}new Uint8Array(0);const Bh={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},$h=41943040;class Vh{static withCacheSize(e){return new Vh(e,Vh.DEFAULT_COLLECTION_PERCENTILE,Vh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}Vh.DEFAULT_COLLECTION_PERCENTILE=10,Vh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vh.DEFAULT=new Vh($h,Vh.DEFAULT_COLLECTION_PERCENTILE,Vh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vh.DISABLED=new Vh(-1,0,0);class Wh{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Un(){return new Wh(0)}static Kn(){return new Wh(-1)}}const zh="LruGarbageCollector",Hh=1048576;function qh(e,t){let[n,r]=e,[i,a]=t;const o=Ys(n,i);return 0===o?Ys(r,a):o}class Gh{constructor(e){this.Hn=e,this.buffer=new oc(qh),this.Jn=0}Yn(){return++this.Jn}Zn(e){const t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();qh(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Kh{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Xn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return null!==this.Xn}er(e){Is(zh,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){El(e)?Is(zh,"Ignoring IndexedDB error during garbage collection: ",e):await yl(e)}await this.er(3e5)}))}}class Yh{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return bl.resolve(xl.ae);const n=new Gh(t);return this.tr.forEachTarget(e,(e=>n.Zn(e.sequenceNumber))).next((()=>this.tr.rr(e,(e=>n.Zn(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.tr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Is("LruGarbageCollector","Garbage collection skipped; disabled"),bl.resolve(Bh)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(Is("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Bh):this.ir(e,t)))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let n,r,i,a,o,s,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(Is("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,o=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,s=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(l=Date.now(),Cs()<=sn.DEBUG&&Is("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${a-c}ms\n\tDetermined least recently used ${r} in `+(o-a)+"ms\n"+`\tRemoved ${i} targets in `+(s-o)+"ms\n"+`\tRemoved ${e} documents in `+(l-s)+"ms\n"+`Total Duration: ${l-c}ms`),bl.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}function Qh(e,t){return new Yh(e,t)}class Xh{constructor(){this.changes=new $u((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Qc.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?bl.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Zh{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Jh{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&_d(n.mutation,e,lc.empty(),nl.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,Zu()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Zu();const r=Gu();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=Hu();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=Gu();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Zu())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=Wu();const a=Yu(),o=Yu();return t.forEach(((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof kd)?i=i.insert(t.key,t):void 0!==o?(a.set(t.key,o.mutation.getFieldMask()),_d(o.mutation,t,o.mutation.getFieldMask(),nl.now())):a.set(t.key,lc.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>a.set(e,t))),t.forEach(((e,t)=>{var n;return o.set(e,new Zh(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(e,t){const n=Yu();let r=new rc(((e,t)=>e-t)),i=Zu();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const a=t.get(e);if(null===a)return;let o=n.get(e)||lc.empty();o=i.applyToLocalView(a,o),n.set(e,o);const s=(r.get(i.batchId)||Zu()).add(e);r=r.insert(i.batchId,s)}))})).next((()=>{const a=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),s=r.key,l=r.value,c=Ku();l.forEach((e=>{if(!i.has(e)){const r=Ed(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}})),a.push(this.documentOverlayCache.saveOverlays(e,s,c))}return bl.waitFor(a)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return cl.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Cu(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const a=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):bl.resolve(Gu());let o=ul,s=i;return a.next((t=>bl.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?bl.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{s=s.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,s,t,Zu()))).next((e=>({batchId:o,changes:qu(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new cl(t)).next((e=>{let t=Hu();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let a=Hu();return this.indexManager.getCollectionParents(e,i).next((o=>bl.forEach(o,(o=>{const s=function(e,t){return new Au(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,s,n,r).next((e=>{e.forEach(((e,t)=>{a=a.insert(e,t)}))}))})).next((()=>a))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Qc.newInvalidDocument(r)))}));let n=Hu();return e.forEach(((e,r)=>{const a=i.get(e);void 0!==a&&_d(a.mutation,r,lc.empty(),nl.now()),ju(t,r)&&(n=n.insert(e,r))})),n}))}}class ep{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return bl.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:uh(e.createTime)}}(t)),bl.resolve()}getNamedQuery(e,t){return bl.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(e){return{name:e.name,query:Oh(e.bundledQuery),readTime:uh(e.readTime)}}(t)),bl.resolve()}}class tp{constructor(){this.overlays=new rc(cl.comparator),this.Rr=new Map}getOverlay(e,t){return bl.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Gu();return bl.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.Et(e,t,r)})),bl.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Rr.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.Rr.delete(n)),bl.resolve()}getOverlaysForCollection(e,t,n){const r=Gu(),i=t.length+1,a=new cl(t.child("")),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){const e=o.getNext().value,a=e.getKey();if(!t.isPrefixOf(a.path))break;a.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return bl.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new rc(((e,t)=>e-t));const a=this.overlays.getIterator();for(;a.hasNext();){const e=a.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=Gu(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=Gu(),s=i.getIterator();for(;s.hasNext()&&(s.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return bl.resolve(o)}Et(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.Rr.get(r.largestBatchId).delete(n.key);this.Rr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Nd(t,n));let i=this.Rr.get(t);void 0===i&&(i=Zu(),this.Rr.set(t,i)),this.Rr.set(t,i.add(n.key))}}class np{constructor(){this.sessionToken=uc.EMPTY_BYTE_STRING}getSessionToken(e){return bl.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,bl.resolve()}}class rp{constructor(){this.Vr=new oc(ip.mr),this.gr=new oc(ip.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){const n=new ip(e,t);this.Vr=this.Vr.add(n),this.gr=this.gr.add(n)}yr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.wr(new ip(e,t))}Sr(e,t){e.forEach((e=>this.removeReference(e,t)))}br(e){const t=new cl(new ol([])),n=new ip(t,e),r=new ip(t,e+1),i=[];return this.gr.forEachInRange([n,r],(e=>{this.wr(e),i.push(e.key)})),i}Dr(){this.Vr.forEach((e=>this.wr(e)))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const t=new cl(new ol([])),n=new ip(t,e),r=new ip(t,e+1);let i=Zu();return this.gr.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new ip(e,0),n=this.Vr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class ip{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return cl.comparator(e.key,t.key)||Ys(e.Cr,t.Cr)}static pr(e,t){return Ys(e.Cr,t.Cr)||cl.comparator(e.key,t.key)}}class ap{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new oc(ip.mr)}checkEmpty(e){return bl.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new Pd(i,t,n,r);this.mutationQueue.push(a);for(const o of r)this.Mr=this.Mr.add(new ip(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return bl.resolve(a)}lookupMutationBatch(e,t){return bl.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.Nr(n),i=r<0?0:r;return bl.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return bl.resolve(0===this.mutationQueue.length?_l:this.Fr-1)}getAllMutationBatches(e){return bl.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new ip(t,0),r=new ip(t,Number.POSITIVE_INFINITY),i=[];return this.Mr.forEachInRange([n,r],(e=>{const t=this.Or(e.Cr);i.push(t)})),bl.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new oc(Ys);return t.forEach((e=>{const t=new ip(e,0),r=new ip(e,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([t,r],(e=>{n=n.add(e.Cr)}))})),bl.resolve(this.Br(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;cl.isDocumentKey(i)||(i=i.child(""));const a=new ip(new cl(i),0);let o=new oc(Ys);return this.Mr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Cr)),!0)}),a),bl.resolve(this.Br(o))}Br(e){const t=[];return e.forEach((e=>{const n=this.Or(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){Ms(0===this.Lr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.Mr;return bl.forEach(t.mutations,(r=>{const i=new ip(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Mr=n}))}qn(e){}containsKey(e,t){const n=new ip(t,0),r=this.Mr.firstAfterOrEqual(n);return bl.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,bl.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Or(e){const t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class op{constructor(e){this.kr=e,this.docs=new rc(cl.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.kr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return bl.resolve(n?n.document.mutableCopy():Qc.newInvalidDocument(t))}getEntries(e,t){let n=Wu();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Qc.newInvalidDocument(e))})),bl.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Wu();const a=t.path,o=new cl(a.child("__id-9223372036854775808__")),s=this.docs.getIteratorFrom(o);for(;s.hasNext();){const{key:e,value:{document:o}}=s.getNext();if(!a.isPrefixOf(e.path))break;e.path.length>a.length+1||ml(pl(o),n)<=0||(r.has(o.key)||ju(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return bl.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Ps()}qr(e,t){return bl.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new sp(this)}getSize(e){return bl.resolve(this.size)}}class sp extends Xh{constructor(e){super(),this.Ir=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.Ir.addEntry(e,r)):this.Ir.removeEntry(n)})),bl.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}}class lp{constructor(e){this.persistence=e,this.Qr=new $u((e=>Eu(e)),xu),this.lastRemoteSnapshotVersion=rl.min(),this.highestTargetId=0,this.$r=0,this.Ur=new rp,this.targetCount=0,this.Kr=Wh.Un()}forEachTarget(e,t){return this.Qr.forEach(((e,n)=>t(n))),bl.resolve()}getLastRemoteSnapshotVersion(e){return bl.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return bl.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Kr.next(),bl.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.$r&&(this.$r=t),bl.resolve()}zn(e){this.Qr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Kr=new Wh(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,bl.resolve()}updateTargetData(e,t){return this.zn(t),bl.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Ur.br(t.targetId),this.targetCount-=1,bl.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Qr.forEach(((a,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Qr.delete(a),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),bl.waitFor(i).next((()=>r))}getTargetCount(e){return bl.resolve(this.targetCount)}getTargetData(e,t){const n=this.Qr.get(t)||null;return bl.resolve(n)}addMatchingKeys(e,t,n){return this.Ur.yr(t,n),bl.resolve()}removeMatchingKeys(e,t,n){this.Ur.Sr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),bl.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Ur.br(t),bl.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Ur.vr(t);return bl.resolve(n)}containsKey(e,t){return bl.resolve(this.Ur.containsKey(t))}}class cp{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new xl(0),this.zr=!1,this.zr=!0,this.jr=new np,this.referenceDelegate=e(this),this.Hr=new lp(this),this.indexManager=new Fh,this.remoteDocumentCache=function(e){return new op(e)}((e=>this.referenceDelegate.Jr(e))),this.serializer=new Nh(t),this.Yr=new ep(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new tp,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Wr[e.toKey()];return n||(n=new ap(t,this.referenceDelegate),this.Wr[e.toKey()]=n),n}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,n){Is("MemoryPersistence","Starting transaction:",e);const r=new up(this.Gr.next());return this.referenceDelegate.Zr(),n(r).next((e=>this.referenceDelegate.Xr(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}ei(e,t){return bl.or(Object.values(this.Wr).map((n=>()=>n.containsKey(e,t))))}}class up extends vl{constructor(e){super(),this.currentSequenceNumber=e}}class dp{constructor(e){this.persistence=e,this.ti=new rp,this.ni=null}static ri(e){return new dp(e)}get ii(){if(this.ni)return this.ni;throw Ps()}addReference(e,t,n){return this.ti.addReference(n,t),this.ii.delete(n.toString()),bl.resolve()}removeReference(e,t,n){return this.ti.removeReference(n,t),this.ii.add(n.toString()),bl.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),bl.resolve()}removeTarget(e,t){this.ti.br(t.targetId).forEach((e=>this.ii.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.ii.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Zr(){this.ni=new Set}Xr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return bl.forEach(this.ii,(n=>{const r=cl.fromPath(n);return this.si(e,r).next((e=>{e||t.removeEntry(r,rl.min())}))})).next((()=>(this.ni=null,t.apply(e))))}updateLimboDocument(e,t){return this.si(e,t).next((e=>{e?this.ii.delete(t.toString()):this.ii.add(t.toString())}))}Jr(e){return 0}si(e,t){return bl.or([()=>bl.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}}class hp{constructor(e,t){this.persistence=e,this.oi=new $u((e=>Cl(e.path)),((e,t)=>e.isEqual(t))),this.garbageCollector=Qh(this,t)}static ri(e,t){return new hp(e,t)}Zr(){}Xr(e){return bl.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){const t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}sr(e){let t=0;return this.rr(e,(e=>{t++})).next((()=>t))}rr(e,t){return bl.forEach(this.oi,((n,r)=>this.ar(e,n,r).next((e=>e?bl.resolve():t(r)))))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.qr(e,(r=>this.ar(e,r,t).next((e=>{e||(n++,i.removeEntry(r,rl.min()))})))).next((()=>i.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),bl.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.oi.set(n,e.currentSequenceNumber),bl.resolve()}removeReference(e,t,n){return this.oi.set(n,e.currentSequenceNumber),bl.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),bl.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Fc(e.data.value)),t}ar(e,t,n){return bl.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.oi.get(t);return bl.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class pp{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Hi=n,this.Ji=r}static Yi(e,t){let n=Zu(),r=Zu();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new pp(e,t.fromCache,n,r)}}class fp{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class mp{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=Dt()?8:wl(kt())>0?6:4}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.rs(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.ss(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new fp;return this._s(e,t,n).next((r=>{if(i.result=r,this.Xi)return this.us(e,t,n,r.size)}))})).next((()=>i.result))}us(e,t,n,r){return n.documentReadCount<this.es?(Cs()<=sn.DEBUG&&Is("QueryEngine","SDK will not create cache indexes for query:",Ou(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),bl.resolve()):(Cs()<=sn.DEBUG&&Is("QueryEngine","Query:",Ou(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.ts*r?(Cs()<=sn.DEBUG&&Is("QueryEngine","The SDK decides to create cache indexes for query:",Ou(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ru(t))):bl.resolve())}rs(e,t){if(ku(t))return bl.resolve(null);let n=Ru(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=Pu(t,null,"F"),n=Ru(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=Zu(...r);return this.ns.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const a=this.cs(t,r);return this.ls(t,a,i,n.readTime)?this.rs(e,Pu(t,null,"F")):this.hs(e,a,t,n)}))))})))))}ss(e,t,n,r){return ku(t)||r.isEqual(rl.min())?bl.resolve(null):this.ns.getDocuments(e,n).next((i=>{const a=this.cs(t,i);return this.ls(t,a,n,r)?bl.resolve(null):(Cs()<=sn.DEBUG&&Is("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Ou(t)),this.hs(e,a,t,hl(r,ul)).next((e=>e)))}))}cs(e,t){let n=new oc(Uu(e));return t.forEach(((t,r)=>{ju(e,r)&&(n=n.add(r))})),n}ls(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}_s(e,t,n){return Cs()<=sn.DEBUG&&Is("QueryEngine","Using full collection scan to execute query:",Ou(t)),this.ns.getDocumentsMatchingQuery(e,t,fl.min(),n)}hs(e,t,n,r){return this.ns.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}const gp="LocalStore";class vp{constructor(e,t,n,r){this.persistence=e,this.Ps=t,this.serializer=r,this.Ts=new rc(Ys),this.Is=new $u((e=>Eu(e)),xu),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(n)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Jh(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ts)))}}function yp(e,t,n,r){return new vp(e,t,n,r)}async function bp(e,t){const n=Ns(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n.As(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],a=[];let o=Zu();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){a.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({Rs:e,removedBatchIds:i,addedBatchIds:a})))}))}))}function wp(e){const t=Ns(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Hr.getLastRemoteSnapshotVersion(e)))}function Ep(e,t,n){let r=Zu(),i=Zu();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=Wu();return n.forEach(((n,a)=>{const o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(rl.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):Is(gp,"Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{Vs:r,fs:i}}))}function xp(e,t){const n=Ns(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=_l),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function _p(e,t){const n=Ns(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Hr.getTargetData(e,t).next((i=>i?(r=i,bl.resolve(r)):n.Hr.allocateTargetId(e).next((i=>(r=new Mh(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Hr.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.Ts.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ts=n.Ts.insert(e.targetId,e),n.Is.set(t,e.targetId)),e}))}async function Ap(e,t,n){const r=Ns(e),i=r.Ts.get(t),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!El(e))throw e;Is(gp,`Failed to update sequence numbers for target ${t}: ${e}`)}r.Ts=r.Ts.remove(t),r.Is.delete(i.target)}function Tp(e,t,n){const r=Ns(e);let i=rl.min(),a=Zu();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=Ns(e),i=r.Is.get(n);return void 0!==i?bl.resolve(r.Ts.get(i)):r.Hr.getTargetData(t,n)}(r,e,Ru(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Hr.getMatchingKeysForTargetId(e,t.targetId).next((e=>{a=e}))})).next((()=>r.Ps.getDocumentsMatchingQuery(e,t,n?i:rl.min(),n?a:Zu()))).next((e=>(Sp(r,Fu(t),e),{documents:e,gs:a})))))}function Sp(e,t,n){let r=e.Es.get(t)||rl.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Es.set(t,r)}class kp{constructor(){this.activeTargetIds=ed()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Cp{constructor(){this.ho=new kp,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,n){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new kp,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Ip{To(e){}shutdown(){}}const Rp="ConnectivityMonitor";class Dp{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){Is(Rp,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){Is(Rp,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Lp=null;function Pp(){return null===Lp?Lp=268435456+Math.round(2147483648*Math.random()):Lp++,"0x"+Lp.toString(16)}const Mp="RestConnection",Np={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Op{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${n}/databases/${r}`,this.wo=this.databaseId.database===_c?`project_id=${n}`:`project_id=${n}&database_id=${r}`}So(e,t,n,r,i){const a=Pp(),o=this.bo(e,t.toUriEncodedString());Is(Mp,`Sending RPC '${e}' ${a}:`,o,n);const s={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(s,r,i),this.vo(e,o,s,n).then((t=>(Is(Mp,`Received RPC '${e}' ${a}: `,t),t)),(t=>{throw Ds(Mp,`RPC '${e}' ${a} failed with error: `,t,"url: ",o,"request:",n),t}))}Co(e,t,n,r,i,a){return this.So(e,t,n,r,i)}Do(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Ss,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}bo(e,t){const n=Np[e];return`${this.po}/v1/${t}:${n}`}terminate(){}}class jp{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Uo(e){this.ko(e)}Ko(e){this.qo(e)}}const Fp="WebChannelConnection";class Up extends Op{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,n,r){const i=Pp();return new Promise(((a,o)=>{const s=new ps;s.setWithCredentials(!0),s.listenOnce(ms.COMPLETE,(()=>{try{switch(s.getLastErrorCode()){case gs.NO_ERROR:const t=s.getResponseJson();Is(Fp,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(t)),a(t);break;case gs.TIMEOUT:Is(Fp,`RPC '${e}' ${i} timed out`),o(new js(Os.DEADLINE_EXCEEDED,"Request time out"));break;case gs.HTTP_ERROR:const n=s.getStatus();if(Is(Fp,`RPC '${e}' ${i} failed with status:`,n,"response text:",s.getResponseText()),n>0){let e=s.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Os).indexOf(t)>=0?t:Os.UNKNOWN}(t.status);o(new js(e,t.message))}else o(new js(Os.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new js(Os.UNAVAILABLE,"Connection failed."));break;default:Ps()}}finally{Is(Fp,`RPC '${e}' ${i} completed.`)}}));const l=JSON.stringify(r);Is(Fp,`RPC '${e}' ${i} sending request:`,r),s.send(t,"POST",l,n,15)}))}Wo(e,t,n){const r=Pp(),i=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=ws(),o=bs(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(s.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(s.useFetchStreams=!0),this.Do(s.initMessageHeaders,t,n),s.encodeInitMessageHeaders=!0;const c=i.join("");Is(Fp,`Creating RPC '${e}' stream ${r}: ${c}`,s);const u=a.createWebChannel(c,s);let d=!1,h=!1;const p=new jp({Fo:t=>{h?Is(Fp,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(d||(Is(Fp,`Opening RPC '${e}' stream ${r} transport.`),u.open(),d=!0),Is(Fp,`RPC '${e}' stream ${r} sending:`,t),u.send(t))},Mo:()=>u.close()}),f=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return f(u,fs.EventType.OPEN,(()=>{h||(Is(Fp,`RPC '${e}' stream ${r} transport opened.`),p.Qo())})),f(u,fs.EventType.CLOSE,(()=>{h||(h=!0,Is(Fp,`RPC '${e}' stream ${r} transport closed`),p.Uo())})),f(u,fs.EventType.ERROR,(t=>{h||(h=!0,Ds(Fp,`RPC '${e}' stream ${r} transport errored:`,t),p.Uo(new js(Os.UNAVAILABLE,"The operation could not be completed")))})),f(u,fs.EventType.MESSAGE,(t=>{var n;if(!h){const i=t.data[0];Ms(!!i);const a=i,o=(null==a?void 0:a.error)||(null===(n=a[0])||void 0===n?void 0:n.error);if(o){Is(Fp,`RPC '${e}' stream ${r} received error:`,o);const t=o.status;let n=function(e){const t=jd[e];if(void 0!==t)return Bd(t)}(t),i=o.message;void 0===n&&(n=Os.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),h=!0,p.Uo(new js(n,i)),u.close()}else Is(Fp,`RPC '${e}' stream ${r} received:`,i),p.Ko(i)}})),f(o,ys.STAT_EVENT,(t=>{t.stat===vs.PROXY?Is(Fp,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===vs.NOPROXY&&Is(Fp,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{p.$o()}),0),p}}function Bp(){return"undefined"!=typeof document?document:null}function $p(e){return new ah(e,!0)}class Vp{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.Ti=e,this.timerId=t,this.Go=n,this.zo=r,this.jo=i,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const t=Math.floor(this.Ho+this.e_()),n=Math.max(0,Date.now()-this.Yo),r=Math.max(0,t-n);r>0&&Is("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,r,(()=>(this.Yo=Date.now(),e()))),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){null!==this.Jo&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){null!==this.Jo&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}const Wp="PersistentStream";class zp{constructor(e,t,n,r,i,a,o,s){this.Ti=e,this.n_=n,this.r_=r,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=s,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new Vp(e,t)}u_(){return 1===this.state||5===this.state||this.c_()}c_(){return 2===this.state||3===this.state}start(){this.__=0,4!==this.state?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&null===this.s_&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,(()=>this.T_())))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,t){this.E_(),this.d_(),this.a_.cancel(),this.i_++,4!==e?this.a_.reset():t&&t.code===Os.RESOURCE_EXHAUSTED?(Rs(t.toString()),Rs("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===Os.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(t)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.i_===t&&this.V_(n,r)}),(t=>{e((()=>{const e=new js(Os.UNKNOWN,"Fetching auth token failed: "+t.message);return this.m_(e)}))}))}V_(e,t){const n=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo((()=>{n((()=>this.listener.xo()))})),this.stream.No((()=>{n((()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,(()=>(this.c_()&&(this.state=3),Promise.resolve()))),this.listener.No())))})),this.stream.Lo((e=>{n((()=>this.m_(e)))})),this.stream.onMessage((e=>{n((()=>1==++this.__?this.g_(e):this.onNext(e)))}))}l_(){this.state=5,this.a_.Xo((async()=>{this.state=0,this.start()}))}m_(e){return Is(Wp,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget((()=>this.i_===e?t():(Is(Wp,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Hp extends zp{constructor(e,t,n,r,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,a),this.serializer=i}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Ps()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(Ms(void 0===t||"string"==typeof t),uc.fromBase64String(t||"")):(Ms(void 0===t||t instanceof Buffer||t instanceof Uint8Array),uc.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,s=o&&function(e){const t=void 0===e.code?Os.UNKNOWN:Bd(e.code);return new js(t,e.message||"")}(o);n=new Xd(r,i,a,s||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=mh(e,r.document.name),a=uh(r.document.updateTime),o=r.document.createTime?uh(r.document.createTime):rl.min(),s=new Kc({mapValue:{fields:r.document.fields}}),l=Qc.newFoundDocument(i,a,o,s),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Yd(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=mh(e,r.document),a=r.readTime?uh(r.readTime):rl.min(),o=Qc.newNoDocument(i,a),s=r.removedTargetIds||[];n=new Yd([],s,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=mh(e,r.document),a=r.removedTargetIds||[];n=new Yd([],a,i,null)}else{if(!("filter"in t))return Ps();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,a=new Od(r,i),o=e.targetId;n=new Qd(o,a)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return rl.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?rl.min():t.readTime?uh(t.readTime):rl.min()}(e);return this.listener.p_(t,n)}y_(e){const t={};t.database=yh(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=_u(r)?{documents:xh(e,r)}:{query:_h(e,r).ht},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=lh(e,t.resumeToken);const r=oh(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(rl.min())>0){n.readTime=sh(e,t.snapshotVersion.toTimestamp());const r=oh(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ps()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.I_(t)}w_(e){const t={};t.database=yh(this.serializer),t.removeTarget=e,this.I_(t)}}class qp extends zp{constructor(e,t,n,r,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,a),this.serializer=i}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return Ms(!!e.streamToken),this.lastStreamToken=e.streamToken,Ms(!e.writeResults||0===e.writeResults.length),this.listener.D_()}onNext(e){Ms(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const t=function(e,t){return e&&e.length>0?(Ms(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?uh(e.updateTime):uh(t);return n.isEqual(rl.min())&&(n=uh(t)),new vd(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=uh(e.commitTime);return this.listener.v_(n,t)}C_(){const e={};e.database=yh(this.serializer),this.I_(e)}b_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>Eh(this.serializer,e)))};this.I_(t)}}class Gp{}class Kp extends Gp{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.F_=!1}M_(){if(this.F_)throw new js(Os.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,n,r){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[a,o]=i;return this.connection.So(e,hh(t,n),r,a,o)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Os.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new js(Os.UNKNOWN,e.toString())}))}Co(e,t,n,r,i){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((a=>{let[o,s]=a;return this.connection.Co(e,hh(t,n),r,o,s,i)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Os.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new js(Os.UNKNOWN,e.toString())}))}terminate(){this.F_=!0,this.connection.terminate()}}class Yp{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){0===this.x_&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve()))))}q_(e){"Online"===this.state?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,"Online"===e&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(Rs(t),this.N_=!1):Is("OnlineStateTracker",t)}Q_(){null!==this.O_&&(this.O_.cancel(),this.O_=null)}}const Qp="RemoteStore";class Xp{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=i,this.z_.To((e=>{n.enqueueAndForget((async()=>{sf(this)&&(Is(Qp,"Restarting streams for network reachability change."),await async function(e){const t=Ns(e);t.W_.add(4),await Jp(t),t.j_.set("Unknown"),t.W_.delete(4),await Zp(t)}(this))}))})),this.j_=new Yp(n,r)}}async function Zp(e){if(sf(e))for(const t of e.G_)await t(!0)}async function Jp(e){for(const t of e.G_)await t(!1)}function ef(e,t){const n=Ns(e);n.K_.has(t.targetId)||(n.K_.set(t.targetId,t),of(n)?af(n):Sf(n).c_()&&nf(n,t))}function tf(e,t){const n=Ns(e),r=Sf(n);n.K_.delete(t),r.c_()&&rf(n,t),0===n.K_.size&&(r.c_()?r.P_():sf(n)&&n.j_.set("Unknown"))}function nf(e,t){if(e.H_.Ne(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(rl.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Sf(e).y_(t)}function rf(e,t){e.H_.Ne(t),Sf(e).w_(t)}function af(e){e.H_=new Jd({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),lt:t=>e.K_.get(t)||null,it:()=>e.datastore.serializer.databaseId}),Sf(e).start(),e.j_.B_()}function of(e){return sf(e)&&!Sf(e).u_()&&e.K_.size>0}function sf(e){return 0===Ns(e).W_.size}function lf(e){e.H_=void 0}async function cf(e){e.j_.set("Online")}async function uf(e){e.K_.forEach(((t,n)=>{nf(e,t)}))}async function df(e,t){lf(e),of(e)?(e.j_.q_(t),af(e)):e.j_.set("Unknown")}async function hf(e,t,n){if(e.j_.set("Online"),t instanceof Xd&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.K_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.K_.delete(r),e.H_.removeTarget(r))}(e,t)}catch(n){Is(Qp,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await pf(e,n)}else if(t instanceof Yd?e.H_.We(t):t instanceof Qd?e.H_.Ze(t):e.H_.je(t),!n.isEqual(rl.min()))try{const t=await wp(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.H_.ot(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.K_.get(r);i&&e.K_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.K_.get(t);if(!r)return;e.K_.set(t,r.withResumeToken(uc.EMPTY_BYTE_STRING,r.snapshotVersion)),rf(e,t);const i=new Mh(r.target,t,n,r.sequenceNumber);nf(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Is(Qp,"Failed to raise snapshot:",t),await pf(e,t)}}async function pf(e,t,n){if(!El(t))throw t;e.W_.add(1),await Jp(e),e.j_.set("Offline"),n||(n=()=>wp(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{Is(Qp,"Retrying IndexedDB access"),await n(),e.W_.delete(1),await Zp(e)}))}function ff(e,t){return t().catch((n=>pf(e,n,t)))}async function mf(e){const t=Ns(e),n=kf(t);let r=t.U_.length>0?t.U_[t.U_.length-1].batchId:_l;for(;gf(t);)try{const e=await xp(t.localStore,r);if(null===e){0===t.U_.length&&n.P_();break}r=e.batchId,vf(t,e)}catch(e){await pf(t,e)}yf(t)&&bf(t)}function gf(e){return sf(e)&&e.U_.length<10}function vf(e,t){e.U_.push(t);const n=kf(e);n.c_()&&n.S_&&n.b_(t.mutations)}function yf(e){return sf(e)&&!kf(e).u_()&&e.U_.length>0}function bf(e){kf(e).start()}async function wf(e){kf(e).C_()}async function Ef(e){const t=kf(e);for(const n of e.U_)t.b_(n.mutations)}async function xf(e,t,n){const r=e.U_.shift(),i=Md.from(r,t,n);await ff(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await mf(e)}async function _f(e,t){t&&kf(e).S_&&await async function(e,t){if(function(e){return Ud(e)&&e!==Os.ABORTED}(t.code)){const n=e.U_.shift();kf(e).h_(),await ff(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await mf(e)}}(e,t),yf(e)&&bf(e)}async function Af(e,t){const n=Ns(e);n.asyncQueue.verifyOperationInProgress(),Is(Qp,"RemoteStore received new credentials");const r=sf(n);n.W_.add(3),await Jp(n),r&&n.j_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.W_.delete(3),await Zp(n)}async function Tf(e,t){const n=Ns(e);t?(n.W_.delete(2),await Zp(n)):t||(n.W_.add(2),await Jp(n),n.j_.set("Unknown"))}function Sf(e){return e.J_||(e.J_=function(e,t,n){const r=Ns(e);return r.M_(),new Hp(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{xo:cf.bind(null,e),No:uf.bind(null,e),Lo:df.bind(null,e),p_:hf.bind(null,e)}),e.G_.push((async t=>{t?(e.J_.h_(),of(e)?af(e):e.j_.set("Unknown")):(await e.J_.stop(),lf(e))}))),e.J_}function kf(e){return e.Y_||(e.Y_=function(e,t,n){const r=Ns(e);return r.M_(),new qp(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{xo:()=>Promise.resolve(),No:wf.bind(null,e),Lo:_f.bind(null,e),D_:Ef.bind(null,e),v_:xf.bind(null,e)}),e.G_.push((async t=>{t?(e.Y_.h_(),await mf(e)):(await e.Y_.stop(),e.U_.length>0&&(Is(Qp,`Stopping write stream with ${e.U_.length} pending writes`),e.U_=[]))}))),e.Y_}class Cf{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Fs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const a=Date.now()+n,o=new Cf(e,t,a,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new js(Os.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function If(e,t){if(Rs("AsyncQueue",`${t}: ${e}`),El(e))return new js(Os.UNAVAILABLE,`${t}: ${e}`);throw e}class Rf{static emptySet(e){return new Rf(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||cl.comparator(t.key,n.key):(e,t)=>cl.comparator(e.key,t.key),this.keyedMap=Hu(),this.sortedSet=new rc(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Rf))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Rf;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Df{constructor(){this.Z_=new rc(cl.comparator)}track(e){const t=e.doc.key,n=this.Z_.get(t);n?0!==e.type&&3===n.type?this.Z_=this.Z_.insert(t,e):3===e.type&&1!==n.type?this.Z_=this.Z_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Z_=this.Z_.remove(t):1===e.type&&2===n.type?this.Z_=this.Z_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):Ps():this.Z_=this.Z_.insert(t,e)}X_(){const e=[];return this.Z_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class Lf{constructor(e,t,n,r,i,a,o,s,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=s,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const a=[];return t.forEach((e=>{a.push({type:0,doc:e})})),new Lf(e,t,Rf.emptySet(t),a,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Mu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Pf{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some((e=>e.ra()))}}class Mf{constructor(){this.queries=Nf(),this.onlineState="Unknown",this.ia=new Set}terminate(){!function(e,t){const n=Ns(e),r=n.queries;n.queries=Nf(),r.forEach(((e,n)=>{for(const r of n.ta)r.onError(t)}))}(this,new js(Os.ABORTED,"Firestore shutting down"))}}function Nf(){return new $u((e=>Nu(e)),Mu)}async function Of(e,t){const n=Ns(e);let r=3;const i=t.query;let a=n.queries.get(i);a?!a.na()&&t.ra()&&(r=2):(a=new Pf,r=t.ra()?0:1);try{switch(r){case 0:a.ea=await n.onListen(i,!0);break;case 1:a.ea=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=If(e,`Initialization of query '${Ou(t.query)}' failed`);return void t.onError(n)}n.queries.set(i,a),a.ta.push(t),t.sa(n.onlineState),a.ea&&t.oa(a.ea)&&Bf(n)}async function jf(e,t){const n=Ns(e),r=t.query;let i=3;const a=n.queries.get(r);if(a){const e=a.ta.indexOf(t);e>=0&&(a.ta.splice(e,1),0===a.ta.length?i=t.ra()?0:1:!a.na()&&t.ra()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Ff(e,t){const n=Ns(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.ta)e.oa(i)&&(r=!0);t.ea=i}}r&&Bf(n)}function Uf(e,t,n){const r=Ns(e),i=r.queries.get(t);if(i)for(const a of i.ta)a.onError(n);r.queries.delete(t)}function Bf(e){e.ia.forEach((e=>{e.next()}))}var $f,Vf;(Vf=$f||($f={}))._a="default",Vf.Cache="cache";class Wf{constructor(e,t,n){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=n||{}}oa(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Lf(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache)return!0;if(!this.ra())return!0;const n="Offline"!==t;return(!this.options.Ta||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}la(e){if(e.docChanges.length>0)return!0;const t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}Pa(e){e=Lf.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==$f.Cache}}class zf{constructor(e){this.key=e}}class Hf{constructor(e){this.key=e}}class qf{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Zu(),this.mutatedKeys=Zu(),this.ya=Uu(e),this.wa=new Rf(this.ya)}get Sa(){return this.fa}ba(e,t){const n=t?t.Da:new Df,r=t?t.wa:this.wa;let i=t?t.mutatedKeys:this.mutatedKeys,a=r,o=!1;const s="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const c=r.get(e),u=ju(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let p=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),p=!0):this.va(c,u)||(n.track({type:2,doc:u}),p=!0,(s&&this.ya(u,s)>0||l&&this.ya(u,l)<0)&&(o=!0)):!c&&u?(n.track({type:0,doc:u}),p=!0):c&&!u&&(n.track({type:1,doc:c}),p=!0,(s||l)&&(o=!0)),p&&(u?(a=a.add(u),i=h?i.add(e):i.delete(e)):(a=a.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;a.size>this.query.limit;){const e="F"===this.query.limitType?a.last():a.first();a=a.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{wa:a,Da:n,ls:o,mutatedKeys:i}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const a=e.Da.X_();a.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ps()}};return n(e)-n(t)}(e.type,t.type)||this.ya(e.doc,t.doc))),this.Ca(n),r=null!=r&&r;const o=t&&!r?this.Fa():[],s=0===this.pa.size&&this.current&&!r?1:0,l=s!==this.ga;return this.ga=s,0!==a.length||l?{snapshot:new Lf(this.query,e.wa,i,a,e.mutatedKeys,0===s,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),Ma:o}:{Ma:o}}sa(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({wa:this.wa,Da:new Df,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach((e=>this.fa=this.fa.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.fa=this.fa.delete(e))),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=Zu(),this.wa.forEach((e=>{this.xa(e.key)&&(this.pa=this.pa.add(e.key))}));const t=[];return e.forEach((e=>{this.pa.has(e)||t.push(new Hf(e))})),this.pa.forEach((n=>{e.has(n)||t.push(new zf(n))})),t}Oa(e){this.fa=e.gs,this.pa=Zu();const t=this.ba(e.documents);return this.applyChanges(t,!0)}Na(){return Lf.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,0===this.ga,this.hasCachedResults)}}const Gf="SyncEngine";class Kf{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Yf{constructor(e){this.key=e,this.Ba=!1}}class Qf{constructor(e,t,n,r,i,a){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.La={},this.ka=new $u((e=>Nu(e)),Mu),this.qa=new Map,this.Qa=new Set,this.$a=new rc(cl.comparator),this.Ua=new Map,this.Ka=new rp,this.Wa={},this.Ga=new Map,this.za=Wh.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return!0===this.ja}}async function Xf(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=ym(e);let i;const a=r.ka.get(t);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.Na()):i=await Jf(r,t,n,!0),i}async function Zf(e,t){const n=ym(e);await Jf(n,t,!0,!1)}async function Jf(e,t,n,r){const i=await _p(e.localStore,Ru(t)),a=i.targetId,o=e.sharedClientState.addLocalQueryTarget(a,n);let s;return r&&(s=await em(e,t,a,"current"===o,i.resumeToken)),e.isPrimaryClient&&n&&ef(e.remoteStore,i),s}async function em(e,t,n,r,i){e.Ha=(t,n,r)=>async function(e,t,n,r){let i=t.view.ba(n);i.ls&&(i=await Tp(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.ba(n,i)})));const a=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),s=t.view.applyChanges(i,e.isPrimaryClient,a,o);return hm(e,t.targetId,s.Ma),s.snapshot}(e,t,n,r);const a=await Tp(e.localStore,t,!0),o=new qf(t,a.gs),s=o.ba(a.documents),l=Kd.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=o.applyChanges(s,e.isPrimaryClient,l);hm(e,n,c.Ma);const u=new Kf(t,n,o);return e.ka.set(t,u),e.qa.has(n)?e.qa.get(n).push(t):e.qa.set(n,[t]),c.snapshot}async function tm(e,t,n){const r=Ns(e),i=r.ka.get(t),a=r.qa.get(i.targetId);if(a.length>1)return r.qa.set(i.targetId,a.filter((e=>!Mu(e,t)))),void r.ka.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Ap(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&tf(r.remoteStore,i.targetId),um(r,i.targetId)})).catch(yl)):(um(r,i.targetId),await Ap(r.localStore,i.targetId,!0))}async function nm(e,t){const n=Ns(e),r=n.ka.get(t),i=n.qa.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),tf(n.remoteStore,r.targetId))}async function rm(e,t){const n=Ns(e);try{const e=await function(e,t){const n=Ns(e),r=t.snapshotVersion;let i=n.Ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const a=n.ds.newChangeBuffer({trackRemovals:!0});i=n.Ts;const o=[];t.targetChanges.forEach(((a,s)=>{const l=i.get(s);if(!l)return;o.push(n.Hr.removeMatchingKeys(e,a.removedDocuments,s).next((()=>n.Hr.addMatchingKeys(e,a.addedDocuments,s))));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(s)?c=c.withResumeToken(uc.EMPTY_BYTE_STRING,rl.min()).withLastLimboFreeSnapshotVersion(rl.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(s,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(l,c,a)&&o.push(n.Hr.updateTargetData(e,c))}));let s=Wu(),l=Zu();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Ep(e,a,t.documentUpdates).next((e=>{s=e.Vs,l=e.fs}))),!r.isEqual(rl.min())){const t=n.Hr.getLastRemoteSnapshotVersion(e).next((t=>n.Hr.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return bl.waitFor(o).next((()=>a.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,s,l))).next((()=>s))})).then((e=>(n.Ts=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.Ua.get(t);r&&(Ms(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.Ba=!0:e.modifiedDocuments.size>0?Ms(r.Ba):e.removedDocuments.size>0&&(Ms(r.Ba),r.Ba=!1))})),await mm(n,e,t)}catch(e){await yl(e)}}function im(e,t,n){const r=Ns(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.ka.forEach(((n,r)=>{const i=r.view.sa(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=Ns(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.ta)i.sa(t)&&(r=!0)})),r&&Bf(n)}(r.eventManager,t),e.length&&r.La.p_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function am(e,t,n){const r=Ns(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Ua.get(t),a=i&&i.key;if(a){let e=new rc(cl.comparator);e=e.insert(a,Qc.newNoDocument(a,rl.min()));const n=Zu().add(a),i=new Gd(rl.min(),new Map,new rc(Ys),e,n);await rm(r,i),r.$a=r.$a.remove(a),r.Ua.delete(t),fm(r)}else await Ap(r.localStore,t,!1).then((()=>um(r,t,n))).catch(yl)}async function om(e,t){const n=Ns(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Ns(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.ds.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,a=i.keys();let o=bl.resolve();return a.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{const a=n.docVersions.get(e);Ms(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Zu();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);cm(n,r,null),lm(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await mm(n,e)}catch(e){await yl(e)}}async function sm(e,t,n){const r=Ns(e);try{const e=await function(e,t){const n=Ns(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(Ms(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);cm(r,t,n),lm(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await mm(r,e)}catch(n){await yl(n)}}function lm(e,t){(e.Ga.get(t)||[]).forEach((e=>{e.resolve()})),e.Ga.delete(t)}function cm(e,t,n){const r=Ns(e);let i=r.Wa[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Wa[r.currentUser.toKey()]=i}}function um(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.qa.get(t))e.ka.delete(r),n&&e.La.Ja(r,n);e.qa.delete(t),e.isPrimaryClient&&e.Ka.br(t).forEach((t=>{e.Ka.containsKey(t)||dm(e,t)}))}function dm(e,t){e.Qa.delete(t.path.canonicalString());const n=e.$a.get(t);null!==n&&(tf(e.remoteStore,n),e.$a=e.$a.remove(t),e.Ua.delete(n),fm(e))}function hm(e,t,n){for(const r of n)r instanceof zf?(e.Ka.addReference(r.key,t),pm(e,r)):r instanceof Hf?(Is(Gf,"Document no longer in limbo: "+r.key),e.Ka.removeReference(r.key,t),e.Ka.containsKey(r.key)||dm(e,r.key)):Ps()}function pm(e,t){const n=t.key,r=n.path.canonicalString();e.$a.get(n)||e.Qa.has(r)||(Is(Gf,"New document in limbo: "+n),e.Qa.add(r),fm(e))}function fm(e){for(;e.Qa.size>0&&e.$a.size<e.maxConcurrentLimboResolutions;){const t=e.Qa.values().next().value;e.Qa.delete(t);const n=new cl(ol.fromString(t)),r=e.za.next();e.Ua.set(r,new Yf(n)),e.$a=e.$a.insert(n,r),ef(e.remoteStore,new Mh(Ru(Su(n.path)),r,"TargetPurposeLimboResolution",xl.ae))}}async function mm(e,t,n){const r=Ns(e),i=[],a=[],o=[];r.ka.isEmpty()||(r.ka.forEach(((e,s)=>{o.push(r.Ha(s,t,n).then((e=>{var t;if((e||n)&&r.isPrimaryClient){const i=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(s.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(s.targetId,i?"current":"not-current")}if(e){i.push(e);const t=pp.Yi(s.targetId,e);a.push(t)}})))})),await Promise.all(o),r.La.p_(i),await async function(e,t){const n=Ns(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>bl.forEach(t,(t=>bl.forEach(t.Hi,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>bl.forEach(t.Ji,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!El(e))throw e;Is(gp,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ts.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.Ts=n.Ts.insert(e,i)}}}(r.localStore,a))}async function gm(e,t){const n=Ns(e);if(!n.currentUser.isEqual(t)){Is(Gf,"User change. New user:",t.toKey());const e=await bp(n.localStore,t);n.currentUser=t,function(e,t){e.Ga.forEach((e=>{e.forEach((e=>{e.reject(new js(Os.CANCELLED,t))}))})),e.Ga.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await mm(n,e.Rs)}}function vm(e,t){const n=Ns(e),r=n.Ua.get(t);if(r&&r.Ba)return Zu().add(r.key);{let e=Zu();const r=n.qa.get(t);if(!r)return e;for(const t of r){const r=n.ka.get(t);e=e.unionWith(r.view.Sa)}return e}}function ym(e){const t=Ns(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=rm.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=vm.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=am.bind(null,t),t.La.p_=Ff.bind(null,t.eventManager),t.La.Ja=Uf.bind(null,t.eventManager),t}function bm(e){const t=Ns(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=om.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=sm.bind(null,t),t}class wm{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=$p(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,t){return null}nu(e,t){return null}eu(e){return yp(this.persistence,new mp,e.initialUser,this.serializer)}Xa(e){return new cp(dp.ri,this.serializer)}Za(e){return new Cp}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}wm.provider={build:()=>new wm};class Em extends wm{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){Ms(this.persistence.referenceDelegate instanceof hp);const n=this.persistence.referenceDelegate.garbageCollector;return new Kh(n,e.asyncQueue,t)}Xa(e){const t=void 0!==this.cacheSizeBytes?Vh.withCacheSize(this.cacheSizeBytes):Vh.DEFAULT;return new cp((e=>hp.ri(e,t)),this.serializer)}}class xm{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>im(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=gm.bind(null,this.syncEngine),await Tf(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Mf}createDatastore(e){const t=$p(e.databaseInfo.databaseId),n=function(e){return new Up(e)}(e.databaseInfo);return function(e,t,n,r){return new Kp(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new Xp(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>im(this.syncEngine,e,0)),Dp.D()?new Dp:new Ip)}createSyncEngine(e,t){return function(e,t,n,r,i,a,o){const s=new Qf(e,t,n,r,i,a);return o&&(s.ja=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=Ns(e);Is(Qp,"RemoteStore shutting down."),t.W_.add(5),await Jp(t),t.z_.shutdown(),t.j_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}xm.provider={build:()=>new xm};class _m{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):Rs("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}class Am{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new js(Os.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(e,t){const n=Ns(e),r={documents:t.map((e=>fh(n.serializer,e)))},i=await n.Co("BatchGetDocuments",n.serializer.databaseId,ol.emptyPath(),r,t.length),a=new Map;i.forEach((e=>{const t=function(e,t){return"found"in t?function(e,t){Ms(!!t.found),t.found.name,t.found.updateTime;const n=mh(e,t.found.name),r=uh(t.found.updateTime),i=t.found.createTime?uh(t.found.createTime):rl.min(),a=new Kc({mapValue:{fields:t.found.fields}});return Qc.newFoundDocument(n,r,i,a)}(e,t):"missing"in t?function(e,t){Ms(!!t.missing),Ms(!!t.readTime);const n=mh(e,t.missing),r=uh(t.readTime);return Qc.newNoDocument(n,r)}(e,t):Ps()}(n.serializer,e);a.set(t.key.toString(),t)}));const o=[];return t.forEach((e=>{const t=a.get(e.toString());Ms(!!t),o.push(t)})),o}(this.datastore,e);return t.forEach((e=>this.recordVersion(e))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastTransactionError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new Dd(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((e,t)=>{const n=cl.fromPath(t);this.mutations.push(new Ld(n,this.precondition(n)))})),await async function(e,t){const n=Ns(e),r={writes:t.map((e=>Eh(n.serializer,e)))};await n.So("Commit",n.serializer.databaseId,ol.emptyPath(),r)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Ps();t=rl.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new js(Os.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(rl.min())?yd.exists(!1):yd.updateTime(t):yd.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(rl.min()))throw new js(Os.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return yd.updateTime(t)}return yd.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Tm{constructor(e,t,n,r,i){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=i,this.Tu=n.maxAttempts,this.a_=new Vp(this.asyncQueue,"transaction_retry")}Iu(){this.Tu-=1,this.Eu()}Eu(){this.a_.Xo((async()=>{const e=new Am(this.datastore),t=this.du(e);t&&t.then((t=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(t)})).catch((e=>{this.Au(e)}))))})).catch((e=>{this.Au(e)}))}))}du(e){try{const t=this.updateFunction(e);return!Al(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Au(e){this.Tu>0&&this.Ru(e)?(this.Tu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Eu(),Promise.resolve())))):this.deferred.reject(e)}Ru(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Ud(t)}return!1}}const Sm="FirestoreClient";class km{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Ts.UNAUTHENTICATED,this.clientId=Ks.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,(async e=>{Is(Sm,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(Is(Sm,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Fs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(X_){const n=If(X_,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function Cm(e,t){e.asyncQueue.verifyOperationInProgress(),Is(Sm,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await bp(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function Im(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Rm(e);Is(Sm,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>Af(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>Af(t.remoteStore,n))),e._onlineComponents=t}async function Rm(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Is(Sm,"Using user provided OfflineComponentProvider");try{await Cm(e,e._uninitializedComponentsProvider._offline)}catch(X_){const n=X_;if(!function(e){return"FirebaseError"===e.name?e.code===Os.FAILED_PRECONDITION||e.code===Os.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;Ds("Error using user provided cache. Falling back to memory cache: "+n),await Cm(e,new wm)}}else Is(Sm,"Using default OfflineComponentProvider"),await Cm(e,new Em(void 0));return e._offlineComponents}async function Dm(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Is(Sm,"Using user provided OnlineComponentProvider"),await Im(e,e._uninitializedComponentsProvider._online)):(Is(Sm,"Using default OnlineComponentProvider"),await Im(e,new xm))),e._onlineComponents}function Lm(e){return Dm(e).then((e=>e.syncEngine))}function Pm(e){return Dm(e).then((e=>e.datastore))}async function Mm(e){const t=await Dm(e),n=t.eventManager;return n.onListen=Xf.bind(null,t.syncEngine),n.onUnlisten=tm.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Zf.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=nm.bind(null,t.syncEngine),n}function Nm(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Fs;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const a=new _m({next:s=>{a.su(),t.enqueueAndForget((()=>jf(e,o)));const l=s.docs.has(n);!l&&s.fromCache?i.reject(new js(Os.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&s.fromCache&&r&&"server"===r.source?i.reject(new js(Os.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),o=new Wf(Su(n.path),a,{includeMetadataChanges:!0,Ta:!0});return Of(e,o)}(await Mm(e),e.asyncQueue,t,n,r))),r.promise}function Om(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Fs;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const a=new _m({next:n=>{a.su(),t.enqueueAndForget((()=>jf(e,o))),n.fromCache&&"server"===r.source?i.reject(new js(Os.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new Wf(n,a,{includeMetadataChanges:!0,Ta:!0});return Of(e,o)}(await Mm(e),e.asyncQueue,t,n,r))),r.promise}function jm(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Fm=new Map;function Um(e,t,n){if(!n)throw new js(Os.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Bm(e){if(!cl.isDocumentKey(e))throw new js(Os.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function $m(e){if(cl.isDocumentKey(e))throw new js(Os.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Vm(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":Ps()}function Wm(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new js(Os.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Vm(e);throw new js(Os.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function zm(e,t){if(t<=0)throw new js(Os.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}const Hm="firestore.googleapis.com",qm=!0;class Gm{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new js(Os.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Hm,this.ssl=qm}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:qm;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=$h;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<Hh)throw new js(Os.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new js(Os.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=jm(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new js(Os.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new js(Os.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new js(Os.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Km{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Gm({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new js(Os.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new js(Os.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Gm(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Bs;switch(e.type){case"firstParty":return new Ws(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new js(Os.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Fm.get(e);t&&(Is("ComponentProvider","Removing Datastore"),Fm.delete(e),t.terminate())}(this),Promise.resolve()}}class Ym{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Ym(this.firestore,e,this._query)}}class Qm{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Xm(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Qm(this.firestore,e,this._key)}}class Xm extends Ym{constructor(e,t,n){super(e,t,Su(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Qm(this.firestore,null,new cl(e))}withConverter(e){return new Xm(this.firestore,e,this._path)}}function Zm(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Jt(e),Um("collection","path",t),e instanceof Km){const n=ol.fromString(t,...r);return $m(n),new Xm(e,null,n)}{if(!(e instanceof Qm||e instanceof Xm))throw new js(Os.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(ol.fromString(t,...r));return $m(n),new Xm(e.firestore,null,n)}}function Jm(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Jt(e),1===arguments.length&&(t=Ks.newId()),Um("doc","path",t),e instanceof Km){const n=ol.fromString(t,...r);return Bm(n),new Qm(e,null,new cl(n))}{if(!(e instanceof Qm||e instanceof Xm))throw new js(Os.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(ol.fromString(t,...r));return Bm(n),new Qm(e.firestore,e instanceof Xm?e.converter:null,new cl(n))}}const eg="AsyncQueue";class tg{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new Vp(this,"async_queue_retry"),this.Su=()=>{const e=Bp();e&&Is(eg,"Visibility state changed to "+e.visibilityState),this.a_.t_()},this.bu=e;const t=Bp();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const t=Bp();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise((()=>{}));const t=new Fs;return this.vu((()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Vu.push(e),this.Cu())))}async Cu(){if(0!==this.Vu.length){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(Q_){if(!El(Q_))throw Q_;Is(eg,"Operation failed with retryable error: "+Q_)}this.Vu.length>0&&this.a_.Xo((()=>this.Cu()))}}vu(e){const t=this.bu.then((()=>(this.pu=!0,e().catch((e=>{this.gu=e,this.pu=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Rs("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.pu=!1,e))))));return this.bu=t,t}enqueueAfterDelay(e,t,n){this.Du(),this.wu.indexOf(e)>-1&&(t=0);const r=Cf.createAndSchedule(this,e,t,n,(e=>this.Fu(e)));return this.fu.push(r),r}Du(){this.gu&&Ps()}verifyOperationInProgress(){}async Mu(){let e;do{e=this.bu,await e}while(e!==this.bu)}xu(e){for(const t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then((()=>{this.fu.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.fu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Mu()}))}Nu(e){this.wu.push(e)}Fu(e){const t=this.fu.indexOf(e);this.fu.splice(t,1)}}function ng(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class rg extends Km{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new tg,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new tg(e),this._firestoreClient=void 0,await e}}}function ig(e){if(e._terminated)throw new js(Os.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||ag(e),e._firestoreClient}function ag(e){var t,n,r;const i=e._freezeSettings(),a=function(e,t,n,r){return new xc(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,jm(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new km(e._authCredentials,e._appCheckCredentials,e._queue,a,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class og{constructor(e){this._byteString=e}static fromBase64String(e){try{return new og(uc.fromBase64String(e))}catch(e){throw new js(Os.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new og(uc.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class sg{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new js(Os.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ll(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class lg{constructor(e){this._methodName=e}}class cg{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new js(Os.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new js(Os.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ys(this._lat,e._lat)||Ys(this._long,e._long)}}class ug{constructor(e){this._values=(e||[]).map((e=>e))}toArray(){return this._values.map((e=>e))}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}}const dg=/^__.*__$/;class hg{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new kd(e,this.data,this.fieldMask,t,this.fieldTransforms):new Sd(e,this.data,t,this.fieldTransforms)}}class pg{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new kd(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function fg(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ps()}}class mg{constructor(e,t,n,r,i,a){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Bu(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new mg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ku({path:n,Qu:!1});return r.$u(e),r}Uu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ku({path:n,Qu:!1});return r.Bu(),r}Ku(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return Ng(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(0===e.length)throw this.Wu("Document fields must not be empty");if(fg(this.Lu)&&dg.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class gg{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||$p(e)}ju(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new mg({Lu:e,methodName:t,zu:n,path:ll.emptyPath(),Qu:!1,Gu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function vg(e){const t=e._freezeSettings(),n=$p(e._databaseId);return new gg(e._databaseId,!!t.ignoreUndefinedProperties,n)}function yg(e,t,n,r,i){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.ju(a.merge||a.mergeFields?2:0,t,n,i);Dg("Data must be an object, but it was:",o,r);const s=Ig(r,o);let l,c;if(a.merge)l=new lc(o.fieldMask),c=o.fieldTransforms;else if(a.mergeFields){const e=[];for(const r of a.mergeFields){const i=Lg(t,r,n);if(!o.contains(i))throw new js(Os.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);Og(e,i)||e.push(i)}l=new lc(e),c=o.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,c=o.fieldTransforms;return new hg(new Kc(s),l,c)}class bg extends lg{_toFieldTransform(e){if(2!==e.Lu)throw 1===e.Lu?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof bg}}function wg(e,t,n){return new mg({Lu:3,zu:t.settings.zu,methodName:e._methodName,Qu:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class Eg extends lg{_toFieldTransform(e){return new gd(e.path,new ld)}isEqual(e){return e instanceof Eg}}class xg extends lg{constructor(e,t){super(e),this.Hu=t}_toFieldTransform(e){const t=wg(this,e,!0),n=this.Hu.map((e=>Cg(e,t))),r=new cd(n);return new gd(e.path,r)}isEqual(e){return e instanceof xg&&Wt(this.Hu,e.Hu)}}class _g extends lg{constructor(e,t){super(e),this.Hu=t}_toFieldTransform(e){const t=wg(this,e,!0),n=this.Hu.map((e=>Cg(e,t))),r=new dd(n);return new gd(e.path,r)}isEqual(e){return e instanceof _g&&Wt(this.Hu,e.Hu)}}class Ag extends lg{constructor(e,t){super(e),this.Ju=t}_toFieldTransform(e){const t=new pd(e.serializer,rd(e.serializer,this.Ju));return new gd(e.path,t)}isEqual(e){return e instanceof Ag&&this.Ju===e.Ju}}function Tg(e,t,n,r){const i=e.ju(1,t,n);Dg("Data must be an object, but it was:",i,r);const a=[],o=Kc.empty();tc(r,((e,r)=>{const s=Mg(t,e,n);r=Jt(r);const l=i.Uu(s);if(r instanceof bg)a.push(s);else{const e=Cg(r,l);null!=e&&(a.push(s),o.set(s,e))}}));const s=new lc(a);return new pg(o,s,i.fieldTransforms)}function Sg(e,t,n,r,i,a){const o=e.ju(1,t,n),s=[Lg(t,r,n)],l=[i];if(a.length%2!=0)throw new js(Os.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<a.length;h+=2)s.push(Lg(t,a[h])),l.push(a[h+1]);const c=[],u=Kc.empty();for(let h=s.length-1;h>=0;--h)if(!Og(c,s[h])){const e=s[h];let t=l[h];t=Jt(t);const n=o.Uu(e);if(t instanceof bg)c.push(e);else{const r=Cg(t,n);null!=r&&(c.push(e),u.set(e,r))}}const d=new lc(c);return new pg(u,d,o.fieldTransforms)}function kg(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Cg(n,e.ju(r?4:3,t))}function Cg(e,t){if(Rg(e=Jt(e)))return Dg("Unsupported field value:",t,e),Ig(e,t);if(e instanceof lg)return function(e,t){if(!fg(t.Lu))throw t.Wu(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Wu(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Qu&&4!==t.Lu)throw t.Wu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=Cg(i,t.Ku(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=Jt(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return rd(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=nl.fromDate(e);return{timestampValue:sh(t.serializer,n)}}if(e instanceof nl){const n=new nl(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:sh(t.serializer,n)}}if(e instanceof cg)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof og)return{bytesValue:lh(t.serializer,e._byteString)};if(e instanceof Qm){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Wu(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:dh(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof ug)return function(e,t){return{mapValue:{fields:{[Tc]:{stringValue:Cc},[Ic]:{arrayValue:{values:e.toArray().map((e=>{if("number"!=typeof e)throw t.Wu("VectorValues must only contain numeric values.");return td(t.serializer,e)}))}}}}}}(e,t);throw t.Wu(`Unsupported field value: ${Vm(e)}`)}(e,t)}function Ig(e,t){const n={};return nc(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):tc(e,((e,r)=>{const i=Cg(r,t.qu(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function Rg(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof nl||e instanceof cg||e instanceof og||e instanceof Qm||e instanceof lg||e instanceof ug)}function Dg(e,t,n){if(!Rg(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=Vm(n);throw"an object"===r?t.Wu(e+" a custom object"):t.Wu(e+" "+r)}}function Lg(e,t,n){if((t=Jt(t))instanceof sg)return t._internalPath;if("string"==typeof t)return Mg(e,t);throw Ng("Field path arguments must be of type string or ",e,!1,void 0,n)}const Pg=new RegExp("[~\\*/\\[\\]]");function Mg(e,t,n){if(t.search(Pg)>=0)throw Ng(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new sg(...t.split("."))._internalPath}catch(r){throw Ng(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Ng(e,t,n,r,i){const a=r&&!r.isEmpty(),o=void 0!==i;let s=`Function ${t}() called with invalid data`;n&&(s+=" (via `toFirestore()`)"),s+=". ";let l="";return(a||o)&&(l+=" (found",a&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new js(Os.INVALID_ARGUMENT,s+e+l)}function Og(e,t){return e.some((e=>e.isEqual(t)))}class jg{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Qm(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Fg(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Ug("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Fg extends jg{data(){return super.data()}}function Ug(e,t){return"string"==typeof t?Mg(e,t):t instanceof sg?t._internalPath:t._delegate._internalPath}function Bg(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new js(Os.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class $g{}class Vg extends $g{}function Wg(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];t instanceof $g&&n.push(t),n=n.concat(i),function(e){const t=e.filter((e=>e instanceof qg)).length,n=e.filter((e=>e instanceof zg)).length;if(t>1||t>0&&n>0)throw new js(Os.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e}class zg extends Vg{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new zg(e,t,n)}_apply(e){const t=this._parse(e);return Jg(e._query,t),new Ym(e.firestore,e.converter,Lu(e._query,t))}_parse(e){const t=vg(e.firestore),n=function(e,t,n,r,i,a,o){let s;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new js(Os.INVALID_ARGUMENT,`Invalid Query. You can't perform '${a}' queries on documentId().`);if("in"===a||"not-in"===a){Zg(o,a);const t=[];for(const n of o)t.push(Xg(r,e,n));s={arrayValue:{values:t}}}else s=Xg(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||Zg(o,a),s=kg(n,t,o,"in"===a||"not-in"===a);return ru.create(i,a,s)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function Hg(e,t,n){const r=t,i=Ug("where",e);return zg._create(i,r,n)}class qg extends $g{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new qg(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:iu.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)Jg(n,i),n=Lu(n,i)}(e._query,t),new Ym(e.firestore,e.converter,Lu(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Gg extends Vg{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Gg(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new js(Os.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new js(Os.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new eu(t,n)}(e._query,this._field,this._direction);return new Ym(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Au(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function Kg(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Ug("orderBy",e);return Gg._create(n,t)}class Yg extends Vg{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new Yg(e,t,n)}_apply(e){return new Ym(e.firestore,e.converter,Pu(e._query,this._limit,this._limitType))}}function Qg(e){return zm("limit",e),Yg._create("limit",e,"F")}function Xg(e,t,n){if("string"==typeof(n=Jt(n))){if(""===n)throw new js(Os.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Cu(t)&&-1!==n.indexOf("/"))throw new js(Os.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(ol.fromString(n));if(!cl.isDocumentKey(r))throw new js(Os.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Uc(e,new cl(r))}if(n instanceof Qm)return Uc(e,n._key);throw new js(Os.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Vm(n)}.`)}function Zg(e,t){if(!Array.isArray(e)||0===e.length)throw new js(Os.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Jg(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new js(Os.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new js(Os.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class ev{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Rc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return pc(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(fc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ps()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return tc(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertVectorValue(e){var t,n,r;const i=null===(r=null===(n=null===(t=e.fields)||void 0===t?void 0:t[Ic].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map((e=>pc(e.doubleValue)));return new ug(i)}convertGeoPoint(e){return new cg(pc(e.latitude),pc(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=wc(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Ec(e));default:return null}}convertTimestamp(e){const t=hc(e);return new nl(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=ol.fromString(e);Ms(Ph(n));const r=new Ac(n.get(1),n.get(3)),i=new cl(n.popFirst(5));return r.isEqual(t)||Rs(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}function tv(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class nv extends ev{constructor(e){super(),this.firestore=e}convertBytes(e){return new og(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Qm(this.firestore,null,t)}}class rv{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class iv extends jg{constructor(e,t,n,r,i,a){super(e,t,n,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new av(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Ug("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class av extends iv{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class ov{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new rv(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new av(this._firestore,this._userDataWriter,n.key,n,new rv(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new js(Os.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new av(e._firestore,e._userDataWriter,n.doc.key,n.doc,new rv(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new av(e._firestore,e._userDataWriter,t.doc.key,t.doc,new rv(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,a=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),a=n.indexOf(t.doc.key)),{type:sv(t.type),doc:r,oldIndex:i,newIndex:a}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function sv(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ps()}}function lv(e){e=Wm(e,Qm);const t=Wm(e.firestore,rg);return Nm(ig(t),e._key).then((n=>vv(t,e,n)))}class cv extends ev{constructor(e){super(),this.firestore=e}convertBytes(e){return new og(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Qm(this.firestore,null,t)}}function uv(e){e=Wm(e,Ym);const t=Wm(e.firestore,rg),n=ig(t),r=new cv(t);return Bg(e._query),Om(n,e._query).then((n=>new ov(t,r,e,n)))}function dv(e,t,n){e=Wm(e,Qm);const r=Wm(e.firestore,rg),i=tv(e.converter,t,n);return gv(r,[yg(vg(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,yd.none())])}function hv(e,t,n){e=Wm(e,Qm);const r=Wm(e.firestore,rg),i=vg(r);let a;for(var o=arguments.length,s=new Array(o>3?o-3:0),l=3;l<o;l++)s[l-3]=arguments[l];return a="string"==typeof(t=Jt(t))||t instanceof sg?Sg(i,"updateDoc",e._key,t,n,s):Tg(i,"updateDoc",e._key,t),gv(r,[a.toMutation(e._key,yd.exists(!0))])}function pv(e){return gv(Wm(e.firestore,rg),[new Dd(e._key,yd.none())])}function fv(e,t){const n=Wm(e.firestore,rg),r=Jm(e),i=tv(e.converter,t);return gv(n,[yg(vg(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,yd.exists(!1))]).then((()=>r))}function mv(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=Jt(e);let s={includeMetadataChanges:!1,source:"default"},l=0;"object"!=typeof n[l]||ng(n[l])||(s=n[l],l++);const c={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(ng(n[l])){const e=n[l];n[l]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[l+1]=null===(a=e.error)||void 0===a?void 0:a.bind(e),n[l+2]=null===(o=e.complete)||void 0===o?void 0:o.bind(e)}let u,d,h;if(e instanceof Qm)d=Wm(e.firestore,rg),h=Su(e._key.path),u={next:t=>{n[l]&&n[l](vv(d,e,t))},error:n[l+1],complete:n[l+2]};else{const t=Wm(e,Ym);d=Wm(t.firestore,rg),h=t._query;const r=new cv(d);u={next:e=>{n[l]&&n[l](new ov(d,r,t,e))},error:n[l+1],complete:n[l+2]},Bg(e._query)}return function(e,t,n,r){const i=new _m(r),a=new Wf(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>Of(await Mm(e),a))),()=>{i.su(),e.asyncQueue.enqueueAndForget((async()=>jf(await Mm(e),a)))}}(ig(d),h,c,u)}function gv(e,t){return function(e,t){const n=new Fs;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=bm(e);try{const e=await function(e,t){const n=Ns(e),r=nl.now(),i=t.reduce(((e,t)=>e.add(t.key)),Zu());let a,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let s=Wu(),l=Zu();return n.ds.getEntries(e,i).next((e=>{s=e,s.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,s))).next((i=>{a=i;const o=[];for(const e of t){const t=Ad(e,a.get(e.key).overlayedDocument);null!=t&&o.push(new kd(e.key,t,Yc(t.value.mapValue),yd.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)})).next((t=>{o=t;const r=t.applyToLocalDocumentSet(a,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:qu(a)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Wa[e.currentUser.toKey()];r||(r=new rc(Ys)),r=r.insert(t,n),e.Wa[e.currentUser.toKey()]=r}(r,e.batchId,n),await mm(r,e.changes),await mf(r.remoteStore)}catch(e){const t=If(e,"Failed to persist write");n.reject(t)}}(await Lm(e),t,n))),n.promise}(ig(e),t)}function vv(e,t,n){const r=n.docs.get(t._key),i=new cv(e);return new iv(e,i,t._key,r,new rv(n.hasPendingWrites,n.fromCache),t.converter)}const yv={maxAttempts:5};class bv{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=vg(e)}set(e,t,n){this._verifyNotCommitted();const r=wv(e,this._firestore),i=tv(r.converter,t,n),a=yg(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,yd.none())),this}update(e,t,n){this._verifyNotCommitted();const r=wv(e,this._firestore);let i;for(var a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return i="string"==typeof(t=Jt(t))||t instanceof sg?Sg(this._dataReader,"WriteBatch.update",r._key,t,n,o):Tg(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(i.toMutation(r._key,yd.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=wv(e,this._firestore);return this._mutations=this._mutations.concat(new Dd(t._key,yd.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new js(Os.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function wv(e,t){if((e=Jt(e)).firestore!==t)throw new js(Os.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class Ev{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=vg(e)}get(e){const t=wv(e,this._firestore),n=new nv(this._firestore);return this._transaction.lookup([t._key]).then((e=>{if(!e||1!==e.length)return Ps();const r=e[0];if(r.isFoundDocument())return new jg(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new jg(this._firestore,n,t._key,null,t.converter);throw Ps()}))}set(e,t,n){const r=wv(e,this._firestore),i=tv(r.converter,t,n),a=yg(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}update(e,t,n){const r=wv(e,this._firestore);let i;for(var a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return i="string"==typeof(t=Jt(t))||t instanceof sg?Sg(this._dataReader,"Transaction.update",r._key,t,n,o):Tg(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,i),this}delete(e){const t=wv(e,this._firestore);return this._transaction.delete(t._key),this}}class xv extends Ev{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=wv(e,this._firestore),n=new cv(this._firestore);return super.get(e).then((e=>new iv(this._firestore,n,t._key,e._document,new rv(!1,!1),t.converter)))}}function _v(e,t,n){e=Wm(e,rg);const r=Object.assign(Object.assign({},yv),n);return function(e){if(e.maxAttempts<1)throw new js(Os.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new Fs;return e.asyncQueue.enqueueAndForget((async()=>{const i=await Pm(e);new Tm(e.asyncQueue,i,n,t,r).Iu()})),r.promise}(ig(e),(n=>t(new xv(e,n))),r)}function Av(){return new Eg("serverTimestamp")}function Tv(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new xg("arrayUnion",t)}function Sv(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new _g("arrayRemove",t)}function kv(e){return new Ag("increment",e)}function Cv(e){return ig(e=Wm(e,rg)),new bv(e,(t=>gv(e,t)))}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Ss=e}(gr),dr(new en("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const a=e.getProvider("app").getImmediate(),o=new rg(new $s(e.getProvider("auth-internal")),new Hs(a,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new js(Os.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ac(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),br(_s,As,e),br(_s,As,"esm2017")}();const Iv="firebasestorage.googleapis.com",Rv="storageBucket";class Dv extends Pt{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(Mv(e),`Firebase Storage: ${t} (${Mv(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Dv.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Mv(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}\n${this.customData.serverResponse}`:this.message=this._baseMessage}}var Lv,Pv;function Mv(e){return"storage/"+e}function Nv(){return new Dv(Lv.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function Ov(){return new Dv(Lv.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function jv(){return new Dv(Lv.CANCELED,"User canceled the upload/download.")}function Fv(){return new Dv(Lv.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Uv(e){return new Dv(Lv.INVALID_ARGUMENT,e)}function Bv(){return new Dv(Lv.APP_DELETED,"The Firebase app was deleted.")}function $v(e,t){return new Dv(Lv.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function Vv(e){throw new Dv(Lv.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(Lv||(Lv={}));class Wv{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=Wv.makeFromUrl(e,t)}catch(Q_){return new Wv(e,"")}if(""===n.path)return n;throw r=e,new Dv(Lv.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";const i=new RegExp("^gs://"+r+"(/(.*))?$","i");function a(e){e.path_=decodeURIComponent(e.path)}const o=t.replace(/[.]/g,"\\."),s=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${o}/v[A-Za-z0-9_]+/b/${r}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:a},{regex:new RegExp(`^https?://${t===Iv?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${r}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:a}];for(let l=0;l<s.length;l++){const t=s[l],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let i=r[t.indices.path];i||(i=""),n=new Wv(e,i),t.postModify(n);break}}if(null==n)throw function(e){return new Dv(Lv.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class zv{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function Hv(e){return"string"===typeof e||e instanceof String}function qv(e){return Gv()&&e instanceof Blob}function Gv(){return"undefined"!==typeof Blob}function Kv(e,t,n,r){if(r<t)throw Uv(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw Uv(`Invalid value for '${e}'. Expected ${n} or less.`)}function Yv(e,t,n){let r=t;return null==n&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function Qv(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1),n}function Xv(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(Pv||(Pv={}));class Zv{constructor(e,t,n,r,i,a,o,s,l,c,u){let d=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=a,this.callback_=o,this.errorCallback_=s,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=u,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()}))}start_(){const e=(e,t)=>{if(t)return void e(!1,new Jv(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.body_,this.headers_).then((()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===Pv.NO_ERROR,i=n.getStatus();if(!t||Xv(i,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===Pv.ABORT;return void e(!1,new Jv(!1,null,t))}const a=-1!==this.successCodes_.indexOf(i);e(!0,new Jv(a,n))}))},t=(e,t)=>{const n=this.resolve_,r=this.reject_,i=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(i,i.getResponse());!function(e){return void 0!==e}(e)?n():n(e)}catch(Q_){r(Q_)}else if(null!==i){const e=Nv();e.serverResponse=i.getErrorText(),this.errorCallback_?r(this.errorCallback_(i,e)):r(e)}else if(t.canceled){r(this.appDelete_?Bv():jv())}else{r(Ov())}};this.canceled_?t(0,new Jv(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,i=null,a=null,o=!1,s=0;function l(){return 2===s}let c=!1;function u(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function d(t){i=setTimeout((()=>{i=null,e(p,l())}),t)}function h(){a&&clearTimeout(a)}function p(e){if(c)return void h();for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return h(),void u.call(null,e,...n);if(l()||o)return h(),void u.call(null,e,...n);let a;r<64&&(r*=2),1===s?(s=2,a=0):a=1e3*(r+Math.random()),d(a)}let f=!1;function m(e){f||(f=!0,h(),c||(null!==i?(e||(s=2),clearTimeout(i),d(0)):e||(s=1)))}return d(0),a=setTimeout((()=>{o=!0,m(!0)}),n),m}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Jv{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function ey(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function ty(){const e=ey();for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){const t=new e;for(let e=0;e<n.length;e++)t.append(n[e]);return t.getBlob()}if(Gv())return new Blob(n);throw new Dv(Lv.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function ny(e){if("undefined"===typeof atob)throw t="base-64",new Dv(Lv.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`);var t;return atob(e)}const ry="raw",iy="base64",ay="base64url",oy="data_url";class sy{constructor(e,t){this.data=e,this.contentType=t||null}}function ly(e,t){switch(e){case ry:return new sy(cy(t));case iy:case ay:return new sy(uy(e,t));case oy:return new sy(function(e){const t=new dy(e);return t.base64?uy(iy,t.rest):function(e){let t;try{t=decodeURIComponent(e)}catch(Q_){throw $v(oy,"Malformed data URL.")}return cy(t)}(t.rest)}(t),new dy(t).contentType)}throw Nv()}function cy(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r)){if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1))){r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else t.push(239,191,189)}else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function uy(e,t){switch(e){case iy:{const n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r){throw $v(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?")}break}case ay:{const n=-1!==t.indexOf("+"),r=-1!==t.indexOf("/");if(n||r){throw $v(e,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=ny(t)}catch(Q_){if(Q_.message.includes("polyfill"))throw Q_;throw $v(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class dy{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw $v(oy,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;null!=n&&(this.base64=function(e,t){const n=e.length>=t.length;if(!n)return!1;return e.substring(e.length-t.length)===t}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}class hy{constructor(e,t){let n=0,r="";qv(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(qv(this.data_)){const n=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,e,t);return null===n?null:new hy(n)}{const n=new Uint8Array(this.data_.buffer,e,t-e);return new hy(n,!0)}}static getBlob(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(Gv()){const e=t.map((e=>e instanceof hy?e.data_:e));return new hy(ty.apply(null,e))}{const e=t.map((e=>Hv(e)?ly(ry,e).data:e.data_));let n=0;e.forEach((e=>{n+=e.byteLength}));const r=new Uint8Array(n);let i=0;return e.forEach((e=>{for(let t=0;t<e.length;t++)r[i++]=e[t]})),new hy(r,!0)}}uploadData(){return this.data_}}function py(e){let t;try{t=JSON.parse(e)}catch(Q_){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function fy(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function my(e,t){return t}class gy{constructor(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||my}}let vy=null;function yy(){if(vy)return vy;const e=[];e.push(new gy("bucket")),e.push(new gy("generation")),e.push(new gy("metageneration")),e.push(new gy("name","fullPath",!0));const t=new gy("name");t.xform=function(e,t){return function(e){return!Hv(e)||e.length<2?e:fy(e)}(t)},e.push(t);const n=new gy("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new gy("timeCreated")),e.push(new gy("updated")),e.push(new gy("md5Hash",null,!0)),e.push(new gy("cacheControl",null,!0)),e.push(new gy("contentDisposition",null,!0)),e.push(new gy("contentEncoding",null,!0)),e.push(new gy("contentLanguage",null,!0)),e.push(new gy("contentType",null,!0)),e.push(new gy("metadata","customMetadata",!0)),vy=e,vy}function by(e,t,n){const r={type:"file"},i=n.length;for(let a=0;a<i;a++){const e=n[a];r[e.local]=e.xform(r,t[e.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){const n=e.bucket,r=e.fullPath,i=new Wv(n,r);return t._makeStorageReference(i)}})}(r,e),r}function wy(e,t,n){const r=py(t);if(null===r)return null;return by(e,r,n)}function Ey(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const r=t[i];r.writable&&(n[r.server]=e[r.local])}return JSON.stringify(n)}class xy{constructor(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function _y(e){if(!e)throw Nv()}function Ay(e,t){return function(n,r){const i=wy(e,r,t);return _y(null!==i),i}}function Ty(e,t){return function(n,r){const i=wy(e,r,t);return _y(null!==i),function(e,t,n,r){const i=py(t);if(null===i)return null;if(!Hv(i.downloadTokens))return null;const a=i.downloadTokens;if(0===a.length)return null;const o=encodeURIComponent;return a.split(",").map((t=>{const i=e.bucket,a=e.fullPath;return Yv("/b/"+o(i)+"/o/"+o(a),n,r)+Qv({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function Sy(e){return function(t,n){let r;var i,a;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new Dv(Lv.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new Dv(Lv.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(a=e.bucket,r=new Dv(Lv.QUOTA_EXCEEDED,"Quota for bucket '"+a+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new Dv(Lv.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function ky(e){const t=Sy(e);return function(n,r){let i=t(n,r);var a;return 404===n.getStatus()&&(a=e.path,i=new Dv(Lv.OBJECT_NOT_FOUND,"Object '"+a+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function Cy(e,t,n){const r=Yv(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new xy(r,"GET",Ay(e,n),i);return a.errorHandler=ky(t),a}function Iy(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function Ry(e,t,n,r,i){const a=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};const s=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+s;const l=Iy(t,r,i),c="--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Ey(l,n)+"\r\n--"+s+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",u="\r\n--"+s+"--",d=hy.getBlob(c,r,u);if(null===d)throw Fv();const h={name:l.fullPath},p=Yv(a,e.host,e._protocol),f=e.maxUploadRetryTime,m=new xy(p,"POST",Ay(e,n),f);return m.urlParams=h,m.headers=o,m.body=d.uploadData(),m.errorHandler=Sy(t),m}class Dy{constructor(e,t,n,r){this.current=e,this.total=t,this.finalized=!!n,this.metadata=r||null}}function Ly(e,t){let n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(Q_){_y(!1)}return _y(!!n&&-1!==(t||["active"]).indexOf(n)),n}const Py=262144;function My(e,t,n,r,i,a,o,s){const l=new Dy(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw new Dv(Lv.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.");const c=l.total-l.current;let u=c;i>0&&(u=Math.min(u,i));const d=l.current,h=d+u;let p="";p=0===u?"finalize":c===u?"upload, finalize":"upload";const f={"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":`${l.current}`},m=r.slice(d,h);if(null===m)throw Fv();const g=t.maxUploadRetryTime,v=new xy(n,"POST",(function(e,n){const i=Ly(e,["active","final"]),o=l.current+u,s=r.size();let c;return c="final"===i?Ay(t,a)(e,n):null,new Dy(o,s,"final"===i,c)}),g);return v.headers=f,v.body=m.uploadData(),v.progressCallback=s||null,v.errorHandler=Sy(e),v}const Ny="running",Oy="paused",jy="success",Fy="canceled",Uy="error";function By(e){switch(e){case"running":case"pausing":case"canceling":return Ny;case"paused":return Oy;case"success":return jy;case"canceled":return Fy;default:return Uy}}class $y{constructor(e,t,n){const r=function(e){return"function"===typeof e}(e)||null!=t||null!=n;if(r)this.next=e,this.error=null!==t&&void 0!==t?t:void 0,this.complete=null!==n&&void 0!==n?n:void 0;else{const t=e;this.next=t.next,this.error=t.error,this.complete=t.complete}}}function Vy(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Promise.resolve().then((()=>e(...n)))}}class Wy{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Pv.NO_ERROR,this.sendPromise_=new Promise((e=>{this.xhr_.addEventListener("abort",(()=>{this.errorCode_=Pv.ABORT,e()})),this.xhr_.addEventListener("error",(()=>{this.errorCode_=Pv.NETWORK_ERROR,e()})),this.xhr_.addEventListener("load",(()=>{e()}))}))}send(e,t,n,r){if(this.sent_)throw Vv("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(const i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Vv("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Vv("cannot .getStatus() before sending");try{return this.xhr_.status}catch(Q_){return-1}}getResponse(){if(!this.sent_)throw Vv("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Vv("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class zy extends Wy{initXhr(){this.xhr_.responseType="text"}}function Hy(){return new zy}class qy{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=n,this._mappings=yy(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=e=>{if(this._request=void 0,this._chunkMultiplier=1,e._codeEquals(Lv.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const t=this.isExponentialBackoffExpired();if(Xv(e.status,[])){if(!t)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();e=Ov()}this._error=e,this._transition("error")}},this._metadataErrorHandler=e=>{this._request=void 0,e._codeEquals(Lv.CANCELED)?this.completeTransitions_():(this._error=e,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise(((e,t)=>{this._resolve=e,this._reject=t,this._start()})),this._promise.then(null,(()=>{}))}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout((()=>{this.pendingTimeout=void 0,this._continueUpload()}),this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((t=>{let[n,r]=t;switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}}))}_createResumable(){this._resolveToken(((e,t)=>{const n=function(e,t,n,r,i){const a=t.bucketOnlyServerUrl(),o=Iy(t,r,i),s={name:o.fullPath},l=Yv(a,e.host,e._protocol),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},u=Ey(o,n),d=e.maxUploadRetryTime,h=new xy(l,"POST",(function(e){let t;Ly(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(Q_){_y(!1)}return _y(Hv(t)),t}),d);return h.urlParams=s,h.headers=c,h.body=u,h.errorHandler=Sy(t),h}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(n,Hy,e,t);this._request=r,r.getPromise().then((e=>{this._request=void 0,this._uploadUrl=e,this._needToFetchStatus=!1,this.completeTransitions_()}),this._errorHandler)}))}_fetchStatus(){const e=this._uploadUrl;this._resolveToken(((t,n)=>{const r=function(e,t,n,r){const i=e.maxUploadRetryTime,a=new xy(n,"POST",(function(e){const t=Ly(e,["active","final"]);let n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(Q_){_y(!1)}n||_y(!1);const i=Number(n);return _y(!isNaN(i)),new Dy(i,r.size(),"final"===t)}),i);return a.headers={"X-Goog-Upload-Command":"query"},a.errorHandler=Sy(t),a}(this._ref.storage,this._ref._location,e,this._blob),i=this._ref.storage._makeRequest(r,Hy,t,n);this._request=i,i.getPromise().then((e=>{this._request=void 0,this._updateProgress(e.current),this._needToFetchStatus=!1,e.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()}),this._errorHandler)}))}_continueUpload(){const e=Py*this._chunkMultiplier,t=new Dy(this._transferred,this._blob.size()),n=this._uploadUrl;this._resolveToken(((r,i)=>{let a;try{a=My(this._ref._location,this._ref.storage,n,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(Q_){return this._error=Q_,void this._transition("error")}const o=this._ref.storage._makeRequest(a,Hy,r,i,!1);this._request=o,o.getPromise().then((e=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(e.current),e.finalized?(this._metadata=e.metadata,this._transition("success")):this.completeTransitions_()}),this._errorHandler)}))}_increaseMultiplier(){2*(Py*this._chunkMultiplier)<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken(((e,t)=>{const n=Cy(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(n,Hy,e,t);this._request=r,r.getPromise().then((e=>{this._request=void 0,this._metadata=e,this._transition("success")}),this._metadataErrorHandler)}))}_oneShotUpload(){this._resolveToken(((e,t)=>{const n=Ry(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(n,Hy,e,t);this._request=r,r.getPromise().then((e=>{this._request=void 0,this._metadata=e,this._updateProgress(this._blob.size()),this._transition("success")}),this._errorHandler)}))}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=jv(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=By(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,n,r){const i=new $y(t||void 0,n||void 0,r||void 0);return this._addObserver(i),()=>{this._removeObserver(i)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise();this._observers.slice().forEach((e=>{this._notifyObserver(e)}))}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(By(this._state)){case jy:Vy(this._resolve.bind(null,this.snapshot))();break;case Fy:case Uy:Vy(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(By(this._state)){case Ny:case Oy:e.next&&Vy(e.next.bind(e,this.snapshot))();break;case jy:e.complete&&Vy(e.complete.bind(e))();break;default:e.error&&Vy(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Gy{constructor(e,t){this._service=e,this._location=t instanceof Wv?t:Wv.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Gy(e,t)}get root(){const e=new Wv(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return fy(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new Wv(this._location.bucket,e);return new Gy(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new Dv(Lv.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function Ky(e,t,n){e._throwIfRoot("uploadBytes");const r=Ry(e.storage,e._location,yy(),new hy(t,!0),n);return e.storage.makeRequestWithTokens(r,Hy).then((t=>({metadata:t,ref:e})))}function Yy(e){e._throwIfRoot("getDownloadURL");const t=function(e,t,n){const r=Yv(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new xy(r,"GET",Ty(e,n),i);return a.errorHandler=ky(t),a}(e.storage,e._location,yy());return e.storage.makeRequestWithTokens(t,Hy).then((e=>{if(null===e)throw new Dv(Lv.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e}))}function Qy(e){e._throwIfRoot("deleteObject");const t=function(e,t){const n=Yv(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,i=new xy(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=ky(t),i}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,Hy)}function Xy(e,t){const n=function(e,t){const n=t.split("/").filter((e=>e.length>0)).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new Wv(e._location.bucket,n);return new Gy(e.storage,r)}function Zy(e,t){if(e instanceof tb){const n=e;if(null==n._bucket)throw new Dv(Lv.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Rv+"' property when initializing the app?");const r=new Gy(n,n._bucket);return null!=t?Zy(r,t):r}return void 0!==t?Xy(e,t):e}function Jy(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof tb)return new Gy(e,t);throw Uv("To use ref(service, url), the first argument must be a Storage instance.")}return Zy(e,t)}function eb(e,t){const n=null===t||void 0===t?void 0:t[Rv];return null==n?null:Wv.makeFromBucketSpec(n,e)}class tb{constructor(e,t,n,r,i){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=i,this._bucket=null,this._host=Iv,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?Wv.makeFromBucketSpec(r,this._host):eb(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=Wv.makeFromBucketSpec(this._url,e):this._bucket=eb(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Kv("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Kv("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){if(pr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach((e=>e.cancel())),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Gy(this,e)}_makeRequest(e,t,n,r){let i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new zv(Bv());{const a=function(e,t,n,r,i,a){let o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const s=Qv(e.urlParams),l=e.url+s,c=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(c,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(c,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(c,a),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(c,r),new Zv(l,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}(e,this._appId,n,r,t,this._firebaseVersion,i);return this._requests.add(a),a.getPromise().then((()=>this._requests.delete(a)),(()=>this._requests.delete(a))),a}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const nb="@firebase/storage",rb="0.13.7",ib="storage";function ab(e,t,n){return Ky(e=Jt(e),t,n)}function ob(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new qy(e,new hy(t),n)}(e=Jt(e),t,n)}function sb(e){return Yy(e=Jt(e))}function lb(e){return Qy(e=Jt(e))}function cb(e,t){return Jy(e=Jt(e),t)}function ub(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yr(),t=arguments.length>1?arguments[1]:void 0;e=Jt(e);const n=hr(e,ib).getImmediate({identifier:t}),r=xt("storage");return r&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken="string"===typeof i?i:St(i,e.app.options.projectId))}(e,t,n,r)}(n,...r),n}function db(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new tb(r,i,a,n,gr)}dr(new en(ib,db,"PUBLIC").setMultipleInstances(!0)),br(nb,rb,""),br(nb,rb,"esm2017");const hb="@firebase/database",pb="1.0.14";let fb="";function mb(e){fb=e}class gb{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),jt(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:Ot(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class vb{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return Ut(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const yb=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new gb(t)}}catch(Q_){}return new vb},bb=yb("localStorage"),wb=yb("sessionStorage"),Eb=new hn("@firebase/database"),xb=function(){let e=1;return function(){return e++}}(),_b=function(e){const t=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);if(i>=55296&&i<=56319){const t=i-55296;r++,ct(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(t<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new Kt;n.update(t);const r=n.digest();return ht.encodeByteArray(r)},Ab=function(){let e="";for(let t=0;t<arguments.length;t++){const n=t<0||arguments.length<=t?void 0:arguments[t];Array.isArray(n)||n&&"object"===typeof n&&"number"===typeof n.length?e+=Ab.apply(null,n):e+="object"===typeof n?jt(n):n,e+=" "}return e};let Tb=null,Sb=!0;const kb=function(e,t){ct(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(Eb.logLevel=sn.VERBOSE,Tb=Eb.log.bind(Eb),t&&wb.set("logging_enabled",!0)):"function"===typeof e?Tb=e:(Tb=null,wb.remove("logging_enabled"))},Cb=function(){if(!0===Sb&&(Sb=!1,null===Tb&&!0===wb.get("logging_enabled")&&kb(!0)),Tb){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=Ab.apply(null,t);Tb(r)}},Ib=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Cb(e,...n)}},Rb=function(){const e="FIREBASE INTERNAL ERROR: "+Ab(...arguments);Eb.error(e)},Db=function(){const e=`FIREBASE FATAL ERROR: ${Ab(...arguments)}`;throw Eb.error(e),new Error(e)},Lb=function(){const e="FIREBASE WARNING: "+Ab(...arguments);Eb.warn(e)},Pb=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},Mb="[MIN_NAME]",Nb="[MAX_NAME]",Ob=function(e,t){if(e===t)return 0;if(e===Mb||t===Nb)return-1;if(t===Mb||e===Nb)return 1;{const n=zb(e),r=zb(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1}},jb=function(e,t){return e===t?0:e<t?-1:1},Fb=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+jt(t))},Ub=function(e){if("object"!==typeof e||null===e)return jt(e);const t=[];for(const r in e)t.push(r);t.sort();let n="{";for(let r=0;r<t.length;r++)0!==r&&(n+=","),n+=jt(t[r]),n+=":",n+=Ub(e[t[r]]);return n+="}",n},Bb=function(e,t){const n=e.length;if(n<=t)return[e];const r=[];for(let i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function $b(e,t){for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])}const Vb=function(e){ct(!Pb(e),"Invalid JSON number");const t=1023;let n,r,i,a,o;0===e?(r=0,i=0,n=1/e===-1/0?1:0):(n=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(a=Math.min(Math.floor(Math.log(e)/Math.LN2),t),r=a+t,i=Math.round(e*Math.pow(2,52-a)-Math.pow(2,52))):(r=0,i=Math.round(e/Math.pow(2,-1074))));const s=[];for(o=52;o;o-=1)s.push(i%2?1:0),i=Math.floor(i/2);for(o=11;o;o-=1)s.push(r%2?1:0),r=Math.floor(r/2);s.push(n?1:0),s.reverse();const l=s.join("");let c="";for(o=0;o<64;o+=8){let e=parseInt(l.substr(o,8),2).toString(16);1===e.length&&(e="0"+e),c+=e}return c.toLowerCase()};const Wb=new RegExp("^-?(0*)\\d{1,10}$"),zb=function(e){if(Wb.test(e)){const t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},Hb=function(e){try{e()}catch(Q_){setTimeout((()=>{const t=Q_.stack||"";throw Lb("Exception was thrown by user callback.",t),Q_}),Math.floor(0))}},qb=function(e,t){const n=setTimeout(e,t);return"number"===typeof n&&"undefined"!==typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"===typeof n&&n.unref&&n.unref(),n};class Gb{constructor(e,t){this.appCheckProvider=t,this.appName=e.name,pr(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=null===t||void 0===t?void 0:t.getImmediate({optional:!0}),this.appCheck||null===t||void 0===t||t.get().then((e=>this.appCheck=e))}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise(((t,n)=>{setTimeout((()=>{this.appCheck?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((t=>t.addTokenListener(e)))}notifyForInvalidToken(){Lb(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Kb{constructor(e,t,n){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit((e=>this.auth_=e))}getToken(e){return this.auth_?this.auth_.getToken(e).catch((e=>e&&"auth/token-not-initialized"===e.code?(Cb("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e))):new Promise(((t,n)=>{setTimeout((()=>{this.auth_?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((t=>t.addAuthTokenListener(e)))}removeTokenChangeListener(e){this.authProvider_.get().then((t=>t.removeAuthTokenListener(e)))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Lb(e)}}class Yb{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Yb.OWNER="owner";const Qb="5",Xb=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Zb="ac",Jb="websocket",ew="long_polling";class tw{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7],l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null;this.secure=t,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=a,this.includeNamespaceInQueryParams=o,this.isUsingEmulator=s,this.emulatorOptions=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=bb.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&bb.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function nw(e,t,n){let r;if(ct("string"===typeof t,"typeof type must == string"),ct("object"===typeof n,"typeof params must == object"),t===Jb)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==ew)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);const i=[];return $b(n,((e,t)=>{i.push(e+"="+t)})),r+i.join("&")}class rw{constructor(){this.counters_={}}incrementCounter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;Ut(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return vt(this.counters_)}}const iw={},aw={};function ow(e){const t=e.toString();return iw[t]||(iw[t]=new rw),iw[t]}class sw{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const e=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let t=0;t<e.length;++t)e[t]&&Hb((()=>{this.onMessage_(e[t])}));if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const lw="start";class cw{constructor(e,t,n,r,i,a,o){this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=a,this.lastSessionId=o,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Ib(e),this.stats_=ow(t),this.urlFn=e=>(this.appCheckToken&&(e[Zb]=this.appCheckToken),nw(t,ew,e))}open(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new sw(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(Rt()||"complete"===document.readyState)e();else{let t=!1;const n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(()=>{"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((()=>{if(this.isClosed_)return;this.scriptTagHolder=new uw((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[i,a,o,s,l]=t;if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===lw)n.id=a,n.password=o;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);a?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(a,(()=>{n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[i,a]=t;n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,a)}),(()=>{this.onClosed_()}),this.urlFn);const e={};e[lw]="t",e.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=this.scriptTagHolder.uniqueCallbackIdentifier),e.v=Qb,this.transportSessionId&&(e.s=this.transportSessionId),this.lastSessionId&&(e.ls=this.lastSessionId),this.applicationId&&(e.p=this.applicationId),this.appCheckToken&&(e[Zb]=this.appCheckToken),"undefined"!==typeof location&&location.hostname&&Xb.test(location.hostname)&&(e.r="f");const t=this.urlFn(e);this.log_("Connecting via long-poll to "+t),this.scriptTagHolder.addTag(t,(()=>{}))}))}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){cw.forceAllow_=!0}static forceDisallow(){cw.forceDisallow_=!0}static isAvailable(){return!Rt()&&(!!cw.forceAllow_||!cw.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=jt(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=ft(t),r=Bb(n,1840);for(let i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(Rt())return;this.myDisconnFrame=document.createElement("iframe");const n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=jt(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class uw{constructor(e,t,n,r){if(this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Rt())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=xb(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=uw.createIFrame_();let n="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)){n='<script>document.domain="'+document.domain+'";<\/script>'}const r="<html><body>"+n+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(r),this.myIFrame.doc.close()}catch(Q_){Cb("frame writing exception"),Q_.stack&&Cb(Q_.stack),Cb(Q_)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Cb("No IE domain setting required")}catch(Q_){const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout((()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)}),Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),n="",r=0;for(;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;{const e=this.pendingSegs.shift();n=n+"&seg"+r+"="+e.seg+"&ts"+r+"="+e.ts+"&d"+r+"="+e.d,r++}}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const n=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(n,Math.floor(25e3));this.addTag(e,(()=>{clearTimeout(r),n()}))}addTag(e,t){Rt()?this.doNodeLongPoll(e,t):setTimeout((()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){const e=n.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),t())},n.onerror=()=>{Cb("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch(Q_){}}),Math.floor(1))}}let dw=null;"undefined"!==typeof MozWebSocket?dw=MozWebSocket:"undefined"!==typeof WebSocket&&(dw=WebSocket);class hw{constructor(e,t,n,r,i,a,o){this.connId=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Ib(this.connId),this.stats_=ow(t),this.connURL=hw.connectionURL_(t,a,o,r,n),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,n,r,i){const a={};return a.v=Qb,!Rt()&&"undefined"!==typeof location&&location.hostname&&Xb.test(location.hostname)&&(a.r="f"),t&&(a.s=t),n&&(a.ls=n),r&&(a[Zb]=r),i&&(a.p=i),nw(e,Jb,a)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,bb.set("previous_websocket_failure",!0);try{let e;if(Rt()){const t=this.nodeAdmin?"AdminNode":"Node";e={headers:{"User-Agent":`Firebase/${Qb}/${fb}/${process.platform}/${t}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(e.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(e.headers["X-Firebase-AppCheck"]=this.appCheckToken);const n={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_ALGOLIA_API_KEY:"b94f7163a6855940c1a0d94e635a307c",REACT_APP_ALGOLIA_APP_ID:"7PVTC2J64R",REACT_APP_ALGOLIA_INDEX_NAME:"searches",REACT_APP_API_URL:"https://sideeye-backend-production.up.railway.app",REACT_APP_FIREBASE_API_KEY:"AIzaSyBI9pvyseKR-5dw3eXuZgTLnG3OcvNGbeI",REACT_APP_FIREBASE_APP_ID:"1:864667627333:web:1ec087179141d1e91a982c",REACT_APP_FIREBASE_AUTH_DOMAIN:"sideeye.uk",REACT_APP_FIREBASE_DATABASE_URL:"https://sideeye-bafda-default-rtdb.europe-west1.firebasedatabase.app",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"864667627333",REACT_APP_FIREBASE_PROJECT_ID:"sideeye-bafda",REACT_APP_FIREBASE_STORAGE_BUCKET:"sideeye-bafda.firebasestorage.app"},r=0===this.connURL.indexOf("wss://")?n.HTTPS_PROXY||n.https_proxy:n.HTTP_PROXY||n.http_proxy;r&&(e.proxy={origin:r})}this.mySock=new dw(this.connURL,[],e)}catch(Q_){this.log_("Error instantiating WebSocket.");const t=Q_.message||Q_.data;return t&&this.log_(t),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=e=>{this.handleIncomingFrame(e)},this.mySock.onerror=e=>{this.log_("WebSocket error.  Closing connection.");const t=e.message||e.data;t&&this.log_(t),this.onClosed_()}}start(){}static forceDisallow(){hw.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!==typeof navigator&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(t);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==dw&&!hw.forceDisallow_}static previouslyFailed(){return bb.isInMemoryStorage||!0===bb.get("previous_websocket_failure")}markConnectionHealthy(){bb.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const e=this.frames.join("");this.frames=null;const t=Ot(e);this.onMessage(t)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(ct(null===this.frames,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{const e=this.extractFrameCount_(t);null!==e&&this.appendFrame_(e)}}send(e){this.resetKeepAlive();const t=jt(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=Bb(t,16384);n.length>1&&this.sendString_(String(n.length));for(let r=0;r<n.length;r++)this.sendString_(n[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()}),Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(Q_){this.log_("Exception thrown from WebSocket.send():",Q_.message||Q_.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}hw.responsesRequiredToBeHealthy=2,hw.healthyTimeout=3e4;class pw{static get ALL_TRANSPORTS(){return[cw,hw]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const t=hw&&hw.isAvailable();let n=t&&!hw.previouslyFailed();if(e.webSocketOnly&&(t||Lb("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[hw];else{const e=this.transports_=[];for(const t of pw.ALL_TRANSPORTS)t&&t.isAvailable()&&e.push(t);pw.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}pw.globalTransportInitialized_=!1;class fw{constructor(e,t,n,r,i,a,o,s,l,c){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=a,this.onReady_=o,this.onDisconnect_=s,this.onKill_=l,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Ib("c:"+this.id+":"),this.transportManager_=new pw(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((()=>{this.conn_&&this.conn_.open(t,n)}),Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=qb((()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))}),Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Fb("t",e),n=Fb("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Fb("t",e),n=Fb("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Fb("t",e);if("d"in e){const n=e.d;if("h"===t){const e=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(e.h=this.repoInfo_.host),this.onHandshake_(e)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let e=0;e<this.pendingDataMessages.length;++e)this.onDataMessage_(this.pendingDataMessages[e]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?Rb("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Rb("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),Qb!==n&&Lb("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,n),qb((()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())}),Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):qb((()=>{this.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(bb.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class mw{put(e,t,n,r){}merge(e,t,n,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,n){}onDisconnectMerge(e,t,n){}onDisconnectCancel(e,t){}reportStats(e){}}class gw{constructor(e){this.allowedEvents_=e,this.listeners_={},ct(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(let e=0;e<i.length;e++)i[e].callback.apply(i[e].context,n)}}on(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});const r=this.getInitialEvent(e);r&&t.apply(n,r)}off(e,t,n){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}validateEventType_(e){ct(this.allowedEvents_.find((t=>t===e)),"Unknown event: "+e)}}class vw extends gw{static getInstance(){return new vw}constructor(){super(["online"]),this.online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||Ct()||(window.addEventListener("online",(()=>{this.online_||(this.online_=!0,this.trigger("online",!0))}),!1),window.addEventListener("offline",(()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))}),!1))}getInitialEvent(e){return ct("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class yw{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let t=0;for(let e=0;e<this.pieces_.length;e++)this.pieces_[e].length>0&&(this.pieces_[t]=this.pieces_[e],t++);this.pieces_.length=t,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function bw(){return new yw("")}function ww(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function Ew(e){return e.pieces_.length-e.pieceNum_}function xw(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new yw(e.pieces_,t)}function _w(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function Aw(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function Tw(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new yw(t,0)}function Sw(e,t){const n=[];for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof yw)for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{const e=t.split("/");for(let t=0;t<e.length;t++)e[t].length>0&&n.push(e[t])}return new yw(n,0)}function kw(e){return e.pieceNum_>=e.pieces_.length}function Cw(e,t){const n=ww(e),r=ww(t);if(null===n)return t;if(n===r)return Cw(xw(e),xw(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function Iw(e,t){if(Ew(e)!==Ew(t))return!1;for(let n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function Rw(e,t){let n=e.pieceNum_,r=t.pieceNum_;if(Ew(e)>Ew(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}class Dw{constructor(e,t){this.errorPrefix_=t,this.parts_=Aw(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=Zt(this.parts_[n]);Lw(this)}}function Lw(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Pw(e))}function Pw(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}class Mw extends gw{static getInstance(){return new Mw}constructor(){let e,t;super(["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(t="visibilitychange",e="hidden"):"undefined"!==typeof document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):"undefined"!==typeof document.msHidden?(t="msvisibilitychange",e="msHidden"):"undefined"!==typeof document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,(()=>{const t=!document[e];t!==this.visible_&&(this.visible_=t,this.trigger("visible",t))}),!1)}getInitialEvent(e){return ct("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Nw=1e3;class Ow extends mw{constructor(e,t,n,r,i,a,o,s){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=n,this.onConnectStatus_=r,this.onServerInfoUpdate_=i,this.authTokenProvider_=a,this.appCheckTokenProvider_=o,this.authOverride_=s,this.id=Ow.nextPersistentConnectionId_++,this.log_=Ib("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Nw,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,s&&!Rt())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Mw.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&vw.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,n){const r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(jt(i)),ct(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}get(e){this.initConnection_();const t=new Tt,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:e=>{const n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;const r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}listen(e,t,n,r){this.initConnection_();const i=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+i),this.listens.has(a)||this.listens.set(a,new Map),ct(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),ct(!this.listens.get(a).has(i),"listen() called twice for same path/queryId.");const o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(a).set(i,o),this.connected_&&this.sendListen_(o)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,(n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(n)}))}sendListen_(e){const t=e.query,n=t._path.toString(),r=t._queryIdentifier;this.log_("Listen on "+n+" for "+r);const i={p:n};e.tag&&(i.q=t._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest("q",i,(i=>{const a=i.d,o=i.s;Ow.warnOnListenWarnings_(a,t);(this.listens.get(n)&&this.listens.get(n).get(r))===e&&(this.log_("listen response",i),"ok"!==o&&this.removeListen_(n,r),e.onComplete&&e.onComplete(o,a))}))}static warnOnListenWarnings_(e,t){if(e&&"object"===typeof e&&Ut(e,"w")){const n=Bt(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const e='".indexOn": "'+t._queryParams.getIndex().toString()+'"',n=t._path.toString();Lb(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${e} at ${n} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(()=>{})),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||function(e){const t=Ft(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(()=>{}))}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=function(e){const t=Ft(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(e)?"auth":"gauth",n={cred:e};null===this.authOverride_?n.noauth=!0:"object"===typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(t,n,(t=>{const n=t.s,r=t.d||"error";this.authToken_===e&&("ok"===n?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(n,r))}))}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(e=>{const t=e.s,n=e.d||"error";"ok"===t?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,n)}))}unlisten(e,t){const n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),ct(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query");this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}sendUnlisten_(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);const i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}onDisconnectPut(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}onDisconnectMerge(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,n,r){const i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(e=>{r&&setTimeout((()=>{r(e.s,e.d)}),Math.floor(0))}))}put(e,t,n,r){this.putInternal("p",e,t,n,r)}merge(e,t,n,r){this.putInternal("m",e,t,n,r)}putInternal(e,t,n,r,i){this.initConnection_();const a={p:t,d:n};void 0!==i&&(a.h=i),this.outstandingPuts_.push({action:e,request:a,onComplete:r}),this.outstandingPutCount_++;const o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,n,(n=>{this.log_(t+" response",n),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),r&&r(n.s,n.d)}))}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,(e=>{if("ok"!==e.s){const t=e.d;this.log_("reportStats","Error sending stats: "+t)}}))}}onDataMessage_(e){if("r"in e){this.log_("from server: "+jt(e));const t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):Rb("Unrecognized action received from server: "+jt(e)+"\nAre you using the latest client?")}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){ct(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((()=>{this.establishConnectionTimer_=null,this.establishConnection_()}),Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Nw,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Nw,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Nw),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();const e=Math.max(0,(new Date).getTime()-this.lastConnectionAttemptTime_);let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+Ow.nextConnectionId_++,i=this.lastSessionId;let a=!1,o=null;const s=function(){o?o.close():(a=!0,n())},l=function(e){ct(o,"sendRequest call when we're not connected not allowed."),o.sendRequest(e)};this.realtime_={close:s,sendRequest:l};const c=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[s,l]=await Promise.all([this.authTokenProvider_.getToken(c),this.appCheckTokenProvider_.getToken(c)]);a?Cb("getToken() completed but was canceled"):(Cb("getToken() completed. Creating connection."),this.authToken_=s&&s.accessToken,this.appCheckToken_=l&&l.token,o=new fw(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,n,(e=>{Lb(e+" ("+this.repoInfo_.toString()+")"),this.interrupt("server_kill")}),i))}catch(Rb){this.log_("Failed to get token: "+Rb),a||(this.repoInfo_.nodeAdmin&&Lb(Rb),s())}}}interrupt(e){Cb("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Cb("Resuming connection for reason: "+e),delete this.interruptReasons_[e],$t(this.interruptReasons_)&&(this.reconnectDelay_=Nw,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let n;n=t?t.map((e=>Ub(e))).join("$"):"default";const r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,t){const n=new yw(e).toString();let r;if(this.listens.has(n)){const e=this.listens.get(n);r=e.get(t),e.delete(t),0===e.size&&this.listens.delete(n)}else r=void 0;return r}onAuthRevoked_(e,t){Cb("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){Cb("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";Rt()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+fb.replace(/\./g,"-")]=1,Ct()?e["framework.cordova"]=1:It()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=vw.getInstance().currentlyOnline();return $t(this.interruptReasons_)&&e}}Ow.nextPersistentConnectionId_=0,Ow.nextConnectionId_=0;class jw{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new jw(e,t)}}class Fw{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const n=new jw(Mb,e),r=new jw(Mb,t);return 0!==this.compare(n,r)}minPost(){return jw.MIN}}let Uw;class Bw extends Fw{static get __EMPTY_NODE(){return Uw}static set __EMPTY_NODE(e){Uw=e}compare(e,t){return Ob(e.name,t.name)}isDefinedOn(e){throw ut("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return jw.MIN}maxPost(){return new jw(Nb,Uw)}makePost(e,t){return ct("string"===typeof e,"KeyIndex indexValue must always be a string."),new jw(e,Uw)}toString(){return".key"}}const $w=new Bw;class Vw{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];let a=1;for(;!e.isEmpty();)if(a=t?n(e.key,t):1,r&&(a*=-1),a<0)e=this.isReverse_?e.left:e.right;else{if(0===a){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Ww{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Ww.RED,this.left=null!=r?r:zw.EMPTY_NODE,this.right=null!=i?i:zw.EMPTY_NODE}copy(e,t,n,r,i){return new Ww(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return zw.EMPTY_NODE;let e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let n,r;if(n=this,t(e,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return zw.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Ww.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Ww.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Ww.RED=!0,Ww.BLACK=!1;class zw{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:zw.EMPTY_NODE;this.comparator_=e,this.root_=t}insert(e,t){return new zw(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Ww.BLACK,null,null))}remove(e){return new zw(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ww.BLACK,null,null))}get(e){let t,n=this.root_;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t)return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}getPredecessorKey(e){let t,n=this.root_,r=null;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Vw(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Vw(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Vw(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Vw(this.root_,null,this.comparator_,!0,e)}}function Hw(e,t){return Ob(e.name,t.name)}function qw(e,t){return Ob(e,t)}let Gw;zw.EMPTY_NODE=new class{copy(e,t,n,r,i){return this}insert(e,t,n){return new Ww(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Kw=function(e){return"number"===typeof e?"number:"+Vb(e):"string:"+e},Yw=function(e){if(e.isLeafNode()){const t=e.val();ct("string"===typeof t||"number"===typeof t||"object"===typeof t&&Ut(t,".sv"),"Priority must be a string or number.")}else ct(e===Gw||e.isEmpty(),"priority of unexpected type.");ct(e===Gw||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Qw,Xw,Zw;class Jw{static set __childrenNodeConstructor(e){Qw=e}static get __childrenNodeConstructor(){return Qw}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Jw.__childrenNodeConstructor.EMPTY_NODE;this.value_=e,this.priorityNode_=t,this.lazyHash_=null,ct(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),Yw(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Jw(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:Jw.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return kw(e)?this:".priority"===ww(e)?this.priorityNode_:Jw.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return".priority"===e?this.updatePriority(t):t.isEmpty()&&".priority"!==e?this:Jw.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const n=ww(e);return null===n?t:t.isEmpty()&&".priority"!==n?this:(ct(".priority"!==n||1===Ew(e),".priority must be the last token in a path"),this.updateImmediateChild(n,Jw.__childrenNodeConstructor.EMPTY_NODE.updateChild(xw(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Kw(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",e+="number"===t?Vb(this.value_):this.value_,this.lazyHash_=_b(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Jw.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Jw.__childrenNodeConstructor?-1:(ct(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,n=typeof this.value_,r=Jw.VALUE_TYPE_ORDER.indexOf(t),i=Jw.VALUE_TYPE_ORDER.indexOf(n);return ct(r>=0,"Unknown leaf type: "+t),ct(i>=0,"Unknown leaf type: "+n),r===i?"object"===n?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}Jw.VALUE_TYPE_ORDER=["object","boolean","number","string"];const eE=new class extends Fw{compare(e,t){const n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?Ob(e.name,t.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return jw.MIN}maxPost(){return new jw(Nb,new Jw("[PRIORITY-POST]",Zw))}makePost(e,t){const n=Xw(e);return new jw(t,new Jw("[PRIORITY-POST]",n))}toString(){return".priority"}},tE=Math.log(2);class nE{constructor(e){var t;this.count=(t=e+1,parseInt(Math.log(t)/tE,10)),this.current_=this.count-1;const n=(r=this.count,parseInt(Array(r+1).join("1"),2));var r;this.bits_=e+1&n}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const rE=function(e,t,n,r){e.sort(t);const i=function(t,r){const a=r-t;let o,s;if(0===a)return null;if(1===a)return o=e[t],s=n?n(o):o,new Ww(s,o.node,Ww.BLACK,null,null);{const l=parseInt(a/2,10)+t,c=i(t,l),u=i(l+1,r);return o=e[l],s=n?n(o):o,new Ww(s,o.node,Ww.BLACK,c,u)}},a=function(t){let r=null,a=null,o=e.length;const s=function(t,r){const a=o-t,s=o;o-=t;const c=i(a+1,s),u=e[a],d=n?n(u):u;l(new Ww(d,u.node,r,null,c))},l=function(e){r?(r.left=e,r=e):(a=e,r=e)};for(let e=0;e<t.count;++e){const n=t.nextBitIsOne(),r=Math.pow(2,t.count-(e+1));n?s(r,Ww.BLACK):(s(r,Ww.BLACK),s(r,Ww.RED))}return a}(new nE(e.length));return new zw(r||t,a)};let iE;const aE={};class oE{static get Default(){return ct(aE&&eE,"ChildrenNode.ts has not been loaded"),iE=iE||new oE({".priority":aE},{".priority":eE}),iE}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){const t=Bt(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof zw?t:null}hasIndex(e){return Ut(this.indexSet_,e.toString())}addIndex(e,t){ct(e!==$w,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let r=!1;const i=t.getIterator(jw.Wrap);let a,o=i.getNext();for(;o;)r=r||e.isDefinedOn(o.node),n.push(o),o=i.getNext();a=r?rE(n,e.getCompare()):aE;const s=e.toString(),l=Object.assign({},this.indexSet_);l[s]=e;const c=Object.assign({},this.indexes_);return c[s]=a,new oE(c,l)}addToIndexes(e,t){const n=Vt(this.indexes_,((n,r)=>{const i=Bt(this.indexSet_,r);if(ct(i,"Missing index implementation for "+r),n===aE){if(i.isDefinedOn(e.node)){const n=[],r=t.getIterator(jw.Wrap);let a=r.getNext();for(;a;)a.name!==e.name&&n.push(a),a=r.getNext();return n.push(e),rE(n,i.getCompare())}return aE}{const r=t.get(e.name);let i=n;return r&&(i=i.remove(new jw(e.name,r))),i.insert(e,e.node)}}));return new oE(n,this.indexSet_)}removeFromIndexes(e,t){const n=Vt(this.indexes_,(n=>{if(n===aE)return n;{const r=t.get(e.name);return r?n.remove(new jw(e.name,r)):n}}));return new oE(n,this.indexSet_)}}let sE;class lE{static get EMPTY_NODE(){return sE||(sE=new lE(new zw(qw),null,oE.Default))}constructor(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Yw(this.priorityNode_),this.children_.isEmpty()&&ct(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||sE}updatePriority(e){return this.children_.isEmpty()?this:new lE(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const t=this.children_.get(e);return null===t?sE:t}}getChild(e){const t=ww(e);return null===t?this:this.getImmediateChild(t).getChild(xw(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,t){if(ct(t,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(t);{const n=new jw(e,t);let r,i;t.isEmpty()?(r=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(n,this.children_)):(r=this.children_.insert(e,t),i=this.indexMap_.addToIndexes(n,this.children_));const a=r.isEmpty()?sE:this.priorityNode_;return new lE(r,a,i)}}updateChild(e,t){const n=ww(e);if(null===n)return t;{ct(".priority"!==ww(e)||1===Ew(e),".priority must be the last token in a path");const r=this.getImmediateChild(n).updateChild(xw(e),t);return this.updateImmediateChild(n,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let n=0,r=0,i=!0;if(this.forEachChild(eE,((a,o)=>{t[a]=o.val(e),n++,i&&lE.INTEGER_REGEXP_.test(a)?r=Math.max(r,Number(a)):i=!1})),!e&&i&&r<2*n){const e=[];for(const n in t)e[n]=t[n];return e}return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+Kw(this.getPriority().val())+":"),this.forEachChild(eE,((t,n)=>{const r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":_b(e)}return this.lazyHash_}getPredecessorChildName(e,t,n){const r=this.resolveIndex_(n);if(r){const n=r.getPredecessorKey(new jw(e,t));return n?n.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.minKey();return e&&e.name}return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new jw(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.maxKey();return e&&e.name}return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new jw(t,this.children_.get(t)):null}forEachChild(e,t){const n=this.resolveIndex_(e);return n?n.inorderTraversal((e=>t(e.name,e.node))):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(e=>e));{const n=this.children_.getIteratorFrom(e.name,jw.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)<0;)n.getNext(),r=n.peek();return n}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(e=>e));{const n=this.children_.getReverseIteratorFrom(e.name,jw.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)>0;)n.getNext(),r=n.peek();return n}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===cE?-1:0}withIndex(e){if(e===$w||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new lE(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===$w||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){const e=this.getIterator(eE),n=t.getIterator(eE);let r=e.getNext(),i=n.getNext();for(;r&&i;){if(r.name!==i.name||!r.node.equals(i.node))return!1;r=e.getNext(),i=n.getNext()}return null===r&&null===i}return!1}return!1}}resolveIndex_(e){return e===$w?null:this.indexMap_.get(e.toString())}}lE.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;const cE=new class extends lE{constructor(){super(new zw(qw),lE.EMPTY_NODE,oE.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return lE.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(jw,{MIN:{value:new jw(Mb,lE.EMPTY_NODE)},MAX:{value:new jw(Nb,cE)}}),Bw.__EMPTY_NODE=lE.EMPTY_NODE,Jw.__childrenNodeConstructor=lE,Gw=cE,function(e){Zw=e}(cE);function uE(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return lE.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),ct(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){return new Jw(e,uE(t))}if(e instanceof Array){let n=lE.EMPTY_NODE;return $b(e,((t,r)=>{if(Ut(e,t)&&"."!==t.substring(0,1)){const e=uE(r);!e.isLeafNode()&&e.isEmpty()||(n=n.updateImmediateChild(t,e))}})),n.updatePriority(uE(t))}{const n=[];let r=!1;if($b(e,((e,t)=>{if("."!==e.substring(0,1)){const i=uE(t);i.isEmpty()||(r=r||!i.getPriority().isEmpty(),n.push(new jw(e,i)))}})),0===n.length)return lE.EMPTY_NODE;const i=rE(n,Hw,(e=>e.name),qw);if(r){const e=rE(n,eE.getCompare());return new lE(i,uE(t),new oE({".priority":e},{".priority":eE}))}return new lE(i,uE(t),oE.Default)}}!function(e){Xw=e}(uE);class dE extends Fw{constructor(e){super(),this.indexPath_=e,ct(!kw(e)&&".priority"!==ww(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?Ob(e.name,t.name):i}makePost(e,t){const n=uE(e),r=lE.EMPTY_NODE.updateChild(this.indexPath_,n);return new jw(t,r)}maxPost(){const e=lE.EMPTY_NODE.updateChild(this.indexPath_,cE);return new jw(Nb,e)}toString(){return Aw(this.indexPath_,0).join("/")}}const hE=new class extends Fw{compare(e,t){const n=e.node.compareTo(t.node);return 0===n?Ob(e.name,t.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return jw.MIN}maxPost(){return jw.MAX}makePost(e,t){const n=uE(e);return new jw(t,n)}toString(){return".value"}};function pE(e){return{type:"value",snapshotNode:e}}function fE(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function mE(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function gE(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}class vE{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=eE}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return ct(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return ct(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Mb}hasEnd(){return this.endSet_}getIndexEndValue(){return ct(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return ct(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Nb}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return ct(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===eE}copy(){const e=new vE;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function yE(e){const t={};if(e.isDefault())return t;let n;if(e.index_===eE?n="$priority":e.index_===hE?n="$value":e.index_===$w?n="$key":(ct(e.index_ instanceof dE,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=jt(n),e.startSet_){const n=e.startAfterSet_?"startAfter":"startAt";t[n]=jt(e.indexStartValue_),e.startNameSet_&&(t[n]+=","+jt(e.indexStartName_))}if(e.endSet_){const n=e.endBeforeSet_?"endBefore":"endAt";t[n]=jt(e.indexEndValue_),e.endNameSet_&&(t[n]+=","+jt(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function bE(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==eE&&(t.i=e.index_.toString()),t}class wE extends mw{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:(ct(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,n,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=n,this.appCheckTokenProvider_=r,this.log_=Ib("p:rest:"),this.listens_={}}listen(e,t,n,r){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const a=wE.getListenId_(e,n),o={};this.listens_[a]=o;const s=yE(e._queryParams);this.restRequest_(i+".json",s,((e,t)=>{let s=t;if(404===e&&(s=null,e=null),null===e&&this.onDataUpdate_(i,s,!1,n),Bt(this.listens_,a)===o){let t;t=e?401===e?"permission_denied":"rest_error:"+e:"ok",r(t,null)}}))}unlisten(e,t){const n=wE.getListenId_(e,t);delete this.listens_[n]}get(e){const t=yE(e._queryParams),n=e._path.toString(),r=new Tt;return this.restRequest_(n+".json",t,((e,t)=>{let i=t;404===e&&(i=null,e=null),null===e?(this.onDataUpdate_(n,i,!1,null),r.resolve(i)):r.reject(new Error(i))})),r.promise}refreshAuthToken(e){}restRequest_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((r=>{let[i,a]=r;i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Ht(t);this.log_("Sending REST request for "+o);const s=new XMLHttpRequest;s.onreadystatechange=()=>{if(n&&4===s.readyState){this.log_("REST Response for "+o+" received. status:",s.status,"response:",s.responseText);let e=null;if(s.status>=200&&s.status<300){try{e=Ot(s.responseText)}catch(Q_){Lb("Failed to parse JSON response for "+o+": "+s.responseText)}n(null,e)}else 401!==s.status&&404!==s.status&&Lb("Got unsuccessful REST response for "+o+" Status: "+s.status),n(s.status);n=null}},s.open("GET",o,!0),s.send()}))}}class EE{constructor(){this.rootNode_=lE.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function xE(){return{value:null,children:new Map}}function _E(e,t,n){if(kw(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{const r=ww(t);e.children.has(r)||e.children.set(r,xE());_E(e.children.get(r),t=xw(t),n)}}function AE(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach(((e,n)=>{t(n,e)}))}(e,((e,r)=>{AE(r,new yw(t.toString()+"/"+e),n)}))}class TE{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&$b(this.last_,((e,n)=>{t[e]=t[e]-n})),this.last_=e,t}}class SE{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new TE(e);const n=1e4+2e4*Math.random();qb(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const e=this.statsListener_.get(),t={};let n=!1;$b(e,((e,r)=>{r>0&&Ut(this.statsToReport_,e)&&(t[e]=r,n=!0)})),n&&this.server_.reportStats(t),qb(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var kE;function CE(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(kE||(kE={}));class IE{constructor(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=kE.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(kw(this.path)){if(null!=this.affectedTree.value)return ct(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new yw(e));return new IE(bw(),t,this.revert)}}return ct(ww(this.path)===e,"operationForChild called for unrelated child."),new IE(xw(this.path),this.affectedTree,this.revert)}}class RE{constructor(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=kE.OVERWRITE}operationForChild(e){return kw(this.path)?new RE(this.source,bw(),this.snap.getImmediateChild(e)):new RE(this.source,xw(this.path),this.snap)}}class DE{constructor(e,t,n){this.source=e,this.path=t,this.children=n,this.type=kE.MERGE}operationForChild(e){if(kw(this.path)){const t=this.children.subtree(new yw(e));return t.isEmpty()?null:t.value?new RE(this.source,bw(),t.value):new DE(this.source,bw(),t)}return ct(ww(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new DE(this.source,xw(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class LE{constructor(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(kw(e))return this.isFullyInitialized()&&!this.filtered_;const t=ww(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function PE(e,t,n,r,i,a){const o=r.filter((e=>e.type===n));o.sort(((t,n)=>function(e,t,n){if(null==t.childName||null==n.childName)throw ut("Should only compare child_ events.");const r=new jw(t.childName,t.snapshotNode),i=new jw(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n))),o.forEach((n=>{const r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,a);i.forEach((i=>{i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function ME(e,t){return{eventCache:e,serverCache:t}}function NE(e,t,n,r){return ME(new LE(t,n,r),e.serverCache)}function OE(e,t,n,r){return ME(e.eventCache,new LE(t,n,r))}function jE(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function FE(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}let UE;class BE{static fromObject(e){let t=new BE(null);return $b(e,((e,n)=>{t=t.set(new yw(e),n)})),t}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(UE||(UE=new zw(jb)),UE);this.value=e,this.children=t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:bw(),value:this.value};if(kw(e))return null;{const n=ww(e),r=this.children.get(n);if(null!==r){const i=r.findRootMostMatchingPathAndValue(xw(e),t);if(null!=i){return{path:Sw(new yw(n),i.path),value:i.value}}return null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,(()=>!0))}subtree(e){if(kw(e))return this;{const t=ww(e),n=this.children.get(t);return null!==n?n.subtree(xw(e)):new BE(null)}}set(e,t){if(kw(e))return new BE(t,this.children);{const n=ww(e),r=(this.children.get(n)||new BE(null)).set(xw(e),t),i=this.children.insert(n,r);return new BE(this.value,i)}}remove(e){if(kw(e))return this.children.isEmpty()?new BE(null):new BE(null,this.children);{const t=ww(e),n=this.children.get(t);if(n){const r=n.remove(xw(e));let i;return i=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&i.isEmpty()?new BE(null):new BE(this.value,i)}return this}}get(e){if(kw(e))return this.value;{const t=ww(e),n=this.children.get(t);return n?n.get(xw(e)):null}}setTree(e,t){if(kw(e))return t;{const n=ww(e),r=(this.children.get(n)||new BE(null)).setTree(xw(e),t);let i;return i=r.isEmpty()?this.children.remove(n):this.children.insert(n,r),new BE(this.value,i)}}fold(e){return this.fold_(bw(),e)}fold_(e,t){const n={};return this.children.inorderTraversal(((r,i)=>{n[r]=i.fold_(Sw(e,r),t)})),t(e,this.value,n)}findOnPath(e,t){return this.findOnPath_(e,bw(),t)}findOnPath_(e,t,n){const r=!!this.value&&n(t,this.value);if(r)return r;if(kw(e))return null;{const r=ww(e),i=this.children.get(r);return i?i.findOnPath_(xw(e),Sw(t,r),n):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,bw(),t)}foreachOnPath_(e,t,n){if(kw(e))return this;{this.value&&n(t,this.value);const r=ww(e),i=this.children.get(r);return i?i.foreachOnPath_(xw(e),Sw(t,r),n):new BE(null)}}foreach(e){this.foreach_(bw(),e)}foreach_(e,t){this.children.inorderTraversal(((n,r)=>{r.foreach_(Sw(e,n),t)})),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal(((t,n)=>{n.value&&e(t,n.value)}))}}class $E{constructor(e){this.writeTree_=e}static empty(){return new $E(new BE(null))}}function VE(e,t,n){if(kw(t))return new $E(new BE(n));{const r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){const i=r.path;let a=r.value;const o=Cw(i,t);return a=a.updateChild(o,n),new $E(e.writeTree_.set(i,a))}{const r=new BE(n),i=e.writeTree_.setTree(t,r);return new $E(i)}}}function WE(e,t,n){let r=e;return $b(n,((e,n)=>{r=VE(r,Sw(t,e),n)})),r}function zE(e,t){if(kw(t))return $E.empty();{const n=e.writeTree_.setTree(t,new BE(null));return new $E(n)}}function HE(e,t){return null!=qE(e,t)}function qE(e,t){const n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(Cw(n.path,t)):null}function GE(e){const t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(eE,((e,n)=>{t.push(new jw(e,n))})):e.writeTree_.children.inorderTraversal(((e,n)=>{null!=n.value&&t.push(new jw(e,n.value))})),t}function KE(e,t){if(kw(t))return e;{const n=qE(e,t);return new $E(null!=n?new BE(n):e.writeTree_.subtree(t))}}function YE(e){return e.writeTree_.isEmpty()}function QE(e,t){return XE(bw(),e.writeTree_,t)}function XE(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);{let r=null;return t.children.inorderTraversal(((t,i)=>{".priority"===t?(ct(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=XE(Sw(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(Sw(e,".priority"),r)),n}}function ZE(e,t){return dx(t,e)}function JE(e,t){const n=e.allWrites.findIndex((e=>e.writeId===t));ct(n>=0,"removeWrite called with nonexistent writeId.");const r=e.allWrites[n];e.allWrites.splice(n,1);let i=r.visible,a=!1,o=e.allWrites.length-1;for(;i&&o>=0;){const t=e.allWrites[o];t.visible&&(o>=n&&ex(t,r.path)?i=!1:Rw(r.path,t.path)&&(a=!0)),o--}if(i){if(a)return function(e){e.visibleWrites=nx(e.allWrites,tx,bw()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;if(r.snap)e.visibleWrites=zE(e.visibleWrites,r.path);else{$b(r.children,(t=>{e.visibleWrites=zE(e.visibleWrites,Sw(r.path,t))}))}return!0}return!1}function ex(e,t){if(e.snap)return Rw(e.path,t);for(const n in e.children)if(e.children.hasOwnProperty(n)&&Rw(Sw(e.path,n),t))return!0;return!1}function tx(e){return e.visible}function nx(e,t,n){let r=$E.empty();for(let i=0;i<e.length;++i){const a=e[i];if(t(a)){const e=a.path;let t;if(a.snap)Rw(n,e)?(t=Cw(n,e),r=VE(r,t,a.snap)):Rw(e,n)&&(t=Cw(e,n),r=VE(r,bw(),a.snap.getChild(t)));else{if(!a.children)throw ut("WriteRecord should have .snap or .children");if(Rw(n,e))t=Cw(n,e),r=WE(r,t,a.children);else if(Rw(e,n))if(t=Cw(e,n),kw(t))r=WE(r,bw(),a.children);else{const e=Bt(a.children,ww(t));if(e){const n=e.getChild(xw(t));r=VE(r,bw(),n)}}}}}return r}function rx(e,t,n,r,i){if(r||i){const a=KE(e.visibleWrites,t);if(!i&&YE(a))return n;if(i||null!=n||HE(a,bw())){const a=function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(Rw(e.path,t)||Rw(t,e.path))};return QE(nx(e.allWrites,a,t),n||lE.EMPTY_NODE)}return null}{const r=qE(e.visibleWrites,t);if(null!=r)return r;{const r=KE(e.visibleWrites,t);if(YE(r))return n;if(null!=n||HE(r,bw())){return QE(r,n||lE.EMPTY_NODE)}return null}}}function ix(e,t,n,r){return rx(e.writeTree,e.treePath,t,n,r)}function ax(e,t){return function(e,t,n){let r=lE.EMPTY_NODE;const i=qE(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(eE,((e,t)=>{r=r.updateImmediateChild(e,t)})),r;if(n){const i=KE(e.visibleWrites,t);return n.forEachChild(eE,((e,t)=>{const n=QE(KE(i,new yw(e)),t);r=r.updateImmediateChild(e,n)})),GE(i).forEach((e=>{r=r.updateImmediateChild(e.name,e.node)})),r}return GE(KE(e.visibleWrites,t)).forEach((e=>{r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function ox(e,t,n,r){return function(e,t,n,r,i){ct(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=Sw(t,n);if(HE(e.visibleWrites,a))return null;{const t=KE(e.visibleWrites,a);return YE(t)?i.getChild(n):QE(t,i.getChild(n))}}(e.writeTree,e.treePath,t,n,r)}function sx(e,t){return function(e,t){return qE(e.visibleWrites,t)}(e.writeTree,Sw(e.treePath,t))}function lx(e,t,n,r,i,a){return function(e,t,n,r,i,a,o){let s;const l=KE(e.visibleWrites,t),c=qE(l,bw());if(null!=c)s=c;else{if(null==n)return[];s=QE(l,n)}if(s=s.withIndex(o),s.isEmpty()||s.isLeafNode())return[];{const e=[],t=o.getCompare(),n=a?s.getReverseIteratorFrom(r,o):s.getIteratorFrom(r,o);let l=n.getNext();for(;l&&e.length<i;)0!==t(l,r)&&e.push(l),l=n.getNext();return e}}(e.writeTree,e.treePath,t,n,r,i,a)}function cx(e,t,n){return function(e,t,n,r){const i=Sw(t,n),a=qE(e.visibleWrites,i);if(null!=a)return a;if(r.isCompleteForChild(n))return QE(KE(e.visibleWrites,i),r.getNode().getImmediateChild(n));return null}(e.writeTree,e.treePath,t,n)}function ux(e,t){return dx(Sw(e.treePath,t),e.writeTree)}function dx(e,t){return{treePath:e,writeTree:t}}class hx{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,n=e.childName;ct("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),ct(".priority"!==n,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(n);if(r){const i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,gE(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,mE(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,fE(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw ut("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,gE(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}}const px=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,n){return null}};class fx{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const t=null!=this.optCompleteServerCache_?new LE(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return cx(this.writes_,e,t)}}getChildAfterChild(e,t,n){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:FE(this.viewCache_),i=lx(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}function mx(e,t,n,r,i){const a=new hx;let o,s;if(n.type===kE.OVERWRITE){const l=n;l.source.fromUser?o=yx(e,t,l.path,l.snap,r,i,a):(ct(l.source.fromServer,"Unknown source."),s=l.source.tagged||t.serverCache.isFiltered()&&!kw(l.path),o=vx(e,t,l.path,l.snap,r,i,s,a))}else if(n.type===kE.MERGE){const l=n;l.source.fromUser?o=function(e,t,n,r,i,a,o){let s=t;return r.foreach(((r,l)=>{const c=Sw(n,r);bx(t,ww(c))&&(s=yx(e,s,c,l,i,a,o))})),r.foreach(((r,l)=>{const c=Sw(n,r);bx(t,ww(c))||(s=yx(e,s,c,l,i,a,o))})),s}(e,t,l.path,l.children,r,i,a):(ct(l.source.fromServer,"Unknown source."),s=l.source.tagged||t.serverCache.isFiltered(),o=Ex(e,t,l.path,l.children,r,i,s,a))}else if(n.type===kE.ACK_USER_WRITE){const s=n;o=s.revert?function(e,t,n,r,i,a){let o;if(null!=sx(r,n))return t;{const s=new fx(r,t,i),l=t.eventCache.getNode();let c;if(kw(n)||".priority"===ww(n)){let n;if(t.serverCache.isFullyInitialized())n=ix(r,FE(t));else{const e=t.serverCache.getNode();ct(e instanceof lE,"serverChildren would be complete if leaf node"),n=ax(r,e)}c=e.filter.updateFullNode(l,n,a)}else{const i=ww(n);let u=cx(r,i,t.serverCache);null==u&&t.serverCache.isCompleteForChild(i)&&(u=l.getImmediateChild(i)),c=null!=u?e.filter.updateChild(l,i,u,xw(n),s,a):t.eventCache.getNode().hasChild(i)?e.filter.updateChild(l,i,lE.EMPTY_NODE,xw(n),s,a):l,c.isEmpty()&&t.serverCache.isFullyInitialized()&&(o=ix(r,FE(t)),o.isLeafNode()&&(c=e.filter.updateFullNode(c,o,a)))}return o=t.serverCache.isFullyInitialized()||null!=sx(r,bw()),NE(t,c,o,e.filter.filtersNodes())}}(e,t,s.path,r,i,a):function(e,t,n,r,i,a,o){if(null!=sx(i,n))return t;const s=t.serverCache.isFiltered(),l=t.serverCache;if(null!=r.value){if(kw(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return vx(e,t,n,l.getNode().getChild(n),i,a,s,o);if(kw(n)){let r=new BE(null);return l.getNode().forEachChild($w,((e,t)=>{r=r.set(new yw(e),t)})),Ex(e,t,n,r,i,a,s,o)}return t}{let c=new BE(null);return r.foreach(((e,t)=>{const r=Sw(n,e);l.isCompleteForPath(r)&&(c=c.set(e,l.getNode().getChild(r)))})),Ex(e,t,n,c,i,a,s,o)}}(e,t,s.path,s.affectedTree,r,i,a)}else{if(n.type!==kE.LISTEN_COMPLETE)throw ut("Unknown operation type: "+n.type);o=function(e,t,n,r,i){const a=t.serverCache,o=OE(t,a.getNode(),a.isFullyInitialized()||kw(n),a.isFiltered());return gx(e,o,n,r,px,i)}(e,t,n.path,r,a)}const l=a.getChanges();return function(e,t,n){const r=t.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=jE(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&n.push(pE(jE(t)))}}(t,o,l),{viewCache:o,changes:l}}function gx(e,t,n,r,i,a){const o=t.eventCache;if(null!=sx(r,n))return t;{let s,l;if(kw(n))if(ct(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const n=FE(t),i=ax(r,n instanceof lE?n:lE.EMPTY_NODE);s=e.filter.updateFullNode(t.eventCache.getNode(),i,a)}else{const n=ix(r,FE(t));s=e.filter.updateFullNode(t.eventCache.getNode(),n,a)}else{const c=ww(n);if(".priority"===c){ct(1===Ew(n),"Can't have a priority with additional path components");const i=o.getNode();l=t.serverCache.getNode();const a=ox(r,n,i,l);s=null!=a?e.filter.updatePriority(i,a):o.getNode()}else{const u=xw(n);let d;if(o.isCompleteForChild(c)){l=t.serverCache.getNode();const e=ox(r,n,o.getNode(),l);d=null!=e?o.getNode().getImmediateChild(c).updateChild(u,e):o.getNode().getImmediateChild(c)}else d=cx(r,c,t.serverCache);s=null!=d?e.filter.updateChild(o.getNode(),c,d,u,i,a):o.getNode()}}return NE(t,s,o.isFullyInitialized()||kw(n),e.filter.filtersNodes())}}function vx(e,t,n,r,i,a,o,s){const l=t.serverCache;let c;const u=o?e.filter:e.filter.getIndexedFilter();if(kw(n))c=u.updateFullNode(l.getNode(),r,null);else if(u.filtersNodes()&&!l.isFiltered()){const e=l.getNode().updateChild(n,r);c=u.updateFullNode(l.getNode(),e,null)}else{const e=ww(n);if(!l.isCompleteForPath(n)&&Ew(n)>1)return t;const i=xw(n),a=l.getNode().getImmediateChild(e).updateChild(i,r);c=".priority"===e?u.updatePriority(l.getNode(),a):u.updateChild(l.getNode(),e,a,i,px,null)}const d=OE(t,c,l.isFullyInitialized()||kw(n),u.filtersNodes());return gx(e,d,n,i,new fx(i,d,a),s)}function yx(e,t,n,r,i,a,o){const s=t.eventCache;let l,c;const u=new fx(i,t,a);if(kw(n))c=e.filter.updateFullNode(t.eventCache.getNode(),r,o),l=NE(t,c,!0,e.filter.filtersNodes());else{const i=ww(n);if(".priority"===i)c=e.filter.updatePriority(t.eventCache.getNode(),r),l=NE(t,c,s.isFullyInitialized(),s.isFiltered());else{const a=xw(n),c=s.getNode().getImmediateChild(i);let d;if(kw(a))d=r;else{const e=u.getCompleteChild(i);d=null!=e?".priority"===_w(a)&&e.getChild(Tw(a)).isEmpty()?e:e.updateChild(a,r):lE.EMPTY_NODE}if(c.equals(d))l=t;else{l=NE(t,e.filter.updateChild(s.getNode(),i,d,a,u,o),s.isFullyInitialized(),e.filter.filtersNodes())}}}return l}function bx(e,t){return e.eventCache.isCompleteForChild(t)}function wx(e,t,n){return n.foreach(((e,n)=>{t=t.updateChild(e,n)})),t}function Ex(e,t,n,r,i,a,o,s){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let l,c=t;l=kw(n)?r:new BE(null).setTree(n,r);const u=t.serverCache.getNode();return l.children.inorderTraversal(((n,r)=>{if(u.hasChild(n)){const l=wx(0,t.serverCache.getNode().getImmediateChild(n),r);c=vx(e,c,new yw(n),l,i,a,o,s)}})),l.children.inorderTraversal(((n,r)=>{const l=!t.serverCache.isCompleteForChild(n)&&null===r.value;if(!u.hasChild(n)&&!l){const l=wx(0,t.serverCache.getNode().getImmediateChild(n),r);c=vx(e,c,new yw(n),l,i,a,o,s)}})),c}function xx(e,t){const n=FE(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!kw(t)&&!n.getImmediateChild(ww(t)).isEmpty())?n.getChild(t):null}function _x(e,t,n,r){t.type===kE.MERGE&&null!==t.source.queryId&&(ct(FE(e.viewCache_),"We should always have a full cache before handling merges"),ct(jE(e.viewCache_),"Missing event cache, even though we have a server cache"));const i=e.viewCache_,a=mx(e.processor_,i,t,n,r);var o,s;return o=e.processor_,s=a.viewCache,ct(s.eventCache.getNode().isIndexed(o.filter.getIndex()),"Event snap not indexed"),ct(s.serverCache.getNode().isIndexed(o.filter.getIndex()),"Server snap not indexed"),ct(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=a.viewCache,Ax(e,a.changes,a.viewCache.eventCache.getNode(),null)}function Ax(e,t,n,r){const i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){const i=[],a=[];return t.forEach((t=>{var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&a.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),PE(e,i,"child_removed",t,r,n),PE(e,i,"child_added",t,r,n),PE(e,i,"child_moved",a,r,n),PE(e,i,"child_changed",t,r,n),PE(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}let Tx,Sx;function kx(e,t,n,r){const i=t.source.queryId;if(null!==i){const a=e.views.get(i);return ct(null!=a,"SyncTree gave us an op for an invalid query."),_x(a,t,n,r)}{let i=[];for(const a of e.views.values())i=i.concat(_x(a,t,n,r));return i}}function Cx(e,t){let n=null;for(const r of e.views.values())n=n||xx(r,t);return n}class Ix{constructor(e){this.listenProvider_=e,this.syncPointTree_=new BE(null),this.pendingWriteTree_={visibleWrites:$E.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Rx(e,t,n,r,i){return function(e,t,n,r,i){ct(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=VE(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?Nx(e,new RE({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function Dx(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=function(e,t){for(let n=0;n<e.allWrites.length;n++){const r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(JE(e.pendingWriteTree_,t)){let t=new BE(null);return null!=r.snap?t=t.set(bw(),!0):$b(r.children,(e=>{t=t.set(new yw(e),!0)})),Nx(e,new IE(r.path,t,n))}return[]}function Lx(e,t,n){return Nx(e,new RE({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function Px(e,t,n,r){const i=Fx(e,r);if(null!=i){const r=Ux(i),a=r.path,o=r.queryId,s=Cw(a,t);return Bx(e,a,new RE(CE(o),s,n))}return[]}function Mx(e,t,n){const r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,((e,n)=>{const r=Cx(n,Cw(e,t));if(r)return r}));return rx(r,t,i,n,!0)}function Nx(e,t){return Ox(t,e.syncPointTree_,null,ZE(e.pendingWriteTree_,bw()))}function Ox(e,t,n,r){if(kw(e.path))return jx(e,t,n,r);{const i=t.get(bw());null==n&&null!=i&&(n=Cx(i,bw()));let a=[];const o=ww(e.path),s=e.operationForChild(o),l=t.children.get(o);if(l&&s){const e=n?n.getImmediateChild(o):null,t=ux(r,o);a=a.concat(Ox(s,l,e,t))}return i&&(a=a.concat(kx(i,e,r,n))),a}}function jx(e,t,n,r){const i=t.get(bw());null==n&&null!=i&&(n=Cx(i,bw()));let a=[];return t.children.inorderTraversal(((t,i)=>{const o=n?n.getImmediateChild(t):null,s=ux(r,t),l=e.operationForChild(t);l&&(a=a.concat(jx(l,i,o,s)))})),i&&(a=a.concat(kx(i,e,r,n))),a}function Fx(e,t){return e.tagToQueryMap.get(t)}function Ux(e){const t=e.indexOf("$");return ct(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new yw(e.substr(0,t))}}function Bx(e,t,n){const r=e.syncPointTree_.get(t);ct(r,"Missing sync point for query tag that we're tracking");return kx(r,n,ZE(e.pendingWriteTree_,t),null)}class $x{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new $x(t)}node(){return this.node_}}class Vx{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Sw(this.path_,e);return new Vx(this.syncTree_,t)}node(){return Mx(this.syncTree_,this.path_)}}const Wx=function(e,t,n){return e&&"object"===typeof e?(ct(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?zx(e[".sv"],t,n):"object"===typeof e[".sv"]?Hx(e[".sv"],t):void ct(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},zx=function(e,t,n){if("timestamp"===e)return n.timestamp;ct(!1,"Unexpected server value: "+e)},Hx=function(e,t,n){e.hasOwnProperty("increment")||ct(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const r=e.increment;"number"!==typeof r&&ct(!1,"Unexpected increment value: "+r);const i=t.node();if(ct(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const a=i.getValue();return"number"!==typeof a?r:a+r},qx=function(e,t,n,r){return Kx(t,new Vx(n,e),r)},Gx=function(e,t,n){return Kx(e,new $x(t),n)};function Kx(e,t,n){const r=e.getPriority().val(),i=Wx(r,t.getImmediateChild(".priority"),n);let a;if(e.isLeafNode()){const r=e,a=Wx(r.getValue(),t,n);return a!==r.getValue()||i!==r.getPriority().val()?new Jw(a,uE(i)):e}{const r=e;return a=r,i!==r.getPriority().val()&&(a=a.updatePriority(new Jw(i))),r.forEachChild(eE,((e,r)=>{const i=Kx(r,t.getImmediateChild(e),n);i!==r&&(a=a.updateImmediateChild(e,i))})),a}}class Yx{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};this.name=e,this.parent=t,this.node=n}}function Qx(e,t){let n=t instanceof yw?t:new yw(t),r=e,i=ww(n);for(;null!==i;){const e=Bt(r.node.children,i)||{children:{},childCount:0};r=new Yx(i,r,e),n=xw(n),i=ww(n)}return r}function Xx(e){return e.node.value}function Zx(e,t){e.node.value=t,r_(e)}function Jx(e){return e.node.childCount>0}function e_(e,t){$b(e.node.children,((n,r)=>{t(new Yx(n,e,r))}))}function t_(e,t,n,r){n&&!r&&t(e),e_(e,(e=>{t_(e,t,!0,r)})),n&&r&&t(e)}function n_(e){return new yw(null===e.parent?e.name:n_(e.parent)+"/"+e.name)}function r_(e){null!==e.parent&&function(e,t,n){const r=function(e){return void 0===Xx(e)&&!Jx(e)}(n),i=Ut(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,r_(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,r_(e))}(e.parent,e.name,e)}const i_=/[\[\].#$\/\u0000-\u001F\u007F]/,a_=/[\[\].#$\u0000-\u001F\u007F]/,o_=10485760,s_=function(e){return"string"===typeof e&&0!==e.length&&!i_.test(e)},l_=function(e){return"string"===typeof e&&0!==e.length&&!a_.test(e)},c_=function(e,t,n){const r=n instanceof yw?new Dw(n,e):n;if(void 0===t)throw new Error(e+"contains undefined "+Pw(r));if("function"===typeof t)throw new Error(e+"contains a function "+Pw(r)+" with contents = "+t.toString());if(Pb(t))throw new Error(e+"contains "+t.toString()+" "+Pw(r));if("string"===typeof t&&t.length>o_/3&&Zt(t)>o_)throw new Error(e+"contains a string greater than "+o_+" utf8 bytes "+Pw(r)+" ('"+t.substring(0,50)+"...')");if(t&&"object"===typeof t){let n=!1,i=!1;if($b(t,((t,a)=>{if(".value"===t)n=!0;else if(".priority"!==t&&".sv"!==t&&(i=!0,!s_(t)))throw new Error(e+" contains an invalid key ("+t+") "+Pw(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=Zt(t),Lw(e)}(r,t),c_(e,a,r),function(e){const t=e.parts_.pop();e.byteLength_-=Zt(t),e.parts_.length>0&&(e.byteLength_-=1)}(r)})),n&&i)throw new Error(e+' contains ".value" child '+Pw(r)+" in addition to actual children.")}},u_=function(e,t){const n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!s_(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),l_(e)}(n))throw new Error(Xt(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class d_{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function h_(e,t){let n=null;for(let r=0;r<t.length;r++){const i=t[r],a=i.getPath();null===n||Iw(a,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:a}),n.events.push(i)}n&&e.eventLists_.push(n)}function p_(e,t,n){h_(e,n),f_(e,(e=>Rw(e,t)||Rw(t,e)))}function f_(e,t){e.recursionDepth_++;let n=!0;for(let r=0;r<e.eventLists_.length;r++){const i=e.eventLists_[r];if(i){t(i.path)?(m_(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function m_(e){for(let t=0;t<e.events.length;t++){const n=e.events[t];if(null!==n){e.events[t]=null;const r=n.getEventRunner();Tb&&Cb("event: "+n.toString()),Hb(r)}}}const g_="repo_interrupt";class v_{constructor(e,t,n,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new d_,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=xE(),this.transactionQueueTree_=new Yx,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function y_(e,t,n){if(e.stats_=ow(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new wE(e.repoInfo_,((t,n,r,i)=>{E_(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((()=>x_(e,!0)),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{jt(n)}catch(Q_){throw new Error("Invalid authOverride provided: "+Q_)}}e.persistentConnection_=new Ow(e.repoInfo_,t,((t,n,r,i)=>{E_(e,t,n,r,i)}),(t=>{x_(e,t)}),(t=>{!function(e,t){$b(t,((t,n)=>{__(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((t=>{e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((t=>{e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){const n=e.toString();return aw[n]||(aw[n]=t()),aw[n]}(e.repoInfo_,(()=>new SE(e.stats_,e.server_))),e.infoData_=new EE,e.infoSyncTree_=new Ix({startListening:(t,n,r,i)=>{let a=[];const o=e.infoData_.getNode(t._path);return o.isEmpty()||(a=Lx(e.infoSyncTree_,t._path,o),setTimeout((()=>{i("ok")}),0)),a},stopListening:()=>{}}),__(e,"connected",!1),e.serverSyncTree_=new Ix({startListening:(t,n,r,i)=>(e.server_.listen(t,r,n,((n,r)=>{const a=i(n,r);p_(e.eventQueue_,t._path,a)})),[]),stopListening:(t,n)=>{e.server_.unlisten(t,n)}})}function b_(e){const t=e.infoData_.getNode(new yw(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function w_(e){return function(e){return(e=e||{}).timestamp=e.timestamp||(new Date).getTime(),e}({timestamp:b_(e)})}function E_(e,t,n,r,i){e.dataUpdateCount++;const a=new yw(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let o=[];if(i)if(r){const t=Vt(n,(e=>uE(e)));o=function(e,t,n,r){const i=Fx(e,r);if(i){const r=Ux(i),a=r.path,o=r.queryId,s=Cw(a,t),l=BE.fromObject(n);return Bx(e,a,new DE(CE(o),s,l))}return[]}(e.serverSyncTree_,a,t,i)}else{const t=uE(n);o=Px(e.serverSyncTree_,a,t,i)}else if(r){const t=Vt(n,(e=>uE(e)));o=function(e,t,n){const r=BE.fromObject(n);return Nx(e,new DE({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,a,t)}else{const t=uE(n);o=Lx(e.serverSyncTree_,a,t)}let s=a;o.length>0&&(s=I_(e,a)),p_(e.eventQueue_,s,o)}function x_(e,t){__(e,"connected",t),!1===t&&function(e){S_(e,"onDisconnectEvents");const t=w_(e),n=xE();AE(e.onDisconnect_,bw(),((r,i)=>{const a=qx(r,i,e.serverSyncTree_,t);_E(n,r,a)}));let r=[];AE(n,bw(),((t,n)=>{r=r.concat(Lx(e.serverSyncTree_,t,n));const i=M_(e,t);I_(e,i)})),e.onDisconnect_=xE(),p_(e.eventQueue_,bw(),r)}(e)}function __(e,t,n){const r=new yw("/.info/"+t),i=uE(n);e.infoData_.updateSnapshot(r,i);const a=Lx(e.infoSyncTree_,r,i);p_(e.eventQueue_,r,a)}function A_(e){return e.nextWriteId_++}function T_(e){e.persistentConnection_&&e.persistentConnection_.interrupt(g_)}function S_(e){let t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];Cb(t,...r)}function k_(e,t,n){return Mx(e.serverSyncTree_,t,n)||lE.EMPTY_NODE}function C_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||P_(e,t),Xx(t)){const n=D_(e,t);ct(n.length>0,"Sending zero length transaction queue");n.every((e=>0===e.status))&&function(e,t,n){const r=n.map((e=>e.currentWriteId)),i=k_(e,t,r);let a=i;const o=i.hash();for(let c=0;c<n.length;c++){const e=n[c];ct(0===e.status,"tryToSendTransactionQueue_: items in queue should all be run."),e.status=1,e.retryCount++;const r=Cw(t,e.path);a=a.updateChild(r,e.currentOutputSnapshotRaw)}const s=a.val(!0),l=t;e.server_.put(l.toString(),s,(r=>{S_(e,"transaction put response",{path:l.toString(),status:r});let i=[];if("ok"===r){const r=[];for(let t=0;t<n.length;t++)n[t].status=2,i=i.concat(Dx(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&r.push((()=>n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved))),n[t].unwatcher();P_(e,Qx(e.transactionQueueTree_,t)),C_(e,e.transactionQueueTree_),p_(e.eventQueue_,t,i);for(let e=0;e<r.length;e++)Hb(r[e])}else{if("datastale"===r)for(let e=0;e<n.length;e++)3===n[e].status?n[e].status=4:n[e].status=0;else{Lb("transaction at "+l.toString()+" failed: "+r);for(let e=0;e<n.length;e++)n[e].status=4,n[e].abortReason=r}I_(e,t)}}),o)}(e,n_(t),n)}else Jx(t)&&e_(t,(t=>{C_(e,t)}))}function I_(e,t){const n=R_(e,t),r=n_(n);return function(e,t,n){if(0===t.length)return;const r=[];let i=[];const a=t.filter((e=>0===e.status)),o=a.map((e=>e.currentWriteId));for(let l=0;l<t.length;l++){const a=t[l],c=Cw(n,a.path);let u,d=!1;if(ct(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===a.status)d=!0,u=a.abortReason,i=i.concat(Dx(e.serverSyncTree_,a.currentWriteId,!0));else if(0===a.status)if(a.retryCount>=25)d=!0,u="maxretry",i=i.concat(Dx(e.serverSyncTree_,a.currentWriteId,!0));else{const n=k_(e,a.path,o);a.currentInputSnapshot=n;const r=t[l].update(n.val());if(void 0!==r){c_("transaction failed: Data returned ",r,a.path);let t=uE(r);"object"===typeof r&&null!=r&&Ut(r,".priority")||(t=t.updatePriority(n.getPriority()));const s=a.currentWriteId,l=w_(e),c=Gx(t,n,l);a.currentOutputSnapshotRaw=t,a.currentOutputSnapshotResolved=c,a.currentWriteId=A_(e),o.splice(o.indexOf(s),1),i=i.concat(Rx(e.serverSyncTree_,a.path,c,a.currentWriteId,a.applyLocally)),i=i.concat(Dx(e.serverSyncTree_,s,!0))}else d=!0,u="nodata",i=i.concat(Dx(e.serverSyncTree_,a.currentWriteId,!0))}p_(e.eventQueue_,n,i),i=[],d&&(t[l].status=2,s=t[l].unwatcher,setTimeout(s,Math.floor(0)),t[l].onComplete&&("nodata"===u?r.push((()=>t[l].onComplete(null,!1,t[l].currentInputSnapshot))):r.push((()=>t[l].onComplete(new Error(u),!1,null)))))}var s;P_(e,e.transactionQueueTree_);for(let l=0;l<r.length;l++)Hb(r[l]);C_(e,e.transactionQueueTree_)}(e,D_(e,n),r),r}function R_(e,t){let n,r=e.transactionQueueTree_;for(n=ww(t);null!==n&&void 0===Xx(r);)r=Qx(r,n),n=ww(t=xw(t));return r}function D_(e,t){const n=[];return L_(e,t,n),n.sort(((e,t)=>e.order-t.order)),n}function L_(e,t,n){const r=Xx(t);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);e_(t,(t=>{L_(e,t,n)}))}function P_(e,t){const n=Xx(t);if(n){let e=0;for(let t=0;t<n.length;t++)2!==n[t].status&&(n[e]=n[t],e++);n.length=e,Zx(t,n.length>0?n:void 0)}e_(t,(t=>{P_(e,t)}))}function M_(e,t){const n=n_(R_(e,t)),r=Qx(e.transactionQueueTree_,t);return function(e,t,n){let r=n?e:e.parent;for(;null!==r;){if(t(r))return!0;r=r.parent}}(r,(t=>{N_(e,t)})),N_(e,r),t_(r,(t=>{N_(e,t)})),n}function N_(e,t){const n=Xx(t);if(n){const r=[];let i=[],a=-1;for(let t=0;t<n.length;t++)3===n[t].status||(1===n[t].status?(ct(a===t-1,"All SENT items should be at beginning of queue."),a=t,n[t].status=3,n[t].abortReason="set"):(ct(0===n[t].status,"Unexpected transaction status in abort"),n[t].unwatcher(),i=i.concat(Dx(e.serverSyncTree_,n[t].currentWriteId,!0)),n[t].onComplete&&r.push(n[t].onComplete.bind(null,new Error("set"),!1,null))));-1===a?Zx(t,void 0):n.length=a+1,p_(e.eventQueue_,n_(t),i);for(let e=0;e<r.length;e++)Hb(r[e])}}const O_=function(e,t){const n=j_(e),r=n.namespace;"firebase.com"===n.domain&&Db(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||Db("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Lb("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");const i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new tw(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new yw(n.pathString)}},j_=function(e){let t="",n="",r="",i="",a="",o=!0,s="https",l=443;if("string"===typeof e){let c=e.indexOf("//");c>=0&&(s=e.substring(0,c-1),e=e.substring(c+2));let u=e.indexOf("/");-1===u&&(u=e.length);let d=e.indexOf("?");-1===d&&(d=e.length),t=e.substring(0,Math.min(u,d)),u<d&&(i=function(e){let t="";const n=e.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let e=n[r];try{e=decodeURIComponent(e.replace(/\+/g," "))}catch(Q_){}t+="/"+e}return t}(e.substring(u,d)));const h=function(e){const t={};"?"===e.charAt(0)&&(e=e.substring(1));for(const n of e.split("&")){if(0===n.length)continue;const r=n.split("=");2===r.length?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Lb(`Invalid query segment '${n}' in query '${e}'`)}return t}(e.substring(Math.min(e.length,d)));c=t.indexOf(":"),c>=0?(o="https"===s||"wss"===s,l=parseInt(t.substring(c+1),10)):c=t.length;const p=t.slice(0,c);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{const e=t.indexOf(".");r=t.substring(0,e).toLowerCase(),n=t.substring(e+1),a=r}"ns"in h&&(a=h.ns)}return{host:t,port:l,domain:n,subdomain:r,secure:o,scheme:s,pathString:i,namespace:a}},F_="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz";!function(){let e=0;const t=[]}();class U_{constructor(e,t,n,r){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=r}get key(){return kw(this._path)?null:_w(this._path)}get ref(){return new B_(this._repo,this._path)}get _queryIdentifier(){const e=bE(this._queryParams),t=Ub(e);return"{}"===t?"default":t}get _queryObject(){return bE(this._queryParams)}isEqual(e){if(!((e=Jt(e))instanceof U_))return!1;const t=this._repo===e._repo,n=Iw(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return t&&n&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}class B_ extends U_{constructor(e,t){super(e,t,new vE,!1)}get parent(){const e=Tw(this._path);return null===e?null:new B_(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}!function(e){ct(!Tx,"__referenceConstructor has already been defined"),Tx=e}(B_),function(e){ct(!Sx,"__referenceConstructor has already been defined"),Sx=e}(B_);const $_={};let V_=!1;function W_(e,t,n,r,i){let a=r||e.options.databaseURL;void 0===a&&(e.options.projectId||Db("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Cb("Using default host for project ",e.options.projectId),a=`${e.options.projectId}-default-rtdb.firebaseio.com`);let o,s,l=O_(a,i),c=l.repoInfo;"undefined"!==typeof process&&(s={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_ALGOLIA_API_KEY:"b94f7163a6855940c1a0d94e635a307c",REACT_APP_ALGOLIA_APP_ID:"7PVTC2J64R",REACT_APP_ALGOLIA_INDEX_NAME:"searches",REACT_APP_API_URL:"https://sideeye-backend-production.up.railway.app",REACT_APP_FIREBASE_API_KEY:"AIzaSyBI9pvyseKR-5dw3eXuZgTLnG3OcvNGbeI",REACT_APP_FIREBASE_APP_ID:"1:864667627333:web:1ec087179141d1e91a982c",REACT_APP_FIREBASE_AUTH_DOMAIN:"sideeye.uk",REACT_APP_FIREBASE_DATABASE_URL:"https://sideeye-bafda-default-rtdb.europe-west1.firebasedatabase.app",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"864667627333",REACT_APP_FIREBASE_PROJECT_ID:"sideeye-bafda",REACT_APP_FIREBASE_STORAGE_BUCKET:"sideeye-bafda.firebasestorage.app"}.FIREBASE_DATABASE_EMULATOR_HOST),s?(o=!0,a=`http://${s}?ns=${c.namespace}`,l=O_(a,i),c=l.repoInfo):o=!l.repoInfo.secure;const u=i&&o?new Yb(Yb.OWNER):new Kb(e.name,e.options,t);u_("Invalid Firebase Database URL",l),kw(l.path)||Db("Database URL must point to the root of a Firebase Database (not including a child path).");const d=function(e,t,n,r){let i=$_[t.name];i||(i={},$_[t.name]=i);let a=i[e.toURLString()];a&&Db("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return a=new v_(e,V_,n,r),i[e.toURLString()]=a,a}(c,e,u,new Gb(e,n));return new z_(d,e)}class z_{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(y_(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new B_(this._repo,bw())),this._rootInternal}_delete(){return null!==this._rootInternal&&(!function(e,t){const n=$_[t];n&&n[e.key]===e||Db(`Database ${t}(${e.repoInfo_}) has already been deleted.`),T_(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Db("Cannot call "+e+" on a deleted database.")}}Ow.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},Ow.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){mb(gr),dr(new en("database",((e,t)=>{let{instanceIdentifier:n}=t;return W_(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),br(hb,pb,e),br(hb,pb,"esm2017")}();const H_=0===Array.from(sr.values()).length?vr({apiKey:"AIzaSyBI9pvyseKR-5dw3eXuZgTLnG3OcvNGbeI",authDomain:"sideeye.uk",projectId:"sideeye-bafda",storageBucket:"sideeye-bafda.firebasestorage.app",messagingSenderId:"864667627333",appId:"1:864667627333:web:1ec087179141d1e91a982c",databaseURL:"https://sideeye-bafda-default-rtdb.europe-west1.firebasedatabase.app"},{automaticDataCollectionEnabled:!1}):yr();console.log("Initializing Firebase app");const q_=function(e,t,n){n||(n=_c);const r=hr(e,"firestore");if(r.isInitialized(n)){const e=r.getImmediate({identifier:n});if(Wt(r.getOptions(n),t))return e;throw new js(Os.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(void 0!==t.cacheSizeBytes&&void 0!==t.localCache)throw new js(Os.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(void 0!==t.cacheSizeBytes&&-1!==t.cacheSizeBytes&&t.cacheSizeBytes<Hh)throw new js(Os.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:t,instanceIdentifier:n})}(H_,{cacheSizeBytes:-1,experimentalForceLongPolling:!0}),G_=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yr();const t=hr(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=hr(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(Wt(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;Or(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:ns,persistence:[ho,Ha,Qa]}),r=At("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(i=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>os)return;const r=null===t||void 0===t?void 0:t.token;ss!==r&&(ss=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});!function(e,t,n){Jt(e).beforeAuthStateChanged(t,n)}(n,t,(()=>t(n.currentUser))),function(e,t,n,r){Jt(e).onIdTokenChanged(t,n,r)}(n,(e=>t(e)))}}var i;const a=Et("auth");return a&&ra(n,`http://${a}`),n}(H_),K_=ub(H_),Y_=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yr(),t=arguments.length>1?arguments[1]:void 0;const n=hr(e,"database").getImmediate({identifier:t});if(!n._instanceStarted){const e=xt("database");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=Jt(e),e._checkNotDeleted("useEmulator");const i=`${t}:${n}`,a=e._repoInternal;if(e._instanceStarted){if(i===e._repoInternal.repoInfo_.host&&Wt(r,a.repoInfo_.emulatorOptions))return;Db("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let o;if(a.repoInfo_.nodeAdmin)r.mockUserToken&&Db('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new Yb(Yb.OWNER);else if(r.mockUserToken){const t="string"===typeof r.mockUserToken?r.mockUserToken:St(r.mockUserToken,e.app.options.projectId);o=new Yb(t)}!function(e,t,n,r){e.repoInfo_=new tw(t,!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0,n),r&&(e.authTokenProvider_=r)}(a,i,r,o)}(n,...e)}return n}(H_);Ua(G_,(e=>{console.log("Firebase auth state changed:",e?"User logged in":"No user")}));(()=>{{console.log("Checking Firebase configuration in production..."),console.log("Firebase App:",H_.name),console.log("Firebase Auth:",G_.app.name),console.log("Firestore:",q_.app.name),console.log("Realtime Database:",Y_.app.name);const e=H_.options.projectId;console.log("Firebase Project ID:",e);const t=H_.options.apiKey;console.log("Firebase API Key:",t?"Present":"Missing");const n=H_.options.authDomain;console.log("Firebase Auth Domain:",n),e&&t&&n||(console.error("Firebase configuration is incomplete!"),console.error("Project ID:",e),console.error("API Key:",t?"Present":"Missing"),console.error("Auth Domain:",n))}})();let Q_={data:""},X_=e=>"object"==typeof window?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||Q_,Z_=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,J_=/\/\*[^]*?\*\/|  +/g,eA=/\n+/g,tA=(e,t)=>{let n="",r="",i="";for(let a in e){let o=e[a];"@"==a[0]?"i"==a[1]?n=a+" "+o+";":r+="f"==a[1]?tA(o,a):a+"{"+tA(o,"k"==a[1]?"":t)+"}":"object"==typeof o?r+=tA(o,t?t.replace(/([^,])+/g,(e=>a.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,(t=>/&/.test(t)?t.replace(/&/g,e):e?e+" "+t:t)))):a):null!=o&&(a=/^--/.test(a)?a:a.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=tA.p?tA.p(a,o):a+":"+o+";")}return n+(t&&i?t+"{"+i+"}":i)+r},nA={},rA=e=>{if("object"==typeof e){let t="";for(let n in e)t+=n+rA(e[n]);return t}return e},iA=(e,t,n,r,i)=>{let a=rA(e),o=nA[a]||(nA[a]=(e=>{let t=0,n=11;for(;t<e.length;)n=101*n+e.charCodeAt(t++)>>>0;return"go"+n})(a));if(!nA[o]){let t=a!==e?e:(e=>{let t,n,r=[{}];for(;t=Z_.exec(e.replace(J_,""));)t[4]?r.shift():t[3]?(n=t[3].replace(eA," ").trim(),r.unshift(r[0][n]=r[0][n]||{})):r[0][t[1]]=t[2].replace(eA," ").trim();return r[0]})(e);nA[o]=tA(i?{["@keyframes "+o]:t}:t,n?"":"."+o)}let s=n&&nA.g?nA.g:null;return n&&(nA.g=nA[o]),((e,t,n,r)=>{r?t.data=t.data.replace(r,e):-1===t.data.indexOf(e)&&(t.data=n?e+t.data:t.data+e)})(nA[o],t,r,s),o};function aA(e){let t=this||{},n=e.call?e(t.p):e;return iA(n.unshift?n.raw?((e,t,n)=>e.reduce(((e,r,i)=>{let a=t[i];if(a&&a.call){let e=a(n),t=e&&e.props&&e.props.className||/^go/.test(e)&&e;a=t?"."+t:e&&"object"==typeof e?e.props?"":tA(e,""):!1===e?"":e}return e+r+(null==a?"":a)}),""))(n,[].slice.call(arguments,1),t.p):n.reduce(((e,n)=>Object.assign(e,n&&n.call?n(t.p):n)),{}):n,X_(t.target),t.g,t.o,t.k)}aA.bind({g:1});let oA,sA,lA,cA=aA.bind({k:1});function uA(e,t){let n=this||{};return function(){let r=arguments;function i(a,o){let s=Object.assign({},a),l=s.className||i.className;n.p=Object.assign({theme:sA&&sA()},s),n.o=/ *go\d+/.test(l),s.className=aA.apply(n,r)+(l?" "+l:""),t&&(s.ref=o);let c=e;return e[0]&&(c=s.as||e,delete s.as),lA&&c[0]&&lA(s),oA(c,s)}return t?t(i):i}}var dA=(e,t)=>(e=>"function"==typeof e)(e)?e(t):e,hA=(()=>{let e=0;return()=>(++e).toString()})(),pA=(()=>{let e;return()=>{if(void 0===e&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),fA=(e,t)=>{switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,20)};case 1:return{...e,toasts:e.toasts.map((e=>e.id===t.toast.id?{...e,...t.toast}:e))};case 2:let{toast:n}=t;return fA(e,{type:e.toasts.find((e=>e.id===n.id))?1:0,toast:n});case 3:let{toastId:r}=t;return{...e,toasts:e.toasts.map((e=>e.id===r||void 0===r?{...e,dismissed:!0,visible:!1}:e))};case 4:return void 0===t.toastId?{...e,toasts:[]}:{...e,toasts:e.toasts.filter((e=>e.id!==t.toastId))};case 5:return{...e,pausedAt:t.time};case 6:let i=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map((e=>({...e,pauseDuration:e.pauseDuration+i})))}}},mA=[],gA={toasts:[],pausedAt:void 0},vA=e=>{gA=fA(gA,e),mA.forEach((e=>{e(gA)}))},yA={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},bA=e=>(t,n)=>{let r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"blank",n=arguments.length>2?arguments[2]:void 0;return{createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...n,id:(null==n?void 0:n.id)||hA()}}(t,e,n);return vA({type:2,toast:r}),r.id},wA=(e,t)=>bA("blank")(e,t);wA.error=bA("error"),wA.success=bA("success"),wA.loading=bA("loading"),wA.custom=bA("custom"),wA.dismiss=e=>{vA({type:3,toastId:e})},wA.remove=e=>vA({type:4,toastId:e}),wA.promise=(e,t,n)=>{let r=wA.loading(t.loading,{...n,...null==n?void 0:n.loading});return"function"==typeof e&&(e=e()),e.then((e=>{let i=t.success?dA(t.success,e):void 0;return i?wA.success(i,{id:r,...n,...null==n?void 0:n.success}):wA.dismiss(r),e})).catch((e=>{let i=t.error?dA(t.error,e):void 0;i?wA.error(i,{id:r,...n,...null==n?void 0:n.error}):wA.dismiss(r)})),e};var EA=(e,t)=>{vA({type:1,toast:{id:e,height:t}})},xA=()=>{vA({type:5,time:Date.now()})},_A=new Map,AA=e=>{let{toasts:n,pausedAt:r}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[n,r]=(0,t.useState)(gA),i=(0,t.useRef)(gA);(0,t.useEffect)((()=>(i.current!==gA&&r(gA),mA.push(r),()=>{let e=mA.indexOf(r);e>-1&&mA.splice(e,1)})),[]);let a=n.toasts.map((t=>{var n,r,i;return{...e,...e[t.type],...t,removeDelay:t.removeDelay||(null==(n=e[t.type])?void 0:n.removeDelay)||(null==e?void 0:e.removeDelay),duration:t.duration||(null==(r=e[t.type])?void 0:r.duration)||(null==e?void 0:e.duration)||yA[t.type],style:{...e.style,...null==(i=e[t.type])?void 0:i.style,...t.style}}}));return{...n,toasts:a}}(e);(0,t.useEffect)((()=>{if(r)return;let e=Date.now(),t=n.map((t=>{if(t.duration===1/0)return;let n=(t.duration||0)+t.pauseDuration-(e-t.createdAt);if(!(n<0))return setTimeout((()=>wA.dismiss(t.id)),n);t.visible&&wA.dismiss(t.id)}));return()=>{t.forEach((e=>e&&clearTimeout(e)))}}),[n,r]);let i=(0,t.useCallback)((()=>{r&&vA({type:6,time:Date.now()})}),[r]),a=(0,t.useCallback)(((e,t)=>{let{reverseOrder:r=!1,gutter:i=8,defaultPosition:a}=t||{},o=n.filter((t=>(t.position||a)===(e.position||a)&&t.height)),s=o.findIndex((t=>t.id===e.id)),l=o.filter(((e,t)=>t<s&&e.visible)).length;return o.filter((e=>e.visible)).slice(...r?[l+1]:[0,l]).reduce(((e,t)=>e+(t.height||0)+i),0)}),[n]);return(0,t.useEffect)((()=>{n.forEach((e=>{if(e.dismissed)!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;if(_A.has(e))return;let n=setTimeout((()=>{_A.delete(e),vA({type:4,toastId:e})}),t);_A.set(e,n)}(e.id,e.removeDelay);else{let t=_A.get(e.id);t&&(clearTimeout(t),_A.delete(e.id))}}))}),[n]),{toasts:n,handlers:{updateHeight:EA,startPause:xA,endPause:i,calculateOffset:a}}},TA=cA`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,SA=cA`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,kA=cA`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,CA=uA("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${TA} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${SA} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${kA} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,IA=cA`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,RA=uA("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${IA} 1s linear infinite;
`,DA=cA`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,LA=cA`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,PA=uA("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${DA} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${LA} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,MA=uA("div")`
  position: absolute;
`,NA=uA("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,OA=cA`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,jA=uA("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${OA} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,FA=e=>{let{toast:n}=e,{icon:r,type:i,iconTheme:a}=n;return void 0!==r?"string"==typeof r?t.createElement(jA,null,r):r:"blank"===i?null:t.createElement(NA,null,t.createElement(RA,{...a}),"loading"!==i&&t.createElement(MA,null,"error"===i?t.createElement(CA,{...a}):t.createElement(PA,{...a})))},UA=e=>`\n0% {transform: translate3d(0,${-200*e}%,0) scale(.6); opacity:.5;}\n100% {transform: translate3d(0,0,0) scale(1); opacity:1;}\n`,BA=e=>`\n0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}\n100% {transform: translate3d(0,${-150*e}%,-1px) scale(.6); opacity:0;}\n`,$A=uA("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,VA=uA("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,WA=t.memo((e=>{let{toast:n,position:r,style:i,children:a}=e,o=n.height?((e,t)=>{let n=e.includes("top")?1:-1,[r,i]=pA()?["0%{opacity:0;} 100%{opacity:1;}","0%{opacity:1;} 100%{opacity:0;}"]:[UA(n),BA(n)];return{animation:t?`${cA(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${cA(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}})(n.position||r||"top-center",n.visible):{opacity:0},s=t.createElement(FA,{toast:n}),l=t.createElement(VA,{...n.ariaProps},dA(n.message,n));return t.createElement($A,{className:n.className,style:{...o,...i,...n.style}},"function"==typeof a?a({icon:s,message:l}):t.createElement(t.Fragment,null,s,l))}));!function(e,t,n,r){tA.p=t,oA=e,sA=n,lA=r}(t.createElement);var zA=e=>{let{id:n,className:r,style:i,onHeightUpdate:a,children:o}=e,s=t.useCallback((e=>{if(e){let t=()=>{let t=e.getBoundingClientRect().height;a(n,t)};t(),new MutationObserver(t).observe(e,{subtree:!0,childList:!0,characterData:!0})}}),[n,a]);return t.createElement("div",{ref:s,className:r,style:i},o)},HA=aA`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,qA=e=>{let{reverseOrder:n,position:r="top-center",toastOptions:i,gutter:a,children:o,containerStyle:s,containerClassName:l}=e,{toasts:c,handlers:u}=AA(i);return t.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:16,left:16,right:16,bottom:16,pointerEvents:"none",...s},className:l,onMouseEnter:u.startPause,onMouseLeave:u.endPause},c.map((e=>{let i=e.position||r,s=((e,t)=>{let n=e.includes("top"),r=n?{top:0}:{bottom:0},i=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:pA()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(n?1:-1)}px)`,...r,...i}})(i,u.calculateOffset(e,{reverseOrder:n,gutter:a,defaultPosition:r}));return t.createElement(zA,{id:e.id,key:e.id,onHeightUpdate:u.updateHeight,className:e.visible?HA:"",style:s},"custom"===e.type?dA(e.message,e):o?o(e):t.createElement(WA,{toast:e,position:i}))})))},GA=n(185),KA=n.n(GA);const YA=(0,t.createContext)({user:null,loading:!0,error:null,login:async()=>{},register:async()=>{},logout:async()=>{},resetPassword:async()=>{},sendEmailVerification:async()=>{},setError:()=>{},forceCheckEmailVerification:async()=>!1,currentUser:null,userProfile:null,setUserProfile:()=>{},verifySourceCodeAndCompleteLogin:async()=>{},tempUserForSourceCode:null}),QA=e=>{var n;let{children:r}=e;const[i,a]=(0,t.useState)(null),[o,s]=(0,t.useState)(!0),[l,c]=(0,t.useState)(null),[u,d]=(0,t.useState)(null),h=Z();(0,t.useEffect)((()=>{console.log("Setting up auth state listener");const e=Ua(G_,(async e=>{if(console.log("Auth state changed:",e?"User logged in":"No user"),e)try{const t=await lv(Jm(q_,"users",e.uid));if(t.exists()){const n=t.data();a({...e,profile:n}),console.log("User data loaded successfully:",e.uid)}else console.error("User document not found in Firestore:",e.uid),a(null)}catch(l){console.error("Error loading user data:",l),a(null)}else a(null);s(!1)}));return()=>{console.log("Cleaning up auth state listener"),e()}}),[]),(0,t.useEffect)((()=>{if(null===i||void 0===i||!i.uid||!q_)return;const e=mv(Jm(q_,"users",i.uid),(e=>{if(e.exists()){var t;const n=e.data(),r=null===(t=i.profile)||void 0===t?void 0:t.isPrivate;a((e=>e?{...e,profile:n}:null)),a((e=>e?{...e,isPrivate:n.isPrivate||!1,followers:n.followers||[],following:n.following||[]}:null)),r!==n.isPrivate&&(wA.success("Account is now "+(n.isPrivate?"private":"public")),window.location.pathname.includes("/profile")&&window.location.reload())}}),(e=>{console.error("Error listening to privacy changes:",e),wA.error("Failed to sync privacy settings")}));return()=>e()}),[null===i||void 0===i?void 0:i.uid,q_,null===i||void 0===i||null===(n=i.profile)||void 0===n?void 0:n.isPrivate]),(0,t.useEffect)((()=>{i&&!o&&(i.emailVerified||wA.error("Please verify your email to continue",{duration:5e3,id:"email-verification-needed"}),i.profile&&!i.profile.sourceCodeSetupComplete&&wA.error("Please set up your source code to continue",{duration:5e3,id:"source-code-setup-needed"}))}),[i,o]);const p=async e=>{try{console.log("Starting forceCheckEmailVerification for user:",e.uid),console.log("Initial emailVerified status:",e.emailVerified),await e.reload();const n=G_.currentUser;if(!n)return console.error("User disappeared after reload"),!1;const r=n.emailVerified;if(console.log("Email verification status after reload:",r),r&&q_)try{const e=Jm(q_,"users",n.uid),t=await lv(e);if(t.exists()){if(!t.data().isVerified){const t=await(async e=>{if(!q_)return!1;try{return(await lv(Jm(q_,"admins",e))).exists()}catch(l){return console.log("Error checking admin status:",l),!1}})(n.uid);t?(await hv(e,{isVerified:!0,updatedAt:Av()}),console.log("Updated user profile verification status in Firestore")):console.log("User is not admin, skipping verification status update")}}}catch(l){console.log("Could not access user profile in Firestore")}try{const e=await n.getIdTokenResult(!0);return console.log("Token verification status:",e.claims.email_verified),e.claims.email_verified&&!r?(await n.reload(),n.emailVerified):!0===e.claims.email_verified}catch(t){return console.error("Error checking token verification status:",t),r}}catch(l){return console.error("Failed to check email verification status:",l),!1}},f={user:i,loading:o,error:l,login:async(e,t)=>{s(!0),c(null);try{if(!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(e))throw new Error("auth/invalid-email");console.log("Starting login process for:",e),await function(e,t){return Jt(e).setPersistence(t)}(G_,Ha),console.log("Persistence set to LOCAL");const n=await function(e,t,n){return pr(e.app)?Promise.reject(Ur(e)):Pa(Jt(e),ya.credential(t,n)).catch((async t=>{throw"auth/password-does-not-meet-requirements"===t.code&&Oa(e),t}))}(G_,e,t),r=n.user;console.log("Firebase Auth login successful for user:",r.uid);const i=await p(r);if(console.log("Email verification status:",i),!i)return console.log("Email not verified, redirecting to verification page..."),c("Please verify your email before logging in."),await Ba(G_),s(!1),void h("/verify-email",{replace:!0});const o=await lv(Jm(q_,"users",r.uid));if(o.exists()){const e=o.data();if(console.log("Retrieved user profile:",e),!e.sourceCodeSetupComplete)return console.log("Source code setup not complete, redirecting to setup..."),s(!1),void h("/setup-source-code",{replace:!0});a({...r,profile:e}),s(!1),console.log("Login complete, redirecting to feed..."),h("/",{replace:!0})}else{console.log("User profile not found, creating default profile...");const e={name:r.displayName||"",username:r.displayName||"",email:r.email||"",profilePic:r.photoURL||"",bio:"",location:"",website:"",followers:[],following:[],connections:[],isVerified:!1,sourceCodeHash:null,sourceCodeSetupComplete:!1,createdAt:nl.fromDate(new Date),lastLogin:nl.fromDate(new Date),dateOfBirth:nl.fromDate(new Date(2e3,0,1)),settings:{theme:"light",notifications:!0,privacy:"public"},preferences:{theme:"light",language:"en",notifications:!0,emailNotifications:!0,pushNotifications:!0}};await dv(Jm(q_,"users",r.uid),e),console.log("Created default user profile");const t=(await lv(Jm(q_,"users",r.uid))).data();if(!t.sourceCodeSetupComplete)return console.log("Source code setup not complete, redirecting to setup..."),s(!1),void h("/setup-source-code",{replace:!0});a({...r,profile:t}),s(!1),console.log("Login complete, redirecting to feed..."),h("/",{replace:!0})}}catch(l){console.error("Login function error:",l);let t="An error occurred during login.";"auth/invalid-credential"===l.code||"auth/invalid-credential"===l.message?t="Invalid email or password. Please check your credentials and try again.":"auth/user-not-found"===l.code||"auth/user-not-found"===l.message?t="No account found with this email.":"auth/wrong-password"===l.code||"auth/wrong-password"===l.message?t="Incorrect password.":"auth/too-many-requests"===l.code||"auth/too-many-requests"===l.message?t="Too many failed attempts. Please try again later.":"auth/network-request-failed"===l.code||"auth/network-request-failed"===l.message?t="Network error. Please check your connection.":"auth/invalid-email"===l.code||"auth/invalid-email"===l.message?t="Invalid email address. Please check the format.":"User profile not found"===l.message&&(t="User profile not found. Please contact support."),c(t),a(null),s(!1),((e,t)=>{console.error(`[${t}] Error:`,e)})(l,"Login Function")}},register:async(e,t,n,r)=>{s(!0),c(null);try{const i=await async function(e,t,n){if(pr(e.app))return Promise.reject(Ur(e));const r=Hi(e),i=ta(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ta,"EMAIL_PASSWORD_PROVIDER"),a=await i.catch((t=>{throw"auth/password-does-not-meet-requirements"===t.code&&Oa(e),t})),o=await Sa._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(o.user),o}(G_,e,t),o=i.user;if(console.log("User created successfully with UID:",o.uid),await Fa(o,{displayName:n}),console.log("User profile updated with username:",n),await ja(o),console.log("Verification email sent to:",o.email),q_){const t={theme:"light",language:"en",notifications:!0,emailNotifications:!0,pushNotifications:!0},i={name:n,username:n,email:e||"",profilePic:o.photoURL||"",bio:"",location:"",website:"",followers:[],following:[],connections:[],isVerified:!1,sourceCodeHash:null,sourceCodeSetupComplete:!1,createdAt:nl.fromDate(new Date),lastLogin:nl.fromDate(new Date),dateOfBirth:r,settings:{theme:"light",notifications:!0,privacy:"public"},preferences:t};await dv(Jm(q_,"users",o.uid),i),console.log("Basic user profile created in Firestore")}a(o)}catch(l){throw console.error("Registration error:",l),c(ZA(l.code)),l}finally{s(!1)}},logout:async()=>{try{s(!0),await Ba(G_),a(null),h("/login")}catch(l){console.error("Error logging out:",l),wA.error("Failed to log out")}finally{s(!1)}},resetPassword:async e=>{try{s(!0),await async function(e,t,n){const r=Hi(e),i={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};n&&Na(r,i,n),await ta(r,i,"getOobCode",ua,"EMAIL_PASSWORD_PROVIDER")}(G_,e)}catch(l){throw c(l.message),l}finally{s(!1)}},sendEmailVerification:async()=>{const e=G_.currentUser;if(e)try{s(!0),await e.reload();const t=G_.currentUser;if(!t)return void c("User not found");if(t.emailVerified)return await p(t),void h("/setup-source-code");await ja(t,{url:`${window.location.origin}/verify-email`,handleCodeInApp:!0}),q_&&await hv(Jm(q_,"users",t.uid),{lastVerificationAttempt:Av(),verificationStatus:"pending"}),wA.success("Verification email sent")}catch(l){console.error("Error sending verification email:",l),c(ZA(l.code||l.message))}finally{s(!1)}else c("No user available to send verification email")},setError:c,forceCheckEmailVerification:p,currentUser:i,userProfile:(null===i||void 0===i?void 0:i.profile)||null,setUserProfile:e=>{i&&a({...i,profile:e})},verifySourceCodeAndCompleteLogin:async e=>{if(!u||!q_)return c("No user logged in"),void console.error("verifySourceCodeAndCompleteLogin: No temporary user found");try{s(!0),c(null);const t=Jm(q_,"users",u.uid),n=await lv(t);if(!n.exists())return c("User profile not found"),void console.error("verifySourceCodeAndCompleteLogin: User profile not found");const r=n.data();if(!r.sourceCodeHash)return c("Source code not set up"),void console.error("verifySourceCodeAndCompleteLogin: No source code hash found");if(!await KA().compare(e,r.sourceCodeHash))return void c("Invalid source code");a({...u,profile:r}),d(null),s(!1),setTimeout((()=>{h("/")}),0)}catch(l){console.error("Error verifying source code:",l),c("Failed to verify source code"),s(!1)}},tempUserForSourceCode:u};return(0,Ve.jsx)(YA.Provider,{value:f,children:r})},XA=()=>{const e=(0,t.useContext)(YA);if(void 0===e)throw new Error("useAuth must be used within an AuthProvider");return e},ZA=e=>{switch(e){case"auth/invalid-email":return"Invalid email address";case"auth/user-disabled":return"This account has been disabled";case"auth/user-not-found":return"No account found with this email";case"auth/wrong-password":return"Incorrect password";case"auth/email-already-in-use":return"Email is already in use";case"auth/weak-password":return"Password is too weak";case"auth/network-request-failed":return"Network error. Please check your connection";case"auth/too-many-requests":return"Too many attempts. Please try again later";default:return"An error occurred. Please try again"}},JA=()=>{const{user:e}=XA();return{canViewProfile:t=>{var n,r,i;if(!e)return!1;if(e.uid===t)return!0;const a=null===(n=e.profile)||void 0===n||null===(r=n.followers)||void 0===r?void 0:r.includes(t);return!(null!==(i=e.profile)&&void 0!==i&&i.isPrivate)||a},canViewContent:t=>{var n,r,i;if(!e)return!1;if(e.uid===t)return!0;const a=null===(n=e.profile)||void 0===n||null===(r=n.following)||void 0===r?void 0:r.includes(t);return!(null!==(i=e.profile)&&void 0!==i&&i.isPrivate)||a}}},eT=(0,t.createContext)(void 0),tT=e=>{let{children:n}=e;const{currentUser:r}=XA(),[i,a]=(0,t.useState)([]),[o,s]=(0,t.useState)(0),[l,c]=(0,t.useState)(!0);(0,t.useEffect)((()=>{if(r&&q_){c(!0);const e=mv(Wg(Zm(q_,"users",r.uid,"notifications"),Kg("createdAt","desc"),Qg(50)),(e=>{const t=e.docs.map((e=>{const t=e.data();return{id:e.id,...t,createdAt:t.createdAt.toDate(),type:t.type,senderId:t.senderId,recipientId:t.recipientId,isRead:t.isRead,senderName:t.senderName,senderAvatar:t.senderAvatar,postId:t.postId,commentId:t.commentId,roomId:t.roomId,content:t.content}}));a(t),s(t.filter((e=>!e.isRead)).length),c(!1)}),(e=>{console.error("Error fetching notifications: ",e),c(!1)}));return()=>e()}a([]),s(0),c(!1)}),[r]);return(0,Ve.jsx)(eT.Provider,{value:{notifications:i,unreadCount:o,markAsRead:async e=>{if(q_&&r)try{const t=Jm(q_,"users",r.uid,"notifications",e);await hv(t,{isRead:!0})}catch(Rb){console.error("Error marking notification as read:",Rb)}},markAllAsRead:async()=>{if(q_&&r)try{const e=i.filter((e=>!e.isRead)).map((e=>hv(Jm(q_,"users",r.uid,"notifications",e.id),{isRead:!0})));await Promise.all(e)}catch(Rb){console.error("Error marking all notifications as read:",Rb)}},deleteNotification:async e=>{if(q_&&r)try{const t=Jm(q_,"users",r.uid,"notifications",e);await pv(t)}catch(Rb){console.error("Error deleting notification:",Rb)}}},children:n})};const nT=t.createContext(null);function rT(){return t.useContext(nT)}const iT="function"===typeof Symbol&&Symbol.for?Symbol.for("mui.nested"):"__THEME_NESTED__";const aT=function(e){const{children:n,theme:r}=e,i=rT(),a=t.useMemo((()=>{const e=null===i?r:function(e,t){if("function"===typeof t)return t(e);return(0,De.A)({},e,t)}(i,r);return null!=e&&(e[iT]=null!==i),e}),[r,i]);return(0,Ve.jsx)(nT.Provider,{value:a,children:n})},oT=["value"],sT=t.createContext();const lT=()=>{const e=t.useContext(sT);return null!=e&&e},cT=function(e){let{value:t}=e,n=(0,Le.A)(e,oT);return(0,Ve.jsx)(sT.Provider,(0,De.A)({value:null==t||t},n))};var uT=n(6171);const dT={};function hT(e,n,r){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return t.useMemo((()=>{const t=e&&n[e]||n;if("function"===typeof r){const a=r(t),o=e?(0,De.A)({},n,{[e]:a}):a;return i?()=>o:o}return e?(0,De.A)({},n,{[e]:r}):(0,De.A)({},n,r)}),[e,n,r,i])}const pT=function(e){const{children:t,theme:n,themeId:r}=e,i=Ue(dT),a=rT()||dT,o=hT(r,i,n),s=hT(r,a,n,!0),l="rtl"===o.direction;return(0,Ve.jsx)(aT,{theme:s,children:(0,Ve.jsx)(Fe.T.Provider,{value:o,children:(0,Ve.jsx)(cT,{value:l,children:(0,Ve.jsx)(uT.A,{value:null==o?void 0:o.components,children:t})})})})},fT=["theme"];function mT(e){let{theme:t}=e,n=(0,Le.A)(e,fT);const r=t[qe.A];let i=r||t;return"function"!==typeof t&&(r&&!r.vars?i=(0,De.A)({},r,{vars:null}):t&&!t.vars&&(i=(0,De.A)({},t,{vars:null}))),(0,Ve.jsx)(pT,(0,De.A)({},n,{themeId:r?qe.A:void 0,theme:i}))}const gT=(0,t.createContext)(void 0),vT=e=>{let{children:n}=e;const[r,i]=(0,t.useState)((()=>{const e=localStorage.getItem("darkMode");return!!e&&JSON.parse(e)}));(0,t.useEffect)((()=>{localStorage.setItem("darkMode",JSON.stringify(r))}),[r]);const a=(0,He.A)({palette:{mode:r?"dark":"light",primary:{main:"#1976d2"},secondary:{main:"#dc004e"},background:{default:r?"#121212":"#ffffff",paper:r?"#1e1e1e":"#ffffff"}},components:{MuiPaper:{styleOverrides:{root:{backgroundImage:"none"}}}}});return(0,Ve.jsx)(gT.Provider,{value:{isDarkMode:r,toggleDarkMode:()=>{i(!r)}},children:(0,Ve.jsx)(mT,{theme:a,children:n})})};var yT=n(8465),bT=n(9254),wT=n(1676),ET=n(9269);const xT=e=>{let t;return t=e<1?5.11916*e**2:4.5*Math.log(e+1)+2,(t/100).toFixed(2)};var _T=n(423);function AT(e){return(0,_T.Ay)("MuiPaper",e)}(0,Ge.A)("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const TT=["className","component","elevation","square","variant"],ST=(0,bT.Ay)("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],!n.square&&t.rounded,"elevation"===n.variant&&t[`elevation${n.elevation}`]]}})((e=>{let{theme:t,ownerState:n}=e;var r;return(0,De.A)({backgroundColor:(t.vars||t).palette.background.paper,color:(t.vars||t).palette.text.primary,transition:t.transitions.create("box-shadow")},!n.square&&{borderRadius:t.shape.borderRadius},"outlined"===n.variant&&{border:`1px solid ${(t.vars||t).palette.divider}`},"elevation"===n.variant&&(0,De.A)({boxShadow:(t.vars||t).shadows[n.elevation]},!t.vars&&"dark"===t.palette.mode&&{backgroundImage:`linear-gradient(${(0,ET.X4)("#fff",xT(n.elevation))}, ${(0,ET.X4)("#fff",xT(n.elevation))})`},t.vars&&{backgroundImage:null==(r=t.vars.overlays)?void 0:r[n.elevation]}))})),kT=t.forwardRef((function(e,t){const n=(0,Ze.b)({props:e,name:"MuiPaper"}),{className:r,component:i="div",elevation:a=1,square:o=!1,variant:s="elevation"}=n,l=(0,Le.A)(n,TT),c=(0,De.A)({},n,{component:i,elevation:a,square:o,variant:s}),u=(e=>{const{square:t,elevation:n,variant:r,classes:i}=e,a={root:["root",r,!t&&"rounded","elevation"===r&&`elevation${n}`]};return(0,yT.A)(a,AT,i)})(c);return(0,Ve.jsx)(ST,(0,De.A)({as:i,ownerState:c,className:(0,Pe.A)(u.root,r),ref:t},l))})),CT=kT;function IT(e){return(0,_T.Ay)("MuiAppBar",e)}(0,Ge.A)("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent","colorError","colorInfo","colorSuccess","colorWarning"]);const RT=["className","color","enableColorOnDark","position"],DT=(e,t)=>e?`${null==e?void 0:e.replace(")","")}, ${t})`:t,LT=(0,bT.Ay)(CT,{name:"MuiAppBar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`position${(0,wT.A)(n.position)}`],t[`color${(0,wT.A)(n.color)}`]]}})((e=>{let{theme:t,ownerState:n}=e;const r="light"===t.palette.mode?t.palette.grey[100]:t.palette.grey[900];return(0,De.A)({display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0},"fixed"===n.position&&{position:"fixed",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}},"absolute"===n.position&&{position:"absolute",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0},"sticky"===n.position&&{position:"sticky",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0},"static"===n.position&&{position:"static"},"relative"===n.position&&{position:"relative"},!t.vars&&(0,De.A)({},"default"===n.color&&{backgroundColor:r,color:t.palette.getContrastText(r)},n.color&&"default"!==n.color&&"inherit"!==n.color&&"transparent"!==n.color&&{backgroundColor:t.palette[n.color].main,color:t.palette[n.color].contrastText},"inherit"===n.color&&{color:"inherit"},"dark"===t.palette.mode&&!n.enableColorOnDark&&{backgroundColor:null,color:null},"transparent"===n.color&&(0,De.A)({backgroundColor:"transparent",color:"inherit"},"dark"===t.palette.mode&&{backgroundImage:"none"})),t.vars&&(0,De.A)({},"default"===n.color&&{"--AppBar-background":n.enableColorOnDark?t.vars.palette.AppBar.defaultBg:DT(t.vars.palette.AppBar.darkBg,t.vars.palette.AppBar.defaultBg),"--AppBar-color":n.enableColorOnDark?t.vars.palette.text.primary:DT(t.vars.palette.AppBar.darkColor,t.vars.palette.text.primary)},n.color&&!n.color.match(/^(default|inherit|transparent)$/)&&{"--AppBar-background":n.enableColorOnDark?t.vars.palette[n.color].main:DT(t.vars.palette.AppBar.darkBg,t.vars.palette[n.color].main),"--AppBar-color":n.enableColorOnDark?t.vars.palette[n.color].contrastText:DT(t.vars.palette.AppBar.darkColor,t.vars.palette[n.color].contrastText)},!["inherit","transparent"].includes(n.color)&&{backgroundColor:"var(--AppBar-background)"},{color:"inherit"===n.color?"inherit":"var(--AppBar-color)"},"transparent"===n.color&&{backgroundImage:"none",backgroundColor:"transparent",color:"inherit"}))})),PT=t.forwardRef((function(e,t){const n=(0,Ze.b)({props:e,name:"MuiAppBar"}),{className:r,color:i="primary",enableColorOnDark:a=!1,position:o="fixed"}=n,s=(0,Le.A)(n,RT),l=(0,De.A)({},n,{color:i,position:o,enableColorOnDark:a}),c=(e=>{const{color:t,position:n,classes:r}=e,i={root:["root",`color${(0,wT.A)(t)}`,`position${(0,wT.A)(n)}`]};return(0,yT.A)(i,IT,r)})(l);return(0,Ve.jsx)(LT,(0,De.A)({square:!0,component:"header",ownerState:l,elevation:4,className:(0,Pe.A)(c.root,r,"fixed"===o&&"mui-fixed"),ref:t},s))})),MT=PT;function NT(e){return(0,_T.Ay)("MuiToolbar",e)}(0,Ge.A)("MuiToolbar",["root","gutters","regular","dense"]);const OT=["className","component","disableGutters","variant"],jT=(0,bT.Ay)("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disableGutters&&t.gutters,t[n.variant]]}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({position:"relative",display:"flex",alignItems:"center"},!n.disableGutters&&{paddingLeft:t.spacing(2),paddingRight:t.spacing(2),[t.breakpoints.up("sm")]:{paddingLeft:t.spacing(3),paddingRight:t.spacing(3)}},"dense"===n.variant&&{minHeight:48})}),(e=>{let{theme:t,ownerState:n}=e;return"regular"===n.variant&&t.mixins.toolbar})),FT=t.forwardRef((function(e,t){const n=(0,Ze.b)({props:e,name:"MuiToolbar"}),{className:r,component:i="div",disableGutters:a=!1,variant:o="regular"}=n,s=(0,Le.A)(n,OT),l=(0,De.A)({},n,{component:i,disableGutters:a,variant:o}),c=(e=>{const{classes:t,disableGutters:n,variant:r}=e,i={root:["root",!n&&"gutters",r]};return(0,yT.A)(i,NT,t)})(l);return(0,Ve.jsx)(jT,(0,De.A)({as:i,className:(0,Pe.A)(c.root,r),ref:t,ownerState:l},s))})),UT=FT;var BT=n(5471);const $T=(0,BT.A)((0,Ve.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");function VT(e){return(0,_T.Ay)("MuiAvatar",e)}(0,Ge.A)("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);var WT=n(5393);const zT=function(e){return"string"===typeof e};const HT=function(e,t,n){return void 0===e||zT(e)?t:(0,De.A)({},t,{ownerState:(0,De.A)({},t.ownerState,n)})};const qT=function(e,t,n){return"function"===typeof e?e(t,n):e};const GT=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(void 0===e)return{};const n={};return Object.keys(e).filter((n=>n.match(/^on[A-Z]/)&&"function"===typeof e[n]&&!t.includes(n))).forEach((t=>{n[t]=e[t]})),n};const KT=function(e){if(void 0===e)return{};const t={};return Object.keys(e).filter((t=>!(t.match(/^on[A-Z]/)&&"function"===typeof e[t]))).forEach((n=>{t[n]=e[n]})),t};const YT=function(e){const{getSlotProps:t,additionalProps:n,externalSlotProps:r,externalForwardedProps:i,className:a}=e;if(!t){const e=(0,Pe.A)(null==n?void 0:n.className,a,null==i?void 0:i.className,null==r?void 0:r.className),t=(0,De.A)({},null==n?void 0:n.style,null==i?void 0:i.style,null==r?void 0:r.style),o=(0,De.A)({},n,i,r);return e.length>0&&(o.className=e),Object.keys(t).length>0&&(o.style=t),{props:o,internalRef:void 0}}const o=GT((0,De.A)({},i,r)),s=KT(r),l=KT(i),c=t(o),u=(0,Pe.A)(null==c?void 0:c.className,null==n?void 0:n.className,a,null==i?void 0:i.className,null==r?void 0:r.className),d=(0,De.A)({},null==c?void 0:c.style,null==n?void 0:n.style,null==i?void 0:i.style,null==r?void 0:r.style),h=(0,De.A)({},c,n,l,s);return u.length>0&&(h.className=u),Object.keys(d).length>0&&(h.style=d),{props:h,internalRef:c.ref}},QT=["className","elementType","ownerState","externalForwardedProps","getSlotOwnerState","internalForwardedProps"],XT=["component","slots","slotProps"],ZT=["component"];function JT(e,t){const{className:n,elementType:r,ownerState:i,externalForwardedProps:a,getSlotOwnerState:o,internalForwardedProps:s}=t,l=(0,Le.A)(t,QT),{component:c,slots:u={[e]:void 0},slotProps:d={[e]:void 0}}=a,h=(0,Le.A)(a,XT),p=u[e]||r,f=qT(d[e],i),m=YT((0,De.A)({className:n},l,{externalForwardedProps:"root"===e?h:void 0,externalSlotProps:f})),{props:{component:g},internalRef:v}=m,y=(0,Le.A)(m.props,ZT),b=(0,WT.A)(v,null==f?void 0:f.ref,t.ref),w=o?o(y):{},E=(0,De.A)({},i,w),x="root"===e?g||c:g,_=HT(p,(0,De.A)({},"root"===e&&!c&&!u[e]&&s,"root"!==e&&!u[e]&&s,y,x&&{as:x},{ref:b}),E);return Object.keys(w).forEach((e=>{delete _[e]})),[p,_]}const eS=["alt","children","className","component","slots","slotProps","imgProps","sizes","src","srcSet","variant"],tS=(0,bT.Ay)("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],n.colorDefault&&t.colorDefault]}})((e=>{let{theme:t}=e;return{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:t.typography.fontFamily,fontSize:t.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none",variants:[{props:{variant:"rounded"},style:{borderRadius:(t.vars||t).shape.borderRadius}},{props:{variant:"square"},style:{borderRadius:0}},{props:{colorDefault:!0},style:(0,De.A)({color:(t.vars||t).palette.background.default},t.vars?{backgroundColor:t.vars.palette.Avatar.defaultBg}:(0,De.A)({backgroundColor:t.palette.grey[400]},t.applyStyles("dark",{backgroundColor:t.palette.grey[600]})))}]}})),nS=(0,bT.Ay)("img",{name:"MuiAvatar",slot:"Img",overridesResolver:(e,t)=>t.img})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),rS=(0,bT.Ay)($T,{name:"MuiAvatar",slot:"Fallback",overridesResolver:(e,t)=>t.fallback})({width:"75%",height:"75%"});const iS=t.forwardRef((function(e,n){const r=(0,Ze.b)({props:e,name:"MuiAvatar"}),{alt:i,children:a,className:o,component:s="div",slots:l={},slotProps:c={},imgProps:u,sizes:d,src:h,srcSet:p,variant:f="circular"}=r,m=(0,Le.A)(r,eS);let g=null;const v=function(e){let{crossOrigin:n,referrerPolicy:r,src:i,srcSet:a}=e;const[o,s]=t.useState(!1);return t.useEffect((()=>{if(!i&&!a)return;s(!1);let e=!0;const t=new Image;return t.onload=()=>{e&&s("loaded")},t.onerror=()=>{e&&s("error")},t.crossOrigin=n,t.referrerPolicy=r,t.src=i,a&&(t.srcset=a),()=>{e=!1}}),[n,r,i,a]),o}((0,De.A)({},u,{src:h,srcSet:p})),y=h||p,b=y&&"error"!==v,w=(0,De.A)({},r,{colorDefault:!b,component:s,variant:f}),E=(e=>{const{classes:t,variant:n,colorDefault:r}=e,i={root:["root",n,r&&"colorDefault"],img:["img"],fallback:["fallback"]};return(0,yT.A)(i,VT,t)})(w),[x,_]=JT("img",{className:E.img,elementType:nS,externalForwardedProps:{slots:l,slotProps:{img:(0,De.A)({},u,c.img)}},additionalProps:{alt:i,src:h,srcSet:p,sizes:d},ownerState:w});return g=b?(0,Ve.jsx)(x,(0,De.A)({},_)):a||0===a?a:y&&i?i[0]:(0,Ve.jsx)(rS,{ownerState:w,className:E.fallback}),(0,Ve.jsx)(tS,(0,De.A)({as:s,ownerState:w,className:(0,Pe.A)(E.root,o),ref:n},m,{children:g}))})),aS=iS;function oS(e){return(0,_T.Ay)("MuiTypography",e)}(0,Ge.A)("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const sS=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],lS=(0,bT.Ay)("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.variant&&t[n.variant],"inherit"!==n.align&&t[`align${(0,wT.A)(n.align)}`],n.noWrap&&t.noWrap,n.gutterBottom&&t.gutterBottom,n.paragraph&&t.paragraph]}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({margin:0},"inherit"===n.variant&&{font:"inherit"},"inherit"!==n.variant&&t.typography[n.variant],"inherit"!==n.align&&{textAlign:n.align},n.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},n.gutterBottom&&{marginBottom:"0.35em"},n.paragraph&&{marginBottom:16})})),cS={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},uS={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},dS=t.forwardRef((function(e,t){const n=(0,Ze.b)({props:e,name:"MuiTypography"}),r=(e=>uS[e]||e)(n.color),i=(0,Oe.A)((0,De.A)({},n,{color:r})),{align:a="inherit",className:o,component:s,gutterBottom:l=!1,noWrap:c=!1,paragraph:u=!1,variant:d="body1",variantMapping:h=cS}=i,p=(0,Le.A)(i,sS),f=(0,De.A)({},i,{align:a,color:r,className:o,component:s,gutterBottom:l,noWrap:c,paragraph:u,variant:d,variantMapping:h}),m=s||(u?"p":h[d]||cS[d])||"span",g=(e=>{const{align:t,gutterBottom:n,noWrap:r,paragraph:i,variant:a,classes:o}=e,s={root:["root",a,"inherit"!==e.align&&`align${(0,wT.A)(t)}`,n&&"gutterBottom",r&&"noWrap",i&&"paragraph"]};return(0,yT.A)(s,oS,o)})(f);return(0,Ve.jsx)(lS,(0,De.A)({as:m,ref:t,ownerState:f,className:(0,Pe.A)(g.root,o)},p))})),hS=dS;var pS=n(1506),fS=n(1976),mS=n(1573);function gS(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vS(e,t){return vS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},vS(e,t)}function yS(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,vS(e,t)}const bS=t.createContext(null);function wS(e,n){var r=Object.create(null);return e&&t.Children.map(e,(function(e){return e})).forEach((function(e){r[e.key]=function(e){return n&&(0,t.isValidElement)(e)?n(e):e}(e)})),r}function ES(e,t,n){return null!=n[t]?n[t]:e.props[t]}function xS(e,n,r){var i=wS(e.children),a=function(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var r,i=Object.create(null),a=[];for(var o in e)o in t?a.length&&(i[o]=a,a=[]):a.push(o);var s={};for(var l in t){if(i[l])for(r=0;r<i[l].length;r++){var c=i[l][r];s[i[l][r]]=n(c)}s[l]=n(l)}for(r=0;r<a.length;r++)s[a[r]]=n(a[r]);return s}(n,i);return Object.keys(a).forEach((function(o){var s=a[o];if((0,t.isValidElement)(s)){var l=o in n,c=o in i,u=n[o],d=(0,t.isValidElement)(u)&&!u.props.in;!c||l&&!d?c||!l||d?c&&l&&(0,t.isValidElement)(u)&&(a[o]=(0,t.cloneElement)(s,{onExited:r.bind(null,s),in:u.props.in,exit:ES(s,"exit",e),enter:ES(s,"enter",e)})):a[o]=(0,t.cloneElement)(s,{in:!1}):a[o]=(0,t.cloneElement)(s,{onExited:r.bind(null,s),in:!0,exit:ES(s,"exit",e),enter:ES(s,"enter",e)})}})),a}var _S=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},AS=function(e){function n(t,n){var r,i=(r=e.call(this,t,n)||this).handleExited.bind(gS(r));return r.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},r}yS(n,e);var r=n.prototype;return r.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},r.componentWillUnmount=function(){this.mounted=!1},n.getDerivedStateFromProps=function(e,n){var r,i,a=n.children,o=n.handleExited;return{children:n.firstRender?(r=e,i=o,wS(r.children,(function(e){return(0,t.cloneElement)(e,{onExited:i.bind(null,e),in:!0,appear:ES(e,"appear",r),enter:ES(e,"enter",r),exit:ES(e,"exit",r)})}))):xS(e,a,o),firstRender:!1}},r.handleExited=function(e,t){var n=wS(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var n=(0,De.A)({},t.children);return delete n[e.key],{children:n}})))},r.render=function(){var e=this.props,n=e.component,r=e.childFactory,i=(0,Le.A)(e,["component","childFactory"]),a=this.state.contextValue,o=_S(this.state.children).map(r);return delete i.appear,delete i.enter,delete i.exit,null===n?t.createElement(bS.Provider,{value:a},o):t.createElement(bS.Provider,{value:a},t.createElement(n,i,o))},n}(t.Component);AS.propTypes={},AS.defaultProps={component:"div",childFactory:function(e){return e}};const TS=AS;var SS=n(8283),kS=n(1824);const CS=function(e){const{className:n,classes:r,pulsate:i=!1,rippleX:a,rippleY:o,rippleSize:s,in:l,onExited:c,timeout:u}=e,[d,h]=t.useState(!1),p=(0,Pe.A)(n,r.ripple,r.rippleVisible,i&&r.ripplePulsate),f={width:s,height:s,top:-s/2+o,left:-s/2+a},m=(0,Pe.A)(r.child,d&&r.childLeaving,i&&r.childPulsate);return l||d||h(!0),t.useEffect((()=>{if(!l&&null!=c){const e=setTimeout(c,u);return()=>{clearTimeout(e)}}}),[c,l,u]),(0,Ve.jsx)("span",{className:p,style:f,children:(0,Ve.jsx)("span",{className:m})})};const IS=(0,Ge.A)("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),RS=["center","classes","className"];let DS,LS,PS,MS,NS=e=>e;const OS=(0,SS.i7)(DS||(DS=NS`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`)),jS=(0,SS.i7)(LS||(LS=NS`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`)),FS=(0,SS.i7)(PS||(PS=NS`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`)),US=(0,bT.Ay)("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),BS=(0,bT.Ay)(CS,{name:"MuiTouchRipple",slot:"Ripple"})(MS||(MS=NS`
  opacity: 0;
  position: absolute;

  &.${0} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  &.${0} {
    animation-duration: ${0}ms;
  }

  & .${0} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${0} {
    opacity: 0;
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  & .${0} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${0};
    animation-duration: 2500ms;
    animation-timing-function: ${0};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`),IS.rippleVisible,OS,550,(e=>{let{theme:t}=e;return t.transitions.easing.easeInOut}),IS.ripplePulsate,(e=>{let{theme:t}=e;return t.transitions.duration.shorter}),IS.child,IS.childLeaving,jS,550,(e=>{let{theme:t}=e;return t.transitions.easing.easeInOut}),IS.childPulsate,FS,(e=>{let{theme:t}=e;return t.transitions.easing.easeInOut})),$S=t.forwardRef((function(e,n){const r=(0,Ze.b)({props:e,name:"MuiTouchRipple"}),{center:i=!1,classes:a={},className:o}=r,s=(0,Le.A)(r,RS),[l,c]=t.useState([]),u=t.useRef(0),d=t.useRef(null);t.useEffect((()=>{d.current&&(d.current(),d.current=null)}),[l]);const h=t.useRef(!1),p=(0,kS.A)(),f=t.useRef(null),m=t.useRef(null),g=t.useCallback((e=>{const{pulsate:t,rippleX:n,rippleY:r,rippleSize:i,cb:o}=e;c((e=>[...e,(0,Ve.jsx)(BS,{classes:{ripple:(0,Pe.A)(a.ripple,IS.ripple),rippleVisible:(0,Pe.A)(a.rippleVisible,IS.rippleVisible),ripplePulsate:(0,Pe.A)(a.ripplePulsate,IS.ripplePulsate),child:(0,Pe.A)(a.child,IS.child),childLeaving:(0,Pe.A)(a.childLeaving,IS.childLeaving),childPulsate:(0,Pe.A)(a.childPulsate,IS.childPulsate)},timeout:550,pulsate:t,rippleX:n,rippleY:r,rippleSize:i},u.current)])),u.current+=1,d.current=o}),[a]),v=t.useCallback((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{};const{pulsate:r=!1,center:a=i||t.pulsate,fakeElement:o=!1}=t;if("mousedown"===(null==e?void 0:e.type)&&h.current)return void(h.current=!1);"touchstart"===(null==e?void 0:e.type)&&(h.current=!0);const s=o?null:m.current,l=s?s.getBoundingClientRect():{width:0,height:0,left:0,top:0};let c,u,d;if(a||void 0===e||0===e.clientX&&0===e.clientY||!e.clientX&&!e.touches)c=Math.round(l.width/2),u=Math.round(l.height/2);else{const{clientX:t,clientY:n}=e.touches&&e.touches.length>0?e.touches[0]:e;c=Math.round(t-l.left),u=Math.round(n-l.top)}if(a)d=Math.sqrt((2*l.width**2+l.height**2)/3),d%2===0&&(d+=1);else{const e=2*Math.max(Math.abs((s?s.clientWidth:0)-c),c)+2,t=2*Math.max(Math.abs((s?s.clientHeight:0)-u),u)+2;d=Math.sqrt(e**2+t**2)}null!=e&&e.touches?null===f.current&&(f.current=()=>{g({pulsate:r,rippleX:c,rippleY:u,rippleSize:d,cb:n})},p.start(80,(()=>{f.current&&(f.current(),f.current=null)}))):g({pulsate:r,rippleX:c,rippleY:u,rippleSize:d,cb:n})}),[i,g,p]),y=t.useCallback((()=>{v({},{pulsate:!0})}),[v]),b=t.useCallback(((e,t)=>{if(p.clear(),"touchend"===(null==e?void 0:e.type)&&f.current)return f.current(),f.current=null,void p.start(0,(()=>{b(e,t)}));f.current=null,c((e=>e.length>0?e.slice(1):e)),d.current=t}),[p]);return t.useImperativeHandle(n,(()=>({pulsate:y,start:v,stop:b})),[y,v,b]),(0,Ve.jsx)(US,(0,De.A)({className:(0,Pe.A)(IS.root,a.root,o),ref:m},s,{children:(0,Ve.jsx)(TS,{component:null,exit:!0,children:l})}))})),VS=$S;function WS(e){return(0,_T.Ay)("MuiButtonBase",e)}const zS=(0,Ge.A)("MuiButtonBase",["root","disabled","focusVisible"]),HS=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],qS=(0,bT.Ay)("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${zS.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),GS=t.forwardRef((function(e,n){const r=(0,Ze.b)({props:e,name:"MuiButtonBase"}),{action:i,centerRipple:a=!1,children:o,className:s,component:l="button",disabled:c=!1,disableRipple:u=!1,disableTouchRipple:d=!1,focusRipple:h=!1,LinkComponent:p="a",onBlur:f,onClick:m,onContextMenu:g,onDragLeave:v,onFocus:y,onFocusVisible:b,onKeyDown:w,onKeyUp:E,onMouseDown:x,onMouseLeave:_,onMouseUp:A,onTouchEnd:T,onTouchMove:S,onTouchStart:k,tabIndex:C=0,TouchRippleProps:I,touchRippleRef:R,type:D}=r,L=(0,Le.A)(r,HS),P=t.useRef(null),M=t.useRef(null),N=(0,pS.A)(M,R),{isFocusVisibleRef:O,onFocus:j,onBlur:F,ref:U}=(0,mS.A)(),[B,$]=t.useState(!1);c&&B&&$(!1),t.useImperativeHandle(i,(()=>({focusVisible:()=>{$(!0),P.current.focus()}})),[]);const[V,W]=t.useState(!1);t.useEffect((()=>{W(!0)}),[]);const z=V&&!u&&!c;function H(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:d;return(0,fS.A)((r=>{t&&t(r);return!n&&M.current&&M.current[e](r),!0}))}t.useEffect((()=>{B&&h&&!u&&V&&M.current.pulsate()}),[u,h,B,V]);const q=H("start",x),G=H("stop",g),K=H("stop",v),Y=H("stop",A),Q=H("stop",(e=>{B&&e.preventDefault(),_&&_(e)})),X=H("start",k),Z=H("stop",T),J=H("stop",S),ee=H("stop",(e=>{F(e),!1===O.current&&$(!1),f&&f(e)}),!1),te=(0,fS.A)((e=>{P.current||(P.current=e.currentTarget),j(e),!0===O.current&&($(!0),b&&b(e)),y&&y(e)})),ne=()=>{const e=P.current;return l&&"button"!==l&&!("A"===e.tagName&&e.href)},re=t.useRef(!1),ie=(0,fS.A)((e=>{h&&!re.current&&B&&M.current&&" "===e.key&&(re.current=!0,M.current.stop(e,(()=>{M.current.start(e)}))),e.target===e.currentTarget&&ne()&&" "===e.key&&e.preventDefault(),w&&w(e),e.target===e.currentTarget&&ne()&&"Enter"===e.key&&!c&&(e.preventDefault(),m&&m(e))})),ae=(0,fS.A)((e=>{h&&" "===e.key&&M.current&&B&&!e.defaultPrevented&&(re.current=!1,M.current.stop(e,(()=>{M.current.pulsate(e)}))),E&&E(e),m&&e.target===e.currentTarget&&ne()&&" "===e.key&&!e.defaultPrevented&&m(e)}));let oe=l;"button"===oe&&(L.href||L.to)&&(oe=p);const se={};"button"===oe?(se.type=void 0===D?"button":D,se.disabled=c):(L.href||L.to||(se.role="button"),c&&(se["aria-disabled"]=c));const le=(0,pS.A)(n,U,P);const ce=(0,De.A)({},r,{centerRipple:a,component:l,disabled:c,disableRipple:u,disableTouchRipple:d,focusRipple:h,tabIndex:C,focusVisible:B}),ue=(e=>{const{disabled:t,focusVisible:n,focusVisibleClassName:r,classes:i}=e,a={root:["root",t&&"disabled",n&&"focusVisible"]},o=(0,yT.A)(a,WS,i);return n&&r&&(o.root+=` ${r}`),o})(ce);return(0,Ve.jsxs)(qS,(0,De.A)({as:oe,className:(0,Pe.A)(ue.root,s),ownerState:ce,onBlur:ee,onClick:m,onContextMenu:G,onFocus:te,onKeyDown:ie,onKeyUp:ae,onMouseDown:q,onMouseLeave:Q,onMouseUp:Y,onDragLeave:K,onTouchEnd:Z,onTouchMove:J,onTouchStart:X,ref:le,tabIndex:c?-1:C,type:D},se,L,{children:[o,z?(0,Ve.jsx)(VS,(0,De.A)({ref:N,center:a},I)):null]}))})),KS=GS;function YS(e){return(0,_T.Ay)("MuiIconButton",e)}const QS=(0,Ge.A)("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),XS=["edge","children","className","color","disabled","disableFocusRipple","size"],ZS=(0,bT.Ay)(KS,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"default"!==n.color&&t[`color${(0,wT.A)(n.color)}`],n.edge&&t[`edge${(0,wT.A)(n.edge)}`],t[`size${(0,wT.A)(n.size)}`]]}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({textAlign:"center",flex:"0 0 auto",fontSize:t.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(t.vars||t).palette.action.active,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest})},!n.disableRipple&&{"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:(0,ET.X4)(t.palette.action.active,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"start"===n.edge&&{marginLeft:"small"===n.size?-3:-12},"end"===n.edge&&{marginRight:"small"===n.size?-3:-12})}),(e=>{let{theme:t,ownerState:n}=e;var r;const i=null==(r=(t.vars||t).palette)?void 0:r[n.color];return(0,De.A)({},"inherit"===n.color&&{color:"inherit"},"inherit"!==n.color&&"default"!==n.color&&(0,De.A)({color:null==i?void 0:i.main},!n.disableRipple&&{"&:hover":(0,De.A)({},i&&{backgroundColor:t.vars?`rgba(${i.mainChannel} / ${t.vars.palette.action.hoverOpacity})`:(0,ET.X4)(i.main,t.palette.action.hoverOpacity)},{"@media (hover: none)":{backgroundColor:"transparent"}})}),"small"===n.size&&{padding:5,fontSize:t.typography.pxToRem(18)},"large"===n.size&&{padding:12,fontSize:t.typography.pxToRem(28)},{[`&.${QS.disabled}`]:{backgroundColor:"transparent",color:(t.vars||t).palette.action.disabled}})})),JS=t.forwardRef((function(e,t){const n=(0,Ze.b)({props:e,name:"MuiIconButton"}),{edge:r=!1,children:i,className:a,color:o="default",disabled:s=!1,disableFocusRipple:l=!1,size:c="medium"}=n,u=(0,Le.A)(n,XS),d=(0,De.A)({},n,{edge:r,color:o,disabled:s,disableFocusRipple:l,size:c}),h=(e=>{const{classes:t,disabled:n,color:r,edge:i,size:a}=e,o={root:["root",n&&"disabled","default"!==r&&`color${(0,wT.A)(r)}`,i&&`edge${(0,wT.A)(i)}`,`size${(0,wT.A)(a)}`]};return(0,yT.A)(o,YS,t)})(d);return(0,Ve.jsx)(ZS,(0,De.A)({className:(0,Pe.A)(h.root,a),centerRipple:!0,focusRipple:!l,disabled:s,ref:t},u,{ownerState:d,children:i}))})),ek=JS,tk=e=>{const n=t.useRef({});return t.useEffect((()=>{n.current=e})),n.current},nk=["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"];const rk=function(e){var t;const{elementType:n,externalSlotProps:r,ownerState:i,skipResolvingSlotProps:a=!1}=e,o=(0,Le.A)(e,nk),s=a?{}:qT(r,i),{props:l,internalRef:c}=YT((0,De.A)({},o,{externalSlotProps:s})),u=(0,WT.A)(c,null==s?void 0:s.ref,null==(t=e.additionalProps)?void 0:t.ref);return HT(n,(0,De.A)({},l,{ref:u}),i)};const ik=function(e){const{badgeContent:t,invisible:n=!1,max:r=99,showZero:i=!1}=e,a=tk({badgeContent:t,max:r});let o=n;!1!==n||0!==t||i||(o=!0);const{badgeContent:s,max:l=r}=o?a:e;return{badgeContent:s,invisible:o,max:l,displayValue:s&&Number(s)>l?`${l}+`:s}};function ak(e){return(0,_T.Ay)("MuiBadge",e)}const ok=(0,Ge.A)("MuiBadge",["root","badge","dot","standard","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft","invisible","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","overlapRectangular","overlapCircular","anchorOriginTopLeftCircular","anchorOriginTopLeftRectangular","anchorOriginTopRightCircular","anchorOriginTopRightRectangular","anchorOriginBottomLeftCircular","anchorOriginBottomLeftRectangular","anchorOriginBottomRightCircular","anchorOriginBottomRightRectangular"]),sk=["anchorOrigin","className","classes","component","components","componentsProps","children","overlap","color","invisible","max","badgeContent","slots","slotProps","showZero","variant"],lk=(0,bT.Ay)("span",{name:"MuiBadge",slot:"Root",overridesResolver:(e,t)=>t.root})({position:"relative",display:"inline-flex",verticalAlign:"middle",flexShrink:0}),ck=(0,bT.Ay)("span",{name:"MuiBadge",slot:"Badge",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.badge,t[n.variant],t[`anchorOrigin${(0,wT.A)(n.anchorOrigin.vertical)}${(0,wT.A)(n.anchorOrigin.horizontal)}${(0,wT.A)(n.overlap)}`],"default"!==n.color&&t[`color${(0,wT.A)(n.color)}`],n.invisible&&t.invisible]}})((e=>{let{theme:t}=e;var n;return{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"center",alignItems:"center",position:"absolute",boxSizing:"border-box",fontFamily:t.typography.fontFamily,fontWeight:t.typography.fontWeightMedium,fontSize:t.typography.pxToRem(12),minWidth:20,lineHeight:1,padding:"0 6px",height:20,borderRadius:10,zIndex:1,transition:t.transitions.create("transform",{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.enteringScreen}),variants:[...Object.keys((null!=(n=t.vars)?n:t).palette).filter((e=>{var n,r;return(null!=(n=t.vars)?n:t).palette[e].main&&(null!=(r=t.vars)?r:t).palette[e].contrastText})).map((e=>({props:{color:e},style:{backgroundColor:(t.vars||t).palette[e].main,color:(t.vars||t).palette[e].contrastText}}))),{props:{variant:"dot"},style:{borderRadius:4,height:8,minWidth:8,padding:0}},{props:e=>{let{ownerState:t}=e;return"top"===t.anchorOrigin.vertical&&"right"===t.anchorOrigin.horizontal&&"rectangular"===t.overlap},style:{top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${ok.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:e=>{let{ownerState:t}=e;return"bottom"===t.anchorOrigin.vertical&&"right"===t.anchorOrigin.horizontal&&"rectangular"===t.overlap},style:{bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${ok.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:e=>{let{ownerState:t}=e;return"top"===t.anchorOrigin.vertical&&"left"===t.anchorOrigin.horizontal&&"rectangular"===t.overlap},style:{top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${ok.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:e=>{let{ownerState:t}=e;return"bottom"===t.anchorOrigin.vertical&&"left"===t.anchorOrigin.horizontal&&"rectangular"===t.overlap},style:{bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${ok.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:e=>{let{ownerState:t}=e;return"top"===t.anchorOrigin.vertical&&"right"===t.anchorOrigin.horizontal&&"circular"===t.overlap},style:{top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${ok.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:e=>{let{ownerState:t}=e;return"bottom"===t.anchorOrigin.vertical&&"right"===t.anchorOrigin.horizontal&&"circular"===t.overlap},style:{bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${ok.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:e=>{let{ownerState:t}=e;return"top"===t.anchorOrigin.vertical&&"left"===t.anchorOrigin.horizontal&&"circular"===t.overlap},style:{top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${ok.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:e=>{let{ownerState:t}=e;return"bottom"===t.anchorOrigin.vertical&&"left"===t.anchorOrigin.horizontal&&"circular"===t.overlap},style:{bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${ok.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:{invisible:!0},style:{transition:t.transitions.create("transform",{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.leavingScreen})}}]}})),uk=t.forwardRef((function(e,t){var n,r,i,a,o,s;const l=(0,Ze.b)({props:e,name:"MuiBadge"}),{anchorOrigin:c={vertical:"top",horizontal:"right"},className:u,component:d,components:h={},componentsProps:p={},children:f,overlap:m="rectangular",color:g="default",invisible:v=!1,max:y=99,badgeContent:b,slots:w,slotProps:E,showZero:x=!1,variant:_="standard"}=l,A=(0,Le.A)(l,sk),{badgeContent:T,invisible:S,max:k,displayValue:C}=ik({max:y,invisible:v,badgeContent:b,showZero:x}),I=tk({anchorOrigin:c,color:g,overlap:m,variant:_,badgeContent:b}),R=S||null==T&&"dot"!==_,{color:D=g,overlap:L=m,anchorOrigin:P=c,variant:M=_}=R?I:l,N="dot"!==M?C:void 0,O=(0,De.A)({},l,{badgeContent:T,invisible:R,max:k,displayValue:N,showZero:x,anchorOrigin:P,color:D,overlap:L,variant:M}),j=(e=>{const{color:t,anchorOrigin:n,invisible:r,overlap:i,variant:a,classes:o={}}=e,s={root:["root"],badge:["badge",a,r&&"invisible",`anchorOrigin${(0,wT.A)(n.vertical)}${(0,wT.A)(n.horizontal)}`,`anchorOrigin${(0,wT.A)(n.vertical)}${(0,wT.A)(n.horizontal)}${(0,wT.A)(i)}`,`overlap${(0,wT.A)(i)}`,"default"!==t&&`color${(0,wT.A)(t)}`]};return(0,yT.A)(s,ak,o)})(O),F=null!=(n=null!=(r=null==w?void 0:w.root)?r:h.Root)?n:lk,U=null!=(i=null!=(a=null==w?void 0:w.badge)?a:h.Badge)?i:ck,B=null!=(o=null==E?void 0:E.root)?o:p.root,$=null!=(s=null==E?void 0:E.badge)?s:p.badge,V=rk({elementType:F,externalSlotProps:B,externalForwardedProps:A,additionalProps:{ref:t,as:d},ownerState:O,className:(0,Pe.A)(null==B?void 0:B.className,j.root,u)}),W=rk({elementType:U,externalSlotProps:$,ownerState:O,className:(0,Pe.A)(j.badge,null==$?void 0:$.className)});return(0,Ve.jsxs)(F,(0,De.A)({},V,{children:[f,(0,Ve.jsx)(U,(0,De.A)({},W,{children:N}))]}))})),dk=uk;var hk=n(5537),pk=n(9608);function fk(e){return(0,_T.Ay)("MuiButton",e)}const mk=(0,Ge.A)("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]);const gk=t.createContext({});const vk=t.createContext(void 0),yk=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],bk=e=>(0,De.A)({},"small"===e.size&&{"& > *:nth-of-type(1)":{fontSize:18}},"medium"===e.size&&{"& > *:nth-of-type(1)":{fontSize:20}},"large"===e.size&&{"& > *:nth-of-type(1)":{fontSize:22}}),wk=(0,bT.Ay)(KS,{shouldForwardProp:e=>(0,pk.A)(e)||"classes"===e,name:"MuiButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`${n.variant}${(0,wT.A)(n.color)}`],t[`size${(0,wT.A)(n.size)}`],t[`${n.variant}Size${(0,wT.A)(n.size)}`],"inherit"===n.color&&t.colorInherit,n.disableElevation&&t.disableElevation,n.fullWidth&&t.fullWidth]}})((e=>{let{theme:t,ownerState:n}=e;var r,i;const a="light"===t.palette.mode?t.palette.grey[300]:t.palette.grey[800],o="light"===t.palette.mode?t.palette.grey.A100:t.palette.grey[700];return(0,De.A)({},t.typography.button,{minWidth:64,padding:"6px 16px",borderRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create(["background-color","box-shadow","border-color","color"],{duration:t.transitions.duration.short}),"&:hover":(0,De.A)({textDecoration:"none",backgroundColor:t.vars?`rgba(${t.vars.palette.text.primaryChannel} / ${t.vars.palette.action.hoverOpacity})`:(0,ET.X4)(t.palette.text.primary,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"text"===n.variant&&"inherit"!==n.color&&{backgroundColor:t.vars?`rgba(${t.vars.palette[n.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:(0,ET.X4)(t.palette[n.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"outlined"===n.variant&&"inherit"!==n.color&&{border:`1px solid ${(t.vars||t).palette[n.color].main}`,backgroundColor:t.vars?`rgba(${t.vars.palette[n.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:(0,ET.X4)(t.palette[n.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"contained"===n.variant&&{backgroundColor:t.vars?t.vars.palette.Button.inheritContainedHoverBg:o,boxShadow:(t.vars||t).shadows[4],"@media (hover: none)":{boxShadow:(t.vars||t).shadows[2],backgroundColor:(t.vars||t).palette.grey[300]}},"contained"===n.variant&&"inherit"!==n.color&&{backgroundColor:(t.vars||t).palette[n.color].dark,"@media (hover: none)":{backgroundColor:(t.vars||t).palette[n.color].main}}),"&:active":(0,De.A)({},"contained"===n.variant&&{boxShadow:(t.vars||t).shadows[8]}),[`&.${mk.focusVisible}`]:(0,De.A)({},"contained"===n.variant&&{boxShadow:(t.vars||t).shadows[6]}),[`&.${mk.disabled}`]:(0,De.A)({color:(t.vars||t).palette.action.disabled},"outlined"===n.variant&&{border:`1px solid ${(t.vars||t).palette.action.disabledBackground}`},"contained"===n.variant&&{color:(t.vars||t).palette.action.disabled,boxShadow:(t.vars||t).shadows[0],backgroundColor:(t.vars||t).palette.action.disabledBackground})},"text"===n.variant&&{padding:"6px 8px"},"text"===n.variant&&"inherit"!==n.color&&{color:(t.vars||t).palette[n.color].main},"outlined"===n.variant&&{padding:"5px 15px",border:"1px solid currentColor"},"outlined"===n.variant&&"inherit"!==n.color&&{color:(t.vars||t).palette[n.color].main,border:t.vars?`1px solid rgba(${t.vars.palette[n.color].mainChannel} / 0.5)`:`1px solid ${(0,ET.X4)(t.palette[n.color].main,.5)}`},"contained"===n.variant&&{color:t.vars?t.vars.palette.text.primary:null==(r=(i=t.palette).getContrastText)?void 0:r.call(i,t.palette.grey[300]),backgroundColor:t.vars?t.vars.palette.Button.inheritContainedBg:a,boxShadow:(t.vars||t).shadows[2]},"contained"===n.variant&&"inherit"!==n.color&&{color:(t.vars||t).palette[n.color].contrastText,backgroundColor:(t.vars||t).palette[n.color].main},"inherit"===n.color&&{color:"inherit",borderColor:"currentColor"},"small"===n.size&&"text"===n.variant&&{padding:"4px 5px",fontSize:t.typography.pxToRem(13)},"large"===n.size&&"text"===n.variant&&{padding:"8px 11px",fontSize:t.typography.pxToRem(15)},"small"===n.size&&"outlined"===n.variant&&{padding:"3px 9px",fontSize:t.typography.pxToRem(13)},"large"===n.size&&"outlined"===n.variant&&{padding:"7px 21px",fontSize:t.typography.pxToRem(15)},"small"===n.size&&"contained"===n.variant&&{padding:"4px 10px",fontSize:t.typography.pxToRem(13)},"large"===n.size&&"contained"===n.variant&&{padding:"8px 22px",fontSize:t.typography.pxToRem(15)},n.fullWidth&&{width:"100%"})}),(e=>{let{ownerState:t}=e;return t.disableElevation&&{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${mk.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${mk.disabled}`]:{boxShadow:"none"}}})),Ek=(0,bT.Ay)("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.startIcon,t[`iconSize${(0,wT.A)(n.size)}`]]}})((e=>{let{ownerState:t}=e;return(0,De.A)({display:"inherit",marginRight:8,marginLeft:-4},"small"===t.size&&{marginLeft:-2},bk(t))})),xk=(0,bT.Ay)("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.endIcon,t[`iconSize${(0,wT.A)(n.size)}`]]}})((e=>{let{ownerState:t}=e;return(0,De.A)({display:"inherit",marginRight:-4,marginLeft:8},"small"===t.size&&{marginRight:-2},bk(t))})),_k=t.forwardRef((function(e,n){const r=t.useContext(gk),i=t.useContext(vk),a=(0,hk.A)(r,e),o=(0,Ze.b)({props:a,name:"MuiButton"}),{children:s,color:l="primary",component:c="button",className:u,disabled:d=!1,disableElevation:h=!1,disableFocusRipple:p=!1,endIcon:f,focusVisibleClassName:m,fullWidth:g=!1,size:v="medium",startIcon:y,type:b,variant:w="text"}=o,E=(0,Le.A)(o,yk),x=(0,De.A)({},o,{color:l,component:c,disabled:d,disableElevation:h,disableFocusRipple:p,fullWidth:g,size:v,type:b,variant:w}),_=(e=>{const{color:t,disableElevation:n,fullWidth:r,size:i,variant:a,classes:o}=e,s={root:["root",a,`${a}${(0,wT.A)(t)}`,`size${(0,wT.A)(i)}`,`${a}Size${(0,wT.A)(i)}`,`color${(0,wT.A)(t)}`,n&&"disableElevation",r&&"fullWidth"],label:["label"],startIcon:["icon","startIcon",`iconSize${(0,wT.A)(i)}`],endIcon:["icon","endIcon",`iconSize${(0,wT.A)(i)}`]},l=(0,yT.A)(s,fk,o);return(0,De.A)({},o,l)})(x),A=y&&(0,Ve.jsx)(Ek,{className:_.startIcon,ownerState:x,children:y}),T=f&&(0,Ve.jsx)(xk,{className:_.endIcon,ownerState:x,children:f}),S=i||"";return(0,Ve.jsxs)(wk,(0,De.A)({ownerState:x,className:(0,Pe.A)(r.className,_.root,u,S),component:c,disabled:d,focusRipple:!p,focusVisibleClassName:(0,Pe.A)(_.focusVisible,m),ref:n,type:b},E,{classes:_,children:[A,s,T]}))})),Ak=_k;var Tk=n(7402);const Sk=t.createContext({});function kk(e){return(0,_T.Ay)("MuiList",e)}(0,Ge.A)("MuiList",["root","padding","dense","subheader"]);const Ck=["children","className","component","dense","disablePadding","subheader"],Ik=(0,bT.Ay)("ul",{name:"MuiList",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disablePadding&&t.padding,n.dense&&t.dense,n.subheader&&t.subheader]}})((e=>{let{ownerState:t}=e;return(0,De.A)({listStyle:"none",margin:0,padding:0,position:"relative"},!t.disablePadding&&{paddingTop:8,paddingBottom:8},t.subheader&&{paddingTop:0})})),Rk=t.forwardRef((function(e,n){const r=(0,Ze.b)({props:e,name:"MuiList"}),{children:i,className:a,component:o="ul",dense:s=!1,disablePadding:l=!1,subheader:c}=r,u=(0,Le.A)(r,Ck),d=t.useMemo((()=>({dense:s})),[s]),h=(0,De.A)({},r,{component:o,dense:s,disablePadding:l}),p=(e=>{const{classes:t,disablePadding:n,dense:r,subheader:i}=e,a={root:["root",!n&&"padding",r&&"dense",i&&"subheader"]};return(0,yT.A)(a,kk,t)})(h);return(0,Ve.jsx)(Sk.Provider,{value:d,children:(0,Ve.jsxs)(Ik,(0,De.A)({as:o,className:(0,Pe.A)(p.root,a),ref:n,ownerState:h},u,{children:[c,i]}))})})),Dk=Rk;function Lk(e){const t=e.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}const Pk=Lk;var Mk=n(9044);const Nk=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function Ok(e,t,n){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:n?null:e.firstChild}function jk(e,t,n){return e===t?n?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:n?null:e.lastChild}function Fk(e,t){if(void 0===t)return!0;let n=e.innerText;return void 0===n&&(n=e.textContent),n=n.trim().toLowerCase(),0!==n.length&&(t.repeating?n[0]===t.keys[0]:0===n.indexOf(t.keys.join("")))}function Uk(e,t,n,r,i,a){let o=!1,s=i(e,t,!!t&&n);for(;s;){if(s===e.firstChild){if(o)return!1;o=!0}const t=!r&&(s.disabled||"true"===s.getAttribute("aria-disabled"));if(s.hasAttribute("tabindex")&&Fk(s,a)&&!t)return s.focus(),!0;s=i(e,s,n)}return!1}const Bk=t.forwardRef((function(e,n){const{actions:r,autoFocus:i=!1,autoFocusItem:a=!1,children:o,className:s,disabledItemsFocusable:l=!1,disableListWrap:c=!1,onKeyDown:u,variant:d="selectedMenu"}=e,h=(0,Le.A)(e,Nk),p=t.useRef(null),f=t.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});(0,Mk.A)((()=>{i&&p.current.focus()}),[i]),t.useImperativeHandle(r,(()=>({adjustStyleForScrollbar:(e,t)=>{let{direction:n}=t;const r=!p.current.style.width;if(e.clientHeight<p.current.clientHeight&&r){const t=`${Pk((0,Tk.A)(e))}px`;p.current.style["rtl"===n?"paddingLeft":"paddingRight"]=t,p.current.style.width=`calc(100% + ${t})`}return p.current}})),[]);const m=(0,pS.A)(p,n);let g=-1;t.Children.forEach(o,((e,n)=>{t.isValidElement(e)?(e.props.disabled||("selectedMenu"===d&&e.props.selected||-1===g)&&(g=n),g===n&&(e.props.disabled||e.props.muiSkipListHighlight||e.type.muiSkipListHighlight)&&(g+=1,g>=o.length&&(g=-1))):g===n&&(g+=1,g>=o.length&&(g=-1))}));const v=t.Children.map(o,((e,n)=>{if(n===g){const n={};return a&&(n.autoFocus=!0),void 0===e.props.tabIndex&&"selectedMenu"===d&&(n.tabIndex=0),t.cloneElement(e,n)}return e}));return(0,Ve.jsx)(Dk,(0,De.A)({role:"menu",ref:m,className:s,onKeyDown:e=>{const t=p.current,n=e.key,r=(0,Tk.A)(t).activeElement;if("ArrowDown"===n)e.preventDefault(),Uk(t,r,c,l,Ok);else if("ArrowUp"===n)e.preventDefault(),Uk(t,r,c,l,jk);else if("Home"===n)e.preventDefault(),Uk(t,null,c,l,Ok);else if("End"===n)e.preventDefault(),Uk(t,null,c,l,jk);else if(1===n.length){const i=f.current,a=n.toLowerCase(),o=performance.now();i.keys.length>0&&(o-i.lastTime>500?(i.keys=[],i.repeating=!0,i.previousKeyMatched=!0):i.repeating&&a!==i.keys[0]&&(i.repeating=!1)),i.lastTime=o,i.keys.push(a);const s=r&&!i.repeating&&Fk(r,i);i.previousKeyMatched&&(s||Uk(t,r,!1,l,Ok,i))?e.preventDefault():i.previousKeyMatched=!1}u&&u(e)},tabIndex:i?0:-1},h,{children:v}))})),$k=Bk;var Vk=n(1209),Wk=n(827);function zk(e){var n;return parseInt(t.version,10)>=19?(null==e||null==(n=e.props)?void 0:n.ref)||null:(null==e?void 0:e.ref)||null}const Hk=!1;var qk=function(e){return e.scrollTop},Gk="unmounted",Kk="exited",Yk="entering",Qk="entered",Xk="exiting",Zk=function(e){function n(t,n){var r;r=e.call(this,t,n)||this;var i,a=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?a?(i=Kk,r.appearStatus=Yk):i=Qk:i=t.unmountOnExit||t.mountOnEnter?Gk:Kk,r.state={status:i},r.nextCallback=null,r}yS(n,e),n.getDerivedStateFromProps=function(e,t){return e.in&&t.status===Gk?{status:Kk}:null};var r=n.prototype;return r.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},r.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==Yk&&n!==Qk&&(t=Yk):n!==Yk&&n!==Qk||(t=Xk)}this.updateStatus(!1,t)},r.componentWillUnmount=function(){this.cancelNextCallback()},r.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},r.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===Yk){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:be.findDOMNode(this);n&&qk(n)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Kk&&this.setState({status:Gk})},r.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,i=this.props.nodeRef?[r]:[be.findDOMNode(this),r],a=i[0],o=i[1],s=this.getTimeouts(),l=r?s.appear:s.enter;!e&&!n||Hk?this.safeSetState({status:Qk},(function(){t.props.onEntered(a)})):(this.props.onEnter(a,o),this.safeSetState({status:Yk},(function(){t.props.onEntering(a,o),t.onTransitionEnd(l,(function(){t.safeSetState({status:Qk},(function(){t.props.onEntered(a,o)}))}))})))},r.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:be.findDOMNode(this);t&&!Hk?(this.props.onExit(r),this.safeSetState({status:Xk},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:Kk},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:Kk},(function(){e.props.onExited(r)}))},r.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},r.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},r.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},r.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:be.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],a=i[0],o=i[1];this.props.addEndListener(a,o)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},r.render=function(){var e=this.state.status;if(e===Gk)return null;var n=this.props,r=n.children,i=(n.in,n.mountOnEnter,n.unmountOnExit,n.appear,n.enter,n.exit,n.timeout,n.addEndListener,n.onEnter,n.onEntering,n.onEntered,n.onExit,n.onExiting,n.onExited,n.nodeRef,(0,Le.A)(n,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return t.createElement(bS.Provider,{value:null},"function"===typeof r?r(e,i):t.cloneElement(t.Children.only(r),i))},n}(t.Component);function Jk(){}Zk.contextType=bS,Zk.propTypes={},Zk.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Jk,onEntering:Jk,onEntered:Jk,onExit:Jk,onExiting:Jk,onExited:Jk},Zk.UNMOUNTED=Gk,Zk.EXITED=Kk,Zk.ENTERING=Yk,Zk.ENTERED=Qk,Zk.EXITING=Xk;const eC=Zk;function tC(){const e=$e(tt.A);return e[qe.A]||e}const nC=e=>e.scrollTop;function rC(e,t){var n,r;const{timeout:i,easing:a,style:o={}}=e;return{duration:null!=(n=o.transitionDuration)?n:"number"===typeof i?i:i[t.mode]||0,easing:null!=(r=o.transitionTimingFunction)?r:"object"===typeof a?a[t.mode]:a,delay:o.transitionDelay}}const iC=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function aC(e){return`scale(${e}, ${e**2})`}const oC={entering:{opacity:1,transform:aC(1)},entered:{opacity:1,transform:"none"}},sC="undefined"!==typeof navigator&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),lC=t.forwardRef((function(e,n){const{addEndListener:r,appear:i=!0,children:a,easing:o,in:s,onEnter:l,onEntered:c,onEntering:u,onExit:d,onExited:h,onExiting:p,style:f,timeout:m="auto",TransitionComponent:g=eC}=e,v=(0,Le.A)(e,iC),y=(0,kS.A)(),b=t.useRef(),w=tC(),E=t.useRef(null),x=(0,pS.A)(E,zk(a),n),_=e=>t=>{if(e){const n=E.current;void 0===t?e(n):e(n,t)}},A=_(u),T=_(((e,t)=>{nC(e);const{duration:n,delay:r,easing:i}=rC({style:f,timeout:m,easing:o},{mode:"enter"});let a;"auto"===m?(a=w.transitions.getAutoHeightDuration(e.clientHeight),b.current=a):a=n,e.style.transition=[w.transitions.create("opacity",{duration:a,delay:r}),w.transitions.create("transform",{duration:sC?a:.666*a,delay:r,easing:i})].join(","),l&&l(e,t)})),S=_(c),k=_(p),C=_((e=>{const{duration:t,delay:n,easing:r}=rC({style:f,timeout:m,easing:o},{mode:"exit"});let i;"auto"===m?(i=w.transitions.getAutoHeightDuration(e.clientHeight),b.current=i):i=t,e.style.transition=[w.transitions.create("opacity",{duration:i,delay:n}),w.transitions.create("transform",{duration:sC?i:.666*i,delay:sC?n:n||.333*i,easing:r})].join(","),e.style.opacity=0,e.style.transform=aC(.75),d&&d(e)})),I=_(h);return(0,Ve.jsx)(g,(0,De.A)({appear:i,in:s,nodeRef:E,onEnter:T,onEntered:S,onEntering:A,onExit:C,onExited:I,onExiting:k,addEndListener:e=>{"auto"===m&&y.start(b.current||0,e),r&&r(E.current,e)},timeout:"auto"===m?null:m},v,{children:(e,n)=>t.cloneElement(a,(0,De.A)({style:(0,De.A)({opacity:0,transform:aC(.75),visibility:"exited"!==e||s?void 0:"hidden"},oC[e],f,a.props.style),ref:x},n))}))}));lC.muiSupportAuto=!0;const cC=lC;var uC=n(6907);const dC=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function hC(e){const t=[],n=[];return Array.from(e.querySelectorAll(dC)).forEach(((e,r)=>{const i=function(e){const t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?"true"===e.contentEditable||("AUDIO"===e.nodeName||"VIDEO"===e.nodeName||"DETAILS"===e.nodeName)&&null===e.getAttribute("tabindex")?0:e.tabIndex:t}(e);-1!==i&&function(e){return!(e.disabled||"INPUT"===e.tagName&&"hidden"===e.type||function(e){if("INPUT"!==e.tagName||"radio"!==e.type)return!1;if(!e.name)return!1;const t=t=>e.ownerDocument.querySelector(`input[type="radio"]${t}`);let n=t(`[name="${e.name}"]:checked`);return n||(n=t(`[name="${e.name}"]`)),n!==e}(e))}(e)&&(0===i?t.push(e):n.push({documentOrder:r,tabIndex:i,node:e}))})),n.sort(((e,t)=>e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex)).map((e=>e.node)).concat(t)}function pC(){return!0}const fC=function(e){const{children:n,disableAutoFocus:r=!1,disableEnforceFocus:i=!1,disableRestoreFocus:a=!1,getTabbable:o=hC,isEnabled:s=pC,open:l}=e,c=t.useRef(!1),u=t.useRef(null),d=t.useRef(null),h=t.useRef(null),p=t.useRef(null),f=t.useRef(!1),m=t.useRef(null),g=(0,WT.A)(zk(n),m),v=t.useRef(null);t.useEffect((()=>{l&&m.current&&(f.current=!r)}),[r,l]),t.useEffect((()=>{if(!l||!m.current)return;const e=(0,uC.A)(m.current);return m.current.contains(e.activeElement)||(m.current.hasAttribute("tabIndex")||m.current.setAttribute("tabIndex","-1"),f.current&&m.current.focus()),()=>{a||(h.current&&h.current.focus&&(c.current=!0,h.current.focus()),h.current=null)}}),[l]),t.useEffect((()=>{if(!l||!m.current)return;const e=(0,uC.A)(m.current),t=t=>{v.current=t,!i&&s()&&"Tab"===t.key&&e.activeElement===m.current&&t.shiftKey&&(c.current=!0,d.current&&d.current.focus())},n=()=>{const t=m.current;if(null===t)return;if(!e.hasFocus()||!s()||c.current)return void(c.current=!1);if(t.contains(e.activeElement))return;if(i&&e.activeElement!==u.current&&e.activeElement!==d.current)return;if(e.activeElement!==p.current)p.current=null;else if(null!==p.current)return;if(!f.current)return;let n=[];if(e.activeElement!==u.current&&e.activeElement!==d.current||(n=o(m.current)),n.length>0){var r,a;const e=Boolean((null==(r=v.current)?void 0:r.shiftKey)&&"Tab"===(null==(a=v.current)?void 0:a.key)),t=n[0],i=n[n.length-1];"string"!==typeof t&&"string"!==typeof i&&(e?i.focus():t.focus())}else t.focus()};e.addEventListener("focusin",n),e.addEventListener("keydown",t,!0);const r=setInterval((()=>{e.activeElement&&"BODY"===e.activeElement.tagName&&n()}),50);return()=>{clearInterval(r),e.removeEventListener("focusin",n),e.removeEventListener("keydown",t,!0)}}),[r,i,a,s,l,o]);const y=e=>{null===h.current&&(h.current=e.relatedTarget),f.current=!0};return(0,Ve.jsxs)(t.Fragment,{children:[(0,Ve.jsx)("div",{tabIndex:l?0:-1,onFocus:y,ref:u,"data-testid":"sentinelStart"}),t.cloneElement(n,{ref:g,onFocus:e=>{null===h.current&&(h.current=e.relatedTarget),f.current=!0,p.current=e.target;const t=n.props.onFocus;t&&t(e)}}),(0,Ve.jsx)("div",{tabIndex:l?0:-1,onFocus:y,ref:d,"data-testid":"sentinelEnd"})]})};var mC=n(1399),gC=n(5587);const vC=t.forwardRef((function(e,n){const{children:r,container:i,disablePortal:a=!1}=e,[o,s]=t.useState(null),l=(0,WT.A)(t.isValidElement(r)?zk(r):null,n);if((0,mC.A)((()=>{a||s(function(e){return"function"===typeof e?e():e}(i)||document.body)}),[i,a]),(0,mC.A)((()=>{if(o&&!a)return(0,gC.A)(n,o),()=>{(0,gC.A)(n,null)}}),[n,o,a]),a){if(t.isValidElement(r)){const e={ref:l};return t.cloneElement(r,e)}return(0,Ve.jsx)(t.Fragment,{children:r})}return(0,Ve.jsx)(t.Fragment,{children:o?be.createPortal(r,o):o})})),yC=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],bC={entering:{opacity:1},entered:{opacity:1}},wC=t.forwardRef((function(e,n){const r=tC(),i={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:a,appear:o=!0,children:s,easing:l,in:c,onEnter:u,onEntered:d,onEntering:h,onExit:p,onExited:f,onExiting:m,style:g,timeout:v=i,TransitionComponent:y=eC}=e,b=(0,Le.A)(e,yC),w=t.useRef(null),E=(0,pS.A)(w,zk(s),n),x=e=>t=>{if(e){const n=w.current;void 0===t?e(n):e(n,t)}},_=x(h),A=x(((e,t)=>{nC(e);const n=rC({style:g,timeout:v,easing:l},{mode:"enter"});e.style.webkitTransition=r.transitions.create("opacity",n),e.style.transition=r.transitions.create("opacity",n),u&&u(e,t)})),T=x(d),S=x(m),k=x((e=>{const t=rC({style:g,timeout:v,easing:l},{mode:"exit"});e.style.webkitTransition=r.transitions.create("opacity",t),e.style.transition=r.transitions.create("opacity",t),p&&p(e)})),C=x(f);return(0,Ve.jsx)(y,(0,De.A)({appear:o,in:c,nodeRef:w,onEnter:A,onEntered:T,onEntering:_,onExit:k,onExited:C,onExiting:S,addEndListener:e=>{a&&a(w.current,e)},timeout:v},b,{children:(e,n)=>t.cloneElement(s,(0,De.A)({style:(0,De.A)({opacity:0,visibility:"exited"!==e||c?void 0:"hidden"},bC[e],g,s.props.style),ref:E},n))}))})),EC=wC;function xC(e){return(0,_T.Ay)("MuiBackdrop",e)}(0,Ge.A)("MuiBackdrop",["root","invisible"]);const _C=["children","className","component","components","componentsProps","invisible","open","slotProps","slots","TransitionComponent","transitionDuration"],AC=(0,bT.Ay)("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.invisible&&t.invisible]}})((e=>{let{ownerState:t}=e;return(0,De.A)({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},t.invisible&&{backgroundColor:"transparent"})})),TC=t.forwardRef((function(e,t){var n,r,i;const a=(0,Ze.b)({props:e,name:"MuiBackdrop"}),{children:o,className:s,component:l="div",components:c={},componentsProps:u={},invisible:d=!1,open:h,slotProps:p={},slots:f={},TransitionComponent:m=EC,transitionDuration:g}=a,v=(0,Le.A)(a,_C),y=(0,De.A)({},a,{component:l,invisible:d}),b=(e=>{const{classes:t,invisible:n}=e,r={root:["root",n&&"invisible"]};return(0,yT.A)(r,xC,t)})(y),w=null!=(n=p.root)?n:u.root;return(0,Ve.jsx)(m,(0,De.A)({in:h,timeout:g},v,{children:(0,Ve.jsx)(AC,(0,De.A)({"aria-hidden":!0},w,{as:null!=(r=null!=(i=f.root)?i:c.Root)?r:l,className:(0,Pe.A)(b.root,s,null==w?void 0:w.className),ownerState:(0,De.A)({},y,null==w?void 0:w.ownerState),classes:b,ref:t,children:o}))}))})),SC=TC;var kC=n(2529),CC=n(5511),IC=n(8635);function RC(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function DC(e){return parseInt((0,IC.A)(e).getComputedStyle(e).paddingRight,10)||0}function LC(e,t,n,r,i){const a=[t,n,...r];[].forEach.call(e.children,(e=>{const t=-1===a.indexOf(e),n=!function(e){const t=-1!==["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(e.tagName),n="INPUT"===e.tagName&&"hidden"===e.getAttribute("type");return t||n}(e);t&&n&&RC(e,i)}))}function PC(e,t){let n=-1;return e.some(((e,r)=>!!t(e)&&(n=r,!0))),n}function MC(e,t){const n=[],r=e.container;if(!t.disableScrollLock){if(function(e){const t=(0,uC.A)(e);return t.body===e?(0,IC.A)(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}(r)){const e=Lk((0,uC.A)(r));n.push({value:r.style.paddingRight,property:"padding-right",el:r}),r.style.paddingRight=`${DC(r)+e}px`;const t=(0,uC.A)(r).querySelectorAll(".mui-fixed");[].forEach.call(t,(t=>{n.push({value:t.style.paddingRight,property:"padding-right",el:t}),t.style.paddingRight=`${DC(t)+e}px`}))}let e;if(r.parentNode instanceof DocumentFragment)e=(0,uC.A)(r).body;else{const t=r.parentElement,n=(0,IC.A)(r);e="HTML"===(null==t?void 0:t.nodeName)&&"scroll"===n.getComputedStyle(t).overflowY?t:r}n.push({value:e.style.overflow,property:"overflow",el:e},{value:e.style.overflowX,property:"overflow-x",el:e},{value:e.style.overflowY,property:"overflow-y",el:e}),e.style.overflow="hidden"}return()=>{n.forEach((e=>{let{value:t,el:n,property:r}=e;t?n.style.setProperty(r,t):n.style.removeProperty(r)}))}}const NC=new class{constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}add(e,t){let n=this.modals.indexOf(e);if(-1!==n)return n;n=this.modals.length,this.modals.push(e),e.modalRef&&RC(e.modalRef,!1);const r=function(e){const t=[];return[].forEach.call(e.children,(e=>{"true"===e.getAttribute("aria-hidden")&&t.push(e)})),t}(t);LC(t,e.mount,e.modalRef,r,!0);const i=PC(this.containers,(e=>e.container===t));return-1!==i?(this.containers[i].modals.push(e),n):(this.containers.push({modals:[e],container:t,restore:null,hiddenSiblings:r}),n)}mount(e,t){const n=PC(this.containers,(t=>-1!==t.modals.indexOf(e))),r=this.containers[n];r.restore||(r.restore=MC(r,t))}remove(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=this.modals.indexOf(e);if(-1===n)return n;const r=PC(this.containers,(t=>-1!==t.modals.indexOf(e))),i=this.containers[r];if(i.modals.splice(i.modals.indexOf(e),1),this.modals.splice(n,1),0===i.modals.length)i.restore&&i.restore(),e.modalRef&&RC(e.modalRef,t),LC(i.container,e.mount,e.modalRef,i.hiddenSiblings,!1),this.containers.splice(r,1);else{const e=i.modals[i.modals.length-1];e.modalRef&&RC(e.modalRef,!1)}return n}isTopModal(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}};const OC=function(e){const{container:n,disableEscapeKeyDown:r=!1,disableScrollLock:i=!1,manager:a=NC,closeAfterTransition:o=!1,onTransitionEnter:s,onTransitionExited:l,children:c,onClose:u,open:d,rootRef:h}=e,p=t.useRef({}),f=t.useRef(null),m=t.useRef(null),g=(0,WT.A)(m,h),[v,y]=t.useState(!d),b=function(e){return!!e&&e.props.hasOwnProperty("in")}(c);let w=!0;"false"!==e["aria-hidden"]&&!1!==e["aria-hidden"]||(w=!1);const E=()=>(p.current.modalRef=m.current,p.current.mount=f.current,p.current),x=()=>{a.mount(E(),{disableScrollLock:i}),m.current&&(m.current.scrollTop=0)},_=(0,kC.A)((()=>{const e=function(e){return"function"===typeof e?e():e}(n)||(0,uC.A)(f.current).body;a.add(E(),e),m.current&&x()})),A=t.useCallback((()=>a.isTopModal(E())),[a]),T=(0,kC.A)((e=>{f.current=e,e&&(d&&A()?x():m.current&&RC(m.current,w))})),S=t.useCallback((()=>{a.remove(E(),w)}),[w,a]);t.useEffect((()=>()=>{S()}),[S]),t.useEffect((()=>{d?_():b&&o||S()}),[d,S,b,o,_]);const k=e=>t=>{var n;null==(n=e.onKeyDown)||n.call(e,t),"Escape"===t.key&&229!==t.which&&A()&&(r||(t.stopPropagation(),u&&u(t,"escapeKeyDown")))},C=e=>t=>{var n;null==(n=e.onClick)||n.call(e,t),t.target===t.currentTarget&&u&&u(t,"backdropClick")};return{getRootProps:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=GT(e);delete n.onTransitionEnter,delete n.onTransitionExited;const r=(0,De.A)({},n,t);return(0,De.A)({role:"presentation"},r,{onKeyDown:k(r),ref:g})},getBackdropProps:function(){const e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,De.A)({"aria-hidden":!0},e,{onClick:C(e),open:d})},getTransitionProps:()=>({onEnter:(0,CC.A)((()=>{y(!1),s&&s()}),null==c?void 0:c.props.onEnter),onExited:(0,CC.A)((()=>{y(!0),l&&l(),o&&S()}),null==c?void 0:c.props.onExited)}),rootRef:g,portalRef:T,isTopModal:A,exited:v,hasTransition:b}};function jC(e){return(0,_T.Ay)("MuiModal",e)}(0,Ge.A)("MuiModal",["root","hidden","backdrop"]);const FC=["BackdropComponent","BackdropProps","classes","className","closeAfterTransition","children","container","component","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","onBackdropClick","onClose","onTransitionEnter","onTransitionExited","open","slotProps","slots","theme"],UC=(0,bT.Ay)("div",{name:"MuiModal",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.open&&n.exited&&t.hidden]}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({position:"fixed",zIndex:(t.vars||t).zIndex.modal,right:0,bottom:0,top:0,left:0},!n.open&&n.exited&&{visibility:"hidden"})})),BC=(0,bT.Ay)(SC,{name:"MuiModal",slot:"Backdrop",overridesResolver:(e,t)=>t.backdrop})({zIndex:-1}),$C=t.forwardRef((function(e,n){var r,i,a,o,s,l;const c=(0,Ze.b)({name:"MuiModal",props:e}),{BackdropComponent:u=BC,BackdropProps:d,className:h,closeAfterTransition:p=!1,children:f,container:m,component:g,components:v={},componentsProps:y={},disableAutoFocus:b=!1,disableEnforceFocus:w=!1,disableEscapeKeyDown:E=!1,disablePortal:x=!1,disableRestoreFocus:_=!1,disableScrollLock:A=!1,hideBackdrop:T=!1,keepMounted:S=!1,onBackdropClick:k,open:C,slotProps:I,slots:R}=c,D=(0,Le.A)(c,FC),L=(0,De.A)({},c,{closeAfterTransition:p,disableAutoFocus:b,disableEnforceFocus:w,disableEscapeKeyDown:E,disablePortal:x,disableRestoreFocus:_,disableScrollLock:A,hideBackdrop:T,keepMounted:S}),{getRootProps:P,getBackdropProps:M,getTransitionProps:N,portalRef:O,isTopModal:j,exited:F,hasTransition:U}=OC((0,De.A)({},L,{rootRef:n})),B=(0,De.A)({},L,{exited:F}),$=(e=>{const{open:t,exited:n,classes:r}=e,i={root:["root",!t&&n&&"hidden"],backdrop:["backdrop"]};return(0,yT.A)(i,jC,r)})(B),V={};if(void 0===f.props.tabIndex&&(V.tabIndex="-1"),U){const{onEnter:e,onExited:t}=N();V.onEnter=e,V.onExited=t}const W=null!=(r=null!=(i=null==R?void 0:R.root)?i:v.Root)?r:UC,z=null!=(a=null!=(o=null==R?void 0:R.backdrop)?o:v.Backdrop)?a:u,H=null!=(s=null==I?void 0:I.root)?s:y.root,q=null!=(l=null==I?void 0:I.backdrop)?l:y.backdrop,G=rk({elementType:W,externalSlotProps:H,externalForwardedProps:D,getSlotProps:P,additionalProps:{ref:n,as:g},ownerState:B,className:(0,Pe.A)(h,null==H?void 0:H.className,null==$?void 0:$.root,!B.open&&B.exited&&(null==$?void 0:$.hidden))}),K=rk({elementType:z,externalSlotProps:q,additionalProps:d,getSlotProps:e=>M((0,De.A)({},e,{onClick:t=>{k&&k(t),null!=e&&e.onClick&&e.onClick(t)}})),className:(0,Pe.A)(null==q?void 0:q.className,null==d?void 0:d.className,null==$?void 0:$.backdrop),ownerState:B});return S||C||U&&!F?(0,Ve.jsx)(vC,{ref:O,container:m,disablePortal:x,children:(0,Ve.jsxs)(W,(0,De.A)({},G,{children:[!T&&u?(0,Ve.jsx)(z,(0,De.A)({},K)):null,(0,Ve.jsx)(fC,{disableEnforceFocus:w,disableAutoFocus:b,disableRestoreFocus:_,isEnabled:j,open:C,children:t.cloneElement(f,V)})]}))}):null})),VC=$C;function WC(e){return(0,_T.Ay)("MuiPopover",e)}(0,Ge.A)("MuiPopover",["root","paper"]);const zC=["onEntering"],HC=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","slots","slotProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps","disableScrollLock"],qC=["slotProps"];function GC(e,t){let n=0;return"number"===typeof t?n=t:"center"===t?n=e.height/2:"bottom"===t&&(n=e.height),n}function KC(e,t){let n=0;return"number"===typeof t?n=t:"center"===t?n=e.width/2:"right"===t&&(n=e.width),n}function YC(e){return[e.horizontal,e.vertical].map((e=>"number"===typeof e?`${e}px`:e)).join(" ")}function QC(e){return"function"===typeof e?e():e}const XC=(0,bT.Ay)(VC,{name:"MuiPopover",slot:"Root",overridesResolver:(e,t)=>t.root})({}),ZC=(0,bT.Ay)(CT,{name:"MuiPopover",slot:"Paper",overridesResolver:(e,t)=>t.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),JC=t.forwardRef((function(e,n){var r,i,a;const o=(0,Ze.b)({props:e,name:"MuiPopover"}),{action:s,anchorEl:l,anchorOrigin:c={vertical:"top",horizontal:"left"},anchorPosition:u,anchorReference:d="anchorEl",children:h,className:p,container:f,elevation:m=8,marginThreshold:g=16,open:v,PaperProps:y={},slots:b,slotProps:w,transformOrigin:E={vertical:"top",horizontal:"left"},TransitionComponent:x=cC,transitionDuration:_="auto",TransitionProps:{onEntering:A}={},disableScrollLock:T=!1}=o,S=(0,Le.A)(o.TransitionProps,zC),k=(0,Le.A)(o,HC),C=null!=(r=null==w?void 0:w.paper)?r:y,I=t.useRef(),R=(0,pS.A)(I,C.ref),D=(0,De.A)({},o,{anchorOrigin:c,anchorReference:d,elevation:m,marginThreshold:g,externalPaperSlotProps:C,transformOrigin:E,TransitionComponent:x,transitionDuration:_,TransitionProps:S}),L=(e=>{const{classes:t}=e;return(0,yT.A)({root:["root"],paper:["paper"]},WC,t)})(D),P=t.useCallback((()=>{if("anchorPosition"===d)return u;const e=QC(l),t=(e&&1===e.nodeType?e:(0,Tk.A)(I.current).body).getBoundingClientRect();return{top:t.top+GC(t,c.vertical),left:t.left+KC(t,c.horizontal)}}),[l,c.horizontal,c.vertical,u,d]),M=t.useCallback((e=>({vertical:GC(e,E.vertical),horizontal:KC(e,E.horizontal)})),[E.horizontal,E.vertical]),N=t.useCallback((e=>{const t={width:e.offsetWidth,height:e.offsetHeight},n=M(t);if("none"===d)return{top:null,left:null,transformOrigin:YC(n)};const r=P();let i=r.top-n.vertical,a=r.left-n.horizontal;const o=i+t.height,s=a+t.width,c=(0,Wk.A)(QC(l)),u=c.innerHeight-g,h=c.innerWidth-g;if(null!==g&&i<g){const e=i-g;i-=e,n.vertical+=e}else if(null!==g&&o>u){const e=o-u;i-=e,n.vertical+=e}if(null!==g&&a<g){const e=a-g;a-=e,n.horizontal+=e}else if(s>h){const e=s-h;a-=e,n.horizontal+=e}return{top:`${Math.round(i)}px`,left:`${Math.round(a)}px`,transformOrigin:YC(n)}}),[l,d,P,M,g]),[O,j]=t.useState(v),F=t.useCallback((()=>{const e=I.current;if(!e)return;const t=N(e);null!==t.top&&(e.style.top=t.top),null!==t.left&&(e.style.left=t.left),e.style.transformOrigin=t.transformOrigin,j(!0)}),[N]);t.useEffect((()=>(T&&window.addEventListener("scroll",F),()=>window.removeEventListener("scroll",F))),[l,T,F]);t.useEffect((()=>{v&&F()})),t.useImperativeHandle(s,(()=>v?{updatePosition:()=>{F()}}:null),[v,F]),t.useEffect((()=>{if(!v)return;const e=(0,Vk.A)((()=>{F()})),t=(0,Wk.A)(l);return t.addEventListener("resize",e),()=>{e.clear(),t.removeEventListener("resize",e)}}),[l,v,F]);let U=_;"auto"!==_||x.muiSupportAuto||(U=void 0);const B=f||(l?(0,Tk.A)(QC(l)).body:void 0),$=null!=(i=null==b?void 0:b.root)?i:XC,V=null!=(a=null==b?void 0:b.paper)?a:ZC,W=rk({elementType:V,externalSlotProps:(0,De.A)({},C,{style:O?C.style:(0,De.A)({},C.style,{opacity:0})}),additionalProps:{elevation:m,ref:R},ownerState:D,className:(0,Pe.A)(L.paper,null==C?void 0:C.className)}),z=rk({elementType:$,externalSlotProps:(null==w?void 0:w.root)||{},externalForwardedProps:k,additionalProps:{ref:n,slotProps:{backdrop:{invisible:!0}},container:B,open:v},ownerState:D,className:(0,Pe.A)(L.root,p)}),{slotProps:H}=z,q=(0,Le.A)(z,qC);return(0,Ve.jsx)($,(0,De.A)({},q,!zT($)&&{slotProps:H,disableScrollLock:T},{children:(0,Ve.jsx)(x,(0,De.A)({appear:!0,in:v,onEntering:(e,t)=>{A&&A(e,t),F()},onExited:()=>{j(!1)},timeout:U},S,{children:(0,Ve.jsx)(V,(0,De.A)({},W,{children:h}))}))}))})),eI=JC;function tI(e){return(0,_T.Ay)("MuiMenu",e)}(0,Ge.A)("MuiMenu",["root","paper","list"]);const nI=["onEntering"],rI=["autoFocus","children","className","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant","slots","slotProps"],iI={vertical:"top",horizontal:"right"},aI={vertical:"top",horizontal:"left"},oI=(0,bT.Ay)(eI,{shouldForwardProp:e=>(0,pk.A)(e)||"classes"===e,name:"MuiMenu",slot:"Root",overridesResolver:(e,t)=>t.root})({}),sI=(0,bT.Ay)(ZC,{name:"MuiMenu",slot:"Paper",overridesResolver:(e,t)=>t.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),lI=(0,bT.Ay)($k,{name:"MuiMenu",slot:"List",overridesResolver:(e,t)=>t.list})({outline:0}),cI=t.forwardRef((function(e,n){var r,i;const a=(0,Ze.b)({props:e,name:"MuiMenu"}),{autoFocus:o=!0,children:s,className:l,disableAutoFocusItem:c=!1,MenuListProps:u={},onClose:d,open:h,PaperProps:p={},PopoverClasses:f,transitionDuration:m="auto",TransitionProps:{onEntering:g}={},variant:v="selectedMenu",slots:y={},slotProps:b={}}=a,w=(0,Le.A)(a.TransitionProps,nI),E=(0,Le.A)(a,rI),x=lT(),_=(0,De.A)({},a,{autoFocus:o,disableAutoFocusItem:c,MenuListProps:u,onEntering:g,PaperProps:p,transitionDuration:m,TransitionProps:w,variant:v}),A=(e=>{const{classes:t}=e;return(0,yT.A)({root:["root"],paper:["paper"],list:["list"]},tI,t)})(_),T=o&&!c&&h,S=t.useRef(null);let k=-1;t.Children.map(s,((e,n)=>{t.isValidElement(e)&&(e.props.disabled||("selectedMenu"===v&&e.props.selected||-1===k)&&(k=n))}));const C=null!=(r=y.paper)?r:sI,I=null!=(i=b.paper)?i:p,R=rk({elementType:y.root,externalSlotProps:b.root,ownerState:_,className:[A.root,l]}),D=rk({elementType:C,externalSlotProps:I,ownerState:_,className:A.paper});return(0,Ve.jsx)(oI,(0,De.A)({onClose:d,anchorOrigin:{vertical:"bottom",horizontal:x?"right":"left"},transformOrigin:x?iI:aI,slots:{paper:C,root:y.root},slotProps:{root:R,paper:D},open:h,ref:n,transitionDuration:m,TransitionProps:(0,De.A)({onEntering:(e,t)=>{S.current&&S.current.adjustStyleForScrollbar(e,{direction:x?"rtl":"ltr"}),g&&g(e,t)}},w),ownerState:_},E,{classes:f,children:(0,Ve.jsx)(lI,(0,De.A)({onKeyDown:e=>{"Tab"===e.key&&(e.preventDefault(),d&&d(e,"tabKeyDown"))},actions:S,autoFocus:o&&(-1===k||c),autoFocusItem:T,variant:v},u,{className:(0,Pe.A)(A.list,u.className),children:s}))}))})),uI=cI;function dI(e){return(0,_T.Ay)("MuiDivider",e)}const hI=(0,Ge.A)("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]);function pI(e){return(0,_T.Ay)("MuiListItemIcon",e)}const fI=(0,Ge.A)("MuiListItemIcon",["root","alignItemsFlexStart"]);function mI(e){return(0,_T.Ay)("MuiListItemText",e)}const gI=(0,Ge.A)("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]);function vI(e){return(0,_T.Ay)("MuiMenuItem",e)}const yI=(0,Ge.A)("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),bI=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],wI=(0,bT.Ay)(KS,{shouldForwardProp:e=>(0,pk.A)(e)||"classes"===e,name:"MuiMenuItem",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,n.divider&&t.divider,!n.disableGutters&&t.gutters]}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({},t.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!n.disableGutters&&{paddingLeft:16,paddingRight:16},n.divider&&{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,backgroundClip:"padding-box"},{"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${yI.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:(0,ET.X4)(t.palette.primary.main,t.palette.action.selectedOpacity),[`&.${yI.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:(0,ET.X4)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},[`&.${yI.selected}:hover`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:(0,ET.X4)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:(0,ET.X4)(t.palette.primary.main,t.palette.action.selectedOpacity)}},[`&.${yI.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${yI.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity},[`& + .${hI.root}`]:{marginTop:t.spacing(1),marginBottom:t.spacing(1)},[`& + .${hI.inset}`]:{marginLeft:52},[`& .${gI.root}`]:{marginTop:0,marginBottom:0},[`& .${gI.inset}`]:{paddingLeft:36},[`& .${fI.root}`]:{minWidth:36}},!n.dense&&{[t.breakpoints.up("sm")]:{minHeight:"auto"}},n.dense&&(0,De.A)({minHeight:32,paddingTop:4,paddingBottom:4},t.typography.body2,{[`& .${fI.root} svg`]:{fontSize:"1.25rem"}}))})),EI=t.forwardRef((function(e,n){const r=(0,Ze.b)({props:e,name:"MuiMenuItem"}),{autoFocus:i=!1,component:a="li",dense:o=!1,divider:s=!1,disableGutters:l=!1,focusVisibleClassName:c,role:u="menuitem",tabIndex:d,className:h}=r,p=(0,Le.A)(r,bI),f=t.useContext(Sk),m=t.useMemo((()=>({dense:o||f.dense||!1,disableGutters:l})),[f.dense,o,l]),g=t.useRef(null);(0,Mk.A)((()=>{i&&g.current&&g.current.focus()}),[i]);const v=(0,De.A)({},r,{dense:m.dense,divider:s,disableGutters:l}),y=(e=>{const{disabled:t,dense:n,divider:r,disableGutters:i,selected:a,classes:o}=e,s={root:["root",n&&"dense",t&&"disabled",!i&&"gutters",r&&"divider",a&&"selected"]},l=(0,yT.A)(s,vI,o);return(0,De.A)({},o,l)})(r),b=(0,pS.A)(g,n);let w;return r.disabled||(w=void 0!==d?d:-1),(0,Ve.jsx)(Sk.Provider,{value:m,children:(0,Ve.jsx)(wI,(0,De.A)({ref:b,role:u,tabIndex:w,component:a,focusVisibleClassName:(0,Pe.A)(y.focusVisible,c),className:(0,Pe.A)(y.root,h)},p,{ownerState:v,classes:y}))})})),xI=EI,_I=["className"],AI=(0,bT.Ay)("div",{name:"MuiListItemIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"flex-start"===n.alignItems&&t.alignItemsFlexStart]}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({minWidth:56,color:(t.vars||t).palette.action.active,flexShrink:0,display:"inline-flex"},"flex-start"===n.alignItems&&{marginTop:8})})),TI=t.forwardRef((function(e,n){const r=(0,Ze.b)({props:e,name:"MuiListItemIcon"}),{className:i}=r,a=(0,Le.A)(r,_I),o=t.useContext(Sk),s=(0,De.A)({},r,{alignItems:o.alignItems}),l=(e=>{const{alignItems:t,classes:n}=e,r={root:["root","flex-start"===t&&"alignItemsFlexStart"]};return(0,yT.A)(r,pI,n)})(s);return(0,Ve.jsx)(AI,(0,De.A)({className:(0,Pe.A)(l.root,i),ownerState:s,ref:n},a))})),SI=TI,kI=["children","className","disableTypography","inset","primary","primaryTypographyProps","secondary","secondaryTypographyProps"],CI=(0,bT.Ay)("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${gI.primary}`]:t.primary},{[`& .${gI.secondary}`]:t.secondary},t.root,n.inset&&t.inset,n.primary&&n.secondary&&t.multiline,n.dense&&t.dense]}})((e=>{let{ownerState:t}=e;return(0,De.A)({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4},t.primary&&t.secondary&&{marginTop:6,marginBottom:6},t.inset&&{paddingLeft:56})})),II=t.forwardRef((function(e,n){const r=(0,Ze.b)({props:e,name:"MuiListItemText"}),{children:i,className:a,disableTypography:o=!1,inset:s=!1,primary:l,primaryTypographyProps:c,secondary:u,secondaryTypographyProps:d}=r,h=(0,Le.A)(r,kI),{dense:p}=t.useContext(Sk);let f=null!=l?l:i,m=u;const g=(0,De.A)({},r,{disableTypography:o,inset:s,primary:!!f,secondary:!!m,dense:p}),v=(e=>{const{classes:t,inset:n,primary:r,secondary:i,dense:a}=e,o={root:["root",n&&"inset",a&&"dense",r&&i&&"multiline"],primary:["primary"],secondary:["secondary"]};return(0,yT.A)(o,mI,t)})(g);return null==f||f.type===hS||o||(f=(0,Ve.jsx)(hS,(0,De.A)({variant:p?"body2":"body1",className:v.primary,component:null!=c&&c.variant?void 0:"span",display:"block"},c,{children:f}))),null==m||m.type===hS||o||(m=(0,Ve.jsx)(hS,(0,De.A)({variant:"body2",className:v.secondary,color:"text.secondary",display:"block"},d,{children:m}))),(0,Ve.jsxs)(CI,(0,De.A)({className:(0,Pe.A)(v.root,a),ownerState:g,ref:n},h,{children:[f,m]}))})),RI=II,DI=["absolute","children","className","component","flexItem","light","orientation","role","textAlign","variant"],LI=(0,bT.Ay)("div",{name:"MuiDivider",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.absolute&&t.absolute,t[n.variant],n.light&&t.light,"vertical"===n.orientation&&t.vertical,n.flexItem&&t.flexItem,n.children&&t.withChildren,n.children&&"vertical"===n.orientation&&t.withChildrenVertical,"right"===n.textAlign&&"vertical"!==n.orientation&&t.textAlignRight,"left"===n.textAlign&&"vertical"!==n.orientation&&t.textAlignLeft]}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(t.vars||t).palette.divider,borderBottomWidth:"thin"},n.absolute&&{position:"absolute",bottom:0,left:0,width:"100%"},n.light&&{borderColor:t.vars?`rgba(${t.vars.palette.dividerChannel} / 0.08)`:(0,ET.X4)(t.palette.divider,.08)},"inset"===n.variant&&{marginLeft:72},"middle"===n.variant&&"horizontal"===n.orientation&&{marginLeft:t.spacing(2),marginRight:t.spacing(2)},"middle"===n.variant&&"vertical"===n.orientation&&{marginTop:t.spacing(1),marginBottom:t.spacing(1)},"vertical"===n.orientation&&{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"},n.flexItem&&{alignSelf:"stretch",height:"auto"})}),(e=>{let{ownerState:t}=e;return(0,De.A)({},t.children&&{display:"flex",whiteSpace:"nowrap",textAlign:"center",border:0,borderTopStyle:"solid",borderLeftStyle:"solid","&::before, &::after":{content:'""',alignSelf:"center"}})}),(e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({},n.children&&"vertical"!==n.orientation&&{"&::before, &::after":{width:"100%",borderTop:`thin solid ${(t.vars||t).palette.divider}`,borderTopStyle:"inherit"}})}),(e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({},n.children&&"vertical"===n.orientation&&{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:`thin solid ${(t.vars||t).palette.divider}`,borderLeftStyle:"inherit"}})}),(e=>{let{ownerState:t}=e;return(0,De.A)({},"right"===t.textAlign&&"vertical"!==t.orientation&&{"&::before":{width:"90%"},"&::after":{width:"10%"}},"left"===t.textAlign&&"vertical"!==t.orientation&&{"&::before":{width:"10%"},"&::after":{width:"90%"}})})),PI=(0,bT.Ay)("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.wrapper,"vertical"===n.orientation&&t.wrapperVertical]}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({display:"inline-block",paddingLeft:`calc(${t.spacing(1)} * 1.2)`,paddingRight:`calc(${t.spacing(1)} * 1.2)`},"vertical"===n.orientation&&{paddingTop:`calc(${t.spacing(1)} * 1.2)`,paddingBottom:`calc(${t.spacing(1)} * 1.2)`})})),MI=t.forwardRef((function(e,t){const n=(0,Ze.b)({props:e,name:"MuiDivider"}),{absolute:r=!1,children:i,className:a,component:o=(i?"div":"hr"),flexItem:s=!1,light:l=!1,orientation:c="horizontal",role:u=("hr"!==o?"separator":void 0),textAlign:d="center",variant:h="fullWidth"}=n,p=(0,Le.A)(n,DI),f=(0,De.A)({},n,{absolute:r,component:o,flexItem:s,light:l,orientation:c,role:u,textAlign:d,variant:h}),m=(e=>{const{absolute:t,children:n,classes:r,flexItem:i,light:a,orientation:o,textAlign:s,variant:l}=e,c={root:["root",t&&"absolute",l,a&&"light","vertical"===o&&"vertical",i&&"flexItem",n&&"withChildren",n&&"vertical"===o&&"withChildrenVertical","right"===s&&"vertical"!==o&&"textAlignRight","left"===s&&"vertical"!==o&&"textAlignLeft"],wrapper:["wrapper","vertical"===o&&"wrapperVertical"]};return(0,yT.A)(c,dI,r)})(f);return(0,Ve.jsx)(LI,(0,De.A)({as:o,className:(0,Pe.A)(m.root,a),role:u,ref:t,ownerState:f},p,{children:i?(0,Ve.jsx)(PI,{className:m.wrapper,ownerState:f,children:i}):null}))}));MI.muiSkipListHighlight=!0;const NI=MI,OI=(0,BT.A)((0,Ve.jsx)("path",{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2m6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1z"}),"Notifications"),jI=(0,BT.A)((0,Ve.jsx)("path",{d:"M3 18h18v-2H3zm0-5h18v-2H3zm0-7v2h18V6z"}),"Menu"),FI=(0,BT.A)((0,Ve.jsx)("path",{d:"M12 2C6.49 2 2 6.49 2 12s4.49 10 10 10c1.38 0 2.5-1.12 2.5-2.5 0-.61-.23-1.2-.64-1.67-.08-.1-.13-.21-.13-.33 0-.28.22-.5.5-.5H16c3.31 0 6-2.69 6-6 0-4.96-4.49-9-10-9m5.5 11c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5m-3-4c-.83 0-1.5-.67-1.5-1.5S13.67 6 14.5 6s1.5.67 1.5 1.5S15.33 9 14.5 9M5 11.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5S7.33 13 6.5 13 5 12.33 5 11.5m6-4c0 .83-.67 1.5-1.5 1.5S8 8.33 8 7.5 8.67 6 9.5 6s1.5.67 1.5 1.5"}),"Palette"),UI=(0,BT.A)((0,Ve.jsx)("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6"}),"Settings"),BI=(0,BT.A)((0,Ve.jsx)("path",{d:"m17 7-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4z"}),"Logout"),$I=()=>{const e=Z(),[n,r]=(0,t.useState)(null),{currentUser:i,logout:a}=XA(),o=()=>{r(null)},s=t=>{o(),setTimeout((()=>{e(t,{replace:!0})}),50)};return(0,Ve.jsx)(Ve.Fragment,{children:(0,Ve.jsx)(MT,{position:"static",elevation:0,sx:{backgroundColor:"transparent",backgroundImage:"none",boxShadow:"none",borderBottom:"none",padding:"0 24px"},children:(0,Ve.jsxs)(UT,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px 0",minHeight:"auto"},disableGutters:!0,children:[(0,Ve.jsxs)(Xe,{sx:{display:"flex",alignItems:"center",gap:3},children:[(0,Ve.jsx)(aS,{src:"/logo.png",alt:"Side Eye",sx:{width:40,height:40,cursor:"pointer","&:hover":{opacity:.8}},onClick:()=>e("/")}),(0,Ve.jsx)(hS,{variant:"h5",component:"div",sx:{fontWeight:"bold",cursor:"pointer",color:"primary.main","&:hover":{opacity:.8}},onClick:()=>e("/"),children:"SideEye"})]}),(0,Ve.jsx)(Xe,{sx:{display:"flex",alignItems:"center",gap:2},children:i?(0,Ve.jsxs)(Ve.Fragment,{children:[(0,Ve.jsx)(ek,{color:"inherit",onClick:()=>e("/notifications"),sx:{color:"text.primary","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.04)"}},children:(0,Ve.jsx)(dk,{badgeContent:0,color:"error",children:(0,Ve.jsx)(OI,{})})}),(0,Ve.jsx)(ek,{color:"inherit",onClick:e=>{r(e.currentTarget)},sx:{color:"text.primary","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.04)"}},children:(0,Ve.jsx)(jI,{})})]}):(0,Ve.jsxs)(Ve.Fragment,{children:[(0,Ve.jsx)(Ak,{color:"inherit",onClick:()=>e("/login"),sx:{color:"text.primary","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.04)"}},children:"Login"}),(0,Ve.jsx)(Ak,{color:"inherit",onClick:()=>e("/register"),sx:{color:"text.primary","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.04)"}},children:"Register"})]})}),(0,Ve.jsxs)(uI,{anchorEl:n,open:Boolean(n),onClose:o,sx:{"& .MuiPaper-root":{borderRadius:2,boxShadow:"0 4px 20px rgba(0,0,0,0.1)",minWidth:200,border:"none"}},children:[(0,Ve.jsxs)(xI,{onClick:()=>s("/creators-hub"),children:[(0,Ve.jsx)(SI,{children:(0,Ve.jsx)(FI,{})}),(0,Ve.jsx)(RI,{primary:"Creators Hub"})]}),(0,Ve.jsx)(NI,{}),(0,Ve.jsxs)(xI,{onClick:()=>s("/settings"),children:[(0,Ve.jsx)(SI,{children:(0,Ve.jsx)(UI,{})}),(0,Ve.jsx)(RI,{primary:"Settings"})]}),(0,Ve.jsx)(NI,{}),(0,Ve.jsxs)(xI,{onClick:async()=>{await a(),o()},children:[(0,Ve.jsx)(SI,{children:(0,Ve.jsx)(BI,{})}),(0,Ve.jsx)(RI,{children:"Logout"})]})]})]})})})};var VI=n(3828);function WI(e){return(0,_T.Ay)("MuiListItem",e)}const zI=(0,Ge.A)("MuiListItem",["root","container","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","padding","button","secondaryAction","selected"]);function HI(e){return(0,_T.Ay)("MuiListItemButton",e)}const qI=(0,Ge.A)("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]);function GI(e){return(0,_T.Ay)("MuiListItemSecondaryAction",e)}(0,Ge.A)("MuiListItemSecondaryAction",["root","disableGutters"]);const KI=["className"],YI=(0,bT.Ay)("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.disableGutters&&t.disableGutters]}})((e=>{let{ownerState:t}=e;return(0,De.A)({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)"},t.disableGutters&&{right:0})})),QI=t.forwardRef((function(e,n){const r=(0,Ze.b)({props:e,name:"MuiListItemSecondaryAction"}),{className:i}=r,a=(0,Le.A)(r,KI),o=t.useContext(Sk),s=(0,De.A)({},r,{disableGutters:o.disableGutters}),l=(e=>{const{disableGutters:t,classes:n}=e,r={root:["root",t&&"disableGutters"]};return(0,yT.A)(r,GI,n)})(s);return(0,Ve.jsx)(YI,(0,De.A)({className:(0,Pe.A)(l.root,i),ownerState:s,ref:n},a))}));QI.muiName="ListItemSecondaryAction";const XI=QI,ZI=["className"],JI=["alignItems","autoFocus","button","children","className","component","components","componentsProps","ContainerComponent","ContainerProps","dense","disabled","disableGutters","disablePadding","divider","focusVisibleClassName","secondaryAction","selected","slotProps","slots"],eR=(0,bT.Ay)("div",{name:"MuiListItem",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,"flex-start"===n.alignItems&&t.alignItemsFlexStart,n.divider&&t.divider,!n.disableGutters&&t.gutters,!n.disablePadding&&t.padding,n.button&&t.button,n.hasSecondaryAction&&t.secondaryAction]}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left"},!n.disablePadding&&(0,De.A)({paddingTop:8,paddingBottom:8},n.dense&&{paddingTop:4,paddingBottom:4},!n.disableGutters&&{paddingLeft:16,paddingRight:16},!!n.secondaryAction&&{paddingRight:48}),!!n.secondaryAction&&{[`& > .${qI.root}`]:{paddingRight:48}},{[`&.${zI.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${zI.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:(0,ET.X4)(t.palette.primary.main,t.palette.action.selectedOpacity),[`&.${zI.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:(0,ET.X4)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},[`&.${zI.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity}},"flex-start"===n.alignItems&&{alignItems:"flex-start"},n.divider&&{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,backgroundClip:"padding-box"},n.button&&{transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${zI.selected}:hover`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:(0,ET.X4)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:(0,ET.X4)(t.palette.primary.main,t.palette.action.selectedOpacity)}}},n.hasSecondaryAction&&{paddingRight:48})})),tR=(0,bT.Ay)("li",{name:"MuiListItem",slot:"Container",overridesResolver:(e,t)=>t.container})({position:"relative"}),nR=t.forwardRef((function(e,n){const r=(0,Ze.b)({props:e,name:"MuiListItem"}),{alignItems:i="center",autoFocus:a=!1,button:o=!1,children:s,className:l,component:c,components:u={},componentsProps:d={},ContainerComponent:h="li",ContainerProps:{className:p}={},dense:f=!1,disabled:m=!1,disableGutters:g=!1,disablePadding:v=!1,divider:y=!1,focusVisibleClassName:b,secondaryAction:w,selected:E=!1,slotProps:x={},slots:_={}}=r,A=(0,Le.A)(r.ContainerProps,ZI),T=(0,Le.A)(r,JI),S=t.useContext(Sk),k=t.useMemo((()=>({dense:f||S.dense||!1,alignItems:i,disableGutters:g})),[i,S.dense,f,g]),C=t.useRef(null);(0,Mk.A)((()=>{a&&C.current&&C.current.focus()}),[a]);const I=t.Children.toArray(s),R=I.length&&(0,VI.A)(I[I.length-1],["ListItemSecondaryAction"]),D=(0,De.A)({},r,{alignItems:i,autoFocus:a,button:o,dense:k.dense,disabled:m,disableGutters:g,disablePadding:v,divider:y,hasSecondaryAction:R,selected:E}),L=(e=>{const{alignItems:t,button:n,classes:r,dense:i,disabled:a,disableGutters:o,disablePadding:s,divider:l,hasSecondaryAction:c,selected:u}=e,d={root:["root",i&&"dense",!o&&"gutters",!s&&"padding",l&&"divider",a&&"disabled",n&&"button","flex-start"===t&&"alignItemsFlexStart",c&&"secondaryAction",u&&"selected"],container:["container"]};return(0,yT.A)(d,WI,r)})(D),P=(0,pS.A)(C,n),M=_.root||u.Root||eR,N=x.root||d.root||{},O=(0,De.A)({className:(0,Pe.A)(L.root,N.className,l),disabled:m},T);let j=c||"li";return o&&(O.component=c||"div",O.focusVisibleClassName=(0,Pe.A)(zI.focusVisible,b),j=KS),R?(j=O.component||c?j:"div","li"===h&&("li"===j?j="div":"li"===O.component&&(O.component="div")),(0,Ve.jsx)(Sk.Provider,{value:k,children:(0,Ve.jsxs)(tR,(0,De.A)({as:h,className:(0,Pe.A)(L.container,p),ref:P,ownerState:D},A,{children:[(0,Ve.jsx)(M,(0,De.A)({},N,!zT(M)&&{as:j,ownerState:(0,De.A)({},D,N.ownerState)},O,{children:I})),I.pop()]}))})):(0,Ve.jsx)(Sk.Provider,{value:k,children:(0,Ve.jsxs)(M,(0,De.A)({},N,{as:j,ref:P},!zT(M)&&{ownerState:(0,De.A)({},D,N.ownerState)},O,{children:[I,w&&(0,Ve.jsx)(XI,{children:w})]}))})})),rR=nR;function iR(e){return(0,_T.Ay)("MuiListItemAvatar",e)}(0,Ge.A)("MuiListItemAvatar",["root","alignItemsFlexStart"]);const aR=["className"],oR=(0,bT.Ay)("div",{name:"MuiListItemAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"flex-start"===n.alignItems&&t.alignItemsFlexStart]}})((e=>{let{ownerState:t}=e;return(0,De.A)({minWidth:56,flexShrink:0},"flex-start"===t.alignItems&&{marginTop:8})})),sR=t.forwardRef((function(e,n){const r=(0,Ze.b)({props:e,name:"MuiListItemAvatar"}),{className:i}=r,a=(0,Le.A)(r,aR),o=t.useContext(Sk),s=(0,De.A)({},r,{alignItems:o.alignItems}),l=(e=>{const{alignItems:t,classes:n}=e,r={root:["root","flex-start"===t&&"alignItemsFlexStart"]};return(0,yT.A)(r,iR,n)})(s);return(0,Ve.jsx)(oR,(0,De.A)({className:(0,Pe.A)(l.root,i),ownerState:s,ref:n},a))})),lR=sR;var cR=n(3539);function uR(e){return(0,_T.Ay)("MuiDialog",e)}const dR=(0,Ge.A)("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]);const hR=t.createContext({}),pR=["aria-describedby","aria-labelledby","BackdropComponent","BackdropProps","children","className","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onBackdropClick","onClick","onClose","open","PaperComponent","PaperProps","scroll","TransitionComponent","transitionDuration","TransitionProps"],fR=(0,bT.Ay)(SC,{name:"MuiDialog",slot:"Backdrop",overrides:(e,t)=>t.backdrop})({zIndex:-1}),mR=(0,bT.Ay)(VC,{name:"MuiDialog",slot:"Root",overridesResolver:(e,t)=>t.root})({"@media print":{position:"absolute !important"}}),gR=(0,bT.Ay)("div",{name:"MuiDialog",slot:"Container",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.container,t[`scroll${(0,wT.A)(n.scroll)}`]]}})((e=>{let{ownerState:t}=e;return(0,De.A)({height:"100%","@media print":{height:"auto"},outline:0},"paper"===t.scroll&&{display:"flex",justifyContent:"center",alignItems:"center"},"body"===t.scroll&&{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}})})),vR=(0,bT.Ay)(CT,{name:"MuiDialog",slot:"Paper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.paper,t[`scrollPaper${(0,wT.A)(n.scroll)}`],t[`paperWidth${(0,wT.A)(String(n.maxWidth))}`],n.fullWidth&&t.paperFullWidth,n.fullScreen&&t.paperFullScreen]}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"}},"paper"===n.scroll&&{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"},"body"===n.scroll&&{display:"inline-block",verticalAlign:"middle",textAlign:"left"},!n.maxWidth&&{maxWidth:"calc(100% - 64px)"},"xs"===n.maxWidth&&{maxWidth:"px"===t.breakpoints.unit?Math.max(t.breakpoints.values.xs,444):`max(${t.breakpoints.values.xs}${t.breakpoints.unit}, 444px)`,[`&.${dR.paperScrollBody}`]:{[t.breakpoints.down(Math.max(t.breakpoints.values.xs,444)+64)]:{maxWidth:"calc(100% - 64px)"}}},n.maxWidth&&"xs"!==n.maxWidth&&{maxWidth:`${t.breakpoints.values[n.maxWidth]}${t.breakpoints.unit}`,[`&.${dR.paperScrollBody}`]:{[t.breakpoints.down(t.breakpoints.values[n.maxWidth]+64)]:{maxWidth:"calc(100% - 64px)"}}},n.fullWidth&&{width:"calc(100% - 64px)"},n.fullScreen&&{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${dR.paperScrollBody}`]:{margin:0,maxWidth:"100%"}})})),yR=t.forwardRef((function(e,n){const r=(0,Ze.b)({props:e,name:"MuiDialog"}),i=tC(),a={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{"aria-describedby":o,"aria-labelledby":s,BackdropComponent:l,BackdropProps:c,children:u,className:d,disableEscapeKeyDown:h=!1,fullScreen:p=!1,fullWidth:f=!1,maxWidth:m="sm",onBackdropClick:g,onClick:v,onClose:y,open:b,PaperComponent:w=CT,PaperProps:E={},scroll:x="paper",TransitionComponent:_=EC,transitionDuration:A=a,TransitionProps:T}=r,S=(0,Le.A)(r,pR),k=(0,De.A)({},r,{disableEscapeKeyDown:h,fullScreen:p,fullWidth:f,maxWidth:m,scroll:x}),C=(e=>{const{classes:t,scroll:n,maxWidth:r,fullWidth:i,fullScreen:a}=e,o={root:["root"],container:["container",`scroll${(0,wT.A)(n)}`],paper:["paper",`paperScroll${(0,wT.A)(n)}`,`paperWidth${(0,wT.A)(String(r))}`,i&&"paperFullWidth",a&&"paperFullScreen"]};return(0,yT.A)(o,uR,t)})(k),I=t.useRef(),R=(0,cR.A)(s),D=t.useMemo((()=>({titleId:R})),[R]);return(0,Ve.jsx)(mR,(0,De.A)({className:(0,Pe.A)(C.root,d),closeAfterTransition:!0,components:{Backdrop:fR},componentsProps:{backdrop:(0,De.A)({transitionDuration:A,as:l},c)},disableEscapeKeyDown:h,onClose:y,open:b,ref:n,onClick:e=>{v&&v(e),I.current&&(I.current=null,g&&g(e),y&&y(e,"backdropClick"))},ownerState:k},S,{children:(0,Ve.jsx)(_,(0,De.A)({appear:!0,in:b,timeout:A,role:"presentation"},T,{children:(0,Ve.jsx)(gR,{className:(0,Pe.A)(C.container),onMouseDown:e=>{I.current=e.target===e.currentTarget},ownerState:k,children:(0,Ve.jsx)(vR,(0,De.A)({as:w,elevation:24,role:"dialog","aria-describedby":o,"aria-labelledby":R},E,{className:(0,Pe.A)(C.paper,E.className),ownerState:k,children:(0,Ve.jsx)(hR.Provider,{value:D,children:u})}))})}))}))})),bR=yR;var wR=n(7483),ER=n(8099),xR=n(1927);const _R=["onChange","maxRows","minRows","style","value"];function AR(e){return parseInt(e,10)||0}const TR={visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"};function SR(e){return function(e){for(const t in e)return!1;return!0}(e)||0===e.outerHeightStyle&&!e.overflowing}const kR=t.forwardRef((function(e,n){const{onChange:r,maxRows:i,minRows:a=1,style:o,value:s}=e,l=(0,Le.A)(e,_R),{current:c}=t.useRef(null!=s),u=t.useRef(null),d=(0,WT.A)(n,u),h=t.useRef(null),p=t.useRef(null),f=t.useCallback((()=>{const t=u.current,n=p.current;if(!t||!n)return;const r=(0,IC.A)(t).getComputedStyle(t);if("0px"===r.width)return{outerHeightStyle:0,overflowing:!1};n.style.width=r.width,n.value=t.value||e.placeholder||"x","\n"===n.value.slice(-1)&&(n.value+=" ");const o=r.boxSizing,s=AR(r.paddingBottom)+AR(r.paddingTop),l=AR(r.borderBottomWidth)+AR(r.borderTopWidth),c=n.scrollHeight;n.value="x";const d=n.scrollHeight;let h=c;a&&(h=Math.max(Number(a)*d,h)),i&&(h=Math.min(Number(i)*d,h)),h=Math.max(h,d);return{outerHeightStyle:h+("border-box"===o?s+l:0),overflowing:Math.abs(h-c)<=1}}),[i,a,e.placeholder]),m=(0,kC.A)((()=>{const e=u.current,t=f();if(!e||!t||SR(t))return!1;const n=t.outerHeightStyle;return null!=h.current&&h.current!==n})),g=t.useCallback((()=>{const e=u.current,t=f();if(!e||!t||SR(t))return;const n=t.outerHeightStyle;h.current!==n&&(h.current=n,e.style.height=`${n}px`),e.style.overflow=t.overflowing?"hidden":""}),[f]),v=t.useRef(-1);(0,mC.A)((()=>{const e=(0,xR.A)(g),t=null==u?void 0:u.current;if(!t)return;const n=(0,IC.A)(t);let r;return n.addEventListener("resize",e),"undefined"!==typeof ResizeObserver&&(r=new ResizeObserver((()=>{m()&&(r.unobserve(t),cancelAnimationFrame(v.current),g(),v.current=requestAnimationFrame((()=>{r.observe(t)})))})),r.observe(t)),()=>{e.clear(),cancelAnimationFrame(v.current),n.removeEventListener("resize",e),r&&r.disconnect()}}),[f,g,m]),(0,mC.A)((()=>{g()}));return(0,Ve.jsxs)(t.Fragment,{children:[(0,Ve.jsx)("textarea",(0,De.A)({value:s,onChange:e=>{c||g(),r&&r(e)},ref:d,rows:a,style:o},l)),(0,Ve.jsx)("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:p,tabIndex:-1,style:(0,De.A)({},TR,o,{paddingTop:0,paddingBottom:0})})]})})),CR=kR;function IR(e){let{props:t,states:n,muiFormControl:r}=e;return n.reduce(((e,n)=>(e[n]=t[n],r&&"undefined"===typeof t[n]&&(e[n]=r[n]),e)),{})}const RR=t.createContext(void 0);function DR(){return t.useContext(RR)}function LR(e){return null!=e&&!(Array.isArray(e)&&0===e.length)}function PR(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e&&(LR(e.value)&&""!==e.value||t&&LR(e.defaultValue)&&""!==e.defaultValue)}function MR(e){return(0,_T.Ay)("MuiInputBase",e)}const NR=(0,Ge.A)("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]),OR=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","slotProps","slots","startAdornment","type","value"],jR=(e,t)=>{const{ownerState:n}=e;return[t.root,n.formControl&&t.formControl,n.startAdornment&&t.adornedStart,n.endAdornment&&t.adornedEnd,n.error&&t.error,"small"===n.size&&t.sizeSmall,n.multiline&&t.multiline,n.color&&t[`color${(0,wT.A)(n.color)}`],n.fullWidth&&t.fullWidth,n.hiddenLabel&&t.hiddenLabel]},FR=(e,t)=>{const{ownerState:n}=e;return[t.input,"small"===n.size&&t.inputSizeSmall,n.multiline&&t.inputMultiline,"search"===n.type&&t.inputTypeSearch,n.startAdornment&&t.inputAdornedStart,n.endAdornment&&t.inputAdornedEnd,n.hiddenLabel&&t.inputHiddenLabel]},UR=(0,bT.Ay)("div",{name:"MuiInputBase",slot:"Root",overridesResolver:jR})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({},t.typography.body1,{color:(t.vars||t).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${NR.disabled}`]:{color:(t.vars||t).palette.text.disabled,cursor:"default"}},n.multiline&&(0,De.A)({padding:"4px 0 5px"},"small"===n.size&&{paddingTop:1}),n.fullWidth&&{width:"100%"})})),BR=(0,bT.Ay)("input",{name:"MuiInputBase",slot:"Input",overridesResolver:FR})((e=>{let{theme:t,ownerState:n}=e;const r="light"===t.palette.mode,i=(0,De.A)({color:"currentColor"},t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:r?.42:.5},{transition:t.transitions.create("opacity",{duration:t.transitions.duration.shorter})}),a={opacity:"0 !important"},o=t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:r?.42:.5};return(0,De.A)({font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":i,"&::-moz-placeholder":i,"&:-ms-input-placeholder":i,"&::-ms-input-placeholder":i,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${NR.formControl} &`]:{"&::-webkit-input-placeholder":a,"&::-moz-placeholder":a,"&:-ms-input-placeholder":a,"&::-ms-input-placeholder":a,"&:focus::-webkit-input-placeholder":o,"&:focus::-moz-placeholder":o,"&:focus:-ms-input-placeholder":o,"&:focus::-ms-input-placeholder":o},[`&.${NR.disabled}`]:{opacity:1,WebkitTextFillColor:(t.vars||t).palette.text.disabled},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},"small"===n.size&&{paddingTop:1},n.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},"search"===n.type&&{MozAppearance:"textfield"})})),$R=(0,Ve.jsx)(nt,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),VR=t.forwardRef((function(e,n){var r;const i=(0,Ze.b)({props:e,name:"MuiInputBase"}),{"aria-describedby":a,autoComplete:o,autoFocus:s,className:l,components:c={},componentsProps:u={},defaultValue:d,disabled:h,disableInjectingGlobalStyles:p,endAdornment:f,fullWidth:m=!1,id:g,inputComponent:v="input",inputProps:y={},inputRef:b,maxRows:w,minRows:E,multiline:x=!1,name:_,onBlur:A,onChange:T,onClick:S,onFocus:k,onKeyDown:C,onKeyUp:I,placeholder:R,readOnly:D,renderSuffix:L,rows:P,slotProps:M={},slots:N={},startAdornment:O,type:j="text",value:F}=i,U=(0,Le.A)(i,OR),B=null!=y.value?y.value:F,{current:$}=t.useRef(null!=B),V=t.useRef(),W=t.useCallback((e=>{0}),[]),z=(0,pS.A)(V,b,y.ref,W),[H,q]=t.useState(!1),G=DR();const K=IR({props:i,muiFormControl:G,states:["color","disabled","error","hiddenLabel","size","required","filled"]});K.focused=G?G.focused:H,t.useEffect((()=>{!G&&h&&H&&(q(!1),A&&A())}),[G,h,H,A]);const Y=G&&G.onFilled,Q=G&&G.onEmpty,X=t.useCallback((e=>{PR(e)?Y&&Y():Q&&Q()}),[Y,Q]);(0,Mk.A)((()=>{$&&X({value:B})}),[B,X,$]);t.useEffect((()=>{X(V.current)}),[]);let Z=v,J=y;x&&"input"===Z&&(J=P?(0,De.A)({type:void 0,minRows:P,maxRows:P},J):(0,De.A)({type:void 0,maxRows:w,minRows:E},J),Z=CR);t.useEffect((()=>{G&&G.setAdornedStart(Boolean(O))}),[G,O]);const ee=(0,De.A)({},i,{color:K.color||"primary",disabled:K.disabled,endAdornment:f,error:K.error,focused:K.focused,formControl:G,fullWidth:m,hiddenLabel:K.hiddenLabel,multiline:x,size:K.size,startAdornment:O,type:j}),te=(e=>{const{classes:t,color:n,disabled:r,error:i,endAdornment:a,focused:o,formControl:s,fullWidth:l,hiddenLabel:c,multiline:u,readOnly:d,size:h,startAdornment:p,type:f}=e,m={root:["root",`color${(0,wT.A)(n)}`,r&&"disabled",i&&"error",l&&"fullWidth",o&&"focused",s&&"formControl",h&&"medium"!==h&&`size${(0,wT.A)(h)}`,u&&"multiline",p&&"adornedStart",a&&"adornedEnd",c&&"hiddenLabel",d&&"readOnly"],input:["input",r&&"disabled","search"===f&&"inputTypeSearch",u&&"inputMultiline","small"===h&&"inputSizeSmall",c&&"inputHiddenLabel",p&&"inputAdornedStart",a&&"inputAdornedEnd",d&&"readOnly"]};return(0,yT.A)(m,MR,t)})(ee),ne=N.root||c.Root||UR,re=M.root||u.root||{},ie=N.input||c.Input||BR;return J=(0,De.A)({},J,null!=(r=M.input)?r:u.input),(0,Ve.jsxs)(t.Fragment,{children:[!p&&$R,(0,Ve.jsxs)(ne,(0,De.A)({},re,!zT(ne)&&{ownerState:(0,De.A)({},ee,re.ownerState)},{ref:n,onClick:e=>{V.current&&e.currentTarget===e.target&&V.current.focus(),S&&S(e)}},U,{className:(0,Pe.A)(te.root,re.className,l,D&&"MuiInputBase-readOnly"),children:[O,(0,Ve.jsx)(RR.Provider,{value:null,children:(0,Ve.jsx)(ie,(0,De.A)({ownerState:ee,"aria-invalid":K.error,"aria-describedby":a,autoComplete:o,autoFocus:s,defaultValue:d,disabled:K.disabled,id:g,onAnimationStart:e=>{X("mui-auto-fill-cancel"===e.animationName?V.current:{value:"x"})},name:_,placeholder:R,readOnly:D,required:K.required,rows:P,value:B,onKeyDown:C,onKeyUp:I,type:j},J,!zT(ie)&&{as:Z,ownerState:(0,De.A)({},ee,J.ownerState)},{ref:z,className:(0,Pe.A)(te.input,J.className,D&&"MuiInputBase-readOnly"),onBlur:e=>{A&&A(e),y.onBlur&&y.onBlur(e),G&&G.onBlur?G.onBlur(e):q(!1)},onChange:function(e){if(!$){const t=e.target||V.current;if(null==t)throw new Error((0,ER.A)(1));X({value:t.value})}for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];y.onChange&&y.onChange(e,...n),T&&T(e,...n)},onFocus:e=>{K.disabled?e.stopPropagation():(k&&k(e),y.onFocus&&y.onFocus(e),G&&G.onFocus?G.onFocus(e):q(!0))}}))}),f,L?L((0,De.A)({},K,{startAdornment:O})):null]}))]})})),WR=VR;function zR(e){return(0,_T.Ay)("MuiInput",e)}const HR=(0,De.A)({},NR,(0,Ge.A)("MuiInput",["root","underline","input"])),qR=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","slotProps","slots","type"],GR=(0,bT.Ay)(UR,{shouldForwardProp:e=>(0,pk.A)(e)||"classes"===e,name:"MuiInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...jR(e,t),!n.disableUnderline&&t.underline]}})((e=>{let{theme:t,ownerState:n}=e;let r="light"===t.palette.mode?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return t.vars&&(r=`rgba(${t.vars.palette.common.onBackgroundChannel} / ${t.vars.opacity.inputUnderline})`),(0,De.A)({position:"relative"},n.formControl&&{"label + &":{marginTop:16}},!n.disableUnderline&&{"&::after":{borderBottom:`2px solid ${(t.vars||t).palette[n.color].main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${HR.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${HR.error}`]:{"&::before, &::after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:`1px solid ${r}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${HR.disabled}, .${HR.error}):before`]:{borderBottom:`2px solid ${(t.vars||t).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${r}`}},[`&.${HR.disabled}:before`]:{borderBottomStyle:"dotted"}})})),KR=(0,bT.Ay)(BR,{name:"MuiInput",slot:"Input",overridesResolver:FR})({}),YR=t.forwardRef((function(e,t){var n,r,i,a;const o=(0,Ze.b)({props:e,name:"MuiInput"}),{disableUnderline:s,components:l={},componentsProps:c,fullWidth:u=!1,inputComponent:d="input",multiline:h=!1,slotProps:p,slots:f={},type:m="text"}=o,g=(0,Le.A)(o,qR),v=(e=>{const{classes:t,disableUnderline:n}=e,r={root:["root",!n&&"underline"],input:["input"]},i=(0,yT.A)(r,zR,t);return(0,De.A)({},t,i)})(o),y={root:{ownerState:{disableUnderline:s}}},b=(null!=p?p:c)?(0,wR.A)(null!=p?p:c,y):y,w=null!=(n=null!=(r=f.root)?r:l.Root)?n:GR,E=null!=(i=null!=(a=f.input)?a:l.Input)?i:KR;return(0,Ve.jsx)(WR,(0,De.A)({slots:{root:w,input:E},slotProps:b,fullWidth:u,inputComponent:d,multiline:h,ref:t,type:m},g,{classes:v}))}));YR.muiName="Input";const QR=YR;function XR(e){return(0,_T.Ay)("MuiFilledInput",e)}const ZR=(0,De.A)({},NR,(0,Ge.A)("MuiFilledInput",["root","underline","input"])),JR=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","slotProps","slots","type"],eD=(0,bT.Ay)(UR,{shouldForwardProp:e=>(0,pk.A)(e)||"classes"===e,name:"MuiFilledInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...jR(e,t),!n.disableUnderline&&t.underline]}})((e=>{let{theme:t,ownerState:n}=e;var r;const i="light"===t.palette.mode,a=i?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",o=i?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",s=i?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",l=i?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return(0,De.A)({position:"relative",backgroundColor:t.vars?t.vars.palette.FilledInput.bg:o,borderTopLeftRadius:(t.vars||t).shape.borderRadius,borderTopRightRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),"&:hover":{backgroundColor:t.vars?t.vars.palette.FilledInput.hoverBg:s,"@media (hover: none)":{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:o}},[`&.${ZR.focused}`]:{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:o},[`&.${ZR.disabled}`]:{backgroundColor:t.vars?t.vars.palette.FilledInput.disabledBg:l}},!n.disableUnderline&&{"&::after":{borderBottom:`2px solid ${null==(r=(t.vars||t).palette[n.color||"primary"])?void 0:r.main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${ZR.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${ZR.error}`]:{"&::before, &::after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:`1px solid ${t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / ${t.vars.opacity.inputUnderline})`:a}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${ZR.disabled}, .${ZR.error}):before`]:{borderBottom:`1px solid ${(t.vars||t).palette.text.primary}`},[`&.${ZR.disabled}:before`]:{borderBottomStyle:"dotted"}},n.startAdornment&&{paddingLeft:12},n.endAdornment&&{paddingRight:12},n.multiline&&(0,De.A)({padding:"25px 12px 8px"},"small"===n.size&&{paddingTop:21,paddingBottom:4},n.hiddenLabel&&{paddingTop:16,paddingBottom:17},n.hiddenLabel&&"small"===n.size&&{paddingTop:8,paddingBottom:9}))})),tD=(0,bT.Ay)(BR,{name:"MuiFilledInput",slot:"Input",overridesResolver:FR})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12},!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:"light"===t.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===t.palette.mode?null:"#fff",caretColor:"light"===t.palette.mode?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},t.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},"small"===n.size&&{paddingTop:21,paddingBottom:4},n.hiddenLabel&&{paddingTop:16,paddingBottom:17},n.startAdornment&&{paddingLeft:0},n.endAdornment&&{paddingRight:0},n.hiddenLabel&&"small"===n.size&&{paddingTop:8,paddingBottom:9},n.multiline&&{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0})})),nD=t.forwardRef((function(e,t){var n,r,i,a;const o=(0,Ze.b)({props:e,name:"MuiFilledInput"}),{components:s={},componentsProps:l,fullWidth:c=!1,inputComponent:u="input",multiline:d=!1,slotProps:h,slots:p={},type:f="text"}=o,m=(0,Le.A)(o,JR),g=(0,De.A)({},o,{fullWidth:c,inputComponent:u,multiline:d,type:f}),v=(e=>{const{classes:t,disableUnderline:n}=e,r={root:["root",!n&&"underline"],input:["input"]},i=(0,yT.A)(r,XR,t);return(0,De.A)({},t,i)})(o),y={root:{ownerState:g},input:{ownerState:g}},b=(null!=h?h:l)?(0,wR.A)(y,null!=h?h:l):y,w=null!=(n=null!=(r=p.root)?r:s.Root)?n:eD,E=null!=(i=null!=(a=p.input)?a:s.Input)?i:tD;return(0,Ve.jsx)(WR,(0,De.A)({slots:{root:w,input:E},componentsProps:b,fullWidth:c,inputComponent:u,multiline:d,ref:t,type:f},m,{classes:v}))}));nD.muiName="Input";const rD=nD;var iD;const aD=["children","classes","className","label","notched"],oD=(0,bT.Ay)("fieldset",{shouldForwardProp:pk.A})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),sD=(0,bT.Ay)("legend",{shouldForwardProp:pk.A})((e=>{let{ownerState:t,theme:n}=e;return(0,De.A)({float:"unset",width:"auto",overflow:"hidden"},!t.withLabel&&{padding:0,lineHeight:"11px",transition:n.transitions.create("width",{duration:150,easing:n.transitions.easing.easeOut})},t.withLabel&&(0,De.A)({display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:n.transitions.create("max-width",{duration:50,easing:n.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}},t.notched&&{maxWidth:"100%",transition:n.transitions.create("max-width",{duration:100,easing:n.transitions.easing.easeOut,delay:50})}))}));function lD(e){return(0,_T.Ay)("MuiOutlinedInput",e)}const cD=(0,De.A)({},NR,(0,Ge.A)("MuiOutlinedInput",["root","notchedOutline","input"])),uD=["components","fullWidth","inputComponent","label","multiline","notched","slots","type"],dD=(0,bT.Ay)(UR,{shouldForwardProp:e=>(0,pk.A)(e)||"classes"===e,name:"MuiOutlinedInput",slot:"Root",overridesResolver:jR})((e=>{let{theme:t,ownerState:n}=e;const r="light"===t.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return(0,De.A)({position:"relative",borderRadius:(t.vars||t).shape.borderRadius,[`&:hover .${cD.notchedOutline}`]:{borderColor:(t.vars||t).palette.text.primary},"@media (hover: none)":{[`&:hover .${cD.notchedOutline}`]:{borderColor:t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:r}},[`&.${cD.focused} .${cD.notchedOutline}`]:{borderColor:(t.vars||t).palette[n.color].main,borderWidth:2},[`&.${cD.error} .${cD.notchedOutline}`]:{borderColor:(t.vars||t).palette.error.main},[`&.${cD.disabled} .${cD.notchedOutline}`]:{borderColor:(t.vars||t).palette.action.disabled}},n.startAdornment&&{paddingLeft:14},n.endAdornment&&{paddingRight:14},n.multiline&&(0,De.A)({padding:"16.5px 14px"},"small"===n.size&&{padding:"8.5px 14px"}))})),hD=(0,bT.Ay)((function(e){const{className:t,label:n,notched:r}=e,i=(0,Le.A)(e,aD),a=null!=n&&""!==n,o=(0,De.A)({},e,{notched:r,withLabel:a});return(0,Ve.jsx)(oD,(0,De.A)({"aria-hidden":!0,className:t,ownerState:o},i,{children:(0,Ve.jsx)(sD,{ownerState:o,children:a?(0,Ve.jsx)("span",{children:n}):iD||(iD=(0,Ve.jsx)("span",{className:"notranslate",children:"\u200b"}))})}))}),{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(e,t)=>t.notchedOutline})((e=>{let{theme:t}=e;const n="light"===t.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:n}})),pD=(0,bT.Ay)(BR,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:FR})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({padding:"16.5px 14px"},!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:"light"===t.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===t.palette.mode?null:"#fff",caretColor:"light"===t.palette.mode?null:"#fff",borderRadius:"inherit"}},t.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},"small"===n.size&&{padding:"8.5px 14px"},n.multiline&&{padding:0},n.startAdornment&&{paddingLeft:0},n.endAdornment&&{paddingRight:0})})),fD=t.forwardRef((function(e,n){var r,i,a,o,s;const l=(0,Ze.b)({props:e,name:"MuiOutlinedInput"}),{components:c={},fullWidth:u=!1,inputComponent:d="input",label:h,multiline:p=!1,notched:f,slots:m={},type:g="text"}=l,v=(0,Le.A)(l,uD),y=(e=>{const{classes:t}=e,n=(0,yT.A)({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},lD,t);return(0,De.A)({},t,n)})(l),b=DR(),w=IR({props:l,muiFormControl:b,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),E=(0,De.A)({},l,{color:w.color||"primary",disabled:w.disabled,error:w.error,focused:w.focused,formControl:b,fullWidth:u,hiddenLabel:w.hiddenLabel,multiline:p,size:w.size,type:g}),x=null!=(r=null!=(i=m.root)?i:c.Root)?r:dD,_=null!=(a=null!=(o=m.input)?o:c.Input)?a:pD;return(0,Ve.jsx)(WR,(0,De.A)({slots:{root:x,input:_},renderSuffix:e=>(0,Ve.jsx)(hD,{ownerState:E,className:y.notchedOutline,label:null!=h&&""!==h&&w.required?s||(s=(0,Ve.jsxs)(t.Fragment,{children:[h,"\u2009","*"]})):h,notched:"undefined"!==typeof f?f:Boolean(e.startAdornment||e.filled||e.focused)}),fullWidth:u,inputComponent:d,multiline:p,ref:n,type:g},v,{classes:(0,De.A)({},y,{notchedOutline:null})}))}));fD.muiName="Input";const mD=fD;function gD(e){return(0,_T.Ay)("MuiFormLabel",e)}const vD=(0,Ge.A)("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),yD=["children","className","color","component","disabled","error","filled","focused","required"],bD=(0,bT.Ay)("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:n}=e;return(0,De.A)({},t.root,"secondary"===n.color&&t.colorSecondary,n.filled&&t.filled)}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({color:(t.vars||t).palette.text.secondary},t.typography.body1,{lineHeight:"1.4375em",padding:0,position:"relative",[`&.${vD.focused}`]:{color:(t.vars||t).palette[n.color].main},[`&.${vD.disabled}`]:{color:(t.vars||t).palette.text.disabled},[`&.${vD.error}`]:{color:(t.vars||t).palette.error.main}})})),wD=(0,bT.Ay)("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(e,t)=>t.asterisk})((e=>{let{theme:t}=e;return{[`&.${vD.error}`]:{color:(t.vars||t).palette.error.main}}})),ED=t.forwardRef((function(e,t){const n=(0,Ze.b)({props:e,name:"MuiFormLabel"}),{children:r,className:i,component:a="label"}=n,o=(0,Le.A)(n,yD),s=IR({props:n,muiFormControl:DR(),states:["color","required","focused","disabled","error","filled"]}),l=(0,De.A)({},n,{color:s.color||"primary",component:a,disabled:s.disabled,error:s.error,filled:s.filled,focused:s.focused,required:s.required}),c=(e=>{const{classes:t,color:n,focused:r,disabled:i,error:a,filled:o,required:s}=e,l={root:["root",`color${(0,wT.A)(n)}`,i&&"disabled",a&&"error",o&&"filled",r&&"focused",s&&"required"],asterisk:["asterisk",a&&"error"]};return(0,yT.A)(l,gD,t)})(l);return(0,Ve.jsxs)(bD,(0,De.A)({as:a,ownerState:l,className:(0,Pe.A)(c.root,i),ref:t},o,{children:[r,s.required&&(0,Ve.jsxs)(wD,{ownerState:l,"aria-hidden":!0,className:c.asterisk,children:["\u2009","*"]})]}))})),xD=ED;function _D(e){return(0,_T.Ay)("MuiInputLabel",e)}(0,Ge.A)("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const AD=["disableAnimation","margin","shrink","variant","className"],TD=(0,bT.Ay)(xD,{shouldForwardProp:e=>(0,pk.A)(e)||"classes"===e,name:"MuiInputLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${vD.asterisk}`]:t.asterisk},t.root,n.formControl&&t.formControl,"small"===n.size&&t.sizeSmall,n.shrink&&t.shrink,!n.disableAnimation&&t.animated,n.focused&&t.focused,t[n.variant]]}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},n.formControl&&{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"},"small"===n.size&&{transform:"translate(0, 17px) scale(1)"},n.shrink&&{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"},!n.disableAnimation&&{transition:t.transitions.create(["color","transform","max-width"],{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut})},"filled"===n.variant&&(0,De.A)({zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},"small"===n.size&&{transform:"translate(12px, 13px) scale(1)"},n.shrink&&(0,De.A)({userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"},"small"===n.size&&{transform:"translate(12px, 4px) scale(0.75)"})),"outlined"===n.variant&&(0,De.A)({zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},"small"===n.size&&{transform:"translate(14px, 9px) scale(1)"},n.shrink&&{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}))})),SD=t.forwardRef((function(e,t){const n=(0,Ze.b)({name:"MuiInputLabel",props:e}),{disableAnimation:r=!1,shrink:i,className:a}=n,o=(0,Le.A)(n,AD),s=DR();let l=i;"undefined"===typeof l&&s&&(l=s.filled||s.focused||s.adornedStart);const c=IR({props:n,muiFormControl:s,states:["size","variant","required","focused"]}),u=(0,De.A)({},n,{disableAnimation:r,formControl:s,shrink:l,size:c.size,variant:c.variant,required:c.required,focused:c.focused}),d=(e=>{const{classes:t,formControl:n,size:r,shrink:i,disableAnimation:a,variant:o,required:s}=e,l={root:["root",n&&"formControl",!a&&"animated",i&&"shrink",r&&"normal"!==r&&`size${(0,wT.A)(r)}`,o],asterisk:[s&&"asterisk"]},c=(0,yT.A)(l,_D,t);return(0,De.A)({},t,c)})(u);return(0,Ve.jsx)(TD,(0,De.A)({"data-shrink":l,ownerState:u,ref:t,className:(0,Pe.A)(d.root,a)},o,{classes:d}))})),kD=SD;function CD(e){return(0,_T.Ay)("MuiFormControl",e)}(0,Ge.A)("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const ID=["children","className","color","component","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],RD=(0,bT.Ay)("div",{name:"MuiFormControl",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:n}=e;return(0,De.A)({},t.root,t[`margin${(0,wT.A)(n.margin)}`],n.fullWidth&&t.fullWidth)}})((e=>{let{ownerState:t}=e;return(0,De.A)({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},"normal"===t.margin&&{marginTop:16,marginBottom:8},"dense"===t.margin&&{marginTop:8,marginBottom:4},t.fullWidth&&{width:"100%"})})),DD=t.forwardRef((function(e,n){const r=(0,Ze.b)({props:e,name:"MuiFormControl"}),{children:i,className:a,color:o="primary",component:s="div",disabled:l=!1,error:c=!1,focused:u,fullWidth:d=!1,hiddenLabel:h=!1,margin:p="none",required:f=!1,size:m="medium",variant:g="outlined"}=r,v=(0,Le.A)(r,ID),y=(0,De.A)({},r,{color:o,component:s,disabled:l,error:c,fullWidth:d,hiddenLabel:h,margin:p,required:f,size:m,variant:g}),b=(e=>{const{classes:t,margin:n,fullWidth:r}=e,i={root:["root","none"!==n&&`margin${(0,wT.A)(n)}`,r&&"fullWidth"]};return(0,yT.A)(i,CD,t)})(y),[w,E]=t.useState((()=>{let e=!1;return i&&t.Children.forEach(i,(t=>{if(!(0,VI.A)(t,["Input","Select"]))return;const n=(0,VI.A)(t,["Select"])?t.props.input:t;n&&n.props.startAdornment&&(e=!0)})),e})),[x,_]=t.useState((()=>{let e=!1;return i&&t.Children.forEach(i,(t=>{(0,VI.A)(t,["Input","Select"])&&(PR(t.props,!0)||PR(t.props.inputProps,!0))&&(e=!0)})),e})),[A,T]=t.useState(!1);l&&A&&T(!1);const S=void 0===u||l?A:u;let k;const C=t.useMemo((()=>({adornedStart:w,setAdornedStart:E,color:o,disabled:l,error:c,filled:x,focused:S,fullWidth:d,hiddenLabel:h,size:m,onBlur:()=>{T(!1)},onEmpty:()=>{_(!1)},onFilled:()=>{_(!0)},onFocus:()=>{T(!0)},registerEffect:k,required:f,variant:g})),[w,o,l,c,x,S,d,h,k,f,m,g]);return(0,Ve.jsx)(RR.Provider,{value:C,children:(0,Ve.jsx)(RD,(0,De.A)({as:s,ownerState:y,className:(0,Pe.A)(b.root,a),ref:n},v,{children:i}))})})),LD=DD;function PD(e){return(0,_T.Ay)("MuiFormHelperText",e)}const MD=(0,Ge.A)("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var ND;const OD=["children","className","component","disabled","error","filled","focused","margin","required","variant"],jD=(0,bT.Ay)("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.size&&t[`size${(0,wT.A)(n.size)}`],n.contained&&t.contained,n.filled&&t.filled]}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({color:(t.vars||t).palette.text.secondary},t.typography.caption,{textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${MD.disabled}`]:{color:(t.vars||t).palette.text.disabled},[`&.${MD.error}`]:{color:(t.vars||t).palette.error.main}},"small"===n.size&&{marginTop:4},n.contained&&{marginLeft:14,marginRight:14})})),FD=t.forwardRef((function(e,t){const n=(0,Ze.b)({props:e,name:"MuiFormHelperText"}),{children:r,className:i,component:a="p"}=n,o=(0,Le.A)(n,OD),s=IR({props:n,muiFormControl:DR(),states:["variant","size","disabled","error","filled","focused","required"]}),l=(0,De.A)({},n,{component:a,contained:"filled"===s.variant||"outlined"===s.variant,variant:s.variant,size:s.size,disabled:s.disabled,error:s.error,filled:s.filled,focused:s.focused,required:s.required}),c=(e=>{const{classes:t,contained:n,size:r,disabled:i,error:a,filled:o,focused:s,required:l}=e,c={root:["root",i&&"disabled",a&&"error",r&&`size${(0,wT.A)(r)}`,n&&"contained",s&&"focused",o&&"filled",l&&"required"]};return(0,yT.A)(c,PD,t)})(l);return(0,Ve.jsx)(jD,(0,De.A)({as:a,ownerState:l,className:(0,Pe.A)(c.root,i),ref:t},o,{children:" "===r?ND||(ND=(0,Ve.jsx)("span",{className:"notranslate",children:"\u200b"})):r}))})),UD=FD;function BD(e){return(0,_T.Ay)("MuiNativeSelect",e)}const $D=(0,Ge.A)("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),VD=["className","disabled","error","IconComponent","inputRef","variant"],WD=e=>{let{ownerState:t,theme:n}=e;return(0,De.A)({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":(0,De.A)({},n.vars?{backgroundColor:`rgba(${n.vars.palette.common.onBackgroundChannel} / 0.05)`}:{backgroundColor:"light"===n.palette.mode?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)"},{borderRadius:0}),"&::-ms-expand":{display:"none"},[`&.${$D.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(n.vars||n).palette.background.paper},"&&&":{paddingRight:24,minWidth:16}},"filled"===t.variant&&{"&&&":{paddingRight:32}},"outlined"===t.variant&&{borderRadius:(n.vars||n).shape.borderRadius,"&:focus":{borderRadius:(n.vars||n).shape.borderRadius},"&&&":{paddingRight:32}})},zD=(0,bT.Ay)("select",{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:pk.A,overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.select,t[n.variant],n.error&&t.error,{[`&.${$D.multiple}`]:t.multiple}]}})(WD),HD=e=>{let{ownerState:t,theme:n}=e;return(0,De.A)({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(n.vars||n).palette.action.active,[`&.${$D.disabled}`]:{color:(n.vars||n).palette.action.disabled}},t.open&&{transform:"rotate(180deg)"},"filled"===t.variant&&{right:7},"outlined"===t.variant&&{right:7})},qD=(0,bT.Ay)("svg",{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t[`icon${(0,wT.A)(n.variant)}`],n.open&&t.iconOpen]}})(HD),GD=t.forwardRef((function(e,n){const{className:r,disabled:i,error:a,IconComponent:o,inputRef:s,variant:l="standard"}=e,c=(0,Le.A)(e,VD),u=(0,De.A)({},e,{disabled:i,variant:l,error:a}),d=(e=>{const{classes:t,variant:n,disabled:r,multiple:i,open:a,error:o}=e,s={select:["select",n,r&&"disabled",i&&"multiple",o&&"error"],icon:["icon",`icon${(0,wT.A)(n)}`,a&&"iconOpen",r&&"disabled"]};return(0,yT.A)(s,BD,t)})(u);return(0,Ve.jsxs)(t.Fragment,{children:[(0,Ve.jsx)(zD,(0,De.A)({ownerState:u,className:(0,Pe.A)(d.select,r),disabled:i,ref:s||n},c)),e.multiple?null:(0,Ve.jsx)(qD,{as:o,ownerState:u,className:d.icon})]})})),KD=GD;var YD=n(1960),QD=n(8733);function XD(e){return(0,_T.Ay)("MuiSelect",e)}const ZD=(0,Ge.A)("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var JD;const eL=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultOpen","defaultValue","disabled","displayEmpty","error","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"],tL=(0,bT.Ay)("div",{name:"MuiSelect",slot:"Select",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`&.${ZD.select}`]:t.select},{[`&.${ZD.select}`]:t[n.variant]},{[`&.${ZD.error}`]:t.error},{[`&.${ZD.multiple}`]:t.multiple}]}})(WD,{[`&.${ZD.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),nL=(0,bT.Ay)("svg",{name:"MuiSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t[`icon${(0,wT.A)(n.variant)}`],n.open&&t.iconOpen]}})(HD),rL=(0,bT.Ay)("input",{shouldForwardProp:e=>(0,YD.A)(e)&&"classes"!==e,name:"MuiSelect",slot:"NativeInput",overridesResolver:(e,t)=>t.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function iL(e,t){return"object"===typeof t&&null!==t?e===t:String(e)===String(t)}function aL(e){return null==e||"string"===typeof e&&!e.trim()}const oL=t.forwardRef((function(e,n){var r;const{"aria-describedby":i,"aria-label":a,autoFocus:o,autoWidth:s,children:l,className:c,defaultOpen:u,defaultValue:d,disabled:h,displayEmpty:p,error:f=!1,IconComponent:m,inputRef:g,labelId:v,MenuProps:y={},multiple:b,name:w,onBlur:E,onChange:x,onClose:_,onFocus:A,onOpen:T,open:S,readOnly:k,renderValue:C,SelectDisplayProps:I={},tabIndex:R,value:D,variant:L="standard"}=e,P=(0,Le.A)(e,eL),[M,N]=(0,QD.A)({controlled:D,default:d,name:"Select"}),[O,j]=(0,QD.A)({controlled:S,default:u,name:"Select"}),F=t.useRef(null),U=t.useRef(null),[B,$]=t.useState(null),{current:V}=t.useRef(null!=S),[W,z]=t.useState(),H=(0,pS.A)(n,g),q=t.useCallback((e=>{U.current=e,e&&$(e)}),[]),G=null==B?void 0:B.parentNode;t.useImperativeHandle(H,(()=>({focus:()=>{U.current.focus()},node:F.current,value:M})),[M]),t.useEffect((()=>{u&&O&&B&&!V&&(z(s?null:G.clientWidth),U.current.focus())}),[B,s]),t.useEffect((()=>{o&&U.current.focus()}),[o]),t.useEffect((()=>{if(!v)return;const e=(0,Tk.A)(U.current).getElementById(v);if(e){const t=()=>{getSelection().isCollapsed&&U.current.focus()};return e.addEventListener("click",t),()=>{e.removeEventListener("click",t)}}}),[v]);const K=(e,t)=>{e?T&&T(t):_&&_(t),V||(z(s?null:G.clientWidth),j(e))},Y=t.Children.toArray(l),Q=e=>t=>{let n;if(t.currentTarget.hasAttribute("tabindex")){if(b){n=Array.isArray(M)?M.slice():[];const t=M.indexOf(e.props.value);-1===t?n.push(e.props.value):n.splice(t,1)}else n=e.props.value;if(e.props.onClick&&e.props.onClick(t),M!==n&&(N(n),x)){const r=t.nativeEvent||t,i=new r.constructor(r.type,r);Object.defineProperty(i,"target",{writable:!0,value:{value:n,name:w}}),x(i,e)}b||K(!1,t)}},X=null!==B&&O;let Z,J;delete P["aria-invalid"];const ee=[];let te=!1,ne=!1;(PR({value:M})||p)&&(C?Z=C(M):te=!0);const re=Y.map((e=>{if(!t.isValidElement(e))return null;let n;if(b){if(!Array.isArray(M))throw new Error((0,ER.A)(2));n=M.some((t=>iL(t,e.props.value))),n&&te&&ee.push(e.props.children)}else n=iL(M,e.props.value),n&&te&&(J=e.props.children);return n&&(ne=!0),t.cloneElement(e,{"aria-selected":n?"true":"false",onClick:Q(e),onKeyUp:t=>{" "===t.key&&t.preventDefault(),e.props.onKeyUp&&e.props.onKeyUp(t)},role:"option",selected:n,value:void 0,"data-value":e.props.value})}));te&&(Z=b?0===ee.length?null:ee.reduce(((e,t,n)=>(e.push(t),n<ee.length-1&&e.push(", "),e)),[]):J);let ie,ae=W;!s&&V&&B&&(ae=G.clientWidth),ie="undefined"!==typeof R?R:h?null:0;const oe=I.id||(w?`mui-component-select-${w}`:void 0),se=(0,De.A)({},e,{variant:L,value:M,open:X,error:f}),le=(e=>{const{classes:t,variant:n,disabled:r,multiple:i,open:a,error:o}=e,s={select:["select",n,r&&"disabled",i&&"multiple",o&&"error"],icon:["icon",`icon${(0,wT.A)(n)}`,a&&"iconOpen",r&&"disabled"],nativeInput:["nativeInput"]};return(0,yT.A)(s,XD,t)})(se),ce=(0,De.A)({},y.PaperProps,null==(r=y.slotProps)?void 0:r.paper),ue=(0,cR.A)();return(0,Ve.jsxs)(t.Fragment,{children:[(0,Ve.jsx)(tL,(0,De.A)({ref:q,tabIndex:ie,role:"combobox","aria-controls":ue,"aria-disabled":h?"true":void 0,"aria-expanded":X?"true":"false","aria-haspopup":"listbox","aria-label":a,"aria-labelledby":[v,oe].filter(Boolean).join(" ")||void 0,"aria-describedby":i,onKeyDown:e=>{if(!k){-1!==[" ","ArrowUp","ArrowDown","Enter"].indexOf(e.key)&&(e.preventDefault(),K(!0,e))}},onMouseDown:h||k?null:e=>{0===e.button&&(e.preventDefault(),U.current.focus(),K(!0,e))},onBlur:e=>{!X&&E&&(Object.defineProperty(e,"target",{writable:!0,value:{value:M,name:w}}),E(e))},onFocus:A},I,{ownerState:se,className:(0,Pe.A)(I.className,le.select,c),id:oe,children:aL(Z)?JD||(JD=(0,Ve.jsx)("span",{className:"notranslate",children:"\u200b"})):Z})),(0,Ve.jsx)(rL,(0,De.A)({"aria-invalid":f,value:Array.isArray(M)?M.join(","):M,name:w,ref:F,"aria-hidden":!0,onChange:e=>{const t=Y.find((t=>t.props.value===e.target.value));void 0!==t&&(N(t.props.value),x&&x(e,t))},tabIndex:-1,disabled:h,className:le.nativeInput,autoFocus:o,ownerState:se},P)),(0,Ve.jsx)(nL,{as:m,className:le.icon,ownerState:se}),(0,Ve.jsx)(uI,(0,De.A)({id:`menu-${w||""}`,anchorEl:G,open:X,onClose:e=>{K(!1,e)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},y,{MenuListProps:(0,De.A)({"aria-labelledby":v,role:"listbox","aria-multiselectable":b?"true":void 0,disableListWrap:!0,id:ue},y.MenuListProps),slotProps:(0,De.A)({},y.slotProps,{paper:(0,De.A)({},ce,{style:(0,De.A)({minWidth:ae},null!=ce?ce.style:null)})}),children:re}))]})})),sL=oL,lL=(0,BT.A)((0,Ve.jsx)("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),cL=["autoWidth","children","classes","className","defaultOpen","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],uL=["root"],dL={name:"MuiSelect",overridesResolver:(e,t)=>t.root,shouldForwardProp:e=>(0,pk.A)(e)&&"variant"!==e,slot:"Root"},hL=(0,bT.Ay)(QR,dL)(""),pL=(0,bT.Ay)(mD,dL)(""),fL=(0,bT.Ay)(rD,dL)(""),mL=t.forwardRef((function(e,n){const r=(0,Ze.b)({name:"MuiSelect",props:e}),{autoWidth:i=!1,children:a,classes:o={},className:s,defaultOpen:l=!1,displayEmpty:c=!1,IconComponent:u=lL,id:d,input:h,inputProps:p,label:f,labelId:m,MenuProps:g,multiple:v=!1,native:y=!1,onClose:b,onOpen:w,open:E,renderValue:x,SelectDisplayProps:_,variant:A="outlined"}=r,T=(0,Le.A)(r,cL),S=y?KD:sL,k=IR({props:r,muiFormControl:DR(),states:["variant","error"]}),C=k.variant||A,I=(0,De.A)({},r,{variant:C,classes:o}),R=(e=>{const{classes:t}=e;return t})(I),D=(0,Le.A)(R,uL),L=h||{standard:(0,Ve.jsx)(hL,{ownerState:I}),outlined:(0,Ve.jsx)(pL,{label:f,ownerState:I}),filled:(0,Ve.jsx)(fL,{ownerState:I})}[C],P=(0,pS.A)(n,zk(L));return(0,Ve.jsx)(t.Fragment,{children:t.cloneElement(L,(0,De.A)({inputComponent:S,inputProps:(0,De.A)({children:a,error:k.error,IconComponent:u,variant:C,type:void 0,multiple:v},y?{id:d}:{autoWidth:i,defaultOpen:l,displayEmpty:c,labelId:m,MenuProps:g,onClose:b,onOpen:w,open:E,renderValue:x,SelectDisplayProps:(0,De.A)({id:d},_)},p,{classes:p?(0,wR.A)(D,p.classes):D},h?h.props.inputProps:{})},(v&&y||c)&&"outlined"===C?{notched:!0}:{},{ref:P,className:(0,Pe.A)(L.props.className,s,R.root)},!h&&{variant:C},T))})}));mL.muiName="Select";const gL=mL;function vL(e){return(0,_T.Ay)("MuiTextField",e)}(0,Ge.A)("MuiTextField",["root"]);const yL=["autoComplete","autoFocus","children","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","id","InputLabelProps","inputProps","InputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","select","SelectProps","type","value","variant"],bL={standard:QR,filled:rD,outlined:mD},wL=(0,bT.Ay)(LD,{name:"MuiTextField",slot:"Root",overridesResolver:(e,t)=>t.root})({}),EL=t.forwardRef((function(e,t){const n=(0,Ze.b)({props:e,name:"MuiTextField"}),{autoComplete:r,autoFocus:i=!1,children:a,className:o,color:s="primary",defaultValue:l,disabled:c=!1,error:u=!1,FormHelperTextProps:d,fullWidth:h=!1,helperText:p,id:f,InputLabelProps:m,inputProps:g,InputProps:v,inputRef:y,label:b,maxRows:w,minRows:E,multiline:x=!1,name:_,onBlur:A,onChange:T,onFocus:S,placeholder:k,required:C=!1,rows:I,select:R=!1,SelectProps:D,type:L,value:P,variant:M="outlined"}=n,N=(0,Le.A)(n,yL),O=(0,De.A)({},n,{autoFocus:i,color:s,disabled:c,error:u,fullWidth:h,multiline:x,required:C,select:R,variant:M}),j=(e=>{const{classes:t}=e;return(0,yT.A)({root:["root"]},vL,t)})(O);const F={};"outlined"===M&&(m&&"undefined"!==typeof m.shrink&&(F.notched=m.shrink),F.label=b),R&&(D&&D.native||(F.id=void 0),F["aria-describedby"]=void 0);const U=(0,cR.A)(f),B=p&&U?`${U}-helper-text`:void 0,$=b&&U?`${U}-label`:void 0,V=bL[M],W=(0,Ve.jsx)(V,(0,De.A)({"aria-describedby":B,autoComplete:r,autoFocus:i,defaultValue:l,fullWidth:h,multiline:x,name:_,rows:I,maxRows:w,minRows:E,type:L,value:P,id:U,inputRef:y,onBlur:A,onChange:T,onFocus:S,placeholder:k,inputProps:g},F,v));return(0,Ve.jsxs)(wL,(0,De.A)({className:(0,Pe.A)(j.root,o),disabled:c,error:u,fullWidth:h,ref:t,required:C,color:s,variant:M,ownerState:O},N,{children:[null!=b&&""!==b&&(0,Ve.jsx)(kD,(0,De.A)({htmlFor:U,id:$},m,{children:b})),R?(0,Ve.jsx)(gL,(0,De.A)({"aria-describedby":B,id:U,labelId:$,value:P,input:W},D,{children:a})):W,p&&(0,Ve.jsx)(UD,(0,De.A)({id:B},d,{children:p}))]}))})),xL=EL;function _L(e){return(0,_T.Ay)("MuiCircularProgress",e)}(0,Ge.A)("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const AL=["className","color","disableShrink","size","style","thickness","value","variant"];let TL,SL,kL,CL,IL=e=>e;const RL=44,DL=(0,SS.i7)(TL||(TL=IL`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`)),LL=(0,SS.i7)(SL||(SL=IL`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -125px;
  }
`)),PL=(0,bT.Ay)("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`color${(0,wT.A)(n.color)}`]]}})((e=>{let{ownerState:t,theme:n}=e;return(0,De.A)({display:"inline-block"},"determinate"===t.variant&&{transition:n.transitions.create("transform")},"inherit"!==t.color&&{color:(n.vars||n).palette[t.color].main})}),(e=>{let{ownerState:t}=e;return"indeterminate"===t.variant&&(0,SS.AH)(kL||(kL=IL`
      animation: ${0} 1.4s linear infinite;
    `),DL)})),ML=(0,bT.Ay)("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(e,t)=>t.svg})({display:"block"}),NL=(0,bT.Ay)("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.circle,t[`circle${(0,wT.A)(n.variant)}`],n.disableShrink&&t.circleDisableShrink]}})((e=>{let{ownerState:t,theme:n}=e;return(0,De.A)({stroke:"currentColor"},"determinate"===t.variant&&{transition:n.transitions.create("stroke-dashoffset")},"indeterminate"===t.variant&&{strokeDasharray:"80px, 200px",strokeDashoffset:0})}),(e=>{let{ownerState:t}=e;return"indeterminate"===t.variant&&!t.disableShrink&&(0,SS.AH)(CL||(CL=IL`
      animation: ${0} 1.4s ease-in-out infinite;
    `),LL)})),OL=t.forwardRef((function(e,t){const n=(0,Ze.b)({props:e,name:"MuiCircularProgress"}),{className:r,color:i="primary",disableShrink:a=!1,size:o=40,style:s,thickness:l=3.6,value:c=0,variant:u="indeterminate"}=n,d=(0,Le.A)(n,AL),h=(0,De.A)({},n,{color:i,disableShrink:a,size:o,thickness:l,value:c,variant:u}),p=(e=>{const{classes:t,variant:n,color:r,disableShrink:i}=e,a={root:["root",n,`color${(0,wT.A)(r)}`],svg:["svg"],circle:["circle",`circle${(0,wT.A)(n)}`,i&&"circleDisableShrink"]};return(0,yT.A)(a,_L,t)})(h),f={},m={},g={};if("determinate"===u){const e=2*Math.PI*((RL-l)/2);f.strokeDasharray=e.toFixed(3),g["aria-valuenow"]=Math.round(c),f.strokeDashoffset=`${((100-c)/100*e).toFixed(3)}px`,m.transform="rotate(-90deg)"}return(0,Ve.jsx)(PL,(0,De.A)({className:(0,Pe.A)(p.root,r),style:(0,De.A)({width:o,height:o},m,s),ownerState:h,ref:t,role:"progressbar"},g,d,{children:(0,Ve.jsx)(ML,{className:p.svg,ownerState:h,viewBox:"22 22 44 44",children:(0,Ve.jsx)(NL,{className:p.circle,style:f,ownerState:h,cx:RL,cy:RL,r:(RL-l)/2,fill:"none",strokeWidth:l})})}))})),jL=OL;var FL=n(5501);function UL(e){const{theme:t,name:n,props:r}=e;return t&&t.components&&t.components[n]&&t.components[n].defaultProps?(0,hk.A)(t.components[n].defaultProps,r):r}function BL(e){let{props:t,name:n,defaultTheme:r,themeId:i}=e,a=$e(r);i&&(a=a[i]||a);return UL({theme:a,name:n,props:t})}const $L=["ownerState"],VL=["variants"],WL=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function zL(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}const HL=(0,je.A)(),qL=e=>e?e.charAt(0).toLowerCase()+e.slice(1):e;function GL(e){let{defaultTheme:t,theme:n,themeId:r}=e;return i=n,0===Object.keys(i).length?t:n[r]||n;var i}function KL(e){return e?(t,n)=>n[e]:null}function YL(e,t){let{ownerState:n}=t,r=(0,Le.A)(t,$L);const i="function"===typeof e?e((0,De.A)({ownerState:n},r)):e;if(Array.isArray(i))return i.flatMap((e=>YL(e,(0,De.A)({ownerState:n},r))));if(i&&"object"===typeof i&&Array.isArray(i.variants)){const{variants:e=[]}=i;let t=(0,Le.A)(i,VL);return e.forEach((e=>{let i=!0;"function"===typeof e.props?i=e.props((0,De.A)({ownerState:n},r,n)):Object.keys(e.props).forEach((t=>{(null==n?void 0:n[t])!==e.props[t]&&r[t]!==e.props[t]&&(i=!1)})),i&&(Array.isArray(t)||(t=[t]),t.push("function"===typeof e.style?e.style((0,De.A)({ownerState:n},r,n)):e.style))})),t}return i}const QL=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{themeId:t,defaultTheme:n=HL,rootShouldForwardProp:r=zL,slotShouldForwardProp:i=zL}=e,a=e=>(0,Ne.A)((0,De.A)({},e,{theme:GL((0,De.A)({},e,{defaultTheme:n,themeId:t}))}));return a.__mui_systemSx=!0,function(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,Me.internal_processStyles)(e,(e=>e.filter((e=>!(null!=e&&e.__mui_systemSx)))));const{name:s,slot:l,skipVariantsResolver:c,skipSx:u,overridesResolver:d=KL(qL(l))}=o,h=(0,Le.A)(o,WL),p=void 0!==c?c:l&&"Root"!==l&&"root"!==l||!1,f=u||!1;let m=zL;"Root"===l||"root"===l?m=r:l?m=i:function(e){return"string"===typeof e&&e.charCodeAt(0)>96}(e)&&(m=void 0);const g=(0,Me.default)(e,(0,De.A)({shouldForwardProp:m,label:undefined},h)),v=e=>"function"===typeof e&&e.__emotion_real!==e||(0,wR.Q)(e)?r=>YL(e,(0,De.A)({},r,{theme:GL({theme:r.theme,defaultTheme:n,themeId:t})})):e,y=function(r){let i=v(r);for(var o=arguments.length,l=new Array(o>1?o-1:0),c=1;c<o;c++)l[c-1]=arguments[c];const u=l?l.map(v):[];s&&d&&u.push((e=>{const r=GL((0,De.A)({},e,{defaultTheme:n,themeId:t}));if(!r.components||!r.components[s]||!r.components[s].styleOverrides)return null;const i=r.components[s].styleOverrides,a={};return Object.entries(i).forEach((t=>{let[n,i]=t;a[n]=YL(i,(0,De.A)({},e,{theme:r}))})),d(e,a)})),s&&!p&&u.push((e=>{var r;const i=GL((0,De.A)({},e,{defaultTheme:n,themeId:t}));return YL({variants:null==i||null==(r=i.components)||null==(r=r[s])?void 0:r.variants},(0,De.A)({},e,{theme:i}))})),f||u.push(a);const h=u.length-l.length;if(Array.isArray(r)&&h>0){const e=new Array(h).fill("");i=[...r,...e],i.raw=[...r.raw,...e]}const m=g(i,...u);return e.muiName&&(m.muiName=e.muiName),m};return g.withConfig&&(y.withConfig=g.withConfig),y}}(),XL=QL,ZL=["className","component","disableGutters","fixed","maxWidth","classes"],JL=(0,je.A)(),eP=XL("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`maxWidth${(0,FL.A)(String(n.maxWidth))}`],n.fixed&&t.fixed,n.disableGutters&&t.disableGutters]}}),tP=e=>BL({props:e,name:"MuiContainer",defaultTheme:JL});const nP=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{createStyledComponent:n=eP,useThemeProps:r=tP,componentName:i="MuiContainer"}=e,a=n((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",display:"block"},!n.disableGutters&&{paddingLeft:t.spacing(2),paddingRight:t.spacing(2),[t.breakpoints.up("sm")]:{paddingLeft:t.spacing(3),paddingRight:t.spacing(3)}})}),(e=>{let{theme:t,ownerState:n}=e;return n.fixed&&Object.keys(t.breakpoints.values).reduce(((e,n)=>{const r=n,i=t.breakpoints.values[r];return 0!==i&&(e[t.breakpoints.up(r)]={maxWidth:`${i}${t.breakpoints.unit}`}),e}),{})}),(e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({},"xs"===n.maxWidth&&{[t.breakpoints.up("xs")]:{maxWidth:Math.max(t.breakpoints.values.xs,444)}},n.maxWidth&&"xs"!==n.maxWidth&&{[t.breakpoints.up(n.maxWidth)]:{maxWidth:`${t.breakpoints.values[n.maxWidth]}${t.breakpoints.unit}`}})})),o=t.forwardRef((function(e,t){const n=r(e),{className:o,component:s="div",disableGutters:l=!1,fixed:c=!1,maxWidth:u="lg"}=n,d=(0,Le.A)(n,ZL),h=(0,De.A)({},n,{component:s,disableGutters:l,fixed:c,maxWidth:u}),p=((e,t)=>{const{classes:n,fixed:r,disableGutters:i,maxWidth:a}=e,o={root:["root",a&&`maxWidth${(0,FL.A)(String(a))}`,r&&"fixed",i&&"disableGutters"]};return(0,yT.A)(o,(e=>(0,_T.Ay)(t,e)),n)})(h,i);return(0,Ve.jsx)(a,(0,De.A)({as:s,ownerState:h,className:(0,Pe.A)(p.root,o),ref:t},d))}));return o}({createStyledComponent:(0,bT.Ay)("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`maxWidth${(0,wT.A)(String(n.maxWidth))}`],n.fixed&&t.fixed,n.disableGutters&&t.disableGutters]}}),useThemeProps:e=>(0,Ze.b)({props:e,name:"MuiContainer"})}),rP=nP;let iP;function aP(){if(iP)return iP;const e=document.createElement("div"),t=document.createElement("div");return t.style.width="10px",t.style.height="1px",e.appendChild(t),e.dir="rtl",e.style.fontSize="14px",e.style.width="4px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.overflow="scroll",document.body.appendChild(e),iP="reverse",e.scrollLeft>0?iP="default":(e.scrollLeft=1,0===e.scrollLeft&&(iP="negative")),document.body.removeChild(e),iP}function oP(e,t){const n=e.scrollLeft;if("rtl"!==t)return n;switch(aP()){case"negative":return e.scrollWidth-e.clientWidth+n;case"reverse":return e.scrollWidth-e.clientWidth-n;default:return n}}function sP(e){return(1+Math.sin(Math.PI*e-Math.PI/2))/2}const lP=["onChange"],cP={width:99,height:99,position:"absolute",top:-9999,overflow:"scroll"};const uP=(0,BT.A)((0,Ve.jsx)("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"}),"KeyboardArrowLeft"),dP=(0,BT.A)((0,Ve.jsx)("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}),"KeyboardArrowRight");function hP(e){return(0,_T.Ay)("MuiTabScrollButton",e)}const pP=(0,Ge.A)("MuiTabScrollButton",["root","vertical","horizontal","disabled"]),fP=["className","slots","slotProps","direction","orientation","disabled"],mP=(0,bT.Ay)(KS,{name:"MuiTabScrollButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.orientation&&t[n.orientation]]}})((e=>{let{ownerState:t}=e;return(0,De.A)({width:40,flexShrink:0,opacity:.8,[`&.${pP.disabled}`]:{opacity:0}},"vertical"===t.orientation&&{width:"100%",height:40,"& svg":{transform:`rotate(${t.isRtl?-90:90}deg)`}})})),gP=t.forwardRef((function(e,t){var n,r;const i=(0,Ze.b)({props:e,name:"MuiTabScrollButton"}),{className:a,slots:o={},slotProps:s={},direction:l}=i,c=(0,Le.A)(i,fP),u=lT(),d=(0,De.A)({isRtl:u},i),h=(e=>{const{classes:t,orientation:n,disabled:r}=e,i={root:["root",n,r&&"disabled"]};return(0,yT.A)(i,hP,t)})(d),p=null!=(n=o.StartScrollButtonIcon)?n:uP,f=null!=(r=o.EndScrollButtonIcon)?r:dP,m=rk({elementType:p,externalSlotProps:s.startScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:d}),g=rk({elementType:f,externalSlotProps:s.endScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:d});return(0,Ve.jsx)(mP,(0,De.A)({component:"div",className:(0,Pe.A)(h.root,a),ref:t,role:null,ownerState:d,tabIndex:null},c,{children:"left"===l?(0,Ve.jsx)(p,(0,De.A)({},m)):(0,Ve.jsx)(f,(0,De.A)({},g))}))})),vP=gP;function yP(e){return(0,_T.Ay)("MuiTabs",e)}const bP=(0,Ge.A)("MuiTabs",["root","vertical","flexContainer","flexContainerVertical","centered","scroller","fixed","scrollableX","scrollableY","hideScrollbar","scrollButtons","scrollButtonsHideMobile","indicator"]),wP=["aria-label","aria-labelledby","action","centered","children","className","component","allowScrollButtonsMobile","indicatorColor","onChange","orientation","ScrollButtonComponent","scrollButtons","selectionFollowsFocus","slots","slotProps","TabIndicatorProps","TabScrollButtonProps","textColor","value","variant","visibleScrollbar"],EP=(e,t)=>e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:e.firstChild,xP=(e,t)=>e===t?e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:e.lastChild,_P=(e,t,n)=>{let r=!1,i=n(e,t);for(;i;){if(i===e.firstChild){if(r)return;r=!0}const t=i.disabled||"true"===i.getAttribute("aria-disabled");if(i.hasAttribute("tabindex")&&!t)return void i.focus();i=n(e,i)}},AP=(0,bT.Ay)("div",{name:"MuiTabs",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${bP.scrollButtons}`]:t.scrollButtons},{[`& .${bP.scrollButtons}`]:n.scrollButtonsHideMobile&&t.scrollButtonsHideMobile},t.root,n.vertical&&t.vertical]}})((e=>{let{ownerState:t,theme:n}=e;return(0,De.A)({overflow:"hidden",minHeight:48,WebkitOverflowScrolling:"touch",display:"flex"},t.vertical&&{flexDirection:"column"},t.scrollButtonsHideMobile&&{[`& .${bP.scrollButtons}`]:{[n.breakpoints.down("sm")]:{display:"none"}}})})),TP=(0,bT.Ay)("div",{name:"MuiTabs",slot:"Scroller",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.scroller,n.fixed&&t.fixed,n.hideScrollbar&&t.hideScrollbar,n.scrollableX&&t.scrollableX,n.scrollableY&&t.scrollableY]}})((e=>{let{ownerState:t}=e;return(0,De.A)({position:"relative",display:"inline-block",flex:"1 1 auto",whiteSpace:"nowrap"},t.fixed&&{overflowX:"hidden",width:"100%"},t.hideScrollbar&&{scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}},t.scrollableX&&{overflowX:"auto",overflowY:"hidden"},t.scrollableY&&{overflowY:"auto",overflowX:"hidden"})})),SP=(0,bT.Ay)("div",{name:"MuiTabs",slot:"FlexContainer",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.flexContainer,n.vertical&&t.flexContainerVertical,n.centered&&t.centered]}})((e=>{let{ownerState:t}=e;return(0,De.A)({display:"flex"},t.vertical&&{flexDirection:"column"},t.centered&&{justifyContent:"center"})})),kP=(0,bT.Ay)("span",{name:"MuiTabs",slot:"Indicator",overridesResolver:(e,t)=>t.indicator})((e=>{let{ownerState:t,theme:n}=e;return(0,De.A)({position:"absolute",height:2,bottom:0,width:"100%",transition:n.transitions.create()},"primary"===t.indicatorColor&&{backgroundColor:(n.vars||n).palette.primary.main},"secondary"===t.indicatorColor&&{backgroundColor:(n.vars||n).palette.secondary.main},t.vertical&&{height:"100%",width:2,right:0})})),CP=(0,bT.Ay)((function(e){const{onChange:n}=e,r=(0,Le.A)(e,lP),i=t.useRef(),a=t.useRef(null),o=()=>{i.current=a.current.offsetHeight-a.current.clientHeight};return(0,Mk.A)((()=>{const e=(0,Vk.A)((()=>{const e=i.current;o(),e!==i.current&&n(i.current)})),t=(0,Wk.A)(a.current);return t.addEventListener("resize",e),()=>{e.clear(),t.removeEventListener("resize",e)}}),[n]),t.useEffect((()=>{o(),n(i.current)}),[n]),(0,Ve.jsx)("div",(0,De.A)({style:cP},r,{ref:a}))}))({overflowX:"auto",overflowY:"hidden",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}),IP={};const RP=t.forwardRef((function(e,n){const r=(0,Ze.b)({props:e,name:"MuiTabs"}),i=tC(),a=lT(),{"aria-label":o,"aria-labelledby":s,action:l,centered:c=!1,children:u,className:d,component:h="div",allowScrollButtonsMobile:p=!1,indicatorColor:f="primary",onChange:m,orientation:g="horizontal",ScrollButtonComponent:v=vP,scrollButtons:y="auto",selectionFollowsFocus:b,slots:w={},slotProps:E={},TabIndicatorProps:x={},TabScrollButtonProps:_={},textColor:A="primary",value:T,variant:S="standard",visibleScrollbar:k=!1}=r,C=(0,Le.A)(r,wP),I="scrollable"===S,R="vertical"===g,D=R?"scrollTop":"scrollLeft",L=R?"top":"left",P=R?"bottom":"right",M=R?"clientHeight":"clientWidth",N=R?"height":"width",O=(0,De.A)({},r,{component:h,allowScrollButtonsMobile:p,indicatorColor:f,orientation:g,vertical:R,scrollButtons:y,textColor:A,variant:S,visibleScrollbar:k,fixed:!I,hideScrollbar:I&&!k,scrollableX:I&&!R,scrollableY:I&&R,centered:c&&!I,scrollButtonsHideMobile:!p}),j=(e=>{const{vertical:t,fixed:n,hideScrollbar:r,scrollableX:i,scrollableY:a,centered:o,scrollButtonsHideMobile:s,classes:l}=e,c={root:["root",t&&"vertical"],scroller:["scroller",n&&"fixed",r&&"hideScrollbar",i&&"scrollableX",a&&"scrollableY"],flexContainer:["flexContainer",t&&"flexContainerVertical",o&&"centered"],indicator:["indicator"],scrollButtons:["scrollButtons",s&&"scrollButtonsHideMobile"],scrollableX:[i&&"scrollableX"],hideScrollbar:[r&&"hideScrollbar"]};return(0,yT.A)(c,yP,l)})(O),F=rk({elementType:w.StartScrollButtonIcon,externalSlotProps:E.startScrollButtonIcon,ownerState:O}),U=rk({elementType:w.EndScrollButtonIcon,externalSlotProps:E.endScrollButtonIcon,ownerState:O});const[B,$]=t.useState(!1),[V,W]=t.useState(IP),[z,H]=t.useState(!1),[q,G]=t.useState(!1),[K,Y]=t.useState(!1),[Q,X]=t.useState({overflow:"hidden",scrollbarWidth:0}),Z=new Map,J=t.useRef(null),ee=t.useRef(null),te=()=>{const e=J.current;let t,n;if(e){const n=e.getBoundingClientRect();t={clientWidth:e.clientWidth,scrollLeft:e.scrollLeft,scrollTop:e.scrollTop,scrollLeftNormalized:oP(e,a?"rtl":"ltr"),scrollWidth:e.scrollWidth,top:n.top,bottom:n.bottom,left:n.left,right:n.right}}if(e&&!1!==T){const e=ee.current.children;if(e.length>0){const t=e[Z.get(T)];0,n=t?t.getBoundingClientRect():null}}return{tabsMeta:t,tabMeta:n}},ne=(0,fS.A)((()=>{const{tabsMeta:e,tabMeta:t}=te();let n,r=0;if(R)n="top",t&&e&&(r=t.top-e.top+e.scrollTop);else if(n=a?"right":"left",t&&e){const i=a?e.scrollLeftNormalized+e.clientWidth-e.scrollWidth:e.scrollLeft;r=(a?-1:1)*(t[n]-e[n]+i)}const i={[n]:r,[N]:t?t[N]:0};if(isNaN(V[n])||isNaN(V[N]))W(i);else{const e=Math.abs(V[n]-i[n]),t=Math.abs(V[N]-i[N]);(e>=1||t>=1)&&W(i)}})),re=function(e){let{animation:t=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t?function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:()=>{};const{ease:a=sP,duration:o=300}=r;let s=null;const l=t[e];let c=!1;const u=()=>{c=!0},d=r=>{if(c)return void i(new Error("Animation cancelled"));null===s&&(s=r);const u=Math.min(1,(r-s)/o);t[e]=a(u)*(n-l)+l,u>=1?requestAnimationFrame((()=>{i(null)})):requestAnimationFrame(d)};l===n?i(new Error("Element already at target position")):requestAnimationFrame(d)}(D,J.current,e,{duration:i.transitions.duration.standard}):J.current[D]=e},ie=e=>{let t=J.current[D];R?t+=e:(t+=e*(a?-1:1),t*=a&&"reverse"===aP()?-1:1),re(t)},ae=()=>{const e=J.current[M];let t=0;const n=Array.from(ee.current.children);for(let r=0;r<n.length;r+=1){const i=n[r];if(t+i[M]>e){0===r&&(t=e);break}t+=i[M]}return t},oe=()=>{ie(-1*ae())},se=()=>{ie(ae())},le=t.useCallback((e=>{X({overflow:null,scrollbarWidth:e})}),[]),ce=(0,fS.A)((e=>{const{tabsMeta:t,tabMeta:n}=te();if(n&&t)if(n[L]<t[L]){const r=t[D]+(n[L]-t[L]);re(r,{animation:e})}else if(n[P]>t[P]){const r=t[D]+(n[P]-t[P]);re(r,{animation:e})}})),ue=(0,fS.A)((()=>{I&&!1!==y&&Y(!K)}));t.useEffect((()=>{const e=(0,Vk.A)((()=>{J.current&&ne()}));let t;const n=n=>{n.forEach((e=>{e.removedNodes.forEach((e=>{var n;null==(n=t)||n.unobserve(e)})),e.addedNodes.forEach((e=>{var n;null==(n=t)||n.observe(e)}))})),e(),ue()},r=(0,Wk.A)(J.current);let i;return r.addEventListener("resize",e),"undefined"!==typeof ResizeObserver&&(t=new ResizeObserver(e),Array.from(ee.current.children).forEach((e=>{t.observe(e)}))),"undefined"!==typeof MutationObserver&&(i=new MutationObserver(n),i.observe(ee.current,{childList:!0})),()=>{var n,a;e.clear(),r.removeEventListener("resize",e),null==(n=i)||n.disconnect(),null==(a=t)||a.disconnect()}}),[ne,ue]),t.useEffect((()=>{const e=Array.from(ee.current.children),t=e.length;if("undefined"!==typeof IntersectionObserver&&t>0&&I&&!1!==y){const n=e[0],r=e[t-1],i={root:J.current,threshold:.99},a=new IntersectionObserver((e=>{H(!e[0].isIntersecting)}),i);a.observe(n);const o=new IntersectionObserver((e=>{G(!e[0].isIntersecting)}),i);return o.observe(r),()=>{a.disconnect(),o.disconnect()}}}),[I,y,K,null==u?void 0:u.length]),t.useEffect((()=>{$(!0)}),[]),t.useEffect((()=>{ne()})),t.useEffect((()=>{ce(IP!==V)}),[ce,V]),t.useImperativeHandle(l,(()=>({updateIndicator:ne,updateScrollButtons:ue})),[ne,ue]);const de=(0,Ve.jsx)(kP,(0,De.A)({},x,{className:(0,Pe.A)(j.indicator,x.className),ownerState:O,style:(0,De.A)({},V,x.style)}));let he=0;const pe=t.Children.map(u,(e=>{if(!t.isValidElement(e))return null;const n=void 0===e.props.value?he:e.props.value;Z.set(n,he);const r=n===T;return he+=1,t.cloneElement(e,(0,De.A)({fullWidth:"fullWidth"===S,indicator:r&&!B&&de,selected:r,selectionFollowsFocus:b,onChange:m,textColor:A,value:n},1!==he||!1!==T||e.props.tabIndex?{}:{tabIndex:0}))})),fe=(()=>{const e={};e.scrollbarSizeListener=I?(0,Ve.jsx)(CP,{onChange:le,className:(0,Pe.A)(j.scrollableX,j.hideScrollbar)}):null;const t=I&&("auto"===y&&(z||q)||!0===y);return e.scrollButtonStart=t?(0,Ve.jsx)(v,(0,De.A)({slots:{StartScrollButtonIcon:w.StartScrollButtonIcon},slotProps:{startScrollButtonIcon:F},orientation:g,direction:a?"right":"left",onClick:oe,disabled:!z},_,{className:(0,Pe.A)(j.scrollButtons,_.className)})):null,e.scrollButtonEnd=t?(0,Ve.jsx)(v,(0,De.A)({slots:{EndScrollButtonIcon:w.EndScrollButtonIcon},slotProps:{endScrollButtonIcon:U},orientation:g,direction:a?"left":"right",onClick:se,disabled:!q},_,{className:(0,Pe.A)(j.scrollButtons,_.className)})):null,e})();return(0,Ve.jsxs)(AP,(0,De.A)({className:(0,Pe.A)(j.root,d),ownerState:O,ref:n,as:h},C,{children:[fe.scrollButtonStart,fe.scrollbarSizeListener,(0,Ve.jsxs)(TP,{className:j.scroller,ownerState:O,style:{overflow:Q.overflow,[R?"margin"+(a?"Left":"Right"):"marginBottom"]:k?void 0:-Q.scrollbarWidth},ref:J,children:[(0,Ve.jsx)(SP,{"aria-label":o,"aria-labelledby":s,"aria-orientation":"vertical"===g?"vertical":null,className:j.flexContainer,ownerState:O,onKeyDown:e=>{const t=ee.current,n=(0,Tk.A)(t).activeElement;if("tab"!==n.getAttribute("role"))return;let r="horizontal"===g?"ArrowLeft":"ArrowUp",i="horizontal"===g?"ArrowRight":"ArrowDown";switch("horizontal"===g&&a&&(r="ArrowRight",i="ArrowLeft"),e.key){case r:e.preventDefault(),_P(t,n,xP);break;case i:e.preventDefault(),_P(t,n,EP);break;case"Home":e.preventDefault(),_P(t,null,EP);break;case"End":e.preventDefault(),_P(t,null,xP)}},ref:ee,role:"tablist",children:pe}),B&&de]}),fe.scrollButtonEnd]}))})),DP=RP;function LP(e){return(0,_T.Ay)("MuiTab",e)}const PP=(0,Ge.A)("MuiTab",["root","labelIcon","textColorInherit","textColorPrimary","textColorSecondary","selected","disabled","fullWidth","wrapped","iconWrapper"]),MP=["className","disabled","disableFocusRipple","fullWidth","icon","iconPosition","indicator","label","onChange","onClick","onFocus","selected","selectionFollowsFocus","textColor","value","wrapped"],NP=(0,bT.Ay)(KS,{name:"MuiTab",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.label&&n.icon&&t.labelIcon,t[`textColor${(0,wT.A)(n.textColor)}`],n.fullWidth&&t.fullWidth,n.wrapped&&t.wrapped,{[`& .${PP.iconWrapper}`]:t.iconWrapper}]}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({},t.typography.button,{maxWidth:360,minWidth:90,position:"relative",minHeight:48,flexShrink:0,padding:"12px 16px",overflow:"hidden",whiteSpace:"normal",textAlign:"center"},n.label&&{flexDirection:"top"===n.iconPosition||"bottom"===n.iconPosition?"column":"row"},{lineHeight:1.25},n.icon&&n.label&&{minHeight:72,paddingTop:9,paddingBottom:9,[`& > .${PP.iconWrapper}`]:(0,De.A)({},"top"===n.iconPosition&&{marginBottom:6},"bottom"===n.iconPosition&&{marginTop:6},"start"===n.iconPosition&&{marginRight:t.spacing(1)},"end"===n.iconPosition&&{marginLeft:t.spacing(1)})},"inherit"===n.textColor&&{color:"inherit",opacity:.6,[`&.${PP.selected}`]:{opacity:1},[`&.${PP.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity}},"primary"===n.textColor&&{color:(t.vars||t).palette.text.secondary,[`&.${PP.selected}`]:{color:(t.vars||t).palette.primary.main},[`&.${PP.disabled}`]:{color:(t.vars||t).palette.text.disabled}},"secondary"===n.textColor&&{color:(t.vars||t).palette.text.secondary,[`&.${PP.selected}`]:{color:(t.vars||t).palette.secondary.main},[`&.${PP.disabled}`]:{color:(t.vars||t).palette.text.disabled}},n.fullWidth&&{flexShrink:1,flexGrow:1,flexBasis:0,maxWidth:"none"},n.wrapped&&{fontSize:t.typography.pxToRem(12)})})),OP=t.forwardRef((function(e,n){const r=(0,Ze.b)({props:e,name:"MuiTab"}),{className:i,disabled:a=!1,disableFocusRipple:o=!1,fullWidth:s,icon:l,iconPosition:c="top",indicator:u,label:d,onChange:h,onClick:p,onFocus:f,selected:m,selectionFollowsFocus:g,textColor:v="inherit",value:y,wrapped:b=!1}=r,w=(0,Le.A)(r,MP),E=(0,De.A)({},r,{disabled:a,disableFocusRipple:o,selected:m,icon:!!l,iconPosition:c,label:!!d,fullWidth:s,textColor:v,wrapped:b}),x=(e=>{const{classes:t,textColor:n,fullWidth:r,wrapped:i,icon:a,label:o,selected:s,disabled:l}=e,c={root:["root",a&&o&&"labelIcon",`textColor${(0,wT.A)(n)}`,r&&"fullWidth",i&&"wrapped",s&&"selected",l&&"disabled"],iconWrapper:["iconWrapper"]};return(0,yT.A)(c,LP,t)})(E),_=l&&d&&t.isValidElement(l)?t.cloneElement(l,{className:(0,Pe.A)(x.iconWrapper,l.props.className)}):l;return(0,Ve.jsxs)(NP,(0,De.A)({focusRipple:!o,className:(0,Pe.A)(x.root,i),ref:n,role:"tab","aria-selected":m,disabled:a,onClick:e=>{!m&&h&&h(e,y),p&&p(e)},onFocus:e=>{g&&!m&&h&&h(e,y),f&&f(e)},ownerState:E,tabIndex:m?0:-1},w,{children:["top"===c||"start"===c?(0,Ve.jsxs)(t.Fragment,{children:[_,d]}):(0,Ve.jsxs)(t.Fragment,{children:[d,_]}),u]}))})),jP=OP,FP=(0,t.createContext)({db:null,loading:!1,error:null}),UP=()=>{const e=(0,t.useContext)(FP);if(void 0===e)throw new Error("useFirestore must be used within a FirestoreProvider");return null===e.db&&console.warn("useFirestore called before db was initialized or initialization failed"),e},BP=e=>{let{children:t}=e;const n={db:q_,loading:!1,error:null};return(0,Ve.jsx)(FP.Provider,{value:n,children:t})};var $P={};function VP(){return $P}function WP(e){return WP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},WP(e)}function zP(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function HP(e){zP(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===WP(e)&&"[object Date]"===t?new Date(e.getTime()):"number"===typeof e||"[object Number]"===t?new Date(e):("string"!==typeof e&&"[object String]"!==t||"undefined"===typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}function qP(e,t){zP(2,arguments);var n=HP(e),r=HP(t),i=n.getTime()-r.getTime();return i<0?-1:i>0?1:i}function GP(e){zP(1,arguments);var t=HP(e);return t.setHours(23,59,59,999),t}function KP(e){zP(1,arguments);var t=HP(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function YP(e,t){zP(2,arguments);var n,r=HP(e),i=HP(t),a=qP(r,i),o=Math.abs(function(e,t){zP(2,arguments);var n=HP(e),r=HP(t);return 12*(n.getFullYear()-r.getFullYear())+(n.getMonth()-r.getMonth())}(r,i));if(o<1)n=0;else{1===r.getMonth()&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-a*o);var s=qP(r,i)===-a;(function(e){zP(1,arguments);var t=HP(e);return GP(t).getTime()===KP(t).getTime()})(HP(e))&&1===o&&1===qP(e,i)&&(s=!1),n=a*(o-Number(s))}return 0===n?0:n}function QP(e,t){return zP(2,arguments),HP(e).getTime()-HP(t).getTime()}var XP={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(e){return e<0?Math.ceil(e):Math.floor(e)}};function ZP(e){return e?XP[e]:XP.trunc}function JP(e,t,n){zP(2,arguments);var r=QP(e,t)/1e3;return ZP(null===n||void 0===n?void 0:n.roundingMethod)(r)}var eM={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};const tM=function(e,t,n){var r,i=eM[e];return r="string"===typeof i?i:1===t?i.one:i.other.replace("{{count}}",t.toString()),null!==n&&void 0!==n&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function nM(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}var rM={date:nM({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:nM({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:nM({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})};var iM={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function aM(e){return function(t,n){var r;if("formatting"===(null!==n&&void 0!==n&&n.context?String(n.context):"standalone")&&e.formattingValues){var i=e.defaultFormattingWidth||e.defaultWidth,a=null!==n&&void 0!==n&&n.width?String(n.width):i;r=e.formattingValues[a]||e.formattingValues[i]}else{var o=e.defaultWidth,s=null!==n&&void 0!==n&&n.width?String(n.width):e.defaultWidth;r=e.values[s]||e.values[o]}return r[e.argumentCallback?e.argumentCallback(t):t]}}function oM(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.width,i=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],a=t.match(i);if(!a)return null;var o,s=a[0],l=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n;return}(l,(function(e){return e.test(s)})):function(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return n;return}(l,(function(e){return e.test(s)}));return o=e.valueCallback?e.valueCallback(c):c,{value:o=n.valueCallback?n.valueCallback(o):o,rest:t.slice(s.length)}}}var sM;const lM={code:"en-US",formatDistance:tM,formatLong:rM,formatRelative:function(e,t,n,r){return iM[e]},localize:{ordinalNumber:function(e,t){var n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:aM({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:aM({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:aM({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:aM({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:aM({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(sM={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.match(sM.matchPattern);if(!n)return null;var r=n[0],i=e.match(sM.parsePattern);if(!i)return null;var a=sM.valueCallback?sM.valueCallback(i[0]):i[0];return{value:a=t.valueCallback?t.valueCallback(a):a,rest:e.slice(r.length)}}),era:oM({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:oM({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:oM({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:oM({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:oM({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}},cM=lM;function uM(e,t){if(null==e)throw new TypeError("assign requires that input parameter not be null or undefined");for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}function dM(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}var hM=43200;function pM(e,t,n){var r,i;zP(2,arguments);var a=VP(),o=null!==(r=null!==(i=null===n||void 0===n?void 0:n.locale)&&void 0!==i?i:a.locale)&&void 0!==r?r:cM;if(!o.formatDistance)throw new RangeError("locale must contain formatDistance property");var s=qP(e,t);if(isNaN(s))throw new RangeError("Invalid time value");var l,c,u=uM(uM({},n),{addSuffix:Boolean(null===n||void 0===n?void 0:n.addSuffix),comparison:s});s>0?(l=HP(t),c=HP(e)):(l=HP(e),c=HP(t));var d,h=JP(c,l),p=(dM(c)-dM(l))/1e3,f=Math.round((h-p)/60);if(f<2)return null!==n&&void 0!==n&&n.includeSeconds?h<5?o.formatDistance("lessThanXSeconds",5,u):h<10?o.formatDistance("lessThanXSeconds",10,u):h<20?o.formatDistance("lessThanXSeconds",20,u):h<40?o.formatDistance("halfAMinute",0,u):h<60?o.formatDistance("lessThanXMinutes",1,u):o.formatDistance("xMinutes",1,u):0===f?o.formatDistance("lessThanXMinutes",1,u):o.formatDistance("xMinutes",f,u);if(f<45)return o.formatDistance("xMinutes",f,u);if(f<90)return o.formatDistance("aboutXHours",1,u);if(f<1440){var m=Math.round(f/60);return o.formatDistance("aboutXHours",m,u)}if(f<2520)return o.formatDistance("xDays",1,u);if(f<hM){var g=Math.round(f/1440);return o.formatDistance("xDays",g,u)}if(f<86400)return d=Math.round(f/hM),o.formatDistance("aboutXMonths",d,u);if((d=YP(c,l))<12){var v=Math.round(f/hM);return o.formatDistance("xMonths",v,u)}var y=d%12,b=Math.floor(d/12);return y<3?o.formatDistance("aboutXYears",b,u):y<9?o.formatDistance("overXYears",b,u):o.formatDistance("almostXYears",b+1,u)}function fM(e,t){return zP(1,arguments),pM(e,Date.now(),t)}const mM=e=>{try{return fM(e)}catch(Rb){return e instanceof Date?e.toLocaleString():new Date(e).toLocaleString()}},gM=e=>{if(!e)return"";try{return e.toDate?mM(e.toDate()):e instanceof Date?mM(e):mM(new Date(e))}catch(Rb){return console.error("Error formatting timestamp:",Rb),""}};var vM=n(2183),yM=n(6832),bM=n(8154),wM=n(6319),EM=n(9693),xM=n(4453),_M=n(7988);const AM=["addEndListener","appear","children","container","direction","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function TM(e,t,n){var r;const i=function(e,t,n){const r=t.getBoundingClientRect(),i=n&&n.getBoundingClientRect(),a=(0,Wk.A)(t);let o;if(t.fakeTransform)o=t.fakeTransform;else{const e=a.getComputedStyle(t);o=e.getPropertyValue("-webkit-transform")||e.getPropertyValue("transform")}let s=0,l=0;if(o&&"none"!==o&&"string"===typeof o){const e=o.split("(")[1].split(")")[0].split(",");s=parseInt(e[4],10),l=parseInt(e[5],10)}return"left"===e?i?`translateX(${i.right+s-r.left}px)`:`translateX(${a.innerWidth+s-r.left}px)`:"right"===e?i?`translateX(-${r.right-i.left-s}px)`:`translateX(-${r.left+r.width-s}px)`:"up"===e?i?`translateY(${i.bottom+l-r.top}px)`:`translateY(${a.innerHeight+l-r.top}px)`:i?`translateY(-${r.top-i.top+r.height-l}px)`:`translateY(-${r.top+r.height-l}px)`}(e,t,"function"===typeof(r=n)?r():r);i&&(t.style.webkitTransform=i,t.style.transform=i)}const SM=t.forwardRef((function(e,n){const r=tC(),i={enter:r.transitions.easing.easeOut,exit:r.transitions.easing.sharp},a={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:o,appear:s=!0,children:l,container:c,direction:u="down",easing:d=i,in:h,onEnter:p,onEntered:f,onEntering:m,onExit:g,onExited:v,onExiting:y,style:b,timeout:w=a,TransitionComponent:E=eC}=e,x=(0,Le.A)(e,AM),_=t.useRef(null),A=(0,pS.A)(zk(l),_,n),T=e=>t=>{e&&(void 0===t?e(_.current):e(_.current,t))},S=T(((e,t)=>{TM(u,e,c),nC(e),p&&p(e,t)})),k=T(((e,t)=>{const n=rC({timeout:w,style:b,easing:d},{mode:"enter"});e.style.webkitTransition=r.transitions.create("-webkit-transform",(0,De.A)({},n)),e.style.transition=r.transitions.create("transform",(0,De.A)({},n)),e.style.webkitTransform="none",e.style.transform="none",m&&m(e,t)})),C=T(f),I=T(y),R=T((e=>{const t=rC({timeout:w,style:b,easing:d},{mode:"exit"});e.style.webkitTransition=r.transitions.create("-webkit-transform",t),e.style.transition=r.transitions.create("transform",t),TM(u,e,c),g&&g(e)})),D=T((e=>{e.style.webkitTransition="",e.style.transition="",v&&v(e)})),L=t.useCallback((()=>{_.current&&TM(u,_.current,c)}),[u,c]);return t.useEffect((()=>{if(h||"down"===u||"right"===u)return;const e=(0,Vk.A)((()=>{_.current&&TM(u,_.current,c)})),t=(0,Wk.A)(_.current);return t.addEventListener("resize",e),()=>{e.clear(),t.removeEventListener("resize",e)}}),[u,h,c]),t.useEffect((()=>{h||L()}),[h,L]),(0,Ve.jsx)(E,(0,De.A)({nodeRef:_,onEnter:S,onEntered:C,onEntering:k,onExit:R,onExited:D,onExiting:I,addEndListener:e=>{o&&o(_.current,e)},appear:s,in:h,timeout:w},x,{children:(e,n)=>t.cloneElement(l,(0,De.A)({ref:A,style:(0,De.A)({visibility:"exited"!==e||h?void 0:"hidden"},b,l.props.style)},n))}))})),kM=SM,CM=t.forwardRef((function(e,t){return(0,Ve.jsx)(kM,{direction:"up",ref:t,...e})}));function IM(e){const{children:t,value:n,index:r,...i}=e;return(0,Ve.jsx)("div",{role:"tabpanel",hidden:n!==r,id:`feed-tabpanel-${r}`,"aria-labelledby":`feed-tab-${r}`,...i,children:n===r&&(0,Ve.jsx)(Xe,{sx:{py:3},children:t})})}const RM=()=>{const{currentUser:e,loading:n}=XA(),{db:r}=UP(),[i,a]=(Z(),(0,t.useState)([])),[o,s]=(0,t.useState)([]),[l,c]=(0,t.useState)(!0),[u,d]=(0,t.useState)(null),[h,p]=(0,t.useState)([]),[f,m]=(0,t.useState)(null),[g,v]=(0,t.useState)(!1),[y,b]=(0,t.useState)(null),[w,E]=(0,t.useState)(!1),[x,_]=(0,t.useState)(""),A=(0,t.useRef)(null),[T,S]=(0,t.useState)([]),[k,C]=(0,t.useState)(!1),[I,R]=(0,t.useState)(null),[D,L]=(0,t.useState)(null),P=Boolean(I),[M,N]=(0,t.useState)(!1),[O,j]=(0,t.useState)(!1),[F,U]=(0,t.useState)(0);(0,t.useEffect)((()=>{if(n||!e||!r)return;console.log("Feed: Auth finished, currentUser exists. Loading user profile...");(async()=>{try{const t=await lv(Jm(r,"users",e.uid));if(!t.exists())return d("User profile not found"),void c(!1);const n=t.data();m(n),p(n.connections||[]),v(!0),c(!1)}catch(u){console.error("Error loading user profile:",u),d("Failed to load user profile"),c(!1)}})()}),[e,r,n]),(0,t.useEffect)((()=>{if(!r||!e)return void c(!1);(async()=>{try{j(!0);const t=Zm(r,"users",e.uid,"following"),n=(await uv(t)).docs.map((e=>e.id)).filter(Boolean),i=[...n,e.uid].filter(Boolean);if(0===i.length)return a([]),c(!1),void j(!1);const o=mv(Wg(Zm(r,"posts"),Hg("authorId","in",i),Kg("timestamp","desc")),(e=>{const t=e.docs.map((e=>({id:e.id,...e.data()})));a(t),j(!1),c(!1)}));return()=>o()}catch(u){console.error("Error setting up posts listener:",u),d("Failed to load posts"),j(!1),c(!1)}})()}),[r,e]),(0,t.useEffect)((()=>{if(!r)return;(async()=>{try{j(!0);const e=mv(Wg(Zm(r,"posts"),Kg("timestamp","desc"),Qg(50)),(e=>{const t=e.docs.map((e=>({id:e.id,...e.data()})));s(t),j(!1)}));return()=>e()}catch(u){console.error("Error setting up discover posts listener:",u),d("Failed to load discover posts"),j(!1)}})()}),[r]);const B=async t=>{if(r&&e)try{var n;const i=Jm(r,"posts",t),a=await lv(i);if(!a.exists())throw new Error("Post not found");const o=a.data(),s=null===(n=o.likedBy)||void 0===n?void 0:n.includes(e.uid),l=o.likes||0;if(s)await hv(i,{likedBy:Sv(e.uid),likes:Math.max(0,l-1)});else if(await hv(i,{likedBy:Tv(e.uid),likes:l+1}),o.authorId!==e.uid){const n={type:"like",senderId:e.uid,senderName:e.displayName||"Anonymous",senderAvatar:e.photoURL||"",recipientId:o.authorId,postId:t,content:`${e.displayName||"Someone"} liked your post`,createdAt:Av(),isRead:!1};await fv(Zm(r,"users",o.authorId,"notifications"),n)}}catch(u){console.error("Error toggling like:",u),wA.error("Failed to update like")}},$=async t=>{if(!e||!r)return void wA.error("You must be logged in to repost");const n=i.find((e=>e.id===t));if(!n)return void wA.error("Post not found");const o=i.some((n=>n.isRepost&&n.id===t&&n.repostedById===e.uid));try{if(o)S((e=>[...e,{postId:t,added:!1}])),a((n=>n.map((e=>e.id!==t||e.isRepost?e:{...e,reposts:Math.max(0,(e.reposts||0)-1)})).filter((n=>!(n.isRepost&&n.id===t&&n.repostedById===e.uid))))),wA.success("Repost removed");else{if(S((e=>[...e,{postId:t,added:!0}])),a((r=>[{...n,timestamp:nl.now(),isRepost:!0,repostedById:e.uid,reposts:(n.reposts||0)+1},...r.map((e=>e.id!==t||e.isRepost?e:{...e,reposts:(e.reposts||0)+1}))])),n.authorId!==e.uid){const i={type:"repost",senderId:e.uid,senderName:e.displayName||"Anonymous",senderAvatar:e.photoURL||"",recipientId:n.authorId,postId:t,content:`${e.displayName||"Someone"} reposted your post`,createdAt:Av(),isRead:!1};await fv(Zm(r,"users",n.authorId,"notifications"),i)}wA.success("Post reposted!")}await z()}catch(u){console.error("Error handling repost:",u),wA.error("Failed to process repost. Changes will sync later.")}},V=()=>{R(null),L(null)},W=t=>{var n,r;return(0,Ve.jsxs)(rR,{divider:!0,sx:{cursor:"pointer","&:hover":{backgroundColor:"action.hover"},mb:2,borderRadius:2,backgroundColor:"background.paper",boxShadow:1},onClick:()=>{b(t),E(!0)},children:[t.isRepost&&(0,Ve.jsx)(Xe,{sx:{position:"absolute",top:-12,left:20,backgroundColor:"primary.main",color:"white",borderRadius:1,px:1,py:.5,fontSize:"0.75rem",zIndex:1},children:"Reposted"}),(0,Ve.jsx)(lR,{children:(0,Ve.jsx)(Ce,{to:`/profile/${t.authorId}`,style:{textDecoration:"none"},children:(0,Ve.jsx)(aS,{src:t.authorAvatar||void 0})})}),(0,Ve.jsx)(RI,{primary:(0,Ve.jsxs)(Xe,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,Ve.jsxs)(Xe,{children:[(0,Ve.jsx)(Ce,{to:`/profile/${t.authorId}`,style:{textDecoration:"none",color:"inherit"},children:(0,Ve.jsx)(hS,{variant:"subtitle1",component:"span",sx:{"&:hover":{textDecoration:"underline"}},children:t.authorName})}),(0,Ve.jsx)(hS,{variant:"body2",color:"text.secondary",component:"span",sx:{ml:1},children:gM(t.timestamp)}),!t.isRepost&&t.reposts>0&&(0,Ve.jsxs)(hS,{variant:"body2",color:"text.secondary",component:"span",sx:{ml:1},children:["\u2022 ",t.reposts," repost",1!==t.reposts?"s":""]})]}),t.authorId===(null===e||void 0===e?void 0:e.uid)&&(0,Ve.jsx)(ek,{size:"small",onClick:e=>{return n=e,r=t.id,n.stopPropagation(),R(n.currentTarget),void L(r);var n,r},children:(0,Ve.jsx)(xM.A,{})})]}),secondary:(0,Ve.jsxs)(Xe,{children:[(0,Ve.jsx)(hS,{variant:"body1",sx:{mt:1},children:t.content}),t.isEdited&&(0,Ve.jsx)(hS,{variant:"caption",color:"text.secondary",children:"(edited)"}),(0,Ve.jsxs)(Xe,{sx:{mt:2},children:[t.comments&&t.comments.length>0&&(0,Ve.jsxs)(Xe,{sx:{backgroundColor:"background.default",borderRadius:1,p:1,mt:1},children:[t.comments.slice(0,2).map(((e,t)=>(0,Ve.jsxs)(Xe,{sx:{mb:1},children:[(0,Ve.jsx)(hS,{variant:"subtitle2",component:"span",children:e.authorName}),(0,Ve.jsx)(hS,{variant:"body2",component:"span",sx:{ml:1},children:e.content})]},t))),t.comments.length>2&&(0,Ve.jsxs)(hS,{variant:"body2",color:"primary",sx:{cursor:"pointer"},onClick:e=>{e.stopPropagation(),b(t),E(!0)},children:["View all ",t.comments.length," comments"]})]}),(0,Ve.jsxs)(Xe,{sx:{display:"flex",gap:1,mt:2},children:[(0,Ve.jsxs)(ek,{edge:"end","aria-label":"likes",onClick:e=>{e.stopPropagation(),B(t.id)},children:[(0,Ve.jsx)(vM.A,{color:null!==(n=t.likedBy)&&void 0!==n&&n.includes((null===e||void 0===e?void 0:e.uid)||"")?"error":"inherit"}),(0,Ve.jsx)(hS,{variant:"body2",component:"span",sx:{ml:1},children:t.likes||0})]}),(0,Ve.jsxs)(ek,{edge:"end","aria-label":"repost",onClick:e=>{e.stopPropagation(),$(t.id)},children:[(0,Ve.jsx)(yM.A,{color:t.isRepost&&t.repostedById===(null===e||void 0===e?void 0:e.uid)?"primary":"inherit"}),(0,Ve.jsx)(hS,{variant:"body2",component:"span",sx:{ml:1},children:t.reposts||0})]}),(0,Ve.jsxs)(ek,{edge:"end","aria-label":"comment",onClick:e=>{e.stopPropagation(),b(t),E(!0)},children:[(0,Ve.jsx)(bM.A,{}),(0,Ve.jsx)(hS,{variant:"body2",component:"span",sx:{ml:1},children:(null===(r=t.comments)||void 0===r?void 0:r.length)||0})]})]})]})]})})]},`${t.id}-${t.isRepost?"repost":"post"}`)},z=async()=>{if(r&&e&&0!==T.length){C(!0);try{const t=Cv(r),n=Zm(r,"reposts");for(const r of T){const{postId:i,added:a}=r,o=Jm(n,`${e.uid}_${i}`);a?t.set(o,{originalPostId:i,userId:e.uid,timestamp:nl.now()}):t.delete(o)}await t.commit(),S([]),wA.success("Reposts synced successfully!")}catch(u){console.error("Error syncing reposts:",u),wA.error("Failed to sync reposts. Try again later.")}finally{C(!1)}}};return n?(0,Ve.jsx)(Xe,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:(0,Ve.jsx)(jL,{})}):e?u?(0,Ve.jsx)(Xe,{sx:{p:3,textAlign:"center"},children:(0,Ve.jsx)(hS,{color:"error",children:u})}):(0,Ve.jsxs)(rP,{maxWidth:"lg",children:[(0,Ve.jsxs)(Xe,{sx:{width:"100%"},children:[(0,Ve.jsx)(Xe,{sx:{borderBottom:0,position:"sticky",top:0,backgroundColor:"background.paper",zIndex:1e3,mb:2},children:(0,Ve.jsxs)(DP,{value:F,onChange:(e,t)=>{U(t)},variant:"fullWidth",sx:{"& .MuiTab-root":{fontWeight:"bold",fontSize:"1rem"}},children:[(0,Ve.jsx)(jP,{label:"Following"}),(0,Ve.jsx)(jP,{label:"Discover"})]})}),(0,Ve.jsx)(IM,{value:F,index:0,children:O?(0,Ve.jsx)(Xe,{sx:{display:"flex",justifyContent:"center",mt:4},children:(0,Ve.jsx)(jL,{})}):0===i.length?(0,Ve.jsx)(hS,{variant:"body1",color:"text.secondary",align:"center",children:"No posts yet. Follow some users to see their posts!"}):(0,Ve.jsx)(Dk,{children:i.map(W)})}),(0,Ve.jsx)(IM,{value:F,index:1,children:O?(0,Ve.jsx)(Xe,{sx:{display:"flex",justifyContent:"center",mt:4},children:(0,Ve.jsx)(jL,{})}):0===o.length?(0,Ve.jsx)(hS,{variant:"body1",color:"text.secondary",align:"center",children:"No posts to discover yet."}):(0,Ve.jsx)(Dk,{children:o.map(W)})})]}),(()=>{var t,n;return y?(0,Ve.jsxs)(bR,{fullScreen:!0,open:w,onClose:()=>E(!1),TransitionComponent:CM,children:[(0,Ve.jsx)(MT,{sx:{position:"relative"},children:(0,Ve.jsxs)(UT,{children:[(0,Ve.jsx)(ek,{edge:"start",color:"inherit",onClick:()=>E(!1),"aria-label":"close",children:(0,Ve.jsx)(wM.A,{})}),(0,Ve.jsx)(hS,{sx:{ml:2,flex:1},variant:"h6",component:"div",children:y.isRepost?"Reposted Post":"Post"})]})}),(0,Ve.jsxs)(Xe,{sx:{p:2},children:[(0,Ve.jsxs)(Xe,{sx:{display:"flex",alignItems:"center",mb:2},children:[(0,Ve.jsx)(Ce,{to:`/profile/${y.authorId}`,style:{textDecoration:"none"},children:(0,Ve.jsx)(aS,{src:y.authorAvatar||void 0,sx:{width:48,height:48,mr:2}})}),(0,Ve.jsxs)(Xe,{children:[(0,Ve.jsx)(Ce,{to:`/profile/${y.authorId}`,style:{textDecoration:"none",color:"inherit"},children:(0,Ve.jsx)(hS,{variant:"h6",sx:{"&:hover":{textDecoration:"underline"}},children:y.authorName})}),(0,Ve.jsx)(hS,{variant:"body2",color:"text.secondary",children:gM(y.timestamp)})]})]}),(0,Ve.jsx)(hS,{variant:"body1",sx:{mb:3},children:y.content}),y.imageUrl&&(0,Ve.jsx)(Xe,{sx:{mb:3,display:"flex",justifyContent:"center"},children:(0,Ve.jsx)("img",{src:y.imageUrl,alt:"Post attachment",style:{maxWidth:"100%",maxHeight:"400px",borderRadius:"8px"}})}),(0,Ve.jsxs)(Xe,{sx:{display:"flex",justifyContent:"space-between",mb:3},children:[(0,Ve.jsxs)(Ak,{startIcon:(0,Ve.jsx)(vM.A,{color:null!==(t=y.likedBy)&&void 0!==t&&t.includes((null===e||void 0===e?void 0:e.uid)||"")?"error":"inherit"}),onClick:()=>B(y.id),children:[y.likes||0," Likes"]}),(0,Ve.jsxs)(Ak,{startIcon:(0,Ve.jsx)(yM.A,{color:y.isRepost&&y.repostedById===(null===e||void 0===e?void 0:e.uid)?"primary":"inherit"}),onClick:()=>$(y.id),children:[y.reposts||0," Reposts"]}),(0,Ve.jsxs)(Ak,{startIcon:(0,Ve.jsx)(bM.A,{}),onClick:()=>{var e;return null===(e=A.current)||void 0===e?void 0:e.focus()},children:[(null===(n=y.comments)||void 0===n?void 0:n.length)||0," Comments"]})]}),(0,Ve.jsx)(NI,{sx:{mb:3}}),(0,Ve.jsx)(hS,{variant:"h6",sx:{mb:2},children:"Comments"}),y.comments&&y.comments.length>0?(0,Ve.jsx)(Dk,{children:y.comments.map(((e,t)=>(0,Ve.jsxs)(rR,{alignItems:"flex-start",divider:!0,children:[(0,Ve.jsx)(lR,{children:(0,Ve.jsx)(aS,{src:e.authorAvatar||void 0})}),(0,Ve.jsx)(RI,{primary:(0,Ve.jsxs)(Xe,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,Ve.jsx)(hS,{variant:"subtitle2",children:e.authorName}),(0,Ve.jsx)(hS,{variant:"caption",color:"text.secondary",children:e.timestamp?gM(e.timestamp)+" ago":""})]}),secondary:(0,Ve.jsx)(hS,{component:"span",variant:"body2",color:"text.primary",sx:{display:"inline",mt:1},children:e.content})})]},t)))}):(0,Ve.jsx)(hS,{color:"text.secondary",sx:{mb:2},children:"No comments yet. Be the first to comment!"}),(0,Ve.jsxs)(Xe,{sx:{position:"fixed",bottom:0,left:0,right:0,p:2,bgcolor:"background.paper",boxShadow:3,zIndex:10,display:"flex",gap:1},children:[(0,Ve.jsx)(xL,{fullWidth:!0,variant:"outlined",placeholder:"Add a comment...",value:x,onChange:e=>_(e.target.value),inputRef:A,InputProps:{sx:{borderRadius:4}}}),(0,Ve.jsx)(ek,{color:"primary",disabled:!x.trim(),onClick:()=>{x.trim()&&((async(t,n)=>{if(r&&e)try{const i=Jm(r,"posts",t),a=(await lv(i)).data(),o={content:n,authorId:e.uid,authorName:e.displayName||"Anonymous",authorAvatar:e.photoURL||"",timestamp:Av(),likes:0};if(await hv(i,{comments:Tv(o)}),a&&a.authorId!==e.uid){const i={type:"comment",senderId:e.uid,senderName:e.displayName||"Anonymous",senderAvatar:e.photoURL||"",recipientId:a.authorId,postId:t,content:`${e.displayName||"Someone"} commented on your post: "${n}"`,createdAt:Av(),isRead:!1};await fv(Zm(r,"users",a.authorId,"notifications"),i)}const s=n.match(/@(\w+)/g);if(s){const i=Array.from(new Set(s));for(const o of i){const i=o.slice(1),s=Wg(Zm(r,"users"),Hg("username","==",i),Qg(1)),l=await uv(s);if(!l.empty){const i=l.docs[0];if(a&&i.id!==e.uid&&i.id!==a.authorId){const a={type:"mention",senderId:e.uid,senderName:e.displayName||"Anonymous",senderAvatar:e.photoURL||"",recipientId:i.id,postId:t,content:`${e.displayName||"Someone"} mentioned you in a comment: "${n}"`,createdAt:Av(),isRead:!1};await fv(Zm(r,"users",i.id,"notifications"),a)}}}}}catch(u){console.error("Error adding comment:",u),d("Failed to add comment")}})(y.id,x.trim()),_(""))},children:(0,Ve.jsx)(EM.A,{})})]}),(0,Ve.jsx)(Xe,{sx:{height:"64px"}})]})]}):null})(),0===T.length?null:(0,Ve.jsx)(Xe,{sx:{position:"fixed",bottom:20,right:20,zIndex:1e3},children:(0,Ve.jsxs)(Ak,{variant:"contained",color:"primary",onClick:z,startIcon:(0,Ve.jsx)(yM.A,{}),children:["Sync ",T.length," Repost",1!==T.length?"s":""]})}),(0,Ve.jsx)(uI,{anchorEl:I,open:P,onClose:V,onClick:e=>e.stopPropagation(),children:(0,Ve.jsxs)(xI,{onClick:()=>{D&&(async t=>{if(r&&e)try{const n=Jm(r,"posts",t),i=await lv(n);if(i.exists()){const r=i.data();if(r.authorId!==e.uid)throw new Error("You can only delete your own posts");if(r.imageUrl)try{const e=cb(K_,r.imageUrl);await lb(e)}catch(u){console.error("Error deleting image:",u)}await pv(n),a((e=>e.filter((e=>e.id!==t)))),wA.success("Post deleted successfully")}}catch(u){console.error("Error deleting post:",u),d("Failed to delete post"),wA.error("Failed to delete post")}})(D),V()},children:[(0,Ve.jsx)(SI,{children:(0,Ve.jsx)(_M.A,{fontSize:"small"})}),"Delete Post"]})})]}):(0,Ve.jsx)(rP,{maxWidth:"md",children:(0,Ve.jsx)(Xe,{sx:{py:4,textAlign:"center"},children:(0,Ve.jsx)(hS,{variant:"h6",children:"Please sign in to view your feed"})})})};function DM(e){return(0,_T.Ay)("MuiAlert",e)}const LM=(0,Ge.A)("MuiAlert",["root","action","icon","message","filled","colorSuccess","colorInfo","colorWarning","colorError","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]),PM=(0,BT.A)((0,Ve.jsx)("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"}),"SuccessOutlined"),MM=(0,BT.A)((0,Ve.jsx)("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"}),"ReportProblemOutlined"),NM=(0,BT.A)((0,Ve.jsx)("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutline"),OM=(0,BT.A)((0,Ve.jsx)("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"}),"InfoOutlined"),jM=(0,BT.A)((0,Ve.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),FM=["action","children","className","closeText","color","components","componentsProps","icon","iconMapping","onClose","role","severity","slotProps","slots","variant"],UM=(0,bT.Ay)(CT,{name:"MuiAlert",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`${n.variant}${(0,wT.A)(n.color||n.severity)}`]]}})((e=>{let{theme:t}=e;const n="light"===t.palette.mode?ET.e$:ET.a,r="light"===t.palette.mode?ET.a:ET.e$;return(0,De.A)({},t.typography.body2,{backgroundColor:"transparent",display:"flex",padding:"6px 16px",variants:[...Object.entries(t.palette).filter((e=>{let[,t]=e;return t.main&&t.light})).map((e=>{let[i]=e;return{props:{colorSeverity:i,variant:"standard"},style:{color:t.vars?t.vars.palette.Alert[`${i}Color`]:n(t.palette[i].light,.6),backgroundColor:t.vars?t.vars.palette.Alert[`${i}StandardBg`]:r(t.palette[i].light,.9),[`& .${LM.icon}`]:t.vars?{color:t.vars.palette.Alert[`${i}IconColor`]}:{color:t.palette[i].main}}}})),...Object.entries(t.palette).filter((e=>{let[,t]=e;return t.main&&t.light})).map((e=>{let[r]=e;return{props:{colorSeverity:r,variant:"outlined"},style:{color:t.vars?t.vars.palette.Alert[`${r}Color`]:n(t.palette[r].light,.6),border:`1px solid ${(t.vars||t).palette[r].light}`,[`& .${LM.icon}`]:t.vars?{color:t.vars.palette.Alert[`${r}IconColor`]}:{color:t.palette[r].main}}}})),...Object.entries(t.palette).filter((e=>{let[,t]=e;return t.main&&t.dark})).map((e=>{let[n]=e;return{props:{colorSeverity:n,variant:"filled"},style:(0,De.A)({fontWeight:t.typography.fontWeightMedium},t.vars?{color:t.vars.palette.Alert[`${n}FilledColor`],backgroundColor:t.vars.palette.Alert[`${n}FilledBg`]}:{backgroundColor:"dark"===t.palette.mode?t.palette[n].dark:t.palette[n].main,color:t.palette.getContrastText(t.palette[n].main)})}}))]})})),BM=(0,bT.Ay)("div",{name:"MuiAlert",slot:"Icon",overridesResolver:(e,t)=>t.icon})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),$M=(0,bT.Ay)("div",{name:"MuiAlert",slot:"Message",overridesResolver:(e,t)=>t.message})({padding:"8px 0",minWidth:0,overflow:"auto"}),VM=(0,bT.Ay)("div",{name:"MuiAlert",slot:"Action",overridesResolver:(e,t)=>t.action})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),WM={success:(0,Ve.jsx)(PM,{fontSize:"inherit"}),warning:(0,Ve.jsx)(MM,{fontSize:"inherit"}),error:(0,Ve.jsx)(NM,{fontSize:"inherit"}),info:(0,Ve.jsx)(OM,{fontSize:"inherit"})},zM=t.forwardRef((function(e,t){const n=(0,Ze.b)({props:e,name:"MuiAlert"}),{action:r,children:i,className:a,closeText:o="Close",color:s,components:l={},componentsProps:c={},icon:u,iconMapping:d=WM,onClose:h,role:p="alert",severity:f="success",slotProps:m={},slots:g={},variant:v="standard"}=n,y=(0,Le.A)(n,FM),b=(0,De.A)({},n,{color:s,severity:f,variant:v,colorSeverity:s||f}),w=(e=>{const{variant:t,color:n,severity:r,classes:i}=e,a={root:["root",`color${(0,wT.A)(n||r)}`,`${t}${(0,wT.A)(n||r)}`,`${t}`],icon:["icon"],message:["message"],action:["action"]};return(0,yT.A)(a,DM,i)})(b),E={slots:(0,De.A)({closeButton:l.CloseButton,closeIcon:l.CloseIcon},g),slotProps:(0,De.A)({},c,m)},[x,_]=JT("closeButton",{elementType:ek,externalForwardedProps:E,ownerState:b}),[A,T]=JT("closeIcon",{elementType:jM,externalForwardedProps:E,ownerState:b});return(0,Ve.jsxs)(UM,(0,De.A)({role:p,elevation:0,ownerState:b,className:(0,Pe.A)(w.root,a),ref:t},y,{children:[!1!==u?(0,Ve.jsx)(BM,{ownerState:b,className:w.icon,children:u||d[f]||WM[f]}):null,(0,Ve.jsx)($M,{ownerState:b,className:w.message,children:i}),null!=r?(0,Ve.jsx)(VM,{ownerState:b,className:w.action,children:r}):null,null==r&&h?(0,Ve.jsx)(VM,{ownerState:b,className:w.action,children:(0,Ve.jsx)(x,(0,De.A)({size:"small","aria-label":o,title:o,color:"inherit",onClick:h},_,{children:(0,Ve.jsx)(A,(0,De.A)({fontSize:"small"},T))}))}):null]}))})),HM=zM;var qM=n(8286);const GM=t.createContext();function KM(e){return(0,_T.Ay)("MuiGrid",e)}const YM=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],QM=(0,Ge.A)("MuiGrid",["root","container","item","zeroMinWidth",...[0,1,2,3,4,5,6,7,8,9,10].map((e=>`spacing-xs-${e}`)),...["column-reverse","column","row-reverse","row"].map((e=>`direction-xs-${e}`)),...["nowrap","wrap-reverse","wrap"].map((e=>`wrap-xs-${e}`)),...YM.map((e=>`grid-xs-${e}`)),...YM.map((e=>`grid-sm-${e}`)),...YM.map((e=>`grid-md-${e}`)),...YM.map((e=>`grid-lg-${e}`)),...YM.map((e=>`grid-xl-${e}`))]),XM=QM,ZM=["className","columns","columnSpacing","component","container","direction","item","rowSpacing","spacing","wrap","zeroMinWidth"];function JM(e){const t=parseFloat(e);return`${t}${String(e).replace(String(t),"")||"px"}`}function eN(e){let{breakpoints:t,values:n}=e,r="";Object.keys(n).forEach((e=>{""===r&&0!==n[e]&&(r=e)}));const i=Object.keys(t).sort(((e,n)=>t[e]-t[n]));return i.slice(0,i.indexOf(r))}const tN=(0,bT.Ay)("div",{name:"MuiGrid",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,{container:r,direction:i,item:a,spacing:o,wrap:s,zeroMinWidth:l,breakpoints:c}=n;let u=[];r&&(u=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e||e<=0)return[];if("string"===typeof e&&!Number.isNaN(Number(e))||"number"===typeof e)return[n[`spacing-xs-${String(e)}`]];const r=[];return t.forEach((t=>{const i=e[t];Number(i)>0&&r.push(n[`spacing-${t}-${String(i)}`])})),r}(o,c,t));const d=[];return c.forEach((e=>{const r=n[e];r&&d.push(t[`grid-${e}-${String(r)}`])})),[t.root,r&&t.container,a&&t.item,l&&t.zeroMinWidth,...u,"row"!==i&&t[`direction-xs-${String(i)}`],"wrap"!==s&&t[`wrap-xs-${String(s)}`],...d]}})((e=>{let{ownerState:t}=e;return(0,De.A)({boxSizing:"border-box"},t.container&&{display:"flex",flexWrap:"wrap",width:"100%"},t.item&&{margin:0},t.zeroMinWidth&&{minWidth:0},"wrap"!==t.wrap&&{flexWrap:t.wrap})}),(function(e){let{theme:t,ownerState:n}=e;const r=(0,qM.kW)({values:n.direction,breakpoints:t.breakpoints.values});return(0,qM.NI)({theme:t},r,(e=>{const t={flexDirection:e};return 0===e.indexOf("column")&&(t[`& > .${XM.item}`]={maxWidth:"none"}),t}))}),(function(e){let{theme:t,ownerState:n}=e;const{container:r,rowSpacing:i}=n;let a={};if(r&&0!==i){const e=(0,qM.kW)({values:i,breakpoints:t.breakpoints.values});let n;"object"===typeof e&&(n=eN({breakpoints:t.breakpoints.values,values:e})),a=(0,qM.NI)({theme:t},e,((e,r)=>{var i;const a=t.spacing(e);return"0px"!==a?{marginTop:`-${JM(a)}`,[`& > .${XM.item}`]:{paddingTop:JM(a)}}:null!=(i=n)&&i.includes(r)?{}:{marginTop:0,[`& > .${XM.item}`]:{paddingTop:0}}}))}return a}),(function(e){let{theme:t,ownerState:n}=e;const{container:r,columnSpacing:i}=n;let a={};if(r&&0!==i){const e=(0,qM.kW)({values:i,breakpoints:t.breakpoints.values});let n;"object"===typeof e&&(n=eN({breakpoints:t.breakpoints.values,values:e})),a=(0,qM.NI)({theme:t},e,((e,r)=>{var i;const a=t.spacing(e);return"0px"!==a?{width:`calc(100% + ${JM(a)})`,marginLeft:`-${JM(a)}`,[`& > .${XM.item}`]:{paddingLeft:JM(a)}}:null!=(i=n)&&i.includes(r)?{}:{width:"100%",marginLeft:0,[`& > .${XM.item}`]:{paddingLeft:0}}}))}return a}),(function(e){let t,{theme:n,ownerState:r}=e;return n.breakpoints.keys.reduce(((e,i)=>{let a={};if(r[i]&&(t=r[i]),!t)return e;if(!0===t)a={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if("auto"===t)a={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{const o=(0,qM.kW)({values:r.columns,breakpoints:n.breakpoints.values}),s="object"===typeof o?o[i]:o;if(void 0===s||null===s)return e;const l=Math.round(t/s*1e8)/1e6+"%";let c={};if(r.container&&r.item&&0!==r.columnSpacing){const e=n.spacing(r.columnSpacing);if("0px"!==e){const t=`calc(${l} + ${JM(e)})`;c={flexBasis:t,maxWidth:t}}}a=(0,De.A)({flexBasis:l,flexGrow:0,maxWidth:l},c)}return 0===n.breakpoints.values[i]?Object.assign(e,a):e[n.breakpoints.up(i)]=a,e}),{})}));const nN=e=>{const{classes:t,container:n,direction:r,item:i,spacing:a,wrap:o,zeroMinWidth:s,breakpoints:l}=e;let c=[];n&&(c=function(e,t){if(!e||e<=0)return[];if("string"===typeof e&&!Number.isNaN(Number(e))||"number"===typeof e)return[`spacing-xs-${String(e)}`];const n=[];return t.forEach((t=>{const r=e[t];if(Number(r)>0){const e=`spacing-${t}-${String(r)}`;n.push(e)}})),n}(a,l));const u=[];l.forEach((t=>{const n=e[t];n&&u.push(`grid-${t}-${String(n)}`)}));const d={root:["root",n&&"container",i&&"item",s&&"zeroMinWidth",...c,"row"!==r&&`direction-xs-${String(r)}`,"wrap"!==o&&`wrap-xs-${String(o)}`,...u]};return(0,yT.A)(d,KM,t)},rN=t.forwardRef((function(e,n){const r=(0,Ze.b)({props:e,name:"MuiGrid"}),{breakpoints:i}=tC(),a=(0,Oe.A)(r),{className:o,columns:s,columnSpacing:l,component:c="div",container:u=!1,direction:d="row",item:h=!1,rowSpacing:p,spacing:f=0,wrap:m="wrap",zeroMinWidth:g=!1}=a,v=(0,Le.A)(a,ZM),y=p||f,b=l||f,w=t.useContext(GM),E=u?s||12:w,x={},_=(0,De.A)({},v);i.keys.forEach((e=>{null!=v[e]&&(x[e]=v[e],delete _[e])}));const A=(0,De.A)({},a,{columns:E,container:u,direction:d,item:h,rowSpacing:y,columnSpacing:b,wrap:m,zeroMinWidth:g,spacing:f},x,{breakpoints:i.keys}),T=nN(A);return(0,Ve.jsx)(GM.Provider,{value:E,children:(0,Ve.jsx)(tN,(0,De.A)({ownerState:A,className:(0,Pe.A)(T.root,o),as:c,ref:n},_))})}));const iN=rN;function aN(e){return(0,_T.Ay)("MuiLink",e)}const oN=(0,Ge.A)("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]);var sN=n(2703);const lN={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},cN=e=>{let{theme:t,ownerState:n}=e;const r=(e=>lN[e]||e)(n.color),i=(0,sN.Yn)(t,`palette.${r}`,!1)||n.color,a=(0,sN.Yn)(t,`palette.${r}Channel`);return"vars"in t&&a?`rgba(${a} / 0.4)`:(0,ET.X4)(i,.4)},uN=["className","color","component","onBlur","onFocus","TypographyClasses","underline","variant","sx"],dN=(0,bT.Ay)(hS,{name:"MuiLink",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`underline${(0,wT.A)(n.underline)}`],"button"===n.component&&t.button]}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({},"none"===n.underline&&{textDecoration:"none"},"hover"===n.underline&&{textDecoration:"none","&:hover":{textDecoration:"underline"}},"always"===n.underline&&(0,De.A)({textDecoration:"underline"},"inherit"!==n.color&&{textDecorationColor:cN({theme:t,ownerState:n})},{"&:hover":{textDecorationColor:"inherit"}}),"button"===n.component&&{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},[`&.${oN.focusVisible}`]:{outline:"auto"}})})),hN=t.forwardRef((function(e,n){const r=(0,Ze.b)({props:e,name:"MuiLink"}),{className:i,color:a="primary",component:o="a",onBlur:s,onFocus:l,TypographyClasses:c,underline:u="always",variant:d="inherit",sx:h}=r,p=(0,Le.A)(r,uN),{isFocusVisibleRef:f,onBlur:m,onFocus:g,ref:v}=(0,mS.A)(),[y,b]=t.useState(!1),w=(0,pS.A)(n,v),E=(0,De.A)({},r,{color:a,component:o,focusVisible:y,underline:u,variant:d}),x=(e=>{const{classes:t,component:n,focusVisible:r,underline:i}=e,a={root:["root",`underline${(0,wT.A)(i)}`,"button"===n&&"button",r&&"focusVisible"]};return(0,yT.A)(a,aN,t)})(E);return(0,Ve.jsx)(dN,(0,De.A)({color:a,className:(0,Pe.A)(x.root,i),classes:c,component:o,onBlur:e=>{m(e),!1===f.current&&b(!1),s&&s(e)},onFocus:e=>{g(e),!0===f.current&&b(!0),l&&l(e)},ref:w,ownerState:E,variant:d,sx:[...Object.keys(lN).includes(a)?[]:[{color:a}],...Array.isArray(h)?h:[h]]},p))})),pN=hN,fN=()=>{const[e,n]=(0,t.useState)(""),[r,i]=(0,t.useState)(""),[a,o]=(0,t.useState)(!1),[s,l]=(0,t.useState)(null),{login:c,loading:u,error:d,setError:h,currentUser:p,userProfile:f}=XA(),m=Z();(0,t.useEffect)((()=>{l(null)}),[e,r]),(0,t.useEffect)((()=>{p&&f&&f.sourceCodeSetupComplete&&m("/")}),[p,f,m]),(0,t.useEffect)((()=>{d&&l({type:"error",message:d})}),[d]);const g=u||a;return(0,Ve.jsx)(rP,{maxWidth:"xs",children:(0,Ve.jsxs)(CT,{elevation:0,sx:{mt:8,p:4},children:[(0,Ve.jsx)(hS,{component:"h1",variant:"h5",align:"center",sx:{mb:2},children:"Login to Side Eye"}),(0,Ve.jsxs)(Xe,{component:"form",onSubmit:async t=>{if(t.preventDefault(),h&&h(null),l(null),!e.trim())return void l({type:"error",message:"Email is required"});if(/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(e.trim()))if(r)try{o(!0),l({type:"info",message:"Logging in..."}),await c(e.trim(),r),l({type:"success",message:"Login successful! Redirecting..."})}catch(n){console.error("Login component caught error:",n),"auth/too-many-requests"===n.code||"auth/too-many-requests"===n.message?l({type:"error",message:"Too many failed login attempts. Please try again later or reset your password."}):"auth/invalid-credential"===n.code||"auth/invalid-credential"===n.message?l({type:"error",message:"Invalid email or password. Please try again."}):"auth/invalid-email"===n.code||"auth/invalid-email"===n.message?l({type:"error",message:"Invalid email address. Please check the format."}):l({type:"error",message:n.message||"Login failed. Please try again."})}finally{o(!1)}else l({type:"error",message:"Password is required"});else l({type:"error",message:"Please enter a valid email address"})},noValidate:!0,sx:{mt:1},children:[(0,Ve.jsx)(xL,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,value:e,onChange:e=>n(e.target.value),disabled:g}),(0,Ve.jsx)(xL,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:r,onChange:e=>i(e.target.value),disabled:g}),s&&(0,Ve.jsx)(HM,{severity:s.type,sx:{mt:2},children:s.message}),(0,Ve.jsx)(Ak,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},disabled:g,children:g?(0,Ve.jsx)(jL,{size:24}):"Sign In"}),(0,Ve.jsxs)(iN,{container:!0,justifyContent:"space-between",children:[(0,Ve.jsx)(iN,{item:!0,children:(0,Ve.jsx)(pN,{component:Ce,to:"/reset-password",variant:"body2",children:"Forgot password?"})}),(0,Ve.jsx)(iN,{item:!0,children:(0,Ve.jsx)(pN,{component:Ce,to:"/register",variant:"body2",children:"Don't have an account? Sign Up"})})]})]})]})})};function mN(e){return(0,_T.Ay)("MuiInputAdornment",e)}const gN=(0,Ge.A)("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]);var vN;const yN=["children","className","component","disablePointerEvents","disableTypography","position","variant"],bN=(0,bT.Ay)("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`position${(0,wT.A)(n.position)}`],!0===n.disablePointerEvents&&t.disablePointerEvents,t[n.variant]]}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({display:"flex",height:"0.01em",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(t.vars||t).palette.action.active},"filled"===n.variant&&{[`&.${gN.positionStart}&:not(.${gN.hiddenLabel})`]:{marginTop:16}},"start"===n.position&&{marginRight:8},"end"===n.position&&{marginLeft:8},!0===n.disablePointerEvents&&{pointerEvents:"none"})})),wN=t.forwardRef((function(e,n){const r=(0,Ze.b)({props:e,name:"MuiInputAdornment"}),{children:i,className:a,component:o="div",disablePointerEvents:s=!1,disableTypography:l=!1,position:c,variant:u}=r,d=(0,Le.A)(r,yN),h=DR()||{};let p=u;u&&h.variant,h&&!p&&(p=h.variant);const f=(0,De.A)({},r,{hiddenLabel:h.hiddenLabel,size:h.size,disablePointerEvents:s,position:c,variant:p}),m=(e=>{const{classes:t,disablePointerEvents:n,hiddenLabel:r,position:i,size:a,variant:o}=e,s={root:["root",n&&"disablePointerEvents",i&&`position${(0,wT.A)(i)}`,o,r&&"hiddenLabel",a&&`size${(0,wT.A)(a)}`]};return(0,yT.A)(s,mN,t)})(f);return(0,Ve.jsx)(RR.Provider,{value:null,children:(0,Ve.jsx)(bN,(0,De.A)({as:o,ownerState:f,className:(0,Pe.A)(m.root,a),ref:n},d,{children:"string"!==typeof i||l?(0,Ve.jsxs)(t.Fragment,{children:["start"===c?vN||(vN=(0,Ve.jsx)("span",{className:"notranslate",children:"\u200b"})):null,i]}):(0,Ve.jsx)(hS,{color:"text.secondary",children:i})}))})})),EN=wN;function xN(e,n,r,i,a){const[o,s]=t.useState((()=>a&&r?r(e).matches:i?i(e).matches:n));return(0,mC.A)((()=>{let t=!0;if(!r)return;const n=r(e),i=()=>{t&&s(n.matches)};return i(),n.addListener(i),()=>{t=!1,n.removeListener(i)}}),[e,r]),o}const _N=r.useSyncExternalStore;function AN(e,n,r,i,a){const o=t.useCallback((()=>n),[n]),s=t.useMemo((()=>{if(a&&r)return()=>r(e).matches;if(null!==i){const{matches:t}=i(e);return()=>t}return o}),[o,e,i,a,r]),[l,c]=t.useMemo((()=>{if(null===r)return[o,()=>()=>{}];const t=r(e);return[()=>t.matches,e=>(t.addListener(e),()=>{t.removeListener(e)})]}),[o,r,e]);return _N(c,l,s)}function TN(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Ue(),r="undefined"!==typeof window&&"undefined"!==typeof window.matchMedia,{defaultMatches:i=!1,matchMedia:a=(r?window.matchMedia:null),ssrMatchMedia:o=null,noSsr:s=!1}=UL({name:"MuiUseMediaQuery",props:t,theme:n});let l="function"===typeof e?e(n):e;l=l.replace(/^@media( ?)/m,"");return(void 0!==_N?AN:xN)(l,i,a,o,s)}function SN(e){let{props:t,name:n}=e;return BL({props:t,name:n,defaultTheme:tt.A,themeId:qe.A})}var kN=n(1942),CN=n.n(kN);function IN(e,t,n){return"function"===typeof e?e(t,n):e}const RN=CN().oneOfType([CN().func,CN().object]),DN=(e,t)=>e.length===t.length&&t.every((t=>e.includes(t))),LN=(e,t,n)=>{let r=t;return r=e.setHours(r,e.getHours(n)),r=e.setMinutes(r,e.getMinutes(n)),r=e.setSeconds(r,e.getSeconds(n)),r},PN=e=>{let{date:t,disableFuture:n,disablePast:r,maxDate:i,minDate:a,isDateDisabled:o,utils:s,timezone:l}=e;const c=LN(s,s.dateWithTimezone(void 0,l),t);r&&s.isBefore(a,c)&&(a=c),n&&s.isAfter(i,c)&&(i=c);let u=t,d=t;for(s.isBefore(t,a)&&(u=a,d=null),s.isAfter(t,i)&&(d&&(d=i),u=null);u||d;){if(u&&s.isAfter(u,i)&&(u=null),d&&s.isBefore(d,a)&&(d=null),u){if(!o(u))return u;u=s.addDays(u,1)}if(d){if(!o(d))return d;d=s.addDays(d,-1)}}return null},MN=(e,t,n)=>null!=t&&e.isValid(t)?t:n,NN=(e,t)=>{const n=[e.startOfYear(t)];for(;n.length<12;){const t=n[n.length-1];n.push(e.addMonths(t,1))}return n},ON=(e,t,n)=>"date"===n?e.startOfDay(e.dateWithTimezone(void 0,t)):e.dateWithTimezone(void 0,t),jN=["year","month","day"],FN=e=>jN.includes(e),UN=(e,t,n)=>{let{format:r,views:i}=t;if(null!=r)return r;const a=e.formats;return DN(i,["year"])?a.year:DN(i,["month"])?a.month:DN(i,["day"])?a.dayOfMonth:DN(i,["month","year"])?`${a.month} ${a.year}`:DN(i,["day","month"])?`${a.month} ${a.dayOfMonth}`:n?/en/.test(e.getCurrentLocaleCode())?a.normalDateWithWeekday:a.normalDate:a.keyboardDate},BN=(e,t)=>{const n=e.startOfWeek(t);return[0,1,2,3,4,5,6].map((t=>e.addDays(n,t)))},$N=["hours","minutes","seconds"],VN=(e,t)=>3600*t.getHours(e)+60*t.getMinutes(e)+t.getSeconds(e),WN={year:1,month:2,day:3,hours:4,minutes:5,seconds:6,milliseconds:7},zN=(e,t,n)=>{if(t===WN.year)return e.startOfYear(n);if(t===WN.month)return e.startOfMonth(n);if(t===WN.day)return e.startOfDay(n);let r=n;return t<WN.minutes&&(r=e.setMinutes(r,0)),t<WN.seconds&&(r=e.setSeconds(r,0)),t<WN.milliseconds&&(r=e.setMilliseconds(r,0)),r},HN=e=>{let{props:t,utils:n,granularity:r,timezone:i,getTodayDate:a}=e;var o;let s=a?a():zN(n,r,ON(n,i));null!=t.minDate&&n.isAfterDay(t.minDate,s)&&(s=zN(n,r,t.minDate)),null!=t.maxDate&&n.isBeforeDay(t.maxDate,s)&&(s=zN(n,r,t.maxDate));const l=((e,t)=>(n,r)=>e?t.isAfter(n,r):VN(n,t)>VN(r,t))(null!=(o=t.disableIgnoringDatePartForTimeValidation)&&o,n);return null!=t.minTime&&l(t.minTime,s)&&(s=zN(n,r,t.disableIgnoringDatePartForTimeValidation?t.minTime:LN(n,s,t.minTime))),null!=t.maxTime&&l(s,t.maxTime)&&(s=zN(n,r,t.disableIgnoringDatePartForTimeValidation?t.maxTime:LN(n,s,t.maxTime))),s},qN=(e,t)=>{const n=e.formatTokenMap[t];if(null==n)throw new Error([`MUI: The token "${t}" is not supported by the Date and Time Pickers.`,"Please try using another token or open an issue on https://github.com/mui/mui-x/issues/new/choose if you think it should be supported."].join("\n"));return"string"===typeof n?{type:n,contentType:"meridiem"===n?"letter":"digit",maxLength:void 0}:{type:n.sectionType,contentType:n.contentType,maxLength:n.maxLength}},GN=(e,t,n)=>{const r=[],i=e.dateWithTimezone(void 0,t),a=e.startOfWeek(i),o=e.endOfWeek(i);let s=a;for(;e.isBefore(s,o);)r.push(s),s=e.addDays(s,1);return r.map((t=>e.formatByString(t,n)))},KN=(e,t,n,r)=>{switch(n){case"month":return NN(e,e.dateWithTimezone(void 0,t)).map((t=>e.formatByString(t,r)));case"weekDay":return GN(e,t,r);case"meridiem":{const n=e.dateWithTimezone(void 0,t);return[e.startOfDay(n),e.endOfDay(n)].map((t=>e.formatByString(t,r)))}default:return[]}},YN=(e,t,n)=>{let r=t;for(r=Number(r).toString();r.length<n;)r=`0${r}`;return r},QN=(e,t,n,r,i)=>{if("day"===i.type&&"digit-with-letter"===i.contentType){const t=e.setDate(r.longestMonth,n);return e.formatByString(t,i.format)}const a=n.toString();return i.hasLeadingZerosInInput?YN(0,a,i.maxLength):a},XN=(e,t,n,r,i,a,o)=>{const s=(e=>{switch(e){case"ArrowUp":return 1;case"ArrowDown":return-1;case"PageUp":return 5;case"PageDown":return-5;default:return 0}})(r),l="Home"===r,c="End"===r,u=""===n.value||l||c;return"digit"===n.contentType||"digit-with-letter"===n.contentType?(()=>{const r=i[n.type]({currentDate:a,format:n.format,contentType:n.contentType}),d=t=>QN(e,0,t,r,n),h="minutes"===n.type&&null!=o&&o.minutesStep?o.minutesStep:1;let p=parseInt(n.value,10)+s*h;if(u){if("year"===n.type&&!c&&!l)return e.formatByString(e.dateWithTimezone(void 0,t),n.format);p=s>0||l?r.minimum:r.maximum}return p%h!==0&&((s<0||l)&&(p+=h-(h+p)%h),(s>0||c)&&(p-=p%h)),p>r.maximum?d(r.minimum+(p-r.maximum-1)%(r.maximum-r.minimum+1)):p<r.minimum?d(r.maximum-(r.minimum-p-1)%(r.maximum-r.minimum+1)):d(p)})():(()=>{const r=KN(e,t,n.type,n.format);if(0===r.length)return n.value;if(u)return s>0||l?r[0]:r[r.length-1];const i=r.indexOf(n.value);return r[(i+r.length+s)%r.length]})()},ZN=(e,t)=>{let n=e.value||e.placeholder;const r="non-input"===t?e.hasLeadingZerosInFormat:e.hasLeadingZerosInInput;"non-input"===t&&e.hasLeadingZerosInInput&&!e.hasLeadingZerosInFormat&&(n=Number(n).toString());return["input-rtl","input-ltr"].includes(t)&&"digit"===e.contentType&&!r&&1===n.length&&(n=`${n}\u200e`),"input-rtl"===t&&(n=`\u2068${n}\u2069`),n},JN=e=>e.replace(/[\u2066\u2067\u2068\u2069]/g,""),eO=(e,t)=>{let n=0,r=t?1:0;const i=[];for(let a=0;a<e.length;a+=1){const o=e[a],s=ZN(o,t?"input-rtl":"input-ltr"),l=`${o.startSeparator}${s}${o.endSeparator}`,c=JN(l).length,u=l.length,d=JN(s),h=r+s.indexOf(d[0])+o.startSeparator.length,p=h+d.length;i.push((0,De.A)({},o,{start:n,end:n+c,startInInput:h,endInInput:p})),n+=c,r+=u}return i},tO=(e,t,n,r,i)=>{switch(r.type){case"year":return n.fieldYearPlaceholder({digitAmount:e.formatByString(e.dateWithTimezone(void 0,t),i).length,format:i});case"month":return n.fieldMonthPlaceholder({contentType:r.contentType,format:i});case"day":return n.fieldDayPlaceholder({format:i});case"weekDay":return n.fieldWeekDayPlaceholder({contentType:r.contentType,format:i});case"hours":return n.fieldHoursPlaceholder({format:i});case"minutes":return n.fieldMinutesPlaceholder({format:i});case"seconds":return n.fieldSecondsPlaceholder({format:i});case"meridiem":return n.fieldMeridiemPlaceholder({format:i});default:return i}},nO=(e,t,n,r)=>e.formatByString(e.parse(t,n),r),rO=(e,t,n)=>4===e.formatByString(e.dateWithTimezone(void 0,t),n).length,iO=(e,t,n,r,i)=>{if("digit"!==n)return!1;const a=e.dateWithTimezone(void 0,t);switch(r){case"year":if(rO(e,t,i)){return"0001"===e.formatByString(e.setYear(a,1),i)}return"01"===e.formatByString(e.setYear(a,2001),i);case"month":return e.formatByString(e.startOfYear(a),i).length>1;case"day":return e.formatByString(e.startOfMonth(a),i).length>1;case"weekDay":return e.formatByString(e.startOfWeek(a),i).length>1;case"hours":return e.formatByString(e.setHours(a,1),i).length>1;case"minutes":return e.formatByString(e.setMinutes(a,1),i).length>1;case"seconds":return e.formatByString(e.setSeconds(a,1),i).length>1;default:throw new Error("Invalid section type")}},aO=(e,t,n,r,i,a,o,s)=>{let l="";const c=[],u=e.date(),d=r=>{if(""===r)return null;const a=qN(e,r),s=iO(e,t,a.contentType,a.type,r),d=o?s:"digit"===a.contentType,h=null!=i&&e.isValid(i);let p=h?e.formatByString(i,r):"",f=null;if(d)if(s)f=""===p?e.formatByString(u,r).length:p.length;else{if(null==a.maxLength)throw new Error(`MUI: The token ${r} should have a 'maxDigitNumber' property on it's adapter`);f=a.maxLength,h&&(p=YN(0,p,f))}return c.push((0,De.A)({},a,{format:r,maxLength:f,value:p,placeholder:tO(e,t,n,a,r),hasLeadingZeros:s,hasLeadingZerosInFormat:s,hasLeadingZerosInInput:d,startSeparator:0===c.length?l:"",endSeparator:"",modified:!1})),null};let h=10,p=r,f=e.expandFormat(r);for(;f!==p;)if(p=f,f=e.expandFormat(p),h-=1,h<0)throw new Error("MUI: The format expansion seems to be  enter in an infinite loop. Please open an issue with the format passed to the picker component");const m=f,g=((e,t)=>{const n=[],{start:r,end:i}=e.escapedCharacters,a=new RegExp(`(\\${r}[^\\${i}]*\\${i})+`,"g");let o=null;for(;o=a.exec(t);)n.push({start:o.index,end:a.lastIndex-1});return n})(e,m),v=new RegExp(`^(${Object.keys(e.formatTokenMap).sort(((e,t)=>t.length-e.length)).join("|")})`,"g");let y="";for(let b=0;b<m.length;b+=1){const e=g.find((e=>e.start<=b&&e.end>=b)),t=m[b],n=null!=e,r=`${y}${m.slice(b)}`,i=v.test(r);if(!n&&t.match(/([A-Za-z]+)/)&&i)y=r.slice(0,v.lastIndex),b+=v.lastIndex-1;else{n&&(null==e?void 0:e.start)===b||(null==e?void 0:e.end)===b||(d(y),y="",0===c.length?l+=t:c[c.length-1].endSeparator+=t)}}return d(y),c.map((e=>{const t=e=>{let t=e;return s&&null!==t&&t.includes(" ")&&(t=`\u2069${t}\u2066`),"spacious"===a&&["/",".","-"].includes(t)&&(t=` ${t} `),t};return e.startSeparator=t(e.startSeparator),e.endSeparator=t(e.endSeparator),e}))};const oO=(e,t)=>{0},sO={year:1,month:2,day:3,weekDay:4,hours:5,minutes:6,seconds:7,meridiem:8},lO=(e,t,n,r,i,a)=>[...r].sort(((e,t)=>sO[e.type]-sO[t.type])).reduce(((r,i)=>!a||i.modified?((e,t,n,r,i)=>{switch(n.type){case"year":return e.setYear(i,e.getYear(r));case"month":return e.setMonth(i,e.getMonth(r));case"weekDay":{const i=GN(e,t,n.format),a=e.formatByString(r,n.format),o=i.indexOf(a),s=i.indexOf(n.value)-o;return e.addDays(r,s)}case"day":return e.setDate(i,e.getDate(r));case"meridiem":{const t=e.getHours(r)<12,n=e.getHours(i);return t&&n>=12?e.addHours(i,-12):!t&&n<12?e.addHours(i,12):i}case"hours":return e.setHours(i,e.getHours(r));case"minutes":return e.setMinutes(i,e.getMinutes(r));case"seconds":return e.setSeconds(i,e.getSeconds(r));default:return i}})(e,t,i,n,r):r),i),cO=["value","referenceDate"],uO={emptyValue:null,getTodayValue:ON,getInitialReferenceValue:e=>{let{value:t,referenceDate:n}=e,r=(0,Le.A)(e,cO);return null!=t&&r.utils.isValid(t)?t:null!=n?n:HN(r)},cleanValue:(e,t)=>null!=t&&e.isValid(t)?t:null,areValuesEqual:(e,t,n)=>!e.isValid(t)&&null!=t&&!e.isValid(n)&&null!=n||e.isEqual(t,n),isSameError:(e,t)=>e===t,hasError:e=>null!=e,defaultErrorState:null,getTimezone:(e,t)=>null!=t&&e.isValid(t)?e.getTimezone(t):null,setTimezone:(e,t,n)=>null==n?null:e.setTimezone(n,t)},dO={updateReferenceValue:(e,t,n)=>null!=t&&e.isValid(t)?t:n,getSectionsFromValue:(e,t,n,r,i)=>!e.isValid(t)&&!!n?n:eO(i(t),r),getValueStrFromSections:(e,t)=>{const n=e.map((e=>{const n=ZN(e,t?"input-rtl":"input-ltr");return`${e.startSeparator}${n}${e.endSeparator}`})).join("");return t?`\u2066${n}\u2069`:n},getActiveDateManager:(e,t)=>({date:t.value,referenceDate:t.referenceValue,getSections:e=>e,getNewValuesFromNewActiveDate:n=>({value:n,referenceValue:null!=n&&e.isValid(n)?n:t.referenceValue})}),parseValueStr:(e,t,n)=>n(e.trim(),t)},hO=["localeText"],pO=t.createContext(null);const fO=function(e){var n;const{localeText:r}=e,i=(0,Le.A)(e,hO),{utils:a,localeText:o}=null!=(n=t.useContext(pO))?n:{utils:void 0,localeText:void 0},s=SN({props:i,name:"MuiLocalizationProvider"}),{children:l,dateAdapter:c,dateFormats:u,dateLibInstance:d,adapterLocale:h,localeText:p}=s,f=t.useMemo((()=>(0,De.A)({},p,o,r)),[p,o,r]),m=t.useMemo((()=>{if(!c)return a||null;const e=new c({locale:h,formats:u,instance:d});if(!e.isMUIAdapter)throw new Error(["MUI: The date adapter should be imported from `@mui/x-date-pickers` or `@mui/x-date-pickers-pro`, not from `@date-io`","For example, `import { AdapterDayjs } from '@mui/x-date-pickers/AdapterDayjs'` instead of `import AdapterDayjs from '@date-io/dayjs'`","More information on the installation documentation: https://mui.com/x/react-date-pickers/getting-started/#installation"].join("\n"));return e}),[c,h,u,d,a]),g=t.useMemo((()=>m?{minDate:m.date("1900-01-01T00:00:00.000"),maxDate:m.date("2099-12-31T00:00:00.000")}:null),[m]),v=t.useMemo((()=>({utils:m,defaultDates:g,localeText:f})),[g,m,f]);return(0,Ve.jsx)(pO.Provider,{value:v,children:l})},mO={previousMonth:"Previous month",nextMonth:"Next month",openPreviousView:"open previous view",openNextView:"open next view",calendarViewSwitchingButtonAriaLabel:e=>"year"===e?"year view is open, switch to calendar view":"calendar view is open, switch to year view",start:"Start",end:"End",cancelButtonLabel:"Cancel",clearButtonLabel:"Clear",okButtonLabel:"OK",todayButtonLabel:"Today",datePickerToolbarTitle:"Select date",dateTimePickerToolbarTitle:"Select date & time",timePickerToolbarTitle:"Select time",dateRangePickerToolbarTitle:"Select date range",clockLabelText:(e,t,n)=>`Select ${e}. ${null===t?"No time selected":`Selected time is ${n.format(t,"fullTime")}`}`,hoursClockNumberText:e=>`${e} hours`,minutesClockNumberText:e=>`${e} minutes`,secondsClockNumberText:e=>`${e} seconds`,selectViewText:e=>`Select ${e}`,calendarWeekNumberHeaderLabel:"Week number",calendarWeekNumberHeaderText:"#",calendarWeekNumberAriaLabelText:e=>`Week ${e}`,calendarWeekNumberText:e=>`${e}`,openDatePickerDialogue:(e,t)=>null!==e&&t.isValid(e)?`Choose date, selected date is ${t.format(e,"fullDate")}`:"Choose date",openTimePickerDialogue:(e,t)=>null!==e&&t.isValid(e)?`Choose time, selected time is ${t.format(e,"fullTime")}`:"Choose time",fieldClearLabel:"Clear value",timeTableLabel:"pick time",dateTableLabel:"pick date",fieldYearPlaceholder:e=>"Y".repeat(e.digitAmount),fieldMonthPlaceholder:e=>"letter"===e.contentType?"MMMM":"MM",fieldDayPlaceholder:()=>"DD",fieldWeekDayPlaceholder:e=>"letter"===e.contentType?"EEEE":"EE",fieldHoursPlaceholder:()=>"hh",fieldMinutesPlaceholder:()=>"mm",fieldSecondsPlaceholder:()=>"ss",fieldMeridiemPlaceholder:()=>"aa"},gO=mO;vO=mO,(0,De.A)({},vO);var vO;const yO=()=>{const e=t.useContext(pO);if(null===e)throw new Error(["MUI: Can not find the date and time pickers localization context.","It looks like you forgot to wrap your component in LocalizationProvider.","This can also happen if you are bundling multiple versions of the `@mui/x-date-pickers` package"].join("\n"));if(null===e.utils)throw new Error(["MUI: Can not find the date and time pickers adapter from its localization context.","It looks like you forgot to pass a `dateAdapter` to your LocalizationProvider."].join("\n"));const n=t.useMemo((()=>(0,De.A)({},gO,e.localeText)),[e.localeText]);return t.useMemo((()=>(0,De.A)({},e,{localeText:n})),[e,n])},bO=()=>yO().utils,wO=()=>yO().defaultDates,EO=()=>yO().localeText,xO=e=>{const n=bO(),r=t.useRef();return void 0===r.current&&(r.current=n.dateWithTimezone(void 0,e)),r.current};function _O(e){return(0,_T.Ay)("MuiPickersToolbar",e)}(0,Ge.A)("MuiPickersToolbar",["root","content"]);const AO=(0,bT.Ay)("div",{name:"MuiPickersToolbar",slot:"Root",overridesResolver:(e,t)=>t.root})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"space-between",padding:t.spacing(2,3)},n.isLandscape&&{height:"auto",maxWidth:160,padding:16,justifyContent:"flex-start",flexWrap:"wrap"})})),TO=(0,bT.Ay)("div",{name:"MuiPickersToolbar",slot:"Content",overridesResolver:(e,t)=>t.content})((e=>{let{ownerState:t}=e;var n;return{display:"flex",flexWrap:"wrap",width:"100%",justifyContent:t.isLandscape?"flex-start":"space-between",flexDirection:t.isLandscape?null!=(n=t.landscapeDirection)?n:"column":"row",flex:1,alignItems:t.isLandscape?"flex-start":"center"}})),SO=t.forwardRef((function(e,t){const n=SN({props:e,name:"MuiPickersToolbar"}),{children:r,className:i,toolbarTitle:a,hidden:o,titleId:s}=n,l=n,c=(e=>{const{classes:t,isLandscape:n}=e,r={root:["root"],content:["content"],penIconButton:["penIconButton",n&&"penIconButtonLandscape"]};return(0,yT.A)(r,_O,t)})(l);return o?null:(0,Ve.jsxs)(AO,{ref:t,className:(0,Pe.A)(c.root,i),ownerState:l,children:[(0,Ve.jsx)(hS,{color:"text.secondary",variant:"overline",id:s,children:a}),(0,Ve.jsx)(TO,{className:c.content,ownerState:l,children:r})]})}));function kO(e){return(0,_T.Ay)("MuiDatePickerToolbar",e)}(0,Ge.A)("MuiDatePickerToolbar",["root","title"]);const CO=["value","isLandscape","onChange","toolbarFormat","toolbarPlaceholder","views","className"],IO=(0,bT.Ay)(SO,{name:"MuiDatePickerToolbar",slot:"Root",overridesResolver:(e,t)=>t.root})({}),RO=(0,bT.Ay)(hS,{name:"MuiDatePickerToolbar",slot:"Title",overridesResolver:(e,t)=>t.title})((e=>{let{ownerState:t}=e;return(0,De.A)({},t.isLandscape&&{margin:"auto 16px auto auto"})})),DO=t.forwardRef((function(e,n){const r=SN({props:e,name:"MuiDatePickerToolbar"}),{value:i,isLandscape:a,toolbarFormat:o,toolbarPlaceholder:s="\u2013\u2013",views:l,className:c}=r,u=(0,Le.A)(r,CO),d=bO(),h=EO(),p=(e=>{const{classes:t}=e;return(0,yT.A)({root:["root"],title:["title"]},kO,t)})(r),f=t.useMemo((()=>{if(!i)return s;const e=UN(d,{format:o,views:l},!0);return d.formatByString(i,e)}),[i,o,s,d,l]),m=r;return(0,Ve.jsx)(IO,(0,De.A)({ref:n,toolbarTitle:h.datePickerToolbarTitle,isLandscape:a,className:(0,Pe.A)(p.root,c)},u,{children:(0,Ve.jsx)(RO,{variant:"h4",align:a?"left":"center",ownerState:m,className:p.title,children:f})}))})),LO=e=>{if(void 0!==e)return Object.keys(e).reduce(((t,n)=>(0,De.A)({},t,{[`${n.slice(0,1).toLowerCase()}${n.slice(1)}`]:e[n]})),{})};function PO(e,n){var r,i,a,o;const s=bO(),l=wO(),c=SN({props:e,name:n}),u=t.useMemo((()=>{var e;return null==(null==(e=c.localeText)?void 0:e.toolbarTitle)?c.localeText:(0,De.A)({},c.localeText,{datePickerToolbarTitle:c.localeText.toolbarTitle})}),[c.localeText]),d=null!=(r=c.slots)?r:LO(c.components);return(0,De.A)({},c,{localeText:u},(e=>{let{openTo:t,defaultOpenTo:n,views:r,defaultViews:i}=e;const a=null!=r?r:i;let o;if(null!=t)o=t;else if(a.includes(n))o=n;else{if(!(a.length>0))throw new Error("MUI: The `views` prop must contain at least one view");o=a[0]}return{views:a,openTo:o}})({views:c.views,openTo:c.openTo,defaultViews:["year","day"],defaultOpenTo:"day"}),{disableFuture:null!=(i=c.disableFuture)&&i,disablePast:null!=(a=c.disablePast)&&a,minDate:MN(s,c.minDate,l.minDate),maxDate:MN(s,c.maxDate,l.maxDate),slots:(0,De.A)({toolbar:DO},d),slotProps:null!=(o=c.slotProps)?o:c.componentsProps})}const MO=e=>{let{props:t,value:n,adapter:r}=e;if(null===n)return null;const{shouldDisableDate:i,shouldDisableMonth:a,shouldDisableYear:o,disablePast:s,disableFuture:l,timezone:c}=t,u=r.utils.dateWithTimezone(void 0,c),d=MN(r.utils,t.minDate,r.defaultDates.minDate),h=MN(r.utils,t.maxDate,r.defaultDates.maxDate);switch(!0){case!r.utils.isValid(n):return"invalidDate";case Boolean(i&&i(n)):return"shouldDisableDate";case Boolean(a&&a(n)):return"shouldDisableMonth";case Boolean(o&&o(n)):return"shouldDisableYear";case Boolean(l&&r.utils.isAfterDay(n,u)):return"disableFuture";case Boolean(s&&r.utils.isBeforeDay(n,u)):return"disablePast";case Boolean(d&&r.utils.isBeforeDay(n,d)):return"minDate";case Boolean(h&&r.utils.isAfterDay(n,h)):return"maxDate";default:return null}};function NO(e){if(void 0===e)return{};const t={};return Object.keys(e).filter((t=>!(t.match(/^on[A-Z]/)&&"function"===typeof e[t]))).forEach((n=>{t[n]=e[n]})),t}function OO(e){const{getSlotProps:t,additionalProps:n,externalSlotProps:r,externalForwardedProps:i,className:a}=e;if(!t){const e=(0,Pe.A)(n?.className,a,i?.className,r?.className),t={...n?.style,...i?.style,...r?.style},o={...n,...i,...r};return e.length>0&&(o.className=e),Object.keys(t).length>0&&(o.style=t),{props:o,internalRef:void 0}}const o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(void 0===e)return{};const n={};return Object.keys(e).filter((n=>n.match(/^on[A-Z]/)&&"function"===typeof e[n]&&!t.includes(n))).forEach((t=>{n[t]=e[t]})),n}({...i,...r}),s=NO(r),l=NO(i),c=t(o),u=(0,Pe.A)(c?.className,n?.className,a,i?.className,r?.className),d={...c?.style,...n?.style,...i?.style,...r?.style},h={...c,...n,...l,...s};return u.length>0&&(h.className=u),Object.keys(d).length>0&&(h.style=d),{props:h,internalRef:c.ref}}function jO(e){const{elementType:n,externalSlotProps:r,ownerState:i,skipResolvingSlotProps:a=!1,...o}=e,s=a?{}:IN(r,i),{props:l,internalRef:c}=OO({...o,externalSlotProps:s}),u=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];const i=t.useRef(void 0),a=t.useCallback((e=>{const t=n.map((t=>{if(null==t)return null;if("function"===typeof t){const n=t,r=n(e);return"function"===typeof r?r:()=>{n(null)}}return t.current=e,()=>{t.current=null}}));return()=>{t.forEach((e=>e?.()))}}),n);return t.useMemo((()=>n.every((e=>null==e))?null:e=>{i.current&&(i.current(),i.current=void 0),null!=e&&(i.current=a(e))}),n)}(c,s?.ref,e.additionalProps?.ref),d=function(e,t,n){return void 0===e||"string"===typeof e?t:{...t,ownerState:{...t.ownerState,...n}}}(n,{...l,ref:u},i);return d}var FO=n(5329);function UO(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function BO(e){return e instanceof UO(e).Element||e instanceof Element}function $O(e){return e instanceof UO(e).HTMLElement||e instanceof HTMLElement}function VO(e){return"undefined"!==typeof ShadowRoot&&(e instanceof UO(e).ShadowRoot||e instanceof ShadowRoot)}var WO=Math.max,zO=Math.min,HO=Math.round;function qO(){var e=navigator.userAgentData;return null!=e&&e.brands&&Array.isArray(e.brands)?e.brands.map((function(e){return e.brand+"/"+e.version})).join(" "):navigator.userAgent}function GO(){return!/^((?!chrome|android).)*safari/i.test(qO())}function KO(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var r=e.getBoundingClientRect(),i=1,a=1;t&&$O(e)&&(i=e.offsetWidth>0&&HO(r.width)/e.offsetWidth||1,a=e.offsetHeight>0&&HO(r.height)/e.offsetHeight||1);var o=(BO(e)?UO(e):window).visualViewport,s=!GO()&&n,l=(r.left+(s&&o?o.offsetLeft:0))/i,c=(r.top+(s&&o?o.offsetTop:0))/a,u=r.width/i,d=r.height/a;return{width:u,height:d,top:c,right:l+u,bottom:c+d,left:l,x:l,y:c}}function YO(e){var t=UO(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function QO(e){return e?(e.nodeName||"").toLowerCase():null}function XO(e){return((BO(e)?e.ownerDocument:e.document)||window.document).documentElement}function ZO(e){return KO(XO(e)).left+YO(e).scrollLeft}function JO(e){return UO(e).getComputedStyle(e)}function ej(e){var t=JO(e),n=t.overflow,r=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function tj(e,t,n){void 0===n&&(n=!1);var r=$O(t),i=$O(t)&&function(e){var t=e.getBoundingClientRect(),n=HO(t.width)/e.offsetWidth||1,r=HO(t.height)/e.offsetHeight||1;return 1!==n||1!==r}(t),a=XO(t),o=KO(e,i,n),s={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&(("body"!==QO(t)||ej(a))&&(s=function(e){return e!==UO(e)&&$O(e)?{scrollLeft:(t=e).scrollLeft,scrollTop:t.scrollTop}:YO(e);var t}(t)),$O(t)?((l=KO(t,!0)).x+=t.clientLeft,l.y+=t.clientTop):a&&(l.x=ZO(a))),{x:o.left+s.scrollLeft-l.x,y:o.top+s.scrollTop-l.y,width:o.width,height:o.height}}function nj(e){var t=KO(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function rj(e){return"html"===QO(e)?e:e.assignedSlot||e.parentNode||(VO(e)?e.host:null)||XO(e)}function ij(e){return["html","body","#document"].indexOf(QO(e))>=0?e.ownerDocument.body:$O(e)&&ej(e)?e:ij(rj(e))}function aj(e,t){var n;void 0===t&&(t=[]);var r=ij(e),i=r===(null==(n=e.ownerDocument)?void 0:n.body),a=UO(r),o=i?[a].concat(a.visualViewport||[],ej(r)?r:[]):r,s=t.concat(o);return i?s:s.concat(aj(rj(o)))}function oj(e){return["table","td","th"].indexOf(QO(e))>=0}function sj(e){return $O(e)&&"fixed"!==JO(e).position?e.offsetParent:null}function lj(e){for(var t=UO(e),n=sj(e);n&&oj(n)&&"static"===JO(n).position;)n=sj(n);return n&&("html"===QO(n)||"body"===QO(n)&&"static"===JO(n).position)?t:n||function(e){var t=/firefox/i.test(qO());if(/Trident/i.test(qO())&&$O(e)&&"fixed"===JO(e).position)return null;var n=rj(e);for(VO(n)&&(n=n.host);$O(n)&&["html","body"].indexOf(QO(n))<0;){var r=JO(n);if("none"!==r.transform||"none"!==r.perspective||"paint"===r.contain||-1!==["transform","perspective"].indexOf(r.willChange)||t&&"filter"===r.willChange||t&&r.filter&&"none"!==r.filter)return n;n=n.parentNode}return null}(e)||t}var cj="top",uj="bottom",dj="right",hj="left",pj="auto",fj=[cj,uj,dj,hj],mj="start",gj="end",vj="viewport",yj="popper",bj=fj.reduce((function(e,t){return e.concat([t+"-"+mj,t+"-"+gj])}),[]),wj=[].concat(fj,[pj]).reduce((function(e,t){return e.concat([t,t+"-"+mj,t+"-"+gj])}),[]),Ej=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function xj(e){var t=new Map,n=new Set,r=[];function i(e){n.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!n.has(e)){var r=t.get(e);r&&i(r)}})),r.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){n.has(e.name)||i(e)})),r}function _j(e){var t;return function(){return t||(t=new Promise((function(n){Promise.resolve().then((function(){t=void 0,n(e())}))}))),t}}var Aj={placement:"bottom",modifiers:[],strategy:"absolute"};function Tj(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some((function(e){return!(e&&"function"===typeof e.getBoundingClientRect)}))}function Sj(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,r=void 0===n?[]:n,i=t.defaultOptions,a=void 0===i?Aj:i;return function(e,t,n){void 0===n&&(n=a);var i={placement:"bottom",orderedModifiers:[],options:Object.assign({},Aj,a),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},o=[],s=!1,l={state:i,setOptions:function(n){var s="function"===typeof n?n(i.options):n;c(),i.options=Object.assign({},a,i.options,s),i.scrollParents={reference:BO(e)?aj(e):e.contextElement?aj(e.contextElement):[],popper:aj(t)};var u=function(e){var t=xj(e);return Ej.reduce((function(e,n){return e.concat(t.filter((function(e){return e.phase===n})))}),[])}(function(e){var t=e.reduce((function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e}),{});return Object.keys(t).map((function(e){return t[e]}))}([].concat(r,i.options.modifiers)));return i.orderedModifiers=u.filter((function(e){return e.enabled})),i.orderedModifiers.forEach((function(e){var t=e.name,n=e.options,r=void 0===n?{}:n,a=e.effect;if("function"===typeof a){var s=a({state:i,name:t,instance:l,options:r}),c=function(){};o.push(s||c)}})),l.update()},forceUpdate:function(){if(!s){var e=i.elements,t=e.reference,n=e.popper;if(Tj(t,n)){i.rects={reference:tj(t,lj(n),"fixed"===i.options.strategy),popper:nj(n)},i.reset=!1,i.placement=i.options.placement,i.orderedModifiers.forEach((function(e){return i.modifiersData[e.name]=Object.assign({},e.data)}));for(var r=0;r<i.orderedModifiers.length;r++)if(!0!==i.reset){var a=i.orderedModifiers[r],o=a.fn,c=a.options,u=void 0===c?{}:c,d=a.name;"function"===typeof o&&(i=o({state:i,options:u,name:d,instance:l})||i)}else i.reset=!1,r=-1}}},update:_j((function(){return new Promise((function(e){l.forceUpdate(),e(i)}))})),destroy:function(){c(),s=!0}};if(!Tj(e,t))return l;function c(){o.forEach((function(e){return e()})),o=[]}return l.setOptions(n).then((function(e){!s&&n.onFirstUpdate&&n.onFirstUpdate(e)})),l}}var kj={passive:!0};function Cj(e){return e.split("-")[0]}function Ij(e){return e.split("-")[1]}function Rj(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Dj(e){var t,n=e.reference,r=e.element,i=e.placement,a=i?Cj(i):null,o=i?Ij(i):null,s=n.x+n.width/2-r.width/2,l=n.y+n.height/2-r.height/2;switch(a){case cj:t={x:s,y:n.y-r.height};break;case uj:t={x:s,y:n.y+n.height};break;case dj:t={x:n.x+n.width,y:l};break;case hj:t={x:n.x-r.width,y:l};break;default:t={x:n.x,y:n.y}}var c=a?Rj(a):null;if(null!=c){var u="y"===c?"height":"width";switch(o){case mj:t[c]=t[c]-(n[u]/2-r[u]/2);break;case gj:t[c]=t[c]+(n[u]/2-r[u]/2)}}return t}var Lj={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Pj(e){var t,n=e.popper,r=e.popperRect,i=e.placement,a=e.variation,o=e.offsets,s=e.position,l=e.gpuAcceleration,c=e.adaptive,u=e.roundOffsets,d=e.isFixed,h=o.x,p=void 0===h?0:h,f=o.y,m=void 0===f?0:f,g="function"===typeof u?u({x:p,y:m}):{x:p,y:m};p=g.x,m=g.y;var v=o.hasOwnProperty("x"),y=o.hasOwnProperty("y"),b=hj,w=cj,E=window;if(c){var x=lj(n),_="clientHeight",A="clientWidth";if(x===UO(n)&&"static"!==JO(x=XO(n)).position&&"absolute"===s&&(_="scrollHeight",A="scrollWidth"),i===cj||(i===hj||i===dj)&&a===gj)w=uj,m-=(d&&x===E&&E.visualViewport?E.visualViewport.height:x[_])-r.height,m*=l?1:-1;if(i===hj||(i===cj||i===uj)&&a===gj)b=dj,p-=(d&&x===E&&E.visualViewport?E.visualViewport.width:x[A])-r.width,p*=l?1:-1}var T,S=Object.assign({position:s},c&&Lj),k=!0===u?function(e,t){var n=e.x,r=e.y,i=t.devicePixelRatio||1;return{x:HO(n*i)/i||0,y:HO(r*i)/i||0}}({x:p,y:m},UO(n)):{x:p,y:m};return p=k.x,m=k.y,l?Object.assign({},S,((T={})[w]=y?"0":"",T[b]=v?"0":"",T.transform=(E.devicePixelRatio||1)<=1?"translate("+p+"px, "+m+"px)":"translate3d("+p+"px, "+m+"px, 0)",T)):Object.assign({},S,((t={})[w]=y?m+"px":"",t[b]=v?p+"px":"",t.transform="",t))}const Mj={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var n=t.styles[e]||{},r=t.attributes[e]||{},i=t.elements[e];$O(i)&&QO(i)&&(Object.assign(i.style,n),Object.keys(r).forEach((function(e){var t=r[e];!1===t?i.removeAttribute(e):i.setAttribute(e,!0===t?"":t)})))}))},effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach((function(e){var r=t.elements[e],i=t.attributes[e]||{},a=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:n[e]).reduce((function(e,t){return e[t]="",e}),{});$O(r)&&QO(r)&&(Object.assign(r.style,a),Object.keys(i).forEach((function(e){r.removeAttribute(e)})))}))}},requires:["computeStyles"]};const Nj={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,r=e.name,i=n.offset,a=void 0===i?[0,0]:i,o=wj.reduce((function(e,n){return e[n]=function(e,t,n){var r=Cj(e),i=[hj,cj].indexOf(r)>=0?-1:1,a="function"===typeof n?n(Object.assign({},t,{placement:e})):n,o=a[0],s=a[1];return o=o||0,s=(s||0)*i,[hj,dj].indexOf(r)>=0?{x:s,y:o}:{x:o,y:s}}(n,t.rects,a),e}),{}),s=o[t.placement],l=s.x,c=s.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[r]=o}};var Oj={left:"right",right:"left",bottom:"top",top:"bottom"};function jj(e){return e.replace(/left|right|bottom|top/g,(function(e){return Oj[e]}))}var Fj={start:"end",end:"start"};function Uj(e){return e.replace(/start|end/g,(function(e){return Fj[e]}))}function Bj(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&VO(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function $j(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function Vj(e,t,n){return t===vj?$j(function(e,t){var n=UO(e),r=XO(e),i=n.visualViewport,a=r.clientWidth,o=r.clientHeight,s=0,l=0;if(i){a=i.width,o=i.height;var c=GO();(c||!c&&"fixed"===t)&&(s=i.offsetLeft,l=i.offsetTop)}return{width:a,height:o,x:s+ZO(e),y:l}}(e,n)):BO(t)?function(e,t){var n=KO(e,!1,"fixed"===t);return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}(t,n):$j(function(e){var t,n=XO(e),r=YO(e),i=null==(t=e.ownerDocument)?void 0:t.body,a=WO(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),o=WO(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),s=-r.scrollLeft+ZO(e),l=-r.scrollTop;return"rtl"===JO(i||n).direction&&(s+=WO(n.clientWidth,i?i.clientWidth:0)-a),{width:a,height:o,x:s,y:l}}(XO(e)))}function Wj(e,t,n,r){var i="clippingParents"===t?function(e){var t=aj(rj(e)),n=["absolute","fixed"].indexOf(JO(e).position)>=0&&$O(e)?lj(e):e;return BO(n)?t.filter((function(e){return BO(e)&&Bj(e,n)&&"body"!==QO(e)})):[]}(e):[].concat(t),a=[].concat(i,[n]),o=a[0],s=a.reduce((function(t,n){var i=Vj(e,n,r);return t.top=WO(i.top,t.top),t.right=zO(i.right,t.right),t.bottom=zO(i.bottom,t.bottom),t.left=WO(i.left,t.left),t}),Vj(e,o,r));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}function zj(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function Hj(e,t){return t.reduce((function(t,n){return t[n]=e,t}),{})}function qj(e,t){void 0===t&&(t={});var n=t,r=n.placement,i=void 0===r?e.placement:r,a=n.strategy,o=void 0===a?e.strategy:a,s=n.boundary,l=void 0===s?"clippingParents":s,c=n.rootBoundary,u=void 0===c?vj:c,d=n.elementContext,h=void 0===d?yj:d,p=n.altBoundary,f=void 0!==p&&p,m=n.padding,g=void 0===m?0:m,v=zj("number"!==typeof g?g:Hj(g,fj)),y=h===yj?"reference":yj,b=e.rects.popper,w=e.elements[f?y:h],E=Wj(BO(w)?w:w.contextElement||XO(e.elements.popper),l,u,o),x=KO(e.elements.reference),_=Dj({reference:x,element:b,strategy:"absolute",placement:i}),A=$j(Object.assign({},b,_)),T=h===yj?A:x,S={top:E.top-T.top+v.top,bottom:T.bottom-E.bottom+v.bottom,left:E.left-T.left+v.left,right:T.right-E.right+v.right},k=e.modifiersData.offset;if(h===yj&&k){var C=k[i];Object.keys(S).forEach((function(e){var t=[dj,uj].indexOf(e)>=0?1:-1,n=[cj,uj].indexOf(e)>=0?"y":"x";S[e]+=C[n]*t}))}return S}const Gj={name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var i=n.mainAxis,a=void 0===i||i,o=n.altAxis,s=void 0===o||o,l=n.fallbackPlacements,c=n.padding,u=n.boundary,d=n.rootBoundary,h=n.altBoundary,p=n.flipVariations,f=void 0===p||p,m=n.allowedAutoPlacements,g=t.options.placement,v=Cj(g),y=l||(v===g||!f?[jj(g)]:function(e){if(Cj(e)===pj)return[];var t=jj(e);return[Uj(e),t,Uj(t)]}(g)),b=[g].concat(y).reduce((function(e,n){return e.concat(Cj(n)===pj?function(e,t){void 0===t&&(t={});var n=t,r=n.placement,i=n.boundary,a=n.rootBoundary,o=n.padding,s=n.flipVariations,l=n.allowedAutoPlacements,c=void 0===l?wj:l,u=Ij(r),d=u?s?bj:bj.filter((function(e){return Ij(e)===u})):fj,h=d.filter((function(e){return c.indexOf(e)>=0}));0===h.length&&(h=d);var p=h.reduce((function(t,n){return t[n]=qj(e,{placement:n,boundary:i,rootBoundary:a,padding:o})[Cj(n)],t}),{});return Object.keys(p).sort((function(e,t){return p[e]-p[t]}))}(t,{placement:n,boundary:u,rootBoundary:d,padding:c,flipVariations:f,allowedAutoPlacements:m}):n)}),[]),w=t.rects.reference,E=t.rects.popper,x=new Map,_=!0,A=b[0],T=0;T<b.length;T++){var S=b[T],k=Cj(S),C=Ij(S)===mj,I=[cj,uj].indexOf(k)>=0,R=I?"width":"height",D=qj(t,{placement:S,boundary:u,rootBoundary:d,altBoundary:h,padding:c}),L=I?C?dj:hj:C?uj:cj;w[R]>E[R]&&(L=jj(L));var P=jj(L),M=[];if(a&&M.push(D[k]<=0),s&&M.push(D[L]<=0,D[P]<=0),M.every((function(e){return e}))){A=S,_=!1;break}x.set(S,M)}if(_)for(var N=function(e){var t=b.find((function(t){var n=x.get(t);if(n)return n.slice(0,e).every((function(e){return e}))}));if(t)return A=t,"break"},O=f?3:1;O>0;O--){if("break"===N(O))break}t.placement!==A&&(t.modifiersData[r]._skip=!0,t.placement=A,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function Kj(e,t,n){return WO(e,zO(t,n))}const Yj={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name,i=n.mainAxis,a=void 0===i||i,o=n.altAxis,s=void 0!==o&&o,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,d=n.padding,h=n.tether,p=void 0===h||h,f=n.tetherOffset,m=void 0===f?0:f,g=qj(t,{boundary:l,rootBoundary:c,padding:d,altBoundary:u}),v=Cj(t.placement),y=Ij(t.placement),b=!y,w=Rj(v),E="x"===w?"y":"x",x=t.modifiersData.popperOffsets,_=t.rects.reference,A=t.rects.popper,T="function"===typeof m?m(Object.assign({},t.rects,{placement:t.placement})):m,S="number"===typeof T?{mainAxis:T,altAxis:T}:Object.assign({mainAxis:0,altAxis:0},T),k=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,C={x:0,y:0};if(x){if(a){var I,R="y"===w?cj:hj,D="y"===w?uj:dj,L="y"===w?"height":"width",P=x[w],M=P+g[R],N=P-g[D],O=p?-A[L]/2:0,j=y===mj?_[L]:A[L],F=y===mj?-A[L]:-_[L],U=t.elements.arrow,B=p&&U?nj(U):{width:0,height:0},$=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},V=$[R],W=$[D],z=Kj(0,_[L],B[L]),H=b?_[L]/2-O-z-V-S.mainAxis:j-z-V-S.mainAxis,q=b?-_[L]/2+O+z+W+S.mainAxis:F+z+W+S.mainAxis,G=t.elements.arrow&&lj(t.elements.arrow),K=G?"y"===w?G.clientTop||0:G.clientLeft||0:0,Y=null!=(I=null==k?void 0:k[w])?I:0,Q=P+q-Y,X=Kj(p?zO(M,P+H-Y-K):M,P,p?WO(N,Q):N);x[w]=X,C[w]=X-P}if(s){var Z,J="x"===w?cj:hj,ee="x"===w?uj:dj,te=x[E],ne="y"===E?"height":"width",re=te+g[J],ie=te-g[ee],ae=-1!==[cj,hj].indexOf(v),oe=null!=(Z=null==k?void 0:k[E])?Z:0,se=ae?re:te-_[ne]-A[ne]-oe+S.altAxis,le=ae?te+_[ne]+A[ne]-oe-S.altAxis:ie,ce=p&&ae?function(e,t,n){var r=Kj(e,t,n);return r>n?n:r}(se,te,le):Kj(p?se:re,te,p?le:ie);x[E]=ce,C[E]=ce-te}t.modifiersData[r]=C}},requiresIfExists:["offset"]};const Qj={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,r=e.name,i=e.options,a=n.elements.arrow,o=n.modifiersData.popperOffsets,s=Cj(n.placement),l=Rj(s),c=[hj,dj].indexOf(s)>=0?"height":"width";if(a&&o){var u=function(e,t){return zj("number"!==typeof(e="function"===typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:Hj(e,fj))}(i.padding,n),d=nj(a),h="y"===l?cj:hj,p="y"===l?uj:dj,f=n.rects.reference[c]+n.rects.reference[l]-o[l]-n.rects.popper[c],m=o[l]-n.rects.reference[l],g=lj(a),v=g?"y"===l?g.clientHeight||0:g.clientWidth||0:0,y=f/2-m/2,b=u[h],w=v-d[c]-u[p],E=v/2-d[c]/2+y,x=Kj(b,E,w),_=l;n.modifiersData[r]=((t={})[_]=x,t.centerOffset=x-E,t)}},effect:function(e){var t=e.state,n=e.options.element,r=void 0===n?"[data-popper-arrow]":n;null!=r&&("string"!==typeof r||(r=t.elements.popper.querySelector(r)))&&Bj(t.elements.popper,r)&&(t.elements.arrow=r)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Xj(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function Zj(e){return[cj,dj,uj,hj].some((function(t){return e[t]>=0}))}var Jj=Sj({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,r=e.options,i=r.scroll,a=void 0===i||i,o=r.resize,s=void 0===o||o,l=UO(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return a&&c.forEach((function(e){e.addEventListener("scroll",n.update,kj)})),s&&l.addEventListener("resize",n.update,kj),function(){a&&c.forEach((function(e){e.removeEventListener("scroll",n.update,kj)})),s&&l.removeEventListener("resize",n.update,kj)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=Dj({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,r=n.gpuAcceleration,i=void 0===r||r,a=n.adaptive,o=void 0===a||a,s=n.roundOffsets,l=void 0===s||s,c={placement:Cj(t.placement),variation:Ij(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,Pj(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:l})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,Pj(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}},Mj,Nj,Gj,Yj,Qj,{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,r=t.rects.reference,i=t.rects.popper,a=t.modifiersData.preventOverflow,o=qj(t,{elementContext:"reference"}),s=qj(t,{altBoundary:!0}),l=Xj(o,r),c=Xj(s,i,a),u=Zj(l),d=Zj(c);t.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:d},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}}]});function eF(e){return(0,_T.Ay)("MuiPopper",e)}(0,Ge.A)("MuiPopper",["root"]);const tF=["anchorEl","children","direction","disablePortal","modifiers","open","placement","popperOptions","popperRef","slotProps","slots","TransitionProps","ownerState"],nF=["anchorEl","children","container","direction","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","style","transition","slotProps","slots"];function rF(e){return"function"===typeof e?e():e}function iF(e){return void 0!==e.nodeType}const aF={},oF=t.forwardRef((function(e,n){var r;const{anchorEl:i,children:a,direction:o,disablePortal:s,modifiers:l,open:c,placement:u,popperOptions:d,popperRef:h,slotProps:p={},slots:f={},TransitionProps:m}=e,g=(0,Le.A)(e,tF),v=t.useRef(null),y=(0,WT.A)(v,n),b=t.useRef(null),w=(0,WT.A)(b,h),E=t.useRef(w);(0,mC.A)((()=>{E.current=w}),[w]),t.useImperativeHandle(h,(()=>b.current),[]);const x=function(e,t){if("ltr"===t)return e;switch(e){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return e}}(u,o),[_,A]=t.useState(x),[T,S]=t.useState(rF(i));t.useEffect((()=>{b.current&&b.current.forceUpdate()})),t.useEffect((()=>{i&&S(rF(i))}),[i]),(0,mC.A)((()=>{if(!T||!c)return;let e=[{name:"preventOverflow",options:{altBoundary:s}},{name:"flip",options:{altBoundary:s}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:e=>{let{state:t}=e;(e=>{A(e.placement)})(t)}}];null!=l&&(e=e.concat(l)),d&&null!=d.modifiers&&(e=e.concat(d.modifiers));const t=Jj(T,v.current,(0,De.A)({placement:x},d,{modifiers:e}));return E.current(t),()=>{t.destroy(),E.current(null)}}),[T,s,l,c,d,x]);const k={placement:_};null!==m&&(k.TransitionProps=m);const C=(e=>{const{classes:t}=e;return(0,yT.A)({root:["root"]},eF,t)})(e),I=null!=(r=f.root)?r:"div",R=rk({elementType:I,externalSlotProps:p.root,externalForwardedProps:g,additionalProps:{role:"tooltip",ref:y},ownerState:e,className:C.root});return(0,Ve.jsx)(I,(0,De.A)({},R,{children:"function"===typeof a?a(k):a}))})),sF=t.forwardRef((function(e,n){const{anchorEl:r,children:i,container:a,direction:o="ltr",disablePortal:s=!1,keepMounted:l=!1,modifiers:c,open:u,placement:d="bottom",popperOptions:h=aF,popperRef:p,style:f,transition:m=!1,slotProps:g={},slots:v={}}=e,y=(0,Le.A)(e,nF),[b,w]=t.useState(!0);if(!l&&!u&&(!m||b))return null;let E;if(a)E=a;else if(r){const e=rF(r);E=e&&iF(e)?(0,uC.A)(e).body:(0,uC.A)(null).body}const x=u||!l||m&&!b?void 0:"none",_=m?{in:u,onEnter:()=>{w(!1)},onExited:()=>{w(!0)}}:void 0;return(0,Ve.jsx)(vC,{disablePortal:s,container:E,children:(0,Ve.jsx)(oF,(0,De.A)({anchorEl:r,direction:o,disablePortal:s,modifiers:c,ref:n,open:m?!b:u,placement:d,popperOptions:h,popperRef:p,slotProps:g,slots:v},y,{style:(0,De.A)({position:"fixed",top:0,left:0,display:x},f),TransitionProps:_,children:i}))})})),lF=sF,cF=["anchorEl","component","components","componentsProps","container","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","transition","slots","slotProps"],uF=(0,bT.Ay)(lF,{name:"MuiPopper",slot:"Root",overridesResolver:(e,t)=>t.root})({}),dF=t.forwardRef((function(e,t){var n;const r=(0,FO.A)(),i=(0,Ze.b)({props:e,name:"MuiPopper"}),{anchorEl:a,component:o,components:s,componentsProps:l,container:c,disablePortal:u,keepMounted:d,modifiers:h,open:p,placement:f,popperOptions:m,popperRef:g,transition:v,slots:y,slotProps:b}=i,w=(0,Le.A)(i,cF),E=null!=(n=null==y?void 0:y.root)?n:null==s?void 0:s.Root,x=(0,De.A)({anchorEl:a,container:c,disablePortal:u,keepMounted:d,modifiers:h,open:p,placement:f,popperOptions:m,popperRef:g,transition:v},w);return(0,Ve.jsx)(uF,(0,De.A)({as:o,direction:null==r?void 0:r.direction,slots:{root:E},slotProps:null!=b?b:l},x,{ref:t}))})),hF=dF;function pF(e){return(0,_T.Ay)("MuiPickersPopper",e)}(0,Ge.A)("MuiPickersPopper",["root","paper"]);const fF=function(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:document).activeElement;return e?e.shadowRoot?fF(e.shadowRoot):e:null},mF="@media (pointer: fine)",gF="undefined"!==typeof navigator&&navigator.userAgent.match(/android\s(\d+)|OS\s(\d+)/i),vF=gF&&gF[1]?parseInt(gF[1],10):null,yF=gF&&gF[2]?parseInt(gF[2],10):null,bF=vF&&vF<10||yF&&yF<13||!1,wF=()=>TN("@media (prefers-reduced-motion: reduce)",{defaultMatches:!1})||bF,EF=["PaperComponent","popperPlacement","ownerState","children","paperSlotProps","paperClasses","onPaperClick","onPaperTouchStart"],xF=(0,bT.Ay)(hF,{name:"MuiPickersPopper",slot:"Root",overridesResolver:(e,t)=>t.root})((e=>{let{theme:t}=e;return{zIndex:t.zIndex.modal}})),_F=(0,bT.Ay)(CT,{name:"MuiPickersPopper",slot:"Paper",overridesResolver:(e,t)=>t.paper})((e=>{let{ownerState:t}=e;return(0,De.A)({outline:0,transformOrigin:"top center"},t.placement.includes("top")&&{transformOrigin:"bottom center"})}));const AF=t.forwardRef(((e,t)=>{const{PaperComponent:n,popperPlacement:r,ownerState:i,children:a,paperSlotProps:o,paperClasses:s,onPaperClick:l,onPaperTouchStart:c}=e,u=(0,Le.A)(e,EF),d=(0,De.A)({},i,{placement:r}),h=jO({elementType:n,externalSlotProps:o,additionalProps:{tabIndex:-1,elevation:8,ref:t},className:s,ownerState:d});return(0,Ve.jsx)(n,(0,De.A)({},u,h,{onClick:e=>{var t;l(e),null==(t=h.onClick)||t.call(h,e)},onTouchStart:e=>{var t;c(e),null==(t=h.onTouchStart)||t.call(h,e)},ownerState:d,children:a}))}));function TF(e){var n,r,i,a;const o=SN({props:e,name:"MuiPickersPopper"}),{anchorEl:s,children:l,containerRef:c=null,shouldRestoreFocus:u,onBlur:d,onDismiss:h,open:p,role:f,placement:m,slots:g,slotProps:v,reduceAnimations:y}=o;t.useEffect((()=>{function e(e){!p||"Escape"!==e.key&&"Esc"!==e.key||h()}return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}}),[h,p]);const b=t.useRef(null);t.useEffect((()=>{"tooltip"===f||u&&!u()||(p?b.current=fF(document):b.current&&b.current instanceof HTMLElement&&setTimeout((()=>{b.current instanceof HTMLElement&&b.current.focus()})))}),[p,f,u]);const[w,E,x]=function(e,n){const r=t.useRef(!1),i=t.useRef(!1),a=t.useRef(null),o=t.useRef(!1);t.useEffect((()=>{if(e)return document.addEventListener("mousedown",t,!0),document.addEventListener("touchstart",t,!0),()=>{document.removeEventListener("mousedown",t,!0),document.removeEventListener("touchstart",t,!0),o.current=!1};function t(){o.current=!0}}),[e]);const s=(0,kC.A)((e=>{if(!o.current)return;const t=i.current;i.current=!1;const s=(0,uC.A)(a.current);if(!a.current||"clientX"in e&&function(e,t){return t.documentElement.clientWidth<e.clientX||t.documentElement.clientHeight<e.clientY}(e,s))return;if(r.current)return void(r.current=!1);let l;l=e.composedPath?e.composedPath().indexOf(a.current)>-1:!s.documentElement.contains(e.target)||a.current.contains(e.target),l||t||n(e)})),l=()=>{i.current=!0};return t.useEffect((()=>{if(e){const e=(0,uC.A)(a.current),t=()=>{r.current=!0};return e.addEventListener("touchstart",s),e.addEventListener("touchmove",t),()=>{e.removeEventListener("touchstart",s),e.removeEventListener("touchmove",t)}}}),[e,s]),t.useEffect((()=>{if(e){const e=(0,uC.A)(a.current);return e.addEventListener("click",s),()=>{e.removeEventListener("click",s),i.current=!1}}}),[e,s]),[a,l,l]}(p,null!=d?d:h),_=t.useRef(null),A=(0,WT.A)(_,c),T=(0,WT.A)(A,w),S=o,k=(e=>{const{classes:t}=e;return(0,yT.A)({root:["root"],paper:["paper"]},pF,t)})(S),C=wF(),I=null!=y?y:C,R=(null!=(n=null==g?void 0:g.desktopTransition)?n:I)?EC:cC,D=null!=(r=null==g?void 0:g.desktopTrapFocus)?r:fC,L=null!=(i=null==g?void 0:g.desktopPaper)?i:_F,P=null!=(a=null==g?void 0:g.popper)?a:xF,M=jO({elementType:P,externalSlotProps:null==v?void 0:v.popper,additionalProps:{transition:!0,role:f,open:p,anchorEl:s,placement:m,onKeyDown:e=>{"Escape"===e.key&&(e.stopPropagation(),h())}},className:k.root,ownerState:o});return(0,Ve.jsx)(P,(0,De.A)({},M,{children:e=>{let{TransitionProps:t,placement:n}=e;return(0,Ve.jsx)(D,(0,De.A)({open:p,disableAutoFocus:!0,disableRestoreFocus:!0,disableEnforceFocus:"tooltip"===f,isEnabled:()=>!0},null==v?void 0:v.desktopTrapFocus,{children:(0,Ve.jsx)(R,(0,De.A)({},t,null==v?void 0:v.desktopTransition,{children:(0,Ve.jsx)(AF,{PaperComponent:L,ownerState:S,popperPlacement:n,ref:T,onPaperClick:E,onPaperTouchStart:x,paperClasses:k.paper,paperSlotProps:null==v?void 0:v.desktopPaper,children:l})}))}))}}))}var SF=n(3931);function kF(e,n,r,i){const{value:a,onError:o}=e,s=yO(),l=t.useRef(i),c=n({adapter:s,value:a,props:e});return t.useEffect((()=>{o&&!r(c,l.current)&&o(c,a),l.current=c}),[r,o,l,c,a]),c}const CF=e=>{let{timezone:n,value:r,defaultValue:i,onChange:a,valueManager:o}=e;var s,l;const c=bO(),u=t.useRef(i),d=null!=(s=null!=r?r:u.current)?s:o.emptyValue,h=t.useMemo((()=>o.getTimezone(c,d)),[c,o,d]),p=(0,kC.A)((e=>null==h?e:o.setTimezone(c,h,e))),f=null!=(l=null!=n?n:h)?l:"default";return{value:t.useMemo((()=>o.setTimezone(c,f,d)),[o,c,f,d]),handleValueChange:(0,kC.A)((function(e){const t=p(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];null==a||a(t,...r)})),timezone:f}},IF=e=>{let{name:t,timezone:n,value:r,defaultValue:i,onChange:a,valueManager:o}=e;const[s,l]=(0,SF.A)({name:t,state:"value",controlled:r,default:null!=i?i:o.emptyValue}),c=(0,kC.A)((function(e){l(e);for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];null==a||a(e,...n)}));return CF({timezone:n,value:s,defaultValue:void 0,onChange:c,valueManager:o})},RF=e=>{let{props:n,valueManager:r,valueType:i,wrapperVariant:a,validator:o}=e;const{onAccept:s,onChange:l,value:c,defaultValue:u,closeOnSelect:d="desktop"===a,selectedSections:h,onSelectedSectionsChange:p,timezone:f}=n,{current:m}=t.useRef(u),{current:g}=t.useRef(void 0!==c);const v=bO(),y=yO(),[b,w]=(0,SF.A)({controlled:h,default:null,name:"usePickerValue",state:"selectedSections"}),{isOpen:E,setIsOpen:x}=(e=>{let{open:n,onOpen:r,onClose:i}=e;const a=t.useRef("boolean"===typeof n).current,[o,s]=t.useState(!1);return t.useEffect((()=>{if(a){if("boolean"!==typeof n)throw new Error("You must not mix controlling and uncontrolled mode for `open` prop");s(n)}}),[a,n]),{isOpen:o,setIsOpen:t.useCallback((e=>{a||s(e),e&&r&&r(),!e&&i&&i()}),[a,r,i])}})(n),[_,A]=t.useState((()=>{let e;return e=void 0!==c?c:void 0!==m?m:r.emptyValue,{draft:e,lastPublishedValue:e,lastCommittedValue:e,lastControlledValue:c,hasBeenModifiedSinceMount:!1}})),{timezone:T,handleValueChange:S}=CF({timezone:f,value:c,defaultValue:m,onChange:l,valueManager:r});kF((0,De.A)({},n,{value:_.draft,timezone:T}),o,r.isSameError,r.defaultErrorState);const k=(0,kC.A)((e=>{const t={action:e,dateState:_,hasChanged:t=>!r.areValuesEqual(v,e.value,t),isControlled:g,closeOnSelect:d},i=(e=>{const{action:t,hasChanged:n,dateState:r,isControlled:i}=e,a=!i&&!r.hasBeenModifiedSinceMount;return"setValueFromField"===t.name||("setValueFromAction"===t.name?!(!a||!["accept","today","clear"].includes(t.pickerAction))||n(r.lastPublishedValue):("setValueFromView"===t.name&&"shallow"!==t.selectionState||"setValueFromShortcut"===t.name)&&(!!a||n(r.lastPublishedValue)))})(t),a=(e=>{const{action:t,hasChanged:n,dateState:r,isControlled:i,closeOnSelect:a}=e,o=!i&&!r.hasBeenModifiedSinceMount;return"setValueFromAction"===t.name?!(!o||!["accept","today","clear"].includes(t.pickerAction))||n(r.lastCommittedValue):"setValueFromView"===t.name&&"finish"===t.selectionState&&a?!!o||n(r.lastCommittedValue):"setValueFromShortcut"===t.name&&"accept"===t.changeImportance&&n(r.lastCommittedValue)})(t),l=(e=>{const{action:t,closeOnSelect:n}=e;return"setValueFromAction"===t.name||("setValueFromView"===t.name?"finish"===t.selectionState&&n:"setValueFromShortcut"===t.name&&"accept"===t.changeImportance)})(t);if(A((t=>(0,De.A)({},t,{draft:e.value,lastPublishedValue:i?e.value:t.lastPublishedValue,lastCommittedValue:a?e.value:t.lastCommittedValue,hasBeenModifiedSinceMount:!0}))),i){const t={validationError:"setValueFromField"===e.name?e.context.validationError:o({adapter:y,value:e.value,props:(0,De.A)({},n,{value:e.value,timezone:T})})};"setValueFromShortcut"===e.name&&null!=e.shortcut&&(t.shortcut=e.shortcut),S(e.value,t)}a&&s&&s(e.value),l&&x(!1)}));if(void 0!==c&&(void 0===_.lastControlledValue||!r.areValuesEqual(v,_.lastControlledValue,c))){const e=r.areValuesEqual(v,_.draft,c);A((t=>(0,De.A)({},t,{lastControlledValue:c},e?{}:{lastCommittedValue:c,lastPublishedValue:c,draft:c,hasBeenModifiedSinceMount:!0})))}const C=(0,kC.A)((()=>{k({value:r.emptyValue,name:"setValueFromAction",pickerAction:"clear"})})),I=(0,kC.A)((()=>{k({value:_.lastPublishedValue,name:"setValueFromAction",pickerAction:"accept"})})),R=(0,kC.A)((()=>{k({value:_.lastPublishedValue,name:"setValueFromAction",pickerAction:"dismiss"})})),D=(0,kC.A)((()=>{k({value:_.lastCommittedValue,name:"setValueFromAction",pickerAction:"cancel"})})),L=(0,kC.A)((()=>{k({value:r.getTodayValue(v,T,i),name:"setValueFromAction",pickerAction:"today"})})),P=(0,kC.A)((()=>x(!0))),M=(0,kC.A)((()=>x(!1))),N=(0,kC.A)((function(e){return k({name:"setValueFromView",value:e,selectionState:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"partial"})})),O=(0,kC.A)(((e,t,n)=>k({name:"setValueFromShortcut",value:e,changeImportance:null!=t?t:"accept",shortcut:n}))),j=(0,kC.A)(((e,t)=>k({name:"setValueFromField",value:e,context:t}))),F=(0,kC.A)((e=>{w(e),null==p||p(e)})),U={onClear:C,onAccept:I,onDismiss:R,onCancel:D,onSetToday:L,onOpen:P,onClose:M},B={value:_.draft,onChange:j,selectedSections:b,onSelectedSectionsChange:F},$=t.useMemo((()=>r.cleanValue(v,_.draft)),[v,r,_.draft]),V={value:$,onChange:N,onClose:M,open:E,onSelectedSectionsChange:F},W=(0,De.A)({},U,{value:$,onChange:N,onSelectShortcut:O,isValid:e=>{const t=o({adapter:y,value:e,props:(0,De.A)({},n,{value:e,timezone:T})});return!r.hasError(t)}});return{open:E,fieldProps:B,viewProps:V,layoutProps:W,actions:U}};function DF(e){let{onChange:n,onViewChange:r,openTo:i,view:a,views:o,autoFocus:s,focusedView:l,onFocusedViewChange:c}=e;var u,d;const h=t.useRef(i),p=t.useRef(o),f=t.useRef(o.includes(i)?i:o[0]),[m,g]=(0,SF.A)({name:"useViews",state:"view",controlled:a,default:f.current}),v=t.useRef(s?m:null),[y,b]=(0,SF.A)({name:"useViews",state:"focusedView",controlled:l,default:v.current});t.useEffect((()=>{(h.current&&h.current!==i||p.current&&p.current.some((e=>!o.includes(e))))&&(g(o.includes(i)?i:o[0]),p.current=o,h.current=i)}),[i,g,m,o]);const w=o.indexOf(m),E=null!=(u=o[w-1])?u:null,x=null!=(d=o[w+1])?d:null,_=(0,kC.A)(((e,t)=>{b(t?e:t=>e===t?null:t),null==c||c(e,t)})),A=(0,kC.A)((e=>{_(e,!0),e!==m&&(g(e),r&&r(e))})),T=(0,kC.A)((()=>{x&&A(x)})),S=(0,kC.A)(((e,t,r)=>{const i="finish"===t,a=r?o.indexOf(r)<o.length-1:Boolean(x);if(n(e,i&&a?"partial":t,r),r&&r!==m){const e=o[o.indexOf(r)+1];e&&A(e)}else i&&T()}));return{view:m,setView:A,focusedView:y,setFocusedView:_,nextView:x,previousView:E,defaultView:o.includes(i)?i:o[0],goToNextView:T,setValueAndGoToNextView:S}}const LF=["className","sx"],PF=e=>{let{props:n,propsFromPickerValue:r,additionalViewProps:i,inputRef:a,autoFocusView:o}=e;const{onChange:s,open:l,onSelectedSectionsChange:c,onClose:u}=r,{view:d,views:h,openTo:p,onViewChange:f,viewRenderers:m,timezone:g}=n,v=(0,Le.A)(n,LF),{view:y,setView:b,defaultView:w,focusedView:E,setFocusedView:x,setValueAndGoToNextView:_}=DF({view:d,views:h,openTo:p,onChange:s,onViewChange:f,autoFocus:o}),{hasUIView:A,viewModeLookup:T}=t.useMemo((()=>h.reduce(((e,t)=>{let n;return n=null!=m[t]?"UI":"field",e.viewModeLookup[t]=n,"UI"===n&&(e.hasUIView=!0),e}),{hasUIView:!1,viewModeLookup:{}})),[m,h]),S=t.useMemo((()=>h.reduce(((e,t)=>null!=m[t]&&(e=>$N.includes(e))(t)?e+1:e),0)),[m,h]),k=T[y],C=(0,kC.A)((()=>"UI"===k)),[I,R]=t.useState("UI"===k?y:null);I!==y&&"UI"===T[y]&&R(y),(0,mC.A)((()=>{"field"===k&&l&&(u(),setTimeout((()=>{null==a||a.current.focus(),c(y)})))}),[y]),(0,mC.A)((()=>{if(!l)return;let e=y;"field"===k&&null!=I&&(e=I),e!==w&&"UI"===T[e]&&"UI"===T[w]&&(e=w),e!==y&&b(e),x(e,!0)}),[l]);return{hasUIView:A,shouldRestoreFocus:C,layoutProps:{views:h,view:I,onViewChange:b},renderCurrentView:()=>{if(null==I)return null;const e=m[I];return null==e?null:e((0,De.A)({},v,i,r,{views:h,timezone:g,onChange:_,view:I,onViewChange:b,focusedView:E,onFocusedViewChange:x,showViewSwitcher:S>1,timeViewsCount:S}))}}};function MF(){return"undefined"===typeof window?"portrait":window.screen&&window.screen.orientation&&window.screen.orientation.angle?90===Math.abs(window.screen.orientation.angle)?"landscape":"portrait":window.orientation&&90===Math.abs(Number(window.orientation))?"landscape":"portrait"}const NF=(e,n)=>{const[r,i]=t.useState(MF);if((0,mC.A)((()=>{const e=()=>{i(MF())};return window.addEventListener("orientationchange",e),()=>{window.removeEventListener("orientationchange",e)}}),[]),a=e,o=["hours","minutes","seconds"],Array.isArray(o)?o.every((e=>-1!==a.indexOf(e))):-1!==a.indexOf(o))return!1;var a,o;return"landscape"===(n||r)},OF=(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"warning",n=!1;const r=Array.isArray(e)?e.join("\n"):e}(["The `renderInput` prop has been removed in version 6.0 of the Date and Time Pickers.","You can replace it with the `textField` component slot in most cases.","For more information, please have a look at the migration guide (https://mui.com/x/migration/migration-pickers-v5/#input-renderer-required-in-v5)."]),e=>{let{props:t,valueManager:n,valueType:r,wrapperVariant:i,inputRef:a,additionalViewProps:o,validator:s,autoFocusView:l}=e;const c=RF({props:t,valueManager:n,valueType:r,wrapperVariant:i,validator:s}),u=PF({props:t,inputRef:a,additionalViewProps:o,autoFocusView:l,propsFromPickerValue:c.viewProps}),d=(e=>{let{props:t,propsFromPickerValue:n,propsFromPickerViews:r,wrapperVariant:i}=e;const{orientation:a}=t,o=NF(r.views,a);return{layoutProps:(0,De.A)({},r,n,{isLandscape:o,wrapperVariant:i,disabled:t.disabled,readOnly:t.readOnly})}})({props:t,wrapperVariant:i,propsFromPickerValue:c.layoutProps,propsFromPickerViews:u.layoutProps});return{open:c.open,actions:c.actions,fieldProps:c.fieldProps,renderCurrentView:u.renderCurrentView,hasUIView:u.hasUIView,shouldRestoreFocus:u.shouldRestoreFocus,layoutProps:d.layoutProps}});function jF(e){return(0,_T.Ay)("MuiPickersLayout",e)}const FF=(0,Ge.A)("MuiPickersLayout",["root","landscape","contentWrapper","toolbar","actionBar","tabs","shortcuts"]);function UF(e){return(0,_T.Ay)("MuiDialogActions",e)}(0,Ge.A)("MuiDialogActions",["root","spacing"]);const BF=["className","disableSpacing"],$F=(0,bT.Ay)("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disableSpacing&&t.spacing]}})((e=>{let{ownerState:t}=e;return(0,De.A)({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},!t.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})})),VF=t.forwardRef((function(e,t){const n=(0,Ze.b)({props:e,name:"MuiDialogActions"}),{className:r,disableSpacing:i=!1}=n,a=(0,Le.A)(n,BF),o=(0,De.A)({},n,{disableSpacing:i}),s=(e=>{const{classes:t,disableSpacing:n}=e,r={root:["root",!n&&"spacing"]};return(0,yT.A)(r,UF,t)})(o);return(0,Ve.jsx)($F,(0,De.A)({className:(0,Pe.A)(s.root,r),ownerState:o,ref:t},a))})),WF=VF,zF=["onAccept","onClear","onCancel","onSetToday","actions"];function HF(e){const{onAccept:t,onClear:n,onCancel:r,onSetToday:i,actions:a}=e,o=(0,Le.A)(e,zF),s=EO();if(null==a||0===a.length)return null;const l=null==a?void 0:a.map((e=>{switch(e){case"clear":return(0,Ve.jsx)(Ak,{onClick:n,children:s.clearButtonLabel},e);case"cancel":return(0,Ve.jsx)(Ak,{onClick:r,children:s.cancelButtonLabel},e);case"accept":return(0,Ve.jsx)(Ak,{onClick:t,children:s.okButtonLabel},e);case"today":return(0,Ve.jsx)(Ak,{onClick:i,children:s.todayButtonLabel},e);default:return null}}));return(0,Ve.jsx)(WF,(0,De.A)({},o,{children:l}))}const qF=(0,BT.A)((0,Ve.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel");function GF(e){return(0,_T.Ay)("MuiChip",e)}const KF=(0,Ge.A)("MuiChip",["root","sizeSmall","sizeMedium","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]),YF=["avatar","className","clickable","color","component","deleteIcon","disabled","icon","label","onClick","onDelete","onKeyDown","onKeyUp","size","variant","tabIndex","skipFocusWhenDisabled"],QF=(0,bT.Ay)("div",{name:"MuiChip",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,{color:r,iconColor:i,clickable:a,onDelete:o,size:s,variant:l}=n;return[{[`& .${KF.avatar}`]:t.avatar},{[`& .${KF.avatar}`]:t[`avatar${(0,wT.A)(s)}`]},{[`& .${KF.avatar}`]:t[`avatarColor${(0,wT.A)(r)}`]},{[`& .${KF.icon}`]:t.icon},{[`& .${KF.icon}`]:t[`icon${(0,wT.A)(s)}`]},{[`& .${KF.icon}`]:t[`iconColor${(0,wT.A)(i)}`]},{[`& .${KF.deleteIcon}`]:t.deleteIcon},{[`& .${KF.deleteIcon}`]:t[`deleteIcon${(0,wT.A)(s)}`]},{[`& .${KF.deleteIcon}`]:t[`deleteIconColor${(0,wT.A)(r)}`]},{[`& .${KF.deleteIcon}`]:t[`deleteIcon${(0,wT.A)(l)}Color${(0,wT.A)(r)}`]},t.root,t[`size${(0,wT.A)(s)}`],t[`color${(0,wT.A)(r)}`],a&&t.clickable,a&&"default"!==r&&t[`clickableColor${(0,wT.A)(r)})`],o&&t.deletable,o&&"default"!==r&&t[`deletableColor${(0,wT.A)(r)}`],t[l],t[`${l}${(0,wT.A)(r)}`]]}})((e=>{let{theme:t,ownerState:n}=e;const r="light"===t.palette.mode?t.palette.grey[700]:t.palette.grey[300];return(0,De.A)({maxWidth:"100%",fontFamily:t.typography.fontFamily,fontSize:t.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:(t.vars||t).palette.text.primary,backgroundColor:(t.vars||t).palette.action.selected,borderRadius:16,whiteSpace:"nowrap",transition:t.transitions.create(["background-color","box-shadow"]),cursor:"unset",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box",[`&.${KF.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity,pointerEvents:"none"},[`& .${KF.avatar}`]:{marginLeft:5,marginRight:-6,width:24,height:24,color:t.vars?t.vars.palette.Chip.defaultAvatarColor:r,fontSize:t.typography.pxToRem(12)},[`& .${KF.avatarColorPrimary}`]:{color:(t.vars||t).palette.primary.contrastText,backgroundColor:(t.vars||t).palette.primary.dark},[`& .${KF.avatarColorSecondary}`]:{color:(t.vars||t).palette.secondary.contrastText,backgroundColor:(t.vars||t).palette.secondary.dark},[`& .${KF.avatarSmall}`]:{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:t.typography.pxToRem(10)},[`& .${KF.icon}`]:(0,De.A)({marginLeft:5,marginRight:-6},"small"===n.size&&{fontSize:18,marginLeft:4,marginRight:-4},n.iconColor===n.color&&(0,De.A)({color:t.vars?t.vars.palette.Chip.defaultIconColor:r},"default"!==n.color&&{color:"inherit"})),[`& .${KF.deleteIcon}`]:(0,De.A)({WebkitTapHighlightColor:"transparent",color:t.vars?`rgba(${t.vars.palette.text.primaryChannel} / 0.26)`:(0,ET.X4)(t.palette.text.primary,.26),fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:t.vars?`rgba(${t.vars.palette.text.primaryChannel} / 0.4)`:(0,ET.X4)(t.palette.text.primary,.4)}},"small"===n.size&&{fontSize:16,marginRight:4,marginLeft:-4},"default"!==n.color&&{color:t.vars?`rgba(${t.vars.palette[n.color].contrastTextChannel} / 0.7)`:(0,ET.X4)(t.palette[n.color].contrastText,.7),"&:hover, &:active":{color:(t.vars||t).palette[n.color].contrastText}})},"small"===n.size&&{height:24},"default"!==n.color&&{backgroundColor:(t.vars||t).palette[n.color].main,color:(t.vars||t).palette[n.color].contrastText},n.onDelete&&{[`&.${KF.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.action.selectedChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:(0,ET.X4)(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},n.onDelete&&"default"!==n.color&&{[`&.${KF.focusVisible}`]:{backgroundColor:(t.vars||t).palette[n.color].dark}})}),(e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({},n.clickable&&{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.selectedChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:(0,ET.X4)(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity)},[`&.${KF.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.action.selectedChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:(0,ET.X4)(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)},"&:active":{boxShadow:(t.vars||t).shadows[1]}},n.clickable&&"default"!==n.color&&{[`&:hover, &.${KF.focusVisible}`]:{backgroundColor:(t.vars||t).palette[n.color].dark}})}),(e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({},"outlined"===n.variant&&{backgroundColor:"transparent",border:t.vars?`1px solid ${t.vars.palette.Chip.defaultBorder}`:`1px solid ${"light"===t.palette.mode?t.palette.grey[400]:t.palette.grey[700]}`,[`&.${KF.clickable}:hover`]:{backgroundColor:(t.vars||t).palette.action.hover},[`&.${KF.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`& .${KF.avatar}`]:{marginLeft:4},[`& .${KF.avatarSmall}`]:{marginLeft:2},[`& .${KF.icon}`]:{marginLeft:4},[`& .${KF.iconSmall}`]:{marginLeft:2},[`& .${KF.deleteIcon}`]:{marginRight:5},[`& .${KF.deleteIconSmall}`]:{marginRight:3}},"outlined"===n.variant&&"default"!==n.color&&{color:(t.vars||t).palette[n.color].main,border:`1px solid ${t.vars?`rgba(${t.vars.palette[n.color].mainChannel} / 0.7)`:(0,ET.X4)(t.palette[n.color].main,.7)}`,[`&.${KF.clickable}:hover`]:{backgroundColor:t.vars?`rgba(${t.vars.palette[n.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:(0,ET.X4)(t.palette[n.color].main,t.palette.action.hoverOpacity)},[`&.${KF.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette[n.color].mainChannel} / ${t.vars.palette.action.focusOpacity})`:(0,ET.X4)(t.palette[n.color].main,t.palette.action.focusOpacity)},[`& .${KF.deleteIcon}`]:{color:t.vars?`rgba(${t.vars.palette[n.color].mainChannel} / 0.7)`:(0,ET.X4)(t.palette[n.color].main,.7),"&:hover, &:active":{color:(t.vars||t).palette[n.color].main}}})})),XF=(0,bT.Ay)("span",{name:"MuiChip",slot:"Label",overridesResolver:(e,t)=>{const{ownerState:n}=e,{size:r}=n;return[t.label,t[`label${(0,wT.A)(r)}`]]}})((e=>{let{ownerState:t}=e;return(0,De.A)({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap"},"outlined"===t.variant&&{paddingLeft:11,paddingRight:11},"small"===t.size&&{paddingLeft:8,paddingRight:8},"small"===t.size&&"outlined"===t.variant&&{paddingLeft:7,paddingRight:7})}));function ZF(e){return"Backspace"===e.key||"Delete"===e.key}const JF=t.forwardRef((function(e,n){const r=(0,Ze.b)({props:e,name:"MuiChip"}),{avatar:i,className:a,clickable:o,color:s="default",component:l,deleteIcon:c,disabled:u=!1,icon:d,label:h,onClick:p,onDelete:f,onKeyDown:m,onKeyUp:g,size:v="medium",variant:y="filled",tabIndex:b,skipFocusWhenDisabled:w=!1}=r,E=(0,Le.A)(r,YF),x=t.useRef(null),_=(0,pS.A)(x,n),A=e=>{e.stopPropagation(),f&&f(e)},T=!(!1===o||!p)||o,S=T||f?KS:l||"div",k=(0,De.A)({},r,{component:S,disabled:u,size:v,color:s,iconColor:t.isValidElement(d)&&d.props.color||s,onDelete:!!f,clickable:T,variant:y}),C=(e=>{const{classes:t,disabled:n,size:r,color:i,iconColor:a,onDelete:o,clickable:s,variant:l}=e,c={root:["root",l,n&&"disabled",`size${(0,wT.A)(r)}`,`color${(0,wT.A)(i)}`,s&&"clickable",s&&`clickableColor${(0,wT.A)(i)}`,o&&"deletable",o&&`deletableColor${(0,wT.A)(i)}`,`${l}${(0,wT.A)(i)}`],label:["label",`label${(0,wT.A)(r)}`],avatar:["avatar",`avatar${(0,wT.A)(r)}`,`avatarColor${(0,wT.A)(i)}`],icon:["icon",`icon${(0,wT.A)(r)}`,`iconColor${(0,wT.A)(a)}`],deleteIcon:["deleteIcon",`deleteIcon${(0,wT.A)(r)}`,`deleteIconColor${(0,wT.A)(i)}`,`deleteIcon${(0,wT.A)(l)}Color${(0,wT.A)(i)}`]};return(0,yT.A)(c,GF,t)})(k),I=S===KS?(0,De.A)({component:l||"div",focusVisibleClassName:C.focusVisible},f&&{disableRipple:!0}):{};let R=null;f&&(R=c&&t.isValidElement(c)?t.cloneElement(c,{className:(0,Pe.A)(c.props.className,C.deleteIcon),onClick:A}):(0,Ve.jsx)(qF,{className:(0,Pe.A)(C.deleteIcon),onClick:A}));let D=null;i&&t.isValidElement(i)&&(D=t.cloneElement(i,{className:(0,Pe.A)(C.avatar,i.props.className)}));let L=null;return d&&t.isValidElement(d)&&(L=t.cloneElement(d,{className:(0,Pe.A)(C.icon,d.props.className)})),(0,Ve.jsxs)(QF,(0,De.A)({as:S,className:(0,Pe.A)(C.root,a),disabled:!(!T||!u)||void 0,onClick:p,onKeyDown:e=>{e.currentTarget===e.target&&ZF(e)&&e.preventDefault(),m&&m(e)},onKeyUp:e=>{e.currentTarget===e.target&&(f&&ZF(e)?f(e):"Escape"===e.key&&x.current&&x.current.blur()),g&&g(e)},ref:_,tabIndex:w&&u?-1:b,ownerState:k},I,E,{children:[D||L,(0,Ve.jsx)(XF,{className:(0,Pe.A)(C.label),ownerState:k,children:h}),R]}))})),eU=JF,tU=320,nU=["items","changeImportance","isLandscape","onChange","isValid"],rU=["getValue"];function iU(e){const{items:t,changeImportance:n,onChange:r,isValid:i}=e,a=(0,Le.A)(e,nU);if(null==t||0===t.length)return null;const o=t.map((e=>{let{getValue:t}=e,a=(0,Le.A)(e,rU);const o=t({isValid:i});return{label:a.label,onClick:()=>{r(o,n,a)},disabled:!i(o)}}));return(0,Ve.jsx)(Dk,(0,De.A)({dense:!0,sx:[{maxHeight:334,maxWidth:200,overflow:"auto"},...Array.isArray(a.sx)?a.sx:[a.sx]]},a,{children:o.map((e=>(0,Ve.jsx)(rR,{children:(0,Ve.jsx)(eU,(0,De.A)({},e))},e.label)))}))}const aU=e=>{var t,n;const{wrapperVariant:r,onAccept:i,onClear:a,onCancel:o,onSetToday:s,view:l,views:c,onViewChange:u,value:d,onChange:h,onSelectShortcut:p,isValid:f,isLandscape:m,disabled:g,readOnly:v,children:y,components:b,componentsProps:w,slots:E,slotProps:x}=e,_=null!=E?E:LO(b),A=null!=x?x:w,T=(e=>{const{classes:t,isLandscape:n}=e,r={root:["root",n&&"landscape"],contentWrapper:["contentWrapper"],toolbar:["toolbar"],actionBar:["actionBar"],tabs:["tabs"],landscape:["landscape"],shortcuts:["shortcuts"]};return(0,yT.A)(r,jF,t)})(e),S=null!=(t=null==_?void 0:_.actionBar)?t:HF,k=jO({elementType:S,externalSlotProps:null==A?void 0:A.actionBar,additionalProps:{onAccept:i,onClear:a,onCancel:o,onSetToday:s,actions:"desktop"===r?[]:["cancel","accept"],className:T.actionBar},ownerState:(0,De.A)({},e,{wrapperVariant:r})}),C=(0,Ve.jsx)(S,(0,De.A)({},k)),I=null==_?void 0:_.toolbar,R=jO({elementType:I,externalSlotProps:null==A?void 0:A.toolbar,additionalProps:{isLandscape:m,onChange:h,value:d,view:l,onViewChange:u,views:c,disabled:g,readOnly:v,className:T.toolbar},ownerState:(0,De.A)({},e,{wrapperVariant:r})}),D=function(e){return null!==e.view}(R)&&I?(0,Ve.jsx)(I,(0,De.A)({},R)):null,L=y,P=null==_?void 0:_.tabs,M=l&&P?(0,Ve.jsx)(P,(0,De.A)({view:l,onViewChange:u,className:T.tabs},null==A?void 0:A.tabs)):null,N=null!=(n=null==_?void 0:_.shortcuts)?n:iU,O=jO({elementType:N,externalSlotProps:null==A?void 0:A.shortcuts,additionalProps:{isValid:f,isLandscape:m,onChange:p,className:T.shortcuts},ownerState:{isValid:f,isLandscape:m,onChange:p,className:T.shortcuts,wrapperVariant:r}});return{toolbar:D,content:L,tabs:M,actionBar:C,shortcuts:l&&N?(0,Ve.jsx)(N,(0,De.A)({},O)):null}},oU=(0,bT.Ay)("div",{name:"MuiPickersLayout",slot:"Root",overridesResolver:(e,t)=>t.root})((e=>{let{theme:t,ownerState:n}=e;return{display:"grid",gridAutoColumns:"max-content auto max-content",gridAutoRows:"max-content auto max-content",[`& .${FF.toolbar}`]:n.isLandscape?{gridColumn:"rtl"===t.direction?3:1,gridRow:"2 / 3"}:{gridColumn:"2 / 4",gridRow:1},[`.${FF.shortcuts}`]:n.isLandscape?{gridColumn:"2 / 4",gridRow:1}:{gridColumn:"rtl"===t.direction?3:1,gridRow:"2 / 3"},[`& .${FF.actionBar}`]:{gridColumn:"1 / 4",gridRow:3}}}));oU.propTypes={as:CN().elementType,ownerState:CN().shape({isLandscape:CN().bool.isRequired}).isRequired,sx:CN().oneOfType([CN().arrayOf(CN().oneOfType([CN().func,CN().object,CN().bool])),CN().func,CN().object])};const sU=(0,bT.Ay)("div",{name:"MuiPickersLayout",slot:"ContentWrapper",overridesResolver:(e,t)=>t.contentWrapper})({gridColumn:2,gridRow:2,display:"flex",flexDirection:"column"}),lU=function(e){const n=SN({props:e,name:"MuiPickersLayout"}),{toolbar:r,content:i,tabs:a,actionBar:o,shortcuts:s}=aU(n),{sx:l,className:c,isLandscape:u,ref:d,wrapperVariant:h}=n,p=n,f=(e=>{const{isLandscape:t,classes:n}=e,r={root:["root",t&&"landscape"],contentWrapper:["contentWrapper"]};return(0,yT.A)(r,jF,n)})(p);return(0,Ve.jsxs)(oU,{ref:d,sx:l,className:(0,Pe.A)(c,f.root),ownerState:p,children:[u?s:r,u?r:s,(0,Ve.jsx)(sU,{className:f.contentWrapper,children:"desktop"===h?(0,Ve.jsxs)(t.Fragment,{children:[i,a]}):(0,Ve.jsxs)(t.Fragment,{children:[a,i]})}),o]})},cU=["props","getOpenDialogAriaText"],uU=["ownerState"],dU=["ownerState"],hU=(0,BT.A)((0,Ve.jsx)("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),pU=(0,BT.A)((0,Ve.jsx)("path",{d:"M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z"}),"ArrowLeft"),fU=(0,BT.A)((0,Ve.jsx)("path",{d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"}),"ArrowRight"),mU=(0,BT.A)((0,Ve.jsx)("path",{d:"M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z"}),"Calendar"),gU=((0,BT.A)((0,Ve.jsxs)(t.Fragment,{children:[(0,Ve.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),(0,Ve.jsx)("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"})]}),"Clock"),(0,BT.A)((0,Ve.jsx)("path",{d:"M9 11H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11z"}),"DateRange"),(0,BT.A)((0,Ve.jsxs)(t.Fragment,{children:[(0,Ve.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),(0,Ve.jsx)("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"})]}),"Time"),(0,BT.A)((0,Ve.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear")),vU=e=>{const n=bO(),r=EO(),i=yO(),a="rtl"===tC().direction,{valueManager:o,fieldValueManager:s,valueType:l,validator:c,internalProps:u,internalProps:{value:d,defaultValue:h,referenceDate:p,onChange:f,format:m,formatDensity:g="dense",selectedSections:v,onSelectedSectionsChange:y,shouldRespectLeadingZeros:b=!1,timezone:w}}=e,{timezone:E,value:x,handleValueChange:_}=CF({timezone:w,value:d,defaultValue:h,onChange:f,valueManager:o}),A=t.useMemo((()=>((e,t)=>{const n=e.dateWithTimezone(void 0,t),r=e.endOfYear(n),i=e.endOfDay(n),{maxDaysInMonth:a,longestMonth:o}=NN(e,n).reduce(((t,n)=>{const r=e.getDaysInMonth(n);return r>t.maxDaysInMonth?{maxDaysInMonth:r,longestMonth:n}:t}),{maxDaysInMonth:0,longestMonth:null});return{year:n=>{let{format:r}=n;return{minimum:0,maximum:rO(e,t,r)?9999:99}},month:()=>({minimum:1,maximum:e.getMonth(r)+1}),day:t=>{let{currentDate:n}=t;return{minimum:1,maximum:null!=n&&e.isValid(n)?e.getDaysInMonth(n):a,longestMonth:o}},weekDay:n=>{let{format:r,contentType:i}=n;if("digit"===i){const n=GN(e,t,r).map(Number);return{minimum:Math.min(...n),maximum:Math.max(...n)}}return{minimum:1,maximum:7}},hours:t=>{let{format:r}=t;const a=e.getHours(i);return e.formatByString(e.endOfDay(n),r)!==a.toString()?{minimum:1,maximum:Number(e.formatByString(e.startOfDay(n),r))}:{minimum:0,maximum:a}},minutes:()=>({minimum:0,maximum:e.getMinutes(i)}),seconds:()=>({minimum:0,maximum:e.getSeconds(i)}),meridiem:()=>({minimum:0,maximum:0})}})(n,E)),[n,E]),T=t.useCallback((function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return s.getSectionsFromValue(n,e,t,a,(e=>aO(n,E,r,m,e,g,b,a)))}),[s,m,r,a,b,n,g,E]),S=t.useMemo((()=>s.getValueStrFromSections(T(o.emptyValue),a)),[s,T,o.emptyValue,a]),[k,C]=t.useState((()=>{const e=T(x);oO();const t={sections:e,value:x,referenceValue:o.emptyValue,tempValueStrAndroid:null},r=(e=>Math.max(...e.map((e=>{var t;return null!=(t=WN[e.type])?t:1}))))(e),i=o.getInitialReferenceValue({referenceDate:p,value:x,utils:n,props:u,granularity:r,timezone:E});return(0,De.A)({},t,{referenceValue:i})})),[I,R]=(0,SF.A)({controlled:v,default:null,name:"useField",state:"selectedSectionIndexes"}),D=e=>{R(e),null==y||y(e),C((e=>(0,De.A)({},e,{selectedSectionQuery:null})))},L=t.useMemo((()=>{if(null==I)return null;if("all"===I)return{startIndex:0,endIndex:k.sections.length-1,shouldSelectBoundarySelectors:!0};if("number"===typeof I)return{startIndex:I,endIndex:I};if("string"===typeof I){const e=k.sections.findIndex((e=>e.type===I));return{startIndex:e,endIndex:e}}return I}),[I,k.sections]),P=e=>{let{value:t,referenceValue:r,sections:a}=e;if(C((e=>(0,De.A)({},e,{sections:a,value:t,referenceValue:r,tempValueStrAndroid:null}))),o.areValuesEqual(n,k.value,t))return;const s={validationError:c({adapter:i,value:t,props:(0,De.A)({},u,{value:t,timezone:E})})};_(t,s)},M=(e,t)=>{const n=[...k.sections];return n[e]=(0,De.A)({},n[e],{value:t,modified:!0}),eO(n,a)};return t.useEffect((()=>{const e=T(k.value);oO(),C((t=>(0,De.A)({},t,{sections:e})))}),[m,n.locale]),t.useEffect((()=>{let e=!1;e=!o.areValuesEqual(n,k.value,x)||o.getTimezone(n,k.value)!==o.getTimezone(n,x),e&&C((e=>(0,De.A)({},e,{value:x,referenceValue:s.updateReferenceValue(n,x,e.referenceValue),sections:T(x)})))}),[x]),{state:k,selectedSectionIndexes:L,setSelectedSections:D,clearValue:()=>{P({value:o.emptyValue,referenceValue:k.referenceValue,sections:T(o.emptyValue)})},clearActiveSection:()=>{if(null==L)return;const e=k.sections[L.startIndex],t=s.getActiveDateManager(n,k,e),r=t.getSections(k.sections).filter((e=>""!==e.value)).length===(""===e.value?0:1),i=M(L.startIndex,""),a=r?null:n.date(new Date("")),o=t.getNewValuesFromNewActiveDate(a);(null!=a&&!n.isValid(a))!==(null!=t.date&&!n.isValid(t.date))?P((0,De.A)({},o,{sections:i})):C((e=>(0,De.A)({},e,o,{sections:i,tempValueStrAndroid:null})))},updateSectionValue:e=>{let{activeSection:t,newSectionValue:r,shouldGoToNextSection:i}=e;i&&L&&L.startIndex<k.sections.length-1?D(L.startIndex+1):L&&L.startIndex!==L.endIndex&&D(L.startIndex);const a=s.getActiveDateManager(n,k,t),o=M(L.startIndex,r),l=a.getSections(o),c=((e,t)=>{const n=t.some((e=>"day"===e.type)),r=[],i=[];for(let s=0;s<t.length;s+=1){const e=t[s];n&&"weekDay"===e.type||(r.push(e.format),i.push(ZN(e,"non-input")))}const a=r.join(" "),o=i.join(" ");return e.parse(o,a)})(n,l);let u,d;if(null!=c&&n.isValid(c)){const e=lO(n,E,c,l,a.referenceDate,!0);u=a.getNewValuesFromNewActiveDate(e),d=!0}else u=a.getNewValuesFromNewActiveDate(c),d=(null!=c&&!n.isValid(c))!==(null!=a.date&&!n.isValid(a.date));return d?P((0,De.A)({},u,{sections:o})):C((e=>(0,De.A)({},e,u,{sections:o,tempValueStrAndroid:null})))},updateValueFromValueStr:e=>{const t=s.parseValueStr(e,k.referenceValue,((e,t)=>{const i=n.parse(e,m);if(null==i||!n.isValid(i))return null;const o=aO(n,E,r,m,i,g,b,a);return lO(n,E,i,o,t,!1)})),i=s.updateReferenceValue(n,t,k.referenceValue);P({value:t,referenceValue:i,sections:T(t,k.sections)})},setTempAndroidValueStr:e=>C((t=>(0,De.A)({},t,{tempValueStrAndroid:e}))),sectionsValueBoundaries:A,placeholder:S,timezone:E}},yU=e=>null!=e.saveQuery,bU=e=>{let{sections:n,updateSectionValue:r,sectionsValueBoundaries:i,setTempAndroidValueStr:a,timezone:o}=e;const s=bO(),[l,c]=t.useState(null),u=(0,kC.A)((()=>c(null)));t.useEffect((()=>{var e;null!=l&&(null==(e=n[l.sectionIndex])?void 0:e.type)!==l.sectionType&&u()}),[n,l,u]),t.useEffect((()=>{if(null!=l){const e=setTimeout((()=>u()),5e3);return()=>{window.clearTimeout(e)}}return()=>{}}),[l,u]);const d=(e,t,r)=>{let{keyPressed:i,sectionIndex:a}=e;const o=i.toLowerCase(),s=n[a];if(null!=l&&(!r||r(l.value))&&l.sectionIndex===a){const e=`${l.value}${o}`,n=t(e,s);if(!yU(n))return c({sectionIndex:a,value:e,sectionType:s.type}),n}const d=t(o,s);return yU(d)&&!d.saveQuery?(u(),null):(c({sectionIndex:a,value:o,sectionType:s.type}),yU(d)?null:d)},h=(0,kC.A)((e=>{const t=n[e.sectionIndex],l=" "!==e.keyPressed&&!Number.isNaN(Number(e.keyPressed))?(e=>{const t=(e,t)=>{const n=Number(`${e}`),r=i[t.type]({currentDate:null,format:t.format,contentType:t.contentType});if(n>r.maximum)return{saveQuery:!1};if(n<r.minimum)return{saveQuery:!0};const a=Number(`${e}0`)>r.maximum||e.length===r.maximum.toString().length;return{sectionValue:QN(s,0,n,r,t),shouldGoToNextSection:a}};return d(e,((e,n)=>{if("digit"===n.contentType||"digit-with-letter"===n.contentType)return t(e,n);if("month"===n.type){const r=iO(s,o,"digit","month","MM"),i=t(e,{type:n.type,format:"MM",hasLeadingZerosInFormat:r,hasLeadingZerosInInput:!0,contentType:"digit",maxLength:2});if(yU(i))return i;const a=nO(s,i.sectionValue,"MM",n.format);return(0,De.A)({},i,{sectionValue:a})}if("weekDay"===n.type){const r=t(e,n);if(yU(r))return r;const i=GN(s,o,n.format)[Number(r.sectionValue)-1];return(0,De.A)({},r,{sectionValue:i})}return{saveQuery:!1}}),(e=>!Number.isNaN(Number(e))))})(e):(e=>{const t=(e,t,n)=>{const r=t.filter((e=>e.toLowerCase().startsWith(n)));return 0===r.length?{saveQuery:!1}:{sectionValue:r[0],shouldGoToNextSection:1===r.length}},n=(e,n,r,i)=>{const a=e=>KN(s,o,n.type,e);if("letter"===n.contentType)return t(n.format,a(n.format),e);if(r&&null!=i&&"letter"===qN(s,r).contentType){const n=a(r),o=t(0,n,e);return yU(o)?{saveQuery:!1}:(0,De.A)({},o,{sectionValue:i(o.sectionValue,n)})}return{saveQuery:!1}};return d(e,((e,t)=>{switch(t.type){case"month":{const r=e=>nO(s,e,s.formats.month,t.format);return n(e,t,s.formats.month,r)}case"weekDay":{const r=(e,t)=>t.indexOf(e).toString();return n(e,t,s.formats.weekday,r)}case"meridiem":return n(e,t);default:return{saveQuery:!1}}}))})(e);null==l?a(null):r({activeSection:t,newSectionValue:l.sectionValue,shouldGoToNextSection:l.shouldGoToNextSection})}));return{applyCharacterEditing:h,resetCharacterQuery:u}},wU=["onClick","onKeyDown","onFocus","onBlur","onMouseUp","onPaste","error","clearable","onClear","disabled"],EU=e=>{const n=bO(),{state:r,selectedSectionIndexes:i,setSelectedSections:a,clearValue:o,clearActiveSection:s,updateSectionValue:l,updateValueFromValueStr:c,setTempAndroidValueStr:u,sectionsValueBoundaries:d,placeholder:h,timezone:p}=vU(e),{inputRef:f,internalProps:m,internalProps:{readOnly:g=!1,unstableFieldRef:v,minutesStep:y},forwardedProps:{onClick:b,onKeyDown:w,onFocus:E,onBlur:x,onMouseUp:_,onPaste:A,error:T,clearable:S,onClear:k,disabled:C},fieldValueManager:I,valueManager:R,validator:D}=e,L=(0,Le.A)(e.forwardedProps,wU),{applyCharacterEditing:P,resetCharacterQuery:M}=bU({sections:r.sections,updateSectionValue:l,sectionsValueBoundaries:d,setTempAndroidValueStr:u,timezone:p}),N=t.useRef(null),O=(0,WT.A)(f,N),j=t.useRef(void 0),F="rtl"===tC().direction,U=t.useMemo((()=>((e,t)=>{const n={};if(!t)return e.forEach(((t,r)=>{const i=0===r?null:r-1,a=r===e.length-1?null:r+1;n[r]={leftIndex:i,rightIndex:a}})),{neighbors:n,startIndex:0,endIndex:e.length-1};const r={},i={};let a=0,o=0,s=e.length-1;for(;s>=0;){o=e.findIndex(((e,t)=>{var n;return t>=a&&(null==(n=e.endSeparator)?void 0:n.includes(" "))&&" / "!==e.endSeparator})),-1===o&&(o=e.length-1);for(let e=o;e>=a;e-=1)i[e]=s,r[s]=e,s-=1;a=o+1}return e.forEach(((t,a)=>{const o=i[a],s=0===o?null:r[o-1],l=o===e.length-1?null:r[o+1];n[a]={leftIndex:s,rightIndex:l}})),{neighbors:n,startIndex:r[0],endIndex:r[e.length-1]}})(r.sections,F)),[r.sections,F]),B=()=>{var e;if(g)return void a(null);const t=null!=(e=N.current.selectionStart)?e:0;let n;n=t<=r.sections[0].startInInput||t>=r.sections[r.sections.length-1].endInInput?1:r.sections.findIndex((e=>e.startInInput-e.startSeparator.length>t));const i=-1===n?r.sections.length-1:n-1;a(i)},$=(0,kC.A)((function(e){if(!e.isDefaultPrevented()){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];null==b||b(e,...n),B()}})),V=(0,kC.A)((e=>{null==_||_(e),e.preventDefault()})),W=(0,kC.A)((function(){null==E||E(...arguments);const e=N.current;window.clearTimeout(j.current),j.current=setTimeout((()=>{e&&e===N.current&&(null!=i||g||(e.value.length&&Number(e.selectionEnd)-Number(e.selectionStart)===e.value.length?a("all"):B()))}))})),z=(0,kC.A)((function(){null==x||x(...arguments),a(null)})),H=(0,kC.A)((e=>{if(null==A||A(e),g)return void e.preventDefault();const t=e.clipboardData.getData("text");if(i&&i.startIndex===i.endIndex){const n=r.sections[i.startIndex],a=/^[a-zA-Z]+$/.test(t),o=/^[0-9]+$/.test(t),s=/^(([a-zA-Z]+)|)([0-9]+)(([a-zA-Z]+)|)$/.test(t);if("letter"===n.contentType&&a||"digit"===n.contentType&&o||"digit-with-letter"===n.contentType&&s)return M(),l({activeSection:n,newSectionValue:t,shouldGoToNextSection:!0}),void e.preventDefault();if(a||o)return void e.preventDefault()}e.preventDefault(),M(),c(t)})),q=(0,kC.A)((e=>{if(g)return;const t=e.target.value;if(""===t)return M(),void o();const n=e.nativeEvent.data,a=n&&n.length>1,l=a?n:t,d=JN(l);if(null==i||a)return void c(a?n:d);let h;if(0===i.startIndex&&i.endIndex===r.sections.length-1&&1===d.length)h=d;else{const e=JN(I.getValueStrFromSections(r.sections,F));let t=-1,n=-1;for(let r=0;r<e.length;r+=1)-1===t&&e[r]!==d[r]&&(t=r),-1===n&&e[e.length-r-1]!==d[d.length-r-1]&&(n=r);const a=r.sections[i.startIndex];if(t<a.start||e.length-n-1>a.end)return;const o=d.length-e.length+a.end-JN(a.endSeparator||"").length;h=d.slice(a.start+JN(a.startSeparator||"").length,o)}0!==h.length?P({keyPressed:h,sectionIndex:i.startIndex}):navigator.userAgent.toLowerCase().indexOf("android")>-1?u(l):(M(),s())})),G=(0,kC.A)((e=>{switch(null==w||w(e),!0){case"a"===e.key&&(e.ctrlKey||e.metaKey):e.preventDefault(),a("all");break;case"ArrowRight"===e.key:if(e.preventDefault(),null==i)a(U.startIndex);else if(i.startIndex!==i.endIndex)a(i.endIndex);else{const e=U.neighbors[i.startIndex].rightIndex;null!==e&&a(e)}break;case"ArrowLeft"===e.key:if(e.preventDefault(),null==i)a(U.endIndex);else if(i.startIndex!==i.endIndex)a(i.startIndex);else{const e=U.neighbors[i.startIndex].leftIndex;null!==e&&a(e)}break;case"Delete"===e.key:if(e.preventDefault(),g)break;null==i||0===i.startIndex&&i.endIndex===r.sections.length-1?o():s(),M();break;case["ArrowUp","ArrowDown","Home","End","PageUp","PageDown"].includes(e.key):{if(e.preventDefault(),g||null==i)break;const t=r.sections[i.startIndex],a=I.getActiveDateManager(n,r,t),o=XN(n,p,t,e.key,d,a.date,{minutesStep:y});l({activeSection:t,newSectionValue:o,shouldGoToNextSection:!1});break}}}));(0,mC.A)((()=>{if(!N.current)return;if(null==i)return void(N.current.scrollLeft&&(N.current.scrollLeft=0));const e=r.sections[i.startIndex],t=r.sections[i.endIndex];let n=e.startInInput,a=t.endInInput;if(i.shouldSelectBoundarySelectors&&(n-=e.startSeparator.length,a+=t.endSeparator.length),n!==N.current.selectionStart||a!==N.current.selectionEnd){const e=N.current.scrollTop;N.current===fF(document)&&N.current.setSelectionRange(n,a),N.current.scrollTop=e}}));const K=kF((0,De.A)({},m,{value:r.value,timezone:p}),D,R.isSameError,R.defaultErrorState),Y=t.useMemo((()=>void 0!==T?T:R.hasError(K)),[R,K,T]);t.useEffect((()=>{Y||i||M()}),[r.referenceValue,i,Y]),t.useEffect((()=>(N.current&&N.current===document.activeElement&&a("all"),()=>window.clearTimeout(j.current))),[]),t.useEffect((()=>{null!=r.tempValueStrAndroid&&null!=i&&(M(),s())}),[r.tempValueStrAndroid]);const Q=t.useMemo((()=>{var e;return null!=(e=r.tempValueStrAndroid)?e:I.getValueStrFromSections(r.sections,F)}),[r.sections,I,r.tempValueStrAndroid,F]),X=t.useMemo((()=>null==i||"letter"===r.sections[i.startIndex].contentType?"text":"numeric"),[i,r.sections]),Z=N.current&&N.current===fF(document),J=R.areValuesEqual(n,r.value,R.emptyValue),ee=!Z&&J;t.useImperativeHandle(v,(()=>({getSections:()=>r.sections,getActiveSectionIndex:()=>{var e,t,n;const i=null!=(e=N.current.selectionStart)?e:0,a=null!=(t=N.current.selectionEnd)?t:0,o=!(null==(n=N.current)||!n.readOnly);if(0===i&&0===a||o)return null;const s=i<=r.sections[0].startInInput?1:r.sections.findIndex((e=>e.startInInput-e.startSeparator.length>i));return-1===s?r.sections.length-1:s-1},setSelectedSections:e=>a(e)})));const te=(0,kC.A)((function(e){var t;e.preventDefault();for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];null==k||k(e,...r),o(),null==N||null==(t=N.current)||t.focus(),a(0)}));return(0,De.A)({placeholder:h,autoComplete:"off",disabled:Boolean(C)},L,{value:ee?"":Q,inputMode:X,readOnly:g,onClick:$,onFocus:W,onBlur:z,onPaste:H,onChange:q,onKeyDown:G,onMouseUp:V,onClear:te,error:Y,ref:O,clearable:Boolean(S&&!J&&!g&&!C)})},xU=["disablePast","disableFuture","minDate","maxDate","shouldDisableDate","shouldDisableMonth","shouldDisableYear"],_U=["disablePast","disableFuture","minTime","maxTime","shouldDisableClock","shouldDisableTime","minutesStep","ampm","disableIgnoringDatePartForTimeValidation"],AU=["minDateTime","maxDateTime"],TU=[...xU,..._U,...AU],SU=e=>TU.reduce(((t,n)=>(e.hasOwnProperty(n)&&(t[n]=e[n]),t)),{}),kU=["value","defaultValue","referenceDate","format","formatDensity","onChange","timezone","readOnly","onError","shouldRespectLeadingZeros","selectedSections","onSelectedSectionsChange","unstableFieldRef"],CU=e=>{let{props:t,inputRef:n}=e;const r=(e=>{var t,n,r;const i=bO(),a=wO();return(0,De.A)({},e,{disablePast:null!=(t=e.disablePast)&&t,disableFuture:null!=(n=e.disableFuture)&&n,format:null!=(r=e.format)?r:i.formats.keyboardDate,minDate:MN(i,e.minDate,a.minDate),maxDate:MN(i,e.maxDate,a.maxDate)})})(t),{forwardedProps:i,internalProps:a}=((e,t)=>{const n=(0,De.A)({},e),r={},i=e=>{n.hasOwnProperty(e)&&(r[e]=n[e],delete n[e])};return kU.forEach(i),"date"===t?xU.forEach(i):"time"===t?_U.forEach(i):"date-time"===t&&(xU.forEach(i),_U.forEach(i),AU.forEach(i)),{forwardedProps:n,internalProps:r}})(r,"date");return EU({inputRef:n,forwardedProps:i,internalProps:a,valueManager:uO,fieldValueManager:dO,validator:MO,valueType:"date"})},IU=["ownerState"],RU=["components","componentsProps","slots","slotProps","InputProps","inputProps"],DU=["inputRef"],LU=["ref","onPaste","onKeyDown","inputMode","readOnly","clearable","onClear"],PU=t.forwardRef((function(e,n){var r,i,a;const o=SN({props:e,name:"MuiDateField"}),{components:s,componentsProps:l,slots:c,slotProps:u,InputProps:d,inputProps:h}=o,p=(0,Le.A)(o,RU),f=o,m=null!=(r=null!=(i=null==c?void 0:c.textField)?i:null==s?void 0:s.TextField)?r:xL,g=jO({elementType:m,externalSlotProps:null!=(a=null==u?void 0:u.textField)?a:null==l?void 0:l.textField,externalForwardedProps:p,ownerState:f}),{inputRef:v}=g,y=(0,Le.A)(g,DU);y.inputProps=(0,De.A)({},h,y.inputProps),y.InputProps=(0,De.A)({},d,y.InputProps);const b=CU({props:y,inputRef:v}),{ref:w,onPaste:E,onKeyDown:x,inputMode:_,readOnly:A,clearable:T,onClear:S}=b,k=(0,Le.A)(b,LU),{InputProps:C,fieldProps:I}=(e=>{let{clearable:n,fieldProps:r,InputProps:i,onClear:a,slots:o,slotProps:s,components:l,componentsProps:c}=e;var u,d,h,p,f,m;const g=EO(),v=null!=(u=null!=(d=null==o?void 0:o.clearButton)?d:null==l?void 0:l.ClearButton)?u:ek,y=jO({elementType:v,externalSlotProps:null!=(h=null==s?void 0:s.clearButton)?h:null==c?void 0:c.clearButton,ownerState:{},className:"clearButton",additionalProps:{title:g.fieldClearLabel}}),b=(0,Le.A)(y,IU),w=null!=(p=null!=(f=null==o?void 0:o.clearIcon)?f:null==l?void 0:l.ClearIcon)?p:gU,E=jO({elementType:w,externalSlotProps:null!=(m=null==s?void 0:s.clearIcon)?m:null==c?void 0:c.clearIcon,ownerState:{}});return{InputProps:(0,De.A)({},i,{endAdornment:(0,Ve.jsxs)(t.Fragment,{children:[n&&(0,Ve.jsx)(EN,{position:"end",sx:{marginRight:null!=i&&i.endAdornment?-1:-1.5},children:(0,Ve.jsx)(v,(0,De.A)({},b,{onClick:a,children:(0,Ve.jsx)(w,(0,De.A)({fontSize:"small"},E))}))}),null==i?void 0:i.endAdornment]})}),fieldProps:(0,De.A)({},r,{sx:[{"& .clearButton":{opacity:1},"@media (pointer: fine)":{"& .clearButton":{opacity:0},"&:hover, &:focus-within":{".clearButton":{opacity:1}}}},...Array.isArray(r.sx)?r.sx:[r.sx]]})}})({onClear:S,clearable:T,fieldProps:k,InputProps:k.InputProps,slots:c,slotProps:u,components:s,componentsProps:l});return(0,Ve.jsx)(m,(0,De.A)({ref:n},I,{InputProps:(0,De.A)({},C,{readOnly:A}),inputProps:(0,De.A)({},k.inputProps,{inputMode:_,onPaste:E,onKeyDown:x,ref:w})}))})),MU=e=>{let{shouldDisableDate:n,shouldDisableMonth:r,shouldDisableYear:i,minDate:a,maxDate:o,disableFuture:s,disablePast:l,timezone:c}=e;const u=yO();return t.useCallback((e=>null!==MO({adapter:u,value:e,props:{shouldDisableDate:n,shouldDisableMonth:r,shouldDisableYear:i,minDate:a,maxDate:o,disableFuture:s,disablePast:l,timezone:c}})),[u,n,r,i,a,o,s,l,c])},NU=e=>{const{value:n,referenceDate:r,defaultCalendarMonth:i,disableFuture:a,disablePast:o,disableSwitchToMonthOnDayFocus:s=!1,maxDate:l,minDate:c,onMonthChange:u,reduceAnimations:d,shouldDisableDate:h,timezone:p}=e,f=bO(),m=t.useRef(((e,t,n)=>(r,i)=>{switch(i.type){case"changeMonth":return(0,De.A)({},r,{slideDirection:i.direction,currentMonth:i.newMonth,isMonthSwitchingAnimating:!e});case"finishMonthSwitchingAnimation":return(0,De.A)({},r,{isMonthSwitchingAnimating:!1});case"changeFocusedDay":{if(null!=r.focusedDay&&null!=i.focusedDay&&n.isSameDay(i.focusedDay,r.focusedDay))return r;const a=null!=i.focusedDay&&!t&&!n.isSameMonth(r.currentMonth,i.focusedDay);return(0,De.A)({},r,{focusedDay:i.focusedDay,isMonthSwitchingAnimating:a&&!e&&!i.withoutMonthSwitchingAnimation,currentMonth:a?n.startOfMonth(i.focusedDay):r.currentMonth,slideDirection:null!=i.focusedDay&&n.isAfterDay(i.focusedDay,r.currentMonth)?"left":"right"})}default:throw new Error("missing support")}})(Boolean(d),s,f)).current,g=t.useMemo((()=>{let t=null;return r?t=r:i&&(t=f.startOfMonth(i)),uO.getInitialReferenceValue({value:n,utils:f,timezone:p,props:e,referenceDate:t,granularity:WN.day})}),[]),[v,y]=t.useReducer(m,{isMonthSwitchingAnimating:!1,focusedDay:g,currentMonth:f.startOfMonth(g),slideDirection:"left"}),b=t.useCallback((e=>{y((0,De.A)({type:"changeMonth"},e)),u&&u(e.newMonth)}),[u]),w=t.useCallback((e=>{const t=e;f.isSameMonth(t,v.currentMonth)||b({newMonth:f.startOfMonth(t),direction:f.isAfterDay(t,v.currentMonth)?"left":"right"})}),[v.currentMonth,b,f]),E=MU({shouldDisableDate:h,minDate:c,maxDate:l,disableFuture:a,disablePast:o,timezone:p}),x=t.useCallback((()=>{y({type:"finishMonthSwitchingAnimation"})}),[]),_=(0,kC.A)(((e,t)=>{E(e)||y({type:"changeFocusedDay",focusedDay:e,withoutMonthSwitchingAnimation:t})}));return{referenceDate:g,calendarState:v,changeMonth:w,changeFocusedDay:_,isDateDisabled:E,onMonthSwitchingAnimationEnd:x,handleChangeMonth:b}},OU=e=>(0,_T.Ay)("MuiPickersFadeTransitionGroup",e),jU=((0,Ge.A)("MuiPickersFadeTransitionGroup",["root"]),(0,bT.Ay)(TS,{name:"MuiPickersFadeTransitionGroup",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"block",position:"relative"}));function FU(e){const t=SN({props:e,name:"MuiPickersFadeTransitionGroup"}),{children:n,className:r,reduceAnimations:i,transKey:a}=t,o=(e=>{const{classes:t}=e;return(0,yT.A)({root:["root"]},OU,t)})(t),s=tC();return i?n:(0,Ve.jsx)(jU,{className:(0,Pe.A)(o.root,r),children:(0,Ve.jsx)(EC,{appear:!1,mountOnEnter:!0,unmountOnExit:!0,timeout:{appear:s.transitions.duration.enteringScreen,enter:s.transitions.duration.enteringScreen,exit:0},children:n},a)})}var UU=n(6747);function BU(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return(0,UU.A)(e,t,n)}function $U(e){if(e.type)return e;if("#"===e.charAt(0))return $U(function(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let n=e.match(t);return n&&1===n[0].length&&(n=n.map((e=>e+e))),n?`rgb${4===n.length?"a":""}(${n.map(((e,t)=>t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3)).join(", ")})`:""}(e));const t=e.indexOf("("),n=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla","color"].indexOf(n))throw new Error((0,ER.A)(9,e));let r,i=e.substring(t+1,e.length-1);if("color"===n){if(i=i.split(" "),r=i.shift(),4===i.length&&"/"===i[3].charAt(0)&&(i[3]=i[3].slice(1)),-1===["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(r))throw new Error((0,ER.A)(10,r))}else i=i.split(",");return i=i.map((e=>parseFloat(e))),{type:n,values:i,colorSpace:r}}function VU(e){const{type:t,colorSpace:n}=e;let{values:r}=e;return-1!==t.indexOf("rgb")?r=r.map(((e,t)=>t<3?parseInt(e,10):e)):-1!==t.indexOf("hsl")&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),r=-1!==t.indexOf("color")?`${n} ${r.join(" ")}`:`${r.join(", ")}`,`${t}(${r})`}function WU(e,t){return e=$U(e),t=BU(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),"color"===e.type?e.values[3]=`/${t}`:e.values[3]=t,VU(e)}function zU(e){return(0,_T.Ay)("MuiPickersDay",e)}const HU=(0,Ge.A)("MuiPickersDay",["root","dayWithMargin","dayOutsideMonth","hiddenDaySpacingFiller","today","selected","disabled"]),qU=["autoFocus","className","day","disabled","disableHighlightToday","disableMargin","hidden","isAnimating","onClick","onDaySelect","onFocus","onBlur","onKeyDown","onMouseDown","onMouseEnter","outsideCurrentMonth","selected","showDaysOutsideCurrentMonth","children","today","isFirstVisibleCell","isLastVisibleCell"],GU=e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({},t.typography.caption,{width:36,height:36,borderRadius:"50%",padding:0,backgroundColor:"transparent",transition:t.transitions.create("background-color",{duration:t.transitions.duration.short}),color:(t.vars||t).palette.text.primary,"@media (pointer: fine)":{"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.hoverOpacity})`:WU(t.palette.primary.main,t.palette.action.hoverOpacity)}},"&:focus":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.focusOpacity})`:WU(t.palette.primary.main,t.palette.action.focusOpacity),[`&.${HU.selected}`]:{willChange:"background-color",backgroundColor:(t.vars||t).palette.primary.dark}},[`&.${HU.selected}`]:{color:(t.vars||t).palette.primary.contrastText,backgroundColor:(t.vars||t).palette.primary.main,fontWeight:t.typography.fontWeightMedium,"&:hover":{willChange:"background-color",backgroundColor:(t.vars||t).palette.primary.dark}},[`&.${HU.disabled}:not(.${HU.selected})`]:{color:(t.vars||t).palette.text.disabled},[`&.${HU.disabled}&.${HU.selected}`]:{opacity:.6}},!n.disableMargin&&{margin:"0 2px"},n.outsideCurrentMonth&&n.showDaysOutsideCurrentMonth&&{color:(t.vars||t).palette.text.secondary},!n.disableHighlightToday&&n.today&&{[`&:not(.${HU.selected})`]:{border:`1px solid ${(t.vars||t).palette.text.secondary}`}})},KU=(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disableMargin&&t.dayWithMargin,!n.disableHighlightToday&&n.today&&t.today,!n.outsideCurrentMonth&&n.showDaysOutsideCurrentMonth&&t.dayOutsideMonth,n.outsideCurrentMonth&&!n.showDaysOutsideCurrentMonth&&t.hiddenDaySpacingFiller]},YU=(0,bT.Ay)(KS,{name:"MuiPickersDay",slot:"Root",overridesResolver:KU})(GU),QU=(0,bT.Ay)("div",{name:"MuiPickersDay",slot:"Root",overridesResolver:KU})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({},GU({theme:t,ownerState:n}),{opacity:0,pointerEvents:"none"})})),XU=()=>{},ZU=t.forwardRef((function(e,n){const r=SN({props:e,name:"MuiPickersDay"}),{autoFocus:i=!1,className:a,day:o,disabled:s=!1,disableHighlightToday:l=!1,disableMargin:c=!1,isAnimating:u,onClick:d,onDaySelect:h,onFocus:p=XU,onBlur:f=XU,onKeyDown:m=XU,onMouseDown:g=XU,onMouseEnter:v=XU,outsideCurrentMonth:y,selected:b=!1,showDaysOutsideCurrentMonth:w=!1,children:E,today:x=!1}=r,_=(0,Le.A)(r,qU),A=(0,De.A)({},r,{autoFocus:i,disabled:s,disableHighlightToday:l,disableMargin:c,selected:b,showDaysOutsideCurrentMonth:w,today:x}),T=(e=>{const{selected:t,disableMargin:n,disableHighlightToday:r,today:i,disabled:a,outsideCurrentMonth:o,showDaysOutsideCurrentMonth:s,classes:l}=e,c=o&&!s,u={root:["root",t&&!c&&"selected",a&&"disabled",!n&&"dayWithMargin",!r&&i&&"today",o&&s&&"dayOutsideMonth",c&&"hiddenDaySpacingFiller"],hiddenDaySpacingFiller:["hiddenDaySpacingFiller"]};return(0,yT.A)(u,zU,l)})(A),S=bO(),k=t.useRef(null),C=(0,WT.A)(k,n);(0,mC.A)((()=>{!i||s||u||y||k.current.focus()}),[i,s,u,y]);return y&&!w?(0,Ve.jsx)(QU,{className:(0,Pe.A)(T.root,T.hiddenDaySpacingFiller,a),ownerState:A,role:_.role}):(0,Ve.jsx)(YU,(0,De.A)({className:(0,Pe.A)(T.root,a),ref:C,centerRipple:!0,disabled:s,tabIndex:b?0:-1,onKeyDown:e=>m(e,o),onFocus:e=>p(e,o),onBlur:e=>f(e,o),onMouseEnter:e=>v(e,o),onClick:e=>{s||h(o),y&&e.currentTarget.focus(),d&&d(e)},onMouseDown:e=>{g(e),y&&e.preventDefault()}},_,{ownerState:A,children:E||S.format(o,"dayOfMonth")}))})),JU=t.memo(ZU);function eB(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}var tB=function(e,t){return e&&t&&t.split(" ").forEach((function(t){return r=t,void((n=e).classList?n.classList.remove(r):"string"===typeof n.className?n.className=eB(n.className,r):n.setAttribute("class",eB(n.className&&n.className.baseVal||"",r)));var n,r}))},nB=function(e){function n(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).appliedClasses={appear:{},enter:{},exit:{}},t.onEnter=function(e,n){var r=t.resolveArguments(e,n),i=r[0],a=r[1];t.removeClasses(i,"exit"),t.addClass(i,a?"appear":"enter","base"),t.props.onEnter&&t.props.onEnter(e,n)},t.onEntering=function(e,n){var r=t.resolveArguments(e,n),i=r[0],a=r[1]?"appear":"enter";t.addClass(i,a,"active"),t.props.onEntering&&t.props.onEntering(e,n)},t.onEntered=function(e,n){var r=t.resolveArguments(e,n),i=r[0],a=r[1]?"appear":"enter";t.removeClasses(i,a),t.addClass(i,a,"done"),t.props.onEntered&&t.props.onEntered(e,n)},t.onExit=function(e){var n=t.resolveArguments(e)[0];t.removeClasses(n,"appear"),t.removeClasses(n,"enter"),t.addClass(n,"exit","base"),t.props.onExit&&t.props.onExit(e)},t.onExiting=function(e){var n=t.resolveArguments(e)[0];t.addClass(n,"exit","active"),t.props.onExiting&&t.props.onExiting(e)},t.onExited=function(e){var n=t.resolveArguments(e)[0];t.removeClasses(n,"exit"),t.addClass(n,"exit","done"),t.props.onExited&&t.props.onExited(e)},t.resolveArguments=function(e,n){return t.props.nodeRef?[t.props.nodeRef.current,e]:[e,n]},t.getClassNames=function(e){var n=t.props.classNames,r="string"===typeof n,i=r?""+(r&&n?n+"-":"")+e:n[e];return{baseClassName:i,activeClassName:r?i+"-active":n[e+"Active"],doneClassName:r?i+"-done":n[e+"Done"]}},t}yS(n,e);var r=n.prototype;return r.addClass=function(e,t,n){var r=this.getClassNames(t)[n+"ClassName"],i=this.getClassNames("enter").doneClassName;"appear"===t&&"done"===n&&i&&(r+=" "+i),"active"===n&&e&&qk(e),r&&(this.appliedClasses[t][n]=r,function(e,t){e&&t&&t.split(" ").forEach((function(t){return r=t,void((n=e).classList?n.classList.add(r):function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}(n,r)||("string"===typeof n.className?n.className=n.className+" "+r:n.setAttribute("class",(n.className&&n.className.baseVal||"")+" "+r)));var n,r}))}(e,r))},r.removeClasses=function(e,t){var n=this.appliedClasses[t],r=n.base,i=n.active,a=n.done;this.appliedClasses[t]={},r&&tB(e,r),i&&tB(e,i),a&&tB(e,a)},r.render=function(){var e=this.props,n=(e.classNames,(0,Le.A)(e,["classNames"]));return t.createElement(eC,(0,De.A)({},n,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},n}(t.Component);nB.defaultProps={classNames:""},nB.propTypes={};const rB=nB,iB=e=>(0,_T.Ay)("MuiPickersSlideTransition",e),aB=(0,Ge.A)("MuiPickersSlideTransition",["root","slideEnter-left","slideEnter-right","slideEnterActive","slideExit","slideExitActiveLeft-left","slideExitActiveLeft-right"]),oB=["children","className","reduceAnimations","slideDirection","transKey","classes"],sB=(0,bT.Ay)(TS,{name:"MuiPickersSlideTransition",slot:"Root",overridesResolver:(e,t)=>[t.root,{[`.${aB["slideEnter-left"]}`]:t["slideEnter-left"]},{[`.${aB["slideEnter-right"]}`]:t["slideEnter-right"]},{[`.${aB.slideEnterActive}`]:t.slideEnterActive},{[`.${aB.slideExit}`]:t.slideExit},{[`.${aB["slideExitActiveLeft-left"]}`]:t["slideExitActiveLeft-left"]},{[`.${aB["slideExitActiveLeft-right"]}`]:t["slideExitActiveLeft-right"]}]})((e=>{let{theme:t}=e;const n=t.transitions.create("transform",{duration:t.transitions.duration.complex,easing:"cubic-bezier(0.35, 0.8, 0.4, 1)"});return{display:"block",position:"relative",overflowX:"hidden","& > *":{position:"absolute",top:0,right:0,left:0},[`& .${aB["slideEnter-left"]}`]:{willChange:"transform",transform:"translate(100%)",zIndex:1},[`& .${aB["slideEnter-right"]}`]:{willChange:"transform",transform:"translate(-100%)",zIndex:1},[`& .${aB.slideEnterActive}`]:{transform:"translate(0%)",transition:n},[`& .${aB.slideExit}`]:{transform:"translate(0%)"},[`& .${aB["slideExitActiveLeft-left"]}`]:{willChange:"transform",transform:"translate(-100%)",transition:n,zIndex:0},[`& .${aB["slideExitActiveLeft-right"]}`]:{willChange:"transform",transform:"translate(100%)",transition:n,zIndex:0}}}));const lB=e=>(0,_T.Ay)("MuiDayCalendar",e),cB=((0,Ge.A)("MuiDayCalendar",["root","header","weekDayLabel","loadingContainer","slideTransition","monthContainer","weekContainer","weekNumberLabel","weekNumber"]),["parentProps","day","focusableDay","selectedDays","isDateDisabled","currentMonthNumber","isViewFocused"]),uB=["ownerState"],dB=(0,bT.Ay)("div",{name:"MuiDayCalendar",slot:"Root",overridesResolver:(e,t)=>t.root})({}),hB=(0,bT.Ay)("div",{name:"MuiDayCalendar",slot:"Header",overridesResolver:(e,t)=>t.header})({display:"flex",justifyContent:"center",alignItems:"center"}),pB=(0,bT.Ay)(hS,{name:"MuiDayCalendar",slot:"WeekDayLabel",overridesResolver:(e,t)=>t.weekDayLabel})((e=>{let{theme:t}=e;return{width:36,height:40,margin:"0 2px",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",color:(t.vars||t).palette.text.secondary}})),fB=(0,bT.Ay)(hS,{name:"MuiDayCalendar",slot:"WeekNumberLabel",overridesResolver:(e,t)=>t.weekNumberLabel})((e=>{let{theme:t}=e;return{width:36,height:40,margin:"0 2px",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",color:t.palette.text.disabled}})),mB=(0,bT.Ay)(hS,{name:"MuiDayCalendar",slot:"WeekNumber",overridesResolver:(e,t)=>t.weekNumber})((e=>{let{theme:t}=e;return(0,De.A)({},t.typography.caption,{width:36,height:36,padding:0,margin:"0 2px",color:t.palette.text.disabled,fontSize:"0.75rem",alignItems:"center",justifyContent:"center",display:"inline-flex"})})),gB=(0,bT.Ay)("div",{name:"MuiDayCalendar",slot:"LoadingContainer",overridesResolver:(e,t)=>t.loadingContainer})({display:"flex",justifyContent:"center",alignItems:"center",minHeight:240}),vB=(0,bT.Ay)((function(e){const n=SN({props:e,name:"MuiPickersSlideTransition"}),{children:r,className:i,reduceAnimations:a,transKey:o}=n,s=(0,Le.A)(n,oB),l=(e=>{const{classes:t,slideDirection:n}=e,r={root:["root"],exit:["slideExit"],enterActive:["slideEnterActive"],enter:[`slideEnter-${n}`],exitActive:[`slideExitActiveLeft-${n}`]};return(0,yT.A)(r,iB,t)})(n),c=tC();if(a)return(0,Ve.jsx)("div",{className:(0,Pe.A)(l.root,i),children:r});const u={exit:l.exit,enterActive:l.enterActive,enter:l.enter,exitActive:l.exitActive};return(0,Ve.jsx)(sB,{className:(0,Pe.A)(l.root,i),childFactory:e=>t.cloneElement(e,{classNames:u}),role:"presentation",children:(0,Ve.jsx)(rB,(0,De.A)({mountOnEnter:!0,unmountOnExit:!0,timeout:c.transitions.duration.complex,classNames:u},s,{children:r}),o)})}),{name:"MuiDayCalendar",slot:"SlideTransition",overridesResolver:(e,t)=>t.slideTransition})({minHeight:240}),yB=(0,bT.Ay)("div",{name:"MuiDayCalendar",slot:"MonthContainer",overridesResolver:(e,t)=>t.monthContainer})({overflow:"hidden"}),bB=(0,bT.Ay)("div",{name:"MuiDayCalendar",slot:"WeekContainer",overridesResolver:(e,t)=>t.weekContainer})({margin:"2px 0",display:"flex",justifyContent:"center"});function wB(e){var n,r,i;let{parentProps:a,day:o,focusableDay:s,selectedDays:l,isDateDisabled:c,currentMonthNumber:u,isViewFocused:d}=e,h=(0,Le.A)(e,cB);const{disabled:p,disableHighlightToday:f,isMonthSwitchingAnimating:m,showDaysOutsideCurrentMonth:g,components:v,componentsProps:y,slots:b,slotProps:w,timezone:E}=a,x=bO(),_=xO(E),A=null!==s&&x.isSameDay(o,s),T=l.some((e=>x.isSameDay(e,o))),S=x.isSameDay(o,_),k=null!=(n=null!=(r=null==b?void 0:b.day)?r:null==v?void 0:v.Day)?n:JU,C=jO({elementType:k,externalSlotProps:null!=(i=null==w?void 0:w.day)?i:null==y?void 0:y.day,additionalProps:(0,De.A)({disableHighlightToday:f,showDaysOutsideCurrentMonth:g,role:"gridcell",isAnimating:m,"data-timestamp":x.toJsDate(o).valueOf()},h),ownerState:(0,De.A)({},a,{day:o,selected:T})}),I=(0,Le.A)(C,uB),R=t.useMemo((()=>p||c(o)),[p,c,o]),D=t.useMemo((()=>x.getMonth(o)!==u),[x,o,u]),L=t.useMemo((()=>{const e=x.startOfMonth(x.setMonth(o,u));return g?x.isSameDay(o,x.startOfWeek(e)):x.isSameDay(o,e)}),[u,o,g,x]),P=t.useMemo((()=>{const e=x.endOfMonth(x.setMonth(o,u));return g?x.isSameDay(o,x.endOfWeek(e)):x.isSameDay(o,e)}),[u,o,g,x]);return(0,Ve.jsx)(k,(0,De.A)({},I,{day:o,disabled:R,autoFocus:d&&A,today:S,outsideCurrentMonth:D,isFirstVisibleCell:L,isLastVisibleCell:P,selected:T,tabIndex:A?0:-1,"aria-selected":T,"aria-current":S?"date":void 0}))}function EB(e){const n=SN({props:e,name:"MuiDayCalendar"}),{onFocusedDayChange:r,className:i,currentMonth:a,selectedDays:o,focusedDay:s,loading:l,onSelectedDaysChange:c,onMonthSwitchingAnimationEnd:u,readOnly:d,reduceAnimations:h,renderLoading:p=()=>(0,Ve.jsx)("span",{children:"..."}),slideDirection:f,TransitionProps:m,disablePast:g,disableFuture:v,minDate:y,maxDate:b,shouldDisableDate:w,shouldDisableMonth:E,shouldDisableYear:x,dayOfWeekFormatter:_,hasFocus:A,onFocusedViewChange:T,gridLabelId:S,displayWeekNumber:k,fixedWeekNumber:C,autoFocus:I,timezone:R}=n,D=xO(R),L=bO(),P=(e=>{const{classes:t}=e;return(0,yT.A)({root:["root"],header:["header"],weekDayLabel:["weekDayLabel"],loadingContainer:["loadingContainer"],slideTransition:["slideTransition"],monthContainer:["monthContainer"],weekContainer:["weekContainer"],weekNumberLabel:["weekNumberLabel"],weekNumber:["weekNumber"]},lB,t)})(n),M="rtl"===tC().direction,N=_||((e,t)=>L.format(t,"weekdayShort").charAt(0).toUpperCase()),O=MU({shouldDisableDate:w,shouldDisableMonth:E,shouldDisableYear:x,minDate:y,maxDate:b,disablePast:g,disableFuture:v,timezone:R}),j=EO(),[F,U]=(0,SF.A)({name:"DayCalendar",state:"hasFocus",controlled:A,default:null!=I&&I}),[B,$]=t.useState((()=>s||D)),V=(0,kC.A)((e=>{d||c(e)})),W=e=>{O(e)||(r(e),$(e),null==T||T(!0),U(!0))},z=(0,kC.A)(((e,t)=>{switch(e.key){case"ArrowUp":W(L.addDays(t,-7)),e.preventDefault();break;case"ArrowDown":W(L.addDays(t,7)),e.preventDefault();break;case"ArrowLeft":{const n=L.addDays(t,M?1:-1),r=L.addMonths(t,M?1:-1),i=PN({utils:L,date:n,minDate:M?n:L.startOfMonth(r),maxDate:M?L.endOfMonth(r):n,isDateDisabled:O,timezone:R});W(i||n),e.preventDefault();break}case"ArrowRight":{const n=L.addDays(t,M?-1:1),r=L.addMonths(t,M?-1:1),i=PN({utils:L,date:n,minDate:M?L.startOfMonth(r):n,maxDate:M?n:L.endOfMonth(r),isDateDisabled:O,timezone:R});W(i||n),e.preventDefault();break}case"Home":W(L.startOfWeek(t)),e.preventDefault();break;case"End":W(L.endOfWeek(t)),e.preventDefault();break;case"PageUp":W(L.addMonths(t,1)),e.preventDefault();break;case"PageDown":W(L.addMonths(t,-1)),e.preventDefault()}})),H=(0,kC.A)(((e,t)=>W(t))),q=(0,kC.A)(((e,t)=>{F&&L.isSameDay(B,t)&&(null==T||T(!1))})),G=L.getMonth(a),K=t.useMemo((()=>o.filter((e=>!!e)).map((e=>L.startOfDay(e)))),[L,o]),Y=G,Q=t.useMemo((()=>t.createRef()),[Y]),X=L.startOfWeek(D),Z=t.useMemo((()=>{const e=L.startOfMonth(a),t=L.endOfMonth(a);return O(B)||L.isAfterDay(B,t)||L.isBeforeDay(B,e)?PN({utils:L,date:B,minDate:e,maxDate:t,disablePast:g,disableFuture:v,isDateDisabled:O,timezone:R}):B}),[a,v,g,B,O,L,R]),J=t.useMemo((()=>{const e=L.setTimezone(a,R),t=L.getWeekArray(e);let n=L.addMonths(e,1);for(;C&&t.length<C;){const e=L.getWeekArray(n),r=L.isSameDay(t[t.length-1][0],e[0][0]);e.slice(r?1:0).forEach((e=>{t.length<C&&t.push(e)})),n=L.addMonths(n,1)}return t}),[a,C,L,R]);return(0,Ve.jsxs)(dB,{role:"grid","aria-labelledby":S,className:P.root,children:[(0,Ve.jsxs)(hB,{role:"row",className:P.header,children:[k&&(0,Ve.jsx)(fB,{variant:"caption",role:"columnheader","aria-label":j.calendarWeekNumberHeaderLabel,className:P.weekNumberLabel,children:j.calendarWeekNumberHeaderText}),BN(L,D).map(((e,t)=>{var n;const r=L.format(e,"weekdayShort");return(0,Ve.jsx)(pB,{variant:"caption",role:"columnheader","aria-label":L.format(L.addDays(X,t),"weekday"),className:P.weekDayLabel,children:null!=(n=null==N?void 0:N(r,e))?n:r},r+t.toString())}))]}),l?(0,Ve.jsx)(gB,{className:P.loadingContainer,children:p()}):(0,Ve.jsx)(vB,(0,De.A)({transKey:Y,onExited:u,reduceAnimations:h,slideDirection:f,className:(0,Pe.A)(i,P.slideTransition)},m,{nodeRef:Q,children:(0,Ve.jsx)(yB,{ref:Q,role:"rowgroup",className:P.monthContainer,children:J.map(((e,t)=>(0,Ve.jsxs)(bB,{role:"row",className:P.weekContainer,"aria-rowindex":t+1,children:[k&&(0,Ve.jsx)(mB,{className:P.weekNumber,role:"rowheader","aria-label":j.calendarWeekNumberAriaLabelText(L.getWeekNumber(e[0])),children:j.calendarWeekNumberText(L.getWeekNumber(e[0]))}),e.map(((e,t)=>(0,Ve.jsx)(wB,{parentProps:n,day:e,selectedDays:K,focusableDay:Z,onKeyDown:z,onFocus:H,onBlur:q,onDaySelect:V,isDateDisabled:O,currentMonthNumber:G,isViewFocused:F,"aria-colindex":t+1},e.toString())))]},`week-${e[0]}`)))})}))]})}function xB(e){return(0,_T.Ay)("MuiPickersMonth",e)}const _B=(0,Ge.A)("MuiPickersMonth",["root","monthButton","disabled","selected"]),AB=["autoFocus","children","disabled","selected","value","tabIndex","onClick","onKeyDown","onFocus","onBlur","aria-current","aria-label","monthsPerRow"],TB=(0,bT.Ay)("div",{name:"MuiPickersMonth",slot:"Root",overridesResolver:(e,t)=>[t.root]})((e=>{let{ownerState:t}=e;return{flexBasis:3===t.monthsPerRow?"33.3%":"25%",display:"flex",alignItems:"center",justifyContent:"center"}})),SB=(0,bT.Ay)("button",{name:"MuiPickersMonth",slot:"MonthButton",overridesResolver:(e,t)=>[t.monthButton,{[`&.${_B.disabled}`]:t.disabled},{[`&.${_B.selected}`]:t.selected}]})((e=>{let{theme:t}=e;return(0,De.A)({color:"unset",backgroundColor:"transparent",border:0,outline:0},t.typography.subtitle1,{margin:"8px 0",height:36,width:72,borderRadius:18,cursor:"pointer","&:focus":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:WU(t.palette.action.active,t.palette.action.hoverOpacity)},"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:WU(t.palette.action.active,t.palette.action.hoverOpacity)},"&:disabled":{cursor:"auto",pointerEvents:"none"},[`&.${_B.disabled}`]:{color:(t.vars||t).palette.text.secondary},[`&.${_B.selected}`]:{color:(t.vars||t).palette.primary.contrastText,backgroundColor:(t.vars||t).palette.primary.main,"&:focus, &:hover":{backgroundColor:(t.vars||t).palette.primary.dark}}})})),kB=t.memo((function(e){const n=SN({props:e,name:"MuiPickersMonth"}),{autoFocus:r,children:i,disabled:a,selected:o,value:s,tabIndex:l,onClick:c,onKeyDown:u,onFocus:d,onBlur:h,"aria-current":p,"aria-label":f}=n,m=(0,Le.A)(n,AB),g=t.useRef(null),v=(e=>{const{disabled:t,selected:n,classes:r}=e,i={root:["root"],monthButton:["monthButton",t&&"disabled",n&&"selected"]};return(0,yT.A)(i,xB,r)})(n);return(0,mC.A)((()=>{var e;r&&(null==(e=g.current)||e.focus())}),[r]),(0,Ve.jsx)(TB,(0,De.A)({className:v.root,ownerState:n},m,{children:(0,Ve.jsx)(SB,{ref:g,disabled:a,type:"button",role:"radio",tabIndex:a?-1:l,"aria-current":p,"aria-checked":o,"aria-label":f,onClick:e=>c(e,s),onKeyDown:e=>u(e,s),onFocus:e=>d(e,s),onBlur:e=>h(e,s),className:v.monthButton,ownerState:n,children:i})}))}));function CB(e){return(0,_T.Ay)("MuiMonthCalendar",e)}(0,Ge.A)("MuiMonthCalendar",["root"]);const IB=["className","value","defaultValue","referenceDate","disabled","disableFuture","disablePast","maxDate","minDate","onChange","shouldDisableMonth","readOnly","disableHighlightToday","autoFocus","onMonthFocus","hasFocus","onFocusedViewChange","monthsPerRow","timezone","gridLabelId"];const RB=(0,bT.Ay)("div",{name:"MuiMonthCalendar",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"flex",flexWrap:"wrap",alignContent:"stretch",padding:"0 4px",width:tU,boxSizing:"border-box"}),DB=t.forwardRef((function(e,n){const r=function(e,t){const n=bO(),r=wO(),i=SN({props:e,name:t});return(0,De.A)({disableFuture:!1,disablePast:!1},i,{minDate:MN(n,i.minDate,r.minDate),maxDate:MN(n,i.maxDate,r.maxDate)})}(e,"MuiMonthCalendar"),{className:i,value:a,defaultValue:o,referenceDate:s,disabled:l,disableFuture:c,disablePast:u,maxDate:d,minDate:h,onChange:p,shouldDisableMonth:f,readOnly:m,disableHighlightToday:g,autoFocus:v=!1,onMonthFocus:y,hasFocus:b,onFocusedViewChange:w,monthsPerRow:E=3,timezone:x,gridLabelId:_}=r,A=(0,Le.A)(r,IB),{value:T,handleValueChange:S,timezone:k}=IF({name:"MonthCalendar",timezone:x,value:a,defaultValue:o,onChange:p,valueManager:uO}),C=xO(k),I=$e(),R=bO(),D=t.useMemo((()=>uO.getInitialReferenceValue({value:T,utils:R,props:r,timezone:k,referenceDate:s,granularity:WN.month})),[]),L=r,P=(e=>{const{classes:t}=e;return(0,yT.A)({root:["root"]},CB,t)})(L),M=t.useMemo((()=>R.getMonth(C)),[R,C]),N=t.useMemo((()=>null!=T?R.getMonth(T):g?null:R.getMonth(D)),[T,R,g,D]),[O,j]=t.useState((()=>N||M)),[F,U]=(0,SF.A)({name:"MonthCalendar",state:"hasFocus",controlled:b,default:null!=v&&v}),B=(0,kC.A)((e=>{U(e),w&&w(e)})),$=t.useCallback((e=>{const t=R.startOfMonth(u&&R.isAfter(C,h)?C:h),n=R.startOfMonth(c&&R.isBefore(C,d)?C:d),r=R.startOfMonth(e);return!!R.isBefore(r,t)||(!!R.isAfter(r,n)||!!f&&f(r))}),[c,u,d,h,C,f,R]),V=(0,kC.A)(((e,t)=>{if(m)return;const n=R.setMonth(null!=T?T:D,t);S(n)})),W=(0,kC.A)((e=>{$(R.setMonth(null!=T?T:D,e))||(j(e),B(!0),y&&y(e))}));t.useEffect((()=>{j((e=>null!==N&&e!==N?N:e))}),[N]);const z=(0,kC.A)(((e,t)=>{const n=12;switch(e.key){case"ArrowUp":W((n+t-3)%n),e.preventDefault();break;case"ArrowDown":W((n+t+3)%n),e.preventDefault();break;case"ArrowLeft":W((n+t+("ltr"===I.direction?-1:1))%n),e.preventDefault();break;case"ArrowRight":W((n+t+("ltr"===I.direction?1:-1))%n),e.preventDefault()}})),H=(0,kC.A)(((e,t)=>{W(t)})),q=(0,kC.A)(((e,t)=>{O===t&&B(!1)}));return(0,Ve.jsx)(RB,(0,De.A)({ref:n,className:(0,Pe.A)(P.root,i),ownerState:L,role:"radiogroup","aria-labelledby":_},A,{children:NN(R,null!=T?T:D).map((e=>{const t=R.getMonth(e),n=R.format(e,"monthShort"),r=R.format(e,"month"),i=t===N,a=l||$(e);return(0,Ve.jsx)(kB,{selected:i,value:t,onClick:V,onKeyDown:z,autoFocus:F&&t===O,disabled:a,tabIndex:t===O?0:-1,onFocus:H,onBlur:q,"aria-current":M===t?"date":void 0,"aria-label":r,monthsPerRow:E,children:n},n)}))}))}));function LB(e){return(0,_T.Ay)("MuiPickersYear",e)}const PB=(0,Ge.A)("MuiPickersYear",["root","yearButton","selected","disabled"]),MB=["autoFocus","className","children","disabled","selected","value","tabIndex","onClick","onKeyDown","onFocus","onBlur","aria-current","yearsPerRow"],NB=(0,bT.Ay)("div",{name:"MuiPickersYear",slot:"Root",overridesResolver:(e,t)=>[t.root]})((e=>{let{ownerState:t}=e;return{flexBasis:3===t.yearsPerRow?"33.3%":"25%",display:"flex",alignItems:"center",justifyContent:"center"}})),OB=(0,bT.Ay)("button",{name:"MuiPickersYear",slot:"YearButton",overridesResolver:(e,t)=>[t.yearButton,{[`&.${PB.disabled}`]:t.disabled},{[`&.${PB.selected}`]:t.selected}]})((e=>{let{theme:t}=e;return(0,De.A)({color:"unset",backgroundColor:"transparent",border:0,outline:0},t.typography.subtitle1,{margin:"6px 0",height:36,width:72,borderRadius:18,cursor:"pointer","&:focus":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.focusOpacity})`:WU(t.palette.action.active,t.palette.action.focusOpacity)},"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:WU(t.palette.action.active,t.palette.action.hoverOpacity)},"&:disabled":{cursor:"auto",pointerEvents:"none"},[`&.${PB.disabled}`]:{color:(t.vars||t).palette.text.secondary},[`&.${PB.selected}`]:{color:(t.vars||t).palette.primary.contrastText,backgroundColor:(t.vars||t).palette.primary.main,"&:focus, &:hover":{backgroundColor:(t.vars||t).palette.primary.dark}}})})),jB=t.memo((function(e){const n=SN({props:e,name:"MuiPickersYear"}),{autoFocus:r,className:i,children:a,disabled:o,selected:s,value:l,tabIndex:c,onClick:u,onKeyDown:d,onFocus:h,onBlur:p,"aria-current":f}=n,m=(0,Le.A)(n,MB),g=t.useRef(null),v=(e=>{const{disabled:t,selected:n,classes:r}=e,i={root:["root"],yearButton:["yearButton",t&&"disabled",n&&"selected"]};return(0,yT.A)(i,LB,r)})(n);return t.useEffect((()=>{r&&g.current.focus()}),[r]),(0,Ve.jsx)(NB,(0,De.A)({className:(0,Pe.A)(v.root,i),ownerState:n},m,{children:(0,Ve.jsx)(OB,{ref:g,disabled:o,type:"button",role:"radio",tabIndex:o?-1:c,"aria-current":f,"aria-checked":s,onClick:e=>u(e,l),onKeyDown:e=>d(e,l),onFocus:e=>h(e,l),onBlur:e=>p(e,l),className:v.yearButton,ownerState:n,children:a})}))}));function FB(e){return(0,_T.Ay)("MuiYearCalendar",e)}(0,Ge.A)("MuiYearCalendar",["root"]);const UB=["autoFocus","className","value","defaultValue","referenceDate","disabled","disableFuture","disablePast","maxDate","minDate","onChange","readOnly","shouldDisableYear","disableHighlightToday","onYearFocus","hasFocus","onFocusedViewChange","yearsPerRow","timezone","gridLabelId"];const BB=(0,bT.Ay)("div",{name:"MuiYearCalendar",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"flex",flexDirection:"row",flexWrap:"wrap",overflowY:"auto",height:"100%",padding:"0 4px",width:tU,maxHeight:280,boxSizing:"border-box",position:"relative"}),$B=t.forwardRef((function(e,n){const r=function(e,t){var n;const r=bO(),i=wO(),a=SN({props:e,name:t});return(0,De.A)({disablePast:!1,disableFuture:!1},a,{yearsPerRow:null!=(n=a.yearsPerRow)?n:3,minDate:MN(r,a.minDate,i.minDate),maxDate:MN(r,a.maxDate,i.maxDate)})}(e,"MuiYearCalendar"),{autoFocus:i,className:a,value:o,defaultValue:s,referenceDate:l,disabled:c,disableFuture:u,disablePast:d,maxDate:h,minDate:p,onChange:f,readOnly:m,shouldDisableYear:g,disableHighlightToday:v,onYearFocus:y,hasFocus:b,onFocusedViewChange:w,yearsPerRow:E,timezone:x,gridLabelId:_}=r,A=(0,Le.A)(r,UB),{value:T,handleValueChange:S,timezone:k}=IF({name:"YearCalendar",timezone:x,value:o,defaultValue:s,onChange:f,valueManager:uO}),C=xO(k),I=$e(),R=bO(),D=t.useMemo((()=>uO.getInitialReferenceValue({value:T,utils:R,props:r,timezone:k,referenceDate:l,granularity:WN.year})),[]),L=r,P=(e=>{const{classes:t}=e;return(0,yT.A)({root:["root"]},FB,t)})(L),M=t.useMemo((()=>R.getYear(C)),[R,C]),N=t.useMemo((()=>null!=T?R.getYear(T):v?null:R.getYear(D)),[T,R,v,D]),[O,j]=t.useState((()=>N||M)),[F,U]=(0,SF.A)({name:"YearCalendar",state:"hasFocus",controlled:b,default:null!=i&&i}),B=(0,kC.A)((e=>{U(e),w&&w(e)})),$=t.useCallback((e=>{if(d&&R.isBeforeYear(e,C))return!0;if(u&&R.isAfterYear(e,C))return!0;if(p&&R.isBeforeYear(e,p))return!0;if(h&&R.isAfterYear(e,h))return!0;if(!g)return!1;const t=R.startOfYear(e);return g(t)}),[u,d,h,p,C,g,R]),V=(0,kC.A)(((e,t)=>{if(m)return;const n=R.setYear(null!=T?T:D,t);S(n)})),W=(0,kC.A)((e=>{$(R.setYear(null!=T?T:D,e))||(j(e),B(!0),null==y||y(e))}));t.useEffect((()=>{j((e=>null!==N&&e!==N?N:e))}),[N]);const z=(0,kC.A)(((e,t)=>{switch(e.key){case"ArrowUp":W(t-E),e.preventDefault();break;case"ArrowDown":W(t+E),e.preventDefault();break;case"ArrowLeft":W(t+("ltr"===I.direction?-1:1)),e.preventDefault();break;case"ArrowRight":W(t+("ltr"===I.direction?1:-1)),e.preventDefault()}})),H=(0,kC.A)(((e,t)=>{W(t)})),q=(0,kC.A)(((e,t)=>{O===t&&B(!1)})),G=t.useRef(null),K=(0,WT.A)(n,G);return t.useEffect((()=>{if(i||null===G.current)return;const e=G.current.querySelector('[tabindex="0"]');if(!e)return;const t=e.offsetHeight,n=e.offsetTop,r=G.current.clientHeight,a=G.current.scrollTop,o=n+t;t>r||n<a||(G.current.scrollTop=o-r/2-t/2)}),[i]),(0,Ve.jsx)(BB,(0,De.A)({ref:K,className:(0,Pe.A)(P.root,a),ownerState:L,role:"radiogroup","aria-labelledby":_},A,{children:R.getYearRange(p,h).map((e=>{const t=R.getYear(e),n=t===N,r=c||$(e);return(0,Ve.jsx)(jB,{selected:n,value:t,onClick:V,onKeyDown:z,autoFocus:F&&t===O,disabled:r,tabIndex:t===O?0:-1,onFocus:H,onBlur:q,"aria-current":M===t?"date":void 0,yearsPerRow:E,children:R.format(e,"year")},R.format(e,"year"))}))}))}));function VB(e){return(0,_T.Ay)("MuiPickersArrowSwitcher",e)}(0,Ge.A)("MuiPickersArrowSwitcher",["root","spacer","button"]);const WB=["children","className","slots","slotProps","isNextDisabled","isNextHidden","onGoToNext","nextLabel","isPreviousDisabled","isPreviousHidden","onGoToPrevious","previousLabel"],zB=["ownerState"],HB=["ownerState"],qB=(0,bT.Ay)("div",{name:"MuiPickersArrowSwitcher",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"flex"}),GB=(0,bT.Ay)("div",{name:"MuiPickersArrowSwitcher",slot:"Spacer",overridesResolver:(e,t)=>t.spacer})((e=>{let{theme:t}=e;return{width:t.spacing(3)}})),KB=(0,bT.Ay)(ek,{name:"MuiPickersArrowSwitcher",slot:"Button",overridesResolver:(e,t)=>t.button})((e=>{let{ownerState:t}=e;return(0,De.A)({},t.hidden&&{visibility:"hidden"})})),YB=t.forwardRef((function(e,t){var n,r,i,a;const o="rtl"===tC().direction,s=SN({props:e,name:"MuiPickersArrowSwitcher"}),{children:l,className:c,slots:u,slotProps:d,isNextDisabled:h,isNextHidden:p,onGoToNext:f,nextLabel:m,isPreviousDisabled:g,isPreviousHidden:v,onGoToPrevious:y,previousLabel:b}=s,w=(0,Le.A)(s,WB),E=s,x=(e=>{const{classes:t}=e;return(0,yT.A)({root:["root"],spacer:["spacer"],button:["button"]},VB,t)})(E),_={isDisabled:h,isHidden:p,goTo:f,label:m},A={isDisabled:g,isHidden:v,goTo:y,label:b},T=null!=(n=null==u?void 0:u.previousIconButton)?n:KB,S=jO({elementType:T,externalSlotProps:null==d?void 0:d.previousIconButton,additionalProps:{size:"medium",title:A.label,"aria-label":A.label,disabled:A.isDisabled,edge:"end",onClick:A.goTo},ownerState:(0,De.A)({},E,{hidden:A.isHidden}),className:x.button}),k=null!=(r=null==u?void 0:u.nextIconButton)?r:KB,C=jO({elementType:k,externalSlotProps:null==d?void 0:d.nextIconButton,additionalProps:{size:"medium",title:_.label,"aria-label":_.label,disabled:_.isDisabled,edge:"start",onClick:_.goTo},ownerState:(0,De.A)({},E,{hidden:_.isHidden}),className:x.button}),I=null!=(i=null==u?void 0:u.leftArrowIcon)?i:pU,R=jO({elementType:I,externalSlotProps:null==d?void 0:d.leftArrowIcon,additionalProps:{fontSize:"inherit"},ownerState:void 0}),D=(0,Le.A)(R,zB),L=null!=(a=null==u?void 0:u.rightArrowIcon)?a:fU,P=jO({elementType:L,externalSlotProps:null==d?void 0:d.rightArrowIcon,additionalProps:{fontSize:"inherit"},ownerState:void 0}),M=(0,Le.A)(P,HB);return(0,Ve.jsxs)(qB,(0,De.A)({ref:t,className:(0,Pe.A)(x.root,c),ownerState:E},w,{children:[(0,Ve.jsx)(T,(0,De.A)({},S,{children:o?(0,Ve.jsx)(L,(0,De.A)({},M)):(0,Ve.jsx)(I,(0,De.A)({},D))})),l?(0,Ve.jsx)(hS,{variant:"subtitle1",component:"span",children:l}):(0,Ve.jsx)(GB,{className:x.spacer,ownerState:E}),(0,Ve.jsx)(k,(0,De.A)({},C,{children:o?(0,Ve.jsx)(I,(0,De.A)({},D)):(0,Ve.jsx)(L,(0,De.A)({},M))}))]}))}));const QB=e=>(0,_T.Ay)("MuiPickersCalendarHeader",e),XB=(0,Ge.A)("MuiPickersCalendarHeader",["root","labelContainer","label","switchViewButton","switchViewIcon"]),ZB=["slots","slotProps","components","componentsProps","currentMonth","disabled","disableFuture","disablePast","maxDate","minDate","onMonthChange","onViewChange","view","reduceAnimations","views","labelId","className","timezone"],JB=["ownerState"],e$=(0,bT.Ay)("div",{name:"MuiPickersCalendarHeader",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"flex",alignItems:"center",marginTop:16,marginBottom:8,paddingLeft:24,paddingRight:12,maxHeight:30,minHeight:30}),t$=(0,bT.Ay)("div",{name:"MuiPickersCalendarHeader",slot:"LabelContainer",overridesResolver:(e,t)=>t.labelContainer})((e=>{let{theme:t}=e;return(0,De.A)({display:"flex",overflow:"hidden",alignItems:"center",cursor:"pointer",marginRight:"auto"},t.typography.body1,{fontWeight:t.typography.fontWeightMedium})})),n$=(0,bT.Ay)("div",{name:"MuiPickersCalendarHeader",slot:"Label",overridesResolver:(e,t)=>t.label})({marginRight:6}),r$=(0,bT.Ay)(ek,{name:"MuiPickersCalendarHeader",slot:"SwitchViewButton",overridesResolver:(e,t)=>t.switchViewButton})((e=>{let{ownerState:t}=e;return(0,De.A)({marginRight:"auto"},"year"===t.view&&{[`.${XB.switchViewIcon}`]:{transform:"rotate(180deg)"}})})),i$=(0,bT.Ay)(hU,{name:"MuiPickersCalendarHeader",slot:"SwitchViewIcon",overridesResolver:(e,t)=>t.switchViewIcon})((e=>{let{theme:t}=e;return{willChange:"transform",transition:t.transitions.create("transform"),transform:"rotate(0deg)"}})),a$=t.forwardRef((function(e,n){var r,i,a,o;const s=EO(),l=bO(),c=SN({props:e,name:"MuiPickersCalendarHeader"}),{slots:u,slotProps:d,components:h,currentMonth:p,disabled:f,disableFuture:m,disablePast:g,maxDate:v,minDate:y,onMonthChange:b,onViewChange:w,view:E,reduceAnimations:x,views:_,labelId:A,className:T,timezone:S}=c,k=(0,Le.A)(c,ZB),C=c,I=(e=>{const{classes:t}=e;return(0,yT.A)({root:["root"],labelContainer:["labelContainer"],label:["label"],switchViewButton:["switchViewButton"],switchViewIcon:["switchViewIcon"]},QB,t)})(c),R=null!=(r=null!=(i=null==u?void 0:u.switchViewButton)?i:null==h?void 0:h.SwitchViewButton)?r:r$,D=jO({elementType:R,externalSlotProps:null==d?void 0:d.switchViewButton,additionalProps:{size:"small","aria-label":s.calendarViewSwitchingButtonAriaLabel(E)},ownerState:C,className:I.switchViewButton}),L=null!=(a=null!=(o=null==u?void 0:u.switchViewIcon)?o:null==h?void 0:h.SwitchViewIcon)?a:i$,P=jO({elementType:L,externalSlotProps:null==d?void 0:d.switchViewIcon,ownerState:void 0,className:I.switchViewIcon}),M=(0,Le.A)(P,JB),N=function(e,n){let{disableFuture:r,maxDate:i,timezone:a}=n;const o=bO();return t.useMemo((()=>{const t=o.dateWithTimezone(void 0,a),n=o.startOfMonth(r&&o.isBefore(t,i)?t:i);return!o.isAfter(n,e)}),[r,i,e,o,a])}(p,{disableFuture:m,maxDate:v,timezone:S}),O=function(e,n){let{disablePast:r,minDate:i,timezone:a}=n;const o=bO();return t.useMemo((()=>{const t=o.dateWithTimezone(void 0,a),n=o.startOfMonth(r&&o.isAfter(t,i)?t:i);return!o.isBefore(n,e)}),[r,i,e,o,a])}(p,{disablePast:g,minDate:y,timezone:S});return 1===_.length&&"year"===_[0]?null:(0,Ve.jsxs)(e$,(0,De.A)({},k,{ownerState:C,className:(0,Pe.A)(T,I.root),ref:n,children:[(0,Ve.jsxs)(t$,{role:"presentation",onClick:()=>{if(1!==_.length&&w&&!f)if(2===_.length)w(_.find((e=>e!==E))||_[0]);else{const e=0!==_.indexOf(E)?0:1;w(_[e])}},ownerState:C,"aria-live":"polite",className:I.labelContainer,children:[(0,Ve.jsx)(FU,{reduceAnimations:x,transKey:l.format(p,"monthAndYear"),children:(0,Ve.jsx)(n$,{id:A,ownerState:C,className:I.label,children:l.format(p,"monthAndYear")})}),_.length>1&&!f&&(0,Ve.jsx)(R,(0,De.A)({},D,{children:(0,Ve.jsx)(L,(0,De.A)({},M))}))]}),(0,Ve.jsx)(EC,{in:"day"===E,children:(0,Ve.jsx)(YB,{slots:u,slotProps:d,onGoToPrevious:()=>b(l.addMonths(p,-1),"right"),isPreviousDisabled:O,previousLabel:s.previousMonth,onGoToNext:()=>b(l.addMonths(p,1),"left"),isNextDisabled:N,nextLabel:s.nextMonth})})]}))})),o$=(0,bT.Ay)("div")({overflow:"hidden",width:tU,maxHeight:334,display:"flex",flexDirection:"column",margin:"0 auto"}),s$=e=>(0,_T.Ay)("MuiDateCalendar",e),l$=((0,Ge.A)("MuiDateCalendar",["root","viewTransitionContainer"]),["autoFocus","onViewChange","value","defaultValue","referenceDate","disableFuture","disablePast","defaultCalendarMonth","onChange","onYearChange","onMonthChange","reduceAnimations","shouldDisableDate","shouldDisableMonth","shouldDisableYear","view","views","openTo","className","disabled","readOnly","minDate","maxDate","disableHighlightToday","focusedView","onFocusedViewChange","showDaysOutsideCurrentMonth","fixedWeekNumber","dayOfWeekFormatter","components","componentsProps","slots","slotProps","loading","renderLoading","displayWeekNumber","yearsPerRow","monthsPerRow","timezone"]);const c$=(0,bT.Ay)(o$,{name:"MuiDateCalendar",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"flex",flexDirection:"column",height:334}),u$=(0,bT.Ay)(FU,{name:"MuiDateCalendar",slot:"ViewTransitionContainer",overridesResolver:(e,t)=>t.viewTransitionContainer})({}),d$=t.forwardRef((function(e,n){var r,i,a;const o=bO(),s=(0,cR.A)(),l=function(e,t){var n,r,i,a,o,s,l;const c=bO(),u=wO(),d=wF(),h=SN({props:e,name:t});return(0,De.A)({},h,{loading:null!=(n=h.loading)&&n,disablePast:null!=(r=h.disablePast)&&r,disableFuture:null!=(i=h.disableFuture)&&i,openTo:null!=(a=h.openTo)?a:"day",views:null!=(o=h.views)?o:["year","day"],reduceAnimations:null!=(s=h.reduceAnimations)?s:d,renderLoading:null!=(l=h.renderLoading)?l:()=>(0,Ve.jsx)("span",{children:"..."}),minDate:MN(c,h.minDate,u.minDate),maxDate:MN(c,h.maxDate,u.maxDate)})}(e,"MuiDateCalendar"),{autoFocus:c,onViewChange:u,value:d,defaultValue:h,referenceDate:p,disableFuture:f,disablePast:m,defaultCalendarMonth:g,onChange:v,onYearChange:y,onMonthChange:b,reduceAnimations:w,shouldDisableDate:E,shouldDisableMonth:x,shouldDisableYear:_,view:A,views:T,openTo:S,className:k,disabled:C,readOnly:I,minDate:R,maxDate:D,disableHighlightToday:L,focusedView:P,onFocusedViewChange:M,showDaysOutsideCurrentMonth:N,fixedWeekNumber:O,dayOfWeekFormatter:j,components:F,componentsProps:U,slots:B,slotProps:$,loading:V,renderLoading:W,displayWeekNumber:z,yearsPerRow:H,monthsPerRow:q,timezone:G}=l,K=(0,Le.A)(l,l$),{value:Y,handleValueChange:Q,timezone:X}=IF({name:"DateCalendar",timezone:G,value:d,defaultValue:h,onChange:v,valueManager:uO}),{view:Z,setView:J,focusedView:ee,setFocusedView:te,goToNextView:ne,setValueAndGoToNextView:re}=DF({view:A,views:T,openTo:S,onChange:Q,onViewChange:u,autoFocus:c,focusedView:P,onFocusedViewChange:M}),{referenceDate:ie,calendarState:ae,changeFocusedDay:oe,changeMonth:se,handleChangeMonth:le,isDateDisabled:ce,onMonthSwitchingAnimationEnd:ue}=NU({value:Y,defaultCalendarMonth:g,referenceDate:p,reduceAnimations:w,onMonthChange:b,minDate:R,maxDate:D,shouldDisableDate:E,disablePast:m,disableFuture:f,timezone:X}),de=C&&Y||R,he=C&&Y||D,pe=`${s}-grid-label`,fe=null!==ee,me=null!=(r=null!=(i=null==B?void 0:B.calendarHeader)?i:null==F?void 0:F.CalendarHeader)?r:a$,ge=jO({elementType:me,externalSlotProps:null!=(a=null==$?void 0:$.calendarHeader)?a:null==U?void 0:U.calendarHeader,additionalProps:{views:T,view:Z,currentMonth:ae.currentMonth,onViewChange:J,onMonthChange:(e,t)=>le({newMonth:e,direction:t}),minDate:de,maxDate:he,disabled:C,disablePast:m,disableFuture:f,reduceAnimations:w,timezone:X,labelId:pe,slots:B,slotProps:$},ownerState:l}),ve=(0,kC.A)((e=>{const t=o.startOfMonth(e),n=o.endOfMonth(e),r=ce(e)?PN({utils:o,date:e,minDate:o.isBefore(R,t)?t:R,maxDate:o.isAfter(D,n)?n:D,disablePast:m,disableFuture:f,isDateDisabled:ce,timezone:X}):e;r?(re(r,"finish"),null==b||b(t)):(ne(),se(t)),oe(r,!0)})),ye=(0,kC.A)((e=>{const t=o.startOfYear(e),n=o.endOfYear(e),r=ce(e)?PN({utils:o,date:e,minDate:o.isBefore(R,t)?t:R,maxDate:o.isAfter(D,n)?n:D,disablePast:m,disableFuture:f,isDateDisabled:ce,timezone:X}):e;r?(re(r,"finish"),null==y||y(r)):(ne(),se(t)),oe(r,!0)})),be=(0,kC.A)((e=>Q(e?LN(o,e,null!=Y?Y:ie):e,"finish",Z)));t.useEffect((()=>{null!=Y&&o.isValid(Y)&&se(Y)}),[Y]);const we=l,Ee=(e=>{const{classes:t}=e;return(0,yT.A)({root:["root"],viewTransitionContainer:["viewTransitionContainer"]},s$,t)})(we),xe={disablePast:m,disableFuture:f,maxDate:D,minDate:R},_e={disableHighlightToday:L,readOnly:I,disabled:C,timezone:X,gridLabelId:pe},Ae=t.useRef(Z);t.useEffect((()=>{Ae.current!==Z&&(ee===Ae.current&&te(Z,!0),Ae.current=Z)}),[ee,te,Z]);const Te=t.useMemo((()=>[Y]),[Y]);return(0,Ve.jsxs)(c$,(0,De.A)({ref:n,className:(0,Pe.A)(Ee.root,k),ownerState:we},K,{children:[(0,Ve.jsx)(me,(0,De.A)({},ge)),(0,Ve.jsx)(u$,{reduceAnimations:w,className:Ee.viewTransitionContainer,transKey:Z,ownerState:we,children:(0,Ve.jsxs)("div",{children:["year"===Z&&(0,Ve.jsx)($B,(0,De.A)({},xe,_e,{value:Y,onChange:ye,shouldDisableYear:_,hasFocus:fe,onFocusedViewChange:e=>te("year",e),yearsPerRow:H,referenceDate:ie})),"month"===Z&&(0,Ve.jsx)(DB,(0,De.A)({},xe,_e,{hasFocus:fe,className:k,value:Y,onChange:ve,shouldDisableMonth:x,onFocusedViewChange:e=>te("month",e),monthsPerRow:q,referenceDate:ie})),"day"===Z&&(0,Ve.jsx)(EB,(0,De.A)({},ae,xe,_e,{onMonthSwitchingAnimationEnd:ue,onFocusedDayChange:oe,reduceAnimations:w,selectedDays:Te,onSelectedDaysChange:be,shouldDisableDate:E,shouldDisableMonth:x,shouldDisableYear:_,hasFocus:fe,onFocusedViewChange:e=>te("day",e),showDaysOutsideCurrentMonth:N,fixedWeekNumber:O,dayOfWeekFormatter:j,displayWeekNumber:z,components:F,componentsProps:U,slots:B,slotProps:$,loading:V,renderLoading:W}))]})})]}))})),h$=e=>{let{view:t,onViewChange:n,views:r,focusedView:i,onFocusedViewChange:a,value:o,defaultValue:s,referenceDate:l,onChange:c,className:u,classes:d,disableFuture:h,disablePast:p,minDate:f,maxDate:m,shouldDisableDate:g,shouldDisableMonth:v,shouldDisableYear:y,reduceAnimations:b,onMonthChange:w,monthsPerRow:E,onYearChange:x,yearsPerRow:_,defaultCalendarMonth:A,components:T,componentsProps:S,slots:k,slotProps:C,loading:I,renderLoading:R,disableHighlightToday:D,readOnly:L,disabled:P,showDaysOutsideCurrentMonth:M,dayOfWeekFormatter:N,sx:O,autoFocus:j,fixedWeekNumber:F,displayWeekNumber:U,timezone:B}=e;return(0,Ve.jsx)(d$,{view:t,onViewChange:n,views:r.filter(FN),focusedView:i&&FN(i)?i:null,onFocusedViewChange:a,value:o,defaultValue:s,referenceDate:l,onChange:c,className:u,classes:d,disableFuture:h,disablePast:p,minDate:f,maxDate:m,shouldDisableDate:g,shouldDisableMonth:v,shouldDisableYear:y,reduceAnimations:b,onMonthChange:w,monthsPerRow:E,onYearChange:x,yearsPerRow:_,defaultCalendarMonth:A,components:T,componentsProps:S,slots:k,slotProps:C,loading:I,renderLoading:R,disableHighlightToday:D,readOnly:L,disabled:P,showDaysOutsideCurrentMonth:M,dayOfWeekFormatter:N,sx:O,autoFocus:j,fixedWeekNumber:F,displayWeekNumber:U,timezone:B})},p$=t.forwardRef((function(e,n){var r,i,a,o;const s=EO(),l=bO(),c=PO(e,"MuiDesktopDatePicker"),u=(0,De.A)({day:h$,month:h$,year:h$},c.viewRenderers),d=(0,De.A)({},c,{viewRenderers:u,format:UN(l,c,!1),yearsPerRow:null!=(r=c.yearsPerRow)?r:4,slots:(0,De.A)({openPickerIcon:mU,field:PU},c.slots),slotProps:(0,De.A)({},c.slotProps,{field:e=>{var t;return(0,De.A)({},IN(null==(t=c.slotProps)?void 0:t.field,e),SU(c),{ref:n})},toolbar:(0,De.A)({hidden:!0},null==(i=c.slotProps)?void 0:i.toolbar)})}),{renderPicker:h}=(e=>{var n,r,i,a,o;let{props:s,getOpenDialogAriaText:l}=e,c=(0,Le.A)(e,cU);const{slots:u,slotProps:d,className:h,sx:p,format:f,formatDensity:m,timezone:g,name:v,label:y,inputRef:b,readOnly:w,disabled:E,autoFocus:x,localeText:_,reduceAnimations:A}=s,T=bO(),S=t.useRef(null),k=t.useRef(null),C=(0,cR.A)(),I=null!=(n=null==d||null==(r=d.toolbar)?void 0:r.hidden)&&n,{open:R,actions:D,hasUIView:L,layoutProps:P,renderCurrentView:M,shouldRestoreFocus:N,fieldProps:O}=OF((0,De.A)({},c,{props:s,inputRef:S,autoFocusView:!0,additionalViewProps:{},wrapperVariant:"desktop"})),j=null!=(i=u.inputAdornment)?i:EN,F=jO({elementType:j,externalSlotProps:null==d?void 0:d.inputAdornment,additionalProps:{position:"end"},ownerState:s}),U=(0,Le.A)(F,uU),B=null!=(a=u.openPickerButton)?a:ek,$=jO({elementType:B,externalSlotProps:null==d?void 0:d.openPickerButton,additionalProps:{disabled:E||w,onClick:R?D.onClose:D.onOpen,"aria-label":l(O.value,T),edge:U.position},ownerState:s}),V=(0,Le.A)($,dU),W=u.openPickerIcon,z=u.field,H=jO({elementType:z,externalSlotProps:null==d?void 0:d.field,additionalProps:(0,De.A)({},O,I&&{id:C},{readOnly:w,disabled:E,className:h,sx:p,format:f,formatDensity:m,timezone:g,label:y,name:v,autoFocus:x&&!s.open,focused:!!R||void 0}),ownerState:s});L&&(H.InputProps=(0,De.A)({},H.InputProps,{ref:k},!s.disableOpenPicker&&{[`${U.position}Adornment`]:(0,Ve.jsx)(j,(0,De.A)({},U,{children:(0,Ve.jsx)(B,(0,De.A)({},V,{children:(0,Ve.jsx)(W,(0,De.A)({},null==d?void 0:d.openPickerIcon))}))}))}));const q=(0,De.A)({textField:u.textField,clearIcon:u.clearIcon,clearButton:u.clearButton},H.slots),G=null!=(o=u.layout)?o:lU,K=(0,WT.A)(S,H.inputRef,b);let Y=C;I&&(Y=y?`${C}-label`:void 0);const Q=(0,De.A)({},d,{toolbar:(0,De.A)({},null==d?void 0:d.toolbar,{titleId:C}),popper:(0,De.A)({"aria-labelledby":Y},null==d?void 0:d.popper)});return{renderPicker:()=>(0,Ve.jsxs)(fO,{localeText:_,children:[(0,Ve.jsx)(z,(0,De.A)({},H,{slots:q,slotProps:Q,inputRef:K})),(0,Ve.jsx)(TF,(0,De.A)({role:"dialog",placement:"bottom-start",anchorEl:k.current},D,{open:R,slots:u,slotProps:Q,shouldRestoreFocus:N,reduceAnimations:A,children:(0,Ve.jsx)(G,(0,De.A)({},P,null==Q?void 0:Q.layout,{slots:u,slotProps:Q,children:M()}))}))]})}})({props:d,valueManager:uO,valueType:"date",getOpenDialogAriaText:null!=(a=null==(o=d.localeText)?void 0:o.openDatePickerDialogue)?a:s.openDatePickerDialogue,validator:MO});return h()}));function f$(e){return(0,_T.Ay)("MuiDialogContent",e)}p$.propTypes={autoFocus:CN().bool,className:CN().string,closeOnSelect:CN().bool,components:CN().object,componentsProps:CN().object,dayOfWeekFormatter:CN().func,defaultCalendarMonth:CN().any,defaultValue:CN().any,disabled:CN().bool,disableFuture:CN().bool,disableHighlightToday:CN().bool,disableOpenPicker:CN().bool,disablePast:CN().bool,displayWeekNumber:CN().bool,fixedWeekNumber:CN().number,format:CN().string,formatDensity:CN().oneOf(["dense","spacious"]),inputRef:RN,label:CN().node,loading:CN().bool,localeText:CN().object,maxDate:CN().any,minDate:CN().any,monthsPerRow:CN().oneOf([3,4]),name:CN().string,onAccept:CN().func,onChange:CN().func,onClose:CN().func,onError:CN().func,onMonthChange:CN().func,onOpen:CN().func,onSelectedSectionsChange:CN().func,onViewChange:CN().func,onYearChange:CN().func,open:CN().bool,openTo:CN().oneOf(["day","month","year"]),orientation:CN().oneOf(["landscape","portrait"]),readOnly:CN().bool,reduceAnimations:CN().bool,referenceDate:CN().any,renderLoading:CN().func,selectedSections:CN().oneOfType([CN().oneOf(["all","day","hours","meridiem","minutes","month","seconds","weekDay","year"]),CN().number,CN().shape({endIndex:CN().number.isRequired,startIndex:CN().number.isRequired})]),shouldDisableDate:CN().func,shouldDisableMonth:CN().func,shouldDisableYear:CN().func,showDaysOutsideCurrentMonth:CN().bool,slotProps:CN().object,slots:CN().object,sx:CN().oneOfType([CN().arrayOf(CN().oneOfType([CN().func,CN().object,CN().bool])),CN().func,CN().object]),timezone:CN().string,value:CN().any,view:CN().oneOf(["day","month","year"]),viewRenderers:CN().shape({day:CN().func,month:CN().func,year:CN().func}),views:CN().arrayOf(CN().oneOf(["day","month","year"]).isRequired),yearsPerRow:CN().oneOf([3,4])};(0,Ge.A)("MuiDialogContent",["root","dividers"]);function m$(e){return(0,_T.Ay)("MuiDialogTitle",e)}const g$=(0,Ge.A)("MuiDialogTitle",["root"]),v$=["className","dividers"],y$=(0,bT.Ay)("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.dividers&&t.dividers]}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px"},n.dividers?{padding:"16px 24px",borderTop:`1px solid ${(t.vars||t).palette.divider}`,borderBottom:`1px solid ${(t.vars||t).palette.divider}`}:{[`.${g$.root} + &`]:{paddingTop:0}})})),b$=t.forwardRef((function(e,t){const n=(0,Ze.b)({props:e,name:"MuiDialogContent"}),{className:r,dividers:i=!1}=n,a=(0,Le.A)(n,v$),o=(0,De.A)({},n,{dividers:i}),s=(e=>{const{classes:t,dividers:n}=e,r={root:["root",n&&"dividers"]};return(0,yT.A)(r,f$,t)})(o);return(0,Ve.jsx)(y$,(0,De.A)({className:(0,Pe.A)(s.root,r),ownerState:o,ref:t},a))})),w$=b$,E$=(0,bT.Ay)(bR)({[`& .${dR.container}`]:{outline:0},[`& .${dR.paper}`]:{outline:0,minWidth:tU}}),x$=(0,bT.Ay)(w$)({"&:first-of-type":{padding:0}});function _$(e){var t,n;const{children:r,onDismiss:i,open:a,slots:o,slotProps:s}=e,l=null!=(t=null==o?void 0:o.dialog)?t:E$,c=null!=(n=null==o?void 0:o.mobileTransition)?n:EC;return(0,Ve.jsx)(l,(0,De.A)({open:a,onClose:i},null==s?void 0:s.dialog,{TransitionComponent:c,TransitionProps:null==s?void 0:s.mobileTransition,PaperComponent:null==o?void 0:o.mobilePaper,PaperProps:null==s?void 0:s.mobilePaper,children:(0,Ve.jsx)(x$,{children:r})}))}const A$=["props","getOpenDialogAriaText"],T$=t.forwardRef((function(e,n){var r,i,a;const o=EO(),s=bO(),l=PO(e,"MuiMobileDatePicker"),c=(0,De.A)({day:h$,month:h$,year:h$},l.viewRenderers),u=(0,De.A)({},l,{viewRenderers:c,format:UN(s,l,!1),slots:(0,De.A)({field:PU},l.slots),slotProps:(0,De.A)({},l.slotProps,{field:e=>{var t;return(0,De.A)({},IN(null==(t=l.slotProps)?void 0:t.field,e),SU(l),{ref:n})},toolbar:(0,De.A)({hidden:!1},null==(r=l.slotProps)?void 0:r.toolbar)})}),{renderPicker:d}=(e=>{var n,r,i;let{props:a,getOpenDialogAriaText:o}=e,s=(0,Le.A)(e,A$);const{slots:l,slotProps:c,className:u,sx:d,format:h,formatDensity:p,timezone:f,name:m,label:g,inputRef:v,readOnly:y,disabled:b,localeText:w}=a,E=bO(),x=t.useRef(null),_=(0,cR.A)(),A=null!=(n=null==c||null==(r=c.toolbar)?void 0:r.hidden)&&n,{open:T,actions:S,layoutProps:k,renderCurrentView:C,fieldProps:I}=OF((0,De.A)({},s,{props:a,inputRef:x,autoFocusView:!0,additionalViewProps:{},wrapperVariant:"mobile"})),R=l.field,D=jO({elementType:R,externalSlotProps:null==c?void 0:c.field,additionalProps:(0,De.A)({},I,A&&{id:_},!(b||y)&&{onClick:S.onOpen,onKeyDown:(L=S.onOpen,e=>{"Enter"!==e.key&&" "!==e.key||(L(e),e.preventDefault(),e.stopPropagation()),P&&P(e)})},{readOnly:null==y||y,disabled:b,className:u,sx:d,format:h,formatDensity:p,timezone:f,label:g,name:m}),ownerState:a});var L,P;D.inputProps=(0,De.A)({},D.inputProps,{"aria-label":o(I.value,E)});const M=(0,De.A)({textField:l.textField},D.slots),N=null!=(i=l.layout)?i:lU,O=(0,WT.A)(x,D.inputRef,v);let j=_;A&&(j=g?`${_}-label`:void 0);const F=(0,De.A)({},c,{toolbar:(0,De.A)({},null==c?void 0:c.toolbar,{titleId:_}),mobilePaper:(0,De.A)({"aria-labelledby":j},null==c?void 0:c.mobilePaper)});return{renderPicker:()=>(0,Ve.jsxs)(fO,{localeText:w,children:[(0,Ve.jsx)(R,(0,De.A)({},D,{slots:M,slotProps:F,inputRef:O})),(0,Ve.jsx)(_$,(0,De.A)({},S,{open:T,slots:l,slotProps:F,children:(0,Ve.jsx)(N,(0,De.A)({},k,null==F?void 0:F.layout,{slots:l,slotProps:F,children:C()}))}))]})}})({props:u,valueManager:uO,valueType:"date",getOpenDialogAriaText:null!=(i=null==(a=u.localeText)?void 0:a.openDatePickerDialogue)?i:o.openDatePickerDialogue,validator:MO});return d()}));T$.propTypes={autoFocus:CN().bool,className:CN().string,closeOnSelect:CN().bool,components:CN().object,componentsProps:CN().object,dayOfWeekFormatter:CN().func,defaultCalendarMonth:CN().any,defaultValue:CN().any,disabled:CN().bool,disableFuture:CN().bool,disableHighlightToday:CN().bool,disableOpenPicker:CN().bool,disablePast:CN().bool,displayWeekNumber:CN().bool,fixedWeekNumber:CN().number,format:CN().string,formatDensity:CN().oneOf(["dense","spacious"]),inputRef:RN,label:CN().node,loading:CN().bool,localeText:CN().object,maxDate:CN().any,minDate:CN().any,monthsPerRow:CN().oneOf([3,4]),name:CN().string,onAccept:CN().func,onChange:CN().func,onClose:CN().func,onError:CN().func,onMonthChange:CN().func,onOpen:CN().func,onSelectedSectionsChange:CN().func,onViewChange:CN().func,onYearChange:CN().func,open:CN().bool,openTo:CN().oneOf(["day","month","year"]),orientation:CN().oneOf(["landscape","portrait"]),readOnly:CN().bool,reduceAnimations:CN().bool,referenceDate:CN().any,renderLoading:CN().func,selectedSections:CN().oneOfType([CN().oneOf(["all","day","hours","meridiem","minutes","month","seconds","weekDay","year"]),CN().number,CN().shape({endIndex:CN().number.isRequired,startIndex:CN().number.isRequired})]),shouldDisableDate:CN().func,shouldDisableMonth:CN().func,shouldDisableYear:CN().func,showDaysOutsideCurrentMonth:CN().bool,slotProps:CN().object,slots:CN().object,sx:CN().oneOfType([CN().arrayOf(CN().oneOfType([CN().func,CN().object,CN().bool])),CN().func,CN().object]),timezone:CN().string,value:CN().any,view:CN().oneOf(["day","month","year"]),viewRenderers:CN().shape({day:CN().func,month:CN().func,year:CN().func}),views:CN().arrayOf(CN().oneOf(["day","month","year"]).isRequired),yearsPerRow:CN().oneOf([3,4])};const S$=["desktopModeMediaQuery"],k$=t.forwardRef((function(e,t){const n=SN({props:e,name:"MuiDatePicker"}),{desktopModeMediaQuery:r=mF}=n,i=(0,Le.A)(n,S$);return TN(r,{defaultMatches:!0})?(0,Ve.jsx)(p$,(0,De.A)({ref:t},i)):(0,Ve.jsx)(T$,(0,De.A)({ref:t},i))})),C$=(0,BT.A)((0,Ve.jsx)("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7M2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2m4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3z"}),"VisibilityOff"),I$=(0,BT.A)((0,Ve.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility"),R$=()=>{const[e,n]=(0,t.useState)({username:"",email:"",password:"",confirmPassword:"",dateOfBirth:"",name:""}),[r,i]=(0,t.useState)(null),[a,o]=(0,t.useState)({}),[s,l]=(0,t.useState)(!1),[c,u]=(0,t.useState)(!1),[d,h]=(0,t.useState)(null),p=Z(),{register:f}=XA(),m=e=>{const{name:t,value:r}=e.target;n((e=>({...e,[t]:r}))),a[t]&&o((e=>({...e,[t]:void 0})))};return s?(0,Ve.jsx)(rP,{maxWidth:"sm",children:(0,Ve.jsx)(Xe,{sx:{display:"flex",justifyContent:"center",mt:4},children:(0,Ve.jsx)(jL,{})})}):(0,Ve.jsx)(rP,{maxWidth:"sm",children:(0,Ve.jsx)(Xe,{sx:{mt:8},children:(0,Ve.jsxs)(CT,{elevation:0,sx:{p:4},children:[(0,Ve.jsx)(hS,{variant:"h4",gutterBottom:!0,align:"center",children:"Create Account"}),(0,Ve.jsx)(hS,{variant:"body1",color:"text.secondary",paragraph:!0,align:"center",children:"Join SideEye and start sharing your thoughts with the community"}),d&&(0,Ve.jsx)(HM,{severity:"error",sx:{mb:2},children:d}),(0,Ve.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),h(null),(()=>{const t={};if(e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(e.email)||(t.email="Invalid email format"):t.email="Email is required",e.password){const n=e.password;n.length<8?t.password="Password must be at least 8 characters long":/[A-Z]/.test(n)?/[a-z]/.test(n)?/[0-9]/.test(n)?/[!@#$%^&*(),.?":{}|<>]/.test(n)||(t.password="Password must contain at least one special character"):t.password="Password must contain at least one number":t.password="Password must contain at least one lowercase letter":t.password="Password must contain at least one uppercase letter"}else t.password="Password is required";if(e.password!==e.confirmPassword&&(t.confirmPassword="Passwords do not match"),e.username?e.username.length<3?t.username="Username must be at least 3 characters long":/^[a-zA-Z0-9_-]+$/.test(e.username)||(t.username="Username can only contain letters, numbers, underscores, and hyphens"):t.username="Username is required",e.name?e.name.length<2?t.name="Name must be at least 2 characters long":/^[a-zA-Z\s-']+$/.test(e.name)||(t.name="Name can only contain letters, spaces, hyphens, and apostrophes"):t.name="Name is required",r){const e=new Date;let n=e.getFullYear()-r.getFullYear();const i=e.getMonth()-r.getMonth();(i<0||0===i&&e.getDate()<r.getDate())&&n--,n<16?t.dateOfBirth="You must be at least 16 years old":n>120&&(t.dateOfBirth="Please enter a valid date of birth")}else t.dateOfBirth="Date of birth is required";return o(t),0===Object.keys(t).length})())try{if(l(!0),!r||isNaN(r.getTime()))throw new Error("Invalid date of birth");await f(e.email,e.password,e.username,nl.fromDate(r)),p("/verify-email",{replace:!0})}catch(d){console.error("Registration error:",d),"auth/email-already-in-use"===d.code?h("Email is already in use"):"auth/weak-password"===d.code?h("Password is too weak"):"Invalid date of birth"===d.message?h("Please enter a valid date of birth"):h(d.message||"Error creating account. Please try again.")}finally{l(!1)}},children:[(0,Ve.jsx)(xL,{fullWidth:!0,label:"Full Name",name:"name",value:e.name,onChange:m,margin:"normal",required:!0,error:!!a.name,helperText:a.name}),(0,Ve.jsx)(xL,{fullWidth:!0,label:"Username",name:"username",value:e.username,onChange:m,margin:"normal",required:!0,error:!!a.username,helperText:a.username}),(0,Ve.jsx)(xL,{fullWidth:!0,label:"Email",name:"email",type:"email",value:e.email,onChange:m,margin:"normal",required:!0,error:!!a.email,helperText:a.email}),(0,Ve.jsx)(xL,{fullWidth:!0,label:"Password",name:"password",type:c?"text":"password",value:e.password,onChange:m,margin:"normal",required:!0,error:!!a.password,helperText:a.password,InputProps:{endAdornment:(0,Ve.jsx)(EN,{position:"end",children:(0,Ve.jsx)(ek,{onClick:()=>u(!c),edge:"end",children:c?(0,Ve.jsx)(C$,{}):(0,Ve.jsx)(I$,{})})})}}),(0,Ve.jsx)(xL,{fullWidth:!0,label:"Confirm Password",name:"confirmPassword",type:c?"text":"password",value:e.confirmPassword,onChange:m,margin:"normal",required:!0,error:!!a.confirmPassword,helperText:a.confirmPassword}),(0,Ve.jsx)(k$,{label:"Date of Birth",value:r,onChange:e=>{i(e),e&&!isNaN(e.getTime())?n((t=>({...t,dateOfBirth:e.toISOString()}))):n((e=>({...e,dateOfBirth:""}))),a.dateOfBirth&&o((e=>({...e,dateOfBirth:void 0})))},slotProps:{textField:{margin:"normal",required:!0,fullWidth:!0,error:!!a.dateOfBirth,helperText:a.dateOfBirth}},disableFuture:!0,maxDate:new Date}),(0,Ve.jsx)(Ak,{type:"submit",variant:"contained",fullWidth:!0,sx:{mt:2},disabled:s,children:"Create Account"}),(0,Ve.jsxs)(hS,{variant:"body2",sx:{mt:2},align:"center",children:["Already have an account? ",(0,Ve.jsx)(Ce,{to:"/login",children:"Log in"})]})]})]})})})},D$=()=>{const{resetPassword:e}=XA(),[n,r]=(Z(),(0,t.useState)("")),[i,a]=(0,t.useState)(!1),[o,s]=(0,t.useState)(null),[l,c]=(0,t.useState)(null);return(0,Ve.jsx)(rP,{maxWidth:"xs",children:(0,Ve.jsxs)(CT,{elevation:0,sx:{mt:8,p:4},children:[(0,Ve.jsx)(hS,{variant:"h5",component:"h1",gutterBottom:!0,align:"center",children:"Reset Password"}),(0,Ve.jsx)(hS,{variant:"body2",color:"text.secondary",align:"center",paragraph:!0,children:"Enter your email address and we'll send you a link to reset your password."}),(0,Ve.jsxs)(Xe,{component:"form",onSubmit:async t=>{if(t.preventDefault(),a(!0),s(null),c(null),!n)return s("Email is required."),void a(!1);try{await e(n),c("Password reset email sent. Please check your inbox.")}catch(r){console.error("Error sending password reset email:",r),s("Failed to send reset email. Please check the address and try again.")}finally{a(!1)}},noValidate:!0,sx:{mt:1},children:[(0,Ve.jsx)(xL,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",value:n,onChange:e=>r(e.target.value),autoFocus:!0}),o&&(0,Ve.jsx)(HM,{severity:"error",sx:{mt:2},children:o}),l&&(0,Ve.jsx)(HM,{severity:"success",sx:{mt:2},children:l}),(0,Ve.jsx)(Ak,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},disabled:i,children:i?(0,Ve.jsx)(jL,{size:24}):"Send Reset Link"}),(0,Ve.jsx)(Xe,{textAlign:"center",children:(0,Ve.jsx)(pN,{component:Ce,to:"/login",variant:"body2",children:"Back to Login"})})]})]})})},L$=["className","id"],P$=(0,bT.Ay)(hS,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:"16px 24px",flex:"0 0 auto"}),M$=t.forwardRef((function(e,n){const r=(0,Ze.b)({props:e,name:"MuiDialogTitle"}),{className:i,id:a}=r,o=(0,Le.A)(r,L$),s=r,l=(e=>{const{classes:t}=e;return(0,yT.A)({root:["root"]},m$,t)})(s),{titleId:c=a}=t.useContext(hR);return(0,Ve.jsx)(P$,(0,De.A)({component:"h2",className:(0,Pe.A)(l.root,i),ownerState:s,ref:n,variant:"h6",id:null!=a?a:c},o))})),N$=M$;function O$(e){return(0,_T.Ay)("MuiDrawer",e)}(0,Ge.A)("MuiDrawer",["root","docked","paper","paperAnchorLeft","paperAnchorRight","paperAnchorTop","paperAnchorBottom","paperAnchorDockedLeft","paperAnchorDockedRight","paperAnchorDockedTop","paperAnchorDockedBottom","modal"]);const j$=["BackdropProps"],F$=["anchor","BackdropProps","children","className","elevation","hideBackdrop","ModalProps","onClose","open","PaperProps","SlideProps","TransitionComponent","transitionDuration","variant"],U$=(e,t)=>{const{ownerState:n}=e;return[t.root,("permanent"===n.variant||"persistent"===n.variant)&&t.docked,t.modal]},B$=(0,bT.Ay)(VC,{name:"MuiDrawer",slot:"Root",overridesResolver:U$})((e=>{let{theme:t}=e;return{zIndex:(t.vars||t).zIndex.drawer}})),$$=(0,bT.Ay)("div",{shouldForwardProp:pk.A,name:"MuiDrawer",slot:"Docked",skipVariantsResolver:!1,overridesResolver:U$})({flex:"0 0 auto"}),V$=(0,bT.Ay)(CT,{name:"MuiDrawer",slot:"Paper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.paper,t[`paperAnchor${(0,wT.A)(n.anchor)}`],"temporary"!==n.variant&&t[`paperAnchorDocked${(0,wT.A)(n.anchor)}`]]}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({overflowY:"auto",display:"flex",flexDirection:"column",height:"100%",flex:"1 0 auto",zIndex:(t.vars||t).zIndex.drawer,WebkitOverflowScrolling:"touch",position:"fixed",top:0,outline:0},"left"===n.anchor&&{left:0},"top"===n.anchor&&{top:0,left:0,right:0,height:"auto",maxHeight:"100%"},"right"===n.anchor&&{right:0},"bottom"===n.anchor&&{top:"auto",left:0,bottom:0,right:0,height:"auto",maxHeight:"100%"},"left"===n.anchor&&"temporary"!==n.variant&&{borderRight:`1px solid ${(t.vars||t).palette.divider}`},"top"===n.anchor&&"temporary"!==n.variant&&{borderBottom:`1px solid ${(t.vars||t).palette.divider}`},"right"===n.anchor&&"temporary"!==n.variant&&{borderLeft:`1px solid ${(t.vars||t).palette.divider}`},"bottom"===n.anchor&&"temporary"!==n.variant&&{borderTop:`1px solid ${(t.vars||t).palette.divider}`})})),W$={left:"right",right:"left",top:"down",bottom:"up"};const z$=t.forwardRef((function(e,n){const r=(0,Ze.b)({props:e,name:"MuiDrawer"}),i=tC(),a=lT(),o={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{anchor:s="left",BackdropProps:l,children:c,className:u,elevation:d=16,hideBackdrop:h=!1,ModalProps:{BackdropProps:p}={},onClose:f,open:m=!1,PaperProps:g={},SlideProps:v,TransitionComponent:y=kM,transitionDuration:b=o,variant:w="temporary"}=r,E=(0,Le.A)(r.ModalProps,j$),x=(0,Le.A)(r,F$),_=t.useRef(!1);t.useEffect((()=>{_.current=!0}),[]);const A=function(e,t){let{direction:n}=e;return"rtl"===n&&function(e){return-1!==["left","right"].indexOf(e)}(t)?W$[t]:t}({direction:a?"rtl":"ltr"},s),T=s,S=(0,De.A)({},r,{anchor:T,elevation:d,open:m,variant:w},x),k=(e=>{const{classes:t,anchor:n,variant:r}=e,i={root:["root"],docked:[("permanent"===r||"persistent"===r)&&"docked"],modal:["modal"],paper:["paper",`paperAnchor${(0,wT.A)(n)}`,"temporary"!==r&&`paperAnchorDocked${(0,wT.A)(n)}`]};return(0,yT.A)(i,O$,t)})(S),C=(0,Ve.jsx)(V$,(0,De.A)({elevation:"temporary"===w?d:0,square:!0},g,{className:(0,Pe.A)(k.paper,g.className),ownerState:S,children:c}));if("permanent"===w)return(0,Ve.jsx)($$,(0,De.A)({className:(0,Pe.A)(k.root,k.docked,u),ownerState:S,ref:n},x,{children:C}));const I=(0,Ve.jsx)(y,(0,De.A)({in:m,direction:W$[A],timeout:b,appear:_.current},v,{children:C}));return"persistent"===w?(0,Ve.jsx)($$,(0,De.A)({className:(0,Pe.A)(k.root,k.docked,u),ownerState:S,ref:n},x,{children:I})):(0,Ve.jsx)(B$,(0,De.A)({BackdropProps:(0,De.A)({},l,p,{transitionDuration:b}),className:(0,Pe.A)(k.root,k.modal,u),open:m,ownerState:S,onClose:f,hideBackdrop:h,ref:n},x,E,{children:I}))})),H$=z$;function q$(e){return(0,_T.Ay)("MuiCard",e)}(0,Ge.A)("MuiCard",["root"]);const G$=["className","raised"],K$=(0,bT.Ay)(CT,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({overflow:"hidden"}))),Y$=t.forwardRef((function(e,t){const n=(0,Ze.b)({props:e,name:"MuiCard"}),{className:r,raised:i=!1}=n,a=(0,Le.A)(n,G$),o=(0,De.A)({},n,{raised:i}),s=(e=>{const{classes:t}=e;return(0,yT.A)({root:["root"]},q$,t)})(o);return(0,Ve.jsx)(K$,(0,De.A)({className:(0,Pe.A)(s.root,r),elevation:i?8:void 0,ref:t,ownerState:o},a))})),Q$=Y$;function X$(e){return(0,_T.Ay)("MuiCardMedia",e)}(0,Ge.A)("MuiCardMedia",["root","media","img"]);const Z$=["children","className","component","image","src","style"],J$=(0,bT.Ay)("div",{name:"MuiCardMedia",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,{isMediaComponent:r,isImageComponent:i}=n;return[t.root,r&&t.media,i&&t.img]}})((e=>{let{ownerState:t}=e;return(0,De.A)({display:"block",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"},t.isMediaComponent&&{width:"100%"},t.isImageComponent&&{objectFit:"cover"})})),eV=["video","audio","picture","iframe","img"],tV=["picture","img"],nV=t.forwardRef((function(e,t){const n=(0,Ze.b)({props:e,name:"MuiCardMedia"}),{children:r,className:i,component:a="div",image:o,src:s,style:l}=n,c=(0,Le.A)(n,Z$),u=-1!==eV.indexOf(a),d=!u&&o?(0,De.A)({backgroundImage:`url("${o}")`},l):l,h=(0,De.A)({},n,{component:a,isMediaComponent:u,isImageComponent:-1!==tV.indexOf(a)}),p=(e=>{const{classes:t,isMediaComponent:n,isImageComponent:r}=e,i={root:["root",n&&"media",r&&"img"]};return(0,yT.A)(i,X$,t)})(h);return(0,Ve.jsx)(J$,(0,De.A)({className:(0,Pe.A)(p.root,i),as:a,role:!u&&o?"img":void 0,ref:t,style:d,ownerState:h,src:u?o||s:void 0},c,{children:r}))})),rV=nV;function iV(e){return(0,_T.Ay)("MuiCardContent",e)}(0,Ge.A)("MuiCardContent",["root"]);const aV=["className","component"],oV=(0,bT.Ay)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({padding:16,"&:last-child":{paddingBottom:24}}))),sV=t.forwardRef((function(e,t){const n=(0,Ze.b)({props:e,name:"MuiCardContent"}),{className:r,component:i="div"}=n,a=(0,Le.A)(n,aV),o=(0,De.A)({},n,{component:i}),s=(e=>{const{classes:t}=e;return(0,yT.A)({root:["root"]},iV,t)})(o);return(0,Ve.jsx)(oV,(0,De.A)({as:i,className:(0,Pe.A)(s.root,r),ownerState:o,ref:t},a))})),lV=sV;function cV(e){return(0,_T.Ay)("MuiCardActions",e)}(0,Ge.A)("MuiCardActions",["root","spacing"]);const uV=["disableSpacing","className"],dV=(0,bT.Ay)("div",{name:"MuiCardActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disableSpacing&&t.spacing]}})((e=>{let{ownerState:t}=e;return(0,De.A)({display:"flex",alignItems:"center",padding:8},!t.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})})),hV=t.forwardRef((function(e,t){const n=(0,Ze.b)({props:e,name:"MuiCardActions"}),{disableSpacing:r=!1,className:i}=n,a=(0,Le.A)(n,uV),o=(0,De.A)({},n,{disableSpacing:r}),s=(e=>{const{classes:t,disableSpacing:n}=e,r={root:["root",!n&&"spacing"]};return(0,yT.A)(r,cV,t)})(o);return(0,Ve.jsx)(dV,(0,De.A)({className:(0,Pe.A)(s.root,i),ownerState:o,ref:t},a))})),pV=hV,fV=(0,BT.A)((0,Ve.jsx)("path",{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m-2 12H6v-2h12zm0-3H6V9h12zm0-3H6V6h12z"}),"Message"),mV=(0,BT.A)((0,Ve.jsx)("path",{d:"M14 8c0-2.21-1.79-4-4-4S6 5.79 6 8s1.79 4 4 4 4-1.79 4-4m3 2v2h6v-2zM2 18v2h16v-2c0-2.66-5.33-4-8-4s-8 1.34-8 4"}),"PersonRemove"),gV=(0,BT.A)((0,Ve.jsx)("path",{d:"M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m-9-2V7H4v3H1v2h3v3h2v-3h3v-2zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"PersonAdd"),vV=(0,BT.A)((0,Ve.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),yV=(0,BT.A)((0,Ve.jsx)("path",{d:"m12 21.35-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54z"}),"Favorite"),bV=(0,BT.A)((0,Ve.jsx)("path",{d:"M21.99 4c0-1.1-.89-2-1.99-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h14l4 4zM18 14H6v-2h12zm0-3H6V9h12zm0-3H6V6h12z"}),"Comment"),wV=(0,BT.A)((0,Ve.jsx)("path",{d:"M7 7h10v3l4-4-4-4v3H5v6h2zm10 10H7v-3l-4 4 4 4v-3h12v-6h-2z"}),"Repeat"),EV=(0,BT.A)([(0,Ve.jsx)("circle",{cx:"12",cy:"12",r:"3.2"},"0"),(0,Ve.jsx)("path",{d:"M9 2 7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5"},"1")],"PhotoCamera"),xV=(0,BT.A)((0,Ve.jsx)("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2m-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2m3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1z"}),"Lock"),_V=(0,BT.A)((0,Ve.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit"),AV=(0,BT.A)((0,Ve.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete"),TV=(0,BT.A)((0,Ve.jsx)("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3m-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3m0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5m8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5"}),"Group");function SV(e){const{children:t,value:n,index:r,...i}=e;return(0,Ve.jsx)("div",{role:"tabpanel",hidden:n!==r,id:`profile-tabpanel-${r}`,"aria-labelledby":`profile-tab-${r}`,...i,children:n===r&&(0,Ve.jsx)(Xe,{sx:{p:3},children:t})})}const kV=e=>{let{open:n,onClose:r,followers:i,followersList:a,followingList:o,connections:s,currentUser:l,isLoading:c,handleUnfollow:u,handleFollow:d,initialTab:h}=e;const[p,f]=(0,t.useState)(h);return(0,t.useEffect)((()=>{f(h)}),[h,n]),(0,Ve.jsxs)(bR,{open:n,onClose:r,maxWidth:"sm",fullWidth:!0,children:[(0,Ve.jsx)(N$,{children:(0,Ve.jsxs)(DP,{value:p,onChange:(e,t)=>f(t),variant:"fullWidth",children:[(0,Ve.jsx)(jP,{label:`Followers (${i.length})`}),(0,Ve.jsx)(jP,{label:`Following (${s.length})`})]})}),(0,Ve.jsx)(w$,{children:(0,Ve.jsx)(Dk,{children:0===p?a.length>0?a.map((e=>(0,Ve.jsxs)(rR,{divider:!0,children:[(0,Ve.jsx)(lR,{children:(0,Ve.jsx)(Ce,{to:`/profile/${e.username||e.id}`,style:{textDecoration:"none"},children:(0,Ve.jsx)(aS,{src:e.profilePic||void 0})})}),(0,Ve.jsx)(RI,{primary:(0,Ve.jsx)(Ce,{to:`/profile/${e.username||e.id}`,style:{textDecoration:"none"},children:(0,Ve.jsx)(hS,{variant:"subtitle1",sx:{color:"text.primary","&:hover":{textDecoration:"underline"}},children:e.name||e.username||"User"})}),secondary:e.username?`@${e.username}`:""}),(null===l||void 0===l?void 0:l.uid)!==e.id&&(0,Ve.jsx)(XI,{children:(0,Ve.jsx)(Ak,{variant:s.includes(e.id)?"outlined":"contained",color:s.includes(e.id)?"error":"primary",onClick:t=>{t.stopPropagation(),s.includes(e.id)?u(e.id):d()},disabled:c,size:"small",children:c?"Loading...":s.includes(e.id)?"Unfollow":"Follow"})})]},e.id))):(0,Ve.jsx)(hS,{variant:"body1",color:"text.secondary",sx:{p:2,textAlign:"center"},children:"No followers yet"}):o.length>0?o.map((e=>(0,Ve.jsxs)(rR,{divider:!0,children:[(0,Ve.jsx)(lR,{children:(0,Ve.jsx)(Ce,{to:`/profile/${e.username||e.id}`,style:{textDecoration:"none"},children:(0,Ve.jsx)(aS,{src:e.profilePic||void 0})})}),(0,Ve.jsx)(RI,{primary:(0,Ve.jsx)(Ce,{to:`/profile/${e.username||e.id}`,style:{textDecoration:"none"},children:(0,Ve.jsx)(hS,{variant:"subtitle1",sx:{color:"text.primary","&:hover":{textDecoration:"underline"}},children:e.name||e.username||"User"})}),secondary:e.username?`@${e.username}`:""}),(null===l||void 0===l?void 0:l.uid)!==e.id&&(0,Ve.jsx)(XI,{children:(0,Ve.jsx)(Ak,{variant:"outlined",color:"error",onClick:t=>{t.stopPropagation(),u(e.id)},disabled:c,size:"small",children:c?"Loading...":"Unfollow"})})]},e.id))):(0,Ve.jsx)(hS,{variant:"body1",color:"text.secondary",sx:{p:2,textAlign:"center"},children:"Not following anyone yet"})})}),(0,Ve.jsx)(WF,{children:(0,Ve.jsx)(Ak,{onClick:r,children:"Close"})})]})},CV=()=>{var e;TN(tC().breakpoints.down("sm"));const{currentUser:n,user:r,userProfile:i,loading:a,setUserProfile:o}=XA(),{db:s}=UP(),{userId:l}=J(),[c,u]=(0,t.useState)(null),[d,h]=(0,t.useState)(""),[p,f]=(0,t.useState)(""),[m,g]=(0,t.useState)(""),[v,y]=(0,t.useState)(""),[b,w]=(0,t.useState)(!1),[E,x]=(0,t.useState)(0),[_,A]=(0,t.useState)([]),[T,S]=(0,t.useState)([]),[k,C]=(0,t.useState)([]),[I,R]=(0,t.useState)([]),[D,L]=(0,t.useState)(!0),[P,M]=(0,t.useState)(null),[N,O]=(0,t.useState)([]),[j,F]=(0,t.useState)([]),[U,B]=(0,t.useState)(!1),[$,V]=(0,t.useState)(null),[W,z]=(0,t.useState)(!1),[H,q]=(0,t.useState)([]),[G,K]=(0,t.useState)(""),[Y,Q]=(0,t.useState)(0),[X,ee]=(0,t.useState)([]),[te,ne]=(0,t.useState)(!1),re=(0,t.useRef)(null),[ie,ae]=(0,t.useState)([]),[oe,se]=(0,t.useState)([]),[le,ce]=(0,t.useState)(!1),[ue,de]=(0,t.useState)(""),[he,pe]=(0,t.useState)(""),[fe,me]=(0,t.useState)(""),[ge,ve]=(0,t.useState)(!1),[ye,be]=(0,t.useState)(!1),[we,Ee]=(0,t.useState)(!1),[xe,_e]=(0,t.useState)(null),[Ae,Te]=(0,t.useState)(null),[Se,ke]=(0,t.useState)(!1),[Ie,Re]=(0,t.useState)(0),[De,Le]=(0,t.useState)(!1),[Pe,Me]=(0,t.useState)(!1),[Ne,Oe]=(0,t.useState)(!1),[je,Fe]=(0,t.useState)([]),[Ue,Be]=(0,t.useState)(null),[$e,We]=(0,t.useState)(""),[ze,He]=(0,t.useState)(!1),[qe,Ge]=(0,t.useState)(!1),[Ke,Ye]=(0,t.useState)(!1),[Qe,Ze]=(0,t.useState)(!1),[Je,et]=(0,t.useState)([]),[tt,nt]=(0,t.useState)(null),[rt,it]=(0,t.useState)([]),[at,ot]=(0,t.useState)([]),[st,lt]=(0,t.useState)([]),[ct,ut]=(0,t.useState)([]),[dt,ht]=(0,t.useState)(!1),[pt,ft]=(Z(),(0,t.useState)(!1)),mt=c||(null===n||void 0===n?void 0:n.uid)||"";(0,t.useEffect)((()=>{u(l||((null===n||void 0===n?void 0:n.uid)||null))}),[l,null===n||void 0===n?void 0:n.uid]);const gt=(0,t.useCallback)((async()=>{if(s&&c)try{L(!0),M(null);const e=Jm(s,"users",c),t=await lv(e);if(!t.exists())return M("Profile not found"),void L(!1);const r=t.data(),i=r.isPrivate||!1,a=(null===n||void 0===n?void 0:n.uid)===c;if(Le(i),nt(r),h(r.username||""),f(r.name||""),y(r.bio||""),V(r.profilePic||null),a||!i)Oe(!0),M(null);else if(null!==n&&void 0!==n&&n.uid){const e=Jm(s,`users/${c}/followers/${n.uid}`),t=(await lv(e)).exists();Oe(t),t||M("This profile is private")}else Oe(!1),M("This profile is private");const[o,l]=await Promise.all([uv(Zm(s,`users/${c}/followers`)),uv(Zm(s,`users/${c}/following`))]),u=o.docs.map((e=>e.id)),d=l.docs.map((e=>e.id));if(F(u),it(d),O(d),Ne){const[e,t]=await Promise.all([Promise.all(u.map((e=>lv(Jm(s,"users",e))))),Promise.all(d.map((e=>lv(Jm(s,"users",e)))))]);ae(e.map((e=>({id:e.id,...e.data()})))),se(t.map((e=>({id:e.id,...e.data()}))));const[n,r,i]=await Promise.all([uv(Wg(Zm(s,"posts"),Hg("authorId","==",c),Kg("timestamp","desc"))),uv(Wg(Zm(s,"posts"),Hg("likedBy","array-contains",c),Kg("timestamp","desc"))),uv(Wg(Zm(s,"videos"),Hg("userId","==",c),Kg("timestamp","desc")))]);A(n.docs.map((e=>({id:e.id,...e.data()})))),R(r.docs.map((e=>({id:e.id,...e.data()})))),Fe(i.docs.map((e=>({id:e.id,...e.data()}))))}}catch(P){console.error("Error in fetchUserData:",P),M("Failed to load profile data")}finally{L(!1)}else L(!1)}),[s,c,null===n||void 0===n?void 0:n.uid,Ne]);(0,t.useEffect)((()=>{if(!s||!c)return;const e=mv(Jm(s,"users",c),(async e=>{if(e.exists()){const t=e.data(),r=t.isPrivate||!1,i=(null===n||void 0===n?void 0:n.uid)===c;if(nt(t),Le(r),h(t.username||""),f(t.name||""),y(t.bio||""),V(t.profilePic||null),i||!r)Oe(!0),M(null);else if(null!==n&&void 0!==n&&n.uid){const e=Jm(s,`users/${c}/followers/${n.uid}`),t=(await lv(e)).exists();Oe(t),t||M("This profile is private")}else Oe(!1),M("This profile is private");if(!r&&Ke)try{if(null!==n&&void 0!==n&&n.uid){const e=Jm(s,"users",c,"followRequests",n.uid);await pv(e),Ye(!1)}}catch(P){console.error("Error clearing follow request:",P)}}}),(e=>{console.error("Error in privacy settings listener:",e),M("Failed to sync privacy settings")}));return()=>e()}),[s,c,null===n||void 0===n?void 0:n.uid,Ke]),(0,t.useEffect)((()=>{c&&gt()}),[gt,c]),(0,t.useEffect)((()=>{i&&(de(i.name||""),pe(i.bio||""),me(i.username||""))}),[i]),(0,t.useEffect)((()=>{ve(!(null===n||void 0===n||!n.uid)&&j.includes(n.uid))}),[n,j]),(0,t.useEffect)((()=>{if(null!==n&&void 0!==n&&n.uid&&c&&De){const e=async()=>{if(s)try{const e=Jm(s,"users",c,"followRequests",n.uid),t=await lv(e);Ye(t.exists())}catch(P){console.error("Error checking follow request:",P)}};if(e(),s){const e=mv(Jm(s,"users",c,"followRequests",n.uid),(e=>{Ye(e.exists())}));return()=>e()}}}),[null===n||void 0===n?void 0:n.uid,c,De,s]),(0,t.useEffect)((()=>{if(null!==n&&void 0!==n&&n.uid&&c&&n.uid===c){const e=async()=>{if(s)try{const e=Zm(s,"users",c,"followRequests"),t=(await uv(e)).docs.map((e=>e.id));et(t)}catch(P){console.error("Error fetching pending requests:",P)}};e()}}),[null===n||void 0===n?void 0:n.uid,c,s]),(0,t.useEffect)((()=>{if(!s||!mt||mt!==(null===n||void 0===n?void 0:n.uid))return;const e=mv(Zm(s,"users",mt,"followRequests"),(async e=>{const t=await Promise.all(e.docs.map((async e=>{const t=Jm(s,"users",e.id),n=(await lv(t)).data();return{id:e.id,name:n.name||"",username:n.username||"",profilePic:n.profilePic||"",bio:n.bio||"",isPrivate:n.isPrivate||!1,createdAt:n.createdAt?n.createdAt.toDate():new Date}})));ut(t)}));return()=>e()}),[s,mt,n]);const vt=async()=>{if(s&&n&&c)try{if(De){const e=Jm(s,"users",c,"followRequests",n.uid);await dv(e,{timestamp:Av()});const t=Jm(Zm(s,"users",c,"notifications"));await dv(t,{type:"follow_request",senderId:n.uid,senderName:n.displayName||"Anonymous",senderAvatar:n.photoURL||"",timestamp:Av(),read:!1}),Ye(!0)}else{const e=Jm(s,"users",n.uid,"following",c),t=Jm(s,"users",c,"followers",n.uid);await dv(e,{timestamp:Av()}),await dv(t,{timestamp:Av()}),ve(!0)}}catch(P){console.error("Error handling follow:",P),M("Failed to process follow request")}},yt=async e=>{if(!n||!mt||!s)return void M("Database not initialized");const t=e||mt;try{L(!0);const e=Jm(s,"users",n.uid,"following",t);await pv(e);const r=Jm(s,"users",t,"followers",n.uid);await pv(r),ve(!1),F((e=>e.filter((e=>e!==n.uid)))),it((e=>e.filter((e=>e!==t)))),await gt()}catch(P){console.error("Error unfollowing user:",P),M("Failed to unfollow user")}finally{L(!1)}};(0,t.useEffect)((()=>{if(!s||!mt)return;const e=mv(Zm(s,"users",mt,"followers"),(e=>{const t=e.docs.map((e=>e.id));F(t)}));return()=>e()}),[s,mt]),(0,t.useEffect)((()=>{if(!s||!mt)return;const e=mv(Zm(s,"users",mt,"following"),(e=>{const t=e.docs.map((e=>e.id));O(t)}));return()=>e()}),[s,mt]),(0,t.useEffect)((()=>{if(!s||!n||!mt)return;const e=mv(Jm(s,"users",n.uid,"following",mt),(e=>{ve(e.exists())}));return()=>e()}),[s,n,mt]),(0,t.useEffect)((()=>{if(null!==n&&void 0!==n&&n.uid&&c){const e=async()=>{if(s)try{const e=Jm(s,"users",c,"followers",n.uid),t=await lv(e);Oe(t.exists()||n.uid===c)}catch(P){console.error("Error checking profile visibility:",P)}};e()}}),[null===n||void 0===n?void 0:n.uid,c,s]);const bt=()=>(null===n||void 0===n?void 0:n.uid)!==c&&c?(0,Ve.jsx)(Ak,{variant:ge?"outlined":"contained",color:ge?"error":"primary",startIcon:ge?(0,Ve.jsx)(mV,{}):(0,Ve.jsx)(gV,{}),onClick:ge?()=>yt(c):vt,disabled:D||De&&Ke,children:D?"Loading...":ge?"Unfollow":De&&Ke?"Requested":"Follow"}):null,wt=async()=>{if(n&&mt&&G.trim()&&!le&&s)try{ce(!0);const e={senderId:n.uid,receiverId:mt,content:G.trim(),timestamp:Av(),read:!1,senderName:n.displayName||"Anonymous",senderAvatar:(null===i||void 0===i?void 0:i.profilePic)||null};await fv(Zm(s,"messages"),e),K("")}catch(P){console.error("Error sending message:",P),M("Failed to send message")}finally{ce(!1)}else M("Database not initialized")},Et=async e=>{if(n&&s)try{const t=Jm(s,"messages",e);await hv(t,{read:!0})}catch(P){console.error("Error marking message as read:",P)}else M("Database not initialized")};(0,t.useEffect)((()=>{if(W){const e=(async()=>{if(G_.currentUser&&mt&&s)try{const e=mv(Wg(Zm(s,"messages"),Hg("receiverId","==",G_.currentUser.uid),Kg("timestamp","desc")),(e=>{const t=e.docs.map((e=>({id:e.id,...e.data()})));q(t),Q(t.filter((e=>!e.read)).length)}));return e}catch(P){console.error("Error fetching messages:",P)}else M("Database not initialized")})();return()=>{e&&e.then((e=>null===e||void 0===e?void 0:e()))}}}),[W]);const xt=async e=>{if(n&&s)try{var t;const r=Jm(s,"posts",e),i=await lv(r);if(!i.exists())throw new Error("Post not found");const a=i.data();if(null===(t=a.likedBy)||void 0===t?void 0:t.includes(n.uid))await hv(r,{likedBy:Sv(n.uid)});else if(await hv(r,{likedBy:Tv(n.uid)}),a.authorId!==n.uid){const t={type:"like",senderId:n.uid,senderName:n.displayName||"Anonymous",senderAvatar:n.photoURL||"",recipientId:a.authorId,postId:e,content:`${n.displayName||"Someone"} liked your post`,createdAt:Av(),isRead:!1};await fv(Zm(s,"users",a.authorId,"notifications"),t)}}catch(P){console.error("Error toggling like:",P),wA.error("Failed to update like")}},_t=async e=>{if(n&&s)try{var t;const r=Jm(s,"posts",e),i=await lv(r);if(!i.exists())throw new Error("Post not found");const a=i.data();if(null===(t=a.repostedBy)||void 0===t?void 0:t.includes(n.uid))await hv(r,{repostedBy:Sv(n.uid),reposts:kv(-1)});else if(await hv(r,{repostedBy:Tv(n.uid),reposts:kv(1)}),a.authorId!==n.uid){const t={type:"repost",senderId:n.uid,senderName:n.displayName||"Anonymous",senderAvatar:n.photoURL||"",recipientId:a.authorId,postId:e,content:`${n.displayName||"Someone"} reposted your post`,createdAt:Av(),isRead:!1};await fv(Zm(s,"users",a.authorId,"notifications"),t)}}catch(P){console.error("Error toggling repost:",P),wA.error("Failed to update repost")}},At=()=>{var e;return(0,Ve.jsx)(H$,{anchor:"bottom",open:qe,onClose:()=>Ge(!1),PaperProps:{sx:{height:"80vh",borderTopLeftRadius:16,borderTopRightRadius:16,overflow:"hidden","@media (max-width: 600px)":{height:"90vh"}}},children:(0,Ve.jsxs)(Xe,{sx:{p:2,height:"100%",display:"flex",flexDirection:"column"},children:[(0,Ve.jsxs)(Xe,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,Ve.jsx)(hS,{variant:"h6",children:"Comments"}),(0,Ve.jsx)(ek,{onClick:()=>Ge(!1),children:(0,Ve.jsx)(vV,{})})]}),Ue&&(0,Ve.jsxs)(Ve.Fragment,{children:[(0,Ve.jsx)(Xe,{sx:{mb:2},children:(0,Ve.jsx)("video",{src:Ue.url,style:{width:"100%",maxHeight:"200px",objectFit:"contain",backgroundColor:"black"},controls:!0,playsInline:!0,muted:!0})}),(0,Ve.jsx)(Dk,{sx:{flex:1,overflow:"auto",mb:2},children:null===(e=Ue.commentsList)||void 0===e?void 0:e.map((e=>(0,Ve.jsxs)(rR,{divider:!0,children:[(0,Ve.jsx)(lR,{children:(0,Ve.jsx)(aS,{children:e.username[0]})}),(0,Ve.jsx)(RI,{primary:e.username,secondary:(0,Ve.jsxs)(Ve.Fragment,{children:[(0,Ve.jsx)(hS,{variant:"body2",children:e.content}),(0,Ve.jsx)(hS,{variant:"caption",color:"text.secondary",children:gM(e.timestamp)})]})})]},e.id)))}),(0,Ve.jsx)(Xe,{sx:{mt:"auto"},children:(0,Ve.jsx)(xL,{fullWidth:!0,size:"small",placeholder:"Add a comment...",value:$e,onChange:e=>We(e.target.value),InputProps:{endAdornment:(0,Ve.jsx)(Ak,{size:"small",onClick:()=>Ue&&(async(e,t)=>{if(n&&t.trim()&&s)try{const r=Jm(s,"posts",e),i=await lv(r);if(!i.exists())throw new Error("Post not found");const a=i.data(),o=await fv(Zm(s,`posts/${e}/comments`),{content:t.trim(),userId:n.uid,username:n.displayName||"Anonymous",userPhotoURL:n.photoURL||"",timestamp:Av()});if(await hv(r,{comments:kv(1)}),a.authorId!==n.uid){const r={type:"comment",senderId:n.uid,senderName:n.displayName||"Anonymous",senderAvatar:n.photoURL||"",recipientId:a.authorId,postId:e,commentId:o.id,content:`${n.displayName||"Someone"} commented on your post: "${t.trim()}"`,createdAt:Av(),isRead:!1};await fv(Zm(s,"users",a.authorId,"notifications"),r)}const l=/@(\w+)/g,c=t.match(l);if(c)for(const u of c){const r=u.substring(1),i=Wg(Zm(s,"users"),Hg("username","==",r),Qg(1)),l=await uv(i);if(!l.empty){const r=l.docs[0];if(r.id!==n.uid&&r.id!==a.authorId){const i={type:"mention",senderId:n.uid,senderName:n.displayName||"Anonymous",senderAvatar:n.photoURL||"",recipientId:r.id,postId:e,commentId:o.id,content:`${n.displayName||"Someone"} mentioned you in a comment: "${t.trim()}"`,createdAt:Av(),isRead:!1};await fv(Zm(s,"users",r.id,"notifications"),i)}}}}catch(P){console.error("Error adding comment:",P),wA.error("Failed to add comment")}})(Ue.id,$e),disabled:!$e.trim()||ze,children:"Post"})}})})]})]})})},Tt=()=>{Te(null)};(0,t.useEffect)((()=>{if(s&&c)try{L(!0),M(null);const e=Wg(Zm(s,"users",c,"sideRooms"),Kg("lastActive","desc")),t=Wg(Zm(s,"sideRooms"),Hg("ownerId","==",c)),n=mv(e,(e=>{const t=e.docs.map((e=>{var t,n;return{id:e.id,...e.data(),joinedAt:null===(t=e.data().joinedAt)||void 0===t?void 0:t.toDate(),lastActive:null===(n=e.data().lastActive)||void 0===n?void 0:n.toDate()}}));ot(t)}),(e=>{console.error("Error fetching joined rooms:",e)})),r=mv(t,(e=>{const t=e.docs.map((e=>{var t,n,r;return{id:e.id,roomId:e.id,name:e.data().name,description:e.data().description,memberCount:e.data().memberCount,isPrivate:e.data().isPrivate,category:e.data().category,role:"owner",joinedAt:null===(t=e.data().createdAt)||void 0===t?void 0:t.toDate(),lastActive:null===(n=e.data().lastActive)||void 0===n?void 0:n.toDate(),isOwner:!0,thumbnailUrl:(null===(r=e.data().style)||void 0===r?void 0:r.thumbnailUrl)||null}}));lt(t)}),(e=>{console.error("Error fetching created rooms:",e)}));return()=>{n(),r()}}catch(P){console.error("Error setting up rooms listeners:",P),M("Failed to set up rooms listeners")}finally{L(!1)}else L(!1)}),[s,c]);return a||D?(0,Ve.jsx)(rP,{maxWidth:"lg",children:(0,Ve.jsx)(Xe,{sx:{display:"flex",justifyContent:"center",mt:4},children:(0,Ve.jsx)(jL,{})})}):(0,Ve.jsxs)(rP,{maxWidth:"lg",sx:{mt:2,mb:4},children:[(0,Ve.jsxs)(Xe,{sx:{display:"flex",flexDirection:"column",gap:3},children:[(0,Ve.jsxs)(CT,{elevation:0,sx:{p:3,borderRadius:2,backgroundColor:"background.paper"},children:[(0,Ve.jsxs)(Xe,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},gap:3,alignItems:"center"},children:[(0,Ve.jsx)(Xe,{sx:{position:"relative"},children:(0,Ve.jsx)(dk,{overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},badgeContent:(null===n||void 0===n?void 0:n.uid)===c&&(0,Ve.jsx)(ek,{component:"label",size:"small",onClick:e=>{Te(e.currentTarget)},sx:{bgcolor:"background.paper","&:hover":{bgcolor:"background.default"}},children:(0,Ve.jsx)(EV,{fontSize:"small"})}),children:(0,Ve.jsx)(aS,{src:$||void 0,alt:d,sx:{width:120,height:120}})})}),(0,Ve.jsxs)(Xe,{sx:{flex:1,minWidth:0},children:[(0,Ve.jsxs)(Xe,{sx:{display:"flex",alignItems:"center",gap:2,mb:1},children:[(0,Ve.jsx)(hS,{variant:"h4",sx:{fontWeight:"bold"},children:p||"No name set"}),De&&(0,Ve.jsx)(xV,{color:"action"}),(null===n||void 0===n?void 0:n.uid)===mt&&(0,Ve.jsx)(ek,{onClick:()=>w(!0),size:"small",children:(0,Ve.jsx)(_V,{fontSize:"small"})})]}),(0,Ve.jsxs)(hS,{variant:"body1",color:"text.secondary",sx:{mb:2},children:["@",d||"No username set"]}),De&&!Ne&&(null===n||void 0===n?void 0:n.uid)!==mt?(0,Ve.jsxs)(Xe,{sx:{display:"flex",flexDirection:"column",gap:2},children:[(0,Ve.jsx)(HM,{severity:"info",sx:{mb:2},children:"This account is private. Follow to see their posts and other content."}),(0,Ve.jsx)(Xe,{sx:{display:"flex",gap:2},children:bt()})]}):(0,Ve.jsxs)(Ve.Fragment,{children:[(0,Ve.jsx)(hS,{variant:"body1",sx:{mb:2},children:v||"No bio set"}),(0,Ve.jsxs)(Xe,{sx:{display:"flex",gap:2,flexWrap:"wrap"},children:[bt(),mt?(0,Ve.jsx)(ek,{color:"primary",onClick:()=>{z(!0),H.forEach((e=>{e.read||Et(e.id)}))},sx:{border:"1px solid",borderColor:"primary.main","&:hover":{backgroundColor:"primary.light",opacity:.8},width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,Ve.jsx)(dk,{badgeContent:Y,color:"error",children:(0,Ve.jsx)(fV,{})})}):null,(null===n||void 0===n?void 0:n.uid)===mt&&(0,Ve.jsx)(ek,{color:"error",onClick:()=>be(!0),sx:{border:"1px solid",borderColor:"error.main","&:hover":{backgroundColor:"error.light",opacity:.8}},children:(0,Ve.jsx)(AV,{})})]})]})]})]}),(null===n||void 0===n?void 0:n.uid)===mt&&ct.length>0&&(0,Ve.jsxs)(Ak,{startIcon:(0,Ve.jsx)(gV,{}),onClick:()=>ht(!0),color:"primary",variant:"outlined",sx:{ml:2},children:["Follow Requests (",ct.length,")"]})]}),!De||Ne||(null===n||void 0===n?void 0:n.uid)===mt?(0,Ve.jsxs)(Xe,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},gap:3},children:[(0,Ve.jsx)(CT,{elevation:0,sx:{p:2,borderRadius:2,backgroundColor:"background.paper",flex:{md:1}},children:(0,Ve.jsxs)(Xe,{sx:{display:"flex",justifyContent:"space-around",gap:2},children:[(0,Ve.jsxs)(Xe,{sx:{textAlign:"center"},children:[(0,Ve.jsx)(hS,{variant:"h6",children:_.length||0}),(0,Ve.jsx)(hS,{variant:"body2",color:"text.secondary",children:"Posts"})]}),(0,Ve.jsxs)(Xe,{sx:{textAlign:"center",cursor:"pointer","&:hover":{color:"primary.main"}},onClick:()=>{gt(),Re(0),B(!0)},children:[(0,Ve.jsx)(hS,{variant:"h6",children:j.length||0}),(0,Ve.jsx)(hS,{variant:"body2",color:"text.secondary",children:"Followers"})]}),(0,Ve.jsxs)(Xe,{sx:{textAlign:"center",cursor:"pointer","&:hover":{color:"primary.main"}},onClick:()=>{gt(),Re(1),B(!0)},children:[(0,Ve.jsx)(hS,{variant:"h6",children:rt.length||0}),(0,Ve.jsx)(hS,{variant:"body2",color:"text.secondary",children:"Following"})]})]})}),(0,Ve.jsx)(kV,{open:U,onClose:()=>B(!1),followers:j,followersList:ie,followingList:oe,connections:N,currentUser:n,isLoading:D,handleUnfollow:yt,handleFollow:vt,initialTab:Ie}),(0,Ve.jsx)(Xe,{sx:{flex:{md:2}},children:(0,Ve.jsx)(CT,{elevation:0,sx:{borderRadius:2,backgroundColor:"background.paper"},children:(0,Ve.jsxs)(DP,{value:E,onChange:(e,t)=>{x(t)},variant:"fullWidth",sx:{borderBottom:1,borderColor:"divider","& .MuiTab-root":{textTransform:"none",fontWeight:"medium"}},children:[(0,Ve.jsx)(jP,{label:"Posts"}),(0,Ve.jsx)(jP,{label:"Vibits"}),(0,Ve.jsx)(jP,{label:"Side Rooms"}),(0,Ve.jsx)(jP,{label:"Liked Posts"}),(null===n||void 0===n?void 0:n.uid)===mt&&(0,Ve.jsx)(jP,{label:"Deleted Items"})]})})})]}):(0,Ve.jsx)(CT,{elevation:0,sx:{p:3,borderRadius:2,backgroundColor:"background.paper"},children:(0,Ve.jsxs)(Xe,{sx:{display:"flex",justifyContent:"space-around",gap:2},children:[(0,Ve.jsxs)(Xe,{sx:{textAlign:"center"},children:[(0,Ve.jsx)(hS,{variant:"h6",children:_.length||0}),(0,Ve.jsx)(hS,{variant:"body2",color:"text.secondary",children:"Posts"})]}),(0,Ve.jsxs)(Xe,{sx:{textAlign:"center"},children:[(0,Ve.jsx)(hS,{variant:"h6",children:j.length||0}),(0,Ve.jsx)(hS,{variant:"body2",color:"text.secondary",children:"Followers"})]}),(0,Ve.jsxs)(Xe,{sx:{textAlign:"center"},children:[(0,Ve.jsx)(hS,{variant:"h6",children:rt.length||0}),(0,Ve.jsx)(hS,{variant:"body2",color:"text.secondary",children:"Following"})]})]})}),(0,Ve.jsxs)(Xe,{sx:{flex:1},children:[(0,Ve.jsx)(SV,{value:E,index:0,children:Ne?0===_.length?(0,Ve.jsx)(hS,{children:"No posts yet"}):(0,Ve.jsx)(Dk,{children:_.map((e=>{var t,r;return(0,Ve.jsxs)(rR,{divider:!0,sx:{cursor:"pointer","&:hover":{backgroundColor:"action.hover"}},onClick:()=>{_e(e),Ee(!0)},children:[(0,Ve.jsx)(lR,{children:(0,Ve.jsx)(Ce,{to:`/profile/${e.authorName}`,style:{textDecoration:"none"},children:(0,Ve.jsx)(aS,{src:e.authorAvatar||void 0})})}),(0,Ve.jsx)(RI,{primary:(0,Ve.jsxs)(Xe,{children:[(0,Ve.jsx)(Ce,{to:`/profile/${e.authorName}`,style:{textDecoration:"none"},children:(0,Ve.jsx)(hS,{variant:"subtitle1",component:"span",sx:{color:"text.primary","&:hover":{textDecoration:"underline"}},children:e.authorName})}),(0,Ve.jsx)(hS,{variant:"body2",color:"text.secondary",component:"span",sx:{ml:1},children:gM(e.timestamp)})]}),secondary:(0,Ve.jsxs)(Xe,{children:[(0,Ve.jsx)(hS,{variant:"body1",sx:{mt:1},children:e.content}),e.isEdited&&(0,Ve.jsx)(hS,{variant:"caption",color:"text.secondary",children:"(edited)"})]})}),(0,Ve.jsx)(XI,{children:(0,Ve.jsxs)(Xe,{sx:{display:"flex",gap:1},children:[(0,Ve.jsxs)(ek,{edge:"end","aria-label":"likes",onClick:t=>{t.stopPropagation(),xt(e.id)},children:[(0,Ve.jsx)(yV,{color:null!==(t=e.likedBy)&&void 0!==t&&t.includes((null===n||void 0===n?void 0:n.uid)||"")?"error":"inherit"}),(0,Ve.jsx)(hS,{variant:"body2",sx:{ml:1},children:e.likes||0})]}),(0,Ve.jsxs)(ek,{edge:"end","aria-label":"repost",onClick:t=>{t.stopPropagation(),_t(e.id)},children:[(0,Ve.jsx)(wV,{color:null!==(r=e.repostedBy)&&void 0!==r&&r.includes((null===n||void 0===n?void 0:n.uid)||"")?"primary":"inherit"}),(0,Ve.jsx)(hS,{variant:"body2",sx:{ml:1},children:e.reposts||0})]})]})})]},e.id)}))}):(0,Ve.jsxs)(Xe,{sx:{textAlign:"center",py:4},children:[(0,Ve.jsx)(xV,{sx:{fontSize:40,color:"text.secondary",mb:2}}),(0,Ve.jsx)(hS,{variant:"h6",color:"text.secondary",children:"This account's posts are private"}),(0,Ve.jsx)(hS,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"Follow this account to see their posts"})]})}),(0,Ve.jsx)(SV,{value:E,index:1,children:Ne?0===je.length?(0,Ve.jsx)(hS,{children:"No videos uploaded yet"}):(0,Ve.jsx)(Xe,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"1fr 1fr",md:"1fr 1fr 1fr"},gap:2},children:je.map((e=>(0,Ve.jsxs)(Q$,{sx:{position:"relative"},children:[(0,Ve.jsx)(rV,{component:"video",image:e.thumbnailUrl||e.url,sx:{height:{xs:"auto",sm:200},width:"100%",aspectRatio:"16/9",objectFit:"cover",backgroundColor:"black","@media (max-width: 600px)":{height:"auto",maxHeight:"60vh",objectFit:"contain"}},controls:!0,preload:"metadata",playsInline:!0,muted:!0,loop:!0,poster:e.thumbnailUrl}),(0,Ve.jsx)(lV,{children:(0,Ve.jsxs)(Xe,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,Ve.jsx)(yV,{fontSize:"small",color:"action"}),(0,Ve.jsx)(hS,{variant:"body2",color:"text.secondary",children:e.likes}),(0,Ve.jsxs)(ek,{size:"small",onClick:t=>{t.stopPropagation(),(e=>{Be(e),Ge(!0)})(e)},children:[(0,Ve.jsx)(bV,{fontSize:"small",color:"action"}),(0,Ve.jsx)(hS,{variant:"body2",color:"text.secondary",sx:{ml:.5},children:e.comments})]})]})})]},e.id)))}):(0,Ve.jsxs)(Xe,{sx:{textAlign:"center",py:4},children:[(0,Ve.jsx)(xV,{sx:{fontSize:40,color:"text.secondary",mb:2}}),(0,Ve.jsx)(hS,{variant:"h6",color:"text.secondary",children:"This account's videos are private"}),(0,Ve.jsx)(hS,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"Follow this account to see their videos"})]})}),(0,Ve.jsx)(SV,{value:E,index:2,children:Ne?0===st.length&&0===at.length?(0,Ve.jsxs)(Xe,{sx:{textAlign:"center",py:4},children:[(0,Ve.jsx)(hS,{variant:"body1",color:"text.secondary",children:"Not a member of any side rooms yet"}),(0,Ve.jsx)(Ak,{variant:"contained",color:"primary",component:Ce,to:"/side-rooms",sx:{mt:2},children:"Browse Side Rooms"})]}):(0,Ve.jsxs)(Xe,{sx:{display:"flex",flexDirection:"column",gap:3},children:[st.length>0&&(0,Ve.jsxs)(Xe,{children:[(0,Ve.jsx)(hS,{variant:"h6",sx:{mb:2},children:"Created Rooms"}),(0,Ve.jsx)(Xe,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"1fr 1fr"},gap:2},children:st.map((e=>(0,Ve.jsxs)(Q$,{sx:{display:"flex",flexDirection:"column",height:"100%","&:hover":{boxShadow:6,transform:"translateY(-2px)",transition:"all 0.2s ease-in-out"}},children:[e.thumbnailUrl&&(0,Ve.jsx)(rV,{component:"img",height:"140",image:e.thumbnailUrl,alt:e.name,sx:{objectFit:"cover"}}),(0,Ve.jsxs)(lV,{sx:{flexGrow:1},children:[(0,Ve.jsxs)(Xe,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:1},children:[(0,Ve.jsx)(hS,{variant:"h6",component:"div",children:e.name}),(0,Ve.jsx)(eU,{size:"small",label:"Owner",color:"primary"})]}),(0,Ve.jsx)(hS,{variant:"body2",color:"text.secondary",sx:{mb:2},children:e.description}),(0,Ve.jsxs)(Xe,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[(0,Ve.jsx)(eU,{size:"small",label:`${e.memberCount||0} members`,icon:(0,Ve.jsx)(TV,{})}),e.category&&(0,Ve.jsx)(eU,{size:"small",label:e.category,variant:"outlined"}),e.isPrivate&&(0,Ve.jsx)(eU,{size:"small",icon:(0,Ve.jsx)(xV,{}),label:"Private",variant:"outlined"})]})]}),(0,Ve.jsx)(pV,{children:(0,Ve.jsx)(Ak,{size:"small",component:Ce,to:`/side-room/${e.id}`,variant:"contained",fullWidth:!0,children:"Enter Room"})})]},e.id)))})]}),at.length>0&&(0,Ve.jsxs)(Xe,{children:[(0,Ve.jsx)(hS,{variant:"h6",sx:{mb:2},children:"Joined Rooms"}),(0,Ve.jsx)(Xe,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"1fr 1fr"},gap:2},children:at.map((e=>(0,Ve.jsxs)(Q$,{sx:{display:"flex",flexDirection:"column",height:"100%","&:hover":{boxShadow:6,transform:"translateY(-2px)",transition:"all 0.2s ease-in-out"}},children:[e.thumbnailUrl&&(0,Ve.jsx)(rV,{component:"img",height:"140",image:e.thumbnailUrl,alt:e.name,sx:{objectFit:"cover"}}),(0,Ve.jsxs)(lV,{sx:{flexGrow:1},children:[(0,Ve.jsxs)(Xe,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:1},children:[(0,Ve.jsx)(hS,{variant:"h6",component:"div",children:e.name}),(0,Ve.jsx)(eU,{size:"small",label:"Member"})]}),(0,Ve.jsx)(hS,{variant:"body2",color:"text.secondary",sx:{mb:2},children:e.description}),(0,Ve.jsxs)(Xe,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[(0,Ve.jsx)(eU,{size:"small",label:`${e.memberCount||0} members`,icon:(0,Ve.jsx)(TV,{})}),e.category&&(0,Ve.jsx)(eU,{size:"small",label:e.category,variant:"outlined"}),e.isPrivate&&(0,Ve.jsx)(eU,{size:"small",icon:(0,Ve.jsx)(xV,{}),label:"Private",variant:"outlined"})]})]}),(0,Ve.jsx)(pV,{children:(0,Ve.jsx)(Ak,{size:"small",component:Ce,to:`/side-room/${e.id}`,variant:"contained",fullWidth:!0,children:"Enter Room"})})]},e.id)))})]})]}):(0,Ve.jsxs)(Xe,{sx:{textAlign:"center",py:4},children:[(0,Ve.jsx)(xV,{sx:{fontSize:40,color:"text.secondary",mb:2}}),(0,Ve.jsx)(hS,{variant:"h6",color:"text.secondary",children:"This account's side rooms are private"}),(0,Ve.jsx)(hS,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"Follow this account to see their side rooms"})]})}),(0,Ve.jsx)(SV,{value:E,index:3,children:Ne?0===I.length?(0,Ve.jsx)(hS,{children:"No liked posts yet"}):(0,Ve.jsx)(Dk,{children:I.map((e=>{var t,r;return(0,Ve.jsxs)(rR,{divider:!0,sx:{cursor:"pointer","&:hover":{backgroundColor:"action.hover"}},onClick:()=>{_e(e),Ee(!0)},children:[(0,Ve.jsx)(lR,{children:(0,Ve.jsx)(Ce,{to:`/profile/${e.authorName}`,style:{textDecoration:"none"},children:(0,Ve.jsx)(aS,{src:e.authorAvatar||void 0})})}),(0,Ve.jsx)(RI,{primary:(0,Ve.jsxs)(Xe,{children:[(0,Ve.jsx)(Ce,{to:`/profile/${e.authorName}`,style:{textDecoration:"none"},children:(0,Ve.jsx)(hS,{variant:"subtitle1",component:"span",sx:{color:"text.primary","&:hover":{textDecoration:"underline"}},children:e.authorName})}),(0,Ve.jsx)(hS,{variant:"body2",color:"text.secondary",component:"span",sx:{ml:1},children:gM(e.timestamp)})]}),secondary:(0,Ve.jsxs)(Xe,{children:[(0,Ve.jsx)(hS,{variant:"body1",sx:{mt:1},children:e.content}),e.isEdited&&(0,Ve.jsx)(hS,{variant:"caption",color:"text.secondary",children:"(edited)"})]})}),(0,Ve.jsx)(XI,{children:(0,Ve.jsxs)(Xe,{sx:{display:"flex",gap:1},children:[(0,Ve.jsxs)(ek,{edge:"end","aria-label":"likes",onClick:t=>{t.stopPropagation(),xt(e.id)},children:[(0,Ve.jsx)(yV,{color:null!==(t=e.likedBy)&&void 0!==t&&t.includes((null===n||void 0===n?void 0:n.uid)||"")?"error":"inherit"}),(0,Ve.jsx)(hS,{variant:"body2",sx:{ml:1},children:e.likes||0})]}),(0,Ve.jsxs)(ek,{edge:"end","aria-label":"repost",onClick:t=>{t.stopPropagation(),_t(e.id)},children:[(0,Ve.jsx)(wV,{color:null!==(r=e.repostedBy)&&void 0!==r&&r.includes((null===n||void 0===n?void 0:n.uid)||"")?"primary":"inherit"}),(0,Ve.jsx)(hS,{variant:"body2",sx:{ml:1},children:e.reposts||0})]})]})})]},e.id)}))}):(0,Ve.jsxs)(Xe,{sx:{textAlign:"center",py:4},children:[(0,Ve.jsx)(xV,{sx:{fontSize:40,color:"text.secondary",mb:2}}),(0,Ve.jsx)(hS,{variant:"h6",color:"text.secondary",children:"This account's liked posts are private"}),(0,Ve.jsx)(hS,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"Follow this account to see their liked posts"})]})}),(null===n||void 0===n?void 0:n.uid)===mt&&(0,Ve.jsx)(SV,{value:E,index:4,children:0===X.length?(0,Ve.jsx)(hS,{children:"No deleted items"}):(0,Ve.jsx)(Dk,{children:X.map((e=>(0,Ve.jsxs)(rR,{divider:!0,children:[(0,Ve.jsx)(RI,{primary:(0,Ve.jsxs)(Xe,{children:[(0,Ve.jsx)(hS,{variant:"subtitle1",children:"post"===e.type?"Post":"room"===e.type?"Side Room":"Forum"}),(0,Ve.jsx)(hS,{variant:"body1",children:"post"===e.type?e.content.content:e.content.name})]}),secondary:`Deleted ${gM(e.deletedAt)} ago`}),(0,Ve.jsxs)(XI,{children:[(0,Ve.jsx)(Ak,{variant:"outlined",onClick:()=>(async(e,t)=>{if(s)try{const n=Jm(s,"deleted_items",e),r=await lv(n);if(!r.exists())return void M("Item not found in trash");const i=r.data(),a="post"===t?"posts":"room"===t?"sideRooms":"forums";await dv(Jm(s,a,e),{...i.content,deletedAt:null,scheduledForPermanentDeletion:null}),await pv(n),ee((t=>t.filter((t=>t.id!==e)))),M("Item restored successfully")}catch(P){console.error("Error restoring item:",P),M("Failed to restore item")}else M("Database not initialized")})(e.id,e.type),children:"Restore"}),(0,Ve.jsx)(Ak,{variant:"outlined",color:"error",onClick:()=>(async e=>{if(s)try{await pv(Jm(s,"deleted_items",e)),ee((t=>t.filter((t=>t.id!==e)))),M("Item permanently deleted")}catch(P){console.error("Error permanently deleting item:",P),M("Failed to delete item permanently")}else M("Database not initialized")})(e.id),sx:{ml:1},children:"Delete Permanently"})]})]},e.id)))})})]})]}),(0,Ve.jsxs)(bR,{open:b,onClose:()=>w(!1),maxWidth:"sm",fullWidth:!0,children:[(0,Ve.jsx)(N$,{children:"Edit Profile"}),(0,Ve.jsx)(w$,{children:(0,Ve.jsxs)(Xe,{sx:{display:"flex",flexDirection:"column",gap:3,mt:2},children:[(0,Ve.jsx)(xL,{label:"Name",value:ue,onChange:e=>de(e.target.value),fullWidth:!0,variant:"outlined"}),(0,Ve.jsx)(xL,{label:"Username",value:fe,onChange:e=>me(e.target.value),fullWidth:!0,variant:"outlined",helperText:"This will be your unique identifier on the platform"}),(0,Ve.jsx)(xL,{label:"Bio",value:he,onChange:e=>pe(e.target.value),multiline:!0,rows:4,fullWidth:!0,variant:"outlined",helperText:"Tell others about yourself (You can use emojis!)",InputProps:{endAdornment:(0,Ve.jsx)(ek,{onClick:()=>{const e=window.prompt("Enter an emoji:");e&&pe((t=>t+e))},sx:{color:"primary.main","&:hover":{color:"primary.dark"}},children:(0,Ve.jsx)("span",{role:"img","aria-label":"emoji",children:"\ud83d\ude0a"})})}})]})}),(0,Ve.jsxs)(WF,{sx:{p:3},children:[(0,Ve.jsx)(Ak,{variant:"outlined",onClick:()=>w(!1),sx:{minWidth:"120px",borderColor:"text.secondary",color:"text.secondary","&:hover":{borderColor:"text.primary",color:"text.primary"}},children:"Cancel"}),(0,Ve.jsx)(Ak,{variant:"contained",onClick:async()=>{if(n&&s)try{const e=ue.trim(),t=he.trim(),r=fe.trim();await hv(Jm(s,"users",n.uid),{name:e,bio:t,username:r}),f(e),y(t),h(r),w(!1),i&&o({...i,name:e,bio:t,username:r})}catch(P){console.error("Error saving profile:",P),M("Failed to save profile")}},disabled:D,sx:{minWidth:"120px",bgcolor:"primary.main","&:hover":{bgcolor:"primary.dark"}},children:D?"Saving...":"Save Changes"})]})]}),(0,Ve.jsxs)(bR,{open:W,onClose:()=>z(!1),maxWidth:"sm",fullWidth:!0,children:[(0,Ve.jsx)(N$,{children:(null===n||void 0===n?void 0:n.uid)===mt?"Your Messages":`Message ${d}`}),(0,Ve.jsx)(w$,{children:(null===n||void 0===n?void 0:n.uid)===mt?(0,Ve.jsx)(Dk,{children:H.map((e=>(0,Ve.jsxs)(rR,{divider:!0,children:[(0,Ve.jsx)(lR,{children:(0,Ve.jsx)(aS,{src:e.senderAvatar||void 0})}),(0,Ve.jsx)(RI,{primary:e.senderName,secondary:e.content}),(0,Ve.jsx)(XI,{children:(0,Ve.jsx)(hS,{variant:"caption",color:"text.secondary",children:gM(e.timestamp)})})]},e.id)))}):(0,Ve.jsxs)(Xe,{sx:{mt:2},children:[(0,Ve.jsx)(xL,{fullWidth:!0,multiline:!0,rows:4,label:"Your message",value:G,onChange:e=>K(e.target.value),variant:"outlined",sx:{mb:2}}),(0,Ve.jsx)(Xe,{sx:{display:"flex",justifyContent:"flex-end"},children:(0,Ve.jsx)(Ak,{variant:"contained",onClick:wt,disabled:!G.trim()||le,sx:{minWidth:"100px","@media (max-width: 600px)":{width:"100%"}},children:le?"Sending...":"Send"})})]})}),(0,Ve.jsx)(WF,{children:(0,Ve.jsx)(Ak,{onClick:()=>z(!1),children:"Close"})})]}),(0,Ve.jsxs)(bR,{open:we,onClose:()=>Ee(!1),maxWidth:"md",fullWidth:!0,children:[(0,Ve.jsx)(N$,{children:(0,Ve.jsxs)(Xe,{sx:{display:"flex",alignItems:"center",gap:2},children:[(0,Ve.jsx)(aS,{src:(null===xe||void 0===xe?void 0:xe.authorAvatar)||void 0}),(0,Ve.jsxs)(Xe,{children:[(0,Ve.jsx)(hS,{variant:"subtitle1",children:null===xe||void 0===xe?void 0:xe.authorName}),(0,Ve.jsx)(hS,{variant:"body2",color:"text.secondary",children:gM(null===xe||void 0===xe?void 0:xe.timestamp)})]})]})}),(0,Ve.jsxs)(w$,{children:[(0,Ve.jsx)(hS,{variant:"body1",sx:{mt:2},children:null===xe||void 0===xe?void 0:xe.content}),(null===xe||void 0===xe?void 0:xe.isEdited)&&(0,Ve.jsx)(hS,{variant:"caption",color:"text.secondary",children:"(edited)"})]}),(0,Ve.jsxs)(WF,{children:[(0,Ve.jsxs)(ek,{children:[(0,Ve.jsx)(yV,{color:null!==xe&&void 0!==xe&&null!==(e=xe.likedBy)&&void 0!==e&&e.includes((null===n||void 0===n?void 0:n.uid)||"")?"error":"inherit"}),(0,Ve.jsx)(hS,{variant:"body2",sx:{ml:1},children:(null===xe||void 0===xe?void 0:xe.likes)||0})]}),(0,Ve.jsx)(Ak,{onClick:()=>Ee(!1),children:"Close"})]})]}),(0,Ve.jsxs)(uI,{anchorEl:Ae,open:Boolean(Ae),onClose:Tt,children:[(0,Ve.jsx)(xI,{onClick:()=>{var e;Tt(),null===(e=re.current)||void 0===e||e.click()},children:"Change Profile Picture"}),(0,Ve.jsx)(xI,{onClick:()=>{Tt(),ke(!0)},children:"Add to Story"})]}),(0,Ve.jsx)(At,{}),(null===n||void 0===n?void 0:n.uid)!==c||0===Je.length?null:(0,Ve.jsxs)(Ak,{variant:"outlined",color:"primary",onClick:()=>Ze(!0),sx:{ml:2},children:["View Requests (",Je.length,")"]}),(0,Ve.jsxs)(bR,{open:dt,onClose:()=>ht(!1),maxWidth:"sm",fullWidth:!0,children:[(0,Ve.jsx)(N$,{children:"Follow Requests"}),(0,Ve.jsx)(w$,{children:(0,Ve.jsx)(Dk,{children:0===ct.length?(0,Ve.jsx)(rR,{children:(0,Ve.jsx)(RI,{primary:"No pending follow requests"})}):ct.map((e=>(0,Ve.jsxs)(rR,{children:[(0,Ve.jsx)(lR,{children:(0,Ve.jsx)(aS,{src:e.profilePic,alt:e.name,children:e.name[0]})}),(0,Ve.jsx)(RI,{primary:e.name,secondary:`@${e.username}`}),(0,Ve.jsxs)(Xe,{sx:{display:"flex",gap:1},children:[(0,Ve.jsx)(Ak,{variant:"contained",color:"primary",onClick:()=>(async e=>{if(n&&s)try{ft(!0);const t=Jm(s,`users/${n.uid}/followers/${e}`),r=Jm(s,`users/${e}/following/${n.uid}`),i=Jm(s,`users/${n.uid}/followRequests/${e}`);await Promise.all([dv(t,{timestamp:Av()}),dv(r,{timestamp:Av()}),pv(i)]);const a=Jm(Zm(s,"users",e,"notifications"));await dv(a,{type:"follow_accepted",userId:n.uid,username:n.displayName||"Anonymous",timestamp:Av(),read:!1}),wA.success("Follow request accepted")}catch(P){console.error("Error accepting follow request:",P),wA.error("Failed to accept follow request")}finally{ft(!1)}})(e.id),disabled:pt,children:"Accept"}),(0,Ve.jsx)(Ak,{variant:"outlined",color:"error",onClick:()=>(async e=>{if(n&&s)try{ft(!0);const t=Jm(s,`users/${n.uid}/followRequests/${e}`);await pv(t);const r=Jm(Zm(s,"users",e,"notifications"));await dv(r,{type:"follow_rejected",userId:n.uid,username:n.displayName||"Anonymous",timestamp:Av(),read:!1}),wA.success("Follow request rejected")}catch(P){console.error("Error rejecting follow request:",P),wA.error("Failed to reject follow request")}finally{ft(!1)}})(e.id),disabled:pt,children:"Reject"})]})]},e.id)))})})]})]})};function IV(e){return(0,_T.Ay)("PrivateSwitchBase",e)}(0,Ge.A)("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const RV=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],DV=(0,bT.Ay)(KS)((e=>{let{ownerState:t}=e;return(0,De.A)({padding:9,borderRadius:"50%"},"start"===t.edge&&{marginLeft:"small"===t.size?-3:-12},"end"===t.edge&&{marginRight:"small"===t.size?-3:-12})})),LV=(0,bT.Ay)("input",{shouldForwardProp:pk.A})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),PV=t.forwardRef((function(e,t){const{autoFocus:n,checked:r,checkedIcon:i,className:a,defaultChecked:o,disabled:s,disableFocusRipple:l=!1,edge:c=!1,icon:u,id:d,inputProps:h,inputRef:p,name:f,onBlur:m,onChange:g,onFocus:v,readOnly:y,required:b=!1,tabIndex:w,type:E,value:x}=e,_=(0,Le.A)(e,RV),[A,T]=(0,QD.A)({controlled:r,default:Boolean(o),name:"SwitchBase",state:"checked"}),S=DR();let k=s;S&&"undefined"===typeof k&&(k=S.disabled);const C="checkbox"===E||"radio"===E,I=(0,De.A)({},e,{checked:A,disabled:k,disableFocusRipple:l,edge:c}),R=(e=>{const{classes:t,checked:n,disabled:r,edge:i}=e,a={root:["root",n&&"checked",r&&"disabled",i&&`edge${(0,wT.A)(i)}`],input:["input"]};return(0,yT.A)(a,IV,t)})(I);return(0,Ve.jsxs)(DV,(0,De.A)({component:"span",className:(0,Pe.A)(R.root,a),centerRipple:!0,focusRipple:!l,disabled:k,tabIndex:null,role:void 0,onFocus:e=>{v&&v(e),S&&S.onFocus&&S.onFocus(e)},onBlur:e=>{m&&m(e),S&&S.onBlur&&S.onBlur(e)},ownerState:I,ref:t},_,{children:[(0,Ve.jsx)(LV,(0,De.A)({autoFocus:n,checked:r,defaultChecked:o,className:R.input,disabled:k,id:C?d:void 0,name:f,onChange:e=>{if(e.nativeEvent.defaultPrevented)return;const t=e.target.checked;T(t),g&&g(e,t)},readOnly:y,ref:p,required:b,ownerState:I,tabIndex:w,type:E},"checkbox"===E&&void 0===x?{}:{value:x},h)),A?i:u]}))})),MV=PV;function NV(e){return(0,_T.Ay)("MuiSwitch",e)}const OV=(0,Ge.A)("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),jV=["className","color","edge","size","sx"],FV=(0,bT.Ay)("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.edge&&t[`edge${(0,wT.A)(n.edge)}`],t[`size${(0,wT.A)(n.size)}`]]}})({display:"inline-flex",width:58,height:38,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"},variants:[{props:{edge:"start"},style:{marginLeft:-8}},{props:{edge:"end"},style:{marginRight:-8}},{props:{size:"small"},style:{width:40,height:24,padding:7,[`& .${OV.thumb}`]:{width:16,height:16},[`& .${OV.switchBase}`]:{padding:4,[`&.${OV.checked}`]:{transform:"translateX(16px)"}}}}]}),UV=(0,bT.Ay)(MV,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.switchBase,{[`& .${OV.input}`]:t.input},"default"!==n.color&&t[`color${(0,wT.A)(n.color)}`]]}})((e=>{let{theme:t}=e;return{position:"absolute",top:0,left:0,zIndex:1,color:t.vars?t.vars.palette.Switch.defaultColor:`${"light"===t.palette.mode?t.palette.common.white:t.palette.grey[300]}`,transition:t.transitions.create(["left","transform"],{duration:t.transitions.duration.shortest}),[`&.${OV.checked}`]:{transform:"translateX(20px)"},[`&.${OV.disabled}`]:{color:t.vars?t.vars.palette.Switch.defaultDisabledColor:`${"light"===t.palette.mode?t.palette.grey[100]:t.palette.grey[600]}`},[`&.${OV.checked} + .${OV.track}`]:{opacity:.5},[`&.${OV.disabled} + .${OV.track}`]:{opacity:t.vars?t.vars.opacity.switchTrackDisabled:""+("light"===t.palette.mode?.12:.2)},[`& .${OV.input}`]:{left:"-100%",width:"300%"}}}),(e=>{let{theme:t}=e;return{"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:(0,ET.X4)(t.palette.action.active,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},variants:[...Object.entries(t.palette).filter((e=>{let[,t]=e;return t.main&&t.light})).map((e=>{let[n]=e;return{props:{color:n},style:{[`&.${OV.checked}`]:{color:(t.vars||t).palette[n].main,"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette[n].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:(0,ET.X4)(t.palette[n].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${OV.disabled}`]:{color:t.vars?t.vars.palette.Switch[`${n}DisabledColor`]:`${"light"===t.palette.mode?(0,ET.a)(t.palette[n].main,.62):(0,ET.e$)(t.palette[n].main,.55)}`}},[`&.${OV.checked} + .${OV.track}`]:{backgroundColor:(t.vars||t).palette[n].main}}}}))]}})),BV=(0,bT.Ay)("span",{name:"MuiSwitch",slot:"Track",overridesResolver:(e,t)=>t.track})((e=>{let{theme:t}=e;return{height:"100%",width:"100%",borderRadius:7,zIndex:-1,transition:t.transitions.create(["opacity","background-color"],{duration:t.transitions.duration.shortest}),backgroundColor:t.vars?t.vars.palette.common.onBackground:`${"light"===t.palette.mode?t.palette.common.black:t.palette.common.white}`,opacity:t.vars?t.vars.opacity.switchTrack:""+("light"===t.palette.mode?.38:.3)}})),$V=(0,bT.Ay)("span",{name:"MuiSwitch",slot:"Thumb",overridesResolver:(e,t)=>t.thumb})((e=>{let{theme:t}=e;return{boxShadow:(t.vars||t).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"}})),VV=t.forwardRef((function(e,t){const n=(0,Ze.b)({props:e,name:"MuiSwitch"}),{className:r,color:i="primary",edge:a=!1,size:o="medium",sx:s}=n,l=(0,Le.A)(n,jV),c=(0,De.A)({},n,{color:i,edge:a,size:o}),u=(e=>{const{classes:t,edge:n,size:r,color:i,checked:a,disabled:o}=e,s={root:["root",n&&`edge${(0,wT.A)(n)}`,`size${(0,wT.A)(r)}`],switchBase:["switchBase",`color${(0,wT.A)(i)}`,a&&"checked",o&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},l=(0,yT.A)(s,NV,t);return(0,De.A)({},t,l)})(c),d=(0,Ve.jsx)($V,{className:u.thumb,ownerState:c});return(0,Ve.jsxs)(FV,{className:(0,Pe.A)(u.root,r),sx:s,ownerState:c,children:[(0,Ve.jsx)(UV,(0,De.A)({type:"checkbox",icon:d,checkedIcon:d,ref:t,ownerState:c},l,{classes:(0,De.A)({},u,{root:u.switchBase})})),(0,Ve.jsx)(BV,{className:u.track,ownerState:c})]})})),WV=VV,zV=(0,BT.A)((0,Ve.jsx)("path",{d:"M4 6h18V4H4c-1.1 0-2 .9-2 2v11H0v3h14v-3H4zm19 2h-6c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h6c.55 0 1-.45 1-1V9c0-.55-.45-1-1-1m-1 9h-4v-7h4z"}),"Devices"),HV=(0,BT.A)((0,Ve.jsx)("path",{d:"M12 1 3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11z"}),"Security"),qV=(0,BT.A)([(0,Ve.jsx)("circle",{cx:"10",cy:"8",r:"4"},"0"),(0,Ve.jsx)("path",{d:"M10.67 13.02c-.22-.01-.44-.02-.67-.02-2.42 0-4.68.67-6.61 1.82-.88.52-1.39 1.5-1.39 2.53V20h9.26c-.79-1.13-1.26-2.51-1.26-4 0-1.07.25-2.07.67-2.98M20.75 16c0-.22-.03-.42-.06-.63l1.14-1.01-1-1.73-1.45.49c-.32-.27-.68-.48-1.08-.63L18 11h-2l-.3 1.49c-.4.15-.76.36-1.08.63l-1.45-.49-1 1.73 1.14 1.01c-.03.21-.06.41-.06.63s.03.42.06.63l-1.14 1.01 1 1.73 1.45-.49c.32.27.68.48 1.08.63L16 21h2l.3-1.49c.4-.15.76-.36 1.08-.63l1.45.49 1-1.73-1.14-1.01c.03-.21.06-.41.06-.63M17 18c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2"},"1")],"ManageAccounts"),GV=(0,BT.A)((0,Ve.jsx)("path",{d:"M12 1 3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5z"}),"Shield"),KV=(0,BT.A)((0,Ve.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-6h2zm0-8h-2V7h2z"}),"Info"),YV=(0,BT.A)([(0,Ve.jsx)("path",{d:"m21 5-9-4-9 4v6c0 5.55 3.84 10.74 9 12 2.3-.56 4.33-1.9 5.88-3.71l-3.12-3.12c-1.94 1.29-4.58 1.07-6.29-.64-1.95-1.95-1.95-5.12 0-7.07 1.95-1.95 5.12-1.95 7.07 0 1.71 1.71 1.92 4.35.64 6.29l2.9 2.9C20.29 15.69 21 13.38 21 11z"},"0"),(0,Ve.jsx)("circle",{cx:"12",cy:"12",r:"3"},"1")],"Policy"),QV=(0,BT.A)((0,Ve.jsx)("path",{d:"M21.95 10.99c-1.79-.03-3.7-1.95-2.68-4.22-2.98 1-5.77-1.59-5.19-4.56C6.95.71 2 6.58 2 12c0 5.52 4.48 10 10 10 5.89 0 10.54-5.08 9.95-11.01M8.5 15c-.83 0-1.5-.67-1.5-1.5S7.67 12 8.5 12s1.5.67 1.5 1.5S9.33 15 8.5 15m2-5C9.67 10 9 9.33 9 8.5S9.67 7 10.5 7s1.5.67 1.5 1.5-.67 1.5-1.5 1.5m4.5 6c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1"}),"Cookie"),XV=(0,BT.A)((0,Ve.jsx)("path",{d:"M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9 9-4.03 9-9c0-.46-.04-.92-.1-1.36-.98 1.37-2.58 2.26-4.4 2.26-2.98 0-5.4-2.42-5.4-5.4 0-1.81.89-3.42 2.26-4.4-.44-.06-.9-.1-1.36-.1"}),"DarkMode"),ZV=(0,BT.A)((0,Ve.jsx)("path",{d:"M12 17c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m6-9h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6h1.9c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2m0 12H6V10h12z"}),"LockOpen"),JV=(0,BT.A)((0,Ve.jsx)("path",{d:"M9.4 16.6 4.8 12l4.6-4.6L8 6l-6 6 6 6zm5.2 0 4.6-4.6-4.6-4.6L16 6l6 6-6 6z"}),"Code"),eW=(0,BT.A)((0,Ve.jsx)("path",{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}),"Check"),tW=()=>{const[e,n]=(0,t.useState)([]),[r,i]=(0,t.useState)(""),[a,o]=(0,t.useState)("");(0,t.useEffect)((()=>{(async()=>{const e=await navigator.mediaDevices.enumerateDevices();n(e)})()}),[]);return(0,Ve.jsxs)("div",{children:[(0,Ve.jsx)("h3",{children:"Select Audio and Video Devices"}),(0,Ve.jsxs)("div",{children:[(0,Ve.jsx)("label",{children:"Audio Input:"}),(0,Ve.jsx)("select",{onChange:e=>{i(e.target.value)},value:r,children:e.filter((e=>"audioinput"===e.kind)).map((e=>(0,Ve.jsx)("option",{value:e.deviceId,children:e.label||`Microphone ${e.deviceId}`},e.deviceId)))})]}),(0,Ve.jsxs)("div",{children:[(0,Ve.jsx)("label",{children:"Video Input:"}),(0,Ve.jsx)("select",{onChange:e=>{o(e.target.value)},value:a,children:e.filter((e=>"videoinput"===e.kind)).map((e=>(0,Ve.jsx)("option",{value:e.deviceId,children:e.label||`Camera ${e.deviceId}`},e.deviceId)))})]}),(0,Ve.jsx)("button",{onClick:async()=>{const e={audio:{deviceId:r?{exact:r}:void 0},video:{deviceId:a?{exact:a}:void 0}};try{await navigator.mediaDevices.getUserMedia(e)}catch(Rb){console.error("Error accessing media devices.",Rb)}},children:"Start Stream"})]})},nW=()=>{TN(tC().breakpoints.down("sm"));const{isDarkMode:e,toggleDarkMode:n}=(()=>{const e=(0,t.useContext)(gT);if(void 0===e)throw new Error("useThemeContext must be used within a ThemeContextProvider");return e})(),{currentUser:r,userProfile:i}=XA(),{canViewProfile:a,canViewContent:o}=JA(),[s,l]=(0,t.useState)([]),[c,u]=(0,t.useState)(!1),[d,h]=(0,t.useState)(null),[p,f]=(0,t.useState)(null),[m,g]=(0,t.useState)(!1),[v,y]=(0,t.useState)([]),[b,w]=(0,t.useState)({followers:0,following:0,pendingRequests:0}),[E,x]=(0,t.useState)(!1),[_,A]=(0,t.useState)(!1),[T,S]=(0,t.useState)(""),[k,C]=(0,t.useState)(""),[I,R]=(0,t.useState)(""),[D,L]=(0,t.useState)(!1),[P,M]=(0,t.useState)(""),N=[{title:"Device Management",icon:(0,Ve.jsx)(zV,{}),path:"#",description:"Manage your connected devices and appearance settings",onClick:()=>u(!0)},{title:"Security & Authentication",icon:(0,Ve.jsx)(HV,{}),path:"/security",description:"Learn about our authentication flow and security features"},{title:"Account Management",icon:(0,Ve.jsx)(qV,{}),path:"/account-management",description:"Deactivate or delete your account"},{title:"Safety & Community Guidelines",icon:(0,Ve.jsx)(GV,{}),path:"/safety",description:"Review our safety policies and community guidelines"},{title:"About",icon:(0,Ve.jsx)(KV,{}),path:"/about",description:"Learn more about SideEye and our mission"},{title:"Privacy Policy",icon:(0,Ve.jsx)(YV,{}),path:"/privacy-policy",description:"Read our privacy policy and data handling practices"},{title:"Terms of Service",icon:(0,Ve.jsx)(YV,{}),path:"/terms",description:"Review our terms of service and community guidelines"},{title:"Cookie Policy",icon:(0,Ve.jsx)(QV,{}),path:"/cookies",description:"Learn about how we use cookies and similar technologies"}];(0,t.useEffect)((()=>{if(r){const e=mv(Jm(q_,"users",r.uid),(e=>{if(e.exists()){var t,n;const r=e.data();g(r.isPrivate||!1),w({followers:(null===(t=r.followers)||void 0===t?void 0:t.length)||0,following:(null===(n=r.following)||void 0===n?void 0:n.length)||0,pendingRequests:v.length})}})),t=async()=>{const e=Wg(Zm(q_,`users/${r.uid}/followRequests`),Kg("timestamp","desc")),t=(await uv(e)).docs.map((e=>{const t=e.data();return{id:e.id,userId:t.userId,username:t.username,timestamp:t.timestamp}}));y(t)};return t(),()=>e()}}),[r,v.length]);const O=async(e,t,n)=>{if(r)try{await pv(Jm(q_,`users/${r.uid}/followRequests`,e)),n?(await dv(Jm(q_,`users/${r.uid}/followers`,t),{timestamp:Av()}),await dv(Jm(q_,`users/${t}/following`,r.uid),{timestamp:Av()}),wA.success("Follow request accepted")):wA.success("Follow request declined"),y((t=>t.filter((t=>t.id!==e))))}catch(p){console.error("Error handling follow request:",p),wA.error("Failed to process follow request")}};return(0,Ve.jsx)(rP,{maxWidth:"md",sx:{py:4},children:(0,Ve.jsxs)(Xe,{sx:{py:4},children:[(0,Ve.jsx)(hS,{variant:"h4",sx:{mb:3,fontWeight:"bold"},children:"Settings"}),p&&(0,Ve.jsx)(HM,{severity:"error",sx:{mb:2},children:p}),(0,Ve.jsx)(CT,{elevation:0,sx:{borderRadius:2},children:(0,Ve.jsx)(Dk,{children:N.map(((e,n)=>(0,Ve.jsxs)(t.Fragment,{children:[(0,Ve.jsxs)(rR,{component:e.path?Ce:"div",to:e.path,onClick:e.onClick,sx:{"&:hover":{backgroundColor:"action.hover"},textDecoration:"none",color:"inherit",cursor:"pointer"},children:[(0,Ve.jsx)(SI,{children:e.icon}),(0,Ve.jsx)(RI,{primary:e.title,secondary:e.description})]}),n<N.length-1&&(0,Ve.jsx)(NI,{})]},e.title)))})}),(0,Ve.jsxs)(bR,{open:c,onClose:()=>u(!1),maxWidth:"sm",fullWidth:!0,children:[(0,Ve.jsx)(N$,{children:"Device Management"}),(0,Ve.jsx)(w$,{children:(0,Ve.jsxs)(Dk,{children:[(0,Ve.jsxs)(rR,{children:[(0,Ve.jsx)(SI,{children:(0,Ve.jsx)(XV,{})}),(0,Ve.jsx)(RI,{primary:"Dark Mode",secondary:"Toggle between light and dark mode"}),(0,Ve.jsx)(XI,{children:(0,Ve.jsx)(WV,{checked:e,onChange:n,color:"primary"})})]}),(0,Ve.jsx)(NI,{}),(0,Ve.jsx)(hS,{variant:"subtitle1",sx:{px:2,py:1,fontWeight:"bold"},children:"Connected Devices"}),s.map((e=>(0,Ve.jsxs)(rR,{children:[(0,Ve.jsx)(RI,{primary:e.name,secondary:`Last active: ${e.lastActive}`}),(0,Ve.jsx)(ek,{edge:"end",onClick:()=>{h(e.id),(async e=>{if(r)try{const t=Jm(q_,"users",r.uid);await hv(t,{devices:Sv(e)}),l(s.filter((t=>t.id!==e))),u(!1),h(null)}catch(t){f("Failed to remove device"),console.error("Error removing device:",t)}})(e.id)},children:(0,Ve.jsx)(AV,{})})]},e.id))),0===s.length&&(0,Ve.jsx)(hS,{variant:"body2",color:"text.secondary",sx:{px:2,py:2},children:"No devices connected"}),(0,Ve.jsx)(tW,{})]})}),(0,Ve.jsx)(WF,{children:(0,Ve.jsx)(Ak,{onClick:()=>u(!1),children:"Close"})})]}),(0,Ve.jsxs)(Xe,{sx:{mb:4,mt:4},children:[(0,Ve.jsx)(hS,{variant:"h6",gutterBottom:!0,children:"Privacy Settings"}),(0,Ve.jsxs)(CT,{elevation:2,sx:{p:3},children:[(0,Ve.jsxs)(Xe,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[(0,Ve.jsxs)(Xe,{sx:{display:"flex",alignItems:"center",gap:2},children:[m?(0,Ve.jsx)(xV,{color:"primary"}):(0,Ve.jsx)(ZV,{color:"primary"}),(0,Ve.jsxs)(Xe,{children:[(0,Ve.jsx)(hS,{variant:"subtitle1",children:"Private Account"}),(0,Ve.jsx)(hS,{variant:"body2",color:"text.secondary",children:m?"Only approved followers can see your content":"Anyone can see your content"})]})]}),(0,Ve.jsx)(WV,{checked:m,onChange:async()=>{if(null!==r&&void 0!==r&&r.uid)try{if(await hv(Jm(q_,"users",r.uid),{isPrivate:!m,updatedAt:Av()}),!m)for(const e of v)await O(e.id,e.userId,!0)}catch(p){console.error("Error updating privacy settings:",p),wA.error("Failed to update privacy settings")}},color:"primary"})]}),(0,Ve.jsxs)(Xe,{sx:{display:"flex",gap:3,mt:2,p:2,bgcolor:"background.default",borderRadius:1},children:[(0,Ve.jsxs)(Xe,{children:[(0,Ve.jsx)(hS,{variant:"subtitle2",color:"text.secondary",children:"Followers"}),(0,Ve.jsx)(hS,{variant:"h6",children:b.followers})]}),(0,Ve.jsxs)(Xe,{children:[(0,Ve.jsx)(hS,{variant:"subtitle2",color:"text.secondary",children:"Following"}),(0,Ve.jsx)(hS,{variant:"h6",children:b.following})]}),m&&(0,Ve.jsxs)(Xe,{children:[(0,Ve.jsx)(hS,{variant:"subtitle2",color:"text.secondary",children:"Pending Requests"}),(0,Ve.jsx)(hS,{variant:"h6",children:b.pendingRequests})]})]}),(0,Ve.jsx)(HM,{severity:"info",sx:{mt:2},children:m?"When your account is private, only approved followers can see your content. New followers must send a follow request.":"When your account is public, anyone can see your content and follow you without approval."}),(0,Ve.jsx)(NI,{}),(0,Ve.jsxs)(rR,{button:!0,onClick:async()=>{if(r)try{const e=Jm(q_,"users",r.uid),t=await lv(e);if(t.exists()){t.data().verificationCode?x(!0):A(!0)}}catch(p){console.error("Error checking verification code:",p),wA.error("Failed to check verification status")}},children:[(0,Ve.jsx)(SI,{children:(0,Ve.jsx)(JV,{})}),(0,Ve.jsx)(RI,{primary:"View Registration Source Code",secondary:"Verify your code to view your registration source code"})]})]})]}),(0,Ve.jsxs)(bR,{open:_,onClose:()=>A(!1),maxWidth:"sm",fullWidth:!0,children:[(0,Ve.jsx)(N$,{children:"Create Verification Code"}),(0,Ve.jsx)(w$,{children:(0,Ve.jsx)(xL,{label:"Create a verification code",value:k,onChange:e=>C(e.target.value),fullWidth:!0,margin:"normal",type:"password",inputProps:{maxLength:8,inputMode:"numeric",pattern:"[0-9]*"}})}),(0,Ve.jsxs)(WF,{children:[(0,Ve.jsx)(Ak,{onClick:()=>A(!1),children:"Cancel"}),(0,Ve.jsx)(Ak,{onClick:async()=>{if(r&&k)try{const e=Jm(q_,"users",r.uid);await hv(e,{verificationCode:k}),A(!1),x(!0),wA.success("Verification code created successfully")}catch(p){console.error("Error creating verification code:",p),wA.error("Failed to create verification code")}},variant:"contained",children:"Create"})]})]}),(0,Ve.jsxs)(bR,{open:E,onClose:()=>x(!1),maxWidth:"sm",fullWidth:!0,children:[(0,Ve.jsx)(N$,{children:"Verify Code"}),(0,Ve.jsx)(w$,{children:(0,Ve.jsx)(xL,{label:"Enter your verification code",value:T,onChange:e=>S(e.target.value),fullWidth:!0,margin:"normal",type:"password",inputProps:{maxLength:8,inputMode:"numeric",pattern:"[0-9]*"}})}),(0,Ve.jsxs)(WF,{children:[(0,Ve.jsx)(Ak,{onClick:()=>x(!1),children:"Cancel"}),(0,Ve.jsx)(Ak,{onClick:async()=>{if(r)try{const e=Jm(q_,"users",r.uid),t=await lv(e);if(t.exists()){const e=t.data();e.verificationCode===T?(M(e.sourceCodeHash?T:""),L(!0),x(!1),wA.success("Code verified successfully")):wA.error("Invalid verification code")}}catch(p){console.error("Error verifying code:",p),wA.error("Failed to verify code")}},variant:"contained",children:"Verify"})]})]}),(0,Ve.jsxs)(bR,{open:D,onClose:()=>L(!1),maxWidth:"md",fullWidth:!0,children:[(0,Ve.jsx)(N$,{children:"Your Registration Source Code"}),(0,Ve.jsxs)(w$,{children:[(0,Ve.jsxs)(Xe,{sx:{display:"flex",alignItems:"center",gap:1,mb:3,color:"info.main"},children:[(0,Ve.jsx)(KV,{color:"info"}),(0,Ve.jsx)(hS,{sx:{color:"info.main",fontSize:"1rem"},children:"When your account is used on another device, you will need this Source Code to register your account."})]}),(0,Ve.jsx)(Xe,{sx:{p:2,bgcolor:"background.paper",borderRadius:1,fontFamily:"monospace",whiteSpace:"pre-wrap",overflow:"auto",maxHeight:"60vh",fontSize:"24px",textAlign:"center"},children:P})]}),(0,Ve.jsx)(WF,{children:(0,Ve.jsx)(Ak,{onClick:()=>L(!1),children:"Close"})})]}),m&&v.length>0&&(0,Ve.jsxs)(Xe,{sx:{mt:3},children:[(0,Ve.jsx)(hS,{variant:"subtitle1",gutterBottom:!0,children:"Follow Requests"}),(0,Ve.jsx)(Dk,{children:v.map((e=>{var t;return(0,Ve.jsxs)(rR,{sx:{bgcolor:"background.paper",borderRadius:1,mb:1,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,Ve.jsxs)(Xe,{sx:{display:"flex",alignItems:"center",gap:2},children:[(0,Ve.jsx)(aS,{children:e.username[0]}),(0,Ve.jsxs)(Xe,{children:[(0,Ve.jsxs)(hS,{variant:"subtitle1",children:["@",e.username]}),(0,Ve.jsx)(hS,{variant:"body2",color:"text.secondary",children:new Date(null===(t=e.timestamp)||void 0===t?void 0:t.toDate()).toLocaleDateString()})]})]}),(0,Ve.jsxs)(Xe,{sx:{display:"flex",gap:1},children:[(0,Ve.jsx)(ek,{color:"success",onClick:()=>O(e.id,e.userId,!0),children:(0,Ve.jsx)(eW,{})}),(0,Ve.jsx)(ek,{color:"error",onClick:()=>O(e.id,e.userId,!1),children:(0,Ve.jsx)(vV,{})})]})]},e.id)}))})]})]})})},rW=["alignItems","autoFocus","component","children","dense","disableGutters","divider","focusVisibleClassName","selected","className"],iW=(0,bT.Ay)(KS,{shouldForwardProp:e=>(0,pk.A)(e)||"classes"===e,name:"MuiListItemButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,"flex-start"===n.alignItems&&t.alignItemsFlexStart,n.divider&&t.divider,!n.disableGutters&&t.gutters]}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({display:"flex",flexGrow:1,justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minWidth:0,boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${qI.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:(0,ET.X4)(t.palette.primary.main,t.palette.action.selectedOpacity),[`&.${qI.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:(0,ET.X4)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},[`&.${qI.selected}:hover`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:(0,ET.X4)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:(0,ET.X4)(t.palette.primary.main,t.palette.action.selectedOpacity)}},[`&.${qI.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${qI.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity}},n.divider&&{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,backgroundClip:"padding-box"},"flex-start"===n.alignItems&&{alignItems:"flex-start"},!n.disableGutters&&{paddingLeft:16,paddingRight:16},n.dense&&{paddingTop:4,paddingBottom:4})})),aW=t.forwardRef((function(e,n){const r=(0,Ze.b)({props:e,name:"MuiListItemButton"}),{alignItems:i="center",autoFocus:a=!1,component:o="div",children:s,dense:l=!1,disableGutters:c=!1,divider:u=!1,focusVisibleClassName:d,selected:h=!1,className:p}=r,f=(0,Le.A)(r,rW),m=t.useContext(Sk),g=t.useMemo((()=>({dense:l||m.dense||!1,alignItems:i,disableGutters:c})),[i,m.dense,l,c]),v=t.useRef(null);(0,Mk.A)((()=>{a&&v.current&&v.current.focus()}),[a]);const y=(0,De.A)({},r,{alignItems:i,dense:g.dense,disableGutters:c,divider:u,selected:h}),b=(e=>{const{alignItems:t,classes:n,dense:r,disabled:i,disableGutters:a,divider:o,selected:s}=e,l={root:["root",r&&"dense",!a&&"gutters",o&&"divider",i&&"disabled","flex-start"===t&&"alignItemsFlexStart",s&&"selected"]},c=(0,yT.A)(l,HI,n);return(0,De.A)({},n,c)})(y),w=(0,pS.A)(v,n);return(0,Ve.jsx)(Sk.Provider,{value:g,children:(0,Ve.jsx)(iW,(0,De.A)({ref:w,href:f.href||f.to,component:(f.href||f.to)&&"div"===o?"button":o,focusVisibleClassName:(0,Pe.A)(b.focusVisible,d),ownerState:y,className:(0,Pe.A)(b.root,p)},f,{classes:b,children:s}))})})),oW=aW,sW=()=>{const e=Z(),{searchQuery:n}=J(),{db:r,loading:i,error:a}=UP(),[o,s]=(0,t.useState)([]),[l,c]=(0,t.useState)(!0),[u,d]=(0,t.useState)(null),[h,p]=(0,t.useState)(0);TN(tC().breakpoints.down("sm"));(0,t.useEffect)((()=>{(async()=>{if(n&&r)try{c(!0);const e=[],t=Wg(Zm(r,"users"),Hg("username",">=",n.toLowerCase()),Hg("username","<=",n.toLowerCase()+"\uf8ff"),Qg(20));(await uv(t)).forEach((t=>{const n=t.data();e.push({id:t.id,type:"user",data:n})}));const i=Wg(Zm(r,"posts"),Hg("content",">=",n.toLowerCase()),Hg("content","<=",n.toLowerCase()+"\uf8ff"),Kg("content"),Qg(20)),a=await uv(i);for(const n of a.docs){const t=n.data(),i=(await lv(Jm(r,"users",t.authorId))).data();e.push({id:n.id,type:"post",data:{...t,author:i}})}const o=Wg(Zm(r,"forums"),Hg("title",">=",n.toLowerCase()),Hg("title","<=",n.toLowerCase()+"\uf8ff"),Qg(20));(await uv(o)).forEach((t=>{const n=t.data();e.push({id:t.id,type:"forum",data:n})}));const l=Wg(Zm(r,"sideRooms"),Hg("name",">=",n.toLowerCase()),Hg("name","<=",n.toLowerCase()+"\uf8ff"),Qg(20));(await uv(l)).forEach((t=>{const n=t.data();e.push({id:t.id,type:"sideRoom",data:n})})),s(e)}catch(e){console.error("Error searching:",e),d("Failed to search. Please try again later.")}finally{c(!1)}})()}),[n,r]);const f=o.filter((e=>{switch(h){case 0:return"user"===e.type;case 1:return"post"===e.type;case 2:return"forum"===e.type;case 3:return"sideRoom"===e.type;default:return!0}}));return i?(0,Ve.jsx)("div",{children:"Loading..."}):a?(0,Ve.jsxs)("div",{children:["Error: ",a.message]}):r?(0,Ve.jsxs)(rP,{maxWidth:"md",sx:{mt:4},children:[(0,Ve.jsxs)(hS,{variant:"h4",gutterBottom:!0,children:['Search Results for "',n,'"']}),u&&(0,Ve.jsx)(HM,{severity:"error",sx:{mb:2},children:u}),(0,Ve.jsx)(Xe,{sx:{borderBottom:1,borderColor:"divider",mb:2},children:(0,Ve.jsxs)(DP,{value:h,onChange:(e,t)=>p(t),children:[(0,Ve.jsx)(jP,{label:"Users"}),(0,Ve.jsx)(jP,{label:"Posts"}),(0,Ve.jsx)(jP,{label:"Forums"}),(0,Ve.jsx)(jP,{label:"Side Rooms"})]})}),l?(0,Ve.jsx)(Xe,{sx:{display:"flex",justifyContent:"center",mt:4},children:(0,Ve.jsx)(jL,{})}):0===f.length?(0,Ve.jsx)(hS,{variant:"body1",color:"text.secondary",children:"No results found"}):(0,Ve.jsx)(Dk,{children:f.map((t=>(0,Ve.jsxs)(oW,{onClick:()=>(t=>{switch(t.type){case"user":e(`/profile/${t.id}`);break;case"post":e(`/post/${t.id}`);break;case"forum":e(`/forum/${t.id}`);break;case"sideRoom":e(`/side-room/${t.id}`)}})(t),sx:{mb:1,borderRadius:1},children:[(0,Ve.jsx)(lR,{children:"user"===t.type?(0,Ve.jsx)(aS,{src:t.data.avatar}):(0,Ve.jsx)(aS,{children:"post"===t.type?"P":"forum"===t.type?"F":"S"})}),(0,Ve.jsx)(RI,{primary:t.data.title||t.data.username||t.data.name,secondary:"post"===t.type?t.data.content.substring(0,100)+"...":t.data.description})]},t.id)))})]}):(0,Ve.jsx)("div",{children:"Error: Database connection failed"})},lW=(0,BT.A)((0,Ve.jsx)("path",{d:"m16 6 2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"}),"TrendingUp"),cW=(0,BT.A)((0,Ve.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search"),uW=(0,BT.A)((0,Ve.jsx)("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3m-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3m0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5m8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5"}),"People");var dW=n(9360);const hW=e=>(0,Ve.jsxs)(dW.A,{...e,viewBox:"0 0 24 24",children:[(0,Ve.jsx)("path",{d:"M6 4h12M12 19L7 8M12 19L17 8",fill:"none",strokeWidth:"2",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"}),(0,Ve.jsx)("path",{d:"M4 14C8 10 16 10 20 14",fill:"none",strokeWidth:"2",stroke:"currentColor",strokeLinecap:"round"})]}),pW=()=>{const[e,n]=(0,t.useState)(0),[r,i]=(0,t.useState)(""),[a,o]=(0,t.useState)([]),[s,l]=(0,t.useState)([]),[c,u]=(0,t.useState)([]),[d,h]=(0,t.useState)(!0),[p,f]=(0,t.useState)(new Set),m=Z(),{currentUser:g}=XA(),[v,y]=(0,t.useState)(null),b=async()=>{try{const e=Wg(Zm(q_,"users"),Kg("createdAt","desc"),Qg(20)),t=(await uv(e)).docs.map((e=>({id:e.id,...e.data()})));o(t)}catch(v){console.error("Error fetching users:",v)}finally{h(!1)}},w=async()=>{try{h(!0);const e=Zm(q_,"sideRooms"),t=mv(Wg(e,Kg("createdAt","desc"),Qg(20)),(async e=>{const t=await Promise.all(e.docs.map((async e=>{var t,n,r,i,a;const o=e.data();let s=null;if(o.ownerId){const e=Jm(q_,"users",o.ownerId),t=await lv(e);t.exists()&&(s=t.data())}return{id:e.id,name:o.name||"Unnamed Room",description:o.description||"",memberCount:o.memberCount||0,shareCount:o.shareCount||0,isPrivate:o.isPrivate||!1,createdAt:(null===(t=o.createdAt)||void 0===t?void 0:t.toDate())||new Date,creatorName:(null===(n=s)||void 0===n?void 0:n.username)||o.creatorName||"",creatorId:o.ownerId||"",creatorAvatar:(null===(r=s)||void 0===r?void 0:r.profilePic)||(null===(i=s)||void 0===i?void 0:i.avatar)||"",tags:o.tags||[],lastActive:(null===(a=o.lastActive)||void 0===a?void 0:a.toDate())||new Date,maxMembers:o.maxMembers||50,activeUsers:o.activeUsers||0,isLive:o.isLive||!1}})));l(t),h(!1)}),(e=>{console.error("Error fetching rooms:",e),wA.error("Failed to load rooms"),h(!1)}));return()=>t()}catch(v){console.error("Error fetching rooms:",v),wA.error("Failed to load rooms"),h(!1)}};(0,t.useEffect)((()=>{b(),w(),E(),g&&x()}),[g]);const E=async()=>{try{const e=Wg(Zm(q_,"videos"),Kg("timestamp","desc"),Qg(20)),t=(await uv(e)).docs.map((e=>({id:e.id,...e.data()})));u(t)}catch(v){console.error("Error fetching videos:",v)}},x=async()=>{if(g)try{const e=Wg(Zm(q_,`users/${g.uid}/following`)),t=await uv(e),n=new Set(t.docs.map((e=>e.id)));f(n)}catch(v){console.error("Error fetching following:",v)}};return d?(0,Ve.jsx)(Xe,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"80vh",children:(0,Ve.jsx)(jL,{})}):(0,Ve.jsxs)(rP,{maxWidth:"lg",sx:{mt:4},children:[(0,Ve.jsxs)(Xe,{sx:{mb:4,display:"flex",alignItems:"center",gap:2},children:[(0,Ve.jsx)(lW,{fontSize:"large",color:"primary"}),(0,Ve.jsx)(hS,{variant:"h4",component:"h1",children:"Discover"})]}),(0,Ve.jsx)(CT,{sx:{p:2,mb:4},children:(0,Ve.jsx)(xL,{fullWidth:!0,placeholder:"Search users and rooms...",value:r,onChange:e=>(async e=>{if(i(e),!g||!q_)return o([]),l([]),void u([]);if(e.length<2)return b(),w(),void E();h(!0),y(null);try{const t=e.toLowerCase(),n=Wg(Zm(q_,"users"),Hg("username_lower",">=",t),Hg("username_lower","<=",t+"\uf8ff"),Qg(20)),r=Wg(Zm(q_,"sideRooms"),Hg("name_lower",">=",t),Hg("name_lower","<=",t+"\uf8ff"),Qg(20)),i=Wg(Zm(q_,"videos"),Hg("title_lower",">=",t),Hg("title_lower","<=",t+"\uf8ff"),Qg(20)),[a,s,c]=await Promise.all([uv(n),uv(r),uv(i)]),d=a.docs.map((e=>({id:e.id,...e.data(),username:e.data().username||"",name:e.data().name||"",bio:e.data().bio||"",profilePic:e.data().profilePic||"",avatar:e.data().avatar||"",createdAt:e.data().createdAt}))).filter((e=>e.username.toLowerCase().includes(t)||e.name.toLowerCase().includes(t)||e.bio&&e.bio.toLowerCase().includes(t))),h=await Promise.all(s.docs.map((async e=>{var t,n,r,i,a;const o=e.data(),s={id:e.id,name:o.name||"",description:o.description||"",ownerId:o.ownerId||"",createdAt:o.createdAt,lastActive:o.lastActive,tags:o.tags||[],isPrivate:o.isPrivate||!1,activeUsers:o.activeUsers||0,isLive:o.isLive||!1};let l=null;if(s.ownerId){const e=Jm(q_,"users",s.ownerId),t=await lv(e);if(t.exists()){const e=t.data();l={id:t.id,username:e.username||"",name:e.name||"",profilePic:e.profilePic||"",avatar:e.avatar||"",createdAt:e.createdAt}}}return{id:e.id,name:s.name,description:s.description,memberCount:o.memberCount||0,shareCount:o.shareCount||0,isPrivate:s.isPrivate,createdAt:(null===(t=s.createdAt)||void 0===t?void 0:t.toDate())||new Date,creatorName:(null===(n=l)||void 0===n?void 0:n.username)||o.creatorName||"",creatorId:s.ownerId,creatorAvatar:(null===(r=l)||void 0===r?void 0:r.profilePic)||(null===(i=l)||void 0===i?void 0:i.avatar)||"",tags:s.tags,lastActive:(null===(a=s.lastActive)||void 0===a?void 0:a.toDate())||new Date,maxMembers:o.maxMembers||50,activeUsers:s.activeUsers,isLive:s.isLive}}))),p=h.filter((e=>{var n;return e.name.toLowerCase().includes(t)||e.description.toLowerCase().includes(t)||(null===(n=e.tags)||void 0===n?void 0:n.some((e=>e.toLowerCase().includes(t))))})).map((e=>({id:e.id,name:e.name,description:e.description,memberCount:e.memberCount||0,shareCount:e.shareCount||0,isPrivate:e.isPrivate,createdAt:e.createdAt,creatorName:e.creatorName,creatorId:e.creatorId,creatorAvatar:e.creatorAvatar,tags:e.tags||[],lastActive:e.lastActive,maxMembers:e.maxMembers||50,activeUsers:e.activeUsers,isLive:e.isLive}))),f=c.docs.map((e=>{const t=e.data();return{id:e.id,title:t.title||"",description:t.description||"",username:t.username||"",userId:t.userId||"",url:t.url||"",thumbnailUrl:t.thumbnailUrl||"",timestamp:t.timestamp}})).filter((e=>e.title.toLowerCase().includes(t)||e.description&&e.description.toLowerCase().includes(t)||e.username.toLowerCase().includes(t))),m=d.map((e=>({id:e.id,username:e.username,name:e.name,profilePic:e.profilePic||"",bio:e.bio||"",coverPhoto:e.coverPhoto||"",isPublic:!0,isAuthenticated:!0,createdAt:e.createdAt}))),g=f.map((e=>({id:e.id,title:e.title,description:e.description||"",username:e.username,userId:e.userId,url:e.url,thumbnailUrl:e.thumbnailUrl||"",timestamp:e.timestamp,likes:0,comments:0})));o(m),l(p),u(g)}catch(v){console.error("Search error:",v),y(`Failed to perform search: ${v.message}`),wA.error(`Search failed: ${v.code||v.message}`),b(),w(),E()}finally{h(!1)}})(e.target.value),InputProps:{startAdornment:(0,Ve.jsx)(EN,{position:"start",children:(0,Ve.jsx)(cW,{})}),endAdornment:d&&(0,Ve.jsx)(EN,{position:"end",children:(0,Ve.jsx)(jL,{size:20})})}})}),(0,Ve.jsx)(Xe,{sx:{width:"100%",mb:4},children:(0,Ve.jsxs)(DP,{value:e,onChange:(e,t)=>{n(t)},variant:"fullWidth",indicatorColor:"primary",textColor:"primary",children:[(0,Ve.jsx)(jP,{icon:(0,Ve.jsx)(uW,{}),label:"People"}),(0,Ve.jsx)(jP,{icon:(0,Ve.jsx)(TV,{}),label:"Rooms"}),(0,Ve.jsx)(jP,{icon:(0,Ve.jsx)(hW,{}),label:"Vibits"})]})}),0===e&&(0,Ve.jsx)(Xe,{sx:{display:"flex",flexDirection:"column",gap:3},children:(0,Ve.jsxs)(CT,{children:[(0,Ve.jsx)(Xe,{sx:{p:2,borderBottom:1,borderColor:"divider"},children:(0,Ve.jsx)(hS,{variant:"h6",component:"h2",children:"Users"})}),(0,Ve.jsx)(Dk,{children:0===a.length?(0,Ve.jsx)(rR,{children:(0,Ve.jsx)(RI,{primary:"No users found",secondary:"Try a different search term"})}):a.map(((e,n)=>(0,Ve.jsxs)(t.Fragment,{children:[(0,Ve.jsxs)(rR,{secondaryAction:e.id!==(null===g||void 0===g?void 0:g.uid)&&(0,Ve.jsxs)(Xe,{sx:{display:"flex",gap:1},children:[(0,Ve.jsx)(ek,{edge:"end",onClick:()=>m(`/messages/${e.id}`),title:"Send message",children:(0,Ve.jsx)(fV,{})}),(0,Ve.jsx)(ek,{edge:"end",onClick:()=>(async e=>{if(g&&e!==g.uid)try{const t=Jm(q_,`users/${g.uid}/following`,e),n=Jm(q_,`users/${e}/followers`,g.uid);if(p.has(e))await pv(t),await pv(n),f((t=>{const n=new Set(t);return n.delete(e),n})),wA.success("Unfollowed user");else{await dv(t,{timestamp:Av()}),await dv(n,{timestamp:Av()}),f((t=>new Set(t).add(e)));const r={type:"follow",senderId:g.uid,senderName:g.displayName||"Anonymous",senderAvatar:g.photoURL||"",recipientId:e,content:`${g.displayName||"Someone"} started following you`,createdAt:Av(),isRead:!1};await fv(Zm(q_,"users",e,"notifications"),r),wA.success("Followed user")}}catch(v){console.error("Error toggling follow:",v),wA.error("Failed to update follow status")}})(e.id),title:p.has(e.id)?"Unfollow user":"Follow user",color:p.has(e.id)?"primary":"default",children:(0,Ve.jsx)(gV,{})})]}),children:[(0,Ve.jsx)(lR,{children:(0,Ve.jsx)(aS,{src:e.profilePic,alt:e.name,children:e.name[0]})}),(0,Ve.jsx)(RI,{primary:e.name,secondary:(0,Ve.jsxs)(t.Fragment,{children:["@",e.username,e.bio&&(0,Ve.jsx)(hS,{component:"span",variant:"body2",color:"text.secondary",sx:{display:"block"},children:e.bio.length>100?`${e.bio.substring(0,100)}...`:e.bio})]}),onClick:()=>{return t=e.id,void m(`/profile/${t}`);var t},sx:{cursor:"pointer"}})]}),n<a.length-1&&(0,Ve.jsx)(NI,{})]},e.id)))})]})}),1===e&&(0,Ve.jsx)(Xe,{sx:{display:"flex",flexDirection:"column",gap:3},children:(0,Ve.jsxs)(CT,{children:[(0,Ve.jsx)(Xe,{sx:{p:2,borderBottom:1,borderColor:"divider"},children:(0,Ve.jsx)(hS,{variant:"h6",component:"h2",children:"Rooms"})}),(0,Ve.jsx)(Dk,{children:0===s.length?(0,Ve.jsx)(rR,{children:(0,Ve.jsx)(RI,{primary:"No rooms found",secondary:"No side rooms have been created yet."})}):s.map(((e,n)=>(0,Ve.jsxs)(t.Fragment,{children:[(0,Ve.jsxs)(rR,{secondaryAction:(0,Ve.jsxs)(Xe,{sx:{display:"flex",gap:1,alignItems:"center"},children:[(0,Ve.jsx)(eU,{icon:(0,Ve.jsx)(uW,{}),label:`${e.activeUsers||0} viewing`,size:"small",color:"primary",variant:"outlined"}),e.isLive&&(0,Ve.jsx)(eU,{label:"Live",color:"error",size:"small"}),e.isPrivate&&(0,Ve.jsx)(eU,{label:"Private",color:"secondary",size:"small"})]}),children:[(0,Ve.jsx)(lR,{children:(0,Ve.jsx)(Ce,{to:`/profile/${e.creatorId}`,style:{textDecoration:"none"},children:(0,Ve.jsx)(aS,{src:e.creatorAvatar,alt:e.creatorName,children:e.creatorName?e.creatorName.charAt(0).toUpperCase():"?"})})}),(0,Ve.jsx)(RI,{primary:(0,Ve.jsxs)(Xe,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,Ve.jsx)(hS,{variant:"subtitle1",children:e.name}),e.tags&&e.tags.map(((e,t)=>(0,Ve.jsx)(eU,{label:e,size:"small",sx:{height:20}},t)))]}),secondary:(0,Ve.jsxs)(t.Fragment,{children:[(0,Ve.jsx)(hS,{component:"span",variant:"body2",color:"text.secondary",sx:{display:"block"},children:e.description}),(0,Ve.jsxs)(hS,{component:"span",variant:"caption",color:"text.secondary",sx:{display:"block",mt:.5},children:["Created by"," ",e.creatorName?(0,Ve.jsx)(Ce,{to:`/profile/${e.creatorId}`,style:{textDecoration:"none",color:"inherit",fontWeight:"bold"},children:e.creatorName}):(0,Ve.jsx)("span",{style:{fontStyle:"italic"},children:"deleted user"})," \u2022 ","Last active ",gM(e.lastActive)]})]}),onClick:()=>{return t=e.id,void m(`/side-room/${t}`);var t},sx:{cursor:"pointer"}})]}),n<s.length-1&&(0,Ve.jsx)(NI,{})]},e.id)))})]})}),2===e&&(0,Ve.jsx)(Xe,{sx:{display:"flex",flexDirection:"column",gap:3},children:(0,Ve.jsxs)(CT,{children:[(0,Ve.jsx)(Xe,{sx:{p:2,borderBottom:1,borderColor:"divider"},children:(0,Ve.jsxs)(hS,{variant:"h6",component:"h2",sx:{display:"flex",alignItems:"center",gap:1},children:[(0,Ve.jsx)(hW,{color:"primary"})," Vibits"]})}),0===c.length?(0,Ve.jsxs)(Xe,{sx:{p:4,textAlign:"center"},children:[(0,Ve.jsx)(hS,{variant:"h6",color:"text.secondary",children:"No videos found"}),(0,Ve.jsx)(hS,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"Check back later or upload your own!"}),(0,Ve.jsx)(Ak,{variant:"contained",color:"primary",sx:{mt:2},onClick:()=>m("/vibits"),startIcon:(0,Ve.jsx)(hW,{}),children:"Go to Vibits"})]}):(0,Ve.jsx)(iN,{container:!0,spacing:2,sx:{p:2},children:c.map((e=>(0,Ve.jsx)(iN,{item:!0,xs:12,sm:6,md:4,children:(0,Ve.jsxs)(Q$,{sx:{position:"relative"},children:[(0,Ve.jsx)(rV,{component:"video",image:e.thumbnailUrl||e.url,sx:{height:{xs:"auto",sm:200},width:"100%",aspectRatio:"16/9",objectFit:"cover",backgroundColor:"black","@media (max-width: 600px)":{height:"auto",maxHeight:"60vh",objectFit:"contain"}},controls:!0,preload:"metadata",playsInline:!0,muted:!0,loop:!0,poster:e.thumbnailUrl}),(0,Ve.jsx)(Xe,{sx:{position:"absolute",bottom:0,left:0,right:0,p:1,background:"linear-gradient(transparent, rgba(0,0,0,0.8))",color:"white"},children:(0,Ve.jsxs)(Xe,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,Ve.jsxs)(hS,{variant:"subtitle2",children:["@",e.username]}),(0,Ve.jsxs)(Xe,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,Ve.jsxs)(Xe,{sx:{display:"flex",alignItems:"center"},children:[(0,Ve.jsx)(yV,{fontSize:"small"}),(0,Ve.jsx)(hS,{variant:"caption",sx:{ml:.5},children:e.likes})]}),(0,Ve.jsxs)(Xe,{sx:{display:"flex",alignItems:"center"},children:[(0,Ve.jsx)(bV,{fontSize:"small"}),(0,Ve.jsx)(hS,{variant:"caption",sx:{ml:.5},children:e.comments})]})]})]})})]},e.id)},e.id)))})]})})]})},fW=()=>{const{user:e}=XA(),{db:n}=UP(),[r,i]=(0,t.useState)([]),[a,o]=(0,t.useState)(""),[s,l]=(0,t.useState)(null),[c,u]=(0,t.useState)(!0),[d,h]=(0,t.useState)(null);(0,t.useEffect)((()=>{if(n&&e)try{const t=mv(Wg(Zm(n,"messages"),Hg("participants","array-contains",e.uid),Kg("timestamp","desc")),(e=>{const t=e.docs.map((e=>({id:e.id,...e.data()})));i(t),u(!1)}));return()=>t()}catch(t){h("Failed to fetch messages"),console.error("Error fetching messages:",t),u(!1)}}),[n,e]);return c?(0,Ve.jsx)(Xe,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"200px",children:(0,Ve.jsx)(jL,{})}):d?(0,Ve.jsx)(Xe,{p:3,children:(0,Ve.jsx)(hS,{color:"error",children:d})}):(0,Ve.jsxs)(Xe,{p:3,children:[(0,Ve.jsx)(hS,{variant:"h4",gutterBottom:!0,children:"Messages"}),(0,Ve.jsxs)(Xe,{mb:3,children:[(0,Ve.jsx)(xL,{fullWidth:!0,multiline:!0,rows:3,variant:"outlined",placeholder:"Type your message...",value:a,onChange:e=>o(e.target.value),sx:{mb:2}}),(0,Ve.jsx)(Ak,{variant:"contained",color:"primary",onClick:async()=>{if(n&&e&&s&&a.trim())try{await fv(Zm(n,"messages"),{text:a,senderId:e.uid,receiverId:s,timestamp:new Date,read:!1,participants:[e.uid,s]}),o("")}catch(t){h("Failed to send message"),console.error("Error sending message:",t)}},disabled:!a.trim()||!s,children:"Send"})]}),(0,Ve.jsxs)(Dk,{children:[r.map((n=>{var r;return(0,Ve.jsxs)(t.Fragment,{children:[(0,Ve.jsxs)(rR,{children:[(0,Ve.jsx)(lR,{children:(0,Ve.jsx)(aS,{src:n.senderId===(null===e||void 0===e?void 0:e.uid)&&(null===e||void 0===e?void 0:e.photoURL)||void 0})}),(0,Ve.jsx)(RI,{primary:n.text,secondary:(0,Ve.jsxs)(Ve.Fragment,{children:[(0,Ve.jsx)(hS,{component:"span",variant:"body2",color:"text.primary",children:n.senderId===(null===e||void 0===e?void 0:e.uid)?"You":"Other User"})," \u2014 ",new Date(null===(r=n.timestamp)||void 0===r?void 0:r.toDate()).toLocaleString()]})})]}),(0,Ve.jsx)(NI,{})]},n.id)})),0===r.length&&(0,Ve.jsx)(hS,{variant:"body1",color:"text.secondary",children:"No messages yet"})]})]})};var mW=n(1014);function gW(e){return(0,_T.Ay)("MuiTooltip",e)}const vW=(0,Ge.A)("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]),yW=["arrow","children","classes","components","componentsProps","describeChild","disableFocusListener","disableHoverListener","disableInteractive","disableTouchListener","enterDelay","enterNextDelay","enterTouchDelay","followCursor","id","leaveDelay","leaveTouchDelay","onClose","onOpen","open","placement","PopperComponent","PopperProps","slotProps","slots","title","TransitionComponent","TransitionProps"];const bW=(0,bT.Ay)(hF,{name:"MuiTooltip",slot:"Popper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.popper,!n.disableInteractive&&t.popperInteractive,n.arrow&&t.popperArrow,!n.open&&t.popperClose]}})((e=>{let{theme:t,ownerState:n,open:r}=e;return(0,De.A)({zIndex:(t.vars||t).zIndex.tooltip,pointerEvents:"none"},!n.disableInteractive&&{pointerEvents:"auto"},!r&&{pointerEvents:"none"},n.arrow&&{[`&[data-popper-placement*="bottom"] .${vW.arrow}`]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},[`&[data-popper-placement*="top"] .${vW.arrow}`]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},[`&[data-popper-placement*="right"] .${vW.arrow}`]:(0,De.A)({},n.isRtl?{right:0,marginRight:"-0.71em"}:{left:0,marginLeft:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}}),[`&[data-popper-placement*="left"] .${vW.arrow}`]:(0,De.A)({},n.isRtl?{left:0,marginLeft:"-0.71em"}:{right:0,marginRight:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}})})})),wW=(0,bT.Ay)("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.tooltip,n.touch&&t.touch,n.arrow&&t.tooltipArrow,t[`tooltipPlacement${(0,wT.A)(n.placement.split("-")[0])}`]]}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({backgroundColor:t.vars?t.vars.palette.Tooltip.bg:(0,ET.X4)(t.palette.grey[700],.92),borderRadius:(t.vars||t).shape.borderRadius,color:(t.vars||t).palette.common.white,fontFamily:t.typography.fontFamily,padding:"4px 8px",fontSize:t.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:t.typography.fontWeightMedium},n.arrow&&{position:"relative",margin:0},n.touch&&{padding:"8px 16px",fontSize:t.typography.pxToRem(14),lineHeight:(r=16/14,Math.round(1e5*r)/1e5)+"em",fontWeight:t.typography.fontWeightRegular},{[`.${vW.popper}[data-popper-placement*="left"] &`]:(0,De.A)({transformOrigin:"right center"},n.isRtl?(0,De.A)({marginLeft:"14px"},n.touch&&{marginLeft:"24px"}):(0,De.A)({marginRight:"14px"},n.touch&&{marginRight:"24px"})),[`.${vW.popper}[data-popper-placement*="right"] &`]:(0,De.A)({transformOrigin:"left center"},n.isRtl?(0,De.A)({marginRight:"14px"},n.touch&&{marginRight:"24px"}):(0,De.A)({marginLeft:"14px"},n.touch&&{marginLeft:"24px"})),[`.${vW.popper}[data-popper-placement*="top"] &`]:(0,De.A)({transformOrigin:"center bottom",marginBottom:"14px"},n.touch&&{marginBottom:"24px"}),[`.${vW.popper}[data-popper-placement*="bottom"] &`]:(0,De.A)({transformOrigin:"center top",marginTop:"14px"},n.touch&&{marginTop:"24px"})});var r})),EW=(0,bT.Ay)("span",{name:"MuiTooltip",slot:"Arrow",overridesResolver:(e,t)=>t.arrow})((e=>{let{theme:t}=e;return{overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:t.vars?t.vars.palette.Tooltip.bg:(0,ET.X4)(t.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}}}));let xW=!1;const _W=new kS.E;let AW={x:0,y:0};function TW(e,t){return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];t&&t(n,...i),e(n,...i)}}const SW=t.forwardRef((function(e,n){var r,i,a,o,s,l,c,u,d,h,p,f,m,g,v,y,b,w,E;const x=(0,Ze.b)({props:e,name:"MuiTooltip"}),{arrow:_=!1,children:A,components:T={},componentsProps:S={},describeChild:k=!1,disableFocusListener:C=!1,disableHoverListener:I=!1,disableInteractive:R=!1,disableTouchListener:D=!1,enterDelay:L=100,enterNextDelay:P=0,enterTouchDelay:M=700,followCursor:N=!1,id:O,leaveDelay:j=0,leaveTouchDelay:F=1500,onClose:U,onOpen:B,open:$,placement:V="bottom",PopperComponent:W,PopperProps:z={},slotProps:H={},slots:q={},title:G,TransitionComponent:K=cC,TransitionProps:Y}=x,Q=(0,Le.A)(x,yW),X=t.isValidElement(A)?A:(0,Ve.jsx)("span",{children:A}),Z=tC(),J=lT(),[ee,te]=t.useState(),[ne,re]=t.useState(null),ie=t.useRef(!1),ae=R||N,oe=(0,kS.A)(),se=(0,kS.A)(),le=(0,kS.A)(),ce=(0,kS.A)(),[ue,de]=(0,QD.A)({controlled:$,default:!1,name:"Tooltip",state:"open"});let he=ue;const pe=(0,mW.A)(O),fe=t.useRef(),me=(0,fS.A)((()=>{void 0!==fe.current&&(document.body.style.WebkitUserSelect=fe.current,fe.current=void 0),ce.clear()}));t.useEffect((()=>me),[me]);const ge=e=>{_W.clear(),xW=!0,de(!0),B&&!he&&B(e)},ve=(0,fS.A)((e=>{_W.start(800+j,(()=>{xW=!1})),de(!1),U&&he&&U(e),oe.start(Z.transitions.duration.shortest,(()=>{ie.current=!1}))})),ye=e=>{ie.current&&"touchstart"!==e.type||(ee&&ee.removeAttribute("title"),se.clear(),le.clear(),L||xW&&P?se.start(xW?P:L,(()=>{ge(e)})):ge(e))},be=e=>{se.clear(),le.start(j,(()=>{ve(e)}))},{isFocusVisibleRef:we,onBlur:Ee,onFocus:xe,ref:_e}=(0,mS.A)(),[,Ae]=t.useState(!1),Te=e=>{Ee(e),!1===we.current&&(Ae(!1),be(e))},Se=e=>{ee||te(e.currentTarget),xe(e),!0===we.current&&(Ae(!0),ye(e))},ke=e=>{ie.current=!0;const t=X.props;t.onTouchStart&&t.onTouchStart(e)},Ce=e=>{ke(e),le.clear(),oe.clear(),me(),fe.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",ce.start(M,(()=>{document.body.style.WebkitUserSelect=fe.current,ye(e)}))},Ie=e=>{X.props.onTouchEnd&&X.props.onTouchEnd(e),me(),le.start(F,(()=>{ve(e)}))};t.useEffect((()=>{if(he)return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)};function e(e){"Escape"!==e.key&&"Esc"!==e.key||ve(e)}}),[ve,he]);const Re=(0,pS.A)(zk(X),_e,te,n);G||0===G||(he=!1);const Me=t.useRef(),Ne={},Oe="string"===typeof G;k?(Ne.title=he||!Oe||I?null:G,Ne["aria-describedby"]=he?pe:null):(Ne["aria-label"]=Oe?G:null,Ne["aria-labelledby"]=he&&!Oe?pe:null);const je=(0,De.A)({},Ne,Q,X.props,{className:(0,Pe.A)(Q.className,X.props.className),onTouchStart:ke,ref:Re},N?{onMouseMove:e=>{const t=X.props;t.onMouseMove&&t.onMouseMove(e),AW={x:e.clientX,y:e.clientY},Me.current&&Me.current.update()}}:{});const Fe={};D||(je.onTouchStart=Ce,je.onTouchEnd=Ie),I||(je.onMouseOver=TW(ye,je.onMouseOver),je.onMouseLeave=TW(be,je.onMouseLeave),ae||(Fe.onMouseOver=ye,Fe.onMouseLeave=be)),C||(je.onFocus=TW(Se,je.onFocus),je.onBlur=TW(Te,je.onBlur),ae||(Fe.onFocus=Se,Fe.onBlur=Te));const Ue=t.useMemo((()=>{var e;let t=[{name:"arrow",enabled:Boolean(ne),options:{element:ne,padding:4}}];return null!=(e=z.popperOptions)&&e.modifiers&&(t=t.concat(z.popperOptions.modifiers)),(0,De.A)({},z.popperOptions,{modifiers:t})}),[ne,z]),Be=(0,De.A)({},x,{isRtl:J,arrow:_,disableInteractive:ae,placement:V,PopperComponentProp:W,touch:ie.current}),$e=(e=>{const{classes:t,disableInteractive:n,arrow:r,touch:i,placement:a}=e,o={popper:["popper",!n&&"popperInteractive",r&&"popperArrow"],tooltip:["tooltip",r&&"tooltipArrow",i&&"touch",`tooltipPlacement${(0,wT.A)(a.split("-")[0])}`],arrow:["arrow"]};return(0,yT.A)(o,gW,t)})(Be),We=null!=(r=null!=(i=q.popper)?i:T.Popper)?r:bW,ze=null!=(a=null!=(o=null!=(s=q.transition)?s:T.Transition)?o:K)?a:cC,He=null!=(l=null!=(c=q.tooltip)?c:T.Tooltip)?l:wW,qe=null!=(u=null!=(d=q.arrow)?d:T.Arrow)?u:EW,Ge=HT(We,(0,De.A)({},z,null!=(h=H.popper)?h:S.popper,{className:(0,Pe.A)($e.popper,null==z?void 0:z.className,null==(p=null!=(f=H.popper)?f:S.popper)?void 0:p.className)}),Be),Ke=HT(ze,(0,De.A)({},Y,null!=(m=H.transition)?m:S.transition),Be),Ye=HT(He,(0,De.A)({},null!=(g=H.tooltip)?g:S.tooltip,{className:(0,Pe.A)($e.tooltip,null==(v=null!=(y=H.tooltip)?y:S.tooltip)?void 0:v.className)}),Be),Qe=HT(qe,(0,De.A)({},null!=(b=H.arrow)?b:S.arrow,{className:(0,Pe.A)($e.arrow,null==(w=null!=(E=H.arrow)?E:S.arrow)?void 0:w.className)}),Be);return(0,Ve.jsxs)(t.Fragment,{children:[t.cloneElement(X,je),(0,Ve.jsx)(We,(0,De.A)({as:null!=W?W:hF,placement:V,anchorEl:N?{getBoundingClientRect:()=>({top:AW.y,left:AW.x,right:AW.x,bottom:AW.y,width:0,height:0})}:ee,popperRef:Me,open:!!ee&&he,id:pe,transition:!0},Fe,Ge,{popperOptions:Ue,children:e=>{let{TransitionProps:t}=e;return(0,Ve.jsx)(ze,(0,De.A)({timeout:Z.transitions.duration.shorter},t,Ke,{children:(0,Ve.jsxs)(He,(0,De.A)({},Ye,{children:[G,_?(0,Ve.jsx)(qe,(0,De.A)({},Qe,{ref:re})):null]}))}))}}))]})})),kW=SW,CW=(0,BT.A)((0,Ve.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add");var IW=n(7937);const RW=["component","direction","spacing","divider","children","className","useFlexGap"],DW=(0,je.A)(),LW=XL("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root});function PW(e){return BL({props:e,name:"MuiStack",defaultTheme:DW})}function MW(e,n){const r=t.Children.toArray(e).filter(Boolean);return r.reduce(((e,i,a)=>(e.push(i),a<r.length-1&&e.push(t.cloneElement(n,{key:`separator-${a}`})),e)),[])}const NW=e=>{let{ownerState:t,theme:n}=e,r=(0,De.A)({display:"flex",flexDirection:"column"},(0,qM.NI)({theme:n},(0,qM.kW)({values:t.direction,breakpoints:n.breakpoints.values}),(e=>({flexDirection:e}))));if(t.spacing){const e=(0,IW.LX)(n),i=Object.keys(n.breakpoints.values).reduce(((e,n)=>(("object"===typeof t.spacing&&null!=t.spacing[n]||"object"===typeof t.direction&&null!=t.direction[n])&&(e[n]=!0),e)),{}),a=(0,qM.kW)({values:t.direction,base:i}),o=(0,qM.kW)({values:t.spacing,base:i});"object"===typeof a&&Object.keys(a).forEach(((e,t,n)=>{if(!a[e]){const r=t>0?a[n[t-1]]:"column";a[e]=r}}));const s=(n,r)=>{return t.useFlexGap?{gap:(0,IW._W)(e,n)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${i=r?a[r]:t.direction,{row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"}[i]}`]:(0,IW._W)(e,n)}};var i};r=(0,wR.A)(r,(0,qM.NI)({theme:n},o,s))}return r=(0,qM.iZ)(n.breakpoints,r),r};const OW=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{createStyledComponent:n=LW,useThemeProps:r=PW,componentName:i="MuiStack"}=e,a=n(NW),o=t.forwardRef((function(e,t){const n=r(e),o=(0,Oe.A)(n),{component:s="div",direction:l="column",spacing:c=0,divider:u,children:d,className:h,useFlexGap:p=!1}=o,f=(0,Le.A)(o,RW),m={direction:l,spacing:c,useFlexGap:p},g=(0,yT.A)({root:["root"]},(e=>(0,_T.Ay)(i,e)),{});return(0,Ve.jsx)(a,(0,De.A)({as:s,ownerState:m,ref:t,className:(0,Pe.A)(g.root,h)},f,{children:u?MW(d,u):d}))}));return o}({createStyledComponent:(0,bT.Ay)("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root}),useThemeProps:e=>(0,Ze.b)({props:e,name:"MuiStack"})}),jW=OW;function FW(e){return(0,_T.Ay)("MuiFormControlLabel",e)}const UW=(0,Ge.A)("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),BW=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","required","slotProps","value"],$W=(0,bT.Ay)("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${UW.label}`]:t.label},t.root,t[`labelPlacement${(0,wT.A)(n.labelPlacement)}`]]}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${UW.disabled}`]:{cursor:"default"}},"start"===n.labelPlacement&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},"top"===n.labelPlacement&&{flexDirection:"column-reverse",marginLeft:16},"bottom"===n.labelPlacement&&{flexDirection:"column",marginLeft:16},{[`& .${UW.label}`]:{[`&.${UW.disabled}`]:{color:(t.vars||t).palette.text.disabled}}})})),VW=(0,bT.Ay)("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(e,t)=>t.asterisk})((e=>{let{theme:t}=e;return{[`&.${UW.error}`]:{color:(t.vars||t).palette.error.main}}})),WW=t.forwardRef((function(e,n){var r,i;const a=(0,Ze.b)({props:e,name:"MuiFormControlLabel"}),{className:o,componentsProps:s={},control:l,disabled:c,disableTypography:u,label:d,labelPlacement:h="end",required:p,slotProps:f={}}=a,m=(0,Le.A)(a,BW),g=DR(),v=null!=(r=null!=c?c:l.props.disabled)?r:null==g?void 0:g.disabled,y=null!=p?p:l.props.required,b={disabled:v,required:y};["checked","name","onChange","value","inputRef"].forEach((e=>{"undefined"===typeof l.props[e]&&"undefined"!==typeof a[e]&&(b[e]=a[e])}));const w=IR({props:a,muiFormControl:g,states:["error"]}),E=(0,De.A)({},a,{disabled:v,labelPlacement:h,required:y,error:w.error}),x=(e=>{const{classes:t,disabled:n,labelPlacement:r,error:i,required:a}=e,o={root:["root",n&&"disabled",`labelPlacement${(0,wT.A)(r)}`,i&&"error",a&&"required"],label:["label",n&&"disabled"],asterisk:["asterisk",i&&"error"]};return(0,yT.A)(o,FW,t)})(E),_=null!=(i=f.typography)?i:s.typography;let A=d;return null==A||A.type===hS||u||(A=(0,Ve.jsx)(hS,(0,De.A)({component:"span"},_,{className:(0,Pe.A)(x.label,null==_?void 0:_.className),children:A}))),(0,Ve.jsxs)($W,(0,De.A)({className:(0,Pe.A)(x.root,o),ownerState:E,ref:n},m,{children:[t.cloneElement(l,b),y?(0,Ve.jsxs)(jW,{display:"block",children:[A,(0,Ve.jsxs)(VW,{ownerState:E,"aria-hidden":!0,className:x.asterisk,children:["\u2009","*"]})]}):A]}))})),zW=WW,HW=e=>{let{open:n,onClose:r}=e;const{currentUser:i}=XA(),a=Z(),[o,s]=(0,t.useState)(!1),[l,c]=(0,t.useState)(null),[u,d]=(0,t.useState)({name:"",description:"",isPrivate:!1,password:"",category:"",tags:[]}),[h,p]=(0,t.useState)(!1),[f,m]=(0,t.useState)(""),[g,v]=(0,t.useState)([]),[y,b]=(0,t.useState)(""),[w,E]=(0,t.useState)(""),[x,_]=(0,t.useState)([]),[A,T]=(0,t.useState)(""),[S,k]=(0,t.useState)(!1),[C,I]=(0,t.useState)(!1),R=()=>{y.trim()&&!g.includes(y.trim())&&(v([...g,y.trim()]),b(""))},D=()=>{A.trim()&&!x.includes(A.trim())&&(_([...x,A.trim()]),T(""))};return(0,Ve.jsxs)(bR,{open:n,onClose:r,maxWidth:"sm",fullWidth:!0,children:[(0,Ve.jsx)(N$,{children:"Create Side Room"}),(0,Ve.jsxs)(w$,{children:[l&&(0,Ve.jsx)(HM,{severity:"error",sx:{mb:2},children:l}),(0,Ve.jsx)(xL,{autoFocus:!0,margin:"dense",label:"Room Name",type:"text",fullWidth:!0,value:u.name,onChange:e=>d((t=>({...t,name:e.target.value}))),required:!0,error:!u.name.trim(),helperText:u.name.trim()?"":"Room name is required"}),(0,Ve.jsx)(xL,{margin:"dense",label:"Description",type:"text",fullWidth:!0,multiline:!0,rows:3,value:u.description,onChange:e=>d((t=>({...t,description:e.target.value}))),required:!0,error:!u.description.trim(),helperText:u.description.trim()?"":"Description is required"}),(0,Ve.jsxs)(LD,{fullWidth:!0,margin:"dense",required:!0,error:!u.category,children:[(0,Ve.jsx)(kD,{children:"Category"}),(0,Ve.jsxs)(gL,{value:u.category,onChange:e=>d((t=>({...t,category:e.target.value}))),label:"Category",children:[(0,Ve.jsx)(xI,{value:"general",children:"General"}),(0,Ve.jsx)(xI,{value:"gaming",children:"Gaming"}),(0,Ve.jsx)(xI,{value:"music",children:"Music"}),(0,Ve.jsx)(xI,{value:"movies",children:"Movies & TV"}),(0,Ve.jsx)(xI,{value:"sports",children:"Sports"}),(0,Ve.jsx)(xI,{value:"tech",children:"Technology"}),(0,Ve.jsx)(xI,{value:"art",children:"Art & Design"}),(0,Ve.jsx)(xI,{value:"education",children:"Education"}),(0,Ve.jsx)(xI,{value:"other",children:"Other"})]}),!u.category&&(0,Ve.jsx)(UD,{children:"Category is required"})]}),(0,Ve.jsxs)(Xe,{sx:{mt:2},children:[(0,Ve.jsx)(hS,{variant:"subtitle2",children:"Tags (Optional)"}),(0,Ve.jsx)(Xe,{sx:{display:"flex",gap:1,flexWrap:"wrap",mb:1},children:g.map((e=>(0,Ve.jsx)(eU,{label:e,onDelete:()=>{return t=e,void v(g.filter((e=>e!==t)));var t}},e)))}),(0,Ve.jsxs)(Xe,{sx:{display:"flex",gap:1},children:[(0,Ve.jsx)(xL,{size:"small",value:y,onChange:e=>b(e.target.value),placeholder:"Add tag",onKeyPress:e=>"Enter"===e.key&&R()}),(0,Ve.jsx)(ek,{onClick:R,size:"small",children:(0,Ve.jsx)(CW,{})})]})]}),(0,Ve.jsxs)(Xe,{sx:{mt:2},children:[(0,Ve.jsx)(hS,{variant:"subtitle2",children:"Rules (Optional)"}),(0,Ve.jsx)(Xe,{sx:{display:"flex",gap:1,flexWrap:"wrap",mb:1},children:x.map((e=>(0,Ve.jsx)(eU,{label:e,onDelete:()=>{return t=e,void _(x.filter((e=>e!==t)));var t}},e)))}),(0,Ve.jsxs)(Xe,{sx:{display:"flex",gap:1},children:[(0,Ve.jsx)(xL,{size:"small",value:A,onChange:e=>T(e.target.value),placeholder:"Add rule",onKeyPress:e=>"Enter"===e.key&&D()}),(0,Ve.jsx)(ek,{onClick:D,size:"small",children:(0,Ve.jsx)(CW,{})})]})]}),(0,Ve.jsx)(zW,{control:(0,Ve.jsx)(WV,{checked:u.isPrivate,onChange:e=>d((t=>({...t,isPrivate:e.target.checked})))}),label:"Private Room"}),u.isPrivate&&(0,Ve.jsx)(xL,{margin:"dense",label:"Password",type:"password",fullWidth:!0,value:u.password,onChange:e=>d((t=>({...t,password:e.target.value}))),required:!0,error:!u.password.trim(),helperText:u.password.trim()?"":"Password is required for private rooms"})]}),(0,Ve.jsxs)(WF,{children:[(0,Ve.jsx)(Ak,{onClick:r,children:"Cancel"}),(0,Ve.jsx)(Ak,{onClick:async e=>{if(e.preventDefault(),i&&q_)if(u.name.trim())if(u.description.trim())if(u.category)if(!u.isPrivate||u.password.trim())try{I(!0);const e={name:u.name,description:u.description,ownerId:i.uid,viewers:[{userId:i.uid,username:i.displayName||"Anonymous",avatar:i.photoURL||"",role:"owner",joinedAt:Av()}],viewerCount:1,createdAt:Av(),isPrivate:u.isPrivate,password:u.isPrivate?u.password:"",category:u.category,tags:u.tags,lastActive:Av(),isLive:!1,liveParticipants:[],activeUsers:0},t=await fv(Zm(q_,"sideRooms"),e);await dv(Jm(q_,"users",i.uid,"sideRooms",t.id),{name:u.name,description:u.description,role:"owner",joinedAt:Av(),lastActive:Av()}),wA.success("Room created successfully!"),r(),a(`/side-room/${t.id}`)}catch(l){console.error("Error creating room:",l),wA.error("Failed to create room")}finally{I(!1)}else wA.error("Password is required for private rooms");else wA.error("Category is required");else wA.error("Description is required");else wA.error("Room name is required")},variant:"contained",disabled:C,children:C?"Creating...":"Create Room"})]})]})},qW=["All","Gaming","Music","Art","Technology","Sports","Education","Entertainment","Social","Other"],GW=()=>{const[e,n]=(0,t.useState)([]),[r,i]=(0,t.useState)([]),[a,o]=(0,t.useState)(!0),[s,l]=(0,t.useState)(null),[c,u]=(0,t.useState)(!1),[d,h]=(0,t.useState)(!1),[p,f]=(0,t.useState)(null),[m,g]=(0,t.useState)(""),[v,y]=(0,t.useState)(!1),[b,w]=(0,t.useState)(""),[E,x]=(0,t.useState)("All"),[_,A]=(0,t.useState)("newest"),T=Z(),{currentUser:S}=XA();(0,t.useEffect)((()=>{if(!q_)return l("Firestore not initialized"),void o(!1);try{o(!0);const e=Zm(q_,"sideRooms"),t=mv(Wg(e,Kg("createdAt","desc")),(e=>{const t=e.docs.map((e=>{const t=e.data();return{id:e.id,name:t.name||"",description:t.description,createdAt:t.createdAt,lastActive:t.lastActive,viewerCount:t.viewerCount||0,maxViewers:t.maxViewers||100,viewers:t.viewers,isPrivate:t.isPrivate,password:t.password,genre:t.genre,tags:t.tags,category:t.category}})),r=t.filter((e=>!e.isPrivate));n(r),o(!1),l(null)}),(e=>{console.error("Error fetching side rooms:",e),l("Error fetching rooms. Please check permissions or network."),o(!1)}));return()=>t()}catch(e){console.error("Error setting up side rooms query:",e),l(`Error setting up query: ${e.message}`),o(!1)}}),[q_]),(0,t.useEffect)((()=>{let t=[...e];b&&(t=t.filter((e=>e.name.toLowerCase().includes(b.toLowerCase())||e.description&&e.description.toLowerCase().includes(b.toLowerCase())))),"All"!==E&&(t=t.filter((e=>e.category===E||e.genre===E||e.tags&&e.tags.includes(E)))),t.sort(((e,t)=>{var n,r,i,a;const o=(null===(n=e.createdAt)||void 0===n?void 0:n.toMillis())||0,s=(null===(r=t.createdAt)||void 0===r?void 0:r.toMillis())||0,l=(null===(i=e.lastActive)||void 0===i?void 0:i.toMillis())||0,c=(null===(a=t.lastActive)||void 0===a?void 0:a.toMillis())||0;switch(_){case"newest":return s-o;case"oldest":return o-s;case"members":return(t.viewerCount||0)-(e.viewerCount||0);case"activity":return c-l;default:return 0}})),i(t)}),[e,b,E,_]);return a?(0,Ve.jsx)("div",{children:"Loading..."}):s?(0,Ve.jsxs)("div",{children:["Error: ",s]}):(0,Ve.jsxs)(Xe,{sx:{p:3},children:[(0,Ve.jsxs)(Xe,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[(0,Ve.jsx)(hS,{variant:"h4",component:"h1",children:"Side Rooms \ud83c\udfad"}),(0,Ve.jsx)(Ak,{variant:"contained",color:"primary",startIcon:(0,Ve.jsx)(CW,{}),onClick:()=>u(!0),children:"Create Room"})]}),c&&(0,Ve.jsx)(HW,{open:c,onClose:()=>u(!1)}),(0,Ve.jsx)(CT,{sx:{p:2,mb:3},children:(0,Ve.jsxs)(iN,{container:!0,spacing:2,alignItems:"center",children:[(0,Ve.jsx)(iN,{item:!0,xs:12,md:4,children:(0,Ve.jsx)(xL,{fullWidth:!0,placeholder:"Search rooms by name or genre...",value:b,onChange:e=>w(e.target.value),InputProps:{startAdornment:(0,Ve.jsx)(EN,{position:"start",children:(0,Ve.jsx)(cW,{})})}})}),(0,Ve.jsx)(iN,{item:!0,xs:12,md:3,children:(0,Ve.jsxs)(LD,{fullWidth:!0,children:[(0,Ve.jsx)(kD,{children:"Genre/Category"}),(0,Ve.jsx)(gL,{value:E,label:"Genre/Category",onChange:e=>x(e.target.value),children:qW.map((e=>(0,Ve.jsx)(xI,{value:e,children:e},e)))})]})}),(0,Ve.jsx)(iN,{item:!0,xs:12,md:3,children:(0,Ve.jsxs)(LD,{fullWidth:!0,children:[(0,Ve.jsx)(kD,{children:"Sort by"}),(0,Ve.jsxs)(gL,{value:_,label:"Sort by",onChange:e=>A(e.target.value),children:[(0,Ve.jsx)(xI,{value:"newest",children:"Newest First"}),(0,Ve.jsx)(xI,{value:"oldest",children:"Oldest First"}),(0,Ve.jsx)(xI,{value:"members",children:"Most Members"}),(0,Ve.jsx)(xI,{value:"activity",children:"Most Active"})]})]})})]})}),(0,Ve.jsx)(Xe,{sx:{display:"flex",flexWrap:"wrap",gap:2},children:0===r.length?(0,Ve.jsx)(hS,{variant:"body1",sx:{width:"100%",textAlign:"center",mt:4},children:"No rooms found matching your criteria"}):r.map((e=>{var t;return(0,Ve.jsxs)(Q$,{sx:{width:300,display:"flex",flexDirection:"column"},children:[(0,Ve.jsxs)(lV,{sx:{flexGrow:1},children:[(0,Ve.jsxs)(Xe,{sx:{display:"flex",alignItems:"center",gap:1,mb:2},children:[(0,Ve.jsx)(hS,{variant:"h6",component:"div",sx:{flexGrow:1},children:e.name}),e.isPrivate&&(0,Ve.jsx)(kW,{title:"Private Room",children:(0,Ve.jsx)(xV,{fontSize:"small"})})]}),(0,Ve.jsx)(hS,{variant:"body2",color:"text.secondary",sx:{mb:2},children:e.description}),(0,Ve.jsxs)(Xe,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[(e.category||e.genre)&&(0,Ve.jsx)(eU,{size:"small",label:e.category||e.genre,color:"secondary",variant:"outlined"}),null===(t=e.tags)||void 0===t?void 0:t.map((e=>(0,Ve.jsx)(eU,{size:"small",label:e,variant:"outlined"},e)))]}),(0,Ve.jsx)(eU,{size:"small",icon:(0,Ve.jsx)(TV,{}),label:`${e.viewerCount||0} viewers`,variant:"outlined"})]}),(0,Ve.jsx)(pV,{children:(0,Ve.jsx)(Ak,{fullWidth:!0,variant:"contained",onClick:()=>(async e=>{if(q_&&S)if(e.isPrivate)f(e),h(!0);else try{y(!0);const t=Jm(q_,"sideRooms",e.id);await _v(q_,(async e=>{const n=await e.get(t);if(!n.exists())throw new Error("Room not found");if((n.data().viewers||[]).some((e=>e.userId===S.uid)))e.update(t,{activeUsers:kv(1),lastActive:Av()});else{const n={userId:S.uid,username:S.displayName||"Anonymous",avatar:S.photoURL||"",role:"viewer",joinedAt:new Date};e.update(t,{viewers:Tv(n),viewerCount:kv(1),activeUsers:kv(1),lastActive:Av()})}})),wA.success("Joined room successfully"),T(`/side-room/${e.id}`)}catch(s){console.error("Error joining room:",s),s instanceof Error?wA.error(s.message):wA.error("Failed to join room")}finally{y(!1)}else wA.error("Not authenticated")})(e),disabled:v||e.viewerCount>=e.maxViewers,sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:v?(0,Ve.jsx)(jL,{size:24}):e.viewerCount>=e.maxViewers?"Room Full":"Join Room"})})]},e.id)}))}),(0,Ve.jsxs)(bR,{open:d,onClose:()=>!v&&h(!1),children:[(0,Ve.jsx)(N$,{children:"Enter Room Password"}),(0,Ve.jsx)(w$,{children:(0,Ve.jsx)(xL,{autoFocus:!0,margin:"dense",label:"Password",type:"password",fullWidth:!0,value:m,onChange:e=>g(e.target.value),disabled:v})}),(0,Ve.jsxs)(WF,{children:[(0,Ve.jsx)(Ak,{onClick:()=>h(!1),disabled:v,children:"Cancel"}),(0,Ve.jsx)(Ak,{onClick:async()=>{if(p&&q_&&S)if(m===p.password)try{y(!0);const e=Jm(q_,"sideRooms",p.id);await _v(q_,(async t=>{const n=await t.get(e);if(!n.exists())throw new Error("Room not found");(n.data().viewers||[]).some((e=>e.userId===S.uid))?t.update(e,{activeUsers:kv(1),lastActive:Av()}):t.update(e,{viewers:Tv({userId:S.uid,username:S.displayName||"Anonymous",avatar:S.photoURL||"",role:"member",joinedAt:new Date}),viewerCount:kv(1),activeUsers:kv(1),lastActive:Av()})})),wA.success("Joined room successfully"),h(!1),g(""),f(null),T(`/side-room/${p.id}`)}catch(s){console.error("Error joining room:",s),wA.error("Failed to join room")}finally{y(!1)}else wA.error("Incorrect password")},variant:"contained",disabled:v||!m,children:v?(0,Ve.jsx)(jL,{size:24}):"Join"})]})]})]})},KW=(0,BT.A)((0,Ve.jsx)("path",{d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92"}),"Share"),YW=(0,BT.A)((0,Ve.jsx)("path",{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2M6 9h12v2H6zm8 5H6v-2h8zm4-6H6V6h12z"}),"Chat"),QW=(0,BT.A)((0,Ve.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"}),"MoreVert"),XW=(0,BT.A)((0,Ve.jsx)("path",{d:"m21 6.5-4 4V7c0-.55-.45-1-1-1H9.82L21 17.18zM3.27 2 2 3.27 4.73 6H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.21 0 .39-.08.54-.18L19.73 21 21 19.73z"}),"VideocamOff"),ZW=(0,BT.A)((0,Ve.jsx)("path",{d:"M21 6h-7.59l3.29-3.29L16 2l-4 4-4-4-.71.71L10.59 6H3c-1.1 0-2 .89-2 2v12c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V8c0-1.11-.9-2-2-2m0 14H3V8h18zM9 10v8l7-4z"}),"LiveTv"),JW=(0,BT.A)((0,Ve.jsx)("path",{d:"M6 6h12v12H6z"}),"Stop"),ez=(0,BT.A)((0,Ve.jsx)("circle",{cx:"12",cy:"12",r:"8"}),"FiberManualRecord"),tz=(0,BT.A)((0,Ve.jsx)("path",{d:"M16 1H8C6.34 1 5 2.34 5 4v16c0 1.66 1.34 3 3 3h8c1.66 0 3-1.34 3-3V4c0-1.66-1.34-3-3-3m-2 20h-4v-1h4zm3.25-3H6.75V4h10.5z"}),"PhoneAndroid"),nz=(0,BT.A)((0,Ve.jsx)("path",{d:"M2.01 21 23 12 2.01 3 2 10l15 2-15 2z"}),"Send"),rz=((0,BT.A)((0,Ve.jsx)("path",{d:"M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11z"}),"Videocam"),(0,BT.A)((0,Ve.jsx)("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"}),"ContentCopy")),iz={MEDIA_PLAY_REQUEST:"mediaplayrequest",MEDIA_PAUSE_REQUEST:"mediapauserequest",MEDIA_MUTE_REQUEST:"mediamuterequest",MEDIA_UNMUTE_REQUEST:"mediaunmuterequest",MEDIA_VOLUME_REQUEST:"mediavolumerequest",MEDIA_SEEK_REQUEST:"mediaseekrequest",MEDIA_AIRPLAY_REQUEST:"mediaairplayrequest",MEDIA_ENTER_FULLSCREEN_REQUEST:"mediaenterfullscreenrequest",MEDIA_EXIT_FULLSCREEN_REQUEST:"mediaexitfullscreenrequest",MEDIA_PREVIEW_REQUEST:"mediapreviewrequest",MEDIA_ENTER_PIP_REQUEST:"mediaenterpiprequest",MEDIA_EXIT_PIP_REQUEST:"mediaexitpiprequest",MEDIA_ENTER_CAST_REQUEST:"mediaentercastrequest",MEDIA_EXIT_CAST_REQUEST:"mediaexitcastrequest",MEDIA_SHOW_TEXT_TRACKS_REQUEST:"mediashowtexttracksrequest",MEDIA_HIDE_TEXT_TRACKS_REQUEST:"mediahidetexttracksrequest",MEDIA_SHOW_SUBTITLES_REQUEST:"mediashowsubtitlesrequest",MEDIA_DISABLE_SUBTITLES_REQUEST:"mediadisablesubtitlesrequest",MEDIA_TOGGLE_SUBTITLES_REQUEST:"mediatogglesubtitlesrequest",MEDIA_PLAYBACK_RATE_REQUEST:"mediaplaybackraterequest",MEDIA_RENDITION_REQUEST:"mediarenditionrequest",MEDIA_AUDIO_TRACK_REQUEST:"mediaaudiotrackrequest",MEDIA_SEEK_TO_LIVE_REQUEST:"mediaseektoliverequest",REGISTER_MEDIA_STATE_RECEIVER:"registermediastatereceiver",UNREGISTER_MEDIA_STATE_RECEIVER:"unregistermediastatereceiver"},az={MEDIA_CHROME_ATTRIBUTES:"mediachromeattributes",MEDIA_CONTROLLER:"mediacontroller"},oz={MEDIA_AIRPLAY_UNAVAILABLE:"mediaAirplayUnavailable",MEDIA_AUDIO_TRACK_ENABLED:"mediaAudioTrackEnabled",MEDIA_AUDIO_TRACK_LIST:"mediaAudioTrackList",MEDIA_AUDIO_TRACK_UNAVAILABLE:"mediaAudioTrackUnavailable",MEDIA_BUFFERED:"mediaBuffered",MEDIA_CAST_UNAVAILABLE:"mediaCastUnavailable",MEDIA_CHAPTERS_CUES:"mediaChaptersCues",MEDIA_CURRENT_TIME:"mediaCurrentTime",MEDIA_DURATION:"mediaDuration",MEDIA_ENDED:"mediaEnded",MEDIA_ERROR:"mediaError",MEDIA_ERROR_CODE:"mediaErrorCode",MEDIA_ERROR_MESSAGE:"mediaErrorMessage",MEDIA_FULLSCREEN_UNAVAILABLE:"mediaFullscreenUnavailable",MEDIA_HAS_PLAYED:"mediaHasPlayed",MEDIA_HEIGHT:"mediaHeight",MEDIA_IS_AIRPLAYING:"mediaIsAirplaying",MEDIA_IS_CASTING:"mediaIsCasting",MEDIA_IS_FULLSCREEN:"mediaIsFullscreen",MEDIA_IS_PIP:"mediaIsPip",MEDIA_LOADING:"mediaLoading",MEDIA_MUTED:"mediaMuted",MEDIA_PAUSED:"mediaPaused",MEDIA_PIP_UNAVAILABLE:"mediaPipUnavailable",MEDIA_PLAYBACK_RATE:"mediaPlaybackRate",MEDIA_PREVIEW_CHAPTER:"mediaPreviewChapter",MEDIA_PREVIEW_COORDS:"mediaPreviewCoords",MEDIA_PREVIEW_IMAGE:"mediaPreviewImage",MEDIA_PREVIEW_TIME:"mediaPreviewTime",MEDIA_RENDITION_LIST:"mediaRenditionList",MEDIA_RENDITION_SELECTED:"mediaRenditionSelected",MEDIA_RENDITION_UNAVAILABLE:"mediaRenditionUnavailable",MEDIA_SEEKABLE:"mediaSeekable",MEDIA_STREAM_TYPE:"mediaStreamType",MEDIA_SUBTITLES_LIST:"mediaSubtitlesList",MEDIA_SUBTITLES_SHOWING:"mediaSubtitlesShowing",MEDIA_TARGET_LIVE_WINDOW:"mediaTargetLiveWindow",MEDIA_TIME_IS_LIVE:"mediaTimeIsLive",MEDIA_VOLUME:"mediaVolume",MEDIA_VOLUME_LEVEL:"mediaVolumeLevel",MEDIA_VOLUME_UNAVAILABLE:"mediaVolumeUnavailable",MEDIA_WIDTH:"mediaWidth"},sz=Object.entries(oz),lz=sz.reduce(((e,t)=>{let[n,r]=t;return e[n]=r.toLowerCase(),e}),{}),cz=sz.reduce(((e,t)=>{let[n,r]=t;return e[n]=r.toLowerCase(),e}),{USER_INACTIVE_CHANGE:"userinactivechange",BREAKPOINTS_CHANGE:"breakpointchange",BREAKPOINTS_COMPUTED:"breakpointscomputed"}),uz=(Object.entries(cz).reduce(((e,t)=>{let[n,r]=t;const i=lz[n];return i&&(e[r]=i),e}),{userinactivechange:"userinactive"}),Object.entries(lz).reduce(((e,t)=>{let[n,r]=t;const i=cz[n];return i&&(e[r]=i),e}),{userinactive:"userinactivechange"})),dz={SUBTITLES:"subtitles",CAPTIONS:"captions",DESCRIPTIONS:"descriptions",CHAPTERS:"chapters",METADATA:"metadata"},hz="disabled",pz="showing",fz="mouse",mz="touch",gz="unavailable",vz="unsupported",yz={LIVE:"live",ON_DEMAND:"on-demand",UNKNOWN:"unknown"},bz="fullscreen";function wz(e){if(e){const{id:t,width:n,height:r}=e;return[t,n,r].filter((e=>null!=e)).join(":")}}function Ez(e){if(e){const[t,n,r]=e.split(":");return{id:t,width:+n,height:+r}}}function xz(e){if(e){const{id:t,kind:n,language:r,label:i}=e;return[t,n,r,i].filter((e=>null!=e)).join(":")}}function _z(e){if(e){const[t,n,r,i]=e.split(":");return{id:t,kind:n,language:r,label:i}}}function Az(e){return e.replace(/[-_]([a-z])/g,((e,t)=>t.toUpperCase()))}function Tz(e){return"number"===typeof e&&!Number.isNaN(e)&&Number.isFinite(e)}function Sz(e){return"string"==typeof e&&(!isNaN(e)&&!isNaN(parseFloat(e)))}const kz=e=>new Promise((t=>setTimeout(t,e))),Cz=[{singular:"hour",plural:"hours"},{singular:"minute",plural:"minutes"},{singular:"second",plural:"seconds"}],Iz=e=>{if(!Tz(e))return"";const t=Math.abs(e),n=t!==e,r=new Date(0,0,0,0,0,t,0),i=[r.getHours(),r.getMinutes(),r.getSeconds()].map(((e,t)=>e&&((e,t)=>`${e} ${1===e?Cz[t].singular:Cz[t].plural}`)(e,t))).filter((e=>e)).join(", ");return`${i}${n?" remaining":""}`};function Rz(e,t){let n=!1;e<0&&(n=!0,e=0-e),e=e<0?0:e;let r=Math.floor(e%60),i=Math.floor(e/60%60),a=Math.floor(e/3600);const o=Math.floor(t/60%60),s=Math.floor(t/3600);return(isNaN(e)||e===1/0)&&(a=i=r="0"),a=a>0||s>0?a+":":"",i=((a||o>=10)&&i<10?"0"+i:i)+":",r=r<10?"0"+r:r,(n?"-":"")+a+i+r}Object.freeze({length:0,start(e){const t=e>>>0;if(t>=this.length)throw new DOMException(`Failed to execute 'start' on 'TimeRanges': The index provided (${t}) is greater than or equal to the maximum bound (${this.length}).`);return 0},end(e){const t=e>>>0;if(t>=this.length)throw new DOMException(`Failed to execute 'end' on 'TimeRanges': The index provided (${t}) is greater than or equal to the maximum bound (${this.length}).`);return 0}});const Dz={"Start airplay":"Start airplay","Stop airplay":"Stop airplay",Audio:"Audio",Captions:"Captions","Enable captions":"Enable captions","Disable captions":"Disable captions","Start casting":"Start casting","Stop casting":"Stop casting","Enter fullscreen mode":"Enter fullscreen mode","Exit fullscreen mode":"Exit fullscreen mode",Mute:"Mute",Unmute:"Unmute","Enter picture in picture mode":"Enter picture in picture mode","Exit picture in picture mode":"Exit picture in picture mode",Play:"Play",Pause:"Pause","Playback rate":"Playback rate","Playback rate {playbackRate}":"Playback rate {playbackRate}",Quality:"Quality","Seek backward":"Seek backward","Seek forward":"Seek forward",Settings:"Settings","audio player":"audio player","video player":"video player",volume:"volume",seek:"seek","closed captions":"closed captions","current playback rate":"current playback rate","playback time":"playback time","media loading":"media loading",settings:"settings","audio tracks":"audio tracks",quality:"quality",play:"play",pause:"pause",mute:"mute",unmute:"unmute",live:"live","start airplay":"start airplay","stop airplay":"stop airplay","start casting":"start casting","stop casting":"stop casting","enter fullscreen mode":"enter fullscreen mode","exit fullscreen mode":"exit fullscreen mode","enter picture in picture mode":"enter picture in picture mode","exit picture in picture mode":"exit picture in picture mode","seek to live":"seek to live","playing live":"playing live","seek back {seekOffset} seconds":"seek back {seekOffset} seconds","seek forward {seekOffset} seconds":"seek forward {seekOffset} seconds","Network Error":"Network Error","Decode Error":"Decode Error","Source Not Supported":"Source Not Supported","Encryption Error":"Encryption Error","A network error caused the media download to fail.":"A network error caused the media download to fail.","A media error caused playback to be aborted. The media could be corrupt or your browser does not support this format.":"A media error caused playback to be aborted. The media could be corrupt or your browser does not support this format.","An unsupported error occurred. The server or network failed, or your browser does not support this format.":"An unsupported error occurred. The server or network failed, or your browser does not support this format.","The media is encrypted and there are no keys to decrypt it.":"The media is encrypted and there are no keys to decrypt it."};var Lz;const Pz={en:Dz};let Mz=(null==(Lz=globalThis.navigator)?void 0:Lz.language.split("-")[0])||"en";const Nz=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;return((null==(n=Pz[Mz])?void 0:n[e])||Dz[e]).replace(/\{(\w+)\}/g,((e,n)=>void 0!==t[n]?String(t[n]):`{${n}}`))};class Oz{addEventListener(){}removeEventListener(){}dispatchEvent(){return!0}}class jz extends Oz{}class Fz extends jz{constructor(){super(...arguments),this.role=null}}const Uz={createElement:function(){return new Bz.HTMLElement},createElementNS:function(){return new Bz.HTMLElement},addEventListener(){},removeEventListener(){},dispatchEvent:e=>!1},Bz={ResizeObserver:class{observe(){}unobserve(){}disconnect(){}},document:Uz,Node:jz,Element:Fz,HTMLElement:class extends Fz{constructor(){super(...arguments),this.innerHTML=""}get content(){return new Bz.DocumentFragment}},DocumentFragment:class extends Oz{},customElements:{get:function(){},define:function(){},whenDefined:function(){}},localStorage:{getItem:e=>null,setItem(e,t){},removeItem(e){}},CustomEvent:function(){},getComputedStyle:function(){},navigator:{languages:[],get userAgent(){return""}},matchMedia:e=>({matches:!1,media:e})},$z="undefined"===typeof window||"undefined"===typeof window.customElements,Vz=Object.keys(Bz).every((e=>e in globalThis)),Wz=$z&&!Vz?Bz:globalThis,zz=$z&&!Vz?Uz:globalThis.document,Hz=new WeakMap,qz=e=>{let t=Hz.get(e);return t||Hz.set(e,t=new Set),t},Gz=new Wz.ResizeObserver((e=>{for(const t of e)for(const e of qz(t.target))e(t)}));function Kz(e,t){qz(e).add(t),Gz.observe(e)}function Yz(e,t){const n=qz(e);n.delete(t),n.size||Gz.unobserve(e)}function Qz(e){var t;return null!=(t=Xz(e))?t:tH(e,"media-controller")}function Xz(e){var t;const{MEDIA_CONTROLLER:n}=az,r=e.getAttribute(n);if(r)return null==(t=rH(e))?void 0:t.getElementById(r)}const Zz=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".value";const r=e.querySelector(n);r&&(r.textContent=t)},Jz=(e,t)=>((e,t)=>{const n=`slot[name="${t}"]`,r=e.shadowRoot.querySelector(n);return r?r.children:[]})(e,t)[0],eH=(e,t)=>!(!e||!t)&&(!!(null==e?void 0:e.contains(t))||eH(e,t.getRootNode().host)),tH=(e,t)=>{if(!e)return null;const n=e.closest(t);return n||tH(e.getRootNode().host,t)};function nH(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;var t;const n=null==e?void 0:e.activeElement;return n?null!=(t=nH(n.shadowRoot))?t:n:null}function rH(e){var t;const n=null==(t=null==e?void 0:e.getRootNode)?void 0:t.call(e);return n instanceof ShadowRoot||n instanceof Document?n:null}function iH(e){let{depth:t=3,checkOpacity:n=!0,checkVisibilityCSS:r=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e.checkVisibility)return e.checkVisibility({checkOpacity:n,checkVisibilityCSS:r});let i=e;for(;i&&t>0;){const e=getComputedStyle(i);if(n&&"0"===e.opacity||r&&"hidden"===e.visibility||"none"===e.display)return!1;i=i.parentElement,t--}return!0}function aH(e,t){const n=function(e,t){var n,r;let i;for(i of null!=(n=e.querySelectorAll("style:not([media])"))?n:[]){let e;try{e=null==(r=i.sheet)?void 0:r.cssRules}catch{continue}for(const n of null!=e?e:[])if(t(n.selectorText))return n}}(e,(e=>e===t));return n||oH(e,t)}function oH(e,t){var n,r;const i=null!=(n=e.querySelectorAll("style:not([media])"))?n:[],a=null==i?void 0:i[i.length-1];return(null==a?void 0:a.sheet)?(null==a||a.sheet.insertRule(`${t}{}`,a.sheet.cssRules.length),null==(r=a.sheet.cssRules)?void 0:r[a.sheet.cssRules.length-1]):(console.warn("Media Chrome: No style sheet found on style tag of",e),{style:{setProperty:()=>{},removeProperty:()=>"",getPropertyValue:()=>""}})}function sH(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.NaN;const r=e.getAttribute(t);return null!=r?+r:n}function lH(e,t,n){const r=+n;null==n||Number.isNaN(r)?e.hasAttribute(t)&&e.removeAttribute(t):sH(e,t,void 0)!==r&&e.setAttribute(t,`${r}`)}function cH(e,t){return e.hasAttribute(t)}function uH(e,t,n){null!=n?cH(e,t)!=n&&e.toggleAttribute(t,n):e.hasAttribute(t)&&e.removeAttribute(t)}function dH(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;var r;return null!=(r=e.getAttribute(t))?r:n}function hH(e,t,n){if(null==n)return void(e.hasAttribute(t)&&e.removeAttribute(t));const r=`${n}`;dH(e,t,void 0)!==r&&e.setAttribute(t,r)}var pH,fH=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},mH=(e,t,n)=>(fH(e,t,"read from private field"),n?n.call(e):t.get(e)),gH=(e,t,n,r)=>(fH(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n);const vH=zz.createElement("template");vH.innerHTML="\n<style>\n  :host {\n    display: var(--media-control-display, var(--media-gesture-receiver-display, inline-block));\n    box-sizing: border-box;\n  }\n</style>\n";class yH extends Wz.HTMLElement{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(super(),((e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)})(this,pH,void 0),!this.shadowRoot){const t=this.attachShadow({mode:"open"}),n=vH.content.cloneNode(!0);this.nativeEl=n;let r=e.slotTemplate;r||(r=zz.createElement("template"),r.innerHTML=`<slot>${e.defaultContent||""}</slot>`),this.nativeEl.appendChild(r.content.cloneNode(!0)),t.appendChild(n)}}static get observedAttributes(){return[az.MEDIA_CONTROLLER,lz.MEDIA_PAUSED]}attributeChangedCallback(e,t,n){var r,i,a,o,s;e===az.MEDIA_CONTROLLER&&(t&&(null==(i=null==(r=mH(this,pH))?void 0:r.unassociateElement)||i.call(r,this),gH(this,pH,null)),n&&this.isConnected&&(gH(this,pH,null==(a=this.getRootNode())?void 0:a.getElementById(n)),null==(s=null==(o=mH(this,pH))?void 0:o.associateElement)||s.call(o,this)))}connectedCallback(){var e,t,n,r;this.tabIndex=-1,this.setAttribute("aria-hidden","true"),gH(this,pH,function(e){var t;const n=e.getAttribute(az.MEDIA_CONTROLLER);if(n)return null==(t=e.getRootNode())?void 0:t.getElementById(n);return tH(e,"media-controller")}(this)),this.getAttribute(az.MEDIA_CONTROLLER)&&(null==(t=null==(e=mH(this,pH))?void 0:e.associateElement)||t.call(e,this)),null==(n=mH(this,pH))||n.addEventListener("pointerdown",this),null==(r=mH(this,pH))||r.addEventListener("click",this)}disconnectedCallback(){var e,t,n,r;this.getAttribute(az.MEDIA_CONTROLLER)&&(null==(t=null==(e=mH(this,pH))?void 0:e.unassociateElement)||t.call(e,this)),null==(n=mH(this,pH))||n.removeEventListener("pointerdown",this),null==(r=mH(this,pH))||r.removeEventListener("click",this),gH(this,pH,null)}handleEvent(e){var t;const n=null==(t=e.composedPath())?void 0:t[0];if(["video","media-controller"].includes(null==n?void 0:n.localName))if("pointerdown"===e.type)this._pointerType=e.pointerType;else if("click"===e.type){const{clientX:t,clientY:n}=e,{left:r,top:i,width:a,height:o}=this.getBoundingClientRect(),s=t-r,l=n-i;if(s<0||l<0||s>a||l>o||0===a&&0===o)return;const{pointerType:c=this._pointerType}=e;if(this._pointerType=void 0,c===mz)return void this.handleTap(e);if(c===fz)return void this.handleMouseClick(e)}}get mediaPaused(){return cH(this,lz.MEDIA_PAUSED)}set mediaPaused(e){uH(this,lz.MEDIA_PAUSED,e)}handleTap(e){}handleMouseClick(e){const t=this.mediaPaused?iz.MEDIA_PLAY_REQUEST:iz.MEDIA_PAUSE_REQUEST;this.dispatchEvent(new Wz.CustomEvent(t,{composed:!0,bubbles:!0}))}}pH=new WeakMap,Wz.customElements.get("media-gesture-receiver")||Wz.customElements.define("media-gesture-receiver",yH);var bH,wH,EH,xH,_H,AH,TH,SH,kH,CH,IH,RH,DH,LH,PH,MH,NH,OH,jH,FH=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},UH=(e,t,n)=>(FH(e,t,"read from private field"),n?n.call(e):t.get(e)),BH=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},$H=(e,t,n,r)=>(FH(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),VH=(e,t,n)=>(FH(e,t,"access private method"),n);const WH={AUDIO:"audio",AUTOHIDE:"autohide",BREAKPOINTS:"breakpoints",GESTURES_DISABLED:"gesturesdisabled",KEYBOARD_CONTROL:"keyboardcontrol",NO_AUTOHIDE:"noautohide",USER_INACTIVE:"userinactive",AUTOHIDE_OVER_CONTROLS:"autohideovercontrols"},zH=zz.createElement("template");zH.innerHTML=`\n  <style>\n    \n    :host([${lz.MEDIA_IS_FULLSCREEN}]) ::slotted([slot=media]) {\n      outline: none;\n    }\n\n    :host {\n      box-sizing: border-box;\n      position: relative;\n      display: inline-block;\n      line-height: 0;\n      background-color: var(--media-background-color, #000);\n    }\n\n    :host(:not([${WH.AUDIO}])) [part~=layer]:not([part~=media-layer]) {\n      position: absolute;\n      top: 0;\n      left: 0;\n      bottom: 0;\n      right: 0;\n      display: flex;\n      flex-flow: column nowrap;\n      align-items: start;\n      pointer-events: none;\n      background: none;\n    }\n\n    slot[name=media] {\n      display: var(--media-slot-display, contents);\n    }\n\n    \n    :host([${WH.AUDIO}]) slot[name=media] {\n      display: var(--media-slot-display, none);\n    }\n\n    \n    :host([${WH.AUDIO}]) [part~=layer][part~=gesture-layer] {\n      height: 0;\n      display: block;\n    }\n\n    \n    :host(:not([${WH.AUDIO}])[${WH.GESTURES_DISABLED}]) ::slotted([slot=gestures-chrome]),\n    :host(:not([${WH.AUDIO}])[${WH.GESTURES_DISABLED}]) media-gesture-receiver[slot=gestures-chrome] {\n      display: none;\n    }\n\n    \n    ::slotted(:not([slot=media]):not([slot=poster]):not(media-loading-indicator):not([role=dialog]):not([hidden])) {\n      pointer-events: auto;\n    }\n\n    :host(:not([${WH.AUDIO}])) *[part~=layer][part~=centered-layer] {\n      align-items: center;\n      justify-content: center;\n    }\n\n    :host(:not([${WH.AUDIO}])) ::slotted(media-gesture-receiver[slot=gestures-chrome]),\n    :host(:not([${WH.AUDIO}])) media-gesture-receiver[slot=gestures-chrome] {\n      align-self: stretch;\n      flex-grow: 1;\n    }\n\n    slot[name=middle-chrome] {\n      display: inline;\n      flex-grow: 1;\n      pointer-events: none;\n      background: none;\n    }\n\n    \n    ::slotted([slot=media]),\n    ::slotted([slot=poster]) {\n      width: 100%;\n      height: 100%;\n    }\n\n    \n    :host(:not([${WH.AUDIO}])) .spacer {\n      flex-grow: 1;\n    }\n\n    \n    :host(:-webkit-full-screen) {\n      \n      width: 100% !important;\n      height: 100% !important;\n    }\n\n    \n    ::slotted(:not([slot=media]):not([slot=poster]):not([${WH.NO_AUTOHIDE}]):not([hidden]):not([role=dialog])) {\n      opacity: 1;\n      transition: var(--media-control-transition-in, opacity 0.25s);\n    }\n\n    \n    :host([${WH.USER_INACTIVE}]:not([${lz.MEDIA_PAUSED}]):not([${lz.MEDIA_IS_AIRPLAYING}]):not([${lz.MEDIA_IS_CASTING}]):not([${WH.AUDIO}])) ::slotted(:not([slot=media]):not([slot=poster]):not([${WH.NO_AUTOHIDE}]):not([role=dialog])) {\n      opacity: 0;\n      transition: var(--media-control-transition-out, opacity 1s);\n    }\n\n    :host([${WH.USER_INACTIVE}]:not([${WH.NO_AUTOHIDE}]):not([${lz.MEDIA_PAUSED}]):not([${lz.MEDIA_IS_CASTING}]):not([${WH.AUDIO}])) ::slotted([slot=media]) {\n      cursor: none;\n    }\n\n    :host([${WH.USER_INACTIVE}][${WH.AUTOHIDE_OVER_CONTROLS}]:not([${WH.NO_AUTOHIDE}]):not([${lz.MEDIA_PAUSED}]):not([${lz.MEDIA_IS_CASTING}]):not([${WH.AUDIO}])) * {\n     --media-cursor: none;\n     cursor: none;\n    }\n\n\n    ::slotted(media-control-bar)  {\n      align-self: stretch;\n    }\n\n    \n    :host(:not([${WH.AUDIO}])[${lz.MEDIA_HAS_PLAYED}]) slot[name=poster] {\n      display: none;\n    }\n\n    ::slotted([role=dialog]) {\n      width: 100%;\n      height: 100%;\n      align-self: center;\n    }\n\n    ::slotted([role=menu]) {\n      align-self: end;\n    }\n  </style>\n\n  <slot name="media" part="layer media-layer"></slot>\n  <slot name="poster" part="layer poster-layer"></slot>\n  <slot name="gestures-chrome" part="layer gesture-layer">\n    <media-gesture-receiver slot="gestures-chrome"></media-gesture-receiver>\n  </slot>\n  <span part="layer vertical-layer">\n    <slot name="top-chrome" part="top chrome"></slot>\n    <slot name="middle-chrome" part="middle chrome"></slot>\n    <slot name="centered-chrome" part="layer centered-layer center centered chrome"></slot>\n    \n    <slot part="bottom chrome"></slot>\n  </span>\n  <slot name="dialog" part="layer dialog-layer"></slot>\n`;const HH=Object.values(lz);function qH(e,t){var n;if(!e.isConnected)return;const r=function(e){const t=e.split(/\s+/);return Object.fromEntries(t.map((e=>e.split(":"))))}(null!=(n=e.getAttribute(WH.BREAKPOINTS))?n:"sm:384 md:576 lg:768 xl:960"),i=function(e,t){return Object.keys(e).filter((n=>t>=parseInt(e[n])))}(r,t);let a=!1;if(Object.keys(r).forEach((t=>{i.includes(t)?e.hasAttribute(`breakpoint${t}`)||(e.setAttribute(`breakpoint${t}`,""),a=!0):e.hasAttribute(`breakpoint${t}`)&&(e.removeAttribute(`breakpoint${t}`),a=!0)})),a){const t=new CustomEvent(cz.BREAKPOINTS_CHANGE,{detail:i});e.dispatchEvent(t)}e.breakpointsComputed||(e.breakpointsComputed=!0,e.dispatchEvent(new CustomEvent(cz.BREAKPOINTS_COMPUTED,{bubbles:!0,composed:!0})))}class GH extends Wz.HTMLElement{constructor(){super(),BH(this,AH),BH(this,CH),BH(this,RH),BH(this,LH),BH(this,MH),BH(this,OH),BH(this,bH,0),BH(this,wH,null),BH(this,EH,null),BH(this,xH,void 0),this.breakpointsComputed=!1,BH(this,_H,new MutationObserver(VH(this,AH,TH).bind(this))),BH(this,SH,!1),BH(this,kH,(e=>{UH(this,SH)||(setTimeout((()=>{!function(e){qH(e.target,e.contentRect.width)}(e),$H(this,SH,!1)}),0),$H(this,SH,!0))})),this.shadowRoot||(this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(zH.content.cloneNode(!0)));const e=this.querySelector(":scope > slot[slot=media]");e&&e.addEventListener("slotchange",(()=>{e.assignedElements({flatten:!0}).length?this.handleMediaUpdated(this.media):UH(this,wH)&&this.mediaUnsetCallback(UH(this,wH))}))}static get observedAttributes(){return[WH.AUTOHIDE,WH.GESTURES_DISABLED].concat(HH).filter((e=>![lz.MEDIA_RENDITION_LIST,lz.MEDIA_AUDIO_TRACK_LIST,lz.MEDIA_CHAPTERS_CUES,lz.MEDIA_WIDTH,lz.MEDIA_HEIGHT,lz.MEDIA_ERROR,lz.MEDIA_ERROR_MESSAGE].includes(e)))}attributeChangedCallback(e,t,n){e.toLowerCase()==WH.AUTOHIDE&&(this.autohide=n)}get media(){let e=this.querySelector(":scope > [slot=media]");return"SLOT"==(null==e?void 0:e.nodeName)&&(e=e.assignedElements({flatten:!0})[0]),e}async handleMediaUpdated(e){e&&($H(this,wH,e),e.localName.includes("-")&&await Wz.customElements.whenDefined(e.localName),this.mediaSetCallback(e))}connectedCallback(){var e;UH(this,_H).observe(this,{childList:!0,subtree:!0}),Kz(this,UH(this,kH));const t=null!=this.getAttribute(WH.AUDIO),n=Nz(t?"audio player":"video player");this.setAttribute("role","region"),this.setAttribute("aria-label",n),this.handleMediaUpdated(this.media),this.setAttribute(WH.USER_INACTIVE,""),qH(this,this.getBoundingClientRect().width),this.addEventListener("pointerdown",this),this.addEventListener("pointermove",this),this.addEventListener("pointerup",this),this.addEventListener("mouseleave",this),this.addEventListener("keyup",this),null==(e=Wz.window)||e.addEventListener("mouseup",this)}disconnectedCallback(){var e;UH(this,_H).disconnect(),Yz(this,UH(this,kH)),this.media&&this.mediaUnsetCallback(this.media),null==(e=Wz.window)||e.removeEventListener("mouseup",this)}mediaSetCallback(e){}mediaUnsetCallback(e){$H(this,wH,null)}handleEvent(e){switch(e.type){case"pointerdown":$H(this,bH,e.timeStamp);break;case"pointermove":VH(this,CH,IH).call(this,e);break;case"pointerup":VH(this,RH,DH).call(this,e);break;case"mouseleave":VH(this,LH,PH).call(this);break;case"mouseup":this.removeAttribute(WH.KEYBOARD_CONTROL);break;case"keyup":VH(this,OH,jH).call(this),this.setAttribute(WH.KEYBOARD_CONTROL,"")}}set autohide(e){const t=Number(e);$H(this,xH,isNaN(t)?0:t)}get autohide(){return(void 0===UH(this,xH)?2:UH(this,xH)).toString()}get breakpoints(){return dH(this,WH.BREAKPOINTS)}set breakpoints(e){hH(this,WH.BREAKPOINTS,e)}get audio(){return cH(this,WH.AUDIO)}set audio(e){uH(this,WH.AUDIO,e)}get gesturesDisabled(){return cH(this,WH.GESTURES_DISABLED)}set gesturesDisabled(e){uH(this,WH.GESTURES_DISABLED,e)}get keyboardControl(){return cH(this,WH.KEYBOARD_CONTROL)}set keyboardControl(e){uH(this,WH.KEYBOARD_CONTROL,e)}get noAutohide(){return cH(this,WH.NO_AUTOHIDE)}set noAutohide(e){uH(this,WH.NO_AUTOHIDE,e)}get autohideOverControls(){return cH(this,WH.AUTOHIDE_OVER_CONTROLS)}set autohideOverControls(e){uH(this,WH.AUTOHIDE_OVER_CONTROLS,e)}get userInteractive(){return cH(this,WH.USER_INACTIVE)}set userInteractive(e){uH(this,WH.USER_INACTIVE,e)}}bH=new WeakMap,wH=new WeakMap,EH=new WeakMap,xH=new WeakMap,_H=new WeakMap,AH=new WeakSet,TH=function(e){const t=this.media;for(const n of e){if("childList"!==n.type)continue;const e=n.removedNodes;for(const r of e){if("media"!=r.slot||n.target!=this)continue;let e=n.previousSibling&&n.previousSibling.previousElementSibling;if(e&&t){let t="media"!==e.slot;for(;null!==(e=e.previousSibling);)"media"==e.slot&&(t=!1);t&&this.mediaUnsetCallback(r)}else this.mediaUnsetCallback(r)}if(t)for(const r of n.addedNodes)r===t&&this.handleMediaUpdated(t)}},SH=new WeakMap,kH=new WeakMap,CH=new WeakSet,IH=function(e){if("mouse"!==e.pointerType){const t=250;if(e.timeStamp-UH(this,bH)<t)return}VH(this,MH,NH).call(this),clearTimeout(UH(this,EH));const t=this.hasAttribute(WH.AUTOHIDE_OVER_CONTROLS);([this,this.media].includes(e.target)||t)&&VH(this,OH,jH).call(this)},RH=new WeakSet,DH=function(e){if("touch"===e.pointerType){const t=!this.hasAttribute(WH.USER_INACTIVE);[this,this.media].includes(e.target)&&t?VH(this,LH,PH).call(this):VH(this,OH,jH).call(this)}else e.composedPath().some((e=>["media-play-button","media-fullscreen-button"].includes(null==e?void 0:e.localName)))&&VH(this,OH,jH).call(this)},LH=new WeakSet,PH=function(){if(UH(this,xH)<0)return;if(this.hasAttribute(WH.USER_INACTIVE))return;this.setAttribute(WH.USER_INACTIVE,"");const e=new Wz.CustomEvent(cz.USER_INACTIVE_CHANGE,{composed:!0,bubbles:!0,detail:!0});this.dispatchEvent(e)},MH=new WeakSet,NH=function(){if(!this.hasAttribute(WH.USER_INACTIVE))return;this.removeAttribute(WH.USER_INACTIVE);const e=new Wz.CustomEvent(cz.USER_INACTIVE_CHANGE,{composed:!0,bubbles:!0,detail:!1});this.dispatchEvent(e)},OH=new WeakSet,jH=function(){VH(this,MH,NH).call(this),clearTimeout(UH(this,EH));const e=parseInt(this.autohide);e<0||$H(this,EH,setTimeout((()=>{VH(this,LH,PH).call(this)}),1e3*e))},Wz.customElements.get("media-container")||Wz.customElements.define("media-container",GH);var KH,YH,QH,XH,ZH,JH,eq=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},tq=(e,t,n)=>(eq(e,t,"read from private field"),n?n.call(e):t.get(e)),nq=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},rq=(e,t,n,r)=>(eq(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n);class iq{constructor(e,t){let{defaultValue:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{defaultValue:void 0};nq(this,ZH),nq(this,KH,void 0),nq(this,YH,void 0),nq(this,QH,void 0),nq(this,XH,new Set),rq(this,KH,e),rq(this,YH,t),rq(this,QH,new Set(n))}[Symbol.iterator](){return tq(this,ZH,JH).values()}get length(){return tq(this,ZH,JH).size}get value(){var e;return null!=(e=[...tq(this,ZH,JH)].join(" "))?e:""}set value(e){var t;e!==this.value&&(rq(this,XH,new Set),this.add(...null!=(t=null==e?void 0:e.split(" "))?t:[]))}toString(){return this.value}item(e){return[...tq(this,ZH,JH)][e]}values(){return tq(this,ZH,JH).values()}forEach(e,t){tq(this,ZH,JH).forEach(e,t)}add(){for(var e,t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];r.forEach((e=>tq(this,XH).add(e))),(""!==this.value||(null==(e=tq(this,KH))?void 0:e.hasAttribute(`${tq(this,YH)}`)))&&(null==(t=tq(this,KH))||t.setAttribute(`${tq(this,YH)}`,`${this.value}`))}remove(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];n.forEach((e=>tq(this,XH).delete(e))),null==(e=tq(this,KH))||e.setAttribute(`${tq(this,YH)}`,`${this.value}`)}contains(e){return tq(this,ZH,JH).has(e)}toggle(e,t){return"undefined"!==typeof t?t?(this.add(e),!0):(this.remove(e),!1):this.contains(e)?(this.remove(e),!1):(this.add(e),!0)}replace(e,t){return this.remove(e),this.add(t),e===t}}KH=new WeakMap,YH=new WeakMap,QH=new WeakMap,XH=new WeakMap,ZH=new WeakSet,JH=function(){return tq(this,XH).size?tq(this,XH):tq(this,QH)};const aq=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const[t,n,r]=e.split(":"),i=r?decodeURIComponent(r):void 0;return{kind:"cc"===t?dz.CAPTIONS:dz.SUBTITLES,language:n,label:i}},oq=function(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split(/\s+/)}(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").map((t=>{const n=aq(t);return{...e,...n}}))},sq=e=>e?Array.isArray(e)?e.map((e=>"string"===typeof e?aq(e):e)):"string"===typeof e?oq(e):[e]:[],lq=function(){let{kind:e,label:t,language:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{kind:"subtitles"};return t?`${"captions"===e?"cc":"sb"}:${n}:${encodeURIComponent(t)}`:n},cq=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Array.prototype.map.call(e,lq).join(" ")},uq=e=>{const t=Object.entries(e).map((e=>{let[t,n]=e;return((e,t)=>n=>n[e]===t)(t,n)}));return e=>t.every((t=>t(e)))},dq=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n=sq(arguments.length>2&&void 0!==arguments[2]?arguments[2]:[]).map(uq);Array.from(t).filter((e=>n.some((t=>t(e))))).forEach((t=>{t.mode=e}))},hq=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>!0;if(!(null==e?void 0:e.textTracks))return[];const n="function"===typeof t?t:uq(t);return Array.from(e.textTracks).filter(n)},pq=e=>{var t;return!!(null==(t=e.mediaSubtitlesShowing)?void 0:t.length)||e.hasAttribute(lz.MEDIA_SUBTITLES_SHOWING)},fq="exitFullscreen"in zz?"exitFullscreen":"webkitExitFullscreen"in zz?"webkitExitFullscreen":"webkitCancelFullScreen"in zz?"webkitCancelFullScreen":void 0,mq="fullscreenElement"in zz?"fullscreenElement":"webkitFullscreenElement"in zz?"webkitFullscreenElement":void 0,gq=e=>{var t;const{media:n,documentElement:r,fullscreenElement:i=n}=e;if(!n||!r)return!1;const a=(e=>{const{documentElement:t,media:n}=e,r=null==t?void 0:t[mq];return!r&&"webkitDisplayingFullscreen"in n&&"webkitPresentationMode"in n&&n.webkitDisplayingFullscreen&&n.webkitPresentationMode===bz?n:r})(e);if(!a)return!1;if(a===i||a===n)return!0;if(a.localName.includes("-")){let e=a.shadowRoot;if(!(mq in e))return eH(a,i);for(;null==e?void 0:e[mq];){if(e[mq]===i)return!0;e=null==(t=e[mq])?void 0:t.shadowRoot}}return!1},vq="fullscreenEnabled"in zz?"fullscreenEnabled":"webkitFullscreenEnabled"in zz?"webkitFullscreenEnabled":void 0;let yq;const bq=()=>{var e,t;return yq||(yq=null==(t=null==(e=zz)?void 0:e.createElement)?void 0:t.call(e,"video"),yq)},wq=(e,t)=>new Promise((n=>{e.addEventListener("volumechange",(()=>n(!0)),{signal:t})})),Eq=async(e,t)=>{for(let n=0;n<10;n++){if(e.volume===t)return!1;await kz(10)}return e.volume!==t},xq=/.*Version\/.*Safari\/.*/.test(Wz.navigator.userAgent),_q=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bq();return(!Wz.matchMedia("(display-mode: standalone)").matches||!xq)&&"function"===typeof(null==e?void 0:e.requestPictureInPicture)},Aq=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bq();return(e=>{const{documentElement:t,media:n}=e;return!!(null==t?void 0:t[vq])||n&&"webkitSupportsFullscreen"in n})({documentElement:zz,media:e})},Tq=Aq(),Sq=_q(),kq=!!Wz.WebKitPlaybackTargetAvailabilityEvent,Cq=!!Wz.chrome,Iq=e=>hq(e.media,(e=>[dz.SUBTITLES,dz.CAPTIONS].includes(e.kind))).sort(((e,t)=>e.kind>=t.kind?1:-1)),Rq=e=>hq(e.media,(e=>e.mode===pz&&[dz.SUBTITLES,dz.CAPTIONS].includes(e.kind))),Dq=(e,t)=>{const n=Iq(e),r=Rq(e),i=!!r.length;if(n.length)if(!1===t||i&&!0!==t)dq(hz,n,r);else if(!0===t||!i&&!1!==t){let t=n[0];const{options:i}=e;if(!(null==i?void 0:i.noSubtitlesLangPref)){const e=globalThis.localStorage.getItem("media-chrome-pref-subtitles-lang"),r=e?[e,...globalThis.navigator.languages]:globalThis.navigator.languages,i=n.filter((e=>r.some((t=>e.language.toLowerCase().startsWith(t.split("-")[0]))))).sort(((e,t)=>r.findIndex((t=>e.language.toLowerCase().startsWith(t.split("-")[0])))-r.findIndex((e=>t.language.toLowerCase().startsWith(e.split("-")[0])))));i[0]&&(t=i[0])}const{language:a,label:o,kind:s}=t;dq(hz,n,r),dq(pz,n,[{language:a,label:o,kind:s}])}},Lq=(e,t)=>e===t||null!=e&&null!=t&&(typeof e===typeof t&&(!("number"!==typeof e||!Number.isNaN(e)||!Number.isNaN(t))||"object"===typeof e&&(Array.isArray(e)?Pq(e,t):Object.entries(e).every((e=>{let[n,r]=e;return n in t&&Lq(r,t[n])}))))),Pq=(e,t)=>{const n=Array.isArray(e),r=Array.isArray(t);return n===r&&(!n&&!r||e.length===t.length&&e.every(((e,n)=>Lq(e,t[n]))))},Mq=Object.values(yz);let Nq;const Oq=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bq();if(!e)return!1;const t=e.volume;e.volume=t/2+.1;const n=new AbortController,r=await Promise.race([wq(e,n.signal),Eq(e,t)]);return n.abort(),r}().then((e=>(Nq=e,Nq))),jq={mediaError:{get(e,t){const{media:n}=e;if("playing"!==(null==t?void 0:t.type))return null==n?void 0:n.error},mediaEvents:["emptied","error","playing"]},mediaErrorCode:{get(e,t){var n;const{media:r}=e;if("playing"!==(null==t?void 0:t.type))return null==(n=null==r?void 0:r.error)?void 0:n.code},mediaEvents:["emptied","error","playing"]},mediaErrorMessage:{get(e,t){var n,r;const{media:i}=e;if("playing"!==(null==t?void 0:t.type))return null!=(r=null==(n=null==i?void 0:i.error)?void 0:n.message)?r:""},mediaEvents:["emptied","error","playing"]},mediaWidth:{get(e){var t;const{media:n}=e;return null!=(t=null==n?void 0:n.videoWidth)?t:0},mediaEvents:["resize"]},mediaHeight:{get(e){var t;const{media:n}=e;return null!=(t=null==n?void 0:n.videoHeight)?t:0},mediaEvents:["resize"]},mediaPaused:{get(e){var t;const{media:n}=e;return null==(t=null==n?void 0:n.paused)||t},set(e,t){var n;const{media:r}=t;r&&(e?r.pause():null==(n=r.play())||n.catch((()=>{})))},mediaEvents:["play","playing","pause","emptied"]},mediaHasPlayed:{get(e,t){const{media:n}=e;return!!n&&(t?"playing"===t.type:!n.paused)},mediaEvents:["playing","emptied"]},mediaEnded:{get(e){var t;const{media:n}=e;return null!=(t=null==n?void 0:n.ended)&&t},mediaEvents:["seeked","ended","emptied"]},mediaPlaybackRate:{get(e){var t;const{media:n}=e;return null!=(t=null==n?void 0:n.playbackRate)?t:1},set(e,t){const{media:n}=t;n&&Number.isFinite(+e)&&(n.playbackRate=+e)},mediaEvents:["ratechange","loadstart"]},mediaMuted:{get(e){var t;const{media:n}=e;return null!=(t=null==n?void 0:n.muted)&&t},set(e,t){const{media:n}=t;if(n){try{Wz.localStorage.setItem("media-chrome-pref-muted",e?"true":"false")}catch(Q_){console.debug("Error setting muted pref",Q_)}n.muted=e}},mediaEvents:["volumechange"],stateOwnersUpdateHandlers:[(e,t)=>{const{options:{noMutedPref:n}}=t,{media:r}=t;if(r&&!r.muted&&!n)try{const n="true"===Wz.localStorage.getItem("media-chrome-pref-muted");jq.mediaMuted.set(n,t),e(n)}catch(Q_){console.debug("Error getting muted pref",Q_)}}]},mediaVolume:{get(e){var t;const{media:n}=e;return null!=(t=null==n?void 0:n.volume)?t:1},set(e,t){const{media:n}=t;if(n){try{null==e?Wz.localStorage.removeItem("media-chrome-pref-volume"):Wz.localStorage.setItem("media-chrome-pref-volume",e.toString())}catch(Q_){console.debug("Error setting volume pref",Q_)}Number.isFinite(+e)&&(n.volume=+e)}},mediaEvents:["volumechange"],stateOwnersUpdateHandlers:[(e,t)=>{const{options:{noVolumePref:n}}=t;if(!n)try{const{media:n}=t;if(!n)return;const r=Wz.localStorage.getItem("media-chrome-pref-volume");if(null==r)return;jq.mediaVolume.set(+r,t),e(+r)}catch(Q_){console.debug("Error getting volume pref",Q_)}}]},mediaVolumeLevel:{get(e){const{media:t}=e;return"undefined"==typeof(null==t?void 0:t.volume)?"high":t.muted||0===t.volume?"off":t.volume<.5?"low":t.volume<.75?"medium":"high"},mediaEvents:["volumechange"]},mediaCurrentTime:{get(e){var t;const{media:n}=e;return null!=(t=null==n?void 0:n.currentTime)?t:0},set(e,t){const{media:n}=t;n&&Tz(e)&&(n.currentTime=e)},mediaEvents:["timeupdate","loadedmetadata"]},mediaDuration:{get(e){const{media:t,options:{defaultDuration:n}={}}=e;return!n||t&&t.duration&&!Number.isNaN(t.duration)&&Number.isFinite(t.duration)?Number.isFinite(null==t?void 0:t.duration)?t.duration:Number.NaN:n},mediaEvents:["durationchange","loadedmetadata","emptied"]},mediaLoading:{get(e){const{media:t}=e;return(null==t?void 0:t.readyState)<3},mediaEvents:["waiting","playing","emptied"]},mediaSeekable:{get(e){var t;const{media:n}=e;if(!(null==(t=null==n?void 0:n.seekable)?void 0:t.length))return;const r=n.seekable.start(0),i=n.seekable.end(n.seekable.length-1);return r||i?[Number(r.toFixed(3)),Number(i.toFixed(3))]:void 0},mediaEvents:["loadedmetadata","emptied","progress","seekablechange"]},mediaBuffered:{get(e){var t;const{media:n}=e,r=null!=(t=null==n?void 0:n.buffered)?t:[];return Array.from(r).map(((e,t)=>[Number(r.start(t).toFixed(3)),Number(r.end(t).toFixed(3))]))},mediaEvents:["progress","emptied"]},mediaStreamType:{get(e){const{media:t,options:{defaultStreamType:n}={}}=e,r=[yz.LIVE,yz.ON_DEMAND].includes(n)?n:void 0;if(!t)return r;const{streamType:i}=t;if(Mq.includes(i))return i===yz.UNKNOWN?r:i;const a=t.duration;return a===1/0?yz.LIVE:Number.isFinite(a)?yz.ON_DEMAND:r},mediaEvents:["emptied","durationchange","loadedmetadata","streamtypechange"]},mediaTargetLiveWindow:{get(e){const{media:t}=e;if(!t)return Number.NaN;const{targetLiveWindow:n}=t,r=jq.mediaStreamType.get(e);return null!=n&&!Number.isNaN(n)||r!==yz.LIVE?n:0},mediaEvents:["emptied","durationchange","loadedmetadata","streamtypechange","targetlivewindowchange"]},mediaTimeIsLive:{get(e){const{media:t,options:{liveEdgeOffset:n=10}={}}=e;if(!t)return!1;if("number"===typeof t.liveEdgeStart)return!Number.isNaN(t.liveEdgeStart)&&t.currentTime>=t.liveEdgeStart;if(!(jq.mediaStreamType.get(e)===yz.LIVE))return!1;const r=t.seekable;if(!r)return!0;if(!r.length)return!1;const i=r.end(r.length-1)-n;return t.currentTime>=i},mediaEvents:["playing","timeupdate","progress","waiting","emptied"]},mediaSubtitlesList:{get:e=>Iq(e).map((e=>{let{kind:t,label:n,language:r}=e;return{kind:t,label:n,language:r}})),mediaEvents:["loadstart"],textTracksEvents:["addtrack","removetrack"]},mediaSubtitlesShowing:{get:e=>Rq(e).map((e=>{let{kind:t,label:n,language:r}=e;return{kind:t,label:n,language:r}})),mediaEvents:["loadstart"],textTracksEvents:["addtrack","removetrack","change"],stateOwnersUpdateHandlers:[(e,t)=>{var n,r;const{media:i,options:a}=t;if(!i)return;const o=e=>{var n;if(!a.defaultSubtitles)return;e&&![dz.CAPTIONS,dz.SUBTITLES].includes(null==(n=null==e?void 0:e.track)?void 0:n.kind)||Dq(t,!0)};return i.addEventListener("loadstart",o),null==(n=i.textTracks)||n.addEventListener("addtrack",o),null==(r=i.textTracks)||r.addEventListener("removetrack",o),()=>{var e,t;i.removeEventListener("loadstart",o),null==(e=i.textTracks)||e.removeEventListener("addtrack",o),null==(t=i.textTracks)||t.removeEventListener("removetrack",o)}}]},mediaChaptersCues:{get(e){var t;const{media:n}=e;if(!n)return[];const[r]=hq(n,{kind:dz.CHAPTERS});return Array.from(null!=(t=null==r?void 0:r.cues)?t:[]).map((e=>{let{text:t,startTime:n,endTime:r}=e;return{text:t,startTime:n,endTime:r}}))},mediaEvents:["loadstart","loadedmetadata"],textTracksEvents:["addtrack","removetrack","change"],stateOwnersUpdateHandlers:[(e,t)=>{var n;const{media:r}=t;if(!r)return;const i=r.querySelector('track[kind="chapters"][default][src]'),a=null==(n=r.shadowRoot)?void 0:n.querySelector(':is(video,audio) > track[kind="chapters"][default][src]');return null==i||i.addEventListener("load",e),null==a||a.addEventListener("load",e),()=>{null==i||i.removeEventListener("load",e),null==a||a.removeEventListener("load",e)}}]},mediaIsPip:{get(e){var t,n;const{media:r,documentElement:i}=e;if(!r||!i)return!1;if(!i.pictureInPictureElement)return!1;if(i.pictureInPictureElement===r)return!0;if(i.pictureInPictureElement instanceof HTMLMediaElement)return!!(null==(t=r.localName)?void 0:t.includes("-"))&&eH(r,i.pictureInPictureElement);if(i.pictureInPictureElement.localName.includes("-")){let e=i.pictureInPictureElement.shadowRoot;for(;null==e?void 0:e.pictureInPictureElement;){if(e.pictureInPictureElement===r)return!0;e=null==(n=e.pictureInPictureElement)?void 0:n.shadowRoot}}return!1},set(e,t){const{media:n}=t;if(n)if(e){if(!zz.pictureInPictureEnabled)return void console.warn("MediaChrome: Picture-in-picture is not enabled");if(!n.requestPictureInPicture)return void console.warn("MediaChrome: The current media does not support picture-in-picture");const e=()=>{console.warn("MediaChrome: The media is not ready for picture-in-picture. It must have a readyState > 0.")};n.requestPictureInPicture().catch((t=>{if(11!==t.code)throw t;if(n.src){if(0!==n.readyState||"none"!==n.preload)throw t;{const t=()=>{n.removeEventListener("loadedmetadata",r),n.preload="none"},r=()=>{n.requestPictureInPicture().catch(e),t()};n.addEventListener("loadedmetadata",r),n.preload="metadata",setTimeout((()=>{0===n.readyState&&e(),t()}),1e3)}}else console.warn("MediaChrome: The media is not ready for picture-in-picture. It must have a src set.")}))}else zz.pictureInPictureElement&&zz.exitPictureInPicture()},mediaEvents:["enterpictureinpicture","leavepictureinpicture"]},mediaRenditionList:{get(e){var t;const{media:n}=e;return[...null!=(t=null==n?void 0:n.videoRenditions)?t:[]].map((e=>({...e})))},mediaEvents:["emptied","loadstart"],videoRenditionsEvents:["addrendition","removerendition"]},mediaRenditionSelected:{get(e){var t,n,r;const{media:i}=e;return null==(r=null==(n=null==i?void 0:i.videoRenditions)?void 0:n[null==(t=i.videoRenditions)?void 0:t.selectedIndex])?void 0:r.id},set(e,t){const{media:n}=t;if(!(null==n?void 0:n.videoRenditions))return void console.warn("MediaController: Rendition selection not supported by this media.");const r=e,i=Array.prototype.findIndex.call(n.videoRenditions,(e=>e.id==r));n.videoRenditions.selectedIndex!=i&&(n.videoRenditions.selectedIndex=i)},mediaEvents:["emptied"],videoRenditionsEvents:["addrendition","removerendition","change"]},mediaAudioTrackList:{get(e){var t;const{media:n}=e;return[...null!=(t=null==n?void 0:n.audioTracks)?t:[]]},mediaEvents:["emptied","loadstart"],audioTracksEvents:["addtrack","removetrack"]},mediaAudioTrackEnabled:{get(e){var t,n;const{media:r}=e;return null==(n=[...null!=(t=null==r?void 0:r.audioTracks)?t:[]].find((e=>e.enabled)))?void 0:n.id},set(e,t){const{media:n}=t;if(!(null==n?void 0:n.audioTracks))return void console.warn("MediaChrome: Audio track selection not supported by this media.");const r=e;for(const i of n.audioTracks)i.enabled=r==i.id},mediaEvents:["emptied"],audioTracksEvents:["addtrack","removetrack","change"]},mediaIsFullscreen:{get:e=>gq(e),set(e,t){e?(e=>{var t;const{media:n,fullscreenElement:r}=e,i=r&&"requestFullscreen"in r?"requestFullscreen":r&&"webkitRequestFullScreen"in r?"webkitRequestFullScreen":void 0;if(i){const e=null==(t=r[i])?void 0:t.call(r);if(e instanceof Promise)e.catch((()=>{}))}else(null==n?void 0:n.webkitEnterFullscreen)?n.webkitEnterFullscreen():(null==n?void 0:n.requestFullscreen)&&n.requestFullscreen()})(t):(e=>{var t;const{documentElement:n}=e;if(fq){const e=null==(t=null==n?void 0:n[fq])?void 0:t.call(n);if(e instanceof Promise)e.catch((()=>{}))}})(t)},rootEvents:["fullscreenchange","webkitfullscreenchange"],mediaEvents:["webkitbeginfullscreen","webkitendfullscreen","webkitpresentationmodechanged"]},mediaIsCasting:{get(e){var t;const{media:n}=e;return!(!(null==n?void 0:n.remote)||"disconnected"===(null==(t=n.remote)?void 0:t.state))&&!!n.remote.state},set(e,t){var n,r;const{media:i}=t;i&&(e&&"disconnected"!==(null==(n=i.remote)?void 0:n.state)||(e||"connected"===(null==(r=i.remote)?void 0:r.state))&&("function"===typeof i.remote.prompt?i.remote.prompt().catch((()=>{})):console.warn("MediaChrome: Casting is not supported in this environment")))},remoteEvents:["connect","connecting","disconnect"]},mediaIsAirplaying:{get:()=>!1,set(e,t){const{media:n}=t;n&&(n.webkitShowPlaybackTargetPicker&&Wz.WebKitPlaybackTargetAvailabilityEvent?n.webkitShowPlaybackTargetPicker():console.warn("MediaChrome: received a request to select AirPlay but AirPlay is not supported in this environment"))},mediaEvents:["webkitcurrentplaybacktargetiswirelesschanged"]},mediaFullscreenUnavailable:{get(e){const{media:t}=e;if(!Tq||!Aq(t))return vz}},mediaPipUnavailable:{get(e){const{media:t}=e;if(!Sq||!_q(t))return vz}},mediaVolumeUnavailable:{get(e){const{media:t}=e;if(!1===Nq||void 0==(null==t?void 0:t.volume))return vz},stateOwnersUpdateHandlers:[e=>{null==Nq&&Oq.then((t=>e(t?void 0:vz)))}]},mediaCastUnavailable:{get(e){let{availability:t="not-available"}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;const{media:r}=e;return Cq&&(null==(n=null==r?void 0:r.remote)?void 0:n.state)?null!=t&&"available"!==t?gz:void 0:vz},stateOwnersUpdateHandlers:[(e,t)=>{var n;const{media:r}=t;if(!r)return;return r.disableRemotePlayback||r.hasAttribute("disableremoteplayback")||null==(n=null==r?void 0:r.remote)||n.watchAvailability((t=>{e({availability:t?"available":"not-available"})})).catch((t=>{"NotSupportedError"===t.name?e({availability:null}):e({availability:"not-available"})})),()=>{var e;null==(e=null==r?void 0:r.remote)||e.cancelWatchAvailability().catch((()=>{}))}}]},mediaAirplayUnavailable:{get:(e,t)=>kq?"not-available"===(null==t?void 0:t.availability)?gz:void 0:vz,mediaEvents:["webkitplaybacktargetavailabilitychanged"],stateOwnersUpdateHandlers:[(e,t)=>{var n;const{media:r}=t;if(!r)return;return r.disableRemotePlayback||r.hasAttribute("disableremoteplayback")||null==(n=null==r?void 0:r.remote)||n.watchAvailability((t=>{e({availability:t?"available":"not-available"})})).catch((t=>{"NotSupportedError"===t.name?e({availability:null}):e({availability:"not-available"})})),()=>{var e;null==(e=null==r?void 0:r.remote)||e.cancelWatchAvailability().catch((()=>{}))}}]},mediaRenditionUnavailable:{get(e){var t;const{media:n}=e;return(null==n?void 0:n.videoRenditions)?(null==(t=n.videoRenditions)?void 0:t.length)?void 0:gz:vz},mediaEvents:["emptied","loadstart"],videoRenditionsEvents:["addrendition","removerendition"]},mediaAudioTrackUnavailable:{get(e){var t,n;const{media:r}=e;return(null==r?void 0:r.audioTracks)?(null!=(n=null==(t=r.audioTracks)?void 0:t.length)?n:0)<=1?gz:void 0:vz},mediaEvents:["emptied","loadstart"],audioTracksEvents:["addtrack","removetrack"]}},Fq={[iz.MEDIA_PREVIEW_REQUEST](e,t,n){let{detail:r}=n;var i,a,o;const{media:s}=t,l=null!=r?r:void 0;let c,u;if(s&&null!=l){const[e]=hq(s,{kind:dz.METADATA,label:"thumbnails"}),t=Array.prototype.find.call(null!=(i=null==e?void 0:e.cues)?i:[],((e,t,n)=>0===t?e.endTime>l:t===n.length-1?e.startTime<=l:e.startTime<=l&&e.endTime>l));if(t){const e=/'^(?:[a-z]+:)?\/\//i.test(t.text)||null==(a=null==s?void 0:s.querySelector('track[label="thumbnails"]'))?void 0:a.src,n=new URL(t.text,e);u=new URLSearchParams(n.hash).get("#xywh").split(",").map((e=>+e)),c=n.href}}const d=e.mediaDuration.get(t);let h=null==(o=e.mediaChaptersCues.get(t).find(((e,t,n)=>t===n.length-1&&d===e.endTime?e.startTime<=l&&e.endTime>=l:e.startTime<=l&&e.endTime>l)))?void 0:o.text;return null!=r&&null==h&&(h=""),{mediaPreviewTime:l,mediaPreviewImage:c,mediaPreviewCoords:u,mediaPreviewChapter:h}},[iz.MEDIA_PAUSE_REQUEST](e,t){e.mediaPaused.set(!0,t)},[iz.MEDIA_PLAY_REQUEST](e,t){var n,r,i,a;const o=e.mediaStreamType.get(t)===yz.LIVE,s=!(null==(n=t.options)?void 0:n.noAutoSeekToLive),l=e.mediaTargetLiveWindow.get(t)>0;if(o&&s&&!l){const n=null==(r=e.mediaSeekable.get(t))?void 0:r[1];if(n){const r=n-(null!=(a=null==(i=t.options)?void 0:i.seekToLiveOffset)?a:0);e.mediaCurrentTime.set(r,t)}}e.mediaPaused.set(!1,t)},[iz.MEDIA_PLAYBACK_RATE_REQUEST](e,t,n){let{detail:r}=n;const i=r;e.mediaPlaybackRate.set(i,t)},[iz.MEDIA_MUTE_REQUEST](e,t){e.mediaMuted.set(!0,t)},[iz.MEDIA_UNMUTE_REQUEST](e,t){e.mediaVolume.get(t)||e.mediaVolume.set(.25,t),e.mediaMuted.set(!1,t)},[iz.MEDIA_VOLUME_REQUEST](e,t,n){let{detail:r}=n;const i=r;i&&e.mediaMuted.get(t)&&e.mediaMuted.set(!1,t),e.mediaVolume.set(i,t)},[iz.MEDIA_SEEK_REQUEST](e,t,n){let{detail:r}=n;const i=r;e.mediaCurrentTime.set(i,t)},[iz.MEDIA_SEEK_TO_LIVE_REQUEST](e,t){var n,r,i;const a=null==(n=e.mediaSeekable.get(t))?void 0:n[1];if(Number.isNaN(Number(a)))return;const o=a-(null!=(i=null==(r=t.options)?void 0:r.seekToLiveOffset)?i:0);e.mediaCurrentTime.set(o,t)},[iz.MEDIA_SHOW_SUBTITLES_REQUEST](e,t,n){let{detail:r}=n;var i;const{options:a}=t,o=Iq(t),s=sq(r),l=null==(i=s[0])?void 0:i.language;l&&!a.noSubtitlesLangPref&&Wz.localStorage.setItem("media-chrome-pref-subtitles-lang",l),dq(pz,o,s)},[iz.MEDIA_DISABLE_SUBTITLES_REQUEST](e,t,n){let{detail:r}=n;const i=Iq(t);dq(hz,i,null!=r?r:[])},[iz.MEDIA_TOGGLE_SUBTITLES_REQUEST](e,t,n){let{detail:r}=n;Dq(t,r)},[iz.MEDIA_RENDITION_REQUEST](e,t,n){let{detail:r}=n;const i=r;e.mediaRenditionSelected.set(i,t)},[iz.MEDIA_AUDIO_TRACK_REQUEST](e,t,n){let{detail:r}=n;const i=r;e.mediaAudioTrackEnabled.set(i,t)},[iz.MEDIA_ENTER_PIP_REQUEST](e,t){e.mediaIsFullscreen.get(t)&&e.mediaIsFullscreen.set(!1,t),e.mediaIsPip.set(!0,t)},[iz.MEDIA_EXIT_PIP_REQUEST](e,t){e.mediaIsPip.set(!1,t)},[iz.MEDIA_ENTER_FULLSCREEN_REQUEST](e,t){e.mediaIsPip.get(t)&&e.mediaIsPip.set(!1,t),e.mediaIsFullscreen.set(!0,t)},[iz.MEDIA_EXIT_FULLSCREEN_REQUEST](e,t){e.mediaIsFullscreen.set(!1,t)},[iz.MEDIA_ENTER_CAST_REQUEST](e,t){e.mediaIsFullscreen.get(t)&&e.mediaIsFullscreen.set(!1,t),e.mediaIsCasting.set(!0,t)},[iz.MEDIA_EXIT_CAST_REQUEST](e,t){e.mediaIsCasting.set(!1,t)},[iz.MEDIA_AIRPLAY_REQUEST](e,t){e.mediaIsAirplaying.set(!0,t)}},Uq=e=>{let{media:t,fullscreenElement:n,documentElement:r,stateMediator:i=jq,requestMap:a=Fq,options:o={},monitorStateOwnersOnlyWithSubscriptions:s=!0}=e;const l=[],c={options:{...o}};let u=Object.freeze({mediaPreviewTime:void 0,mediaPreviewImage:void 0,mediaPreviewCoords:void 0,mediaPreviewChapter:void 0});const d=e=>{void 0!=e&&(Lq(e,u)||(u=Object.freeze({...u,...e}),l.forEach((e=>e(u)))))},h=()=>{const e=Object.entries(i).reduce(((e,t)=>{let[n,{get:r}]=t;return e[n]=r(c),e}),{});d(e)},p={};let f;const m=async(e,t)=>{var n,r,a,o,u,m,g,v,y,b,w,E,x,_,A,T;const S=!!f;if(f={...c,...null!=f?f:{},...e},S)return;await async function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];await Promise.all(t.filter((e=>e)).map((async e=>{if(!("localName"in e&&e instanceof Wz.HTMLElement))return;const t=e.localName;if(!t.includes("-"))return;const n=Wz.customElements.get(t);n&&e instanceof n||(await Wz.customElements.whenDefined(t),Wz.customElements.upgrade(e))})))}(...Object.values(e));const k=l.length>0&&0===t&&s,C=c.media!==f.media,I=(null==(n=c.media)?void 0:n.textTracks)!==(null==(r=f.media)?void 0:r.textTracks),R=(null==(a=c.media)?void 0:a.videoRenditions)!==(null==(o=f.media)?void 0:o.videoRenditions),D=(null==(u=c.media)?void 0:u.audioTracks)!==(null==(m=f.media)?void 0:m.audioTracks),L=(null==(g=c.media)?void 0:g.remote)!==(null==(v=f.media)?void 0:v.remote),P=c.documentElement!==f.documentElement,M=!!c.media&&(C||k),N=!!(null==(y=c.media)?void 0:y.textTracks)&&(I||k),O=!!(null==(b=c.media)?void 0:b.videoRenditions)&&(R||k),j=!!(null==(w=c.media)?void 0:w.audioTracks)&&(D||k),F=!!(null==(E=c.media)?void 0:E.remote)&&(L||k),U=!!c.documentElement&&(P||k),B=M||N||O||j||F||U,$=0===l.length&&1===t&&s,V=!!f.media&&(C||$),W=!!(null==(x=f.media)?void 0:x.textTracks)&&(I||$),z=!!(null==(_=f.media)?void 0:_.videoRenditions)&&(R||$),H=!!(null==(A=f.media)?void 0:A.audioTracks)&&(D||$),q=!!(null==(T=f.media)?void 0:T.remote)&&(L||$),G=!!f.documentElement&&(P||$),K=V||W||z||H||q||G;if(!(B||K))return Object.entries(f).forEach((e=>{let[t,n]=e;c[t]=n})),h(),void(f=void 0);Object.entries(i).forEach((e=>{let[t,{get:n,mediaEvents:r=[],textTracksEvents:i=[],videoRenditionsEvents:a=[],audioTracksEvents:o=[],remoteEvents:s=[],rootEvents:l=[],stateOwnersUpdateHandlers:u=[]}]=e;p[t]||(p[t]={});const h=e=>{const r=n(c,e);d({[t]:r})};let m;m=p[t].mediaEvents,r.forEach((e=>{m&&M&&(c.media.removeEventListener(e,m),p[t].mediaEvents=void 0),V&&(f.media.addEventListener(e,h),p[t].mediaEvents=h)})),m=p[t].textTracksEvents,i.forEach((e=>{var n,r;m&&N&&(null==(n=c.media.textTracks)||n.removeEventListener(e,m),p[t].textTracksEvents=void 0),W&&(null==(r=f.media.textTracks)||r.addEventListener(e,h),p[t].textTracksEvents=h)})),m=p[t].videoRenditionsEvents,a.forEach((e=>{var n,r;m&&O&&(null==(n=c.media.videoRenditions)||n.removeEventListener(e,m),p[t].videoRenditionsEvents=void 0),z&&(null==(r=f.media.videoRenditions)||r.addEventListener(e,h),p[t].videoRenditionsEvents=h)})),m=p[t].audioTracksEvents,o.forEach((e=>{var n,r;m&&j&&(null==(n=c.media.audioTracks)||n.removeEventListener(e,m),p[t].audioTracksEvents=void 0),H&&(null==(r=f.media.audioTracks)||r.addEventListener(e,h),p[t].audioTracksEvents=h)})),m=p[t].remoteEvents,s.forEach((e=>{var n,r;m&&F&&(null==(n=c.media.remote)||n.removeEventListener(e,m),p[t].remoteEvents=void 0),q&&(null==(r=f.media.remote)||r.addEventListener(e,h),p[t].remoteEvents=h)})),m=p[t].rootEvents,l.forEach((e=>{m&&U&&(c.documentElement.removeEventListener(e,m),p[t].rootEvents=void 0),G&&(f.documentElement.addEventListener(e,h),p[t].rootEvents=h)}));const g=p[t].stateOwnersUpdateHandlers;u.forEach((e=>{g&&B&&g(),K&&(p[t].stateOwnersUpdateHandlers=e(h,f))}))})),Object.entries(f).forEach((e=>{let[t,n]=e;c[t]=n})),h(),f=void 0};return m({media:t,fullscreenElement:n,documentElement:r,options:o}),{dispatch(e){const{type:t,detail:n}=e;a[t]&&null==u.mediaErrorCode?d(a[t](i,c,e)):"mediaelementchangerequest"===t?m({media:n}):"fullscreenelementchangerequest"===t?m({fullscreenElement:n}):"documentelementchangerequest"===t?m({documentElement:n}):"optionschangerequest"===t&&Object.entries(null!=n?n:{}).forEach((e=>{let[t,n]=e;c.options[t]=n}))},getState:()=>u,subscribe:e=>(m({},l.length+1),l.push(e),e(u),()=>{const t=l.indexOf(e);t>=0&&(m({},l.length-1),l.splice(t,1))})}};var Bq,$q,Vq,Wq,zq,Hq,qq,Gq,Kq,Yq,Qq,Xq,Zq=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},Jq=(e,t,n)=>(Zq(e,t,"read from private field"),n?n.call(e):t.get(e)),eG=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},tG=(e,t,n,r)=>(Zq(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),nG=(e,t,n)=>(Zq(e,t,"access private method"),n);const rG=["ArrowLeft","ArrowRight","Enter"," ","f","m","k","c"],iG="defaultsubtitles",aG="defaultstreamtype",oG="defaultduration",sG="fullscreenelement",lG="hotkeys",cG="keysused",uG="liveedgeoffset",dG="seektoliveoffset",hG="noautoseektolive",pG="nohotkeys",fG="novolumepref",mG="nosubtitleslangpref",gG="nodefaultstore",vG="keyboardforwardseekoffset",yG="keyboardbackwardseekoffset",bG="lang";class wG extends GH{constructor(){super(),eG(this,qq),eG(this,Kq),eG(this,Qq),this.mediaStateReceivers=[],this.associatedElementSubscriptions=new Map,eG(this,Bq,new iq(this,lG)),eG(this,$q,void 0),eG(this,Vq,void 0),eG(this,Wq,void 0),eG(this,zq,void 0),eG(this,Hq,(e=>{var t;null==(t=Jq(this,Vq))||t.dispatch(e)})),this.associateElement(this);let e={};tG(this,Wq,(t=>{Object.entries(t).forEach((t=>{let[n,r]=t;if(n in e&&e[n]===r)return;this.propagateMediaState(n,r);const i=n.toLowerCase(),a=new Wz.CustomEvent(uz[i],{composed:!0,detail:r});this.dispatchEvent(a)})),e=t})),this.enableHotkeys()}static get observedAttributes(){return super.observedAttributes.concat(pG,lG,aG,iG,oG,bG)}get mediaStore(){return Jq(this,Vq)}set mediaStore(e){var t,n;Jq(this,Vq)&&(null==(t=Jq(this,zq))||t.call(this),tG(this,zq,void 0)),tG(this,Vq,e),Jq(this,Vq)||this.hasAttribute(gG)?tG(this,zq,null==(n=Jq(this,Vq))?void 0:n.subscribe(Jq(this,Wq))):nG(this,qq,Gq).call(this)}get fullscreenElement(){var e;return null!=(e=Jq(this,$q))?e:this}set fullscreenElement(e){var t;this.hasAttribute(sG)&&this.removeAttribute(sG),tG(this,$q,e),null==(t=Jq(this,Vq))||t.dispatch({type:"fullscreenelementchangerequest",detail:this.fullscreenElement})}get defaultSubtitles(){return cH(this,iG)}set defaultSubtitles(e){uH(this,iG,e)}get defaultStreamType(){return dH(this,aG)}set defaultStreamType(e){hH(this,aG,e)}get defaultDuration(){return sH(this,oG)}set defaultDuration(e){lH(this,oG,e)}get noHotkeys(){return cH(this,pG)}set noHotkeys(e){uH(this,pG,e)}get keysUsed(){return dH(this,cG)}set keysUsed(e){hH(this,cG,e)}get liveEdgeOffset(){return sH(this,uG)}set liveEdgeOffset(e){lH(this,uG,e)}get noAutoSeekToLive(){return cH(this,hG)}set noAutoSeekToLive(e){uH(this,hG,e)}get noVolumePref(){return cH(this,fG)}set noVolumePref(e){uH(this,fG,e)}get noSubtitlesLangPref(){return cH(this,mG)}set noSubtitlesLangPref(e){uH(this,mG,e)}get noDefaultStore(){return cH(this,gG)}set noDefaultStore(e){uH(this,gG,e)}attributeChangedCallback(e,t,n){var r,i,a,o,s,l,c,u;if(super.attributeChangedCallback(e,t,n),e===pG)n!==t&&""===n?(this.hasAttribute(lG)&&console.warn("Media Chrome: Both `hotkeys` and `nohotkeys` have been set. All hotkeys will be disabled."),this.disableHotkeys()):n!==t&&null===n&&this.enableHotkeys();else if(e===lG)Jq(this,Bq).value=n;else if(e===iG&&n!==t)null==(r=Jq(this,Vq))||r.dispatch({type:"optionschangerequest",detail:{defaultSubtitles:this.hasAttribute(iG)}});else if(e===aG)null==(a=Jq(this,Vq))||a.dispatch({type:"optionschangerequest",detail:{defaultStreamType:null!=(i=this.getAttribute(aG))?i:void 0}});else if(e===uG)null==(o=Jq(this,Vq))||o.dispatch({type:"optionschangerequest",detail:{liveEdgeOffset:this.hasAttribute(uG)?+this.getAttribute(uG):void 0,seekToLiveOffset:this.hasAttribute(dG)?void 0:+this.getAttribute(uG)}});else if(e===dG)null==(s=Jq(this,Vq))||s.dispatch({type:"optionschangerequest",detail:{seekToLiveOffset:this.hasAttribute(dG)?+this.getAttribute(dG):void 0}});else if(e===hG)null==(l=Jq(this,Vq))||l.dispatch({type:"optionschangerequest",detail:{noAutoSeekToLive:this.hasAttribute(hG)}});else if(e===sG){const e=n?null==(c=this.getRootNode())?void 0:c.getElementById(n):void 0;tG(this,$q,e),null==(u=Jq(this,Vq))||u.dispatch({type:"fullscreenelementchangerequest",detail:this.fullscreenElement})}else e===bG&&n!==t&&(Mz=n)}connectedCallback(){var e,t;Jq(this,Vq)||this.hasAttribute(gG)||nG(this,qq,Gq).call(this),null==(e=Jq(this,Vq))||e.dispatch({type:"documentelementchangerequest",detail:zz}),super.connectedCallback(),Jq(this,Vq)&&!Jq(this,zq)&&tG(this,zq,null==(t=Jq(this,Vq))?void 0:t.subscribe(Jq(this,Wq))),this.enableHotkeys()}disconnectedCallback(){var e,t,n,r;null==(e=super.disconnectedCallback)||e.call(this),Jq(this,Vq)&&(null==(t=Jq(this,Vq))||t.dispatch({type:"documentelementchangerequest",detail:void 0}),null==(n=Jq(this,Vq))||n.dispatch({type:iz.MEDIA_TOGGLE_SUBTITLES_REQUEST,detail:!1})),Jq(this,zq)&&(null==(r=Jq(this,zq))||r.call(this),tG(this,zq,void 0))}mediaSetCallback(e){var t;super.mediaSetCallback(e),null==(t=Jq(this,Vq))||t.dispatch({type:"mediaelementchangerequest",detail:e}),e.hasAttribute("tabindex")||(e.tabIndex=-1)}mediaUnsetCallback(e){var t;super.mediaUnsetCallback(e),null==(t=Jq(this,Vq))||t.dispatch({type:"mediaelementchangerequest",detail:void 0})}propagateMediaState(e,t){CG(this.mediaStateReceivers,e,t)}associateElement(e){if(!e)return;const{associatedElementSubscriptions:t}=this;if(t.has(e))return;const n=this.registerMediaStateReceiver.bind(this),r=this.unregisterMediaStateReceiver.bind(this),i=IG(e,n,r);Object.values(iz).forEach((t=>{e.addEventListener(t,Jq(this,Hq))})),t.set(e,i)}unassociateElement(e){if(!e)return;const{associatedElementSubscriptions:t}=this;if(!t.has(e))return;t.get(e)(),t.delete(e),Object.values(iz).forEach((t=>{e.removeEventListener(t,Jq(this,Hq))}))}registerMediaStateReceiver(e){if(!e)return;const t=this.mediaStateReceivers;t.indexOf(e)>-1||(t.push(e),Jq(this,Vq)&&Object.entries(Jq(this,Vq).getState()).forEach((t=>{let[n,r]=t;CG([e],n,r)})))}unregisterMediaStateReceiver(e){const t=this.mediaStateReceivers,n=t.indexOf(e);n<0||t.splice(n,1)}enableHotkeys(){this.addEventListener("keydown",nG(this,Qq,Xq))}disableHotkeys(){this.removeEventListener("keydown",nG(this,Qq,Xq)),this.removeEventListener("keyup",nG(this,Kq,Yq))}get hotkeys(){return dH(this,lG)}set hotkeys(e){hH(this,lG,e)}keyboardShortcutHandler(e){var t,n,r,i,a;const o=e.target;if((null!=(r=null!=(n=null==(t=o.getAttribute(cG))?void 0:t.split(" "))?n:null==o?void 0:o.keysUsed)?r:[]).map((e=>"Space"===e?" ":e)).filter(Boolean).includes(e.key))return;let s,l,c;if(!Jq(this,Bq).contains(`no${e.key.toLowerCase()}`)&&(" "!==e.key||!Jq(this,Bq).contains("nospace")))switch(e.key){case" ":case"k":s=Jq(this,Vq).getState().mediaPaused?iz.MEDIA_PLAY_REQUEST:iz.MEDIA_PAUSE_REQUEST,this.dispatchEvent(new Wz.CustomEvent(s,{composed:!0,bubbles:!0}));break;case"m":s="off"===this.mediaStore.getState().mediaVolumeLevel?iz.MEDIA_UNMUTE_REQUEST:iz.MEDIA_MUTE_REQUEST,this.dispatchEvent(new Wz.CustomEvent(s,{composed:!0,bubbles:!0}));break;case"f":s=this.mediaStore.getState().mediaIsFullscreen?iz.MEDIA_EXIT_FULLSCREEN_REQUEST:iz.MEDIA_ENTER_FULLSCREEN_REQUEST,this.dispatchEvent(new Wz.CustomEvent(s,{composed:!0,bubbles:!0}));break;case"c":this.dispatchEvent(new Wz.CustomEvent(iz.MEDIA_TOGGLE_SUBTITLES_REQUEST,{composed:!0,bubbles:!0}));break;case"ArrowLeft":{const e=this.hasAttribute(yG)?+this.getAttribute(yG):10;l=Math.max((null!=(i=this.mediaStore.getState().mediaCurrentTime)?i:0)-e,0),c=new Wz.CustomEvent(iz.MEDIA_SEEK_REQUEST,{composed:!0,bubbles:!0,detail:l}),this.dispatchEvent(c);break}case"ArrowRight":{const e=this.hasAttribute(vG)?+this.getAttribute(vG):10;l=Math.max((null!=(a=this.mediaStore.getState().mediaCurrentTime)?a:0)+e,0),c=new Wz.CustomEvent(iz.MEDIA_SEEK_REQUEST,{composed:!0,bubbles:!0,detail:l}),this.dispatchEvent(c);break}}}}Bq=new WeakMap,$q=new WeakMap,Vq=new WeakMap,Wq=new WeakMap,zq=new WeakMap,Hq=new WeakMap,qq=new WeakSet,Gq=function(){var e;this.mediaStore=Uq({media:this.media,fullscreenElement:this.fullscreenElement,options:{defaultSubtitles:this.hasAttribute(iG),defaultDuration:this.hasAttribute(oG)?+this.getAttribute(oG):void 0,defaultStreamType:null!=(e=this.getAttribute(aG))?e:void 0,liveEdgeOffset:this.hasAttribute(uG)?+this.getAttribute(uG):void 0,seekToLiveOffset:this.hasAttribute(dG)?+this.getAttribute(dG):this.hasAttribute(uG)?+this.getAttribute(uG):void 0,noAutoSeekToLive:this.hasAttribute(hG),noVolumePref:this.hasAttribute(fG),noSubtitlesLangPref:this.hasAttribute(mG)}})},Kq=new WeakSet,Yq=function(e){const{key:t}=e;rG.includes(t)?this.keyboardShortcutHandler(e):this.removeEventListener("keyup",nG(this,Kq,Yq))},Qq=new WeakSet,Xq=function(e){const{metaKey:t,altKey:n,key:r}=e;t||n||!rG.includes(r)?this.removeEventListener("keyup",nG(this,Kq,Yq)):([" ","ArrowLeft","ArrowRight"].includes(r)&&!(Jq(this,Bq).contains(`no${r.toLowerCase()}`)||" "===r&&Jq(this,Bq).contains("nospace"))&&e.preventDefault(),this.addEventListener("keyup",nG(this,Kq,Yq),{once:!0}))};const EG=Object.values(lz),xG=Object.values(oz),_G=e=>{var t,n,r,i;let{observedAttributes:a}=e.constructor;!a&&(null==(t=e.nodeName)?void 0:t.includes("-"))&&(Wz.customElements.upgrade(e),({observedAttributes:a}=e.constructor));const o=null==(i=null==(r=null==(n=null==e?void 0:e.getAttribute)?void 0:n.call(e,az.MEDIA_CHROME_ATTRIBUTES))?void 0:r.split)?void 0:i.call(r,/\s+/);return Array.isArray(a||o)?(a||o).filter((e=>EG.includes(e))):[]},AG=e=>(e=>{var t,n;return!(null==(t=e.nodeName)?void 0:t.includes("-"))||!Wz.customElements.get(null==(n=e.nodeName)?void 0:n.toLowerCase())||e instanceof Wz.customElements.get(e.nodeName.toLowerCase())||Wz.customElements.upgrade(e),xG.some((t=>t in e))})(e)||!!_G(e).length,TG=e=>{var t;return null==(t=null==e?void 0:e.join)?void 0:t.call(e,":")},SG={[lz.MEDIA_SUBTITLES_LIST]:cq,[lz.MEDIA_SUBTITLES_SHOWING]:cq,[lz.MEDIA_SEEKABLE]:TG,[lz.MEDIA_BUFFERED]:e=>null==e?void 0:e.map(TG).join(" "),[lz.MEDIA_PREVIEW_COORDS]:e=>null==e?void 0:e.join(" "),[lz.MEDIA_RENDITION_LIST]:function(e){return null==e?void 0:e.map(wz).join(" ")},[lz.MEDIA_AUDIO_TRACK_LIST]:function(e){return null==e?void 0:e.map(xz).join(" ")}},kG=(e,t)=>{if((e=>{var t;return!!(null==(t=e.closest)?void 0:t.call(e,'*[slot="media"]'))})(e))return;const n=(e,t)=>{var n,r;AG(e)&&t(e);const{children:i=[]}=null!=e?e:{};[...i,...null!=(r=null==(n=null==e?void 0:e.shadowRoot)?void 0:n.children)?r:[]].forEach((e=>kG(e,t)))},r=null==e?void 0:e.nodeName.toLowerCase();!r.includes("-")||AG(e)?n(e,t):Wz.customElements.whenDefined(r).then((()=>{n(e,t)}))},CG=(e,t,n)=>{e.forEach((e=>{if(t in e)return void(e[t]=n);const r=_G(e),i=t.toLowerCase();r.includes(i)&&(async(e,t,n)=>{var r,i;if(e.isConnected||await kz(0),"boolean"===typeof n||null==n)return uH(e,t,n);if("number"===typeof n)return lH(e,t,n);if("string"===typeof n)return hH(e,t,n);if(Array.isArray(n)&&!n.length)return e.removeAttribute(t);const a=null!=(i=null==(r=SG[t])?void 0:r.call(SG,n))?i:n;e.setAttribute(t,a)})(e,i,n)}))},IG=(e,t,n)=>{kG(e,t);const r=e=>{var n;const r=null!=(n=null==e?void 0:e.composedPath()[0])?n:e.target;t(r)},i=e=>{var t;const r=null!=(t=null==e?void 0:e.composedPath()[0])?t:e.target;n(r)};e.addEventListener(iz.REGISTER_MEDIA_STATE_RECEIVER,r),e.addEventListener(iz.UNREGISTER_MEDIA_STATE_RECEIVER,i);let a=[];const o=e=>{const r=e.target;"media"!==r.name&&(a.forEach((e=>kG(e,n))),a=[...r.assignedElements({flatten:!0})],a.forEach((e=>kG(e,t))))};e.addEventListener("slotchange",o);const s=new MutationObserver((e=>{e.forEach((e=>{const{addedNodes:r=[],removedNodes:i=[],type:a,target:o,attributeName:s}=e;"childList"===a?(Array.prototype.forEach.call(r,(e=>kG(e,t))),Array.prototype.forEach.call(i,(e=>kG(e,n)))):"attributes"===a&&s===az.MEDIA_CHROME_ATTRIBUTES&&(AG(o)?t(o):n(o))}))}));s.observe(e,{childList:!0,attributes:!0,subtree:!0});return()=>{kG(e,n),e.removeEventListener("slotchange",o),s.disconnect(),e.removeEventListener(iz.REGISTER_MEDIA_STATE_RECEIVER,r),e.removeEventListener(iz.UNREGISTER_MEDIA_STATE_RECEIVER,i)}};Wz.customElements.get("media-controller")||Wz.customElements.define("media-controller",wG);var RG,DG,LG,PG,MG,NG,OG,jG=wG,FG=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},UG=(e,t,n)=>(FG(e,t,"read from private field"),n?n.call(e):t.get(e)),BG=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},$G=(e,t,n,r)=>(FG(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n);const VG="tooltipplacement",WG="disabled",zG="notooltip",HG=zz.createElement("template");HG.innerHTML='\n<style>\n  :host {\n    position: relative;\n    font: var(--media-font,\n      var(--media-font-weight, bold)\n      var(--media-font-size, 14px) /\n      var(--media-text-content-height, var(--media-control-height, 24px))\n      var(--media-font-family, helvetica neue, segoe ui, roboto, arial, sans-serif));\n    color: var(--media-text-color, var(--media-primary-color, rgb(238 238 238)));\n    background: var(--media-control-background, var(--media-secondary-color, rgb(20 20 30 / .7)));\n    padding: var(--media-button-padding, var(--media-control-padding, 10px));\n    justify-content: var(--media-button-justify-content, center);\n    display: inline-flex;\n    align-items: center;\n    vertical-align: middle;\n    box-sizing: border-box;\n    transition: background .15s linear;\n    pointer-events: auto;\n    cursor: var(--media-cursor, pointer);\n    -webkit-tap-highlight-color: transparent;\n  }\n\n  \n  :host(:focus-visible) {\n    box-shadow: inset 0 0 0 2px rgb(27 127 204 / .9);\n    outline: 0;\n  }\n  \n  :host(:where(:focus)) {\n    box-shadow: none;\n    outline: 0;\n  }\n\n  :host(:hover) {\n    background: var(--media-control-hover-background, rgba(50 50 70 / .7));\n  }\n\n  svg, img, ::slotted(svg), ::slotted(img) {\n    width: var(--media-button-icon-width);\n    height: var(--media-button-icon-height, var(--media-control-height, 24px));\n    transform: var(--media-button-icon-transform);\n    transition: var(--media-button-icon-transition);\n    fill: var(--media-icon-color, var(--media-primary-color, rgb(238 238 238)));\n    vertical-align: middle;\n    max-width: 100%;\n    max-height: 100%;\n    min-width: 100%;\n  }\n\n  media-tooltip {\n    \n    max-width: 0;\n    overflow-x: clip;\n    opacity: 0;\n    transition: opacity .3s, max-width 0s 9s;\n  }\n\n  :host(:hover) media-tooltip,\n  :host(:focus-visible) media-tooltip {\n    max-width: 100vw;\n    opacity: 1;\n    transition: opacity .3s;\n  }\n\n  :host([notooltip]) slot[name="tooltip"] {\n    display: none;\n  }\n</style>\n\n<slot name="tooltip">\n  <media-tooltip part="tooltip" aria-hidden="true">\n    <slot name="tooltip-content"></slot>\n  </media-tooltip>\n</slot>\n';class qG extends Wz.HTMLElement{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t;if(super(),BG(this,NG),BG(this,RG,void 0),this.preventClick=!1,this.tooltipEl=null,this.tooltipContent="",BG(this,DG,(e=>{this.preventClick||this.handleClick(e),setTimeout(UG(this,LG),0)})),BG(this,LG,(()=>{var e,t;null==(t=null==(e=this.tooltipEl)?void 0:e.updateXOffset)||t.call(e)})),BG(this,PG,(e=>{const{key:t}=e;this.keysUsed.includes(t)?this.preventClick||this.handleClick(e):this.removeEventListener("keyup",UG(this,PG))})),BG(this,MG,(e=>{const{metaKey:t,altKey:n,key:r}=e;t||n||!this.keysUsed.includes(r)?this.removeEventListener("keyup",UG(this,PG)):this.addEventListener("keyup",UG(this,PG),{once:!0})})),!this.shadowRoot){this.attachShadow({mode:"open"});const n=HG.content.cloneNode(!0);this.nativeEl=n;let r=e.slotTemplate;r||(r=zz.createElement("template"),r.innerHTML=`<slot>${e.defaultContent||""}</slot>`),e.tooltipContent&&(n.querySelector('slot[name="tooltip-content"]').innerHTML=null!=(t=e.tooltipContent)?t:"",this.tooltipContent=e.tooltipContent),this.nativeEl.appendChild(r.content.cloneNode(!0)),this.shadowRoot.appendChild(n)}this.tooltipEl=this.shadowRoot.querySelector("media-tooltip")}static get observedAttributes(){return["disabled",VG,az.MEDIA_CONTROLLER]}enable(){this.addEventListener("click",UG(this,DG)),this.addEventListener("keydown",UG(this,MG)),this.tabIndex=0}disable(){this.removeEventListener("click",UG(this,DG)),this.removeEventListener("keydown",UG(this,MG)),this.removeEventListener("keyup",UG(this,PG)),this.tabIndex=-1}attributeChangedCallback(e,t,n){var r,i,a,o,s;e===az.MEDIA_CONTROLLER?(t&&(null==(i=null==(r=UG(this,RG))?void 0:r.unassociateElement)||i.call(r,this),$G(this,RG,null)),n&&this.isConnected&&($G(this,RG,null==(a=this.getRootNode())?void 0:a.getElementById(n)),null==(s=null==(o=UG(this,RG))?void 0:o.associateElement)||s.call(o,this))):"disabled"===e&&n!==t?null==n?this.enable():this.disable():e===VG&&this.tooltipEl&&n!==t&&(this.tooltipEl.placement=n),UG(this,LG).call(this)}connectedCallback(){var e,t,n;const{style:r}=aH(this.shadowRoot,":host");r.setProperty("display",`var(--media-control-display, var(--${this.localName}-display, inline-flex))`),this.hasAttribute("disabled")?this.disable():this.enable(),this.setAttribute("role","button");const i=this.getAttribute(az.MEDIA_CONTROLLER);i&&($G(this,RG,null==(e=this.getRootNode())?void 0:e.getElementById(i)),null==(n=null==(t=UG(this,RG))?void 0:t.associateElement)||n.call(t,this)),Wz.customElements.whenDefined("media-tooltip").then((()=>{return(e=this,t=NG,n=OG,FG(e,t,"access private method"),n).call(this);var e,t,n}))}disconnectedCallback(){var e,t;this.disable(),null==(t=null==(e=UG(this,RG))?void 0:e.unassociateElement)||t.call(e,this),$G(this,RG,null),this.removeEventListener("mouseenter",UG(this,LG)),this.removeEventListener("focus",UG(this,LG)),this.removeEventListener("click",UG(this,DG))}get keysUsed(){return["Enter"," "]}get tooltipPlacement(){return dH(this,VG)}set tooltipPlacement(e){hH(this,VG,e)}get mediaController(){return dH(this,az.MEDIA_CONTROLLER)}set mediaController(e){hH(this,az.MEDIA_CONTROLLER,e)}get disabled(){return cH(this,WG)}set disabled(e){uH(this,WG,e)}get noTooltip(){return cH(this,zG)}set noTooltip(e){uH(this,zG,e)}handleClick(e){}}RG=new WeakMap,DG=new WeakMap,LG=new WeakMap,PG=new WeakMap,MG=new WeakMap,NG=new WeakSet,OG=function(){this.addEventListener("mouseenter",UG(this,LG)),this.addEventListener("focus",UG(this,LG)),this.addEventListener("click",UG(this,DG));const e=this.tooltipPlacement;e&&this.tooltipEl&&(this.tooltipEl.placement=e)},Wz.customElements.get("media-chrome-button")||Wz.customElements.define("media-chrome-button",qG);const GG='<svg aria-hidden="true" viewBox="0 0 26 24">\n  <path d="M22.13 3H3.87a.87.87 0 0 0-.87.87v13.26a.87.87 0 0 0 .87.87h3.4L9 16H5V5h16v11h-4l1.72 2h3.4a.87.87 0 0 0 .87-.87V3.87a.87.87 0 0 0-.86-.87Zm-8.75 11.44a.5.5 0 0 0-.76 0l-4.91 5.73a.5.5 0 0 0 .38.83h9.82a.501.501 0 0 0 .38-.83l-4.91-5.73Z"/>\n</svg>\n',KG=zz.createElement("template");KG.innerHTML=`\n  <style>\n    :host([${lz.MEDIA_IS_AIRPLAYING}]) slot[name=icon] slot:not([name=exit]) {\n      display: none !important;\n    }\n\n    \n    :host(:not([${lz.MEDIA_IS_AIRPLAYING}])) slot[name=icon] slot:not([name=enter]) {\n      display: none !important;\n    }\n\n    :host([${lz.MEDIA_IS_AIRPLAYING}]) slot[name=tooltip-enter],\n    :host(:not([${lz.MEDIA_IS_AIRPLAYING}])) slot[name=tooltip-exit] {\n      display: none;\n    }\n  </style>\n\n  <slot name="icon">\n    <slot name="enter">${GG}</slot>\n    <slot name="exit">${GG}</slot>\n  </slot>\n`;const YG=`\n  <slot name="tooltip-enter">${Nz("start airplay")}</slot>\n  <slot name="tooltip-exit">${Nz("stop airplay")}</slot>\n`,QG=e=>{const t=e.mediaIsAirplaying?Nz("stop airplay"):Nz("start airplay");e.setAttribute("aria-label",t)};class XG extends qG{static get observedAttributes(){return[...super.observedAttributes,lz.MEDIA_IS_AIRPLAYING,lz.MEDIA_AIRPLAY_UNAVAILABLE]}constructor(){super({slotTemplate:KG,tooltipContent:YG,...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}})}connectedCallback(){super.connectedCallback(),QG(this)}attributeChangedCallback(e,t,n){super.attributeChangedCallback(e,t,n),e===lz.MEDIA_IS_AIRPLAYING&&QG(this)}get mediaIsAirplaying(){return cH(this,lz.MEDIA_IS_AIRPLAYING)}set mediaIsAirplaying(e){uH(this,lz.MEDIA_IS_AIRPLAYING,e)}get mediaAirplayUnavailable(){return dH(this,lz.MEDIA_AIRPLAY_UNAVAILABLE)}set mediaAirplayUnavailable(e){hH(this,lz.MEDIA_AIRPLAY_UNAVAILABLE,e)}handleClick(){const e=new Wz.CustomEvent(iz.MEDIA_AIRPLAY_REQUEST,{composed:!0,bubbles:!0});this.dispatchEvent(e)}}Wz.customElements.get("media-airplay-button")||Wz.customElements.define("media-airplay-button",XG);const ZG=zz.createElement("template");ZG.innerHTML='\n  <style>\n    :host([aria-checked="true"]) slot[name=off] {\n      display: none !important;\n    }\n\n    \n    :host(:not([aria-checked="true"])) slot[name=on] {\n      display: none !important;\n    }\n\n    :host([aria-checked="true"]) slot[name=tooltip-enable],\n    :host(:not([aria-checked="true"])) slot[name=tooltip-disable] {\n      display: none;\n    }\n  </style>\n\n  <slot name="icon">\n    <slot name="on"><svg aria-hidden="true" viewBox="0 0 26 24">\n  <path d="M22.83 5.68a2.58 2.58 0 0 0-2.3-2.5c-3.62-.24-11.44-.24-15.06 0a2.58 2.58 0 0 0-2.3 2.5c-.23 4.21-.23 8.43 0 12.64a2.58 2.58 0 0 0 2.3 2.5c3.62.24 11.44.24 15.06 0a2.58 2.58 0 0 0 2.3-2.5c.23-4.21.23-8.43 0-12.64Zm-11.39 9.45a3.07 3.07 0 0 1-1.91.57 3.06 3.06 0 0 1-2.34-1 3.75 3.75 0 0 1-.92-2.67 3.92 3.92 0 0 1 .92-2.77 3.18 3.18 0 0 1 2.43-1 2.94 2.94 0 0 1 2.13.78c.364.359.62.813.74 1.31l-1.43.35a1.49 1.49 0 0 0-1.51-1.17 1.61 1.61 0 0 0-1.29.58 2.79 2.79 0 0 0-.5 1.89 3 3 0 0 0 .49 1.93 1.61 1.61 0 0 0 1.27.58 1.48 1.48 0 0 0 1-.37 2.1 2.1 0 0 0 .59-1.14l1.4.44a3.23 3.23 0 0 1-1.07 1.69Zm7.22 0a3.07 3.07 0 0 1-1.91.57 3.06 3.06 0 0 1-2.34-1 3.75 3.75 0 0 1-.92-2.67 3.88 3.88 0 0 1 .93-2.77 3.14 3.14 0 0 1 2.42-1 3 3 0 0 1 2.16.82 2.8 2.8 0 0 1 .73 1.31l-1.43.35a1.49 1.49 0 0 0-1.51-1.21 1.61 1.61 0 0 0-1.29.58A2.79 2.79 0 0 0 15 12a3 3 0 0 0 .49 1.93 1.61 1.61 0 0 0 1.27.58 1.44 1.44 0 0 0 1-.37 2.1 2.1 0 0 0 .6-1.15l1.4.44a3.17 3.17 0 0 1-1.1 1.7Z"/>\n</svg></slot>\n    <slot name="off"><svg aria-hidden="true" viewBox="0 0 26 24">\n  <path d="M17.73 14.09a1.4 1.4 0 0 1-1 .37 1.579 1.579 0 0 1-1.27-.58A3 3 0 0 1 15 12a2.8 2.8 0 0 1 .5-1.85 1.63 1.63 0 0 1 1.29-.57 1.47 1.47 0 0 1 1.51 1.2l1.43-.34A2.89 2.89 0 0 0 19 9.07a3 3 0 0 0-2.14-.78 3.14 3.14 0 0 0-2.42 1 3.91 3.91 0 0 0-.93 2.78 3.74 3.74 0 0 0 .92 2.66 3.07 3.07 0 0 0 2.34 1 3.07 3.07 0 0 0 1.91-.57 3.17 3.17 0 0 0 1.07-1.74l-1.4-.45c-.083.43-.3.822-.62 1.12Zm-7.22 0a1.43 1.43 0 0 1-1 .37 1.58 1.58 0 0 1-1.27-.58A3 3 0 0 1 7.76 12a2.8 2.8 0 0 1 .5-1.85 1.63 1.63 0 0 1 1.29-.57 1.47 1.47 0 0 1 1.51 1.2l1.43-.34a2.81 2.81 0 0 0-.74-1.32 2.94 2.94 0 0 0-2.13-.78 3.18 3.18 0 0 0-2.43 1 4 4 0 0 0-.92 2.78 3.74 3.74 0 0 0 .92 2.66 3.07 3.07 0 0 0 2.34 1 3.07 3.07 0 0 0 1.91-.57 3.23 3.23 0 0 0 1.07-1.74l-1.4-.45a2.06 2.06 0 0 1-.6 1.07Zm12.32-8.41a2.59 2.59 0 0 0-2.3-2.51C18.72 3.05 15.86 3 13 3c-2.86 0-5.72.05-7.53.17a2.59 2.59 0 0 0-2.3 2.51c-.23 4.207-.23 8.423 0 12.63a2.57 2.57 0 0 0 2.3 2.5c1.81.13 4.67.19 7.53.19 2.86 0 5.72-.06 7.53-.19a2.57 2.57 0 0 0 2.3-2.5c.23-4.207.23-8.423 0-12.63Zm-1.49 12.53a1.11 1.11 0 0 1-.91 1.11c-1.67.11-4.45.18-7.43.18-2.98 0-5.76-.07-7.43-.18a1.11 1.11 0 0 1-.91-1.11c-.21-4.14-.21-8.29 0-12.43a1.11 1.11 0 0 1 .91-1.11C7.24 4.56 10 4.49 13 4.49s5.76.07 7.43.18a1.11 1.11 0 0 1 .91 1.11c.21 4.14.21 8.29 0 12.43Z"/>\n</svg></slot>\n  </slot>\n';const JG=`\n  <slot name="tooltip-enable">${Nz("Enable captions")}</slot>\n  <slot name="tooltip-disable">${Nz("Disable captions")}</slot>\n`,eK=e=>{e.setAttribute("aria-checked",pq(e).toString())};class tK extends qG{static get observedAttributes(){return[...super.observedAttributes,lz.MEDIA_SUBTITLES_LIST,lz.MEDIA_SUBTITLES_SHOWING]}constructor(){super({slotTemplate:ZG,tooltipContent:JG,...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}}),this._captionsReady=!1}connectedCallback(){super.connectedCallback(),this.setAttribute("role","switch"),this.setAttribute("aria-label",Nz("closed captions")),eK(this)}attributeChangedCallback(e,t,n){super.attributeChangedCallback(e,t,n),e===lz.MEDIA_SUBTITLES_SHOWING&&eK(this)}get mediaSubtitlesList(){return nK(this,lz.MEDIA_SUBTITLES_LIST)}set mediaSubtitlesList(e){rK(this,lz.MEDIA_SUBTITLES_LIST,e)}get mediaSubtitlesShowing(){return nK(this,lz.MEDIA_SUBTITLES_SHOWING)}set mediaSubtitlesShowing(e){rK(this,lz.MEDIA_SUBTITLES_SHOWING,e)}handleClick(){this.dispatchEvent(new Wz.CustomEvent(iz.MEDIA_TOGGLE_SUBTITLES_REQUEST,{composed:!0,bubbles:!0}))}}const nK=(e,t)=>{const n=e.getAttribute(t);return n?oq(n):[]},rK=(e,t,n)=>{if(!(null==n?void 0:n.length))return void e.removeAttribute(t);const r=cq(n);e.getAttribute(t)!==r&&e.setAttribute(t,r)};Wz.customElements.get("media-captions-button")||Wz.customElements.define("media-captions-button",tK);const iK=zz.createElement("template");iK.innerHTML=`\n  <style>\n  :host([${lz.MEDIA_IS_CASTING}]) slot[name=icon] slot:not([name=exit]) {\n    display: none !important;\n  }\n\n  \n  :host(:not([${lz.MEDIA_IS_CASTING}])) slot[name=icon] slot:not([name=enter]) {\n    display: none !important;\n  }\n\n  :host([${lz.MEDIA_IS_CASTING}]) slot[name=tooltip-enter],\n    :host(:not([${lz.MEDIA_IS_CASTING}])) slot[name=tooltip-exit] {\n      display: none;\n    }\n  </style>\n\n  <slot name="icon">\n    <slot name="enter"><svg aria-hidden="true" viewBox="0 0 24 24"><g><path class="cast_caf_icon_arch0" d="M1,18 L1,21 L4,21 C4,19.3 2.66,18 1,18 L1,18 Z"/><path class="cast_caf_icon_arch1" d="M1,14 L1,16 C3.76,16 6,18.2 6,21 L8,21 C8,17.13 4.87,14 1,14 L1,14 Z"/><path class="cast_caf_icon_arch2" d="M1,10 L1,12 C5.97,12 10,16.0 10,21 L12,21 C12,14.92 7.07,10 1,10 L1,10 Z"/><path class="cast_caf_icon_box" d="M21,3 L3,3 C1.9,3 1,3.9 1,5 L1,8 L3,8 L3,5 L21,5 L21,19 L14,19 L14,21 L21,21 C22.1,21 23,20.1 23,19 L23,5 C23,3.9 22.1,3 21,3 L21,3 Z"/></g></svg></slot>\n    <slot name="exit"><svg aria-hidden="true" viewBox="0 0 24 24"><g><path class="cast_caf_icon_arch0" d="M1,18 L1,21 L4,21 C4,19.3 2.66,18 1,18 L1,18 Z"/><path class="cast_caf_icon_arch1" d="M1,14 L1,16 C3.76,16 6,18.2 6,21 L8,21 C8,17.13 4.87,14 1,14 L1,14 Z"/><path class="cast_caf_icon_arch2" d="M1,10 L1,12 C5.97,12 10,16.0 10,21 L12,21 C12,14.92 7.07,10 1,10 L1,10 Z"/><path class="cast_caf_icon_box" d="M21,3 L3,3 C1.9,3 1,3.9 1,5 L1,8 L3,8 L3,5 L21,5 L21,19 L14,19 L14,21 L21,21 C22.1,21 23,20.1 23,19 L23,5 C23,3.9 22.1,3 21,3 L21,3 Z"/><path class="cast_caf_icon_boxfill" d="M5,7 L5,8.63 C8,8.6 13.37,14 13.37,17 L19,17 L19,7 Z"/></g></svg></slot>\n  </slot>\n`;const aK=`\n  <slot name="tooltip-enter">${Nz("Start casting")}</slot>\n  <slot name="tooltip-exit">${Nz("Stop casting")}</slot>\n`,oK=e=>{const t=e.mediaIsCasting?Nz("stop casting"):Nz("start casting");e.setAttribute("aria-label",t)};class sK extends qG{static get observedAttributes(){return[...super.observedAttributes,lz.MEDIA_IS_CASTING,lz.MEDIA_CAST_UNAVAILABLE]}constructor(){super({slotTemplate:iK,tooltipContent:aK,...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}})}connectedCallback(){super.connectedCallback(),oK(this)}attributeChangedCallback(e,t,n){super.attributeChangedCallback(e,t,n),e===lz.MEDIA_IS_CASTING&&oK(this)}get mediaIsCasting(){return cH(this,lz.MEDIA_IS_CASTING)}set mediaIsCasting(e){uH(this,lz.MEDIA_IS_CASTING,e)}get mediaCastUnavailable(){return dH(this,lz.MEDIA_CAST_UNAVAILABLE)}set mediaCastUnavailable(e){hH(this,lz.MEDIA_CAST_UNAVAILABLE,e)}handleClick(){const e=this.mediaIsCasting?iz.MEDIA_EXIT_CAST_REQUEST:iz.MEDIA_ENTER_CAST_REQUEST;this.dispatchEvent(new Wz.CustomEvent(e,{composed:!0,bubbles:!0}))}}Wz.customElements.get("media-cast-button")||Wz.customElements.define("media-cast-button",sK);var lK,cK,uK,dK,hK,pK,fK,mK,gK,vK,yK,bK,wK,EK,xK,_K=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},AK=(e,t,n)=>(_K(e,t,"read from private field"),n?n.call(e):t.get(e)),TK=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},SK=(e,t,n,r)=>(_K(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),kK=(e,t,n)=>(_K(e,t,"access private method"),n);const CK="open",IK="anchor";class RK extends Wz.HTMLElement{constructor(){super(),TK(this,dK),TK(this,pK),TK(this,mK),TK(this,vK),TK(this,bK),TK(this,EK),TK(this,lK,!1),TK(this,cK,null),TK(this,uK,null),this.addEventListener("invoke",this),this.addEventListener("focusout",this),this.addEventListener("keydown",this)}static get observedAttributes(){return[CK,IK]}get open(){return cH(this,CK)}set open(e){uH(this,CK,e)}handleEvent(e){switch(e.type){case"invoke":kK(this,vK,yK).call(this,e);break;case"focusout":kK(this,bK,wK).call(this,e);break;case"keydown":kK(this,EK,xK).call(this,e)}}connectedCallback(){kK(this,dK,hK).call(this),this.role||(this.role="dialog")}attributeChangedCallback(e,t,n){kK(this,dK,hK).call(this),e===CK&&n!==t&&(this.open?kK(this,pK,fK).call(this):kK(this,mK,gK).call(this))}focus(){SK(this,cK,nH());const e=!this.dispatchEvent(new Event("focus",{composed:!0,cancelable:!0})),t=!this.dispatchEvent(new Event("focusin",{composed:!0,bubbles:!0,cancelable:!0}));if(e||t)return;const n=this.querySelector('[autofocus], [tabindex]:not([tabindex="-1"]), [role="menu"]');null==n||n.focus()}get keysUsed(){return["Escape","Tab"]}}lK=new WeakMap,cK=new WeakMap,uK=new WeakMap,dK=new WeakSet,hK=function(){if(!AK(this,lK)&&(SK(this,lK,!0),!this.shadowRoot)){this.attachShadow({mode:"open"});const e=function(e){const t={};for(const n of e)t[n.name]=n.value;return t}(this.attributes);this.shadowRoot.innerHTML=`\n        ${this.constructor.getTemplateHTML(e)}\n      `,queueMicrotask((()=>{const{style:e}=aH(this.shadowRoot,":host");e.setProperty("transition","display .15s, visibility .15s, opacity .15s ease-in, transform .15s ease-in")}))}},pK=new WeakSet,fK=function(){var e;null==(e=AK(this,uK))||e.setAttribute("aria-expanded","true"),this.dispatchEvent(new Event("open",{composed:!0,bubbles:!0})),this.addEventListener("transitionend",(()=>this.focus()),{once:!0})},mK=new WeakSet,gK=function(){var e;null==(e=AK(this,uK))||e.setAttribute("aria-expanded","false"),this.dispatchEvent(new Event("close",{composed:!0,bubbles:!0}))},vK=new WeakSet,yK=function(e){SK(this,uK,e.relatedTarget),eH(this,e.relatedTarget)||(this.open=!this.open)},bK=new WeakSet,wK=function(e){var t;eH(this,e.relatedTarget)||(null==(t=AK(this,cK))||t.focus(),AK(this,uK)&&AK(this,uK)!==e.relatedTarget&&this.open&&(this.open=!1))},EK=new WeakSet,xK=function(e){var t,n,r,i,a;const{key:o,ctrlKey:s,altKey:l,metaKey:c}=e;s||l||c||this.keysUsed.includes(o)&&(e.preventDefault(),e.stopPropagation(),"Tab"===o?(e.shiftKey?null==(n=null==(t=this.previousElementSibling)?void 0:t.focus)||n.call(t):null==(i=null==(r=this.nextElementSibling)?void 0:r.focus)||i.call(r),this.blur()):"Escape"===o&&(null==(a=AK(this,cK))||a.focus(),this.open=!1))},RK.getTemplateHTML=function(e){return`\n    <style>\n      :host {\n        font: var(--media-font,\n          var(--media-font-weight, normal)\n          var(--media-font-size, 14px) /\n          var(--media-text-content-height, var(--media-control-height, 24px))\n          var(--media-font-family, helvetica neue, segoe ui, roboto, arial, sans-serif));\n        color: var(--media-text-color, var(--media-primary-color, rgb(238 238 238)));\n        display: var(--media-dialog-display, inline-flex);\n        justify-content: center;\n        align-items: center;\n        \n        transition-behavior: allow-discrete;\n        visibility: hidden;\n        opacity: 0;\n        transform: translateY(2px) scale(.99);\n        pointer-events: none;\n      }\n\n      :host([open]) {\n        transition: display .2s, visibility 0s, opacity .2s ease-out, transform .15s ease-out;\n        visibility: visible;\n        opacity: 1;\n        transform: translateY(0) scale(1);\n        pointer-events: auto;\n      }\n\n      #content {\n        display: flex;\n        position: relative;\n        box-sizing: border-box;\n        width: min(320px, 100%);\n        word-wrap: break-word;\n        max-height: 100%;\n        overflow: auto;\n        text-align: center;\n        line-height: 1.4;\n      }\n    </style>\n    ${this.getSlotTemplateHTML(e)}\n  `},RK.getSlotTemplateHTML=function(e){return'\n    <slot id="content"></slot>\n  '},Wz.customElements.get("media-chrome-dialog")||Wz.customElements.define("media-chrome-dialog",RK);var DK,LK,PK,MK,NK,OK,jK,FK,UK,BK,$K,VK,WK,zK,HK,qK,GK,KK,YK,QK,XK,ZK,JK,eY,tY,nY=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},rY=(e,t,n)=>(nY(e,t,"read from private field"),n?n.call(e):t.get(e)),iY=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},aY=(e,t,n,r)=>(nY(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),oY=(e,t,n)=>(nY(e,t,"access private method"),n);const sY=zz.createElement("template");sY.innerHTML='\n  <style>\n    :host {\n      --_focus-box-shadow: var(--media-focus-box-shadow, inset 0 0 0 2px rgb(27 127 204 / .9));\n      --_media-range-padding: var(--media-range-padding, var(--media-control-padding, 10px));\n\n      box-shadow: var(--_focus-visible-box-shadow, none);\n      background: var(--media-control-background, var(--media-secondary-color, rgb(20 20 30 / .7)));\n      height: calc(var(--media-control-height, 24px) + 2 * var(--_media-range-padding));\n      display: inline-flex;\n      align-items: center;\n      \n      vertical-align: middle;\n      box-sizing: border-box;\n      position: relative;\n      width: 100px;\n      transition: background .15s linear;\n      cursor: var(--media-cursor, pointer);\n      pointer-events: auto;\n      touch-action: none; \n    }\n\n    \n    input[type=range]:focus {\n      outline: 0;\n    }\n    input[type=range]:focus::-webkit-slider-runnable-track {\n      outline: 0;\n    }\n\n    :host(:hover) {\n      background: var(--media-control-hover-background, rgb(50 50 70 / .7));\n    }\n\n    #leftgap {\n      padding-left: var(--media-range-padding-left, var(--_media-range-padding));\n    }\n\n    #rightgap {\n      padding-right: var(--media-range-padding-right, var(--_media-range-padding));\n    }\n\n    #startpoint,\n    #endpoint {\n      position: absolute;\n    }\n\n    #endpoint {\n      right: 0;\n    }\n\n    #container {\n      \n      width: var(--media-range-track-width, 100%);\n      transform: translate(var(--media-range-track-translate-x, 0px), var(--media-range-track-translate-y, 0px));\n      position: relative;\n      height: 100%;\n      display: flex;\n      align-items: center;\n      min-width: 40px;\n    }\n\n    #range {\n      \n      display: var(--media-time-range-hover-display, block);\n      bottom: var(--media-time-range-hover-bottom, -7px);\n      height: var(--media-time-range-hover-height, max(100% + 7px, 25px));\n      width: 100%;\n      position: absolute;\n      cursor: var(--media-cursor, pointer);\n\n      -webkit-appearance: none; \n      -webkit-tap-highlight-color: transparent;\n      background: transparent; \n      margin: 0;\n      z-index: 1;\n    }\n\n    @media (hover: hover) {\n      #range {\n        bottom: var(--media-time-range-hover-bottom, -5px);\n        height: var(--media-time-range-hover-height, max(100% + 5px, 20px));\n      }\n    }\n\n    \n    \n    #range::-webkit-slider-thumb {\n      -webkit-appearance: none;\n      background: transparent;\n      width: .1px;\n      height: .1px;\n    }\n\n    \n    #range::-moz-range-thumb {\n      background: transparent;\n      border: transparent;\n      width: .1px;\n      height: .1px;\n    }\n\n    #appearance {\n      height: var(--media-range-track-height, 4px);\n      display: flex;\n      flex-direction: column;\n      justify-content: center;\n      width: 100%;\n      position: absolute;\n      \n      will-change: transform;\n    }\n\n    #track {\n      background: var(--media-range-track-background, rgb(255 255 255 / .2));\n      border-radius: var(--media-range-track-border-radius, 1px);\n      border: var(--media-range-track-border, none);\n      outline: var(--media-range-track-outline);\n      outline-offset: var(--media-range-track-outline-offset);\n      backdrop-filter: var(--media-range-track-backdrop-filter);\n      -webkit-backdrop-filter: var(--media-range-track-backdrop-filter);\n      box-shadow: var(--media-range-track-box-shadow, none);\n      position: absolute;\n      width: 100%;\n      height: 100%;\n      overflow: hidden;\n    }\n\n    #progress,\n    #pointer {\n      position: absolute;\n      height: 100%;\n      will-change: width;\n    }\n\n    #progress {\n      background: var(--media-range-bar-color, var(--media-primary-color, rgb(238 238 238)));\n      transition: var(--media-range-track-transition);\n    }\n\n    #pointer {\n      background: var(--media-range-track-pointer-background);\n      border-right: var(--media-range-track-pointer-border-right);\n      transition: visibility .25s, opacity .25s;\n      visibility: hidden;\n      opacity: 0;\n    }\n\n    @media (hover: hover) {\n      :host(:hover) #pointer {\n        transition: visibility .5s, opacity .5s;\n        visibility: visible;\n        opacity: 1;\n      }\n    }\n\n    #thumb,\n    ::slotted([slot=thumb]) {\n      width: var(--media-range-thumb-width, 10px);\n      height: var(--media-range-thumb-height, 10px);\n      transition: var(--media-range-thumb-transition);\n      transform: var(--media-range-thumb-transform, none);\n      opacity: var(--media-range-thumb-opacity, 1);\n      translate: -50%;\n      position: absolute;\n      left: 0;\n      cursor: var(--media-cursor, pointer);\n    }\n\n    #thumb {\n      border-radius: var(--media-range-thumb-border-radius, 10px);\n      background: var(--media-range-thumb-background, var(--media-primary-color, rgb(238 238 238)));\n      box-shadow: var(--media-range-thumb-box-shadow, 1px 1px 1px transparent);\n      border: var(--media-range-thumb-border, none);\n    }\n\n    :host([disabled]) #thumb {\n      background-color: #777;\n    }\n\n    .segments #appearance {\n      height: var(--media-range-segment-hover-height, 7px);\n    }\n\n    #track {\n      clip-path: url(#segments-clipping);\n    }\n\n    #segments {\n      --segments-gap: var(--media-range-segments-gap, 2px);\n      position: absolute;\n      width: 100%;\n      height: 100%;\n    }\n\n    #segments-clipping {\n      transform: translateX(calc(var(--segments-gap) / 2));\n    }\n\n    #segments-clipping:empty {\n      display: none;\n    }\n\n    #segments-clipping rect {\n      height: var(--media-range-track-height, 4px);\n      y: calc((var(--media-range-segment-hover-height, 7px) - var(--media-range-track-height, 4px)) / 2);\n      transition: var(--media-range-segment-transition, transform .1s ease-in-out);\n      transform: var(--media-range-segment-transform, scaleY(1));\n      transform-origin: center;\n    }\n  </style>\n  <div id="leftgap"></div>\n  <div id="container">\n    <div id="startpoint"></div>\n    <div id="endpoint"></div>\n    <div id="appearance">\n      <div id="track" part="track">\n        <div id="pointer"></div>\n        <div id="progress" part="progress"></div>\n      </div>\n      <slot name="thumb">\n        <div id="thumb" part="thumb"></div>\n      </slot>\n      <svg id="segments"><clipPath id="segments-clipping"></clipPath></svg>\n    </div>\n    <input id="range" type="range" min="0" max="1" step="any" value="0">\n  </div>\n  <div id="rightgap"></div>\n';class lY extends Wz.HTMLElement{constructor(){super(),iY(this,BK),iY(this,VK),iY(this,zK),iY(this,qK),iY(this,KK),iY(this,QK),iY(this,ZK),iY(this,eY),iY(this,DK,void 0),iY(this,LK,void 0),iY(this,PK,void 0),iY(this,MK,void 0),iY(this,NK,{}),iY(this,OK,[]),iY(this,jK,(()=>{if(this.range.matches(":focus-visible")){const{style:e}=aH(this.shadowRoot,":host");e.setProperty("--_focus-visible-box-shadow","var(--_focus-box-shadow)")}})),iY(this,FK,(()=>{const{style:e}=aH(this.shadowRoot,":host");e.removeProperty("--_focus-visible-box-shadow")})),iY(this,UK,(()=>{const e=this.shadowRoot.querySelector("#segments-clipping");e&&e.parentNode.append(e)})),this.shadowRoot||(this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(sY.content.cloneNode(!0))),this.container=this.shadowRoot.querySelector("#container"),aY(this,PK,this.shadowRoot.querySelector("#startpoint")),aY(this,MK,this.shadowRoot.querySelector("#endpoint")),this.range=this.shadowRoot.querySelector("#range"),this.appearance=this.shadowRoot.querySelector("#appearance")}static get observedAttributes(){return["disabled","aria-disabled",az.MEDIA_CONTROLLER]}attributeChangedCallback(e,t,n){var r,i,a,o,s;e===az.MEDIA_CONTROLLER?(t&&(null==(i=null==(r=rY(this,DK))?void 0:r.unassociateElement)||i.call(r,this),aY(this,DK,null)),n&&this.isConnected&&(aY(this,DK,null==(a=this.getRootNode())?void 0:a.getElementById(n)),null==(s=null==(o=rY(this,DK))?void 0:o.associateElement)||s.call(o,this))):("disabled"===e||"aria-disabled"===e&&t!==n)&&(null==n?(this.range.removeAttribute(e),oY(this,VK,WK).call(this)):(this.range.setAttribute(e,n),oY(this,zK,HK).call(this)))}connectedCallback(){var e,t,n;const{style:r}=aH(this.shadowRoot,":host");r.setProperty("display",`var(--media-control-display, var(--${this.localName}-display, inline-flex))`),rY(this,NK).pointer=aH(this.shadowRoot,"#pointer"),rY(this,NK).progress=aH(this.shadowRoot,"#progress"),rY(this,NK).thumb=aH(this.shadowRoot,'#thumb, ::slotted([slot="thumb"])'),rY(this,NK).activeSegment=aH(this.shadowRoot,"#segments-clipping rect:nth-child(0)");const i=this.getAttribute(az.MEDIA_CONTROLLER);i&&(aY(this,DK,null==(e=this.getRootNode())?void 0:e.getElementById(i)),null==(n=null==(t=rY(this,DK))?void 0:t.associateElement)||n.call(t,this)),this.updateBar(),this.shadowRoot.addEventListener("focusin",rY(this,jK)),this.shadowRoot.addEventListener("focusout",rY(this,FK)),oY(this,VK,WK).call(this),Kz(this.container,rY(this,UK))}disconnectedCallback(){var e,t;oY(this,zK,HK).call(this),null==(t=null==(e=rY(this,DK))?void 0:e.unassociateElement)||t.call(e,this),aY(this,DK,null),this.shadowRoot.removeEventListener("focusin",rY(this,jK)),this.shadowRoot.removeEventListener("focusout",rY(this,FK)),Yz(this.container,rY(this,UK))}updatePointerBar(e){var t;null==(t=rY(this,NK).pointer)||t.style.setProperty("width",100*this.getPointerRatio(e)+"%")}updateBar(){var e,t;const n=100*this.range.valueAsNumber;null==(e=rY(this,NK).progress)||e.style.setProperty("width",`${n}%`),null==(t=rY(this,NK).thumb)||t.style.setProperty("left",`${n}%`)}updateSegments(e){const t=this.shadowRoot.querySelector("#segments-clipping");if(t.textContent="",this.container.classList.toggle("segments",!!(null==e?void 0:e.length)),!(null==e?void 0:e.length))return;const n=[...new Set([+this.range.min,...e.flatMap((e=>[e.start,e.end])),+this.range.max])];aY(this,OK,[...n]);const r=n.pop();for(const[i,a]of n.entries()){const[e,o]=[0===i,i===n.length-1],s=e?"calc(var(--segments-gap) / -1)":100*a+"%",l=`calc(${100*((o?r:n[i+1])-a)}%${e||o?"":" - var(--segments-gap)"})`,c=zz.createElementNS("http://www.w3.org/2000/svg","rect"),u=aH(this.shadowRoot,`#segments-clipping rect:nth-child(${i+1})`);u.style.setProperty("x",s),u.style.setProperty("width",l),t.append(c)}}getPointerRatio(e){return function(e,t,n,r){const i=r.x-n.x,a=r.y-n.y,o=i*i+a*a;if(0===o)return 0;const s=((e-n.x)*i+(t-n.y)*a)/o;return Math.max(0,Math.min(1,s))}(e.clientX,e.clientY,rY(this,PK).getBoundingClientRect(),rY(this,MK).getBoundingClientRect())}get dragging(){return this.hasAttribute("dragging")}handleEvent(e){switch(e.type){case"pointermove":oY(this,eY,tY).call(this,e);break;case"input":this.updateBar();break;case"pointerenter":oY(this,KK,YK).call(this,e);break;case"pointerdown":oY(this,qK,GK).call(this,e);break;case"pointerup":oY(this,QK,XK).call(this);break;case"pointerleave":oY(this,ZK,JK).call(this)}}get keysUsed(){return["ArrowUp","ArrowRight","ArrowDown","ArrowLeft"]}}DK=new WeakMap,LK=new WeakMap,PK=new WeakMap,MK=new WeakMap,NK=new WeakMap,OK=new WeakMap,jK=new WeakMap,FK=new WeakMap,UK=new WeakMap,BK=new WeakSet,$K=function(e){const t=rY(this,NK).activeSegment;if(!t)return;const n=this.getPointerRatio(e),r=rY(this,OK).findIndex(((e,t,r)=>{const i=r[t+1];return null!=i&&n>=e&&n<=i})),i=`#segments-clipping rect:nth-child(${r+1})`;t.selectorText==i&&t.style.transform||(t.selectorText=i,t.style.setProperty("transform","var(--media-range-segment-hover-transform, scaleY(2))"))},VK=new WeakSet,WK=function(){this.hasAttribute("disabled")||(this.addEventListener("input",this),this.addEventListener("pointerdown",this),this.addEventListener("pointerenter",this))},zK=new WeakSet,HK=function(){var e,t;this.removeEventListener("input",this),this.removeEventListener("pointerdown",this),this.removeEventListener("pointerenter",this),null==(e=Wz.window)||e.removeEventListener("pointerup",this),null==(t=Wz.window)||t.removeEventListener("pointermove",this)},qK=new WeakSet,GK=function(e){var t;aY(this,LK,e.composedPath().includes(this.range)),null==(t=Wz.window)||t.addEventListener("pointerup",this)},KK=new WeakSet,YK=function(e){var t;"mouse"!==e.pointerType&&oY(this,qK,GK).call(this,e),this.addEventListener("pointerleave",this),null==(t=Wz.window)||t.addEventListener("pointermove",this)},QK=new WeakSet,XK=function(){var e;null==(e=Wz.window)||e.removeEventListener("pointerup",this),this.toggleAttribute("dragging",!1),this.range.disabled=this.hasAttribute("disabled")},ZK=new WeakSet,JK=function(){var e,t;this.removeEventListener("pointerleave",this),null==(e=Wz.window)||e.removeEventListener("pointermove",this),this.toggleAttribute("dragging",!1),this.range.disabled=this.hasAttribute("disabled"),null==(t=rY(this,NK).activeSegment)||t.style.removeProperty("transform")},eY=new WeakSet,tY=function(e){this.toggleAttribute("dragging",1===e.buttons||"mouse"!==e.pointerType),this.updatePointerBar(e),oY(this,BK,$K).call(this,e),!this.dragging||"mouse"===e.pointerType&&rY(this,LK)||(this.range.disabled=!0,this.range.valueAsNumber=this.getPointerRatio(e),this.range.dispatchEvent(new Event("input",{bubbles:!0,composed:!0})))},Wz.customElements.get("media-chrome-range")||Wz.customElements.define("media-chrome-range",lY);var cY,uY=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},dY=(e,t,n)=>(uY(e,t,"read from private field"),n?n.call(e):t.get(e)),hY=(e,t,n,r)=>(uY(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n);const pY=zz.createElement("template");pY.innerHTML='\n  <style>\n    :host {\n      \n      box-sizing: border-box;\n      display: var(--media-control-display, var(--media-control-bar-display, inline-flex));\n      color: var(--media-text-color, var(--media-primary-color, rgb(238 238 238)));\n      --media-loading-indicator-icon-height: 44px;\n    }\n\n    ::slotted(media-time-range),\n    ::slotted(media-volume-range) {\n      min-height: 100%;\n    }\n\n    ::slotted(media-time-range),\n    ::slotted(media-clip-selector) {\n      flex-grow: 1;\n    }\n\n    ::slotted([role="menu"]) {\n      position: absolute;\n    }\n  </style>\n\n  <slot></slot>\n';class fY extends Wz.HTMLElement{constructor(){super(),((e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)})(this,cY,void 0),this.shadowRoot||(this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(pY.content.cloneNode(!0)))}static get observedAttributes(){return[az.MEDIA_CONTROLLER]}attributeChangedCallback(e,t,n){var r,i,a,o,s;e===az.MEDIA_CONTROLLER&&(t&&(null==(i=null==(r=dY(this,cY))?void 0:r.unassociateElement)||i.call(r,this),hY(this,cY,null)),n&&this.isConnected&&(hY(this,cY,null==(a=this.getRootNode())?void 0:a.getElementById(n)),null==(s=null==(o=dY(this,cY))?void 0:o.associateElement)||s.call(o,this)))}connectedCallback(){var e,t,n;const r=this.getAttribute(az.MEDIA_CONTROLLER);r&&(hY(this,cY,null==(e=this.getRootNode())?void 0:e.getElementById(r)),null==(n=null==(t=dY(this,cY))?void 0:t.associateElement)||n.call(t,this))}disconnectedCallback(){var e,t;null==(t=null==(e=dY(this,cY))?void 0:e.unassociateElement)||t.call(e,this),hY(this,cY,null)}}cY=new WeakMap,Wz.customElements.get("media-control-bar")||Wz.customElements.define("media-control-bar",fY);var mY,gY=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},vY=(e,t,n)=>(gY(e,t,"read from private field"),n?n.call(e):t.get(e)),yY=(e,t,n,r)=>(gY(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n);const bY=zz.createElement("template");bY.innerHTML="\n  <style>\n    :host {\n      font: var(--media-font,\n        var(--media-font-weight, normal)\n        var(--media-font-size, 14px) /\n        var(--media-text-content-height, var(--media-control-height, 24px))\n        var(--media-font-family, helvetica neue, segoe ui, roboto, arial, sans-serif));\n      color: var(--media-text-color, var(--media-primary-color, rgb(238 238 238)));\n      background: var(--media-text-background, var(--media-control-background, var(--media-secondary-color, rgb(20 20 30 / .7))));\n      padding: var(--media-control-padding, 10px);\n      display: inline-flex;\n      justify-content: center;\n      align-items: center;\n      vertical-align: middle;\n      box-sizing: border-box;\n      text-align: center;\n      pointer-events: auto;\n    }\n\n    \n    :host(:focus-visible) {\n      box-shadow: inset 0 0 0 2px rgb(27 127 204 / .9);\n      outline: 0;\n    }\n\n    \n    :host(:where(:focus)) {\n      box-shadow: none;\n      outline: 0;\n    }\n  </style>\n  <slot></slot>\n";class wY extends Wz.HTMLElement{constructor(){super(),((e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)})(this,mY,void 0),this.shadowRoot||(this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(bY.content.cloneNode(!0)))}static get observedAttributes(){return[az.MEDIA_CONTROLLER]}attributeChangedCallback(e,t,n){var r,i,a,o,s;e===az.MEDIA_CONTROLLER&&(t&&(null==(i=null==(r=vY(this,mY))?void 0:r.unassociateElement)||i.call(r,this),yY(this,mY,null)),n&&this.isConnected&&(yY(this,mY,null==(a=this.getRootNode())?void 0:a.getElementById(n)),null==(s=null==(o=vY(this,mY))?void 0:o.associateElement)||s.call(o,this)))}connectedCallback(){var e,t,n;const{style:r}=aH(this.shadowRoot,":host");r.setProperty("display",`var(--media-control-display, var(--${this.localName}-display, inline-flex))`);const i=this.getAttribute(az.MEDIA_CONTROLLER);i&&(yY(this,mY,null==(e=this.getRootNode())?void 0:e.getElementById(i)),null==(n=null==(t=vY(this,mY))?void 0:t.associateElement)||n.call(t,this))}disconnectedCallback(){var e,t;null==(t=null==(e=vY(this,mY))?void 0:e.unassociateElement)||t.call(e,this),yY(this,mY,null)}}mY=new WeakMap,Wz.customElements.get("media-text-display")||Wz.customElements.define("media-text-display",wY);var EY,xY=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},_Y=(e,t,n)=>(xY(e,t,"read from private field"),n?n.call(e):t.get(e));class AY extends wY{constructor(){var e,t,n,r;super(),((e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)})(this,EY,void 0),e=this,t=EY,n=this.shadowRoot.querySelector("slot"),xY(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),_Y(this,EY).textContent=Rz(0)}static get observedAttributes(){return[...super.observedAttributes,lz.MEDIA_DURATION]}attributeChangedCallback(e,t,n){e===lz.MEDIA_DURATION&&(_Y(this,EY).textContent=Rz(+n)),super.attributeChangedCallback(e,t,n)}get mediaDuration(){return sH(this,lz.MEDIA_DURATION)}set mediaDuration(e){lH(this,lz.MEDIA_DURATION,e)}}EY=new WeakMap,Wz.customElements.get("media-duration-display")||Wz.customElements.define("media-duration-display",AY);const TY={2:Nz("Network Error"),3:Nz("Decode Error"),4:Nz("Source Not Supported"),5:Nz("Encryption Error")},SY={2:Nz("A network error caused the media download to fail."),3:Nz("A media error caused playback to be aborted. The media could be corrupt or your browser does not support this format."),4:Nz("An unsupported error occurred. The server or network failed, or your browser does not support this format."),5:Nz("The media is encrypted and there are no keys to decrypt it.")},kY=e=>{var t,n;return 1===e.code?null:{title:null!=(t=TY[e.code])?t:`Error ${e.code}`,message:null!=(n=SY[e.code])?n:e.message}};var CY,IY=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)};function RY(e){var t;const{title:n,message:r}=null!=(t=kY(e))?t:{};let i="";return n&&(i+=`<slot name="error-${e.code}-title"><h3>${n}</h3></slot>`),r&&(i+=`<slot name="error-${e.code}-message"><p>${r}</p></slot>`),i}const DY=[lz.MEDIA_ERROR_CODE,lz.MEDIA_ERROR_MESSAGE];class LY extends RK{constructor(){super(...arguments),((e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)})(this,CY,null)}static get observedAttributes(){return[...super.observedAttributes,...DY]}formatErrorMessage(e){return this.constructor.formatErrorMessage(e)}attributeChangedCallback(e,t,n){var r;if(super.attributeChangedCallback(e,t,n),!DY.includes(e))return;const i=null!=(r=this.mediaError)?r:{code:this.mediaErrorCode,message:this.mediaErrorMessage};this.open=function(e){return e.code&&null!==kY(e)}(i),this.open&&(this.shadowRoot.querySelector("slot").name=`error-${this.mediaErrorCode}`,this.shadowRoot.querySelector("#content").innerHTML=this.formatErrorMessage(i))}get mediaError(){return IY(e=this,t=CY,"read from private field"),n?n.call(e):t.get(e);var e,t,n}set mediaError(e){((e,t,n,r)=>{IY(e,t,"write to private field"),r?r.call(e,n):t.set(e,n)})(this,CY,e)}get mediaErrorCode(){return sH(this,"mediaerrorcode")}set mediaErrorCode(e){lH(this,"mediaerrorcode",e)}get mediaErrorMessage(){return dH(this,"mediaerrormessage")}set mediaErrorMessage(e){hH(this,"mediaerrormessage",e)}}CY=new WeakMap,LY.getSlotTemplateHTML=function(e){return`\n    <style>\n      :host {\n        background: rgb(20 20 30 / .8);\n      }\n\n      #content {\n        display: block;\n        padding: 1.2em 1.5em;\n      }\n\n      h3,\n      p {\n        margin-block: 0 .3em;\n      }\n    </style>\n    <slot name="error-${e.mediaerrorcode}" id="content">\n      ${RY({code:+e.mediaerrorcode,message:e.mediaerrormessage})}\n    </slot>\n  `},LY.formatErrorMessage=RY,Wz.customElements.get("media-error-dialog")||Wz.customElements.define("media-error-dialog",LY);var PY=LY;const MY=zz.createElement("template");MY.innerHTML=`\n  <style>\n    :host([${lz.MEDIA_IS_FULLSCREEN}]) slot[name=icon] slot:not([name=exit]) {\n      display: none !important;\n    }\n\n    \n    :host(:not([${lz.MEDIA_IS_FULLSCREEN}])) slot[name=icon] slot:not([name=enter]) {\n      display: none !important;\n    }\n\n    :host([${lz.MEDIA_IS_FULLSCREEN}]) slot[name=tooltip-enter],\n    :host(:not([${lz.MEDIA_IS_FULLSCREEN}])) slot[name=tooltip-exit] {\n      display: none;\n    }\n  </style>\n\n  <slot name="icon">\n    <slot name="enter"><svg aria-hidden="true" viewBox="0 0 26 24">\n  <path d="M16 3v2.5h3.5V9H22V3h-6ZM4 9h2.5V5.5H10V3H4v6Zm15.5 9.5H16V21h6v-6h-2.5v3.5ZM6.5 15H4v6h6v-2.5H6.5V15Z"/>\n</svg></slot>\n    <slot name="exit"><svg aria-hidden="true" viewBox="0 0 26 24">\n  <path d="M18.5 6.5V3H16v6h6V6.5h-3.5ZM16 21h2.5v-3.5H22V15h-6v6ZM4 17.5h3.5V21H10v-6H4v2.5Zm3.5-11H4V9h6V3H7.5v3.5Z"/>\n</svg></slot>\n  </slot>\n`;const NY=`\n  <slot name="tooltip-enter">${Nz("Enter fullscreen mode")}</slot>\n  <slot name="tooltip-exit">${Nz("Exit fullscreen mode")}</slot>\n`,OY=e=>{const t=e.mediaIsFullscreen?Nz("exit fullscreen mode"):Nz("enter fullscreen mode");e.setAttribute("aria-label",t)};class jY extends qG{static get observedAttributes(){return[...super.observedAttributes,lz.MEDIA_IS_FULLSCREEN,lz.MEDIA_FULLSCREEN_UNAVAILABLE]}constructor(){super({slotTemplate:MY,tooltipContent:NY,...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}})}connectedCallback(){super.connectedCallback(),OY(this)}attributeChangedCallback(e,t,n){super.attributeChangedCallback(e,t,n),e===lz.MEDIA_IS_FULLSCREEN&&OY(this)}get mediaFullscreenUnavailable(){return dH(this,lz.MEDIA_FULLSCREEN_UNAVAILABLE)}set mediaFullscreenUnavailable(e){hH(this,lz.MEDIA_FULLSCREEN_UNAVAILABLE,e)}get mediaIsFullscreen(){return cH(this,lz.MEDIA_IS_FULLSCREEN)}set mediaIsFullscreen(e){uH(this,lz.MEDIA_IS_FULLSCREEN,e)}handleClick(){const e=this.mediaIsFullscreen?iz.MEDIA_EXIT_FULLSCREEN_REQUEST:iz.MEDIA_ENTER_FULLSCREEN_REQUEST;this.dispatchEvent(new Wz.CustomEvent(e,{composed:!0,bubbles:!0}))}}Wz.customElements.get("media-fullscreen-button")||Wz.customElements.define("media-fullscreen-button",jY);const{MEDIA_TIME_IS_LIVE:FY,MEDIA_PAUSED:UY}=lz,{MEDIA_SEEK_TO_LIVE_REQUEST:BY,MEDIA_PLAY_REQUEST:$Y}=iz,VY=zz.createElement("template");VY.innerHTML=`\n  <style>\n  :host { --media-tooltip-display: none; }\n  \n  slot[name=indicator] > *,\n  :host ::slotted([slot=indicator]) {\n    \n    min-width: auto;\n    fill: var(--media-live-button-icon-color, rgb(140, 140, 140));\n    color: var(--media-live-button-icon-color, rgb(140, 140, 140));\n  }\n\n  :host([${FY}]:not([${UY}])) slot[name=indicator] > *,\n  :host([${FY}]:not([${UY}])) ::slotted([slot=indicator]) {\n    fill: var(--media-live-button-indicator-color, rgb(255, 0, 0));\n    color: var(--media-live-button-indicator-color, rgb(255, 0, 0));\n  }\n\n  :host([${FY}]:not([${UY}])) {\n    cursor: var(--media-cursor, not-allowed);\n  }\n\n  slot[name=text]{\n    text-transform: uppercase;\n  }\n\n  </style>\n\n  <slot name="indicator"><svg viewBox="0 0 6 12"><circle cx="3" cy="6" r="2"></circle></svg></slot>\n  \n  <slot name="spacer">&nbsp;</slot><slot name="text">${Nz("live")}</slot>\n`;const WY=e=>{const t=e.mediaPaused||!e.mediaTimeIsLive,n=Nz(t?"seek to live":"playing live");e.setAttribute("aria-label",n),t?e.removeAttribute("aria-disabled"):e.setAttribute("aria-disabled","true")};class zY extends qG{static get observedAttributes(){return[...super.observedAttributes,UY,FY]}constructor(){super({slotTemplate:VY,...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}})}connectedCallback(){WY(this),super.connectedCallback()}attributeChangedCallback(e,t,n){super.attributeChangedCallback(e,t,n),WY(this)}get mediaPaused(){return cH(this,lz.MEDIA_PAUSED)}set mediaPaused(e){uH(this,lz.MEDIA_PAUSED,e)}get mediaTimeIsLive(){return cH(this,lz.MEDIA_TIME_IS_LIVE)}set mediaTimeIsLive(e){uH(this,lz.MEDIA_TIME_IS_LIVE,e)}handleClick(){!this.mediaPaused&&this.mediaTimeIsLive||(this.dispatchEvent(new Wz.CustomEvent(BY,{composed:!0,bubbles:!0})),this.hasAttribute(UY)&&this.dispatchEvent(new Wz.CustomEvent($Y,{composed:!0,bubbles:!0})))}}Wz.customElements.get("media-live-button")||Wz.customElements.define("media-live-button",zY);var HY,qY,GY=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},KY=(e,t,n)=>(GY(e,t,"read from private field"),n?n.call(e):t.get(e)),YY=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},QY=(e,t,n,r)=>(GY(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n);const XY="loadingdelay",ZY="noautohide",JY=zz.createElement("template");JY.innerHTML=`\n<style>\n:host {\n  display: var(--media-control-display, var(--media-loading-indicator-display, inline-block));\n  vertical-align: middle;\n  box-sizing: border-box;\n  --_loading-indicator-delay: var(--media-loading-indicator-transition-delay, 500ms);\n}\n\n#status {\n  color: rgba(0,0,0,0);\n  width: 0px;\n  height: 0px;\n}\n\n:host slot[name=icon] > *,\n:host ::slotted([slot=icon]) {\n  opacity: var(--media-loading-indicator-opacity, 0);\n  transition: opacity 0.15s;\n}\n\n:host([${lz.MEDIA_LOADING}]:not([${lz.MEDIA_PAUSED}])) slot[name=icon] > *,\n:host([${lz.MEDIA_LOADING}]:not([${lz.MEDIA_PAUSED}])) ::slotted([slot=icon]) {\n  opacity: var(--media-loading-indicator-opacity, 1);\n  transition: opacity 0.15s var(--_loading-indicator-delay);\n}\n\n:host #status {\n  visibility: var(--media-loading-indicator-opacity, hidden);\n  transition: visibility 0.15s;\n}\n\n:host([${lz.MEDIA_LOADING}]:not([${lz.MEDIA_PAUSED}])) #status {\n  visibility: var(--media-loading-indicator-opacity, visible);\n  transition: visibility 0.15s var(--_loading-indicator-delay);\n}\n\nsvg, img, ::slotted(svg), ::slotted(img) {\n  width: var(--media-loading-indicator-icon-width);\n  height: var(--media-loading-indicator-icon-height, 100px);\n  fill: var(--media-icon-color, var(--media-primary-color, rgb(238 238 238)));\n  vertical-align: middle;\n}\n</style>\n\n<slot name="icon">\n<svg aria-hidden="true" viewBox="0 0 100 100">\n  <path d="M73,50c0-12.7-10.3-23-23-23S27,37.3,27,50 M30.9,50c0-10.5,8.5-19.1,19.1-19.1S69.1,39.5,69.1,50">\n    <animateTransform\n       attributeName="transform"\n       attributeType="XML"\n       type="rotate"\n       dur="1s"\n       from="0 50 50"\n       to="360 50 50"\n       repeatCount="indefinite" />\n  </path>\n</svg>\n</slot>\n<div id="status" role="status" aria-live="polite">${Nz("media loading")}</div>\n`;class eQ extends Wz.HTMLElement{constructor(){if(super(),YY(this,HY,void 0),YY(this,qY,500),!this.shadowRoot){const e=this.attachShadow({mode:"open"}),t=JY.content.cloneNode(!0);e.appendChild(t)}}static get observedAttributes(){return[az.MEDIA_CONTROLLER,lz.MEDIA_PAUSED,lz.MEDIA_LOADING,XY]}attributeChangedCallback(e,t,n){var r,i,a,o,s;e===XY&&t!==n?this.loadingDelay=Number(n):e===az.MEDIA_CONTROLLER&&(t&&(null==(i=null==(r=KY(this,HY))?void 0:r.unassociateElement)||i.call(r,this),QY(this,HY,null)),n&&this.isConnected&&(QY(this,HY,null==(a=this.getRootNode())?void 0:a.getElementById(n)),null==(s=null==(o=KY(this,HY))?void 0:o.associateElement)||s.call(o,this)))}connectedCallback(){var e,t,n;const r=this.getAttribute(az.MEDIA_CONTROLLER);r&&(QY(this,HY,null==(e=this.getRootNode())?void 0:e.getElementById(r)),null==(n=null==(t=KY(this,HY))?void 0:t.associateElement)||n.call(t,this))}disconnectedCallback(){var e,t;null==(t=null==(e=KY(this,HY))?void 0:e.unassociateElement)||t.call(e,this),QY(this,HY,null)}get loadingDelay(){return KY(this,qY)}set loadingDelay(e){QY(this,qY,e);const{style:t}=aH(this.shadowRoot,":host");t.setProperty("--_loading-indicator-delay",`var(--media-loading-indicator-transition-delay, ${e}ms)`)}get mediaPaused(){return cH(this,lz.MEDIA_PAUSED)}set mediaPaused(e){uH(this,lz.MEDIA_PAUSED,e)}get mediaLoading(){return cH(this,lz.MEDIA_LOADING)}set mediaLoading(e){uH(this,lz.MEDIA_LOADING,e)}get mediaController(){return dH(this,az.MEDIA_CONTROLLER)}set mediaController(e){hH(this,az.MEDIA_CONTROLLER,e)}get noAutohide(){return cH(this,ZY)}set noAutohide(e){uH(this,ZY,e)}}HY=new WeakMap,qY=new WeakMap,Wz.customElements.get("media-loading-indicator")||Wz.customElements.define("media-loading-indicator",eQ);const{MEDIA_VOLUME_LEVEL:tQ}=lz,nQ='<svg aria-hidden="true" viewBox="0 0 24 24">\n  <path d="M3 9v6h4l5 5V4L7 9H3Zm13.5 3A4.5 4.5 0 0 0 14 8v8a4.47 4.47 0 0 0 2.5-4Z"/>\n</svg>',rQ=zz.createElement("template");rQ.innerHTML=`\n  <style>\n  \n  :host(:not([${tQ}])) slot[name=icon] slot:not([name=high]), \n  :host([${tQ}=high]) slot[name=icon] slot:not([name=high]) {\n    display: none !important;\n  }\n\n  :host([${tQ}=off]) slot[name=icon] slot:not([name=off]) {\n    display: none !important;\n  }\n\n  :host([${tQ}=low]) slot[name=icon] slot:not([name=low]) {\n    display: none !important;\n  }\n\n  :host([${tQ}=medium]) slot[name=icon] slot:not([name=medium]) {\n    display: none !important;\n  }\n\n  :host(:not([${tQ}=off])) slot[name=tooltip-unmute],\n  :host([${tQ}=off]) slot[name=tooltip-mute] {\n    display: none;\n  }\n  </style>\n\n  <slot name="icon">\n    <slot name="off"><svg aria-hidden="true" viewBox="0 0 24 24">\n  <path d="M16.5 12A4.5 4.5 0 0 0 14 8v2.18l2.45 2.45a4.22 4.22 0 0 0 .05-.63Zm2.5 0a6.84 6.84 0 0 1-.54 2.64L20 16.15A8.8 8.8 0 0 0 21 12a9 9 0 0 0-7-8.77v2.06A7 7 0 0 1 19 12ZM4.27 3 3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25A6.92 6.92 0 0 1 14 18.7v2.06A9 9 0 0 0 17.69 19l2 2.05L21 19.73l-9-9L4.27 3ZM12 4 9.91 6.09 12 8.18V4Z"/>\n</svg></slot>\n    <slot name="low">${nQ}</slot>\n    <slot name="medium">${nQ}</slot>\n    <slot name="high"><svg aria-hidden="true" viewBox="0 0 24 24">\n  <path d="M3 9v6h4l5 5V4L7 9H3Zm13.5 3A4.5 4.5 0 0 0 14 8v8a4.47 4.47 0 0 0 2.5-4ZM14 3.23v2.06a7 7 0 0 1 0 13.42v2.06a9 9 0 0 0 0-17.54Z"/>\n</svg></slot>\n  </slot>\n`;const iQ=`\n  <slot name="tooltip-mute">${Nz("Mute")}</slot>\n  <slot name="tooltip-unmute">${Nz("Unmute")}</slot>\n`,aQ=e=>{const t="off"===e.mediaVolumeLevel,n=Nz(t?"unmute":"mute");e.setAttribute("aria-label",n)};class oQ extends qG{static get observedAttributes(){return[...super.observedAttributes,lz.MEDIA_VOLUME_LEVEL]}constructor(){super({slotTemplate:rQ,tooltipContent:iQ,...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}})}connectedCallback(){aQ(this),super.connectedCallback()}attributeChangedCallback(e,t,n){e===lz.MEDIA_VOLUME_LEVEL&&aQ(this),super.attributeChangedCallback(e,t,n)}get mediaVolumeLevel(){return dH(this,lz.MEDIA_VOLUME_LEVEL)}set mediaVolumeLevel(e){hH(this,lz.MEDIA_VOLUME_LEVEL,e)}handleClick(){const e="off"===this.mediaVolumeLevel?iz.MEDIA_UNMUTE_REQUEST:iz.MEDIA_MUTE_REQUEST;this.dispatchEvent(new Wz.CustomEvent(e,{composed:!0,bubbles:!0}))}}Wz.customElements.get("media-mute-button")||Wz.customElements.define("media-mute-button",oQ);const sQ='<svg aria-hidden="true" viewBox="0 0 28 24">\n  <path d="M24 3H4a1 1 0 0 0-1 1v16a1 1 0 0 0 1 1h20a1 1 0 0 0 1-1V4a1 1 0 0 0-1-1Zm-1 16H5V5h18v14Zm-3-8h-7v5h7v-5Z"/>\n</svg>',lQ=zz.createElement("template");lQ.innerHTML=`\n  <style>\n  :host([${lz.MEDIA_IS_PIP}]) slot[name=icon] slot:not([name=exit]) {\n    display: none !important;\n  }\n\n  \n  :host(:not([${lz.MEDIA_IS_PIP}])) slot[name=icon] slot:not([name=enter]) {\n    display: none !important;\n  }\n\n  :host([${lz.MEDIA_IS_PIP}]) slot[name=tooltip-enter],\n  :host(:not([${lz.MEDIA_IS_PIP}])) slot[name=tooltip-exit] {\n    display: none;\n  }\n  </style>\n\n  <slot name="icon">\n    <slot name="enter">${sQ}</slot>\n    <slot name="exit">${sQ}</slot>\n  </slot>\n`;const cQ=`\n  <slot name="tooltip-enter">${Nz("Enter picture in picture mode")}</slot>\n  <slot name="tooltip-exit">${Nz("Exit picture in picture mode")}</slot>\n`,uQ=e=>{const t=e.mediaIsPip?Nz("exit picture in picture mode"):Nz("enter picture in picture mode");e.setAttribute("aria-label",t)};class dQ extends qG{static get observedAttributes(){return[...super.observedAttributes,lz.MEDIA_IS_PIP,lz.MEDIA_PIP_UNAVAILABLE]}constructor(){super({slotTemplate:lQ,tooltipContent:cQ,...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}})}connectedCallback(){uQ(this),super.connectedCallback()}attributeChangedCallback(e,t,n){e===lz.MEDIA_IS_PIP&&uQ(this),super.attributeChangedCallback(e,t,n)}get mediaPipUnavailable(){return dH(this,lz.MEDIA_PIP_UNAVAILABLE)}set mediaPipUnavailable(e){hH(this,lz.MEDIA_PIP_UNAVAILABLE,e)}get mediaIsPip(){return cH(this,lz.MEDIA_IS_PIP)}set mediaIsPip(e){uH(this,lz.MEDIA_IS_PIP,e)}handleClick(){const e=this.mediaIsPip?iz.MEDIA_EXIT_PIP_REQUEST:iz.MEDIA_ENTER_PIP_REQUEST;this.dispatchEvent(new Wz.CustomEvent(e,{composed:!0,bubbles:!0}))}}Wz.customElements.get("media-pip-button")||Wz.customElements.define("media-pip-button",dQ);var hQ,pQ=(e,t,n)=>(((e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)})(e,t,"read from private field"),n?n.call(e):t.get(e));const fQ="rates",mQ=[1,1.2,1.5,1.7,2],gQ=zz.createElement("template");gQ.innerHTML='\n  <style>\n    :host {\n      min-width: 5ch;\n      padding: var(--media-button-padding, var(--media-control-padding, 10px 5px));\n    }\n  </style>\n  <slot name="icon"></slot>\n';class vQ extends qG{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super({slotTemplate:gQ,tooltipContent:Nz("Playback rate"),...e}),((e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)})(this,hQ,new iq(this,fQ,{defaultValue:mQ})),this.container=this.shadowRoot.querySelector('slot[name="icon"]'),this.container.innerHTML="1x"}static get observedAttributes(){return[...super.observedAttributes,lz.MEDIA_PLAYBACK_RATE,fQ]}attributeChangedCallback(e,t,n){if(super.attributeChangedCallback(e,t,n),e===fQ&&(pQ(this,hQ).value=n),e===lz.MEDIA_PLAYBACK_RATE){const e=n?+n:Number.NaN,t=Number.isNaN(e)?1:e;this.container.innerHTML=`${t}x`,this.setAttribute("aria-label",Nz("Playback rate {playbackRate}",{playbackRate:t}))}}get rates(){return pQ(this,hQ)}set rates(e){e?Array.isArray(e)&&(pQ(this,hQ).value=e.join(" ")):pQ(this,hQ).value=""}get mediaPlaybackRate(){return sH(this,lz.MEDIA_PLAYBACK_RATE,1)}set mediaPlaybackRate(e){lH(this,lz.MEDIA_PLAYBACK_RATE,e)}handleClick(){var e,t;const n=Array.from(this.rates.values(),(e=>+e)).sort(((e,t)=>e-t)),r=null!=(t=null!=(e=n.find((e=>e>this.mediaPlaybackRate)))?e:n[0])?t:1,i=new Wz.CustomEvent(iz.MEDIA_PLAYBACK_RATE_REQUEST,{composed:!0,bubbles:!0,detail:r});this.dispatchEvent(i)}}hQ=new WeakMap,Wz.customElements.get("media-playback-rate-button")||Wz.customElements.define("media-playback-rate-button",vQ);const yQ=zz.createElement("template");yQ.innerHTML=`\n  <style>\n    :host([${lz.MEDIA_PAUSED}]) slot[name=pause],\n    :host(:not([${lz.MEDIA_PAUSED}])) slot[name=play] {\n      display: none !important;\n    }\n\n    :host([${lz.MEDIA_PAUSED}]) slot[name=tooltip-pause],\n    :host(:not([${lz.MEDIA_PAUSED}])) slot[name=tooltip-play] {\n      display: none;\n    }\n  </style>\n\n  <slot name="icon">\n    <slot name="play"><svg aria-hidden="true" viewBox="0 0 24 24">\n  <path d="m6 21 15-9L6 3v18Z"/>\n</svg></slot>\n    <slot name="pause"><svg aria-hidden="true" viewBox="0 0 24 24">\n  <path d="M6 20h4V4H6v16Zm8-16v16h4V4h-4Z"/>\n</svg></slot>\n  </slot>\n`;const bQ=`\n  <slot name="tooltip-play">${Nz("Play")}</slot>\n  <slot name="tooltip-pause">${Nz("Pause")}</slot>\n`,wQ=e=>{const t=e.mediaPaused?Nz("play"):Nz("pause");e.setAttribute("aria-label",t)};class EQ extends qG{static get observedAttributes(){return[...super.observedAttributes,lz.MEDIA_PAUSED,lz.MEDIA_ENDED]}constructor(){super({slotTemplate:yQ,tooltipContent:bQ,...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}})}connectedCallback(){wQ(this),super.connectedCallback()}attributeChangedCallback(e,t,n){e===lz.MEDIA_PAUSED&&wQ(this),super.attributeChangedCallback(e,t,n)}get mediaPaused(){return cH(this,lz.MEDIA_PAUSED)}set mediaPaused(e){uH(this,lz.MEDIA_PAUSED,e)}handleClick(){const e=this.mediaPaused?iz.MEDIA_PLAY_REQUEST:iz.MEDIA_PAUSE_REQUEST;this.dispatchEvent(new Wz.CustomEvent(e,{composed:!0,bubbles:!0}))}}Wz.customElements.get("media-play-button")||Wz.customElements.define("media-play-button",EQ);const xQ="placeholdersrc",_Q="src",AQ=zz.createElement("template");AQ.innerHTML='\n  <style>\n    :host {\n      pointer-events: none;\n      display: var(--media-poster-image-display, inline-block);\n      box-sizing: border-box;\n    }\n\n    img {\n      max-width: 100%;\n      max-height: 100%;\n      min-width: 100%;\n      min-height: 100%;\n      background-repeat: no-repeat;\n      background-position: var(--media-poster-image-background-position, var(--media-object-position, center));\n      background-size: var(--media-poster-image-background-size, var(--media-object-fit, contain));\n      object-fit: var(--media-object-fit, contain);\n      object-position: var(--media-object-position, center);\n    }\n  </style>\n\n  <img part="poster img" aria-hidden="true" id="image"/>\n';class TQ extends Wz.HTMLElement{static get observedAttributes(){return[xQ,_Q]}constructor(){super(),this.shadowRoot||(this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(AQ.content.cloneNode(!0))),this.image=this.shadowRoot.querySelector("#image")}attributeChangedCallback(e,t,n){e===_Q&&(null==n?this.image.removeAttribute(_Q):this.image.setAttribute(_Q,n)),e===xQ&&(null==n?this.image.style.removeProperty("background-image"):((e,t)=>{e.style["background-image"]=`url('${t}')`})(this.image,n))}get placeholderSrc(){return dH(this,xQ)}set placeholderSrc(e){hH(this,_Q,e)}get src(){return dH(this,_Q)}set src(e){hH(this,_Q,e)}}Wz.customElements.get("media-poster-image")||Wz.customElements.define("media-poster-image",TQ);var SQ,kQ=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)};class CQ extends wY{constructor(){var e,t,n,r;super(),((e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)})(this,SQ,void 0),e=this,t=SQ,n=this.shadowRoot.querySelector("slot"),kQ(e,t,"write to private field"),r?r.call(e,n):t.set(e,n)}static get observedAttributes(){return[...super.observedAttributes,lz.MEDIA_PREVIEW_CHAPTER]}attributeChangedCallback(e,t,n){var r,i,a;super.attributeChangedCallback(e,t,n),e===lz.MEDIA_PREVIEW_CHAPTER&&n!==t&&null!=n&&((r=this,i=SQ,kQ(r,i,"read from private field"),a?a.call(r):i.get(r)).textContent=n,""!==n?this.setAttribute("aria-valuetext",`chapter: ${n}`):this.removeAttribute("aria-valuetext"))}get mediaPreviewChapter(){return dH(this,lz.MEDIA_PREVIEW_CHAPTER)}set mediaPreviewChapter(e){hH(this,lz.MEDIA_PREVIEW_CHAPTER,e)}}SQ=new WeakMap,Wz.customElements.get("media-preview-chapter-display")||Wz.customElements.define("media-preview-chapter-display",CQ);var IQ,RQ=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},DQ=(e,t,n)=>(RQ(e,t,"read from private field"),n?n.call(e):t.get(e)),LQ=(e,t,n,r)=>(RQ(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n);const PQ=zz.createElement("template");PQ.innerHTML='\n  <style>\n    :host {\n      box-sizing: border-box;\n      display: var(--media-control-display, var(--media-preview-thumbnail-display, inline-block));\n      overflow: hidden;\n    }\n\n    img {\n      display: none;\n      position: relative;\n    }\n  </style>\n  <img crossorigin loading="eager" decoding="async">\n';class MQ extends Wz.HTMLElement{constructor(){super(),((e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)})(this,IQ,void 0),this.shadowRoot||(this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(PQ.content.cloneNode(!0)))}static get observedAttributes(){return[az.MEDIA_CONTROLLER,lz.MEDIA_PREVIEW_IMAGE,lz.MEDIA_PREVIEW_COORDS]}connectedCallback(){var e,t,n;const r=this.getAttribute(az.MEDIA_CONTROLLER);r&&(LQ(this,IQ,null==(e=this.getRootNode())?void 0:e.getElementById(r)),null==(n=null==(t=DQ(this,IQ))?void 0:t.associateElement)||n.call(t,this))}disconnectedCallback(){var e,t;null==(t=null==(e=DQ(this,IQ))?void 0:e.unassociateElement)||t.call(e,this),LQ(this,IQ,null)}attributeChangedCallback(e,t,n){var r,i,a,o,s;[lz.MEDIA_PREVIEW_IMAGE,lz.MEDIA_PREVIEW_COORDS].includes(e)&&this.update(),e===az.MEDIA_CONTROLLER&&(t&&(null==(i=null==(r=DQ(this,IQ))?void 0:r.unassociateElement)||i.call(r,this),LQ(this,IQ,null)),n&&this.isConnected&&(LQ(this,IQ,null==(a=this.getRootNode())?void 0:a.getElementById(n)),null==(s=null==(o=DQ(this,IQ))?void 0:o.associateElement)||s.call(o,this)))}get mediaPreviewImage(){return dH(this,lz.MEDIA_PREVIEW_IMAGE)}set mediaPreviewImage(e){hH(this,lz.MEDIA_PREVIEW_IMAGE,e)}get mediaPreviewCoords(){const e=this.getAttribute(lz.MEDIA_PREVIEW_COORDS);if(e)return e.split(/\s+/).map((e=>+e))}set mediaPreviewCoords(e){e?this.setAttribute(lz.MEDIA_PREVIEW_COORDS,e.join(" ")):this.removeAttribute(lz.MEDIA_PREVIEW_COORDS)}update(){const e=this.mediaPreviewCoords,t=this.mediaPreviewImage;if(!e||!t)return;const[n,r,i,a]=e,o=t.split("#")[0],s=getComputedStyle(this),{maxWidth:l,maxHeight:c,minWidth:u,minHeight:d}=s,h=Math.min(parseInt(l)/i,parseInt(c)/a),p=Math.max(parseInt(u)/i,parseInt(d)/a),f=h<1,m=f?h:p>1?p:1,{style:g}=aH(this.shadowRoot,":host"),v=aH(this.shadowRoot,"img").style,y=this.shadowRoot.querySelector("img"),b=f?"min":"max";g.setProperty(`${b}-width`,"initial","important"),g.setProperty(`${b}-height`,"initial","important"),g.width=i*m+"px",g.height=a*m+"px";const w=()=>{v.width=this.imgWidth*m+"px",v.height=this.imgHeight*m+"px",v.display="block"};y.src!==o&&(y.onload=()=>{this.imgWidth=y.naturalWidth,this.imgHeight=y.naturalHeight,w()},y.src=o,w()),w(),v.transform=`translate(-${n*m}px, -${r*m}px)`}}IQ=new WeakMap,Wz.customElements.get("media-preview-thumbnail")||Wz.customElements.define("media-preview-thumbnail",MQ);var NQ,OQ=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},jQ=(e,t,n)=>(OQ(e,t,"read from private field"),n?n.call(e):t.get(e));class FQ extends wY{constructor(){var e,t,n,r;super(),((e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)})(this,NQ,void 0),e=this,t=NQ,n=this.shadowRoot.querySelector("slot"),OQ(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),jQ(this,NQ).textContent=Rz(0)}static get observedAttributes(){return[...super.observedAttributes,lz.MEDIA_PREVIEW_TIME]}attributeChangedCallback(e,t,n){super.attributeChangedCallback(e,t,n),e===lz.MEDIA_PREVIEW_TIME&&null!=n&&(jQ(this,NQ).textContent=Rz(parseFloat(n)))}get mediaPreviewTime(){return sH(this,lz.MEDIA_PREVIEW_TIME)}set mediaPreviewTime(e){lH(this,lz.MEDIA_PREVIEW_TIME,e)}}NQ=new WeakMap,Wz.customElements.get("media-preview-time-display")||Wz.customElements.define("media-preview-time-display",FQ);const UQ="seekoffset",BQ=zz.createElement("template");BQ.innerHTML='\n  <slot name="icon"><svg aria-hidden="true" viewBox="0 0 20 24"><defs><style>.text{font-size:8px;font-family:Arial-BoldMT, Arial;font-weight:700;}</style></defs><text class="text value" transform="translate(2.18 19.87)">30</text><path d="M10 6V3L4.37 7 10 10.94V8a5.54 5.54 0 0 1 1.9 10.48v2.12A7.5 7.5 0 0 0 10 6Z"/></svg></slot>\n';class $Q extends qG{static get observedAttributes(){return[...super.observedAttributes,lz.MEDIA_CURRENT_TIME,UQ]}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super({slotTemplate:BQ,tooltipContent:Nz("Seek backward"),...e})}connectedCallback(){this.seekOffset=sH(this,UQ,30),super.connectedCallback()}attributeChangedCallback(e,t,n){e===UQ&&(this.seekOffset=sH(this,UQ,30)),super.attributeChangedCallback(e,t,n)}get seekOffset(){return sH(this,UQ,30)}set seekOffset(e){lH(this,UQ,e),this.setAttribute("aria-label",Nz("seek back {seekOffset} seconds",{seekOffset:this.seekOffset})),Zz(Jz(this,"icon"),this.seekOffset)}get mediaCurrentTime(){return sH(this,lz.MEDIA_CURRENT_TIME,0)}set mediaCurrentTime(e){lH(this,lz.MEDIA_CURRENT_TIME,e)}handleClick(){const e=Math.max(this.mediaCurrentTime-this.seekOffset,0),t=new Wz.CustomEvent(iz.MEDIA_SEEK_REQUEST,{composed:!0,bubbles:!0,detail:e});this.dispatchEvent(t)}}Wz.customElements.get("media-seek-backward-button")||Wz.customElements.define("media-seek-backward-button",$Q);const VQ="seekoffset",WQ=zz.createElement("template");WQ.innerHTML='\n  <slot name="icon"><svg aria-hidden="true" viewBox="0 0 20 24"><defs><style>.text{font-size:8px;font-family:Arial-BoldMT, Arial;font-weight:700;}</style></defs><text class="text value" transform="translate(8.9 19.87)">30</text><path d="M10 6V3l5.61 4L10 10.94V8a5.54 5.54 0 0 0-1.9 10.48v2.12A7.5 7.5 0 0 1 10 6Z"/></svg></slot>\n';class zQ extends qG{static get observedAttributes(){return[...super.observedAttributes,lz.MEDIA_CURRENT_TIME,VQ]}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super({slotTemplate:WQ,tooltipContent:Nz("Seek forward"),...e})}connectedCallback(){this.seekOffset=sH(this,VQ,30),super.connectedCallback()}attributeChangedCallback(e,t,n){e===VQ&&(this.seekOffset=sH(this,VQ,30)),super.attributeChangedCallback(e,t,n)}get seekOffset(){return sH(this,VQ,30)}set seekOffset(e){lH(this,VQ,e),this.setAttribute("aria-label",Nz("seek forward {seekOffset} seconds",{seekOffset:this.seekOffset})),Zz(Jz(this,"icon"),this.seekOffset)}get mediaCurrentTime(){return sH(this,lz.MEDIA_CURRENT_TIME,0)}set mediaCurrentTime(e){lH(this,lz.MEDIA_CURRENT_TIME,e)}handleClick(){const e=this.mediaCurrentTime+this.seekOffset,t=new Wz.CustomEvent(iz.MEDIA_SEEK_REQUEST,{composed:!0,bubbles:!0,detail:e});this.dispatchEvent(t)}}Wz.customElements.get("media-seek-forward-button")||Wz.customElements.define("media-seek-forward-button",zQ);var HQ,qQ=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},GQ=(e,t,n)=>(qQ(e,t,"read from private field"),n?n.call(e):t.get(e));const KQ={REMAINING:"remaining",SHOW_DURATION:"showduration",NO_TOGGLE:"notoggle"},YQ=[...Object.values(KQ),lz.MEDIA_CURRENT_TIME,lz.MEDIA_DURATION,lz.MEDIA_SEEKABLE],QQ=["Enter"," "],XQ="&nbsp;/&nbsp;",ZQ=function(e){let{timesSep:t=XQ}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n,r;const i=e.hasAttribute(KQ.REMAINING),a=e.hasAttribute(KQ.SHOW_DURATION),o=null!=(n=e.mediaCurrentTime)?n:0,[,s]=null!=(r=e.mediaSeekable)?r:[];let l=0;Number.isFinite(e.mediaDuration)?l=e.mediaDuration:Number.isFinite(s)&&(l=s);const c=Rz(i?0-(l-o):o);return a?`${c}${t}${Rz(l)}`:c};class JQ extends wY{constructor(){var e,t,n,r;super(),((e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)})(this,HQ,void 0),e=this,t=HQ,n=this.shadowRoot.querySelector("slot"),qQ(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),GQ(this,HQ).innerHTML=`${ZQ(this)}`}static get observedAttributes(){return[...super.observedAttributes,...YQ,"disabled"]}connectedCallback(){const{style:e}=aH(this.shadowRoot,":host(:hover:not([notoggle]))");e.setProperty("cursor","var(--media-cursor, pointer)"),e.setProperty("background","var(--media-control-hover-background, rgba(50 50 70 / .7))"),this.hasAttribute("disabled")||this.enable(),this.setAttribute("role","progressbar"),this.setAttribute("aria-label",Nz("playback time"));const t=e=>{const{key:n}=e;QQ.includes(n)?this.toggleTimeDisplay():this.removeEventListener("keyup",t)};this.addEventListener("keydown",(e=>{const{metaKey:n,altKey:r,key:i}=e;n||r||!QQ.includes(i)?this.removeEventListener("keyup",t):this.addEventListener("keyup",t)})),this.addEventListener("click",this.toggleTimeDisplay),super.connectedCallback()}toggleTimeDisplay(){this.noToggle||(this.hasAttribute("remaining")?this.removeAttribute("remaining"):this.setAttribute("remaining",""))}disconnectedCallback(){this.disable(),super.disconnectedCallback()}attributeChangedCallback(e,t,n){YQ.includes(e)?this.update():"disabled"===e&&n!==t&&(null==n?this.enable():this.disable()),super.attributeChangedCallback(e,t,n)}enable(){this.tabIndex=0}disable(){this.tabIndex=-1}get remaining(){return cH(this,KQ.REMAINING)}set remaining(e){uH(this,KQ.REMAINING,e)}get showDuration(){return cH(this,KQ.SHOW_DURATION)}set showDuration(e){uH(this,KQ.SHOW_DURATION,e)}get noToggle(){return cH(this,KQ.NO_TOGGLE)}set noToggle(e){uH(this,KQ.NO_TOGGLE,e)}get mediaDuration(){return sH(this,lz.MEDIA_DURATION)}set mediaDuration(e){lH(this,lz.MEDIA_DURATION,e)}get mediaCurrentTime(){return sH(this,lz.MEDIA_CURRENT_TIME)}set mediaCurrentTime(e){lH(this,lz.MEDIA_CURRENT_TIME,e)}get mediaSeekable(){const e=this.getAttribute(lz.MEDIA_SEEKABLE);if(e)return e.split(":").map((e=>+e))}set mediaSeekable(e){null!=e?this.setAttribute(lz.MEDIA_SEEKABLE,e.join(":")):this.removeAttribute(lz.MEDIA_SEEKABLE)}update(){const e=ZQ(this);(e=>{var t;const n=e.mediaCurrentTime,[,r]=null!=(t=e.mediaSeekable)?t:[];let i=null;if(Number.isFinite(e.mediaDuration)?i=e.mediaDuration:Number.isFinite(r)&&(i=r),null==n||null===i)return void e.setAttribute("aria-valuetext","video not loaded, unknown time.");const a=e.hasAttribute(KQ.REMAINING),o=e.hasAttribute(KQ.SHOW_DURATION),s=Iz(a?0-(i-n):n);if(!o)return void e.setAttribute("aria-valuetext",s);const l=`${s} of ${Iz(i)}`;e.setAttribute("aria-valuetext",l)})(this),e!==GQ(this,HQ).innerHTML&&(GQ(this,HQ).innerHTML=e)}}HQ=new WeakMap,Wz.customElements.get("media-time-display")||Wz.customElements.define("media-time-display",JQ);var eX,tX,nX,rX,iX,aX,oX,sX,lX,cX,uX=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},dX=(e,t,n)=>(uX(e,t,"read from private field"),n?n.call(e):t.get(e)),hX=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},pX=(e,t,n,r)=>(uX(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n);class fX{constructor(e,t,n){var r=this;hX(this,eX,void 0),hX(this,tX,void 0),hX(this,nX,void 0),hX(this,rX,void 0),hX(this,iX,void 0),hX(this,aX,void 0),hX(this,oX,void 0),hX(this,sX,void 0),hX(this,lX,0),hX(this,cX,(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:performance.now();pX(r,lX,requestAnimationFrame(dX(r,cX))),pX(r,rX,performance.now()-dX(r,nX));const t=1e3/r.fps;if(dX(r,rX)>t){pX(r,nX,e-dX(r,rX)%t);const s=1e3/((e-dX(r,tX))/++(n=r,i=iX,{set _(e){pX(n,i,e,a)},get _(){return dX(n,i,o)}})._),l=(e-dX(r,aX))/1e3/r.duration;let c=dX(r,oX)+l*r.playbackRate;c-dX(r,eX).valueAsNumber>0?pX(r,sX,r.playbackRate/r.duration/s):(pX(r,sX,.995*dX(r,sX)),c=dX(r,eX).valueAsNumber+dX(r,sX)),r.callback(c)}var n,i,a,o})),pX(this,eX,e),this.callback=t,this.fps=n}start(){0===dX(this,lX)&&(pX(this,nX,performance.now()),pX(this,tX,dX(this,nX)),pX(this,iX,0),dX(this,cX).call(this))}stop(){0!==dX(this,lX)&&(cancelAnimationFrame(dX(this,lX)),pX(this,lX,0))}update(e){let{start:t,duration:n,playbackRate:r}=e;const i=t-dX(this,eX).valueAsNumber,a=Math.abs(n-this.duration);(i>0||i<-.03||a>=.5)&&this.callback(t),pX(this,oX,t),pX(this,aX,performance.now()),this.duration=n,this.playbackRate=r}}eX=new WeakMap,tX=new WeakMap,nX=new WeakMap,rX=new WeakMap,iX=new WeakMap,aX=new WeakMap,oX=new WeakMap,sX=new WeakMap,lX=new WeakMap,cX=new WeakMap;var mX,gX,vX,yX,bX,wX,EX,xX,_X,AX,TX,SX,kX,CX,IX,RX,DX,LX,PX,MX,NX,OX,jX,FX,UX,BX,$X=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},VX=(e,t,n)=>($X(e,t,"read from private field"),n?n.call(e):t.get(e)),WX=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},zX=(e,t,n,r)=>($X(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),HX=(e,t,n)=>($X(e,t,"access private method"),n);const qX=zz.createElement("template");qX.innerHTML=`\n  <style>\n    :host {\n      --media-box-border-radius: 4px;\n      --media-box-padding-left: 10px;\n      --media-box-padding-right: 10px;\n      --media-preview-border-radius: var(--media-box-border-radius);\n      --media-box-arrow-offset: var(--media-box-border-radius);\n      --_control-background: var(--media-control-background, var(--media-secondary-color, rgb(20 20 30 / .7)));\n      --_preview-background: var(--media-preview-background, var(--_control-background));\n\n      \n      contain: layout;\n    }\n\n    #buffered {\n      background: var(--media-time-range-buffered-color, rgb(255 255 255 / .4));\n      position: absolute;\n      height: 100%;\n      will-change: width;\n    }\n\n    #preview-rail,\n    #current-rail {\n      width: 100%;\n      position: absolute;\n      left: 0;\n      bottom: 100%;\n      pointer-events: none;\n      will-change: transform;\n    }\n\n    [part~="box"] {\n      width: min-content;\n      \n      position: absolute;\n      bottom: 100%;\n      flex-direction: column;\n      align-items: center;\n      transform: translateX(-50%);\n    }\n\n    [part~="current-box"] {\n      display: var(--media-current-box-display, var(--media-box-display, flex));\n      margin: var(--media-current-box-margin, var(--media-box-margin, 0 0 5px));\n      visibility: hidden;\n    }\n\n    [part~="preview-box"] {\n      display: var(--media-preview-box-display, var(--media-box-display, flex));\n      margin: var(--media-preview-box-margin, var(--media-box-margin, 0 0 5px));\n      transition-property: var(--media-preview-transition-property, visibility, opacity);\n      transition-duration: var(--media-preview-transition-duration-out, .25s);\n      transition-delay: var(--media-preview-transition-delay-out, 0s);\n      visibility: hidden;\n      opacity: 0;\n    }\n\n    :host(:is([${lz.MEDIA_PREVIEW_IMAGE}], [${lz.MEDIA_PREVIEW_TIME}])[dragging]) [part~="preview-box"] {\n      transition-duration: var(--media-preview-transition-duration-in, .5s);\n      transition-delay: var(--media-preview-transition-delay-in, .25s);\n      visibility: visible;\n      opacity: 1;\n    }\n\n    @media (hover: hover) {\n      :host(:is([${lz.MEDIA_PREVIEW_IMAGE}], [${lz.MEDIA_PREVIEW_TIME}]):hover) [part~="preview-box"] {\n        transition-duration: var(--media-preview-transition-duration-in, .5s);\n        transition-delay: var(--media-preview-transition-delay-in, .25s);\n        visibility: visible;\n        opacity: 1;\n      }\n    }\n\n    media-preview-thumbnail,\n    ::slotted(media-preview-thumbnail) {\n      visibility: hidden;\n      \n      transition: visibility 0s .25s;\n      transition-delay: calc(var(--media-preview-transition-delay-out, 0s) + var(--media-preview-transition-duration-out, .25s));\n      background: var(--media-preview-thumbnail-background, var(--_preview-background));\n      box-shadow: var(--media-preview-thumbnail-box-shadow, 0 0 4px rgb(0 0 0 / .2));\n      max-width: var(--media-preview-thumbnail-max-width, 180px);\n      max-height: var(--media-preview-thumbnail-max-height, 160px);\n      min-width: var(--media-preview-thumbnail-min-width, 120px);\n      min-height: var(--media-preview-thumbnail-min-height, 80px);\n      border: var(--media-preview-thumbnail-border);\n      border-radius: var(--media-preview-thumbnail-border-radius,\n        var(--media-preview-border-radius) var(--media-preview-border-radius) 0 0);\n    }\n\n    :host([${lz.MEDIA_PREVIEW_IMAGE}][dragging]) media-preview-thumbnail,\n    :host([${lz.MEDIA_PREVIEW_IMAGE}][dragging]) ::slotted(media-preview-thumbnail) {\n      transition-delay: var(--media-preview-transition-delay-in, .25s);\n      visibility: visible;\n    }\n\n    @media (hover: hover) {\n      :host([${lz.MEDIA_PREVIEW_IMAGE}]:hover) media-preview-thumbnail,\n      :host([${lz.MEDIA_PREVIEW_IMAGE}]:hover) ::slotted(media-preview-thumbnail) {\n        transition-delay: var(--media-preview-transition-delay-in, .25s);\n        visibility: visible;\n      }\n\n      :host([${lz.MEDIA_PREVIEW_TIME}]:hover) {\n        --media-time-range-hover-display: block;\n      }\n    }\n\n    media-preview-chapter-display,\n    ::slotted(media-preview-chapter-display) {\n      font-size: var(--media-font-size, 13px);\n      line-height: 17px;\n      min-width: 0;\n      visibility: hidden;\n      \n      transition: min-width 0s, border-radius 0s, margin 0s, padding 0s, visibility 0s;\n      transition-delay: calc(var(--media-preview-transition-delay-out, 0s) + var(--media-preview-transition-duration-out, .25s));\n      background: var(--media-preview-chapter-background, var(--_preview-background));\n      border-radius: var(--media-preview-chapter-border-radius,\n        var(--media-preview-border-radius) var(--media-preview-border-radius)\n        var(--media-preview-border-radius) var(--media-preview-border-radius));\n      padding: var(--media-preview-chapter-padding, 3.5px 9px);\n      margin: var(--media-preview-chapter-margin, 0 0 5px);\n      text-shadow: var(--media-preview-chapter-text-shadow, 0 0 4px rgb(0 0 0 / .75));\n    }\n\n    :host([${lz.MEDIA_PREVIEW_IMAGE}]) media-preview-chapter-display,\n    :host([${lz.MEDIA_PREVIEW_IMAGE}]) ::slotted(media-preview-chapter-display) {\n      transition-delay: var(--media-preview-transition-delay-in, .25s);\n      border-radius: var(--media-preview-chapter-border-radius, 0);\n      padding: var(--media-preview-chapter-padding, 3.5px 9px 0);\n      margin: var(--media-preview-chapter-margin, 0);\n      min-width: 100%;\n    }\n\n    media-preview-chapter-display[${lz.MEDIA_PREVIEW_CHAPTER}],\n    ::slotted(media-preview-chapter-display[${lz.MEDIA_PREVIEW_CHAPTER}]) {\n      visibility: visible;\n    }\n\n    media-preview-chapter-display:not([aria-valuetext]),\n    ::slotted(media-preview-chapter-display:not([aria-valuetext])) {\n      display: none;\n    }\n\n    media-preview-time-display,\n    ::slotted(media-preview-time-display),\n    media-time-display,\n    ::slotted(media-time-display) {\n      font-size: var(--media-font-size, 13px);\n      line-height: 17px;\n      min-width: 0;\n      \n      transition: min-width 0s, border-radius 0s;\n      transition-delay: calc(var(--media-preview-transition-delay-out, 0s) + var(--media-preview-transition-duration-out, .25s));\n      background: var(--media-preview-time-background, var(--_preview-background));\n      border-radius: var(--media-preview-time-border-radius,\n        var(--media-preview-border-radius) var(--media-preview-border-radius)\n        var(--media-preview-border-radius) var(--media-preview-border-radius));\n      padding: var(--media-preview-time-padding, 3.5px 9px);\n      margin: var(--media-preview-time-margin, 0);\n      text-shadow: var(--media-preview-time-text-shadow, 0 0 4px rgb(0 0 0 / .75));\n      transform: translateX(min(\n        max(calc(50% - var(--_box-width) / 2),\n        calc(var(--_box-shift, 0))),\n        calc(var(--_box-width) / 2 - 50%)\n      ));\n    }\n\n    :host([${lz.MEDIA_PREVIEW_IMAGE}]) media-preview-time-display,\n    :host([${lz.MEDIA_PREVIEW_IMAGE}]) ::slotted(media-preview-time-display) {\n      transition-delay: var(--media-preview-transition-delay-in, .25s);\n      border-radius: var(--media-preview-time-border-radius,\n        0 0 var(--media-preview-border-radius) var(--media-preview-border-radius));\n      min-width: 100%;\n    }\n\n    :host([${lz.MEDIA_PREVIEW_TIME}]:hover) {\n      --media-time-range-hover-display: block;\n    }\n\n    [part~="arrow"],\n    ::slotted([part~="arrow"]) {\n      display: var(--media-box-arrow-display, inline-block);\n      transform: translateX(min(\n        max(calc(50% - var(--_box-width) / 2 + var(--media-box-arrow-offset)),\n        calc(var(--_box-shift, 0))),\n        calc(var(--_box-width) / 2 - 50% - var(--media-box-arrow-offset))\n      ));\n      \n      border-color: transparent;\n      border-top-color: var(--media-box-arrow-background, var(--_control-background));\n      border-width: var(--media-box-arrow-border-width,\n        var(--media-box-arrow-height, 5px) var(--media-box-arrow-width, 6px) 0);\n      border-style: solid;\n      justify-content: center;\n      height: 0;\n    }\n  </style>\n  <div id="preview-rail">\n    <slot name="preview" part="box preview-box">\n      <media-preview-thumbnail></media-preview-thumbnail>\n      <media-preview-chapter-display></media-preview-chapter-display>\n      <media-preview-time-display></media-preview-time-display>\n      <slot name="preview-arrow"><div part="arrow"></div></slot>\n    </slot>\n  </div>\n  <div id="current-rail">\n    <slot name="current" part="box current-box">\n      \n    </slot>\n  </div>\n`;const GX=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.mediaCurrentTime;const n=Number.isFinite(e.mediaSeekableStart)?e.mediaSeekableStart:0,r=Number.isFinite(e.mediaDuration)?e.mediaDuration:e.mediaSeekableEnd;if(Number.isNaN(r))return 0;const i=(t-n)/(r-n);return Math.max(0,Math.min(i,1))},KX=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.range.valueAsNumber;const n=Number.isFinite(e.mediaSeekableStart)?e.mediaSeekableStart:0,r=Number.isFinite(e.mediaDuration)?e.mediaDuration:e.mediaSeekableEnd;return Number.isNaN(r)?0:t*(r-n)+n};class YX extends lY{constructor(){super(),WX(this,AX),WX(this,SX),WX(this,IX),WX(this,DX),WX(this,PX),WX(this,NX),WX(this,jX),WX(this,UX),WX(this,mX,void 0),WX(this,gX,void 0),WX(this,vX,void 0),WX(this,yX,void 0),WX(this,bX,void 0),WX(this,wX,void 0),WX(this,EX,void 0),WX(this,xX,void 0),WX(this,_X,void 0),WX(this,CX,(e=>{this.dragging||(Tz(e)&&(this.range.valueAsNumber=e),this.updateBar())})),this.container.appendChild(qX.content.cloneNode(!0));this.shadowRoot.querySelector("#track").insertAdjacentHTML("afterbegin",'<div id="buffered" part="buffered"></div>'),zX(this,vX,this.shadowRoot.querySelectorAll('[part~="box"]')),zX(this,bX,this.shadowRoot.querySelector('[part~="preview-box"]')),zX(this,wX,this.shadowRoot.querySelector('[part~="current-box"]'));const e=getComputedStyle(this);zX(this,EX,parseInt(e.getPropertyValue("--media-box-padding-left"))),zX(this,xX,parseInt(e.getPropertyValue("--media-box-padding-right"))),zX(this,gX,new fX(this.range,VX(this,CX),60))}static get observedAttributes(){return[...super.observedAttributes,lz.MEDIA_PAUSED,lz.MEDIA_DURATION,lz.MEDIA_SEEKABLE,lz.MEDIA_CURRENT_TIME,lz.MEDIA_PREVIEW_IMAGE,lz.MEDIA_PREVIEW_TIME,lz.MEDIA_PREVIEW_CHAPTER,lz.MEDIA_BUFFERED,lz.MEDIA_PLAYBACK_RATE,lz.MEDIA_LOADING,lz.MEDIA_ENDED]}connectedCallback(){var e;super.connectedCallback(),this.range.setAttribute("aria-label",Nz("seek")),HX(this,AX,TX).call(this),zX(this,mX,this.getRootNode()),null==(e=VX(this,mX))||e.addEventListener("transitionstart",this)}disconnectedCallback(){var e;super.disconnectedCallback(),HX(this,AX,TX).call(this),null==(e=VX(this,mX))||e.removeEventListener("transitionstart",this),zX(this,mX,null)}attributeChangedCallback(e,t,n){super.attributeChangedCallback(e,t,n),t!=n&&(e===lz.MEDIA_CURRENT_TIME||e===lz.MEDIA_PAUSED||e===lz.MEDIA_ENDED||e===lz.MEDIA_LOADING||e===lz.MEDIA_DURATION||e===lz.MEDIA_SEEKABLE?(VX(this,gX).update({start:GX(this),duration:this.mediaSeekableEnd-this.mediaSeekableStart,playbackRate:this.mediaPlaybackRate}),HX(this,AX,TX).call(this),(e=>{const t=e.range,n=Iz(+KX(e)),r=Iz(+e.mediaSeekableEnd),i=n&&r?`${n} of ${r}`:"video not loaded, unknown time.";t.setAttribute("aria-valuetext",i)})(this)):e===lz.MEDIA_BUFFERED&&this.updateBufferedBar(),e!==lz.MEDIA_DURATION&&e!==lz.MEDIA_SEEKABLE||(this.mediaChaptersCues=VX(this,_X),this.updateBar()))}get mediaChaptersCues(){return VX(this,_X)}set mediaChaptersCues(e){var t;zX(this,_X,e),this.updateSegments(null==(t=VX(this,_X))?void 0:t.map((e=>({start:GX(this,e.startTime),end:GX(this,e.endTime)}))))}get mediaPaused(){return cH(this,lz.MEDIA_PAUSED)}set mediaPaused(e){uH(this,lz.MEDIA_PAUSED,e)}get mediaLoading(){return cH(this,lz.MEDIA_LOADING)}set mediaLoading(e){uH(this,lz.MEDIA_LOADING,e)}get mediaDuration(){return sH(this,lz.MEDIA_DURATION)}set mediaDuration(e){lH(this,lz.MEDIA_DURATION,e)}get mediaCurrentTime(){return sH(this,lz.MEDIA_CURRENT_TIME)}set mediaCurrentTime(e){lH(this,lz.MEDIA_CURRENT_TIME,e)}get mediaPlaybackRate(){return sH(this,lz.MEDIA_PLAYBACK_RATE,1)}set mediaPlaybackRate(e){lH(this,lz.MEDIA_PLAYBACK_RATE,e)}get mediaBuffered(){const e=this.getAttribute(lz.MEDIA_BUFFERED);return e?e.split(" ").map((e=>e.split(":").map((e=>+e)))):[]}set mediaBuffered(e){if(!e)return void this.removeAttribute(lz.MEDIA_BUFFERED);const t=e.map((e=>e.join(":"))).join(" ");this.setAttribute(lz.MEDIA_BUFFERED,t)}get mediaSeekable(){const e=this.getAttribute(lz.MEDIA_SEEKABLE);if(e)return e.split(":").map((e=>+e))}set mediaSeekable(e){null!=e?this.setAttribute(lz.MEDIA_SEEKABLE,e.join(":")):this.removeAttribute(lz.MEDIA_SEEKABLE)}get mediaSeekableEnd(){var e;const[,t=this.mediaDuration]=null!=(e=this.mediaSeekable)?e:[];return t}get mediaSeekableStart(){var e;const[t=0]=null!=(e=this.mediaSeekable)?e:[];return t}get mediaPreviewImage(){return dH(this,lz.MEDIA_PREVIEW_IMAGE)}set mediaPreviewImage(e){hH(this,lz.MEDIA_PREVIEW_IMAGE,e)}get mediaPreviewTime(){return sH(this,lz.MEDIA_PREVIEW_TIME)}set mediaPreviewTime(e){lH(this,lz.MEDIA_PREVIEW_TIME,e)}get mediaEnded(){return cH(this,lz.MEDIA_ENDED)}set mediaEnded(e){uH(this,lz.MEDIA_ENDED,e)}updateBar(){super.updateBar(),this.updateBufferedBar(),this.updateCurrentBox()}updateBufferedBar(){var e;const t=this.mediaBuffered;if(!t.length)return;let n;if(this.mediaEnded)n=1;else{const r=this.mediaCurrentTime,[,i=this.mediaSeekableStart]=null!=(e=t.find((e=>{let[t,n]=e;return t<=r&&r<=n})))?e:[];n=GX(this,i)}const{style:r}=aH(this.shadowRoot,"#buffered");r.setProperty("width",100*n+"%")}updateCurrentBox(){if(!this.shadowRoot.querySelector('slot[name="current"]').assignedElements().length)return;const e=aH(this.shadowRoot,"#current-rail"),t=aH(this.shadowRoot,'[part~="current-box"]'),n=HX(this,IX,RX).call(this,VX(this,wX)),r=HX(this,DX,LX).call(this,n,this.range.valueAsNumber),i=HX(this,PX,MX).call(this,n,this.range.valueAsNumber);e.style.transform=`translateX(${r})`,e.style.setProperty("--_range-width",`${n.range.width}`),t.style.setProperty("--_box-shift",`${i}`),t.style.setProperty("--_box-width",`${n.box.width}px`),t.style.setProperty("visibility","initial")}handleEvent(e){switch(super.handleEvent(e),e.type){case"input":HX(this,UX,BX).call(this);break;case"pointermove":HX(this,NX,OX).call(this,e);break;case"pointerup":case"pointerleave":HX(this,jX,FX).call(this,null);break;case"transitionstart":eH(e.target,this)&&setTimeout((()=>HX(this,AX,TX).call(this)),0)}}}mX=new WeakMap,gX=new WeakMap,vX=new WeakMap,yX=new WeakMap,bX=new WeakMap,wX=new WeakMap,EX=new WeakMap,xX=new WeakMap,_X=new WeakMap,AX=new WeakSet,TX=function(){HX(this,SX,kX).call(this)?VX(this,gX).start():VX(this,gX).stop()},SX=new WeakSet,kX=function(){return this.isConnected&&!this.mediaPaused&&!this.mediaLoading&&!this.mediaEnded&&this.mediaSeekableEnd>0&&iH(this)},CX=new WeakMap,IX=new WeakSet,RX=function(e){var t;const n=(null!=(t=this.getAttribute("bounds")?tH(this,`#${this.getAttribute("bounds")}`):this.parentElement)?t:this).getBoundingClientRect(),r=this.range.getBoundingClientRect(),i=e.offsetWidth;return{box:{width:i,min:-(r.left-n.left-i/2),max:n.right-r.left-i/2},bounds:n,range:r}},DX=new WeakSet,LX=function(e,t){let n=100*t+"%";const{width:r,min:i,max:a}=e.box;if(!r)return n;if(!Number.isNaN(i)){n=`max(${`calc(1 / var(--_range-width) * 100 * ${i}% + ${"var(--media-box-padding-left)"})`}, ${n})`}if(!Number.isNaN(a)){n=`min(${n}, ${`calc(1 / var(--_range-width) * 100 * ${a}% - ${"var(--media-box-padding-right)"})`})`}return n},PX=new WeakSet,MX=function(e,t){const{width:n,min:r,max:i}=e.box,a=t*e.range.width;if(a<r+VX(this,EX)){return`${a-n/2+(e.range.left-e.bounds.left-VX(this,EX))}px`}if(a>i-VX(this,xX)){return a+n/2-(e.bounds.right-e.range.right-VX(this,xX))-e.range.width+"px"}return 0},NX=new WeakSet,OX=function(e){const t=[...VX(this,vX)].some((t=>e.composedPath().includes(t)));if(!this.dragging&&(t||!e.composedPath().includes(this)))return void HX(this,jX,FX).call(this,null);const n=this.mediaSeekableEnd;if(!n)return;const r=aH(this.shadowRoot,"#preview-rail"),i=aH(this.shadowRoot,'[part~="preview-box"]'),a=HX(this,IX,RX).call(this,VX(this,bX));let o=(e.clientX-a.range.left)/a.range.width;o=Math.max(0,Math.min(1,o));const s=HX(this,DX,LX).call(this,a,o),l=HX(this,PX,MX).call(this,a,o);r.style.transform=`translateX(${s})`,r.style.setProperty("--_range-width",`${a.range.width}`),i.style.setProperty("--_box-shift",`${l}`),i.style.setProperty("--_box-width",`${a.box.width}px`);const c=Math.round(VX(this,yX))-Math.round(o*n);Math.abs(c)<1&&o>.01&&o<.99||(zX(this,yX,o*n),HX(this,jX,FX).call(this,VX(this,yX)))},jX=new WeakSet,FX=function(e){this.dispatchEvent(new Wz.CustomEvent(iz.MEDIA_PREVIEW_REQUEST,{composed:!0,bubbles:!0,detail:e}))},UX=new WeakSet,BX=function(){VX(this,gX).stop();const e=KX(this);this.dispatchEvent(new Wz.CustomEvent(iz.MEDIA_SEEK_REQUEST,{composed:!0,bubbles:!0,detail:e}))},Wz.customElements.get("media-time-range")||Wz.customElements.define("media-time-range",YX);const QX="placement",XX="bounds",ZX=zz.createElement("template");ZX.innerHTML='\n  <style>\n    :host {\n      --_tooltip-background-color: var(--media-tooltip-background-color, var(--media-secondary-color, rgba(20, 20, 30, .7)));\n      --_tooltip-background: var(--media-tooltip-background, var(--_tooltip-background-color));\n      --_tooltip-arrow-half-width: calc(var(--media-tooltip-arrow-width, 12px) / 2);\n      --_tooltip-arrow-height: var(--media-tooltip-arrow-height, 5px);\n      --_tooltip-arrow-background: var(--media-tooltip-arrow-color, var(--_tooltip-background-color));\n      position: relative;\n      pointer-events: none;\n      display: var(--media-tooltip-display, inline-flex);\n      justify-content: center;\n      align-items: center;\n      box-sizing: border-box;\n      z-index: var(--media-tooltip-z-index, 1);\n      background: var(--_tooltip-background);\n      color: var(--media-text-color, var(--media-primary-color, rgb(238 238 238)));\n      font: var(--media-font,\n        var(--media-font-weight, 400)\n        var(--media-font-size, 13px) /\n        var(--media-text-content-height, var(--media-control-height, 18px))\n        var(--media-font-family, helvetica neue, segoe ui, roboto, arial, sans-serif));\n      padding: var(--media-tooltip-padding, .35em .7em);\n      border: var(--media-tooltip-border, none);\n      border-radius: var(--media-tooltip-border-radius, 5px);\n      filter: var(--media-tooltip-filter, drop-shadow(0 0 4px rgba(0, 0, 0, .2)));\n      white-space: var(--media-tooltip-white-space, nowrap);\n    }\n\n    :host([hidden]) {\n      display: none;\n    }\n\n    img, svg {\n      display: inline-block;\n    }\n\n    #arrow {\n      position: absolute;\n      width: 0px;\n      height: 0px;\n      border-style: solid;\n      display: var(--media-tooltip-arrow-display, block);\n    }\n\n    :host(:not([placement])),\n    :host([placement="top"]) {\n      position: absolute;\n      bottom: calc(100% + var(--media-tooltip-distance, 12px));\n      left: 50%;\n      transform: translate(calc(-50% - var(--media-tooltip-offset-x, 0px)), 0);\n    }\n    :host(:not([placement])) #arrow,\n    :host([placement="top"]) #arrow {\n      top: 100%;\n      left: 50%;\n      border-width: var(--_tooltip-arrow-height) var(--_tooltip-arrow-half-width) 0 var(--_tooltip-arrow-half-width);\n      border-color: var(--_tooltip-arrow-background) transparent transparent transparent;\n      transform: translate(calc(-50% + var(--media-tooltip-offset-x, 0px)), 0);\n    }\n\n    :host([placement="right"]) {\n      position: absolute;\n      left: calc(100% + var(--media-tooltip-distance, 12px));\n      top: 50%;\n      transform: translate(0, -50%);\n    }\n    :host([placement="right"]) #arrow {\n      top: 50%;\n      right: 100%;\n      border-width: var(--_tooltip-arrow-half-width) var(--_tooltip-arrow-height) var(--_tooltip-arrow-half-width) 0;\n      border-color: transparent var(--_tooltip-arrow-background) transparent transparent;\n      transform: translate(0, -50%);\n    }\n\n    :host([placement="bottom"]) {\n      position: absolute;\n      top: calc(100% + var(--media-tooltip-distance, 12px));\n      left: 50%;\n      transform: translate(calc(-50% - var(--media-tooltip-offset-x, 0px)), 0);\n    }\n    :host([placement="bottom"]) #arrow {\n      bottom: 100%;\n      left: 50%;\n      border-width: 0 var(--_tooltip-arrow-half-width) var(--_tooltip-arrow-height) var(--_tooltip-arrow-half-width);\n      border-color: transparent transparent var(--_tooltip-arrow-background) transparent;\n      transform: translate(calc(-50% + var(--media-tooltip-offset-x, 0px)), 0);\n    }\n\n    :host([placement="left"]) {\n      position: absolute;\n      right: calc(100% + var(--media-tooltip-distance, 12px));\n      top: 50%;\n      transform: translate(0, -50%);\n    }\n    :host([placement="left"]) #arrow {\n      top: 50%;\n      left: 100%;\n      border-width: var(--_tooltip-arrow-half-width) 0 var(--_tooltip-arrow-half-width) var(--_tooltip-arrow-height);\n      border-color: transparent transparent transparent var(--_tooltip-arrow-background);\n      transform: translate(0, -50%);\n    }\n    \n    :host([placement="none"]) #arrow {\n      display: none;\n    }\n\n  </style>\n  <slot></slot>\n  <div id="arrow"></div>\n';class JX extends Wz.HTMLElement{constructor(){if(super(),this.updateXOffset=()=>{var e;if(!iH(this,{checkOpacity:!1,checkVisibilityCSS:!1}))return;const t=this.placement;if("left"===t||"right"===t)return void this.style.removeProperty("--media-tooltip-offset-x");const n=getComputedStyle(this),r=null!=(e=tH(this,"#"+this.bounds))?e:Qz(this);if(!r)return;const{x:i,width:a}=r.getBoundingClientRect(),{x:o,width:s}=this.getBoundingClientRect(),l=o+s,c=i+a,u=n.getPropertyValue("--media-tooltip-offset-x"),d=u?parseFloat(u.replace("px","")):0,h=n.getPropertyValue("--media-tooltip-container-margin"),p=h?parseFloat(h.replace("px","")):0,f=o-i+d-p,m=l-c+d+p;f<0?this.style.setProperty("--media-tooltip-offset-x",`${f}px`):m>0?this.style.setProperty("--media-tooltip-offset-x",`${m}px`):this.style.removeProperty("--media-tooltip-offset-x")},this.shadowRoot||(this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(ZX.content.cloneNode(!0))),this.arrowEl=this.shadowRoot.querySelector("#arrow"),Object.prototype.hasOwnProperty.call(this,"placement")){const e=this.placement;delete this.placement,this.placement=e}}static get observedAttributes(){return[QX,XX]}get placement(){return dH(this,QX)}set placement(e){hH(this,QX,e)}get bounds(){return dH(this,XX)}set bounds(e){hH(this,XX,e)}}Wz.customElements.get("media-tooltip")||Wz.customElements.define("media-tooltip",JX);class eZ extends lY{static get observedAttributes(){return[...super.observedAttributes,lz.MEDIA_VOLUME,lz.MEDIA_MUTED,lz.MEDIA_VOLUME_UNAVAILABLE]}constructor(){super(),this.range.addEventListener("input",(()=>{const e=this.range.value,t=new Wz.CustomEvent(iz.MEDIA_VOLUME_REQUEST,{composed:!0,bubbles:!0,detail:e});this.dispatchEvent(t)}))}connectedCallback(){super.connectedCallback(),this.range.setAttribute("aria-label",Nz("volume"))}attributeChangedCallback(e,t,n){var r,i;super.attributeChangedCallback(e,t,n),e!==lz.MEDIA_VOLUME&&e!==lz.MEDIA_MUTED||(this.range.valueAsNumber=(i=this).mediaMuted?0:i.mediaVolume,this.range.setAttribute("aria-valuetext",(r=this.range.valueAsNumber,`${Math.round(100*r)}%`)),this.updateBar())}get mediaVolume(){return sH(this,lz.MEDIA_VOLUME,1)}set mediaVolume(e){lH(this,lz.MEDIA_VOLUME,e)}get mediaMuted(){return cH(this,lz.MEDIA_MUTED)}set mediaMuted(e){uH(this,lz.MEDIA_MUTED,e)}get mediaVolumeUnavailable(){return dH(this,lz.MEDIA_VOLUME_UNAVAILABLE)}set mediaVolumeUnavailable(e){hH(this,lz.MEDIA_VOLUME_UNAVAILABLE,e)}}Wz.customElements.get("media-volume-range")||Wz.customElements.define("media-volume-range",eZ);var tZ=Object.create,nZ=Object.defineProperty,rZ=Object.getOwnPropertyDescriptor,iZ=Object.getOwnPropertyNames,aZ=Object.getPrototypeOf,oZ=Object.prototype.hasOwnProperty,sZ=function(e,t){return function(){return e&&(t=e(e=0)),t}},lZ=function(e,t){return function(){return t||e((t={exports:{}}).exports,t),t.exports}},cZ=function(e,t,n){return n=null!=e?tZ(aZ(e)):{},function(e,t,n,r){if(t&&"object"==typeof t||"function"==typeof t)for(var i,a=iZ(t),o=0,s=a.length;o<s;o++)i=a[o],!oZ.call(e,i)&&i!==n&&nZ(e,i,{get:function(e){return t[e]}.bind(null,i),enumerable:!(r=rZ(t,i))||r.enumerable});return e}(!t&&e&&e.__esModule?n:nZ(n,"default",{value:e,enumerable:!0}),e)},uZ=lZ((function(e,t){var n;n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t.exports=n}));function dZ(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):dZ(e,t)}var hZ=sZ((function(){hZ()}));function pZ(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}var fZ=sZ((function(){})),mZ=lZ((function(e,t){var n=Array.prototype.slice;t.exports=function(e,t){for(("length"in e||(e=[e]),e=n.call(e));e.length;){var r=e.shift(),i=t(r);if(i)return i;r.childNodes&&r.childNodes.length&&(e=n.call(r.childNodes).concat(e))}}})),gZ=lZ((function(e,t){function n(e,t){if(!dZ(this,n))return new n(e,t);this.data=e,this.nodeValue=e,this.length=e.length,this.ownerDocument=t||null}hZ(),t.exports=n,n.prototype.nodeType=8,n.prototype.nodeName="#comment",n.prototype.toString=function(){return"[object Comment]"}})),vZ=lZ((function(e,t){function n(e,t){if(!dZ(this,n))return new n(e);this.data=e||"",this.length=this.data.length,this.ownerDocument=t||null}hZ(),t.exports=n,n.prototype.type="DOMTextNode",n.prototype.nodeType=3,n.prototype.nodeName="#text",n.prototype.toString=function(){return this.data},n.prototype.replaceData=function(e,t,n){var r=this.data,i=r.substring(0,e),a=r.substring(e+t,r.length);this.data=i+n+a,this.length=this.data.length}})),yZ=lZ((function(e,t){t.exports=function(e){var t=this,n=e.type;e.target||(e.target=t),t.listeners||(t.listeners={});var r=t.listeners[n];if(r)return r.forEach((function(n){e.currentTarget=t,"function"==typeof n?n(e):n.handleEvent(e)}));t.parentNode&&t.parentNode.dispatchEvent(e)}})),bZ=lZ((function(e,t){t.exports=function(e,t){var n=this;n.listeners||(n.listeners={}),n.listeners[e]||(n.listeners[e]=[]),-1===n.listeners[e].indexOf(t)&&n.listeners[e].push(t)}})),wZ=lZ((function(e,t){t.exports=function(e,t){var n=this;if(n.listeners&&n.listeners[e]){var r=n.listeners[e],i=r.indexOf(t);-1!==i&&r.splice(i,1)}}})),EZ=lZ((function(e,t){fZ(),t.exports=r;var n=["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"];function r(e){switch(e.nodeType){case 3:return o(e.data);case 8:return"\x3c!--"+e.data+"--\x3e";default:return function(e){var t=[],s=e.tagName;return"http://www.w3.org/1999/xhtml"===e.namespaceURI&&(s=s.toLowerCase()),t.push("<"+s+function(e){var t=[];for(var n in e)i(e,n)&&t.push({name:n,value:e[n]});for(var r in e._attributes)for(var o in e._attributes[r]){var s=e._attributes[r][o],l=(s.prefix?s.prefix+":":"")+o;t.push({name:l,value:s.value})}return e.className&&t.push({name:"class",value:e.className}),t.length?a(t):""}(e)+function(e){var t=e.dataset,n=[];for(var r in t)n.push({name:"data-"+r,value:t[r]});return n.length?a(n):""}(e)),n.indexOf(s)>-1?t.push(" />"):(t.push(">"),e.childNodes.length?t.push.apply(t,e.childNodes.map(r)):e.textContent||e.innerText?t.push(o(e.textContent||e.innerText)):e.innerHTML&&t.push(e.innerHTML),t.push("</"+s+">")),t.join("")}(e)}}function i(e,t){var n=pZ(e[t]);return"style"===t&&Object.keys(e.style).length>0||e.hasOwnProperty(t)&&("string"===n||"boolean"===n||"number"===n)&&"nodeName"!==t&&"className"!==t&&"tagName"!==t&&"textContent"!==t&&"innerText"!==t&&"namespaceURI"!==t&&"innerHTML"!==t}function a(e){var t=[];return e.forEach((function(e){var n=e.name,r=e.value;"style"===n&&(r=function(e){if("string"==typeof e)return e;var t="";return Object.keys(e).forEach((function(n){var r=e[n];n=n.replace(/[A-Z]/g,(function(e){return"-"+e.toLowerCase()})),t+=n+":"+r+";"})),t}(r)),t.push(n+'="'+function(e){return o(e).replace(/"/g,"&quot;")}(r)+'"')})),t.length?" "+t.join(" "):""}function o(e){var t="";return"string"==typeof e?t=e:e&&(t=e.toString()),t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}})),xZ=lZ((function(e,t){hZ();var n=mZ(),r=yZ(),i=bZ(),a=wZ(),o=EZ(),s="http://www.w3.org/1999/xhtml";function l(e,t,n){if(!dZ(this,l))return new l(e);var r=void 0===n?s:n||null;this.tagName=r===s?String(e).toUpperCase():e,this.nodeName=this.tagName,this.className="",this.dataset={},this.childNodes=[],this.parentNode=null,this.style={},this.ownerDocument=t||null,this.namespaceURI=r,this._attributes={},"INPUT"===this.tagName&&(this.type="text")}t.exports=l,l.prototype.type="DOMElement",l.prototype.nodeType=1,l.prototype.appendChild=function(e){return e.parentNode&&e.parentNode.removeChild(e),this.childNodes.push(e),e.parentNode=this,e},l.prototype.replaceChild=function(e,t){e.parentNode&&e.parentNode.removeChild(e);var n=this.childNodes.indexOf(t);return t.parentNode=null,this.childNodes[n]=e,e.parentNode=this,t},l.prototype.removeChild=function(e){var t=this.childNodes.indexOf(e);return this.childNodes.splice(t,1),e.parentNode=null,e},l.prototype.insertBefore=function(e,t){e.parentNode&&e.parentNode.removeChild(e);var n=null==t?-1:this.childNodes.indexOf(t);return n>-1?this.childNodes.splice(n,0,e):this.childNodes.push(e),e.parentNode=this,e},l.prototype.setAttributeNS=function(e,t,n){var r=null,i=t,a=t.indexOf(":");(a>-1&&(r=t.substr(0,a),i=t.substr(a+1)),"INPUT"===this.tagName&&"type"===t)?this.type=n:(this._attributes[e]||(this._attributes[e]={}))[i]={value:n,prefix:r}},l.prototype.getAttributeNS=function(e,t){var n=this._attributes[e],r=n&&n[t]&&n[t].value;return"INPUT"===this.tagName&&"type"===t?this.type:"string"!=typeof r?null:r},l.prototype.removeAttributeNS=function(e,t){var n=this._attributes[e];n&&delete n[t]},l.prototype.hasAttributeNS=function(e,t){var n=this._attributes[e];return!!n&&t in n},l.prototype.setAttribute=function(e,t){return this.setAttributeNS(null,e,t)},l.prototype.getAttribute=function(e){return this.getAttributeNS(null,e)},l.prototype.removeAttribute=function(e){return this.removeAttributeNS(null,e)},l.prototype.hasAttribute=function(e){return this.hasAttributeNS(null,e)},l.prototype.removeEventListener=a,l.prototype.addEventListener=i,l.prototype.dispatchEvent=r,l.prototype.focus=function(){},l.prototype.toString=function(){return o(this)},l.prototype.getElementsByClassName=function(e){var t=e.split(" "),r=[];return n(this,(function(e){if(1===e.nodeType){var n=(e.className||"").split(" ");t.every((function(e){return-1!==n.indexOf(e)}))&&r.push(e)}})),r},l.prototype.getElementsByTagName=function(e){e=e.toLowerCase();var t=[];return n(this.childNodes,(function(n){1===n.nodeType&&("*"===e||n.tagName.toLowerCase()===e)&&t.push(n)})),t},l.prototype.contains=function(e){return n(this,(function(t){return e===t}))||!1}})),_Z=lZ((function(e,t){hZ();var n=xZ();function r(e){if(!dZ(this,r))return new r;this.childNodes=[],this.parentNode=null,this.ownerDocument=e||null}t.exports=r,r.prototype.type="DocumentFragment",r.prototype.nodeType=11,r.prototype.nodeName="#document-fragment",r.prototype.appendChild=n.prototype.appendChild,r.prototype.replaceChild=n.prototype.replaceChild,r.prototype.removeChild=n.prototype.removeChild,r.prototype.toString=function(){return this.childNodes.map((function(e){return String(e)})).join("")}})),AZ=lZ((function(e,t){function n(e){}t.exports=n,n.prototype.initEvent=function(e,t,n){this.type=e,this.bubbles=t,this.cancelable=n},n.prototype.preventDefault=function(){}})),TZ=lZ((function(e,t){hZ();var n=mZ(),r=gZ(),i=vZ(),a=xZ(),o=_Z(),s=AZ(),l=yZ(),c=bZ(),u=wZ();function d(){if(!dZ(this,d))return new d;this.head=this.createElement("head"),this.body=this.createElement("body"),this.documentElement=this.createElement("html"),this.documentElement.appendChild(this.head),this.documentElement.appendChild(this.body),this.childNodes=[this.documentElement],this.nodeType=9}t.exports=d;var h=d.prototype;h.createTextNode=function(e){return new i(e,this)},h.createElementNS=function(e,t){var n=null===e?null:String(e);return new a(t,this,n)},h.createElement=function(e){return new a(e,this)},h.createDocumentFragment=function(){return new o(this)},h.createEvent=function(e){return new s(e)},h.createComment=function(e){return new r(e,this)},h.getElementById=function(e){e=String(e);var t=n(this.childNodes,(function(t){if(String(t.id)===e)return t}));return t||null},h.getElementsByClassName=a.prototype.getElementsByClassName,h.getElementsByTagName=a.prototype.getElementsByTagName,h.contains=a.prototype.contains,h.removeEventListener=u,h.addEventListener=c,h.dispatchEvent=l})),SZ=lZ((function(e,t){var n=TZ();t.exports=new n})),kZ=lZ((function(e,t){var n,r="undefined"!=typeof global?global:"undefined"!=typeof window?window:{},i=SZ();"undefined"!=typeof document?n=document:(n=r["__GLOBAL_DOCUMENT_CACHE@4"])||(n=r["__GLOBAL_DOCUMENT_CACHE@4"]=i),t.exports=n}));function CZ(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function IZ(e,t){if(e){if("string"==typeof e)return CZ(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return CZ(e,t)}}function RZ(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(aA){s=!0,i=aA}finally{try{!o&&null!=n.return&&n.return()}finally{if(s)throw i}}return a}}(e,t)||IZ(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var DZ=cZ(uZ()),LZ=cZ(uZ()),PZ=cZ(uZ()),MZ={now:function(){var e=PZ.default.performance,t=e&&e.timing,n=t&&t.navigationStart,r="number"==typeof n&&"function"==typeof e.now?n+e.now():Date.now();return Math.round(r)}},NZ=MZ,OZ=function(){var e,t,n;if("function"==typeof(null===(e=LZ.default.crypto)||void 0===e?void 0:e.getRandomValues)){n=new Uint8Array(32),LZ.default.crypto.getRandomValues(n);for(var r=0;r<32;r++)n[r]=n[r]%16}else{n=[];for(var i=0;i<32;i++)n[i]=16*Math.random()|0}var a=0;t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t="x"===e?n[a]:3&n[a]|8;return a++,t.toString(16)}));var o=NZ.now(),s=null==o?void 0:o.toString(16).substring(3);return s?t.substring(0,28)+s:t},jZ=function(){return("000000"+(Math.random()*Math.pow(36,6)|0).toString(36)).slice(-6)},FZ=function(e){if(e&&"undefined"!=typeof e.nodeName)return e.muxId||(e.muxId=jZ()),e.muxId;var t;try{t=document.querySelector(e)}catch(iA){}return t&&!t.muxId&&(t.muxId=e),(null==t?void 0:t.muxId)||e},UZ=function(e){var t;e&&"undefined"!=typeof e.nodeName?e=FZ(t=e):t=document.querySelector(e);var n=t&&t.nodeName?t.nodeName.toLowerCase():"";return[t,e,n]};function BZ(e){return function(e){if(Array.isArray(e))return CZ(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||IZ(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var $Z=0,VZ=1,WZ=2,zZ=3,HZ=4,qZ=function(e){var t,n,r,i,a,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,s=e?[console,e]:[console],l=(t=console.trace).bind.apply(t,BZ(s)),c=(n=console.info).bind.apply(n,BZ(s)),u=(r=console.debug).bind.apply(r,BZ(s)),d=(i=console.warn).bind.apply(i,BZ(s)),h=(a=console.error).bind.apply(a,BZ(s)),p=o;return{trace:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!(p>$Z))return l.apply(void 0,BZ(t))},debug:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!(p>VZ))return u.apply(void 0,BZ(t))},info:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!(p>WZ))return c.apply(void 0,BZ(t))},warn:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!(p>zZ))return d.apply(void 0,BZ(t))},error:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!(p>HZ))return h.apply(void 0,BZ(t))},get level(){return p},set level(e){e!==this.level&&(p=null!=e?e:o)}}}("[mux]"),GZ=cZ(uZ());function KZ(){return"1"===(GZ.default.doNotTrack||GZ.default.navigator&&GZ.default.navigator.doNotTrack)}function YZ(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function QZ(e,t){if(!dZ(e,t))throw new TypeError("Cannot call a class as a function")}function XZ(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ZZ(e,t,n){return t&&XZ(e.prototype,t),n&&XZ(e,n),e}function JZ(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function eJ(e){return eJ=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},eJ(e)}function tJ(e,t,n){return tJ="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=eJ(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n||e):i.value}},tJ(e,t,n||e)}function nJ(e,t){return nJ=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},nJ(e,t)}function rJ(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=eJ(e);if(t){var i=eJ(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){return!t||"object"!==pZ(t)&&"function"!=typeof t?YZ(e):t}(this,n)}}hZ(),fZ();var iJ=function(e){return aJ(e)[0]},aJ=function(e){if("string"!=typeof e||""===e)return["localhost"];var t,n=(e.match(/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/)||[])[4];return n&&(t=(n.match(/[^\.]+\.[^\.]+$/)||[])[0]),[n,t]},oJ=cZ(uZ()),sJ={exists:function(){var e=oJ.default.performance;return void 0!==(e&&e.timing)},domContentLoadedEventEnd:function(){var e=oJ.default.performance,t=e&&e.timing;return t&&t.domContentLoadedEventEnd},navigationStart:function(){var e=oJ.default.performance,t=e&&e.timing;return t&&t.navigationStart}},lJ=sJ;function cJ(e,t,n){n=void 0===n?1:n,e[t]=e[t]||0,e[t]+=n}function uJ(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){JZ(e,t,n[t])}))}return e}function dJ(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}var hJ=["x-request-id","cf-ray","x-amz-cf-id","x-akamai-request-id"],pJ=["x-cdn","content-type"].concat(hJ);function fJ(e){var t={};return(e=e||"").trim().split(/[\r\n]+/).forEach((function(e){if(e){var n=e.split(": "),r=n.shift();r&&(pJ.indexOf(r.toLowerCase())>=0||0===r.toLowerCase().indexOf("x-litix-"))&&(t[r]=n.join(": "))}})),t}function mJ(e){if(e){var t=hJ.find((function(t){return void 0!==e[t]}));return t?e[t]:void 0}}var gJ=function(e){var t={};for(var n in e){var r=e[n];if(-1!==r["DATA-ID"].search("io.litix.data."))t[r["DATA-ID"].replace("io.litix.data.","")]=r.VALUE}return t},vJ=function(e){if(!e)return{};var t=lJ.navigationStart(),n=e.loading,r=n?n.start:e.trequest,i=n?n.first:e.tfirst,a=n?n.end:e.tload;return{bytesLoaded:e.total,requestStart:Math.round(t+r),responseStart:Math.round(t+i),responseEnd:Math.round(t+a)}},yJ=function(e){if(e&&"function"==typeof e.getAllResponseHeaders)return fJ(e.getAllResponseHeaders())},bJ=function(e,t){if(!e||!e.requestEndDate)return{};var n,r=iJ(e.url),i=e.url,a=e.bytesLoaded,o=new Date(e.requestStartDate).getTime(),s=new Date(e.firstByteDate).getTime(),l=new Date(e.requestEndDate).getTime(),c=isNaN(e.duration)?0:e.duration,u="function"==typeof t.getMetricsFor?t.getMetricsFor(e.mediaType).HttpList:t.getDashMetrics().getHttpRequests(e.mediaType);return u.length>0&&(n=fJ(u[u.length-1]._responseHeaders||"")),{requestStart:o,requestResponseStart:s,requestResponseEnd:l,requestBytesLoaded:a,requestResponseHeaders:n,requestMediaDuration:c,requestHostname:r,requestUrl:i,requestId:n?mJ(n):void 0}},wJ=function(e){var t;return null===(t=e.match(/.*codecs\*?="(.*)"/))||void 0===t?void 0:t[1]},EJ=function(e,t,n){var r=e.log;if(n&&n.on){var i=function(e){try{var t,n,r=null===(n=e.getVersion)||void 0===n||null===(t=n.call(e))||void 0===t?void 0:t.split(".").map((function(e){return parseInt(e)}))[0];return r}catch(i){return!1}}(n),a=function(n,r){return e.emit(t,n,r)},o=function(e){var t=e.type,n=(e.data||{}).url;a("requestcompleted",{request_event_type:t,request_start:0,request_response_start:0,request_response_end:0,request_bytes_loaded:-1,request_type:"manifest",request_hostname:iJ(n),request_url:n})};n.on("manifestLoaded",o);var s={},l=function(e){if("function"!=typeof e.getRequests)return null;var t=e.getRequests({state:"executed"});return 0===t.length?null:t[t.length-1]},c=function(e){var t=e.type,r=e.chunk,i=e.request,o=(r||{}).mediaInfo||{},l=o.type,c=o.bitrateList,u={};(c=c||[]).forEach((function(e,t){u[t]={},u[t].width=e.width,u[t].height=e.height,u[t].bitrate=e.bandwidth,u[t].attrs={}})),"video"===l?s.video=u:"audio"===l?s.audio=u:s.media=u;var d=bJ(i,n),h=d.requestStart,p=d.requestResponseStart,f=d.requestResponseEnd,m=d.requestResponseHeaders,g=d.requestMediaDuration,v=d.requestHostname,y=d.requestUrl,b=d.requestId;a("requestcompleted",{request_event_type:t,request_start:h,request_response_start:p,request_response_end:f,request_bytes_loaded:-1,request_type:l+"_init",request_response_headers:m,request_hostname:v,request_id:b,request_url:y,request_media_duration:g,request_rendition_lists:s})};i>=4?n.on("initFragmentLoaded",c):n.on("initFragmentLoaded",(function(e){var t=e.type,n=e.fragmentModel,r=e.chunk,i=l(n);c({type:t,request:i,chunk:r})}));var u=function(e){var t=e.type,r=e.chunk,i=e.request,o=r||{},s=o.mediaInfo,l=o.start,c=(s||{}).type,u=bJ(i,n),d=u.requestStart,h=u.requestResponseStart,p=u.requestResponseEnd,f=u.requestBytesLoaded,m=u.requestResponseHeaders,g=u.requestMediaDuration,v=u.requestHostname,y=u.requestUrl,b=u.requestId,w=function(e,t){var n=t.getQualityFor(e),r=t.getCurrentTrackFor(e).bitrateList;return r?{currentLevel:n,renditionWidth:r[n].width||null,renditionHeight:r[n].height||null,renditionBitrate:r[n].bandwidth}:{}}(c,n),E=w.currentLevel,x=w.renditionWidth,_=w.renditionHeight,A=w.renditionBitrate;a("requestcompleted",{request_event_type:t,request_start:d,request_response_start:h,request_response_end:p,request_bytes_loaded:f,request_type:c,request_response_headers:m,request_hostname:v,request_id:b,request_url:y,request_media_start_time:l,request_media_duration:g,request_current_level:E,request_labeled_bitrate:A,request_video_width:x,request_video_height:_})};i>=4?n.on("mediaFragmentLoaded",u):n.on("mediaFragmentLoaded",(function(e){var t=e.type,n=e.fragmentModel,r=e.chunk,i=l(n);u({type:t,request:i,chunk:r})}));var d={video:void 0,audio:void 0,totalBitrate:void 0},h=function(e,t,i){if("number"==typeof e.newQuality){var o=e.mediaType;if("audio"===o||"video"===o){var s=n.getBitrateInfoListFor(o).find((function(t){return t.qualityIndex===e.newQuality}));if(!s||"number"!=typeof s.bitrate)return void r.warn("missing bitrate info for ".concat(o));d[o]=dJ(uJ({},s),{codec:n.getCurrentTrackFor(o).codec});var l=function(){if(d.video&&"number"==typeof d.video.bitrate){if(!d.video.width||!d.video.height)return void r.warn("have bitrate info for video but missing width/height");var e=d.video.bitrate;if(d.audio&&"number"==typeof d.audio.bitrate&&(e+=d.audio.bitrate),e!==d.totalBitrate)return d.totalBitrate=e,{video_source_bitrate:e,video_source_height:d.video.height,video_source_width:d.video.width,video_source_codec:wJ(d.video.codec)}}}();l&&a("renditionchange",l)}}else r.warn("missing evt.newQuality in qualityChangeRendered event",e)};n.on("qualityChangeRendered",h);var p=function(e){var t=e.request,n=e.mediaType;a("requestcanceled",{request_event_type:(t=t||{}).type+"_"+t.action,request_url:t.url,request_type:n,request_hostname:iJ(t.url)})};n.on("fragmentLoadingAbandoned",p);var f=function(e){var t,n,r=e.error,i=(null==r||null===(t=r.data)||void 0===t?void 0:t.request)||{},o=(null==r||null===(n=r.data)||void 0===n?void 0:n.response)||{};27===(null==r?void 0:r.code)&&a("requestfailed",{request_error:i.type+"_"+i.action,request_url:i.url,request_hostname:iJ(i.url),request_type:i.mediaType,request_error_code:o.status,request_error_text:o.statusText});var s="".concat(null!=i&&i.url?"url: ".concat(i.url,"\n"):"")+"".concat(null!=o&&o.status||null!=o&&o.statusText?"response: ".concat(null==o?void 0:o.status,", ").concat(null==o?void 0:o.statusText,"\n"):"");a("error",{player_error_code:null==r?void 0:r.code,player_error_message:null==r?void 0:r.message,player_error_context:s})};n.on("error",f),n._stopMuxMonitor=function(){n.off("manifestLoaded",o),n.off("initFragmentLoaded",c),n.off("mediaFragmentLoaded",u),n.off("qualityChangeRendered",h),n.off("error",f),n.off("fragmentLoadingAbandoned",p),delete n._stopMuxMonitor}}else r.warn("Invalid dash.js player reference. Monitoring blocked.")},xJ=0,_J=function(){function e(){QZ(this,e),JZ(this,"_listeners",void 0)}return ZZ(e,[{key:"on",value:function(e,t,n){return t._eventEmitterGuid=t._eventEmitterGuid||++xJ,this._listeners=this._listeners||{},this._listeners[e]=this._listeners[e]||[],n&&(t=t.bind(n)),this._listeners[e].push(t),t}},{key:"off",value:function(e,t){var n=this._listeners&&this._listeners[e];n&&n.forEach((function(e,r){e._eventEmitterGuid===t._eventEmitterGuid&&n.splice(r,1)}))}},{key:"one",value:function(e,t,n){var r=this;t._eventEmitterGuid=t._eventEmitterGuid||++xJ;var i=function(){r.off(e,i),t.apply(n||this,arguments)};i._eventEmitterGuid=t._eventEmitterGuid,this.on(e,i)}},{key:"emit",value:function(e,t){var n=this;if(this._listeners){t=t||{};var r=this._listeners["before*"]||[],i=this._listeners[e]||[],a=this._listeners["after"+e]||[],o=function(t,r){(t=t.slice()).forEach((function(t){t.call(n,{type:e},r)}))};o(r,t),o(i,t),o(a,t)}}}]),e}(),AJ=_J,TJ=cZ(uZ()),SJ=function(){function e(t){var n=this;QZ(this,e),JZ(this,"_playbackHeartbeatInterval",void 0),JZ(this,"_playheadShouldBeProgressing",void 0),JZ(this,"pm",void 0),this.pm=t,this._playbackHeartbeatInterval=null,this._playheadShouldBeProgressing=!1,t.on("playing",(function(){n._playheadShouldBeProgressing=!0})),t.on("play",this._startPlaybackHeartbeatInterval.bind(this)),t.on("playing",this._startPlaybackHeartbeatInterval.bind(this)),t.on("adbreakstart",this._startPlaybackHeartbeatInterval.bind(this)),t.on("adplay",this._startPlaybackHeartbeatInterval.bind(this)),t.on("adplaying",this._startPlaybackHeartbeatInterval.bind(this)),t.on("devicewake",this._startPlaybackHeartbeatInterval.bind(this)),t.on("viewstart",this._startPlaybackHeartbeatInterval.bind(this)),t.on("rebufferstart",this._startPlaybackHeartbeatInterval.bind(this)),t.on("pause",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("ended",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("viewend",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("error",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("aderror",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("adpause",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("adended",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("adbreakend",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("seeked",(function(){t.data.player_is_paused?n._stopPlaybackHeartbeatInterval():n._startPlaybackHeartbeatInterval()})),t.on("timeupdate",(function(){null!==n._playbackHeartbeatInterval&&t.emit("playbackheartbeat")})),t.on("devicesleep",(function(e,r){null!==n._playbackHeartbeatInterval&&(TJ.default.clearInterval(n._playbackHeartbeatInterval),t.emit("playbackheartbeatend",{viewer_time:r.viewer_time}),n._playbackHeartbeatInterval=null)}))}return ZZ(e,[{key:"_startPlaybackHeartbeatInterval",value:function(){var e=this;null===this._playbackHeartbeatInterval&&(this.pm.emit("playbackheartbeat"),this._playbackHeartbeatInterval=TJ.default.setInterval((function(){e.pm.emit("playbackheartbeat")}),this.pm.playbackHeartbeatTime))}},{key:"_stopPlaybackHeartbeatInterval",value:function(){this._playheadShouldBeProgressing=!1,null!==this._playbackHeartbeatInterval&&(TJ.default.clearInterval(this._playbackHeartbeatInterval),this.pm.emit("playbackheartbeatend"),this._playbackHeartbeatInterval=null)}}]),e}(),kJ=SJ,CJ=function e(t){var n=this;QZ(this,e),JZ(this,"viewErrored",void 0),t.on("viewinit",(function(){n.viewErrored=!1})),t.on("error",(function(e,r){try{var i=t.errorTranslator({player_error_code:r.player_error_code,player_error_message:r.player_error_message,player_error_context:r.player_error_context,player_error_severity:r.player_error_severity,player_error_business_exception:r.player_error_business_exception});i&&(t.data.player_error_code=i.player_error_code||r.player_error_code,t.data.player_error_message=i.player_error_message||r.player_error_message,t.data.player_error_context=i.player_error_context||r.player_error_context,t.data.player_error_severity=i.player_error_severity||r.player_error_severity,t.data.player_error_business_exception=i.player_error_business_exception||r.player_error_business_exception,n.viewErrored=!0)}catch(tA){t.mux.log.warn("Exception in error translator callback.",tA),n.viewErrored=!0}})),t.on("aftererror",(function(){var e,n,r,i,a;null===(e=t.data)||void 0===e||delete e.player_error_code,null===(n=t.data)||void 0===n||delete n.player_error_message,null===(r=t.data)||void 0===r||delete r.player_error_context,null===(i=t.data)||void 0===i||delete i.player_error_severity,null===(a=t.data)||void 0===a||delete a.player_error_business_exception}))},IJ=function(){function e(t){QZ(this,e),JZ(this,"_watchTimeTrackerLastCheckedTime",void 0),JZ(this,"pm",void 0),this.pm=t,this._watchTimeTrackerLastCheckedTime=null,t.on("playbackheartbeat",this._updateWatchTime.bind(this)),t.on("playbackheartbeatend",this._clearWatchTimeState.bind(this))}return ZZ(e,[{key:"_updateWatchTime",value:function(e,t){var n=t.viewer_time;null===this._watchTimeTrackerLastCheckedTime&&(this._watchTimeTrackerLastCheckedTime=n),cJ(this.pm.data,"view_watch_time",n-this._watchTimeTrackerLastCheckedTime),this._watchTimeTrackerLastCheckedTime=n}},{key:"_clearWatchTimeState",value:function(e,t){this._updateWatchTime(e,t),this._watchTimeTrackerLastCheckedTime=null}}]),e}(),RJ=IJ,DJ=function(){function e(t){var n=this;QZ(this,e),JZ(this,"_playbackTimeTrackerLastPlayheadPosition",void 0),JZ(this,"_lastTime",void 0),JZ(this,"_isAdPlaying",void 0),JZ(this,"_callbackUpdatePlaybackTime",void 0),JZ(this,"pm",void 0),this.pm=t,this._playbackTimeTrackerLastPlayheadPosition=-1,this._lastTime=NZ.now(),this._isAdPlaying=!1,this._callbackUpdatePlaybackTime=null;var r=this._startPlaybackTimeTracking.bind(this);t.on("playing",r),t.on("adplaying",r),t.on("seeked",r);var i=this._stopPlaybackTimeTracking.bind(this);t.on("playbackheartbeatend",i),t.on("seeking",i),t.on("adplaying",(function(){n._isAdPlaying=!0})),t.on("adended",(function(){n._isAdPlaying=!1})),t.on("adpause",(function(){n._isAdPlaying=!1})),t.on("adbreakstart",(function(){n._isAdPlaying=!1})),t.on("adbreakend",(function(){n._isAdPlaying=!1})),t.on("adplay",(function(){n._isAdPlaying=!1})),t.on("viewinit",(function(){n._playbackTimeTrackerLastPlayheadPosition=-1,n._lastTime=NZ.now(),n._isAdPlaying=!1,n._callbackUpdatePlaybackTime=null}))}return ZZ(e,[{key:"_startPlaybackTimeTracking",value:function(){null===this._callbackUpdatePlaybackTime&&(this._callbackUpdatePlaybackTime=this._updatePlaybackTime.bind(this),this._playbackTimeTrackerLastPlayheadPosition=this.pm.data.player_playhead_time,this.pm.on("playbackheartbeat",this._callbackUpdatePlaybackTime))}},{key:"_stopPlaybackTimeTracking",value:function(){this._callbackUpdatePlaybackTime&&(this._updatePlaybackTime(),this.pm.off("playbackheartbeat",this._callbackUpdatePlaybackTime),this._callbackUpdatePlaybackTime=null,this._playbackTimeTrackerLastPlayheadPosition=-1)}},{key:"_updatePlaybackTime",value:function(){var e=this.pm.data.player_playhead_time,t=NZ.now(),n=-1;this._playbackTimeTrackerLastPlayheadPosition>=0&&e>this._playbackTimeTrackerLastPlayheadPosition?n=e-this._playbackTimeTrackerLastPlayheadPosition:this._isAdPlaying&&(n=t-this._lastTime),n>0&&n<=1e3&&cJ(this.pm.data,"view_content_playback_time",n),this._playbackTimeTrackerLastPlayheadPosition=e,this._lastTime=t}}]),e}(),LJ=DJ,PJ=function(){function e(t){QZ(this,e),JZ(this,"pm",void 0),this.pm=t;var n=this._updatePlayheadTime.bind(this);t.on("playbackheartbeat",n),t.on("playbackheartbeatend",n),t.on("timeupdate",n),t.on("destroy",(function(){t.off("timeupdate",n)}))}return ZZ(e,[{key:"_updateMaxPlayheadPosition",value:function(){this.pm.data.view_max_playhead_position="undefined"==typeof this.pm.data.view_max_playhead_position?this.pm.data.player_playhead_time:Math.max(this.pm.data.view_max_playhead_position,this.pm.data.player_playhead_time)}},{key:"_updatePlayheadTime",value:function(e,t){var n=this,r=function(){n.pm.currentFragmentPDT&&n.pm.currentFragmentStart&&(n.pm.data.player_program_time=n.pm.currentFragmentPDT+n.pm.data.player_playhead_time-n.pm.currentFragmentStart)};if(t&&t.player_playhead_time)this.pm.data.player_playhead_time=t.player_playhead_time,r(),this._updateMaxPlayheadPosition();else if(this.pm.getPlayheadTime){var i=this.pm.getPlayheadTime();"undefined"!=typeof i&&(this.pm.data.player_playhead_time=i,r(),this._updateMaxPlayheadPosition())}}}]),e}(),MJ=PJ,NJ=3e5,OJ=function e(t){if(QZ(this,e),!t.disableRebufferTracking){var n,r=function(e,t){i(t),n=void 0},i=function(e){if(n){var r=e.viewer_time-n;cJ(t.data,"view_rebuffer_duration",r),n=e.viewer_time,t.data.view_rebuffer_duration>NJ&&(t.emit("viewend"),t.send("viewend"),t.mux.log.warn("Ending view after rebuffering for longer than ".concat(NJ,"ms, future events will be ignored unless a programchange or videochange occurs.")))}t.data.view_watch_time>=0&&t.data.view_rebuffer_count>0&&(t.data.view_rebuffer_frequency=t.data.view_rebuffer_count/t.data.view_watch_time,t.data.view_rebuffer_percentage=t.data.view_rebuffer_duration/t.data.view_watch_time)};t.on("playbackheartbeat",(function(e,t){return i(t)})),t.on("rebufferstart",(function(e,i){n||(cJ(t.data,"view_rebuffer_count",1),n=i.viewer_time,t.one("rebufferend",r))})),t.on("viewinit",(function(){n=void 0,t.off("rebufferend",r)}))}},jJ=function(){function e(t){var n=this;QZ(this,e),JZ(this,"_lastCheckedTime",void 0),JZ(this,"_lastPlayheadTime",void 0),JZ(this,"_lastPlayheadTimeUpdatedTime",void 0),JZ(this,"_rebuffering",void 0),JZ(this,"pm",void 0),this.pm=t,!t.disableRebufferTracking&&!t.disablePlayheadRebufferTracking&&(this._lastCheckedTime=null,this._lastPlayheadTime=null,this._lastPlayheadTimeUpdatedTime=null,t.on("playbackheartbeat",this._checkIfRebuffering.bind(this)),t.on("playbackheartbeatend",this._cleanupRebufferTracker.bind(this)),t.on("seeking",(function(){n._cleanupRebufferTracker(null,{viewer_time:NZ.now()})})))}return ZZ(e,[{key:"_checkIfRebuffering",value:function(e,t){if(this.pm.seekingTracker.isSeeking||this.pm.adTracker.isAdBreak||!this.pm.playbackHeartbeat._playheadShouldBeProgressing)this._cleanupRebufferTracker(e,t);else if(null!==this._lastCheckedTime)if(this._lastPlayheadTime===this.pm.data.player_playhead_time){var n=t.viewer_time-this._lastPlayheadTimeUpdatedTime;"number"==typeof this.pm.sustainedRebufferThreshold&&n>=this.pm.sustainedRebufferThreshold&&(this._rebuffering||(this._rebuffering=!0,this.pm.emit("rebufferstart",{viewer_time:this._lastPlayheadTimeUpdatedTime}))),this._lastCheckedTime=t.viewer_time}else this._cleanupRebufferTracker(e,t,!0);else this._prepareRebufferTrackerState(t.viewer_time)}},{key:"_clearRebufferTrackerState",value:function(){this._lastCheckedTime=null,this._lastPlayheadTime=null,this._lastPlayheadTimeUpdatedTime=null}},{key:"_prepareRebufferTrackerState",value:function(e){this._lastCheckedTime=e,this._lastPlayheadTime=this.pm.data.player_playhead_time,this._lastPlayheadTimeUpdatedTime=e}},{key:"_cleanupRebufferTracker",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this._rebuffering)this._rebuffering=!1,this.pm.emit("rebufferend",{viewer_time:t.viewer_time});else{if(null===this._lastCheckedTime)return;var r=this.pm.data.player_playhead_time-this._lastPlayheadTime,i=t.viewer_time-this._lastPlayheadTimeUpdatedTime;"number"==typeof this.pm.minimumRebufferDuration&&r>0&&i-r>this.pm.minimumRebufferDuration&&(this._lastCheckedTime=null,this.pm.emit("rebufferstart",{viewer_time:this._lastPlayheadTimeUpdatedTime}),this.pm.emit("rebufferend",{viewer_time:this._lastPlayheadTimeUpdatedTime+i-r}))}n?this._prepareRebufferTrackerState(t.viewer_time):this._clearRebufferTrackerState()}}]),e}(),FJ=jJ,UJ=function(){function e(t){var n=this;QZ(this,e),JZ(this,"NAVIGATION_START",void 0),JZ(this,"pm",void 0),this.pm=t,t.on("viewinit",(function(){var e=t.data,r=e.view_id;if(!e.view_program_changed){var i=function(e,i){var a=i.viewer_time;("playing"===e.type&&"undefined"==typeof t.data.view_time_to_first_frame||"adplaying"===e.type&&("undefined"==typeof t.data.view_time_to_first_frame||n._inPrerollPosition()))&&n.calculateTimeToFirstFrame(a||NZ.now(),r)};t.one("playing",i),t.one("adplaying",i),t.one("viewend",(function(){t.off("playing",i),t.off("adplaying",i)}))}}))}return ZZ(e,[{key:"_inPrerollPosition",value:function(){return"undefined"==typeof this.pm.data.view_content_playback_time||this.pm.data.view_content_playback_time<=1e3}},{key:"calculateTimeToFirstFrame",value:function(e,t){t===this.pm.data.view_id&&(this.pm.watchTimeTracker._updateWatchTime(null,{viewer_time:e}),this.pm.data.view_time_to_first_frame=this.pm.data.view_watch_time,(this.pm.data.player_autoplay_on||this.pm.data.video_is_autoplay)&&this.NAVIGATION_START&&(this.pm.data.view_aggregate_startup_time=this.pm.data.view_start+this.pm.data.view_watch_time-this.NAVIGATION_START))}}]),e}(),BJ=UJ,$J=function e(t){var n=this;QZ(this,e),JZ(this,"_lastPlayerHeight",void 0),JZ(this,"_lastPlayerWidth",void 0),JZ(this,"_lastPlayheadPosition",void 0),JZ(this,"_lastSourceHeight",void 0),JZ(this,"_lastSourceWidth",void 0),t.on("viewinit",(function(){n._lastPlayheadPosition=-1}));["pause","rebufferstart","seeking","error","adbreakstart","hb","renditionchange","orientationchange","viewend"].forEach((function(e){t.on(e,(function(){if(n._lastPlayheadPosition>=0&&t.data.player_playhead_time>=0&&n._lastPlayerWidth>=0&&n._lastSourceWidth>0&&n._lastPlayerHeight>=0&&n._lastSourceHeight>0){var e=t.data.player_playhead_time-n._lastPlayheadPosition;if(e<0)return void(n._lastPlayheadPosition=-1);var r=Math.min(n._lastPlayerWidth/n._lastSourceWidth,n._lastPlayerHeight/n._lastSourceHeight),i=Math.max(0,r-1),a=Math.max(0,1-r);t.data.view_max_upscale_percentage=Math.max(t.data.view_max_upscale_percentage||0,i),t.data.view_max_downscale_percentage=Math.max(t.data.view_max_downscale_percentage||0,a),cJ(t.data,"view_total_content_playback_time",e),cJ(t.data,"view_total_upscaling",i*e),cJ(t.data,"view_total_downscaling",a*e)}n._lastPlayheadPosition=-1}))})),["playing","hb","renditionchange","orientationchange"].forEach((function(e){t.on(e,(function(){n._lastPlayheadPosition=t.data.player_playhead_time,n._lastPlayerWidth=t.data.player_width,n._lastPlayerHeight=t.data.player_height,n._lastSourceWidth=t.data.video_source_width,n._lastSourceHeight=t.data.video_source_height}))}))},VJ=function e(t){var n=this;QZ(this,e),JZ(this,"isSeeking",void 0),this.isSeeking=!1;var r=-1,i=function(){var e=NZ.now(),i=(t.data.viewer_time||e)-(r||e);cJ(t.data,"view_seek_duration",i),t.data.view_max_seek_time=Math.max(t.data.view_max_seek_time||0,i),n.isSeeking=!1,r=-1};t.on("seeking",(function(e,a){Object.assign(t.data,a),n.isSeeking&&a.viewer_time-r<=2e3?r=a.viewer_time:(n.isSeeking&&i(),n.isSeeking=!0,r=a.viewer_time,cJ(t.data,"view_seek_count",1),t.send("seeking"))})),t.on("seeked",(function(){i()})),t.on("viewend",(function(){n.isSeeking&&(i(),t.send("seeked")),n.isSeeking=!1,r=-1}))},WJ=function(e,t){e.push(t),e.sort((function(e,t){return e.viewer_time-t.viewer_time}))},zJ=["adbreakstart","adrequest","adresponse","adplay","adplaying","adpause","adended","adbreakend","aderror","adclicked","adskipped"],HJ=function(){function e(t){var n=this;QZ(this,e),JZ(this,"_adHasPlayed",void 0),JZ(this,"_adRequests",void 0),JZ(this,"_adResponses",void 0),JZ(this,"_currentAdRequestNumber",void 0),JZ(this,"_currentAdResponseNumber",void 0),JZ(this,"_prerollPlayTime",void 0),JZ(this,"_wouldBeNewAdPlay",void 0),JZ(this,"isAdBreak",void 0),JZ(this,"pm",void 0),this.pm=t,t.on("viewinit",(function(){n.isAdBreak=!1,n._currentAdRequestNumber=0,n._currentAdResponseNumber=0,n._adRequests=[],n._adResponses=[],n._adHasPlayed=!1,n._wouldBeNewAdPlay=!0,n._prerollPlayTime=void 0})),zJ.forEach((function(e){return t.on(e,n._updateAdData.bind(n))}));var r=function(){n.isAdBreak=!1};t.on("adbreakstart",(function(){n.isAdBreak=!0})),t.on("play",r),t.on("playing",r),t.on("viewend",r),t.on("adrequest",(function(e,r){r=Object.assign({ad_request_id:"generatedAdRequestId"+n._currentAdRequestNumber++},r),WJ(n._adRequests,r),cJ(t.data,"view_ad_request_count"),n.inPrerollPosition()&&(t.data.view_preroll_requested=!0,n._adHasPlayed||cJ(t.data,"view_preroll_request_count"))})),t.on("adresponse",(function(e,r){r=Object.assign({ad_request_id:"generatedAdRequestId"+n._currentAdResponseNumber++},r),WJ(n._adResponses,r);var i=n.findAdRequest(r.ad_request_id);i&&cJ(t.data,"view_ad_request_time",Math.max(0,r.viewer_time-i.viewer_time))})),t.on("adplay",(function(e,r){n._adHasPlayed=!0,n._wouldBeNewAdPlay&&(n._wouldBeNewAdPlay=!1,cJ(t.data,"view_ad_played_count")),n.inPrerollPosition()&&!t.data.view_preroll_played&&(t.data.view_preroll_played=!0,n._adRequests.length>0&&(t.data.view_preroll_request_time=Math.max(0,r.viewer_time-n._adRequests[0].viewer_time)),t.data.view_start&&(t.data.view_startup_preroll_request_time=Math.max(0,r.viewer_time-t.data.view_start)),n._prerollPlayTime=r.viewer_time)})),t.on("adplaying",(function(e,r){n.inPrerollPosition()&&"undefined"==typeof t.data.view_preroll_load_time&&"undefined"!=typeof n._prerollPlayTime&&(t.data.view_preroll_load_time=r.viewer_time-n._prerollPlayTime,t.data.view_startup_preroll_load_time=r.viewer_time-n._prerollPlayTime)})),t.on("adclicked",(function(e,r){n._wouldBeNewAdPlay||cJ(t.data,"view_ad_clicked_count")})),t.on("adskipped",(function(e,r){n._wouldBeNewAdPlay||cJ(t.data,"view_ad_skipped_count")})),t.on("adended",(function(){n._wouldBeNewAdPlay=!0})),t.on("aderror",(function(){n._wouldBeNewAdPlay=!0}))}return ZZ(e,[{key:"inPrerollPosition",value:function(){return"undefined"==typeof this.pm.data.view_content_playback_time||this.pm.data.view_content_playback_time<=1e3}},{key:"findAdRequest",value:function(e){for(var t=0;t<this._adRequests.length;t++)if(this._adRequests[t].ad_request_id===e)return this._adRequests[t]}},{key:"_updateAdData",value:function(e,t){if(this.inPrerollPosition()){if(!this.pm.data.view_preroll_ad_tag_hostname&&t.ad_tag_url){var n=RZ(aJ(t.ad_tag_url),2),r=n[0],i=n[1];this.pm.data.view_preroll_ad_tag_domain=i,this.pm.data.view_preroll_ad_tag_hostname=r}if(!this.pm.data.view_preroll_ad_asset_hostname&&t.ad_asset_url){var a=RZ(aJ(t.ad_asset_url),2),o=a[0],s=a[1];this.pm.data.view_preroll_ad_asset_domain=s,this.pm.data.view_preroll_ad_asset_hostname=o}}this.pm.data.ad_asset_url=null==t?void 0:t.ad_asset_url,this.pm.data.ad_tag_url=null==t?void 0:t.ad_tag_url,this.pm.data.ad_creative_id=null==t?void 0:t.ad_creative_id,this.pm.data.ad_id=null==t?void 0:t.ad_id,this.pm.data.ad_universal_id=null==t?void 0:t.ad_universal_id}}]),e}(),qJ=HJ,GJ=cZ(uZ()),KJ=function e(t){QZ(this,e);var n,r,i=function(){t.disableRebufferTracking||n&&(cJ(t.data,"view_waiting_rebuffer_duration",NZ.now()-n),n=!1,GJ.default.clearInterval(r))},a=!1,o=function(){a=!1,i()};t.on("waiting",(function(){a&&(t.disableRebufferTracking||(cJ(t.data,"view_waiting_rebuffer_count",1),n=NZ.now(),r=GJ.default.setInterval((function(){if(n){var e=NZ.now();cJ(t.data,"view_waiting_rebuffer_duration",e-n),n=e}}),250)))})),t.on("playing",(function(){i(),a=!0})),t.on("pause",o),t.on("seeking",o)},YJ=function e(t){var n=this;QZ(this,e),JZ(this,"lastWallClockTime",void 0);var r=function(){n.lastWallClockTime=NZ.now(),t.on("before*",i)},i=function(e){var r=NZ.now(),i=n.lastWallClockTime;n.lastWallClockTime=r,r-i>3e4&&(t.emit("devicesleep",{viewer_time:i}),Object.assign(t.data,{viewer_time:i}),t.send("devicesleep"),t.emit("devicewake",{viewer_time:r}),Object.assign(t.data,{viewer_time:r}),t.send("devicewake"))};t.one("playbackheartbeat",r),t.on("playbackheartbeatend",(function(){t.off("before*",i),t.one("playbackheartbeat",r)}))},QJ=cZ(uZ()),XJ=function(){var e=function(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t};function t(n){function r(t,i,a){var o;if("undefined"!=typeof document){if(arguments.length>1){if("number"==typeof(a=e({path:"/"},r.defaults,a)).expires){var s=new Date;s.setMilliseconds(s.getMilliseconds()+864e5*a.expires),a.expires=s}try{o=JSON.stringify(i),/^[\{\[]/.test(o)&&(i=o)}catch(Woe){}return i=n.write?n.write(i,t):encodeURIComponent(String(i)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=(t=(t=encodeURIComponent(String(t))).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[\(\)]/g,escape),document.cookie=[t,"=",i,a.expires?"; expires="+a.expires.toUTCString():"",a.path?"; path="+a.path:"",a.domain?"; domain="+a.domain:"",a.secure?"; secure":""].join("")}t||(o={});for(var l=document.cookie?document.cookie.split("; "):[],c=/(%[0-9A-Z]{2})+/g,u=0;u<l.length;u++){var d=l[u].split("="),h=d.slice(1).join("=");'"'===h.charAt(0)&&(h=h.slice(1,-1));try{var p=d[0].replace(c,decodeURIComponent);if(h=n.read?n.read(h,p):n(h,p)||h.replace(c,decodeURIComponent),this.json)try{h=JSON.parse(h)}catch(Woe){}if(t===p){o=h;break}t||(o[p]=h)}catch(Woe){}}return o}}return r.set=r,r.get=function(e){return r.call(r,e)},r.getJSON=function(){return r.apply({json:!0},[].slice.call(arguments))},r.defaults={},r.remove=function(t,n){r(t,"",e(n,{expires:-1}))},r.withConverter=t,r}return t((function(){}))}(),ZJ="muxData",JJ=function(){var e;try{e=function(e){return e.split("&").reduce((function(e,t){var n=RZ(t.split("="),2),r=n[0],i=n[1],a=+i,o=i&&a==i?a:i;return e[r]=o,e}),{})}(XJ.get(ZJ)||"")}catch(X_){e={}}return e},e0=function(e){try{XJ.set(ZJ,function(e){return Object.entries(e).map((function(e){var t=RZ(e,2),n=t[0],r=t[1];return"".concat(n,"=").concat(r)})).join("&")}(e),{expires:365})}catch(X_){}};var t0=cZ(uZ()),n0=function(){var e;switch(r0()){case"cellular":e="cellular";break;case"ethernet":e="wired";break;case"wifi":e="wifi";break;case void 0:break;default:e="other"}return e},r0=function(){var e=t0.default.navigator,t=e&&(e.connection||e.mozConnection||e.webkitConnection);return t&&t.type};n0.getConnectionFromAPI=r0;var i0=n0,a0=s0({a:"env",b:"beacon",c:"custom",d:"ad",e:"event",f:"experiment",i:"internal",m:"mux",n:"response",p:"player",q:"request",r:"retry",s:"session",t:"timestamp",u:"viewer",v:"video",w:"page",x:"view",y:"sub"}),o0=s0({ad:"ad",af:"affiliate",ag:"aggregate",ap:"api",al:"application",ao:"audio",ar:"architecture",as:"asset",au:"autoplay",av:"average",bi:"bitrate",bn:"brand",br:"break",bw:"browser",by:"bytes",bz:"business",ca:"cached",cb:"cancel",cc:"codec",cd:"code",cg:"category",ch:"changed",ci:"client",ck:"clicked",cl:"canceled",cn:"config",co:"count",ce:"counter",cp:"complete",cq:"creator",cr:"creative",cs:"captions",ct:"content",cu:"current",cx:"connection",cz:"context",dg:"downscaling",dm:"domain",dn:"cdn",do:"downscale",dr:"drm",dp:"dropped",du:"duration",dv:"device",dy:"dynamic",eb:"enabled",ec:"encoding",ed:"edge",en:"end",eg:"engine",em:"embed",er:"error",ep:"experiments",es:"errorcode",et:"errortext",ee:"event",ev:"events",ex:"expires",ez:"exception",fa:"failed",fi:"first",fm:"family",ft:"format",fp:"fps",fq:"frequency",fr:"frame",fs:"fullscreen",ha:"has",hb:"holdback",he:"headers",ho:"host",hn:"hostname",ht:"height",id:"id",ii:"init",in:"instance",ip:"ip",is:"is",ke:"key",la:"language",lb:"labeled",le:"level",li:"live",ld:"loaded",lo:"load",ls:"lists",lt:"latency",ma:"max",md:"media",me:"message",mf:"manifest",mi:"mime",ml:"midroll",mm:"min",mn:"manufacturer",mo:"model",mx:"mux",ne:"newest",nm:"name",no:"number",on:"on",or:"origin",os:"os",pa:"paused",pb:"playback",pd:"producer",pe:"percentage",pf:"played",pg:"program",ph:"playhead",pi:"plugin",pl:"preroll",pn:"playing",po:"poster",pp:"pip",pr:"preload",ps:"position",pt:"part",py:"property",px:"pop",pz:"plan",ra:"rate",rd:"requested",re:"rebuffer",rf:"rendition",rg:"range",rm:"remote",ro:"ratio",rp:"response",rq:"request",rs:"requests",sa:"sample",sd:"skipped",se:"session",sh:"shift",sk:"seek",sm:"stream",so:"source",sq:"sequence",sr:"series",ss:"status",st:"start",su:"startup",sv:"server",sw:"software",sy:"severity",ta:"tag",tc:"tech",te:"text",tg:"target",th:"throughput",ti:"time",tl:"total",to:"to",tt:"title",ty:"type",ug:"upscaling",un:"universal",up:"upscale",ur:"url",us:"user",va:"variant",vd:"viewed",vi:"video",ve:"version",vw:"view",vr:"viewer",wd:"width",wa:"watch",wt:"waiting"});function s0(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}function l0(e){var t={},n={};return Object.keys(e).forEach((function(r){var i=!1;if(e.hasOwnProperty(r)&&void 0!==e[r]){var a=r.split("_"),o=a[0],s=a0[o];s||(qZ.info("Data key word `"+a[0]+"` not expected in "+r),s=o+"_"),a.splice(1).forEach((function(e){"url"===e&&(i=!0),o0[e]?s+=o0[e]:Number.isInteger(Number(e))?s+=e:(qZ.info("Data key word `"+e+"` not expected in "+r),s+="_"+e+"_")})),i?n[s]=e[r]:t[s]=e[r]}})),Object.assign(t,n)}var c0=cZ(uZ()),u0=cZ(kZ()),d0={maxBeaconSize:300,maxQueueLength:3600,baseTimeBetweenBeacons:1e4,maxPayloadKBSize:500},h0=["hb","requestcompleted","requestfailed","requestcanceled"],p0=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._beaconUrl=e||"https://img.litix.io",this._eventQueue=[],this._postInFlight=!1,this._resendAfterPost=!1,this._failureCount=0,this._sendTimeout=!1,this._options=Object.assign({},d0,t)};p0.prototype.queueEvent=function(e,t){var n=Object.assign({},t);return(this._eventQueue.length<=this._options.maxQueueLength||"eventrateexceeded"===e)&&(this._eventQueue.push(n),this._sendTimeout||this._startBeaconSending(),this._eventQueue.length<=this._options.maxQueueLength)},p0.prototype.flushEvents=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&1===this._eventQueue.length?this._eventQueue.pop():(this._eventQueue.length&&this._sendBeaconQueue(),this._startBeaconSending())},p0.prototype.destroy=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.destroyed=!0,e?this._clearBeaconQueue():this.flushEvents(),c0.default.clearTimeout(this._sendTimeout)},p0.prototype._clearBeaconQueue=function(){var e=this._eventQueue.length>this._options.maxBeaconSize?this._eventQueue.length-this._options.maxBeaconSize:0,t=this._eventQueue.slice(e);e>0&&Object.assign(t[t.length-1],l0({mux_view_message:"event queue truncated"}));var n=this._createPayload(t);m0(this._beaconUrl,n,!0,(function(){}))},p0.prototype._sendBeaconQueue=function(){var e=this;if(this._postInFlight)this._resendAfterPost=!0;else{var t=this._eventQueue.slice(0,this._options.maxBeaconSize);this._eventQueue=this._eventQueue.slice(this._options.maxBeaconSize),this._postInFlight=!0;var n=this._createPayload(t),r=NZ.now();m0(this._beaconUrl,n,!1,(function(n,i){i?(e._eventQueue=t.concat(e._eventQueue),e._failureCount+=1,qZ.info("Error sending beacon: "+i)):e._failureCount=0,e._roundTripTime=NZ.now()-r,e._postInFlight=!1,e._resendAfterPost&&(e._resendAfterPost=!1,e._eventQueue.length>0&&e._sendBeaconQueue())}))}},p0.prototype._getNextBeaconTime=function(){if(!this._failureCount)return this._options.baseTimeBetweenBeacons;var e=Math.pow(2,this._failureCount-1);return(1+(e*=Math.random()))*this._options.baseTimeBetweenBeacons},p0.prototype._startBeaconSending=function(){var e=this;c0.default.clearTimeout(this._sendTimeout),!this.destroyed&&(this._sendTimeout=c0.default.setTimeout((function(){e._eventQueue.length&&e._sendBeaconQueue(),e._startBeaconSending()}),this._getNextBeaconTime()))},p0.prototype._createPayload=function(e){var t=this,n={transmission_timestamp:Math.round(NZ.now())};this._roundTripTime&&(n.rtt_ms=Math.round(this._roundTripTime));var r,i,a,o=function(){r=JSON.stringify({metadata:n,events:i||e}),a=r.length/1024},s=function(){return a<=t._options.maxPayloadKBSize};return o(),s()||(qZ.info("Payload size is too big ("+a+" kb). Removing unnecessary events."),i=e.filter((function(e){return-1===h0.indexOf(e.e)})),o()),s()||(qZ.info("Payload size still too big ("+a+" kb). Cropping fields.."),i.forEach((function(e){for(var t in e){var n=e[t];"string"==typeof n&&n.length>51200&&(e[t]=n.substring(0,51200))}})),o()),r};var f0="function"==typeof u0.default.exitPictureInPicture?function(e){return e.length<=57344}:function(e){return!1},m0=function(e,t,n,r){if(n&&navigator&&navigator.sendBeacon&&navigator.sendBeacon(e,t))r();else if(c0.default.fetch)c0.default.fetch(e,{method:"POST",body:t,headers:{"Content-Type":"text/plain"},keepalive:f0(t)}).then((function(e){return r(null,e.ok?null:"Error")})).catch((function(e){return r(null,e)}));else{if(c0.default.XMLHttpRequest){var i=new c0.default.XMLHttpRequest;return i.onreadystatechange=function(){if(4===i.readyState)return r(null,200!==i.status?"error":void 0)},i.open("POST",e),i.setRequestHeader("Content-Type","text/plain"),void i.send(t)}r()}},g0=p0,v0=["env_key","view_id","view_sequence_number","player_sequence_number","beacon_domain","player_playhead_time","viewer_time","mux_api_version","event","video_id","player_instance_id","player_error_code","player_error_message","player_error_context","player_error_severity","player_error_business_exception"],y0=["adplay","adplaying","adpause","adfirstquartile","admidpoint","adthirdquartile","adended","adresponse","adrequest"],b0=["ad_id","ad_creative_id","ad_universal_id"],w0=["viewstart","error","ended","viewend"],E0=function(){function e(t,n){var r,i,a,o,s,l,c,u,d,h,p,f,m,g,v,y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};QZ(this,e),JZ(this,"mux",void 0),JZ(this,"envKey",void 0),JZ(this,"options",void 0),JZ(this,"eventQueue",void 0),JZ(this,"sampleRate",void 0),JZ(this,"disableCookies",void 0),JZ(this,"respectDoNotTrack",void 0),JZ(this,"previousBeaconData",void 0),JZ(this,"lastEventTime",void 0),JZ(this,"rateLimited",void 0),JZ(this,"pageLevelData",void 0),JZ(this,"viewerData",void 0),this.mux=t,this.envKey=n,this.options=y,this.previousBeaconData=null,this.lastEventTime=0,this.rateLimited=!1,this.eventQueue=new g0(function(e,t){var n=t.beaconCollectionDomain,r=t.beaconDomain;if(n)return"https://"+n;var i=r||"litix.io";return(e=e||"inferred").match(/^[a-z0-9]+$/)?"https://"+e+"."+i:"https://img.litix.io/a.gif"}(this.envKey,this.options)),this.sampleRate=null!==(m=this.options.sampleRate)&&void 0!==m?m:1,this.disableCookies=null!==(g=this.options.disableCookies)&&void 0!==g&&g,this.respectDoNotTrack=null!==(v=this.options.respectDoNotTrack)&&void 0!==v&&v,this.previousBeaconData=null,this.lastEventTime=0,this.rateLimited=!1,this.pageLevelData={mux_api_version:this.mux.API_VERSION,mux_embed:this.mux.NAME,mux_embed_version:this.mux.VERSION,viewer_application_name:null===(r=this.options.platform)||void 0===r?void 0:r.name,viewer_application_version:null===(i=this.options.platform)||void 0===i?void 0:i.version,viewer_application_engine:null===(a=this.options.platform)||void 0===a?void 0:a.layout,viewer_device_name:null===(o=this.options.platform)||void 0===o?void 0:o.product,viewer_device_category:"",viewer_device_manufacturer:null===(s=this.options.platform)||void 0===s?void 0:s.manufacturer,viewer_os_family:null===(c=this.options.platform)||void 0===c||null===(l=c.os)||void 0===l?void 0:l.family,viewer_os_architecture:null===(d=this.options.platform)||void 0===d||null===(u=d.os)||void 0===u?void 0:u.architecture,viewer_os_version:null===(p=this.options.platform)||void 0===p||null===(h=p.os)||void 0===h?void 0:h.version,viewer_connection_type:i0(),page_url:null===QJ.default||void 0===QJ.default||null===(f=QJ.default.location)||void 0===f?void 0:f.href},this.viewerData=this.disableCookies?{}:function(){var e=JJ();return e.mux_viewer_id=e.mux_viewer_id||OZ(),e.msn=e.msn||Math.random(),e0(e),{mux_viewer_id:e.mux_viewer_id,mux_sample_number:e.msn}}()}return ZZ(e,[{key:"send",value:function(e,t){if(e&&null!=t&&t.view_id){if(this.respectDoNotTrack&&KZ())return qZ.info("Not sending `"+e+"` because Do Not Track is enabled");if(!t||"object"!=typeof t)return qZ.error("A data object was expected in send() but was not provided");var n=this.disableCookies?{}:function(){var e=JJ(),t=NZ.now();return e.session_start&&(e.sst=e.session_start,delete e.session_start),e.session_id&&(e.sid=e.session_id,delete e.session_id),e.session_expires&&(e.sex=e.session_expires,delete e.session_expires),(!e.sex||e.sex<t)&&(e.sid=OZ(),e.sst=t),e.sex=t+15e5,e0(e),{session_id:e.sid,session_start:e.sst,session_expires:e.sex}}(),r=dJ(uJ({},this.pageLevelData,t,n,this.viewerData),{event:e,env_key:this.envKey});r.user_id&&(r.viewer_user_id=r.user_id,delete r.user_id);var i,a=(null!==(i=r.mux_sample_number)&&void 0!==i?i:0)>=this.sampleRate,o=l0(this._deduplicateBeaconData(e,r));if(this.lastEventTime=this.mux.utils.now(),a)return qZ.info("Not sending event due to sample rate restriction",e,r,o);if(this.envKey||qZ.info("Missing environment key (envKey) - beacons will be dropped if the video source is not a valid mux video URL",e,r,o),!this.rateLimited)if(qZ.info("Sending event",e,r,o),this.rateLimited=!this.eventQueue.queueEvent(e,o),this.mux.WINDOW_UNLOADING&&"viewend"===e)this.eventQueue.destroy(!0);else if(this.mux.WINDOW_HIDDEN&&"hb"===e?this.eventQueue.flushEvents(!0):w0.indexOf(e)>=0&&this.eventQueue.flushEvents(),this.rateLimited)return r.event="eventrateexceeded",o=l0(r),this.eventQueue.queueEvent(r.event,o),qZ.error("Beaconing disabled due to rate limit.")}}},{key:"destroy",value:function(){this.eventQueue.destroy(!1)}},{key:"_deduplicateBeaconData",value:function(e,t){var n=this,r={},i=t.view_id;if("-1"===i||"viewstart"===e||"viewend"===e||!this.previousBeaconData||this.mux.utils.now()-this.lastEventTime>=6e5)r=uJ({},t),i&&(this.previousBeaconData=r),i&&"viewend"===e&&(this.previousBeaconData=null);else{var a=0===e.indexOf("request");Object.entries(t).forEach((function(t){var i=RZ(t,2),o=i[0],s=i[1];n.previousBeaconData&&(s!==n.previousBeaconData[o]||v0.indexOf(o)>-1||n.objectHasChanged(a,o,s,n.previousBeaconData[o])||n.eventRequiresKey(e,o))&&(r[o]=s,n.previousBeaconData[o]=s)}))}return r}},{key:"objectHasChanged",value:function(e,t,n,r){return!(!e||0!==t.indexOf("request_"))&&("request_response_headers"===t||"object"!=typeof n||"object"!=typeof r||Object.keys(n||{}).length!==Object.keys(r||{}).length)}},{key:"eventRequiresKey",value:function(e,t){return!!("renditionchange"===e&&0===t.indexOf("video_source_")||b0.includes(t)&&y0.includes(e))}}]),e}(),x0=function e(t){QZ(this,e);var n=0,r=0,i=0,a=0,o=0,s=0,l=0;t.on("requestcompleted",(function(e,s){var l,c,u=s.request_start,d=s.request_response_start,h=s.request_response_end,p=s.request_bytes_loaded;if(a++,d?(l=d-(null!=u?u:0),c=(null!=h?h:0)-d):c=(null!=h?h:0)-(null!=u?u:0),c>0&&p&&p>0){var f=p/c*8e3;o++,r+=p,i+=c,t.data.view_min_request_throughput=Math.min(t.data.view_min_request_throughput||1/0,f),t.data.view_average_request_throughput=r/i*8e3,t.data.view_request_count=a,l>0&&(n+=l,t.data.view_max_request_latency=Math.max(t.data.view_max_request_latency||0,l),t.data.view_average_request_latency=n/o)}})),t.on("requestfailed",(function(e,n){a++,s++,t.data.view_request_count=a,t.data.view_request_failed_count=s})),t.on("requestcanceled",(function(e,n){a++,l++,t.data.view_request_count=a,t.data.view_request_canceled_count=l}))},_0=function e(t){var n=this;QZ(this,e),JZ(this,"_lastEventTime",void 0),t.on("before*",(function(e,r){var i=r.viewer_time,a=NZ.now(),o=n._lastEventTime;if(n._lastEventTime=a,o&&a-o>36e5){var s=Object.keys(t.data).reduce((function(e,n){return 0===n.indexOf("video_")?Object.assign(e,JZ({},n,t.data[n])):e}),{});t.mux.log.info("Received event after at least an hour inactivity, creating a new view");var l=t.playbackHeartbeat._playheadShouldBeProgressing;t._resetView(Object.assign({viewer_time:i},s)),t.playbackHeartbeat._playheadShouldBeProgressing=l,t.playbackHeartbeat._playheadShouldBeProgressing&&"play"!==e.type&&"adbreakstart"!==e.type&&(t.emit("play",{viewer_time:i}),"playing"!==e.type&&t.emit("playing",{viewer_time:i}))}}))},A0=["viewstart","ended","loadstart","pause","play","playing","ratechange","waiting","adplay","adpause","adended","aderror","adplaying","adrequest","adresponse","adbreakstart","adbreakend","adfirstquartile","admidpoint","adthirdquartile","rebufferstart","rebufferend","seeked","error","hb","requestcompleted","requestfailed","requestcanceled","renditionchange"],T0=new Set(["requestcompleted","requestfailed","requestcanceled"]),S0=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nJ(e,t)}(n,e);var t=rJ(n);function n(e,r,i){var a;QZ(this,n),JZ(YZ(a=t.call(this)),"DOM_CONTENT_LOADED_EVENT_END",void 0),JZ(YZ(a),"NAVIGATION_START",void 0),JZ(YZ(a),"_destroyed",void 0),JZ(YZ(a),"_heartBeatTimeout",void 0),JZ(YZ(a),"adTracker",void 0),JZ(YZ(a),"dashjs",void 0),JZ(YZ(a),"data",void 0),JZ(YZ(a),"disablePlayheadRebufferTracking",void 0),JZ(YZ(a),"disableRebufferTracking",void 0),JZ(YZ(a),"errorTracker",void 0),JZ(YZ(a),"errorTranslator",void 0),JZ(YZ(a),"emitTranslator",void 0),JZ(YZ(a),"getAdData",void 0),JZ(YZ(a),"getPlayheadTime",void 0),JZ(YZ(a),"getStateData",void 0),JZ(YZ(a),"stateDataTranslator",void 0),JZ(YZ(a),"hlsjs",void 0),JZ(YZ(a),"id",void 0),JZ(YZ(a),"longResumeTracker",void 0),JZ(YZ(a),"minimumRebufferDuration",void 0),JZ(YZ(a),"mux",void 0),JZ(YZ(a),"playbackEventDispatcher",void 0),JZ(YZ(a),"playbackHeartbeat",void 0),JZ(YZ(a),"playbackHeartbeatTime",void 0),JZ(YZ(a),"playheadTime",void 0),JZ(YZ(a),"seekingTracker",void 0),JZ(YZ(a),"sustainedRebufferThreshold",void 0),JZ(YZ(a),"watchTimeTracker",void 0),JZ(YZ(a),"currentFragmentPDT",void 0),JZ(YZ(a),"currentFragmentStart",void 0),a.DOM_CONTENT_LOADED_EVENT_END=lJ.domContentLoadedEventEnd(),a.NAVIGATION_START=lJ.navigationStart();var o={debug:!1,minimumRebufferDuration:250,sustainedRebufferThreshold:1e3,playbackHeartbeatTime:25,beaconDomain:"litix.io",sampleRate:1,disableCookies:!1,respectDoNotTrack:!1,disableRebufferTracking:!1,disablePlayheadRebufferTracking:!1,errorTranslator:function(e){return e},emitTranslator:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t},stateDataTranslator:function(e){return e}};a.mux=e,a.id=r,null!=i&&i.beaconDomain&&a.mux.log.warn("The `beaconDomain` setting has been deprecated in favor of `beaconCollectionDomain`. Please change your integration to use `beaconCollectionDomain` instead of `beaconDomain`."),(i=Object.assign(o,i)).data=i.data||{},i.data.property_key&&(i.data.env_key=i.data.property_key,delete i.data.property_key),qZ.level=i.debug?VZ:zZ,a.getPlayheadTime=i.getPlayheadTime,a.getStateData=i.getStateData||function(){return{}},a.getAdData=i.getAdData||function(){},a.minimumRebufferDuration=i.minimumRebufferDuration,a.sustainedRebufferThreshold=i.sustainedRebufferThreshold,a.playbackHeartbeatTime=i.playbackHeartbeatTime,a.disableRebufferTracking=i.disableRebufferTracking,a.disableRebufferTracking&&a.mux.log.warn("Disabling rebuffer tracking. This should only be used in specific circumstances as a last resort when your player is known to unreliably track rebuffering."),a.disablePlayheadRebufferTracking=i.disablePlayheadRebufferTracking,a.errorTranslator=i.errorTranslator,a.emitTranslator=i.emitTranslator,a.stateDataTranslator=i.stateDataTranslator,a.playbackEventDispatcher=new E0(e,i.data.env_key,i),a.data={player_instance_id:OZ(),mux_sample_rate:i.sampleRate,beacon_domain:i.beaconCollectionDomain||i.beaconDomain},a.data.view_sequence_number=1,a.data.player_sequence_number=1;var s=function(){"undefined"==typeof this.data.view_start&&(this.data.view_start=this.mux.utils.now(),this.emit("viewstart"))}.bind(YZ(a));if(a.on("viewinit",(function(e,t){this._resetVideoData(),this._resetViewData(),this._resetErrorData(),this._updateStateData(),Object.assign(this.data,t),this._initializeViewData(),this.one("play",s),this.one("adbreakstart",s)})),a.on("videochange",(function(e,t){this._resetView(t)})),a.on("programchange",(function(e,t){this.data.player_is_paused&&this.mux.log.warn("The `programchange` event is intended to be used when the content changes mid playback without the video source changing, however the video is not currently playing. If the video source is changing please use the videochange event otherwise you will lose startup time information."),this._resetView(Object.assign(t,{view_program_changed:!0})),s(),this.emit("play"),this.emit("playing")})),a.on("fragmentchange",(function(e,t){this.currentFragmentPDT=t.currentFragmentPDT,this.currentFragmentStart=t.currentFragmentStart})),a.on("destroy",a.destroy),"undefined"!=typeof window&&"function"==typeof window.addEventListener&&"function"==typeof window.removeEventListener){var l=function(){var e="undefined"!=typeof a.data.view_start;a.mux.WINDOW_HIDDEN="hidden"===document.visibilityState,e&&a.mux.WINDOW_HIDDEN&&(a.data.player_is_paused||a.emit("hb"))};window.addEventListener("visibilitychange",l,!1);var c=function(e){e.persisted||a.destroy()};window.addEventListener("pagehide",c,!1),a.on("destroy",(function(){window.removeEventListener("visibilitychange",l),window.removeEventListener("pagehide",c)}))}a.on("playerready",(function(e,t){Object.assign(this.data,t)})),A0.forEach((function(e){a.on(e,(function(t,n){0!==e.indexOf("ad")&&this._updateStateData(),Object.assign(this.data,n),this._sanitizeData()})),a.on("after"+e,(function(){("error"!==e||this.errorTracker.viewErrored)&&this.send(e)}))})),a.on("viewend",(function(e,t){Object.assign(a.data,t)}));return a.one("playerready",(function(e){var t=this.mux.utils.now();this.data.player_init_time&&(this.data.player_startup_time=t-this.data.player_init_time),!this.mux.PLAYER_TRACKED&&this.NAVIGATION_START&&(this.mux.PLAYER_TRACKED=!0,(this.data.player_init_time||this.DOM_CONTENT_LOADED_EVENT_END)&&(this.data.page_load_time=Math.min(this.data.player_init_time||1/0,this.DOM_CONTENT_LOADED_EVENT_END||1/0)-this.NAVIGATION_START)),this.send("playerready"),delete this.data.player_startup_time,delete this.data.page_load_time})),a.longResumeTracker=new _0(YZ(a)),a.errorTracker=new CJ(YZ(a)),new YJ(YZ(a)),a.seekingTracker=new VJ(YZ(a)),a.playheadTime=new MJ(YZ(a)),a.playbackHeartbeat=new kJ(YZ(a)),new $J(YZ(a)),a.watchTimeTracker=new RJ(YZ(a)),new LJ(YZ(a)),a.adTracker=new qJ(YZ(a)),new FJ(YZ(a)),new OJ(YZ(a)),new BJ(YZ(a)),new KJ(YZ(a)),new x0(YZ(a)),i.hlsjs&&a.addHLSJS(i),i.dashjs&&a.addDashJS(i),a.emit("viewinit",i.data),a}return ZZ(n,[{key:"emit",value:function(e,t){var r,i=Object.assign({viewer_time:this.mux.utils.now()},t),a=[e,i];if(this.emitTranslator)try{a=this.emitTranslator(e,i)}catch(o){this.mux.log.warn("Exception in emit translator callback.",o)}null!=a&&a.length&&(r=tJ(eJ(n.prototype),"emit",this)).call.apply(r,[this].concat(BZ(a)))}},{key:"destroy",value:function(){this._destroyed||(this._destroyed=!0,"undefined"!=typeof this.data.view_start&&(this.emit("viewend"),this.send("viewend")),this.playbackEventDispatcher.destroy(),this.removeHLSJS(),this.removeDashJS(),window.clearTimeout(this._heartBeatTimeout))}},{key:"send",value:function(e){if(this.data.view_id){var t=Object.assign({},this.data);if(void 0===t.video_source_is_live&&(t.player_source_duration===1/0||t.video_source_duration===1/0?t.video_source_is_live=!0:(t.player_source_duration>0||t.video_source_duration>0)&&(t.video_source_is_live=!1)),t.video_source_is_live||["player_program_time","player_manifest_newest_program_time","player_live_edge_program_time","player_program_time","video_holdback","video_part_holdback","video_target_duration","video_part_target_duration"].forEach((function(e){t[e]=void 0})),t.video_source_url=t.video_source_url||t.player_source_url,t.video_source_url){var n=RZ(aJ(t.video_source_url),2),r=n[0],i=n[1];t.video_source_domain=i,t.video_source_hostname=r}delete t.ad_request_id,this.playbackEventDispatcher.send(e,t),this.data.view_sequence_number++,this.data.player_sequence_number++,T0.has(e)||this._restartHeartBeat(),"viewend"===e&&delete this.data.view_id}}},{key:"_resetView",value:function(e){this.emit("viewend"),this.send("viewend"),this.emit("viewinit",e)}},{key:"_updateStateData",value:function(){var e=this.getStateData();if("function"==typeof this.stateDataTranslator)try{e=this.stateDataTranslator(e)}catch(eA){this.mux.log.warn("Exception in stateDataTranslator translator callback.",eA)}Object.assign(this.data,e),this.playheadTime._updatePlayheadTime(),this._sanitizeData()}},{key:"_sanitizeData",value:function(){var e=this;["player_width","player_height","video_source_width","video_source_height","player_playhead_time","video_source_bitrate"].forEach((function(t){var n=parseInt(e.data[t],10);e.data[t]=isNaN(n)?void 0:n}));["player_source_url","video_source_url"].forEach((function(t){if(e.data[t]){var n=e.data[t].toLowerCase();(0===n.indexOf("data:")||0===n.indexOf("blob:"))&&(e.data[t]="MSE style URL")}}))}},{key:"_resetVideoData",value:function(){var e=this;Object.keys(this.data).forEach((function(t){0===t.indexOf("video_")&&delete e.data[t]}))}},{key:"_resetViewData",value:function(){var e=this;Object.keys(this.data).forEach((function(t){0===t.indexOf("view_")&&delete e.data[t]})),this.data.view_sequence_number=1}},{key:"_resetErrorData",value:function(){delete this.data.player_error_code,delete this.data.player_error_message,delete this.data.player_error_context,delete this.data.player_error_severity,delete this.data.player_error_business_exception}},{key:"_initializeViewData",value:function(){var e=this,t=this.data.view_id=OZ(),n=function(){t===e.data.view_id&&cJ(e.data,"player_view_count",1)};this.data.player_is_paused?this.one("play",n):n()}},{key:"_restartHeartBeat",value:function(){var e=this;window.clearTimeout(this._heartBeatTimeout),this._heartBeatTimeout=window.setTimeout((function(){e.data.player_is_paused||e.emit("hb")}),1e4)}},{key:"addHLSJS",value:function(e){e.hlsjs?this.hlsjs?this.mux.log.warn("An instance of HLS.js is already being monitored for this player."):(this.hlsjs=e.hlsjs,function(e,t,n){var r=arguments.length>4?arguments[4]:void 0,i=e.log,a=e.utils.secondsToMs,o=function(e){var t,n=parseInt(r.version);return 1===n&&null!==e.programDateTime&&(t=e.programDateTime),0===n&&null!==e.pdt&&(t=e.pdt),t};if(lJ.exists()){var s=function(n,r){return e.emit(t,n,r)},l=function(e,t){var n=t.levels,r=t.audioTracks,i=t.url,a=t.stats,o=t.networkDetails,l=t.sessionData,c={},u={};n.forEach((function(e,t){c[t]={width:e.width,height:e.height,bitrate:e.bitrate,attrs:e.attrs}})),r.forEach((function(e,t){u[t]={name:e.name,language:e.lang,bitrate:e.bitrate}}));var d=vJ(a),h=d.bytesLoaded,p=d.requestStart,f=d.responseStart,m=d.responseEnd;s("requestcompleted",dJ(uJ({},gJ(l)),{request_event_type:e,request_bytes_loaded:h,request_start:p,request_response_start:f,request_response_end:m,request_type:"manifest",request_hostname:iJ(i),request_response_headers:yJ(o),request_rendition_lists:{media:c,audio:u,video:{}}}))};n.on(r.Events.MANIFEST_LOADED,l);var c=function(e,t){var n=t.details,r=t.level,i=t.networkDetails,l=t.stats,c=vJ(l),u=c.bytesLoaded,d=c.requestStart,h=c.responseStart,p=c.responseEnd,f=n.fragments[n.fragments.length-1],m=o(f)+a(f.duration);s("requestcompleted",{request_event_type:e,request_bytes_loaded:u,request_start:d,request_response_start:h,request_response_end:p,request_current_level:r,request_type:"manifest",request_hostname:iJ(n.url),request_response_headers:yJ(i),video_holdback:n.holdBack&&a(n.holdBack),video_part_holdback:n.partHoldBack&&a(n.partHoldBack),video_part_target_duration:n.partTarget&&a(n.partTarget),video_target_duration:n.targetduration&&a(n.targetduration),video_source_is_live:n.live,player_manifest_newest_program_time:isNaN(m)?void 0:m})};n.on(r.Events.LEVEL_LOADED,c);var u=function(e,t){var n=t.details,r=t.networkDetails,i=t.stats,a=vJ(i),o=a.bytesLoaded,l=a.requestStart,c=a.responseStart,u=a.responseEnd;s("requestcompleted",{request_event_type:e,request_bytes_loaded:o,request_start:l,request_response_start:c,request_response_end:u,request_type:"manifest",request_hostname:iJ(n.url),request_response_headers:yJ(r)})};n.on(r.Events.AUDIO_TRACK_LOADED,u);var d=function(e,t){var r=t.stats,i=t.networkDetails,a=t.frag;r=r||a.stats;var o=vJ(r),l=o.bytesLoaded,c=o.requestStart,u=o.responseStart,d=o.responseEnd,h=i?yJ(i):void 0,p={request_event_type:e,request_bytes_loaded:l,request_start:c,request_response_start:u,request_response_end:d,request_hostname:i?iJ(i.responseURL):void 0,request_id:h?mJ(h):void 0,request_response_headers:h,request_media_duration:a.duration,request_url:null==i?void 0:i.responseURL};"main"===a.type?(p.request_type="media",p.request_current_level=a.level,p.request_video_width=(n.levels[a.level]||{}).width,p.request_video_height=(n.levels[a.level]||{}).height,p.request_labeled_bitrate=(n.levels[a.level]||{}).bitrate):p.request_type=a.type,s("requestcompleted",p)};n.on(r.Events.FRAG_LOADED,d);var h=function(e,t){var n=t.frag,r=n.start,i={currentFragmentPDT:o(n),currentFragmentStart:a(r)};s("fragmentchange",i)};n.on(r.Events.FRAG_CHANGED,h);var p=function(e,t){var n=t.type,i=t.details,a=t.response,o=t.fatal,l=t.frag,c=t.networkDetails,u=(null==l?void 0:l.url)||t.url||"",d=c?yJ(c):void 0;if((i===r.ErrorDetails.MANIFEST_LOAD_ERROR||i===r.ErrorDetails.MANIFEST_LOAD_TIMEOUT||i===r.ErrorDetails.FRAG_LOAD_ERROR||i===r.ErrorDetails.FRAG_LOAD_TIMEOUT||i===r.ErrorDetails.LEVEL_LOAD_ERROR||i===r.ErrorDetails.LEVEL_LOAD_TIMEOUT||i===r.ErrorDetails.AUDIO_TRACK_LOAD_ERROR||i===r.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT||i===r.ErrorDetails.SUBTITLE_LOAD_ERROR||i===r.ErrorDetails.SUBTITLE_LOAD_TIMEOUT||i===r.ErrorDetails.KEY_LOAD_ERROR||i===r.ErrorDetails.KEY_LOAD_TIMEOUT)&&s("requestfailed",{request_error:i,request_url:u,request_hostname:iJ(u),request_id:d?mJ(d):void 0,request_type:i===r.ErrorDetails.FRAG_LOAD_ERROR||i===r.ErrorDetails.FRAG_LOAD_TIMEOUT?"media":i===r.ErrorDetails.AUDIO_TRACK_LOAD_ERROR||i===r.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT?"audio":i===r.ErrorDetails.SUBTITLE_LOAD_ERROR||i===r.ErrorDetails.SUBTITLE_LOAD_TIMEOUT?"subtitle":i===r.ErrorDetails.KEY_LOAD_ERROR||i===r.ErrorDetails.KEY_LOAD_TIMEOUT?"encryption":"manifest",request_error_code:null==a?void 0:a.code,request_error_text:null==a?void 0:a.text}),o){var h,p="".concat(u?"url: ".concat(u,"\n"):"")+"".concat(a&&(a.code||a.text)?"response: ".concat(a.code,", ").concat(a.text,"\n"):"")+"".concat(t.reason?"failure reason: ".concat(t.reason,"\n"):"")+"".concat(t.level?"level: ".concat(t.level,"\n"):"")+"".concat(t.parent?"parent stream controller: ".concat(t.parent,"\n"):"")+"".concat(t.buffer?"buffer length: ".concat(t.buffer,"\n"):"")+"".concat(t.error?"error: ".concat(t.error,"\n"):"")+"".concat(t.event?"event: ".concat(t.event,"\n"):"")+"".concat(t.err?"error message: ".concat(null===(h=t.err)||void 0===h?void 0:h.message,"\n"):"");s("error",{player_error_code:n,player_error_message:i,player_error_context:p})}};n.on(r.Events.ERROR,p);var f=function(e,t){var n=t.frag,r=n&&n._url||"";s("requestcanceled",{request_event_type:e,request_url:r,request_type:"media",request_hostname:iJ(r)})};n.on(r.Events.FRAG_LOAD_EMERGENCY_ABORTED,f);var m=function(e,t){var r=t.level,a=n.levels[r];if(a&&a.attrs&&a.attrs.BANDWIDTH){var o,l=a.attrs.BANDWIDTH,c=parseFloat(a.attrs["FRAME-RATE"]);isNaN(c)||(o=c),l?s("renditionchange",{video_source_fps:o,video_source_bitrate:l,video_source_width:a.width,video_source_height:a.height,video_source_rendition_name:a.name,video_source_codec:null==a?void 0:a.videoCodec}):i.warn("missing BANDWIDTH from HLS manifest parsed by HLS.js")}};n.on(r.Events.LEVEL_SWITCHED,m),n._stopMuxMonitor=function(){n.off(r.Events.MANIFEST_LOADED,l),n.off(r.Events.LEVEL_LOADED,c),n.off(r.Events.AUDIO_TRACK_LOADED,u),n.off(r.Events.FRAG_LOADED,d),n.off(r.Events.FRAG_CHANGED,h),n.off(r.Events.ERROR,p),n.off(r.Events.FRAG_LOAD_EMERGENCY_ABORTED,f),n.off(r.Events.LEVEL_SWITCHED,m),n.off(r.Events.DESTROYING,n._stopMuxMonitor),delete n._stopMuxMonitor},n.on(r.Events.DESTROYING,n._stopMuxMonitor)}else i.warn("performance timing not supported. Not tracking HLS.js.")}(this.mux,this.id,e.hlsjs,{},e.Hls||window.Hls)):this.mux.log.warn("You must pass a valid hlsjs instance in order to track it.")}},{key:"removeHLSJS",value:function(){this.hlsjs&&(function(e){e&&"function"==typeof e._stopMuxMonitor&&e._stopMuxMonitor()}(this.hlsjs),this.hlsjs=void 0)}},{key:"addDashJS",value:function(e){e.dashjs?this.dashjs?this.mux.log.warn("An instance of Dash.js is already being monitored for this player."):(this.dashjs=e.dashjs,EJ(this.mux,this.id,e.dashjs)):this.mux.log.warn("You must pass a valid dashjs instance in order to track it.")}},{key:"removeDashJS",value:function(){this.dashjs&&(function(e){e&&"function"==typeof e._stopMuxMonitor&&e._stopMuxMonitor()}(this.dashjs),this.dashjs=void 0)}}]),n}(AJ),k0=S0,C0=cZ(kZ());var I0=["loadstart","pause","play","playing","seeking","seeked","timeupdate","ratechange","stalled","waiting","error","ended"],R0={1:"MEDIA_ERR_ABORTED",2:"MEDIA_ERR_NETWORK",3:"MEDIA_ERR_DECODE",4:"MEDIA_ERR_SRC_NOT_SUPPORTED"};var D0,L0=cZ(uZ());L0.default&&L0.default.WeakMap&&(D0=new WeakMap);var P0="#EXT-X-TARGETDURATION",M0="#EXT-X-PART-INF",N0="#EXT-X-SERVER-CONTROL",O0="#EXTINF",j0="#EXT-X-PROGRAM-DATE-TIME",F0="#EXT-X-VERSION",U0="#EXT-X-SESSION-DATA",B0=function(e){return this.buffer="",this.manifest={segments:[],serverControl:{},sessionData:{}},this.currentUri={},this.process(e),this.manifest};B0.prototype.process=function(e){var t;for(this.buffer+=e,t=this.buffer.indexOf("\n");t>-1;t=this.buffer.indexOf("\n"))this.processLine(this.buffer.substring(0,t)),this.buffer=this.buffer.substring(t+1)},B0.prototype.processLine=function(e){var t=e.indexOf(":"),n=G0(e,t),r=n[0],i=2===n.length?W0(n[1]):void 0;if("#"!==r[0])this.currentUri.uri=r,this.manifest.segments.push(this.currentUri),this.manifest.targetDuration&&!("duration"in this.currentUri)&&(this.currentUri.duration=this.manifest.targetDuration),this.currentUri={};else switch(r){case P0:if(!isFinite(i)||i<0)return;this.manifest.targetDuration=i,this.setHoldBack();break;case M0:$0(this.manifest,n),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),this.setHoldBack();break;case N0:$0(this.manifest,n),this.setHoldBack();break;case O0:0===i?this.currentUri.duration=.01:i>0&&(this.currentUri.duration=i);break;case j0:var a=i,o=new Date(a);this.manifest.dateTimeString||(this.manifest.dateTimeString=a,this.manifest.dateTimeObject=o),this.currentUri.dateTimeString=a,this.currentUri.dateTimeObject=o;break;case F0:$0(this.manifest,n);break;case U0:var s=K0(n[1]),l=gJ(s);Object.assign(this.manifest.sessionData,l)}},B0.prototype.setHoldBack=function(){var e=this.manifest,t=e.serverControl,n=e.targetDuration,r=e.partTargetDuration;if(t){var i="holdBack",a="partHoldBack",o=n&&3*n,s=r&&2*r;n&&!t.hasOwnProperty(i)&&(t[i]=o),o&&t[i]<o&&(t[i]=o),r&&!t.hasOwnProperty(a)&&(t[a]=3*r),r&&t[a]<s&&(t[a]=s)}};var $0=function(e,t){var n,r=V0(t[0].replace("#EXT-X-",""));q0(t[1])?(n={},n=Object.assign(H0(t[1]),n)):n=W0(t[1]),e[r]=n},V0=function(e){return e.toLowerCase().replace(/-(\w)/g,(function(e){return e[1].toUpperCase()}))},W0=function(e){if("yes"===e.toLowerCase()||"no"===e.toLowerCase())return"yes"===e.toLowerCase();var t=-1!==e.indexOf(":")?e:parseFloat(e);return isNaN(t)?e:t},z0=function(e){var t={},n=e.split("=");n.length>1&&(t[V0(n[0])]=W0(n[1]));return t},H0=function(e){for(var t=e.split(","),n={},r=0;t.length>r;r++){var i=t[r],a=z0(i);n=Object.assign(a,n)}return n},q0=function(e){return e.indexOf("=")>-1},G0=function(e,t){return-1===t?[e]:[e.substring(0,t),e.substring(t+1)]},K0=function(e){var t={};if(e){var n=e.search(",");return[e.slice(0,n),e.slice(n+1)].forEach((function(e,n){for(var r=e.replace(/['"]+/g,"").split("="),i=0;i<r.length;i++)"DATA-ID"===r[i]&&(t["DATA-ID"]=r[1-i]),"VALUE"===r[i]&&(t.VALUE=r[1-i])})),{data:t}}},Y0=B0,Q0={safeCall:function(e,t,n,r){var i=r;if(e&&"function"==typeof e[t])try{i=e[t].apply(e,n)}catch(eA){qZ.info("safeCall error",eA)}return i},safeIncrement:cJ,getComputedStyle:function(e,t){return e&&t&&L0.default&&"function"==typeof L0.default.getComputedStyle?(D0&&D0.has(e)&&(n=D0.get(e)),n||(n=L0.default.getComputedStyle(e,null),D0&&D0.set(e,n)),n.getPropertyValue(t)):"";var n},secondsToMs:function(e){return Math.floor(1e3*e)},assign:Object.assign,headersStringToObject:fJ,cdnHeadersToRequestId:mJ,extractHostnameAndDomain:aJ,extractHostname:iJ,manifestParser:Y0,generateShortID:jZ,generateUUID:OZ,now:NZ.now,findMediaElement:UZ},X0=Q0,Z0={PLAYER_READY:"playerready",VIEW_INIT:"viewinit",VIDEO_CHANGE:"videochange",PLAY:"play",PAUSE:"pause",PLAYING:"playing",TIME_UPDATE:"timeupdate",SEEKING:"seeking",SEEKED:"seeked",REBUFFER_START:"rebufferstart",REBUFFER_END:"rebufferend",ERROR:"error",ENDED:"ended",RENDITION_CHANGE:"renditionchange",ORIENTATION_CHANGE:"orientationchange",AD_REQUEST:"adrequest",AD_RESPONSE:"adresponse",AD_BREAK_START:"adbreakstart",AD_PLAY:"adplay",AD_PLAYING:"adplaying",AD_PAUSE:"adpause",AD_FIRST_QUARTILE:"adfirstquartile",AD_MID_POINT:"admidpoint",AD_THIRD_QUARTILE:"adthirdquartile",AD_ENDED:"adended",AD_BREAK_END:"adbreakend",AD_ERROR:"aderror",REQUEST_COMPLETED:"requestcompleted",REQUEST_FAILED:"requestfailed",REQUEST_CANCELLED:"requestcanceled",HEARTBEAT:"hb",DESTROY:"destroy"},J0={},e1=function(e){var t=arguments;"string"==typeof e?e1.hasOwnProperty(e)?DZ.default.setTimeout((function(){t=Array.prototype.splice.call(t,1),e1[e].apply(null,t)}),0):qZ.warn("`"+e+"` is an unknown task"):"function"==typeof e?DZ.default.setTimeout((function(){e(e1)}),0):qZ.warn("`"+e+"` is invalid.")},t1={loaded:NZ.now(),NAME:"mux-embed",VERSION:"5.9.0",API_VERSION:"2.1",PLAYER_TRACKED:!1,monitor:function(e,t){return function(e,t,n){var r=RZ(UZ(t),3),i=r[0],a=r[1],o=r[2],s=e.log,l=e.utils.getComputedStyle,c=e.utils.secondsToMs;if(!i)return s.error("No element was found with the `"+a+"` query selector.");if("video"!==o&&"audio"!==o)return s.error("The element of `"+a+"` was not a media element.");i.mux&&(i.mux.destroy(),delete i.mux,s.warn("Already monitoring this video element, replacing existing event listeners"));var u={getPlayheadTime:function(){return c(i.currentTime)},getStateData:function(){var e,t,n=(null===(e=this.getPlayheadTime)||void 0===e?void 0:e.call(this))||c(i.currentTime),r=this.hlsjs&&this.hlsjs.url,a=this.dashjs&&"function"==typeof this.dashjs.getSource&&this.dashjs.getSource(),o={player_is_paused:i.paused,player_width:parseInt(l(i,"width")),player_height:parseInt(l(i,"height")),player_autoplay_on:i.autoplay,player_preload_on:i.preload,player_language_code:i.lang,player_is_fullscreen:C0.default&&!!(C0.default.fullscreenElement||C0.default.webkitFullscreenElement||C0.default.mozFullScreenElement||C0.default.msFullscreenElement),video_poster_url:i.poster,video_source_url:r||a||i.currentSrc,video_source_duration:c(i.duration),video_source_height:i.videoHeight,video_source_width:i.videoWidth,view_dropped_frame_count:null==i||null===(t=i.getVideoPlaybackQuality)||void 0===t?void 0:t.call(i).droppedVideoFrames};if(i.getStartDate&&n>0){var s=i.getStartDate();if(s&&"function"==typeof s.getTime&&s.getTime()){var u=s.getTime();if(o.player_program_time=u+n,i.seekable.length>0){var d=u+i.seekable.end(i.seekable.length-1);o.player_live_edge_program_time=d}}}return o}};(n=Object.assign({automaticErrorTracking:!0},n,u)).data=Object.assign({player_software:"HTML5 Video Element",player_mux_plugin_name:"VideoElementMonitor",player_mux_plugin_version:e.VERSION},n.data),i.mux=i.mux||{},i.mux.deleted=!1,i.mux.emit=function(t,n){e.emit(a,t,n)},i.mux.updateData=function(e){i.mux.emit("hb",e)};var d=function(){s.error("The monitor for this video element has already been destroyed.")};i.mux.destroy=function(){Object.keys(i.mux.listeners).forEach((function(e){i.removeEventListener(e,i.mux.listeners[e],!1)})),delete i.mux.listeners,i.mux.destroy=d,i.mux.swapElement=d,i.mux.emit=d,i.mux.addHLSJS=d,i.mux.addDashJS=d,i.mux.removeHLSJS=d,i.mux.removeDashJS=d,i.mux.updateData=d,i.mux.setEmitTranslator=d,i.mux.setStateDataTranslator=d,i.mux.setGetPlayheadTime=d,i.mux.deleted=!0,e.emit(a,"destroy")},i.mux.swapElement=function(t){var n=RZ(UZ(t),3),r=n[0],a=n[1],o=n[2];return r?"video"!==o&&"audio"!==o?e.log.error("The element of `"+a+"` was not a media element."):(r.muxId=i.muxId,delete i.muxId,r.mux=r.mux||{},r.mux.listeners=Object.assign({},i.mux.listeners),delete i.mux.listeners,Object.keys(r.mux.listeners).forEach((function(e){i.removeEventListener(e,r.mux.listeners[e],!1),r.addEventListener(e,r.mux.listeners[e],!1)})),r.mux.swapElement=i.mux.swapElement,r.mux.destroy=i.mux.destroy,delete i.mux,void(i=r)):e.log.error("No element was found with the `"+a+"` query selector.")},i.mux.addHLSJS=function(t){e.addHLSJS(a,t)},i.mux.addDashJS=function(t){e.addDashJS(a,t)},i.mux.removeHLSJS=function(){e.removeHLSJS(a)},i.mux.removeDashJS=function(){e.removeDashJS(a)},i.mux.setEmitTranslator=function(t){e.setEmitTranslator(a,t)},i.mux.setStateDataTranslator=function(t){e.setStateDataTranslator(a,t)},i.mux.setGetPlayheadTime=function(t){t||(t=n.getPlayheadTime),e.setGetPlayheadTime(a,t)},e.init(a,n),e.emit(a,"playerready"),i.paused||(e.emit(a,"play"),i.readyState>2&&e.emit(a,"playing")),i.mux.listeners={},I0.forEach((function(t){"error"===t&&!n.automaticErrorTracking||(i.mux.listeners[t]=function(){var n={};if("error"===t){if(!i.error||1===i.error.code)return;n.player_error_code=i.error.code,n.player_error_message=R0[i.error.code]||i.error.message}e.emit(a,t,n)},i.addEventListener(t,i.mux.listeners[t],!1))}))}(e1,e,t)},destroyMonitor:function(e){var t=RZ(UZ(e),1)[0];t&&t.mux&&"function"==typeof t.mux.destroy?t.mux.destroy():qZ.error("A video element monitor for `"+e+"` has not been initialized via `mux.monitor`.")},addHLSJS:function(e,t){var n=FZ(e);J0[n]?J0[n].addHLSJS(t):qZ.error("A monitor for `"+n+"` has not been initialized.")},addDashJS:function(e,t){var n=FZ(e);J0[n]?J0[n].addDashJS(t):qZ.error("A monitor for `"+n+"` has not been initialized.")},removeHLSJS:function(e){var t=FZ(e);J0[t]?J0[t].removeHLSJS():qZ.error("A monitor for `"+t+"` has not been initialized.")},removeDashJS:function(e){var t=FZ(e);J0[t]?J0[t].removeDashJS():qZ.error("A monitor for `"+t+"` has not been initialized.")},init:function(e,t){KZ()&&t&&t.respectDoNotTrack&&qZ.info("The browser's Do Not Track flag is enabled - Mux beaconing is disabled.");var n=FZ(e);J0[n]=new k0(e1,n,t)},emit:function(e,t,n){var r=FZ(e);J0[r]?(J0[r].emit(t,n),"destroy"===t&&delete J0[r]):qZ.error("A monitor for `"+r+"` has not been initialized.")},updateData:function(e,t){var n=FZ(e);J0[n]?J0[n].emit("hb",t):qZ.error("A monitor for `"+n+"` has not been initialized.")},setEmitTranslator:function(e,t){var n=FZ(e);J0[n]?J0[n].emitTranslator=t:qZ.error("A monitor for `"+n+"` has not been initialized.")},setStateDataTranslator:function(e,t){var n=FZ(e);J0[n]?J0[n].stateDataTranslator=t:qZ.error("A monitor for `"+n+"` has not been initialized.")},setGetPlayheadTime:function(e,t){var n=FZ(e);J0[n]?J0[n].getPlayheadTime=t:qZ.error("A monitor for `"+n+"` has not been initialized.")},checkDoNotTrack:KZ,log:qZ,utils:X0,events:Z0,WINDOW_HIDDEN:!1,WINDOW_UNLOADING:!1};Object.assign(e1,t1),"undefined"!=typeof DZ.default&&"function"==typeof DZ.default.addEventListener&&DZ.default.addEventListener("pagehide",(function(e){e.persisted||(e1.WINDOW_UNLOADING=!0)}),!1);var n1=e1;function r1(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var i1,a1={exports:{}};i1=a1,function(){var e=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,t=/^(?=([^\/?#]*))\1([^]*)$/,n=/(?:\/|^)\.(?=\/)/g,r=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,i={buildAbsoluteURL:function(e,n,r){if(r=r||{},e=e.trim(),!(n=n.trim())){if(!r.alwaysNormalize)return e;var a=i.parseURL(e);if(!a)throw new Error("Error trying to parse base URL.");return a.path=i.normalizePath(a.path),i.buildURLFromParts(a)}var o=i.parseURL(n);if(!o)throw new Error("Error trying to parse relative URL.");if(o.scheme)return r.alwaysNormalize?(o.path=i.normalizePath(o.path),i.buildURLFromParts(o)):n;var s=i.parseURL(e);if(!s)throw new Error("Error trying to parse base URL.");if(!s.netLoc&&s.path&&"/"!==s.path[0]){var l=t.exec(s.path);s.netLoc=l[1],s.path=l[2]}s.netLoc&&!s.path&&(s.path="/");var c={scheme:s.scheme,netLoc:o.netLoc,path:null,params:o.params,query:o.query,fragment:o.fragment};if(!o.netLoc&&(c.netLoc=s.netLoc,"/"!==o.path[0]))if(o.path){var u=s.path,d=u.substring(0,u.lastIndexOf("/")+1)+o.path;c.path=i.normalizePath(d)}else c.path=s.path,o.params||(c.params=s.params,o.query||(c.query=s.query));return null===c.path&&(c.path=r.alwaysNormalize?i.normalizePath(o.path):o.path),i.buildURLFromParts(c)},parseURL:function(t){var n=e.exec(t);return n?{scheme:n[1]||"",netLoc:n[2]||"",path:n[3]||"",params:n[4]||"",query:n[5]||"",fragment:n[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(n,"");e.length!==(e=e.replace(r,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}};i1.exports=i}();var o1=a1.exports;function s1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l1(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s1(Object(n),!0).forEach((function(t){u1(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s1(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c1(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function u1(e,t,n){return(t=c1(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d1(){return d1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d1.apply(this,arguments)}const h1=Number.isFinite||function(e){return"number"===typeof e&&isFinite(e)},p1=Number.isSafeInteger||function(e){return"number"===typeof e&&Math.abs(e)<=f1},f1=Number.MAX_SAFE_INTEGER||9007199254740991;let m1=function(e){return e.MEDIA_ATTACHING="hlsMediaAttaching",e.MEDIA_ATTACHED="hlsMediaAttached",e.MEDIA_DETACHING="hlsMediaDetaching",e.MEDIA_DETACHED="hlsMediaDetached",e.BUFFER_RESET="hlsBufferReset",e.BUFFER_CODECS="hlsBufferCodecs",e.BUFFER_CREATED="hlsBufferCreated",e.BUFFER_APPENDING="hlsBufferAppending",e.BUFFER_APPENDED="hlsBufferAppended",e.BUFFER_EOS="hlsBufferEos",e.BUFFER_FLUSHING="hlsBufferFlushing",e.BUFFER_FLUSHED="hlsBufferFlushed",e.MANIFEST_LOADING="hlsManifestLoading",e.MANIFEST_LOADED="hlsManifestLoaded",e.MANIFEST_PARSED="hlsManifestParsed",e.LEVEL_SWITCHING="hlsLevelSwitching",e.LEVEL_SWITCHED="hlsLevelSwitched",e.LEVEL_LOADING="hlsLevelLoading",e.LEVEL_LOADED="hlsLevelLoaded",e.LEVEL_UPDATED="hlsLevelUpdated",e.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",e.LEVELS_UPDATED="hlsLevelsUpdated",e.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",e.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",e.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",e.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",e.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",e.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",e.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",e.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",e.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",e.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",e.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",e.CUES_PARSED="hlsCuesParsed",e.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",e.INIT_PTS_FOUND="hlsInitPtsFound",e.FRAG_LOADING="hlsFragLoading",e.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",e.FRAG_LOADED="hlsFragLoaded",e.FRAG_DECRYPTED="hlsFragDecrypted",e.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",e.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",e.FRAG_PARSING_METADATA="hlsFragParsingMetadata",e.FRAG_PARSED="hlsFragParsed",e.FRAG_BUFFERED="hlsFragBuffered",e.FRAG_CHANGED="hlsFragChanged",e.FPS_DROP="hlsFpsDrop",e.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",e.MAX_AUTO_LEVEL_UPDATED="hlsMaxAutoLevelUpdated",e.ERROR="hlsError",e.DESTROYING="hlsDestroying",e.KEY_LOADING="hlsKeyLoading",e.KEY_LOADED="hlsKeyLoaded",e.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",e.BACK_BUFFER_REACHED="hlsBackBufferReached",e.STEERING_MANIFEST_LOADED="hlsSteeringManifestLoaded",e}({}),g1=function(e){return e.NETWORK_ERROR="networkError",e.MEDIA_ERROR="mediaError",e.KEY_SYSTEM_ERROR="keySystemError",e.MUX_ERROR="muxError",e.OTHER_ERROR="otherError",e}({}),v1=function(e){return e.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",e.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",e.KEY_SYSTEM_NO_SESSION="keySystemNoSession",e.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",e.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",e.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",e.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",e.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",e.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",e.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",e.MANIFEST_LOAD_ERROR="manifestLoadError",e.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",e.MANIFEST_PARSING_ERROR="manifestParsingError",e.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",e.LEVEL_EMPTY_ERROR="levelEmptyError",e.LEVEL_LOAD_ERROR="levelLoadError",e.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",e.LEVEL_PARSING_ERROR="levelParsingError",e.LEVEL_SWITCH_ERROR="levelSwitchError",e.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",e.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",e.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",e.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",e.FRAG_LOAD_ERROR="fragLoadError",e.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",e.FRAG_DECRYPT_ERROR="fragDecryptError",e.FRAG_PARSING_ERROR="fragParsingError",e.FRAG_GAP="fragGap",e.REMUX_ALLOC_ERROR="remuxAllocError",e.KEY_LOAD_ERROR="keyLoadError",e.KEY_LOAD_TIMEOUT="keyLoadTimeOut",e.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",e.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",e.BUFFER_APPEND_ERROR="bufferAppendError",e.BUFFER_APPENDING_ERROR="bufferAppendingError",e.BUFFER_STALLED_ERROR="bufferStalledError",e.BUFFER_FULL_ERROR="bufferFullError",e.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",e.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",e.INTERNAL_EXCEPTION="internalException",e.INTERNAL_ABORTED="aborted",e.UNKNOWN="unknown",e}({});const y1=function(){},b1={trace:y1,debug:y1,log:y1,warn:y1,info:y1,error:y1};let w1=b1;function E1(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];n.forEach((function(t){w1[t]=e[t]?e[t].bind(e):function(e){const t=self.console[e];return t?t.bind(self.console,`[${e}] >`):y1}(t)}))}const x1=w1,_1=/^(\d+)x(\d+)$/,A1=/(.+?)=(".*?"|.*?)(?:,|$)/g;class T1{constructor(e){"string"===typeof e&&(e=T1.parseAttrList(e)),d1(this,e)}get clientAttrs(){return Object.keys(this).filter((e=>"X-"===e.substring(0,2)))}decimalInteger(e){const t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t}hexadecimalInteger(e){if(this[e]){let t=(this[e]||"0x").slice(2);t=(1&t.length?"0":"")+t;const n=new Uint8Array(t.length/2);for(let e=0;e<t.length/2;e++)n[e]=parseInt(t.slice(2*e,2*e+2),16);return n}return null}hexadecimalIntegerAsNumber(e){const t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t}decimalFloatingPoint(e){return parseFloat(this[e])}optionalFloat(e,t){const n=this[e];return n?parseFloat(n):t}enumeratedString(e){return this[e]}bool(e){return"YES"===this[e]}decimalResolution(e){const t=_1.exec(this[e]);if(null!==t)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}}static parseAttrList(e){let t;const n={};for(A1.lastIndex=0;null!==(t=A1.exec(e));){let e=t[2];0===e.indexOf('"')&&e.lastIndexOf('"')===e.length-1&&(e=e.slice(1,-1));n[t[1].trim()]=e}return n}}function S1(e){return"SCTE35-OUT"===e||"SCTE35-IN"===e}class k1{constructor(e,t){if(this.attr=void 0,this._startDate=void 0,this._endDate=void 0,this._badValueForSameId=void 0,t){const n=t.attr;for(const t in n)if(Object.prototype.hasOwnProperty.call(e,t)&&e[t]!==n[t]){x1.warn(`DATERANGE tag attribute: "${t}" does not match for tags with ID: "${e.ID}"`),this._badValueForSameId=t;break}e=d1(new T1({}),n,e)}if(this.attr=e,this._startDate=new Date(e["START-DATE"]),"END-DATE"in this.attr){const e=new Date(this.attr["END-DATE"]);h1(e.getTime())&&(this._endDate=e)}}get id(){return this.attr.ID}get class(){return this.attr.CLASS}get startDate(){return this._startDate}get endDate(){if(this._endDate)return this._endDate;const e=this.duration;return null!==e?new Date(this._startDate.getTime()+1e3*e):null}get duration(){if("DURATION"in this.attr){const e=this.attr.decimalFloatingPoint("DURATION");if(h1(e))return e}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}get plannedDuration(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}get endOnNext(){return this.attr.bool("END-ON-NEXT")}get isValid(){return!!this.id&&!this._badValueForSameId&&h1(this.startDate.getTime())&&(null===this.duration||this.duration>=0)&&(!this.endOnNext||!!this.class)}}class C1{constructor(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}}var I1="audio",R1="video",D1="audiovideo";class L1{constructor(e){this._byteRange=null,this._url=null,this.baseurl=void 0,this.relurl=void 0,this.elementaryStreams={[I1]:null,[R1]:null,[D1]:null},this.baseurl=e}setByteRange(e,t){const n=e.split("@",2);let r;r=1===n.length?(null==t?void 0:t.byteRangeEndOffset)||0:parseInt(n[1]),this._byteRange=[r,parseInt(n[0])+r]}get byteRange(){return this._byteRange?this._byteRange:[]}get byteRangeStartOffset(){return this.byteRange[0]}get byteRangeEndOffset(){return this.byteRange[1]}get url(){return!this._url&&this.baseurl&&this.relurl&&(this._url=o1.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""}set url(e){this._url=e}}class P1 extends L1{constructor(e,t){super(t),this._decryptdata=null,this.rawProgramDateTime=null,this.programDateTime=null,this.tagList=[],this.duration=0,this.sn=0,this.levelkeys=void 0,this.type=void 0,this.loader=null,this.keyLoader=null,this.level=-1,this.cc=0,this.startPTS=void 0,this.endPTS=void 0,this.startDTS=void 0,this.endDTS=void 0,this.start=0,this.deltaPTS=void 0,this.maxStartPTS=void 0,this.minEndPTS=void 0,this.stats=new C1,this.data=void 0,this.bitrateTest=!1,this.title=null,this.initSegment=null,this.endList=void 0,this.gap=void 0,this.urlId=0,this.type=e}get decryptdata(){const{levelkeys:e}=this;if(!e&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkeys&&!this.levelkeys.NONE){const e=this.levelkeys.identity;if(e)this._decryptdata=e.getDecryptData(this.sn);else{const e=Object.keys(this.levelkeys);if(1===e.length)return this._decryptdata=this.levelkeys[e[0]].getDecryptData(this.sn)}}return this._decryptdata}get end(){return this.start+this.duration}get endProgramDateTime(){if(null===this.programDateTime)return null;if(!h1(this.programDateTime))return null;const e=h1(this.duration)?this.duration:0;return this.programDateTime+1e3*e}get encrypted(){var e;if(null!=(e=this._decryptdata)&&e.encrypted)return!0;if(this.levelkeys){const e=Object.keys(this.levelkeys),t=e.length;if(t>1||1===t&&this.levelkeys[e[0]].encrypted)return!0}return!1}setKeyFormat(e){if(this.levelkeys){const t=this.levelkeys[e];t&&!this._decryptdata&&(this._decryptdata=t.getDecryptData(this.sn))}}abortRequests(){var e,t;null==(e=this.loader)||e.abort(),null==(t=this.keyLoader)||t.abort()}setElementaryStreamInfo(e,t,n,r,i){let a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const{elementaryStreams:o}=this,s=o[e];s?(s.startPTS=Math.min(s.startPTS,t),s.endPTS=Math.max(s.endPTS,n),s.startDTS=Math.min(s.startDTS,r),s.endDTS=Math.max(s.endDTS,i)):o[e]={startPTS:t,endPTS:n,startDTS:r,endDTS:i,partial:a}}clearElementaryStreamInfo(){const{elementaryStreams:e}=this;e[I1]=null,e[R1]=null,e[D1]=null}}class M1 extends L1{constructor(e,t,n,r,i){super(n),this.fragOffset=0,this.duration=0,this.gap=!1,this.independent=!1,this.relurl=void 0,this.fragment=void 0,this.index=void 0,this.stats=new C1,this.duration=e.decimalFloatingPoint("DURATION"),this.gap=e.bool("GAP"),this.independent=e.bool("INDEPENDENT"),this.relurl=e.enumeratedString("URI"),this.fragment=t,this.index=r;const a=e.enumeratedString("BYTERANGE");a&&this.setByteRange(a,i),i&&(this.fragOffset=i.fragOffset+i.duration)}get start(){return this.fragment.start+this.fragOffset}get end(){return this.start+this.duration}get loaded(){const{elementaryStreams:e}=this;return!!(e.audio||e.video||e.audiovideo)}}class N1{constructor(e){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.live=!0,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.availabilityDelay=void 0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=e}reloaded(e){if(!e)return this.advanced=!0,void(this.updated=!0);const t=this.lastPartSn-e.lastPartSn,n=this.lastPartIndex-e.lastPartIndex;this.updated=this.endSN!==e.endSN||!!n||!!t||!this.live,this.advanced=this.endSN>e.endSN||t>0||0===t&&n>0,this.updated||this.advanced?this.misses=Math.floor(.6*e.misses):this.misses=e.misses+1,this.availabilityDelay=e.availabilityDelay}get hasProgramDateTime(){return!!this.fragments.length&&h1(this.fragments[this.fragments.length-1].programDateTime)}get levelTargetDuration(){return this.averagetargetduration||this.targetduration||10}get drift(){const e=this.driftEndTime-this.driftStartTime;if(e>0){return 1e3*(this.driftEnd-this.driftStart)/e}return 1}get edge(){return this.partEnd||this.fragmentEnd}get partEnd(){var e;return null!=(e=this.partList)&&e.length?this.partList[this.partList.length-1].end:this.fragmentEnd}get fragmentEnd(){var e;return null!=(e=this.fragments)&&e.length?this.fragments[this.fragments.length-1].end:0}get age(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}get lastPartIndex(){var e;return null!=(e=this.partList)&&e.length?this.partList[this.partList.length-1].index:-1}get lastPartSn(){var e;return null!=(e=this.partList)&&e.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}}function O1(e){return Uint8Array.from(atob(e),(e=>e.charCodeAt(0)))}function j1(e){const t=e.split(":");let n=null;if("data"===t[0]&&2===t.length){const e=t[1].split(";"),r=e[e.length-1].split(",");if(2===r.length){const t="base64"===r[0],i=r[1];t?(e.splice(-1,1),n=O1(i)):n=function(e){const t=F1(e).subarray(0,16),n=new Uint8Array(16);return n.set(t,16-t.length),n}(i)}}return n}function F1(e){return Uint8Array.from(unescape(encodeURIComponent(e)),(e=>e.charCodeAt(0)))}const U1="undefined"!==typeof self?self:void 0;var B1={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},$1="org.w3.clearkey",V1="com.apple.streamingkeydelivery",W1="com.microsoft.playready",z1="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed";function H1(e){switch(e){case V1:return B1.FAIRPLAY;case W1:return B1.PLAYREADY;case z1:return B1.WIDEVINE;case $1:return B1.CLEARKEY}}var q1="1077efecc0b24d02ace33c1e52e2fb4b",G1="e2719d58a985b3c9781ab030af78d30e",K1="9a04f07998404286ab92e65be0885f95",Y1="edef8ba979d64acea3c827dcd51d21ed";function Q1(e){return e===Y1?B1.WIDEVINE:e===K1?B1.PLAYREADY:e===q1||e===G1?B1.CLEARKEY:void 0}function X1(e){switch(e){case B1.FAIRPLAY:return V1;case B1.PLAYREADY:return W1;case B1.WIDEVINE:return z1;case B1.CLEARKEY:return $1}}function Z1(e){const{drmSystems:t,widevineLicenseUrl:n}=e,r=t?[B1.FAIRPLAY,B1.WIDEVINE,B1.PLAYREADY,B1.CLEARKEY].filter((e=>!!t[e])):[];return!r[B1.WIDEVINE]&&n&&r.push(B1.WIDEVINE),r}const J1=null!=U1&&null!=(e2=U1.navigator)&&e2.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null;var e2;function t2(e){const t=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2),n=String.fromCharCode.apply(null,Array.from(t)),r=n.substring(n.indexOf("<"),n.length),i=(new DOMParser).parseFromString(r,"text/xml").getElementsByTagName("KID")[0];if(i){const e=i.childNodes[0]?i.childNodes[0].nodeValue:i.getAttribute("VALUE");if(e){const t=O1(e).subarray(0,16);return function(e){const t=function(e,t,n){const r=e[t];e[t]=e[n],e[n]=r};t(e,0,3),t(e,1,2),t(e,4,5),t(e,6,7)}(t),t}}return null}function n2(e,t,n){return Uint8Array.prototype.slice?e.slice(t,n):new Uint8Array(Array.prototype.slice.call(e,t,n))}const r2=(e,t)=>t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128,i2=(e,t)=>t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128,a2=(e,t)=>{const n=t;let r=0;for(;r2(e,t);){r+=10;r+=o2(e,t+6),i2(e,t+10)&&(r+=10),t+=r}if(r>0)return e.subarray(n,n+r)},o2=(e,t)=>{let n=0;return n=(127&e[t])<<21,n|=(127&e[t+1])<<14,n|=(127&e[t+2])<<7,n|=127&e[t+3],n},s2=(e,t)=>r2(e,t)&&o2(e,t+6)+10<=e.length-t,l2=e=>{const t=d2(e);for(let n=0;n<t.length;n++){const e=t[n];if(c2(e))return g2(e)}},c2=e=>e&&"PRIV"===e.key&&"com.apple.streaming.transportStreamTimestamp"===e.info,u2=e=>{const t=String.fromCharCode(e[0],e[1],e[2],e[3]),n=o2(e,4);return{type:t,size:n,data:e.subarray(10,10+n)}},d2=e=>{let t=0;const n=[];for(;r2(e,t);){const r=o2(e,t+6);t+=10;const i=t+r;for(;t+8<i;){const r=u2(e.subarray(t)),i=h2(r);i&&n.push(i),t+=r.size+10}i2(e,t)&&(t+=10)}return n},h2=e=>"PRIV"===e.type?p2(e):"W"===e.type[0]?m2(e):f2(e),p2=e=>{if(e.size<2)return;const t=v2(e.data,!0),n=new Uint8Array(e.data.subarray(t.length+1));return{key:e.type,info:t,data:n.buffer}},f2=e=>{if(e.size<2)return;if("TXXX"===e.type){let t=1;const n=v2(e.data.subarray(t),!0);t+=n.length+1;const r=v2(e.data.subarray(t));return{key:e.type,info:n,data:r}}const t=v2(e.data.subarray(1));return{key:e.type,data:t}},m2=e=>{if("WXXX"===e.type){if(e.size<2)return;let t=1;const n=v2(e.data.subarray(t),!0);t+=n.length+1;const r=v2(e.data.subarray(t));return{key:e.type,info:n,data:r}}const t=v2(e.data);return{key:e.type,data:t}},g2=e=>{if(8===e.data.byteLength){const t=new Uint8Array(e.data),n=1&t[3];let r=(t[4]<<23)+(t[5]<<15)+(t[6]<<7)+t[7];return r/=45,n&&(r+=47721858.84),Math.round(r)}},v2=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=b2();if(n){const r=n.decode(e);if(t){const e=r.indexOf("\0");return-1!==e?r.substring(0,e):r}return r.replace(/\0/g,"")}const r=e.length;let i,a,o,s="",l=0;for(;l<r;){if(i=e[l++],0===i&&t)return s;if(0!==i&&3!==i)switch(i>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:s+=String.fromCharCode(i);break;case 12:case 13:a=e[l++],s+=String.fromCharCode((31&i)<<6|63&a);break;case 14:a=e[l++],o=e[l++],s+=String.fromCharCode((15&i)<<12|(63&a)<<6|63&o)}}return s};let y2;function b2(){if(!navigator.userAgent.includes("PlayStation 4"))return y2||"undefined"===typeof self.TextDecoder||(y2=new self.TextDecoder("utf-8")),y2}const w2=function(e){let t="";for(let n=0;n<e.length;n++){let r=e[n].toString(16);r.length<2&&(r="0"+r),t+=r}return t},E2=Math.pow(2,32)-1,x2=[].push,_2={video:1,audio:2,id3:3,text:4};function A2(e){return String.fromCharCode.apply(null,e)}function T2(e,t){const n=e[t]<<8|e[t+1];return n<0?65536+n:n}function S2(e,t){const n=C2(e,t);return n<0?4294967296+n:n}function k2(e,t){let n=S2(e,t);return n*=Math.pow(2,32),n+=S2(e,t+4),n}function C2(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]}function I2(e,t,n){e[t]=n>>24,e[t+1]=n>>16&255,e[t+2]=n>>8&255,e[t+3]=255&n}function R2(e,t){const n=[];if(!t.length)return n;const r=e.byteLength;for(let i=0;i<r;){const a=S2(e,i),o=a>1?i+a:r;if(A2(e.subarray(i+4,i+8))===t[0])if(1===t.length)n.push(e.subarray(i+8,o));else{const r=R2(e.subarray(i+8,o),t.slice(1));r.length&&x2.apply(n,r)}i=o}return n}function D2(e){const t=[],n=e[0];let r=8;const i=S2(e,r);r+=4;let a=0,o=0;0===n?(a=S2(e,r),o=S2(e,r+4),r+=8):(a=k2(e,r),o=k2(e,r+8),r+=16),r+=2;let s=e.length+o;const l=T2(e,r);r+=2;for(let c=0;c<l;c++){let n=r;const a=S2(e,n);n+=4;const o=2147483647&a;if(1===(2147483648&a)>>>31)return x1.warn("SIDX has hierarchical references (not supported)"),null;const l=S2(e,n);n+=4,t.push({referenceSize:o,subsegmentDuration:l,info:{duration:l/i,start:s,end:s+o-1}}),s+=o,n+=4,r=n}return{earliestPresentationTime:a,timescale:i,version:n,referencesCount:l,references:t}}function L2(e){const t=[],n=R2(e,["moov","trak"]);for(let r=0;r<n.length;r++){const e=n[r],i=R2(e,["tkhd"])[0];if(i){let n=i[0];const r=S2(i,0===n?12:20),a=R2(e,["mdia","mdhd"])[0];if(a){n=a[0];const i=S2(a,0===n?12:20),o=R2(e,["mdia","hdlr"])[0];if(o){const n=A2(o.subarray(8,12)),a={soun:I1,vide:R1}[n];if(a){const n=P2(R2(e,["mdia","minf","stbl","stsd"])[0]);t[r]={timescale:i,type:a},t[a]=l1({timescale:i,id:r},n)}}}}}return R2(e,["moov","mvex","trex"]).forEach((e=>{const n=S2(e,4),r=t[n];r&&(r.default={duration:S2(e,12),flags:S2(e,20)})})),t}function P2(e){const t=e.subarray(8),n=t.subarray(86),r=A2(t.subarray(4,8));let i=r;const a="enca"===r||"encv"===r;if(a){const e=R2(t,[r])[0];R2(e.subarray("enca"===r?28:78),["sinf"]).forEach((e=>{const t=R2(e,["schm"])[0];if(t){const n=A2(t.subarray(4,8));if("cbcs"===n||"cenc"===n){const t=R2(e,["frma"])[0];t&&(i=A2(t))}}}))}switch(i){case"avc1":case"avc2":case"avc3":case"avc4":{const e=R2(n,["avcC"])[0];i+="."+N2(e[1])+N2(e[2])+N2(e[3]);break}case"mp4a":{const e=R2(t,[r])[0],n=R2(e.subarray(28),["esds"])[0];if(n&&n.length>12){let e=4;if(3!==n[e++])break;e=M2(n,e),e+=2;const t=n[e++];if(128&t&&(e+=2),64&t&&(e+=n[e++]),4!==n[e++])break;e=M2(n,e);const r=n[e++];if(64!==r)break;if(i+="."+N2(r),e+=12,5!==n[e++])break;e=M2(n,e);const a=n[e++];let o=(248&a)>>3;31===o&&(o+=1+((7&a)<<3)+((224&n[e])>>5)),i+="."+o}break}case"hvc1":case"hev1":{const e=R2(n,["hvcC"])[0],t=e[1],r=["","A","B","C"][t>>6],a=31&t,o=S2(e,2),s=(32&t)>>5?"H":"L",l=e[12],c=e.subarray(6,12);i+="."+r+a,i+="."+o.toString(16).toUpperCase(),i+="."+s+l;let u="";for(let n=c.length;n--;){const e=c[n];if(e||u){u="."+e.toString(16).toUpperCase()+u}}i+=u;break}case"dvh1":case"dvhe":{const e=R2(n,["dvcC"])[0],t=e[2]>>1&127,r=e[2]<<5&32|e[3]>>3&31;i+="."+O2(t)+"."+O2(r);break}case"vp09":{const e=R2(n,["vpcC"])[0],t=e[4],r=e[5],a=e[6]>>4&15;i+="."+O2(t)+"."+O2(r)+"."+O2(a);break}case"av01":{const e=R2(n,["av1C"])[0],t=e[1]>>>5,r=31&e[1],a=e[2]>>>7?"H":"M",o=(64&e[2])>>6,s=(32&e[2])>>5,l=2===t&&o?s?12:10:o?10:8,c=(16&e[2])>>4,u=(8&e[2])>>3,d=(4&e[2])>>2,h=3&e[2],p=1,f=1,m=1,g=0;i+="."+t+"."+O2(r)+a+"."+O2(l)+"."+c+"."+u+d+h+"."+O2(p)+"."+O2(f)+"."+O2(m)+"."+g;break}}return{codec:i,encrypted:a}}function M2(e,t){const n=t+5;for(;128&e[t++]&&t<n;);return t}function N2(e){return("0"+e.toString(16).toUpperCase()).slice(-2)}function O2(e){return(e<10?"0":"")+e}function j2(e){const t=R2(e,["schm"])[0];if(t){const n=A2(t.subarray(4,8));if("cbcs"===n||"cenc"===n)return R2(e,["schi","tenc"])[0]}return null}function F2(e){const t=S2(e,0);let n=8;1&t&&(n+=4),4&t&&(n+=4);let r=0;const i=S2(e,4);for(let a=0;a<i;a++){if(256&t){r+=S2(e,n),n+=4}512&t&&(n+=4),1024&t&&(n+=4),2048&t&&(n+=4)}return r}function U2(e,t){const n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}function B2(e,t){const n=[],r=t.samples,i=t.timescale,a=t.id;let o=!1;return R2(r,["moof"]).map((s=>{const l=s.byteOffset-8;R2(s,["traf"]).map((s=>{const c=R2(s,["tfdt"]).map((e=>{const t=e[0];let n=S2(e,4);return 1===t&&(n*=Math.pow(2,32),n+=S2(e,8)),n/i}))[0];return void 0!==c&&(e=c),R2(s,["tfhd"]).map((c=>{const u=S2(c,4),d=16777215&S2(c,0);let h=0;const p=0!==(16&d);let f=0;const m=0!==(32&d);let g=8;u===a&&(0!==(1&d)&&(g+=8),0!==(2&d)&&(g+=4),0!==(8&d)&&(h=S2(c,g),g+=4),p&&(f=S2(c,g),g+=4),m&&(g+=4),"video"===t.type&&(o=function(e){if(!e)return!1;const t=e.indexOf("."),n=t<0?e:e.substring(0,t);return"hvc1"===n||"hev1"===n||"dvh1"===n||"dvhe"===n}(t.codec)),R2(s,["trun"]).map((a=>{const s=a[0],c=16777215&S2(a,0),u=0!==(1&c);let d=0;const p=0!==(4&c),m=0!==(256&c);let g=0;const v=0!==(512&c);let y=0;const b=0!==(1024&c),w=0!==(2048&c);let E=0;const x=S2(a,4);let _=8;u&&(d=S2(a,_),_+=4),p&&(_+=4);let A=d+l;for(let l=0;l<x;l++){if(m?(g=S2(a,_),_+=4):g=h,v?(y=S2(a,_),_+=4):y=f,b&&(_+=4),w&&(E=0===s?S2(a,_):C2(a,_),_+=4),t.type===R1){let t=0;for(;t<y;){const a=S2(r,A);if(A+=4,$2(o,r[A])){V2(r.subarray(A,A+a),o?2:1,e+E/i,n)}A+=a,t+=a+4}}e+=g/i}})))}))}))})),n}function $2(e,t){if(e){const e=t>>1&63;return 39===e||40===e}return 6===(31&t)}function V2(e,t,n,r){const i=W2(e);let a=0;a+=t;let o=0,s=0,l=0;for(;a<i.length;){o=0;do{if(a>=i.length)break;l=i[a++],o+=l}while(255===l);s=0;do{if(a>=i.length)break;l=i[a++],s+=l}while(255===l);const e=i.length-a;let t=a;if(s<e)a+=s;else if(s>e){x1.error(`Malformed SEI payload. ${s} is too small, only ${e} bytes left to parse.`);break}if(4===o){if(181===i[t++]){const e=T2(i,t);if(t+=2,49===e){const e=S2(i,t);if(t+=4,1195456820===e){const e=i[t++];if(3===e){const a=i[t++],s=64&a,l=s?2+3*(31&a):0,c=new Uint8Array(l);if(s){c[0]=a;for(let e=1;e<l;e++)c[e]=i[t++]}r.push({type:e,payloadType:o,pts:n,bytes:c})}}}}}else if(5===o&&s>16){const e=[];for(let n=0;n<16;n++){const r=i[t++].toString(16);e.push(1==r.length?"0"+r:r),3!==n&&5!==n&&7!==n&&9!==n||e.push("-")}const a=s-16,l=new Uint8Array(a);for(let n=0;n<a;n++)l[n]=i[t++];r.push({payloadType:o,pts:n,uuid:e.join(""),userData:v2(l),userDataBytes:l})}}}function W2(e){const t=e.byteLength,n=[];let r=1;for(;r<t-2;)0===e[r]&&0===e[r+1]&&3===e[r+2]?(n.push(r+2),r+=2):r++;if(0===n.length)return e;const i=t-n.length,a=new Uint8Array(i);let o=0;for(r=0;r<i;o++,r++)o===n[0]&&(o++,n.shift()),a[r]=e[o];return a}function z2(e,t,n){if(16!==e.byteLength)throw new RangeError("Invalid system id");let r,i,a;if(t){r=1,i=new Uint8Array(16*t.length);for(let e=0;e<t.length;e++){const n=t[e];if(16!==n.byteLength)throw new RangeError("Invalid key");i.set(n,16*e)}}else r=0,i=new Uint8Array;r>0?(a=new Uint8Array(4),t.length>0&&new DataView(a.buffer).setUint32(0,t.length,!1)):a=new Uint8Array;const o=new Uint8Array(4);return n&&n.byteLength>0&&new DataView(o.buffer).setUint32(0,n.byteLength,!1),function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.length;let a=8,o=i;for(;o--;)a+=n[o].byteLength;const s=new Uint8Array(a);for(s[0]=a>>24&255,s[1]=a>>16&255,s[2]=a>>8&255,s[3]=255&a,s.set(e,4),o=0,a=8;o<i;o++)s.set(n[o],a),a+=n[o].byteLength;return s}([112,115,115,104],new Uint8Array([r,0,0,0]),e,a,i,o,n||new Uint8Array)}function H2(e){const t=e.getUint32(0),n=e.byteOffset,r=e.byteLength;if(r<t)return{offset:n,size:r};if(1886614376!==e.getUint32(4))return{offset:n,size:t};const i=e.getUint32(8)>>>24;if(0!==i&&1!==i)return{offset:n,size:t};const a=e.buffer,o=w2(new Uint8Array(a,n+12,16)),s=e.getUint32(28);let l=null,c=null;if(0===i){if(t-32<s||s<22)return{offset:n,size:t};c=new Uint8Array(a,n+32,s)}else if(1===i){if(!s||r<n+32+16*s+16)return{offset:n,size:t};l=[];for(let e=0;e<s;e++)l.push(new Uint8Array(a,n+32+16*e,16))}return{version:i,systemId:o,kids:l,data:c,offset:n,size:t}}let q2={};class G2{static clearKeyUriToKeyIdMap(){q2={}}constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=e,this.uri=t,this.keyFormat=n,this.keyFormatVersions=r,this.iv=i,this.encrypted=!!e&&"NONE"!==e,this.isCommonEncryption=this.encrypted&&"AES-128"!==e}isSupported(){if(this.method){if("AES-128"===this.method||"NONE"===this.method)return!0;if("identity"===this.keyFormat)return"SAMPLE-AES"===this.method;switch(this.keyFormat){case V1:case z1:case W1:case $1:return-1!==["ISO-23001-7","SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)}}return!1}getDecryptData(e){if(!this.encrypted||!this.uri)return null;if("AES-128"===this.method&&this.uri&&!this.iv){"number"!==typeof e&&("AES-128"!==this.method||this.iv||x1.warn(`missing IV for initialization segment with method="${this.method}" - compliance issue`),e=0);const t=function(e){const t=new Uint8Array(16);for(let n=12;n<16;n++)t[n]=e>>8*(15-n)&255;return t}(e);return new G2(this.method,this.uri,"identity",this.keyFormatVersions,t)}const t=j1(this.uri);if(t)switch(this.keyFormat){case z1:this.pssh=t,t.length>=22&&(this.keyId=t.subarray(t.length-22,t.length-6));break;case W1:{const e=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=z2(e,null,t),this.keyId=t2(t);break}default:{let e=t.subarray(0,16);if(16!==e.length){const t=new Uint8Array(16);t.set(e,16-e.length),e=t}this.keyId=e;break}}if(!this.keyId||16!==this.keyId.byteLength){let e=q2[this.uri];if(!e){const t=Object.keys(q2).length%Number.MAX_SAFE_INTEGER;e=new Uint8Array(16);new DataView(e.buffer,12,4).setUint32(0,t),q2[this.uri]=e}this.keyId=e}return this}}const K2=/\{\$([a-zA-Z0-9-_]+)\}/g;function Y2(e){return K2.test(e)}function Q2(e,t,n){if(null!==e.variableList||e.hasVariableRefs)for(let r=n.length;r--;){const i=n[r],a=t[i];a&&(t[i]=X2(e,a))}}function X2(e,t){if(null!==e.variableList||e.hasVariableRefs){const n=e.variableList;return t.replace(K2,(t=>{const r=t.substring(2,t.length-1),i=null==n?void 0:n[r];return void 0===i?(e.playlistParsingError||(e.playlistParsingError=new Error(`Missing preceding EXT-X-DEFINE tag for Variable Reference: "${r}"`)),t):i}))}return t}function Z2(e,t,n){let r,i,a=e.variableList;if(a||(e.variableList=a={}),"QUERYPARAM"in t){r=t.QUERYPARAM;try{const e=new self.URL(n).searchParams;if(!e.has(r))throw new Error(`"${r}" does not match any query parameter in URI: "${n}"`);i=e.get(r)}catch(Rb){e.playlistParsingError||(e.playlistParsingError=new Error(`EXT-X-DEFINE QUERYPARAM: ${Rb.message}`))}}else r=t.NAME,i=t.VALUE;r in a?e.playlistParsingError||(e.playlistParsingError=new Error(`EXT-X-DEFINE duplicate Variable Name declarations: "${r}"`)):a[r]=i||""}function J2(e,t,n){const r=t.IMPORT;if(n&&r in n){let t=e.variableList;t||(e.variableList=t={}),t[r]=n[r]}else e.playlistParsingError||(e.playlistParsingError=new Error(`EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "${r}"`))}function e3(){if("undefined"===typeof self)return;return(!(arguments.length>0&&void 0!==arguments[0])||arguments[0]||!self.MediaSource)&&self.ManagedMediaSource||self.MediaSource||self.WebKitMediaSource}const t3={audio:{a3ds:1,"ac-3":.95,"ac-4":1,alac:.9,alaw:1,dra1:1,"dts+":1,"dts-":1,dtsc:1,dtse:1,dtsh:1,"ec-3":.9,enca:1,fLaC:.9,flac:.9,FLAC:.9,g719:1,g726:1,m4ae:1,mha1:1,mha2:1,mhm1:1,mhm2:1,mlpa:1,mp4a:1,"raw ":1,Opus:1,opus:1,samr:1,sawb:1,sawp:1,sevc:1,sqcp:1,ssmv:1,twos:1,ulaw:1},video:{avc1:1,avc2:1,avc3:1,avc4:1,avcp:1,av01:.8,drac:1,dva1:1,dvav:1,dvh1:.7,dvhe:.7,encv:1,hev1:.75,hvc1:.75,mjp2:1,mp4v:1,mvc1:1,mvc2:1,mvc3:1,mvc4:1,resv:1,rv60:1,s263:1,svc1:1,svc2:1,"vc-1":1,vp08:1,vp09:.9},text:{stpp:1,wvtt:1}};function n3(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return!e.split(",").some((e=>!r3(e,t,n)))}function r3(e,t){var n;const r=e3(!(arguments.length>2&&void 0!==arguments[2])||arguments[2]);return null!=(n=null==r?void 0:r.isTypeSupported(i3(e,t)))&&n}function i3(e,t){return`${t}/mp4;codecs="${e}"`}function a3(e){if(e){const t=e.substring(0,4);return t3.video[t]}return 2}function o3(e){return e.split(",").reduce(((e,t)=>{const n=t3.video[t];return n?(2*n+e)/(e?3:2):(t3.audio[t]+e)/(e?2:1)}),0)}const s3={};const l3=/flac|opus/i;function c3(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e.replace(l3,(e=>function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(s3[e])return s3[e];const n={flac:["flac","fLaC","FLAC"],opus:["opus","Opus"]}[e];for(let r=0;r<n.length;r++)if(r3(n[r],"audio",t))return s3[e]=n[r],n[r];return e}(e.toLowerCase(),t)))}function u3(e,t){return e&&"mp4a"!==e?e:t?t.split(",")[0]:t}const d3=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,h3=/#EXT-X-MEDIA:(.*)/g,p3=/^#EXT(?:INF|-X-TARGETDURATION):/m,f3=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[^\r\n]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),m3=new RegExp([/#(EXTM3U)/.source,/#EXT-X-(DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP|INDEPENDENT-SEGMENTS)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|"));class g3{static findGroup(e,t){for(let n=0;n<e.length;n++){const r=e[n];if(r.id===t)return r}}static resolve(e,t){return o1.buildAbsoluteURL(t,e,{alwaysNormalize:!0})}static isMediaPlaylist(e){return p3.test(e)}static parseMasterPlaylist(e,t){const n={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:Y2(e)},r=[];let i;for(d3.lastIndex=0;null!=(i=d3.exec(e));)if(i[1]){var a;const e=new T1(i[1]);Q2(n,e,["CODECS","SUPPLEMENTAL-CODECS","ALLOWED-CPC","PATHWAY-ID","STABLE-VARIANT-ID","AUDIO","VIDEO","SUBTITLES","CLOSED-CAPTIONS","NAME"]);const o=X2(n,i[2]),s={attrs:e,bitrate:e.decimalInteger("BANDWIDTH")||e.decimalInteger("AVERAGE-BANDWIDTH"),name:e.NAME,url:g3.resolve(o,t)},l=e.decimalResolution("RESOLUTION");l&&(s.width=l.width,s.height=l.height),b3(e.CODECS,s),null!=(a=s.unknownCodecs)&&a.length||r.push(s),n.levels.push(s)}else if(i[3]){const e=i[3],r=i[4];switch(e){case"SESSION-DATA":{const e=new T1(r);Q2(n,e,["DATA-ID","LANGUAGE","VALUE","URI"]);const t=e["DATA-ID"];t&&(null===n.sessionData&&(n.sessionData={}),n.sessionData[t]=e);break}case"SESSION-KEY":{const e=v3(r,t,n);e.encrypted&&e.isSupported()?(null===n.sessionKeys&&(n.sessionKeys=[]),n.sessionKeys.push(e)):x1.warn(`[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "${r}"`);break}case"DEFINE":{const e=new T1(r);Q2(n,e,["NAME","VALUE","QUERYPARAM"]),Z2(n,e,t)}break;case"CONTENT-STEERING":{const e=new T1(r);Q2(n,e,["SERVER-URI","PATHWAY-ID"]),n.contentSteering={uri:g3.resolve(e["SERVER-URI"],t),pathwayId:e["PATHWAY-ID"]||"."};break}case"START":n.startTimeOffset=y3(r)}}const o=r.length>0&&r.length<n.levels.length;return n.levels=o?r:n.levels,0===n.levels.length&&(n.playlistParsingError=new Error("no levels found in manifest")),n}static parseMasterPlaylistMedia(e,t,n){let r;const i={},a=n.levels,o={AUDIO:a.map((e=>({id:e.attrs.AUDIO,audioCodec:e.audioCodec}))),SUBTITLES:a.map((e=>({id:e.attrs.SUBTITLES,textCodec:e.textCodec}))),"CLOSED-CAPTIONS":[]};let s=0;for(h3.lastIndex=0;null!==(r=h3.exec(e));){const e=new T1(r[1]),a=e.TYPE;if(a){const r=o[a],l=i[a]||[];i[a]=l,Q2(n,e,["URI","GROUP-ID","LANGUAGE","ASSOC-LANGUAGE","STABLE-RENDITION-ID","NAME","INSTREAM-ID","CHARACTERISTICS","CHANNELS"]);const c=e.LANGUAGE,u=e["ASSOC-LANGUAGE"],d=e.CHANNELS,h=e.CHARACTERISTICS,p=e["INSTREAM-ID"],f={attrs:e,bitrate:0,id:s++,groupId:e["GROUP-ID"]||"",name:e.NAME||c||"",type:a,default:e.bool("DEFAULT"),autoselect:e.bool("AUTOSELECT"),forced:e.bool("FORCED"),lang:c,url:e.URI?g3.resolve(e.URI,t):""};if(u&&(f.assocLang=u),d&&(f.channels=d),h&&(f.characteristics=h),p&&(f.instreamId=p),null!=r&&r.length){const e=g3.findGroup(r,f.groupId)||r[0];w3(f,e,"audioCodec"),w3(f,e,"textCodec")}l.push(f)}}return i}static parseLevelPlaylist(e,t,n,r,i,a){const o=new N1(t),s=o.fragments;let l,c,u,d=null,h=0,p=0,f=0,m=0,g=null,v=new P1(r,t),y=-1,b=!1,w=null;for(f3.lastIndex=0,o.m3u8=e,o.hasVariableRefs=Y2(e);null!==(l=f3.exec(e));){b&&(b=!1,v=new P1(r,t),v.start=f,v.sn=h,v.cc=m,v.level=n,d&&(v.initSegment=d,v.rawProgramDateTime=d.rawProgramDateTime,d.rawProgramDateTime=null,w&&(v.setByteRange(w),w=null)));const e=l[1];if(e){v.duration=parseFloat(e);const t=(" "+l[2]).slice(1);v.title=t||null,v.tagList.push(t?["INF",e,t]:["INF",e])}else if(l[3]){if(h1(v.duration)){v.start=f,u&&_3(v,u,o),v.sn=h,v.level=n,v.cc=m,s.push(v);const e=(" "+l[3]).slice(1);v.relurl=X2(o,e),E3(v,g),g=v,f+=v.duration,h++,p=0,b=!0}}else if(l[4]){const e=(" "+l[4]).slice(1);g?v.setByteRange(e,g):v.setByteRange(e)}else if(l[5])v.rawProgramDateTime=(" "+l[5]).slice(1),v.tagList.push(["PROGRAM-DATE-TIME",v.rawProgramDateTime]),-1===y&&(y=s.length);else{if(l=l[0].match(m3),!l){x1.warn("No matches on slow regex match for level playlist!");continue}for(c=1;c<l.length&&"undefined"===typeof l[c];c++);const e=(" "+l[c]).slice(1),i=(" "+l[c+1]).slice(1),f=l[c+2]?(" "+l[c+2]).slice(1):"";switch(e){case"PLAYLIST-TYPE":o.type=i.toUpperCase();break;case"MEDIA-SEQUENCE":h=o.startSN=parseInt(i);break;case"SKIP":{const e=new T1(i);Q2(o,e,["RECENTLY-REMOVED-DATERANGES"]);const t=e.decimalInteger("SKIPPED-SEGMENTS");if(h1(t)){o.skippedSegments=t;for(let e=t;e--;)s.unshift(null);h+=t}const n=e.enumeratedString("RECENTLY-REMOVED-DATERANGES");n&&(o.recentlyRemovedDateranges=n.split("\t"));break}case"TARGETDURATION":o.targetduration=Math.max(parseInt(i),1);break;case"VERSION":o.version=parseInt(i);break;case"INDEPENDENT-SEGMENTS":case"EXTM3U":break;case"ENDLIST":o.live=!1;break;case"#":(i||f)&&v.tagList.push(f?[i,f]:[i]);break;case"DISCONTINUITY":m++,v.tagList.push(["DIS"]);break;case"GAP":v.gap=!0,v.tagList.push([e]);break;case"BITRATE":v.tagList.push([e,i]);break;case"DATERANGE":{const e=new T1(i);Q2(o,e,["ID","CLASS","START-DATE","END-DATE","SCTE35-CMD","SCTE35-OUT","SCTE35-IN"]),Q2(o,e,e.clientAttrs);const t=new k1(e,o.dateRanges[e.ID]);t.isValid||o.skippedSegments?o.dateRanges[t.id]=t:x1.warn(`Ignoring invalid DATERANGE tag: "${i}"`),v.tagList.push(["EXT-X-DATERANGE",i]);break}case"DEFINE":{const e=new T1(i);Q2(o,e,["NAME","VALUE","IMPORT","QUERYPARAM"]),"IMPORT"in e?J2(o,e,a):Z2(o,e,t)}break;case"DISCONTINUITY-SEQUENCE":m=parseInt(i);break;case"KEY":{const e=v3(i,t,o);if(e.isSupported()){if("NONE"===e.method){u=void 0;break}u||(u={}),u[e.keyFormat]&&(u=d1({},u)),u[e.keyFormat]=e}else x1.warn(`[Keys] Ignoring invalid EXT-X-KEY tag: "${i}"`);break}case"START":o.startTimeOffset=y3(i);break;case"MAP":{const e=new T1(i);if(Q2(o,e,["BYTERANGE","URI"]),v.duration){const i=new P1(r,t);x3(i,e,n,u),d=i,v.initSegment=d,d.rawProgramDateTime&&!v.rawProgramDateTime&&(v.rawProgramDateTime=d.rawProgramDateTime)}else{const t=v.byteRangeEndOffset;if(t){const e=v.byteRangeStartOffset;w=`${t-e}@${e}`}else w=null;x3(v,e,n,u),d=v,b=!0}break}case"SERVER-CONTROL":{const e=new T1(i);o.canBlockReload=e.bool("CAN-BLOCK-RELOAD"),o.canSkipUntil=e.optionalFloat("CAN-SKIP-UNTIL",0),o.canSkipDateRanges=o.canSkipUntil>0&&e.bool("CAN-SKIP-DATERANGES"),o.partHoldBack=e.optionalFloat("PART-HOLD-BACK",0),o.holdBack=e.optionalFloat("HOLD-BACK",0);break}case"PART-INF":{const e=new T1(i);o.partTarget=e.decimalFloatingPoint("PART-TARGET");break}case"PART":{let e=o.partList;e||(e=o.partList=[]);const n=p>0?e[e.length-1]:void 0,r=p++,a=new T1(i);Q2(o,a,["BYTERANGE","URI"]);const s=new M1(a,v,t,r,n);e.push(s),v.duration+=s.duration;break}case"PRELOAD-HINT":{const e=new T1(i);Q2(o,e,["URI"]),o.preloadHint=e;break}case"RENDITION-REPORT":{const e=new T1(i);Q2(o,e,["URI"]),o.renditionReports=o.renditionReports||[],o.renditionReports.push(e);break}default:x1.warn(`line parsed but not handled: ${l}`)}}}g&&!g.relurl?(s.pop(),f-=g.duration,o.partList&&(o.fragmentHint=g)):o.partList&&(E3(v,g),v.cc=m,o.fragmentHint=v,u&&_3(v,u,o));const E=s.length,x=s[0],_=s[E-1];if(f+=o.skippedSegments*o.targetduration,f>0&&E&&_){o.averagetargetduration=f/E;const e=_.sn;o.endSN="initSegment"!==e?e:0,o.live||(_.endList=!0),x&&(o.startCC=x.cc)}else o.endSN=0,o.startCC=0;return o.fragmentHint&&(f+=o.fragmentHint.duration),o.totalduration=f,o.endCC=m,y>0&&function(e,t){let n=e[t];for(let r=t;r--;){const t=e[r];if(!t)return;t.programDateTime=n.programDateTime-1e3*t.duration,n=t}}(s,y),o}}function v3(e,t,n){var r,i;const a=new T1(e);Q2(n,a,["KEYFORMAT","KEYFORMATVERSIONS","URI","IV","URI"]);const o=null!=(r=a.METHOD)?r:"",s=a.URI,l=a.hexadecimalInteger("IV"),c=a.KEYFORMATVERSIONS,u=null!=(i=a.KEYFORMAT)?i:"identity";s&&a.IV&&!l&&x1.error(`Invalid IV: ${a.IV}`);const d=s?g3.resolve(s,t):"",h=(c||"1").split("/").map(Number).filter(Number.isFinite);return new G2(o,d,u,h,l)}function y3(e){const t=new T1(e).decimalFloatingPoint("TIME-OFFSET");return h1(t)?t:null}function b3(e,t){let n=(e||"").split(/[ ,]+/).filter((e=>e));["video","audio","text"].forEach((e=>{const r=n.filter((t=>function(e,t){const n=t3[t];return!!n&&!!n[e.slice(0,4)]}(t,e)));r.length&&(t[`${e}Codec`]=r.join(","),n=n.filter((e=>-1===r.indexOf(e))))})),t.unknownCodecs=n}function w3(e,t,n){const r=t[n];r&&(e[n]=r)}function E3(e,t){e.rawProgramDateTime?e.programDateTime=Date.parse(e.rawProgramDateTime):null!=t&&t.programDateTime&&(e.programDateTime=t.endProgramDateTime),h1(e.programDateTime)||(e.programDateTime=null,e.rawProgramDateTime=null)}function x3(e,t,n,r){e.relurl=t.URI,t.BYTERANGE&&e.setByteRange(t.BYTERANGE),e.level=n,e.sn="initSegment",r&&(e.levelkeys=r),e.initSegment=null}function _3(e,t,n){e.levelkeys=t;const{encryptedFragments:r}=n;r.length&&r[r.length-1].levelkeys===t||!Object.keys(t).some((e=>t[e].isCommonEncryption))||r.push(e)}var A3="manifest",T3="level",S3="audioTrack",k3="subtitleTrack",C3="main",I3="audio",R3="subtitle";function D3(e){const{type:t}=e;switch(t){case S3:return I3;case k3:return R3;default:return C3}}function L3(e,t){let n=e.url;return void 0!==n&&0!==n.indexOf("data:")||(n=t.url),n}class P3{constructor(e){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.hls=e,this.registerListeners()}startLoad(e){}stopLoad(){this.destroyInternalLoaders()}registerListeners(){const{hls:e}=this;e.on(m1.MANIFEST_LOADING,this.onManifestLoading,this),e.on(m1.LEVEL_LOADING,this.onLevelLoading,this),e.on(m1.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.on(m1.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)}unregisterListeners(){const{hls:e}=this;e.off(m1.MANIFEST_LOADING,this.onManifestLoading,this),e.off(m1.LEVEL_LOADING,this.onLevelLoading,this),e.off(m1.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.off(m1.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)}createInternalLoader(e){const t=this.hls.config,n=t.pLoader,r=t.loader,i=new(n||r)(t);return this.loaders[e.type]=i,i}getInternalLoader(e){return this.loaders[e.type]}resetInternalLoader(e){this.loaders[e]&&delete this.loaders[e]}destroyInternalLoaders(){for(const e in this.loaders){const t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}}destroy(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()}onManifestLoading(e,t){const{url:n}=t;this.variableList=null,this.load({id:null,level:0,responseType:"text",type:A3,url:n,deliveryDirectives:null})}onLevelLoading(e,t){const{id:n,level:r,pathwayId:i,url:a,deliveryDirectives:o}=t;this.load({id:n,level:r,pathwayId:i,responseType:"text",type:T3,url:a,deliveryDirectives:o})}onAudioTrackLoading(e,t){const{id:n,groupId:r,url:i,deliveryDirectives:a}=t;this.load({id:n,groupId:r,level:null,responseType:"text",type:S3,url:i,deliveryDirectives:a})}onSubtitleTrackLoading(e,t){const{id:n,groupId:r,url:i,deliveryDirectives:a}=t;this.load({id:n,groupId:r,level:null,responseType:"text",type:k3,url:i,deliveryDirectives:a})}load(e){var t;const n=this.hls.config;let r,i=this.getInternalLoader(e);if(i){const t=i.context;if(t&&t.url===e.url&&t.level===e.level)return void x1.trace("[playlist-loader]: playlist request ongoing");x1.log(`[playlist-loader]: aborting previous loader for type: ${e.type}`),i.abort()}if(r=e.type===A3?n.manifestLoadPolicy.default:d1({},n.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),i=this.createInternalLoader(e),h1(null==(t=e.deliveryDirectives)?void 0:t.part)){let t;if(e.type===T3&&null!==e.level?t=this.hls.levels[e.level].details:e.type===S3&&null!==e.id?t=this.hls.audioTracks[e.id].details:e.type===k3&&null!==e.id&&(t=this.hls.subtitleTracks[e.id].details),t){const e=t.partTarget,n=t.targetduration;if(e&&n){const t=1e3*Math.max(3*e,.8*n);r=d1({},r,{maxTimeToFirstByteMs:Math.min(t,r.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min(t,r.maxTimeToFirstByteMs)})}}}const a=r.errorRetry||r.timeoutRetry||{},o={loadPolicy:r,timeout:r.maxLoadTimeMs,maxRetry:a.maxNumRetry||0,retryDelay:a.retryDelayMs||0,maxRetryDelay:a.maxRetryDelayMs||0},s={onSuccess:(e,t,n,r)=>{const i=this.getInternalLoader(n);this.resetInternalLoader(n.type);const a=e.data;0===a.indexOf("#EXTM3U")?(t.parsing.start=performance.now(),g3.isMediaPlaylist(a)?this.handleTrackOrLevelPlaylist(e,t,n,r||null,i):this.handleMasterPlaylist(e,t,n,r)):this.handleManifestParsingError(e,n,new Error("no EXTM3U delimiter"),r||null,t)},onError:(e,t,n,r)=>{this.handleNetworkError(t,n,!1,e,r)},onTimeout:(e,t,n)=>{this.handleNetworkError(t,n,!0,void 0,e)}};i.load(e,o,s)}handleMasterPlaylist(e,t,n,r){const i=this.hls,a=e.data,o=L3(e,n),s=g3.parseMasterPlaylist(a,o);if(s.playlistParsingError)return void this.handleManifestParsingError(e,n,s.playlistParsingError,r,t);const{contentSteering:l,levels:c,sessionData:u,sessionKeys:d,startTimeOffset:h,variableList:p}=s;this.variableList=p;const{AUDIO:f=[],SUBTITLES:m,"CLOSED-CAPTIONS":g}=g3.parseMasterPlaylistMedia(a,o,s);if(f.length){f.some((e=>!e.url))||!c[0].audioCodec||c[0].attrs.AUDIO||(x1.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),f.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new T1({}),bitrate:0,url:""}))}i.trigger(m1.MANIFEST_LOADED,{levels:c,audioTracks:f,subtitles:m,captions:g,contentSteering:l,url:o,stats:t,networkDetails:r,sessionData:u,sessionKeys:d,startTimeOffset:h,variableList:p})}handleTrackOrLevelPlaylist(e,t,n,r,i){const a=this.hls,{id:o,level:s,type:l}=n,c=L3(e,n),u=h1(s)?s:h1(o)?o:0,d=D3(n),h=g3.parseLevelPlaylist(e.data,c,u,d,0,this.variableList);if(l===A3){const e={attrs:new T1({}),bitrate:0,details:h,name:"",url:c};a.trigger(m1.MANIFEST_LOADED,{levels:[e],audioTracks:[],url:c,stats:t,networkDetails:r,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})}t.parsing.end=performance.now(),n.levelDetails=h,this.handlePlaylistLoaded(h,e,t,n,r,i)}handleManifestParsingError(e,t,n,r,i){this.hls.trigger(m1.ERROR,{type:g1.NETWORK_ERROR,details:v1.MANIFEST_PARSING_ERROR,fatal:t.type===A3,url:e.url,err:n,error:n,reason:n.message,response:e,context:t,networkDetails:r,stats:i})}handleNetworkError(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,a=`A network ${n?"timeout":"error"+(r?" (status "+r.code+")":"")} occurred while loading ${e.type}`;e.type===T3?a+=`: ${e.level} id: ${e.id}`:e.type!==S3&&e.type!==k3||(a+=` id: ${e.id} group-id: "${e.groupId}"`);const o=new Error(a);x1.warn(`[playlist-loader]: ${a}`);let s=v1.UNKNOWN,l=!1;const c=this.getInternalLoader(e);switch(e.type){case A3:s=n?v1.MANIFEST_LOAD_TIMEOUT:v1.MANIFEST_LOAD_ERROR,l=!0;break;case T3:s=n?v1.LEVEL_LOAD_TIMEOUT:v1.LEVEL_LOAD_ERROR,l=!1;break;case S3:s=n?v1.AUDIO_TRACK_LOAD_TIMEOUT:v1.AUDIO_TRACK_LOAD_ERROR,l=!1;break;case k3:s=n?v1.SUBTITLE_TRACK_LOAD_TIMEOUT:v1.SUBTITLE_LOAD_ERROR,l=!1}c&&this.resetInternalLoader(e.type);const u={type:g1.NETWORK_ERROR,details:s,fatal:l,url:e.url,loader:c,context:e,error:o,networkDetails:t,stats:i};if(r){const n=(null==t?void 0:t.url)||e.url;u.response=l1({url:n,data:void 0},r)}this.hls.trigger(m1.ERROR,u)}handlePlaylistLoaded(e,t,n,r,i,a){const o=this.hls,{type:s,level:l,id:c,groupId:u,deliveryDirectives:d}=r,h=L3(t,r),p=D3(r),f="number"===typeof r.level&&p===C3?l:void 0;if(!e.fragments.length){const e=new Error("No Segments found in Playlist");return void o.trigger(m1.ERROR,{type:g1.NETWORK_ERROR,details:v1.LEVEL_EMPTY_ERROR,fatal:!1,url:h,error:e,reason:e.message,response:t,context:r,level:f,parent:p,networkDetails:i,stats:n})}e.targetduration||(e.playlistParsingError=new Error("Missing Target Duration"));const m=e.playlistParsingError;if(m)o.trigger(m1.ERROR,{type:g1.NETWORK_ERROR,details:v1.LEVEL_PARSING_ERROR,fatal:!1,url:h,error:m,reason:m.message,response:t,context:r,level:f,parent:p,networkDetails:i,stats:n});else switch(e.live&&a&&(a.getCacheAge&&(e.ageHeader=a.getCacheAge()||0),a.getCacheAge&&!isNaN(e.ageHeader)||(e.ageHeader=0)),s){case A3:case T3:o.trigger(m1.LEVEL_LOADED,{details:e,level:f||0,id:c||0,stats:n,networkDetails:i,deliveryDirectives:d});break;case S3:o.trigger(m1.AUDIO_TRACK_LOADED,{details:e,id:c||0,groupId:u||"",stats:n,networkDetails:i,deliveryDirectives:d});break;case k3:o.trigger(m1.SUBTITLE_TRACK_LOADED,{details:e,id:c||0,groupId:u||"",stats:n,networkDetails:i,deliveryDirectives:d})}}}function M3(e,t){let n;try{n=new Event("addtrack")}catch(r){n=document.createEvent("Event"),n.initEvent("addtrack",!1,!1)}n.track=e,t.dispatchEvent(n)}function N3(e,t){const n=e.mode;if("disabled"===n&&(e.mode="hidden"),e.cues&&!e.cues.getCueById(t.id))try{if(e.addCue(t),!e.cues.getCueById(t.id))throw new Error(`addCue is failed for: ${t}`)}catch(r){x1.debug(`[texttrack-utils]: ${r}`);try{const n=new self.TextTrackCue(t.startTime,t.endTime,t.text);n.id=t.id,e.addCue(n)}catch(i){x1.debug(`[texttrack-utils]: Legacy TextTrackCue fallback failed: ${i}`)}}"disabled"===n&&(e.mode=n)}function O3(e){const t=e.mode;if("disabled"===t&&(e.mode="hidden"),e.cues)for(let n=e.cues.length;n--;)e.removeCue(e.cues[n]);"disabled"===t&&(e.mode=t)}function j3(e,t,n,r){const i=e.mode;if("disabled"===i&&(e.mode="hidden"),e.cues&&e.cues.length>0){const i=function(e,t,n){const r=[],i=function(e,t){if(t<e[0].startTime)return 0;const n=e.length-1;if(t>e[n].endTime)return-1;let r=0,i=n;for(;r<=i;){const a=Math.floor((i+r)/2);if(t<e[a].startTime)i=a-1;else{if(!(t>e[a].startTime&&r<n))return a;r=a+1}}return e[r].startTime-t<t-e[i].startTime?r:i}(e,t);if(i>-1)for(let a=i,o=e.length;a<o;a++){const i=e[a];if(i.startTime>=t&&i.endTime<=n)r.push(i);else if(i.startTime>n)return r}return r}(e.cues,t,n);for(let t=0;t<i.length;t++)r&&!r(i[t])||e.removeCue(i[t])}"disabled"===i&&(e.mode=i)}function F3(e){const t=[];for(let n=0;n<e.length;n++){const r=e[n];"subtitles"!==r.kind&&"captions"!==r.kind||!r.label||t.push(e[n])}return t}var U3="org.id3",B3="com.apple.quicktime.HLS",$3="https://aomedia.org/emsg/ID3";function V3(){if("undefined"!==typeof self)return self.VTTCue||self.TextTrackCue}function W3(e,t,n,r,i){let a=new e(t,n,"");try{a.value=r,i&&(a.type=i)}catch(Q_){a=new e(t,n,JSON.stringify(i?l1({type:i},r):r))}return a}const z3=(()=>{const e=V3();try{e&&new e(0,Number.POSITIVE_INFINITY,"")}catch(Q_){return Number.MAX_VALUE}return Number.POSITIVE_INFINITY})();function H3(e,t){return e.getTime()/1e3-t}class q3{constructor(e){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=e,this._registerListeners()}destroy(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=null}_registerListeners(){const{hls:e}=this;e.on(m1.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(m1.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(m1.MANIFEST_LOADING,this.onManifestLoading,this),e.on(m1.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.on(m1.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(m1.LEVEL_UPDATED,this.onLevelUpdated,this)}_unregisterListeners(){const{hls:e}=this;e.off(m1.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(m1.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(m1.MANIFEST_LOADING,this.onManifestLoading,this),e.off(m1.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.off(m1.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(m1.LEVEL_UPDATED,this.onLevelUpdated,this)}onMediaAttached(e,t){this.media=t.media}onMediaDetaching(){this.id3Track&&(O3(this.id3Track),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={})}onManifestLoading(){this.dateRangeCuesAppended={}}createTrack(e){const t=this.getID3Track(e.textTracks);return t.mode="hidden",t}getID3Track(e){if(this.media){for(let t=0;t<e.length;t++){const n=e[t];if("metadata"===n.kind&&"id3"===n.label)return M3(n,this.media),n}return this.media.addTextTrack("metadata","id3")}}onFragParsingMetadata(e,t){if(!this.media)return;const{hls:{config:{enableEmsgMetadataCues:n,enableID3MetadataCues:r}}}=this;if(!n&&!r)return;const{samples:i}=t;this.id3Track||(this.id3Track=this.createTrack(this.media));const a=V3();if(a)for(let o=0;o<i.length;o++){const e=i[o].type;if(e===$3&&!n||!r)continue;const t=d2(i[o].data);if(t){const n=i[o].pts;let r=n+i[o].duration;r>z3&&(r=z3);r-n<=0&&(r=n+.25);for(let i=0;i<t.length;i++){const o=t[i];if(!c2(o)){this.updateId3CueEnds(n,e);const t=W3(a,n,r,o,e);t&&this.id3Track.addCue(t)}}}}}updateId3CueEnds(e,t){var n;const r=null==(n=this.id3Track)?void 0:n.cues;if(r)for(let i=r.length;i--;){const n=r[i];n.type===t&&n.startTime<e&&n.endTime===z3&&(n.endTime=e)}}onBufferFlushing(e,t){let{startOffset:n,endOffset:r,type:i}=t;const{id3Track:a,hls:o}=this;if(!o)return;const{config:{enableEmsgMetadataCues:s,enableID3MetadataCues:l}}=o;if(a&&(s||l)){let e;e="audio"===i?e=>e.type===U3&&l:"video"===i?e=>e.type===$3&&s:e=>e.type===U3&&l||e.type===$3&&s,j3(a,n,r,e)}}onLevelUpdated(e,t){let{details:n}=t;if(!this.media||!n.hasProgramDateTime||!this.hls.config.enableDateRangeMetadataCues)return;const{dateRangeCuesAppended:r,id3Track:i}=this,{dateRanges:a}=n,o=Object.keys(a);if(i){const e=Object.keys(r).filter((e=>!o.includes(e)));for(let t=e.length;t--;){const n=e[t];Object.keys(r[n].cues).forEach((e=>{i.removeCue(r[n].cues[e])})),delete r[n]}}const s=n.fragments[n.fragments.length-1];if(0===o.length||!h1(null==s?void 0:s.programDateTime))return;this.id3Track||(this.id3Track=this.createTrack(this.media));const l=s.programDateTime/1e3-s.start,c=V3();for(let h=0;h<o.length;h++){const e=o[h],t=a[e],n=H3(t.startDate,l),i=r[e],s=(null==i?void 0:i.cues)||{};let p=(null==i?void 0:i.durationKnown)||!1,f=z3;const m=t.endDate;if(m)f=H3(m,l),p=!0;else if(t.endOnNext&&!p){const e=o.reduce(((e,n)=>{if(n!==t.id){const r=a[n];if(r.class===t.class&&r.startDate>t.startDate&&(!e||t.startDate<e.startDate))return r}return e}),null);e&&(f=H3(e.startDate,l),p=!0)}const g=Object.keys(t.attr);for(let r=0;r<g.length;r++){const a=g[r];if("ID"===(d=a)||"CLASS"===d||"START-DATE"===d||"DURATION"===d||"END-DATE"===d||"END-ON-NEXT"===d)continue;const o=s[a];if(o)p&&!i.durationKnown&&(o.endTime=f);else if(c){let r=t.attr[a];S1(a)&&(u=r,r=Uint8Array.from(u.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer);const i=W3(c,n,f,{key:a,data:r},B3);i&&(i.id=e,this.id3Track.addCue(i),s[a]=i)}}r[e]={cues:s,dateRange:t,durationKnown:p}}var u,d}}class G3{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.levelDetails=null,this.currentTime=0,this.stallCount=0,this._latency=null,this.timeupdateHandler=()=>this.timeupdate(),this.hls=e,this.config=e.config,this.registerListeners()}get latency(){return this._latency||0}get maxLatency(){const{config:e,levelDetails:t}=this;return void 0!==e.liveMaxLatencyDuration?e.liveMaxLatencyDuration:t?e.liveMaxLatencyDurationCount*t.targetduration:0}get targetLatency(){const{levelDetails:e}=this;if(null===e)return null;const{holdBack:t,partHoldBack:n,targetduration:r}=e,{liveSyncDuration:i,liveSyncDurationCount:a,lowLatencyMode:o}=this.config,s=this.hls.userConfig;let l=o&&n||t;(s.liveSyncDuration||s.liveSyncDurationCount||0===l)&&(l=void 0!==i?i:a*r);const c=r;return l+Math.min(1*this.stallCount,c)}get liveSyncPosition(){const e=this.estimateLiveEdge(),t=this.targetLatency,n=this.levelDetails;if(null===e||null===t||null===n)return null;const r=n.edge,i=e-t-this.edgeStalled,a=r-n.totalduration,o=r-(this.config.lowLatencyMode&&n.partTarget||n.targetduration);return Math.min(Math.max(a,i),o)}get drift(){const{levelDetails:e}=this;return null===e?1:e.drift}get edgeStalled(){const{levelDetails:e}=this;if(null===e)return 0;const t=3*(this.config.lowLatencyMode&&e.partTarget||e.targetduration);return Math.max(e.age-t,0)}get forwardBufferLength(){const{media:e,levelDetails:t}=this;if(!e||!t)return 0;const n=e.buffered.length;return(n?e.buffered.end(n-1):t.edge)-this.currentTime}destroy(){this.unregisterListeners(),this.onMediaDetaching(),this.levelDetails=null,this.hls=this.timeupdateHandler=null}registerListeners(){this.hls.on(m1.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(m1.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.on(m1.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(m1.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.on(m1.ERROR,this.onError,this)}unregisterListeners(){this.hls.off(m1.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(m1.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.off(m1.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(m1.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.off(m1.ERROR,this.onError,this)}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("timeupdate",this.timeupdateHandler)}onMediaDetaching(){this.media&&(this.media.removeEventListener("timeupdate",this.timeupdateHandler),this.media=null)}onManifestLoading(){this.levelDetails=null,this._latency=null,this.stallCount=0}onLevelUpdated(e,t){let{details:n}=t;this.levelDetails=n,n.advanced&&this.timeupdate(),!n.live&&this.media&&this.media.removeEventListener("timeupdate",this.timeupdateHandler)}onError(e,t){var n;t.details===v1.BUFFER_STALLED_ERROR&&(this.stallCount++,null!=(n=this.levelDetails)&&n.live&&x1.warn("[playback-rate-controller]: Stall detected, adjusting target latency"))}timeupdate(){const{media:e,levelDetails:t}=this;if(!e||!t)return;this.currentTime=e.currentTime;const n=this.computeLatency();if(null===n)return;this._latency=n;const{lowLatencyMode:r,maxLiveSyncPlaybackRate:i}=this.config;if(!r||1===i||!t.live)return;const a=this.targetLatency;if(null===a)return;const o=n-a;if(o<Math.min(this.maxLatency,a+t.targetduration)&&o>.05&&this.forwardBufferLength>1){const t=Math.min(2,Math.max(1,i)),n=Math.round(2/(1+Math.exp(-.75*o-this.edgeStalled))*20)/20;e.playbackRate=Math.min(t,Math.max(1,n))}else 1!==e.playbackRate&&0!==e.playbackRate&&(e.playbackRate=1)}estimateLiveEdge(){const{levelDetails:e}=this;return null===e?null:e.edge+e.age}computeLatency(){const e=this.estimateLiveEdge();return null===e?null:e-this.currentTime}}const K3=["NONE","TYPE-0","TYPE-1",null];const Y3=["SDR","PQ","HLG"];var Q3="",X3="YES",Z3="v2";function J3(e){const{canSkipUntil:t,canSkipDateRanges:n,age:r}=e;return t&&r<t/2?n?Z3:X3:Q3}class e4{constructor(e,t,n){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=e,this.part=t,this.skip=n}addDirectives(e){const t=new self.URL(e);return void 0!==this.msn&&t.searchParams.set("_HLS_msn",this.msn.toString()),void 0!==this.part&&t.searchParams.set("_HLS_part",this.part.toString()),this.skip&&t.searchParams.set("_HLS_skip",this.skip),t.href}}class t4{constructor(e){this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.url=void 0,this.frameRate=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.videoCodec=void 0,this.width=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.supportedPromise=void 0,this.supportedResult=void 0,this._avgBitrate=0,this._audioGroups=void 0,this._subtitleGroups=void 0,this._urlId=0,this.url=[e.url],this._attrs=[e.attrs],this.bitrate=e.bitrate,e.details&&(this.details=e.details),this.id=e.id||0,this.name=e.name,this.width=e.width||0,this.height=e.height||0,this.frameRate=e.attrs.optionalFloat("FRAME-RATE",0),this._avgBitrate=e.attrs.decimalInteger("AVERAGE-BANDWIDTH"),this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec,this.codecSet=[e.videoCodec,e.audioCodec].filter((e=>!!e)).map((e=>e.substring(0,4))).join(","),this.addGroupId("audio",e.attrs.AUDIO),this.addGroupId("text",e.attrs.SUBTITLES)}get maxBitrate(){return Math.max(this.realBitrate,this.bitrate)}get averageBitrate(){return this._avgBitrate||this.realBitrate||this.bitrate}get attrs(){return this._attrs[0]}get codecs(){return this.attrs.CODECS||""}get pathwayId(){return this.attrs["PATHWAY-ID"]||"."}get videoRange(){return this.attrs["VIDEO-RANGE"]||"SDR"}get score(){return this.attrs.optionalFloat("SCORE",0)}get uri(){return this.url[0]||""}hasAudioGroup(e){return n4(this._audioGroups,e)}hasSubtitleGroup(e){return n4(this._subtitleGroups,e)}get audioGroups(){return this._audioGroups}get subtitleGroups(){return this._subtitleGroups}addGroupId(e,t){if(t)if("audio"===e){let e=this._audioGroups;e||(e=this._audioGroups=[]),-1===e.indexOf(t)&&e.push(t)}else if("text"===e){let e=this._subtitleGroups;e||(e=this._subtitleGroups=[]),-1===e.indexOf(t)&&e.push(t)}}get urlId(){return 0}set urlId(e){}get audioGroupIds(){return this.audioGroups?[this.audioGroupId]:void 0}get textGroupIds(){return this.subtitleGroups?[this.textGroupId]:void 0}get audioGroupId(){var e;return null==(e=this.audioGroups)?void 0:e[0]}get textGroupId(){var e;return null==(e=this.subtitleGroups)?void 0:e[0]}addFallback(){}}function n4(e,t){return!(!t||!e)&&-1!==e.indexOf(t)}function r4(e,t){const n=t.startPTS;if(h1(n)){let r,i=0;t.sn>e.sn?(i=n-e.start,r=e):(i=e.start-n,r=t),r.duration!==i&&(r.duration=i)}else if(t.sn>e.sn){e.cc===t.cc&&e.minEndPTS?t.start=e.start+(e.minEndPTS-e.start):t.start=e.start+e.duration}else t.start=Math.max(e.start-t.duration,0)}function i4(e,t,n,r,i,a){r-n<=0&&(x1.warn("Fragment should have a positive duration",t),r=n+t.duration,a=i+t.duration);let o=n,s=r;const l=t.startPTS,c=t.endPTS;if(h1(l)){const e=Math.abs(l-n);h1(t.deltaPTS)?t.deltaPTS=Math.max(e,t.deltaPTS):t.deltaPTS=e,o=Math.max(n,l),n=Math.min(n,l),i=Math.min(i,t.startDTS),s=Math.min(r,c),r=Math.max(r,c),a=Math.max(a,t.endDTS)}const u=n-t.start;0!==t.start&&(t.start=n),t.duration=r-t.start,t.startPTS=n,t.maxStartPTS=o,t.startDTS=i,t.endPTS=r,t.minEndPTS=s,t.endDTS=a;const d=t.sn;if(!e||d<e.startSN||d>e.endSN)return 0;let h;const p=d-e.startSN,f=e.fragments;for(f[p]=t,h=p;h>0;h--)r4(f[h],f[h-1]);for(h=p;h<f.length-1;h++)r4(f[h],f[h+1]);return e.fragmentHint&&r4(f[f.length-1],e.fragmentHint),e.PTSKnown=e.alignedSliding=!0,u}function a4(e,t){let n=null;const r=e.fragments;for(let s=r.length-1;s>=0;s--){const e=r[s].initSegment;if(e){n=e;break}}let i;e.fragmentHint&&delete e.fragmentHint.endPTS,function(e,t,n){const r=t.skippedSegments,i=Math.max(e.startSN,t.startSN)-t.startSN,a=(e.fragmentHint?1:0)+(r?t.endSN:Math.min(e.endSN,t.endSN))-t.startSN,o=t.startSN-e.startSN,s=t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments,l=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments;for(let c=i;c<=a;c++){const e=l[o+c];let i=s[c];r&&!i&&c<r&&(i=t.fragments[c]=e),e&&i&&n(e,i,c,s)}}(e,t,((e,r,a,o)=>{if(t.skippedSegments&&r.cc!==e.cc){const t=e.cc-r.cc;for(let e=a;e<o.length;e++)o[e].cc+=t}h1(e.startPTS)&&h1(e.endPTS)&&(r.start=r.startPTS=e.startPTS,r.startDTS=e.startDTS,r.maxStartPTS=e.maxStartPTS,r.endPTS=e.endPTS,r.endDTS=e.endDTS,r.minEndPTS=e.minEndPTS,r.duration=e.endPTS-e.startPTS,r.duration&&(i=r),t.PTSKnown=t.alignedSliding=!0),r.elementaryStreams=e.elementaryStreams,r.loader=e.loader,r.stats=e.stats,e.initSegment&&(r.initSegment=e.initSegment,n=e.initSegment)}));const a=t.fragments;if(n){(t.fragmentHint?a.concat(t.fragmentHint):a).forEach((e=>{var t;!e||e.initSegment&&e.initSegment.relurl!==(null==(t=n)?void 0:t.relurl)||(e.initSegment=n)}))}if(t.skippedSegments){if(t.deltaUpdateFailed=a.some((e=>!e)),t.deltaUpdateFailed){x1.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(let e=t.skippedSegments;e--;)a.shift();t.startSN=a[0].sn}else t.canSkipDateRanges&&(t.dateRanges=function(e,t,n){const r=d1({},e);n&&n.forEach((e=>{delete r[e]}));return Object.keys(t).forEach((e=>{const n=new k1(t[e].attr,r[e]);n.isValid?r[e]=n:x1.warn(`Ignoring invalid Playlist Delta Update DATERANGE tag: "${JSON.stringify(t[e].attr)}"`)})),r}(e.dateRanges,t.dateRanges,t.recentlyRemovedDateranges));t.startCC=t.fragments[0].cc,t.endCC=a[a.length-1].cc}!function(e,t,n){if(e&&t){let r=0;for(let i=0,a=e.length;i<=a;i++){const a=e[i],o=t[i+r];a&&o&&a.index===o.index&&a.fragment.sn===o.fragment.sn?n(a,o):r--}}}(e.partList,t.partList,((e,t)=>{t.elementaryStreams=e.elementaryStreams,t.stats=e.stats})),i?i4(t,i,i.startPTS,i.endPTS,i.startDTS,i.endDTS):o4(e,t),a.length&&(t.totalduration=t.edge-a[0].start),t.driftStartTime=e.driftStartTime,t.driftStart=e.driftStart;const o=t.advancedDateTime;if(t.advanced&&o){const e=t.edge;t.driftStart||(t.driftStartTime=o,t.driftStart=e),t.driftEndTime=o,t.driftEnd=e}else t.driftEndTime=e.driftEndTime,t.driftEnd=e.driftEnd,t.advancedDateTime=e.advancedDateTime}function o4(e,t){const n=t.startSN+t.skippedSegments-e.startSN,r=e.fragments;n<0||n>=r.length||s4(t,r[n].start)}function s4(e,t){if(t){const n=e.fragments;for(let r=e.skippedSegments;r<n.length;r++)n[r].start+=t;e.fragmentHint&&(e.fragmentHint.start+=t)}}function l4(e,t,n){var r;return null!=e&&e.details?c4(null==(r=e.details)?void 0:r.partList,t,n):null}function c4(e,t,n){if(e)for(let r=e.length;r--;){const i=e[r];if(i.index===n&&i.fragment.sn===t)return i}return null}function u4(e){e.forEach(((e,t)=>{const{details:n}=e;null!=n&&n.fragments&&n.fragments.forEach((e=>{e.level=t}))}))}function d4(e){switch(e.details){case v1.FRAG_LOAD_TIMEOUT:case v1.KEY_LOAD_TIMEOUT:case v1.LEVEL_LOAD_TIMEOUT:case v1.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function h4(e,t){const n=d4(t);return e.default[(n?"timeout":"error")+"Retry"]}function p4(e,t){const n="linear"===e.backoff?1:Math.pow(2,t);return Math.min(n*e.retryDelayMs,e.maxRetryDelayMs)}function f4(e){return l1(l1({},e),{errorRetry:null,timeoutRetry:null})}function m4(e,t,n,r){if(!e)return!1;const i=null==r?void 0:r.code,a=t<e.maxNumRetry&&(function(e){return 0===e&&!1===navigator.onLine||!!e&&(e<400||e>499)}(i)||!!n);return e.shouldRetry?e.shouldRetry(e,t,n,r,a):a}const g4=function(e,t){let n=0,r=e.length-1,i=null,a=null;for(;n<=r;){i=(n+r)/2|0,a=e[i];const o=t(a);if(o>0)n=i+1;else{if(!(o<0))return a;r=i-1}}return null};function v4(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.005,a=null;if(e){a=t[e.sn-t[0].sn+1]||null;const r=e.endDTS-n;r>0&&r<15e-7&&(n+=15e-7)}else 0===n&&0===t[0].start&&(a=t[0]);if(a&&((!e||e.level===a.level)&&0===y4(n,r,a)||function(e,t,n){if(t&&0===t.start&&t.level<e.level&&(t.endPTS||0)>0){const r=t.tagList.reduce(((e,t)=>("INF"===t[0]&&(e+=parseFloat(t[1])),e)),n);return e.start<=r}return!1}(a,e,Math.min(i,r))))return a;const o=g4(t,y4.bind(null,n,r));return!o||o===e&&a?a:o}function y4(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;if(n.start<=e&&n.start+n.duration>e)return 0;const r=Math.min(t,n.duration+(n.deltaPTS?n.deltaPTS:0));return n.start+n.duration-r<=e?1:n.start-r>e&&n.start?-1:0}function b4(e,t,n){const r=1e3*Math.min(t,n.duration+(n.deltaPTS?n.deltaPTS:0));return(n.endProgramDateTime||0)-r>e}var w4=0,E4=2,x4=3,_4=5,A4=0,T4=1,S4=2;class k4{constructor(e,t){this.hls=void 0,this.timer=-1,this.requestScheduled=-1,this.canLoad=!1,this.log=void 0,this.warn=void 0,this.log=x1.log.bind(x1,`${t}:`),this.warn=x1.warn.bind(x1,`${t}:`),this.hls=e}destroy(){this.clearTimer(),this.hls=this.log=this.warn=null}clearTimer(){-1!==this.timer&&(self.clearTimeout(this.timer),this.timer=-1)}startLoad(){this.canLoad=!0,this.requestScheduled=-1,this.loadPlaylist()}stopLoad(){this.canLoad=!1,this.clearTimer()}switchParams(e,t,n){const r=null==t?void 0:t.renditionReports;if(r){let i=-1;for(let n=0;n<r.length;n++){const a=r[n];let o;try{o=new self.URL(a.URI,t.url).href}catch(Rb){x1.warn(`Could not construct new URL for Rendition Report: ${Rb}`),o=a.URI||""}if(o===e){i=n;break}o===e.substring(0,o.length)&&(i=n)}if(-1!==i){const e=r[i],a=parseInt(e["LAST-MSN"])||(null==t?void 0:t.lastPartSn);let o=parseInt(e["LAST-PART"])||(null==t?void 0:t.lastPartIndex);if(this.hls.config.lowLatencyMode){const e=Math.min(t.age-t.partTarget,t.targetduration);o>=0&&e>t.partTarget&&(o+=1)}const s=n&&J3(n);return new e4(a,o>=0?o:void 0,s)}}}loadPlaylist(e){-1===this.requestScheduled&&(this.requestScheduled=self.performance.now())}shouldLoadPlaylist(e){return this.canLoad&&!!e&&!!e.url&&(!e.details||e.details.live)}shouldReloadPlaylist(e){return-1===this.timer&&-1===this.requestScheduled&&this.shouldLoadPlaylist(e)}playlistLoaded(e,t,n){const{details:r,stats:i}=t,a=self.performance.now(),o=i.loading.first?Math.max(0,a-i.loading.first):0;if(r.advancedDateTime=Date.now()-o,r.live||null!=n&&n.live){if(r.reloaded(n),n&&this.log(`live playlist ${e} ${r.advanced?"REFRESHED "+r.lastPartSn+"-"+r.lastPartIndex:r.updated?"UPDATED":"MISSED"}`),n&&r.fragments.length>0&&a4(n,r),!this.canLoad||!r.live)return;let o,s,l;if(r.canBlockReload&&r.endSN&&r.advanced){const e=this.hls.config.lowLatencyMode,i=r.lastPartSn,a=r.endSN,c=r.lastPartIndex,u=i===a;-1!==c?(s=u?a+1:i,l=u?e?0:c:c+1):s=a+1;const d=r.age,h=d+r.ageHeader;let p=Math.min(h-r.partTarget,1.5*r.targetduration);if(p>0){if(n&&p>n.tuneInGoal)this.warn(`CDN Tune-in goal increased from: ${n.tuneInGoal} to: ${p} with playlist age: ${r.age}`),p=0;else{const e=Math.floor(p/r.targetduration);if(s+=e,void 0!==l){l+=Math.round(p%r.targetduration/r.partTarget)}this.log(`CDN Tune-in age: ${r.ageHeader}s last advanced ${d.toFixed(2)}s goal: ${p} skip sn ${e} to part ${l}`)}r.tuneInGoal=p}if(o=this.getDeliveryDirectives(r,t.deliveryDirectives,s,l),e||!u)return void this.loadPlaylist(o)}else(r.canBlockReload||r.canSkipUntil)&&(o=this.getDeliveryDirectives(r,t.deliveryDirectives,s,l));const c=this.hls.mainForwardBufferInfo,u=c?c.end-c.len:0,d=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,n=1e3*e.targetduration;if(e.updated){const r=e.fragments,i=4;if(r.length&&n*i>t){const e=1e3*r[r.length-1].duration;e<n&&(n=e)}}else n/=2;return Math.round(n)}(r,1e3*(r.edge-u));r.updated&&a>this.requestScheduled+d&&(this.requestScheduled=i.loading.start),void 0!==s&&r.canBlockReload?this.requestScheduled=i.loading.first+d-(1e3*r.partTarget||1e3):-1===this.requestScheduled||this.requestScheduled+d<a?this.requestScheduled=a:this.requestScheduled-a<=0&&(this.requestScheduled+=d);let h=this.requestScheduled-a;h=Math.max(0,h),this.log(`reload live playlist ${e} in ${Math.round(h)} ms`),this.timer=self.setTimeout((()=>this.loadPlaylist(o)),h)}else this.clearTimer()}getDeliveryDirectives(e,t,n,r){let i=J3(e);return null!=t&&t.skip&&e.deltaUpdateFailed&&(n=t.msn,r=t.part,i=Q3),new e4(n,r,i)}checkRetry(e){const t=e.details,n=d4(e),r=e.errorAction,{action:i,retryCount:a=0,retryConfig:o}=r||{},s=!!r&&!!o&&(i===_4||!r.resolved&&i===E4);if(s){var l;if(this.requestScheduled=-1,a>=o.maxNumRetry)return!1;if(n&&null!=(l=e.context)&&l.deliveryDirectives)this.warn(`Retrying playlist loading ${a+1}/${o.maxNumRetry} after "${t}" without delivery-directives`),this.loadPlaylist();else{const e=p4(o,a);this.timer=self.setTimeout((()=>this.loadPlaylist()),e),this.warn(`Retrying playlist loading ${a+1}/${o.maxNumRetry} after "${t}" in ${e}ms`)}e.levelRetry=!0,r.resolved=!0}return s}}class C4{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=e,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=t,this.totalWeight_=n}sample(e,t){const n=Math.pow(this.alpha_,e);this.estimate_=t*(1-n)+n*this.estimate_,this.totalWeight_+=e}getTotalWeight(){return this.totalWeight_}getEstimate(){if(this.alpha_){const e=1-Math.pow(this.alpha_,this.totalWeight_);if(e)return this.estimate_/e}return this.estimate_}}class I4{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=n,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new C4(e),this.fast_=new C4(t),this.defaultTTFB_=r,this.ttfb_=new C4(e)}update(e,t){const{slow_:n,fast_:r,ttfb_:i}=this;n.halfLife!==e&&(this.slow_=new C4(e,n.getEstimate(),n.getTotalWeight())),r.halfLife!==t&&(this.fast_=new C4(t,r.getEstimate(),r.getTotalWeight())),i.halfLife!==e&&(this.ttfb_=new C4(e,i.getEstimate(),i.getTotalWeight()))}sample(e,t){const n=(e=Math.max(e,this.minDelayMs_))/1e3,r=8*t/n;this.fast_.sample(n,r),this.slow_.sample(n,r)}sampleTTFB(e){const t=e/1e3,n=Math.sqrt(2)*Math.exp(-Math.pow(t,2)/2);this.ttfb_.sample(n,Math.max(e,5))}canEstimate(){return this.fast_.getTotalWeight()>=this.minWeight_}getEstimate(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}getEstimateTTFB(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_}destroy(){}}const R4={supported:!0,configurations:[],decodingInfoResults:[{supported:!0,powerEfficient:!0,smooth:!0}]},D4={};function L4(e,t,n,r,i,a){const o=e.audioCodec?e.audioGroups:null,s=null==a?void 0:a.audioCodec,l=null==a?void 0:a.channels,c=l?parseInt(l):s?1/0:2;let u=null;if(null!=o&&o.length)try{u=1===o.length&&o[0]?t.groups[o[0]].channels:o.reduce(((e,n)=>{if(n){const r=t.groups[n];if(!r)throw new Error(`Audio track group ${n} not found`);Object.keys(r.channels).forEach((t=>{e[t]=(e[t]||0)+r.channels[t]}))}return e}),{2:0})}catch(Rb){return!0}return void 0!==e.videoCodec&&(e.width>1920&&e.height>1088||e.height>1920&&e.width>1088||e.frameRate>Math.max(r,30)||"SDR"!==e.videoRange&&e.videoRange!==n||e.bitrate>Math.max(i,8e6))||!!u&&h1(c)&&Object.keys(u).some((e=>parseInt(e)>c))}function P4(e,t,n){const r=e.videoCodec,i=e.audioCodec;if(!r||!i||!n)return Promise.resolve(R4);const a={width:e.width,height:e.height,bitrate:Math.ceil(Math.max(.9*e.bitrate,e.averageBitrate)),framerate:e.frameRate||30},o=e.videoRange;"SDR"!==o&&(a.transferFunction=o.toLowerCase());const s=r.split(",").map((e=>({type:"media-source",video:l1(l1({},a),{},{contentType:i3(e,"video")})})));return i&&e.audioGroups&&e.audioGroups.forEach((e=>{var n;e&&(null==(n=t.groups[e])||n.tracks.forEach((t=>{if(t.groupId===e){const e=t.channels||"",n=parseFloat(e);h1(n)&&n>2&&s.push.apply(s,i.split(",").map((e=>({type:"media-source",audio:{contentType:i3(e,"audio"),channels:""+n}}))))}})))})),Promise.all(s.map((e=>{const t=function(e){const{audio:t,video:n}=e,r=n||t;if(r){const e=r.contentType.split('"')[1];if(n)return`r${n.height}x${n.width}f${Math.ceil(n.framerate)}${n.transferFunction||"sd"}_${e}_${Math.ceil(n.bitrate/1e5)}`;if(t)return`c${t.channels}${t.spatialRendering?"s":"n"}_${e}`}return""}(e);return D4[t]||(D4[t]=n.decodingInfo(e))}))).then((e=>({supported:!e.some((e=>!e.supported)),configurations:s,decodingInfoResults:e}))).catch((e=>({supported:!1,configurations:s,decodingInfoResults:[],error:e})))}function M4(e,t){let n=!1,r=[];return e&&(n="SDR"!==e,r=[e]),t&&(r=t.allowedVideoRanges||Y3.slice(0),n=void 0!==t.preferHDR?t.preferHDR:function(){if("function"===typeof matchMedia){const e=matchMedia("(dynamic-range: high)"),t=matchMedia("bad query");if(e.media!==t.media)return!0===e.matches}return!1}(),r=n?r.filter((e=>"SDR"!==e)):["SDR"]),{preferHDR:n,allowedVideoRanges:r}}function N4(e,t){x1.log(`[abr] start candidates with "${e}" ignored because ${t}`)}function O4(e,t,n){if("attrs"in e){const n=t.indexOf(e);if(-1!==n)return n}for(let r=0;r<t.length;r++){if(j4(e,t[r],n))return r}return-1}function j4(e,t,n){const{groupId:r,name:i,lang:a,assocLang:o,default:s}=e,l=e.forced;return(void 0===r||t.groupId===r)&&(void 0===i||t.name===i)&&(void 0===a||t.lang===a)&&(void 0===a||t.assocLang===o)&&(void 0===s||t.default===s)&&(void 0===l||t.forced===l)&&(!("characteristics"in e)||function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=e.split(","),r=t.split(",");return n.length===r.length&&!n.some((e=>-1===r.indexOf(e)))}(e.characteristics||"",t.characteristics))&&(void 0===n||n(e,t))}function F4(e,t){const{audioCodec:n,channels:r}=e;return(void 0===n||(t.audioCodec||"").substring(0,4)===n.substring(0,4))&&(void 0===r||r===(t.channels||"2"))}function U4(e,t,n){for(let r=t;r>-1;r--)if(n(e[r]))return r;for(let r=t+1;r<e.length;r++)if(n(e[r]))return r;return-1}class B4{constructor(){this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}destroy(){this.onHandlerDestroying(),this.onHandlerDestroyed()}onHandlerDestroying(){this.clearNextTick(),this.clearInterval()}onHandlerDestroyed(){}hasInterval(){return!!this._tickInterval}hasNextTick(){return!!this._tickTimer}setInterval(e){return!this._tickInterval&&(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,e),!0)}clearInterval(){return!!this._tickInterval&&(self.clearInterval(this._tickInterval),this._tickInterval=null,!0)}clearNextTick(){return!!this._tickTimer&&(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0)}tick(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)}tickImmediate(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)}doTick(){}}var $4="NOT_LOADED",V4="APPENDING",W4="PARTIAL",z4="OK";class H4{constructor(e){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=e,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(m1.BUFFER_APPENDED,this.onBufferAppended,this),e.on(m1.FRAG_BUFFERED,this.onFragBuffered,this),e.on(m1.FRAG_LOADED,this.onFragLoaded,this)}_unregisterListeners(){const{hls:e}=this;e.off(m1.BUFFER_APPENDED,this.onBufferAppended,this),e.off(m1.FRAG_BUFFERED,this.onFragBuffered,this),e.off(m1.FRAG_LOADED,this.onFragLoaded,this)}destroy(){this._unregisterListeners(),this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null}getAppendedFrag(e,t){const n=this.activePartLists[t];if(n)for(let r=n.length;r--;){const t=n[r];if(!t)break;const i=t.end;if(t.start<=e&&null!==i&&e<=i)return t}return this.getBufferedFrag(e,t)}getBufferedFrag(e,t){const{fragments:n}=this,r=Object.keys(n);for(let i=r.length;i--;){const a=n[r[i]];if((null==a?void 0:a.body.type)===t&&a.buffered){const t=a.body;if(t.start<=e&&e<=t.end)return t}}return null}detectEvictedFragments(e,t,n,r){this.timeRanges&&(this.timeRanges[e]=t);const i=(null==r?void 0:r.fragment.sn)||-1;Object.keys(this.fragments).forEach((r=>{const a=this.fragments[r];if(!a)return;if(i>=a.body.sn)return;if(!a.buffered&&!a.loaded)return void(a.body.type===n&&this.removeFragment(a.body));const o=a.range[e];o&&o.time.some((e=>{const n=!this.isTimeBuffered(e.startPTS,e.endPTS,t);return n&&this.removeFragment(a.body),n}))}))}detectPartialFragments(e){const t=this.timeRanges,{frag:n,part:r}=e;if(!t||"initSegment"===n.sn)return;const i=G4(n),a=this.fragments[i];if(!a||a.buffered&&n.gap)return;const o=!n.relurl;if(Object.keys(t).forEach((e=>{const i=n.elementaryStreams[e];if(!i)return;const s=t[e],l=o||!0===i.partial;a.range[e]=this.getBufferedTimes(n,r,l,s)})),a.loaded=null,Object.keys(a.range).length){a.buffered=!0;(a.body.endList=n.endList||a.body.endList)&&(this.endListFragments[a.body.type]=a),q4(a)||this.removeParts(n.sn-1,n.type)}else this.removeFragment(a.body)}removeParts(e,t){const n=this.activePartLists[t];n&&(this.activePartLists[t]=n.filter((t=>t.fragment.sn>=e)))}fragBuffered(e,t){const n=G4(e);let r=this.fragments[n];!r&&t&&(r=this.fragments[n]={body:e,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},e.gap&&(this.hasGaps=!0)),r&&(r.loaded=null,r.buffered=!0)}getBufferedTimes(e,t,n,r){const i={time:[],partial:n},a=e.start,o=e.end,s=e.minEndPTS||o,l=e.maxStartPTS||a;for(let c=0;c<r.length;c++){const e=r.start(c)-this.bufferPadding,t=r.end(c)+this.bufferPadding;if(l>=e&&s<=t){i.time.push({startPTS:Math.max(a,r.start(c)),endPTS:Math.min(o,r.end(c))});break}if(a<t&&o>e){const e=Math.max(a,r.start(c)),t=Math.min(o,r.end(c));t>e&&(i.partial=!0,i.time.push({startPTS:e,endPTS:t}))}else if(o<=e)break}return i}getPartialFragment(e){let t,n,r,i=null,a=0;const{bufferPadding:o,fragments:s}=this;return Object.keys(s).forEach((l=>{const c=s[l];c&&q4(c)&&(n=c.body.start-o,r=c.body.end+o,e>=n&&e<=r&&(t=Math.min(e-n,r-e),a<=t&&(i=c.body,a=t)))})),i}isEndListAppended(e){const t=this.endListFragments[e];return void 0!==t&&(t.buffered||q4(t))}getState(e){const t=G4(e),n=this.fragments[t];return n?n.buffered?q4(n)?W4:z4:V4:$4}isTimeBuffered(e,t,n){let r,i;for(let a=0;a<n.length;a++){if(r=n.start(a)-this.bufferPadding,i=n.end(a)+this.bufferPadding,e>=r&&t<=i)return!0;if(t<=r)return!1}return!1}onFragLoaded(e,t){const{frag:n,part:r}=t;if("initSegment"===n.sn||n.bitrateTest)return;const i=r?null:t,a=G4(n);this.fragments[a]={body:n,appendedPTS:null,loaded:i,buffered:!1,range:Object.create(null)}}onBufferAppended(e,t){const{frag:n,part:r,timeRanges:i}=t;if("initSegment"===n.sn)return;const a=n.type;if(r){let e=this.activePartLists[a];e||(this.activePartLists[a]=e=[]),e.push(r)}this.timeRanges=i,Object.keys(i).forEach((e=>{const t=i[e];this.detectEvictedFragments(e,t,a,r)}))}onFragBuffered(e,t){this.detectPartialFragments(t)}hasFragment(e){const t=G4(e);return!!this.fragments[t]}hasParts(e){var t;return!(null==(t=this.activePartLists[e])||!t.length)}removeFragmentsInRange(e,t,n,r,i){r&&!this.hasGaps||Object.keys(this.fragments).forEach((a=>{const o=this.fragments[a];if(!o)return;const s=o.body;s.type!==n||r&&!s.gap||s.start<t&&s.end>e&&(o.buffered||i)&&this.removeFragment(s)}))}removeFragment(e){const t=G4(e);e.stats.loaded=0,e.clearElementaryStreamInfo();const n=this.activePartLists[e.type];if(n){const t=e.sn;this.activePartLists[e.type]=n.filter((e=>e.fragment.sn!==t))}delete this.fragments[t],e.endList&&delete this.endListFragments[e.type]}removeAllFragments(){this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1}}function q4(e){var t,n,r;return e.buffered&&(e.body.gap||(null==(t=e.range.video)?void 0:t.partial)||(null==(n=e.range.audio)?void 0:n.partial)||(null==(r=e.range.audiovideo)?void 0:r.partial))}function G4(e){return`${e.type}_${e.level}_${e.sn}`}const K4={length:0,start:()=>0,end:()=>0};class Y4{static isBuffered(e,t){try{if(e){const n=Y4.getBuffered(e);for(let e=0;e<n.length;e++)if(t>=n.start(e)&&t<=n.end(e))return!0}}catch(Rb){}return!1}static bufferInfo(e,t,n){try{if(e){const r=Y4.getBuffered(e),i=[];let a;for(a=0;a<r.length;a++)i.push({start:r.start(a),end:r.end(a)});return this.bufferedInfo(i,t,n)}}catch(Rb){}return{len:0,start:t,end:t,nextStart:void 0}}static bufferedInfo(e,t,n){t=Math.max(0,t),e.sort((function(e,t){const n=e.start-t.start;return n||t.end-e.end}));let r=[];if(n)for(let l=0;l<e.length;l++){const t=r.length;if(t){const i=r[t-1].end;e[l].start-i<n?e[l].end>i&&(r[t-1].end=e[l].end):r.push(e[l])}else r.push(e[l])}else r=e;let i,a=0,o=t,s=t;for(let l=0;l<r.length;l++){const e=r[l].start,c=r[l].end;if(t+n>=e&&t<c)o=e,s=c,a=s-t;else if(t+n<e){i=e;break}}return{len:a,start:o||0,end:s||0,nextStart:i}}static getBuffered(e){try{return e.buffered}catch(Q_){return x1.log("failed to get media.buffered",Q_),K4}}}class Q4{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1,a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing={start:0,executeStart:0,executeEnd:0,end:0},this.buffering={audio:{start:0,executeStart:0,executeEnd:0,end:0},video:{start:0,executeStart:0,executeEnd:0,end:0},audiovideo:{start:0,executeStart:0,executeEnd:0,end:0}},this.level=e,this.sn=t,this.id=n,this.size=r,this.part=i,this.partial=a}}function X4(e,t){for(let r=0,i=e.length;r<i;r++){var n;if((null==(n=e[r])?void 0:n.cc)===t)return e[r]}return null}function Z4(e,t){if(e){const n=e.start+t;e.start=e.startPTS=n,e.endPTS=n+e.duration}}function J4(e,t){const n=t.fragments;for(let r=0,i=n.length;r<i;r++)Z4(n[r],e);t.fragmentHint&&Z4(t.fragmentHint,e),t.alignedSliding=!0}function e5(e,t,n){t&&(!function(e,t,n){if(function(e,t,n){return!(!t||!(n.endCC>n.startCC||e&&e.cc<n.startCC))}(e,n,t)){const e=function(e,t){const n=e.fragments,r=t.fragments;if(!r.length||!n.length)return void x1.log("No fragments to align");const i=X4(n,r[0].cc);if(i&&(!i||i.startPTS))return i;x1.log("No frag in previous level to align on")}(n,t);e&&h1(e.start)&&(x1.log(`Adjusting PTS using last level due to CC increase within current level ${t.url}`),J4(e.start,t))}}(e,n,t),!n.alignedSliding&&t&&t5(n,t),n.alignedSliding||!t||n.skippedSegments||o4(t,n))}function t5(e,t){if(!e.hasProgramDateTime||!t.hasProgramDateTime)return;const n=e.fragments,r=t.fragments;if(!n.length||!r.length)return;let i,a;const o=Math.min(t.endCC,e.endCC);t.startCC<o&&e.startCC<o&&(i=X4(r,o),a=X4(n,o)),i&&a||(i=r[Math.floor(r.length/2)],a=X4(n,i.cc)||n[Math.floor(n.length/2)]);const s=i.programDateTime,l=a.programDateTime;if(!s||!l)return;J4((l-s)/1e3-(a.start-i.start),e)}const n5=Math.pow(2,17);class r5{constructor(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e}destroy(){this.loader&&(this.loader.destroy(),this.loader=null)}abort(){this.loader&&this.loader.abort()}load(e,t){const n=e.url;if(!n)return Promise.reject(new o5({type:g1.NETWORK_ERROR,details:v1.FRAG_LOAD_ERROR,fatal:!1,frag:e,error:new Error("Fragment does not have a "+(n?"part list":"url")),networkDetails:null}));this.abort();const r=this.config,i=r.fLoader,a=r.loader;return new Promise(((o,s)=>{if(this.loader&&this.loader.destroy(),e.gap){if(e.tagList.some((e=>"GAP"===e[0])))return void s(a5(e));e.gap=!1}const l=this.loader=e.loader=i?new i(r):new a(r),c=i5(e),u=f4(r.fragLoadPolicy.default),d={loadPolicy:u,timeout:u.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:"initSegment"===e.sn?1/0:n5};e.stats=l.stats,l.load(c,d,{onSuccess:(t,n,r,i)=>{this.resetLoader(e,l);let a=t.data;r.resetIV&&e.decryptdata&&(e.decryptdata.iv=new Uint8Array(a.slice(0,16)),a=a.slice(16)),o({frag:e,part:null,payload:a,networkDetails:i})},onError:(t,r,i,a)=>{this.resetLoader(e,l),s(new o5({type:g1.NETWORK_ERROR,details:v1.FRAG_LOAD_ERROR,fatal:!1,frag:e,response:l1({url:n,data:void 0},t),error:new Error(`HTTP Error ${t.code} ${t.text}`),networkDetails:i,stats:a}))},onAbort:(t,n,r)=>{this.resetLoader(e,l),s(new o5({type:g1.NETWORK_ERROR,details:v1.INTERNAL_ABORTED,fatal:!1,frag:e,error:new Error("Aborted"),networkDetails:r,stats:t}))},onTimeout:(t,n,r)=>{this.resetLoader(e,l),s(new o5({type:g1.NETWORK_ERROR,details:v1.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,error:new Error(`Timeout after ${d.timeout}ms`),networkDetails:r,stats:t}))},onProgress:(n,r,i,a)=>{t&&t({frag:e,part:null,payload:i,networkDetails:a})}})}))}loadPart(e,t,n){this.abort();const r=this.config,i=r.fLoader,a=r.loader;return new Promise(((o,s)=>{if(this.loader&&this.loader.destroy(),e.gap||t.gap)return void s(a5(e,t));const l=this.loader=e.loader=i?new i(r):new a(r),c=i5(e,t),u=f4(r.fragLoadPolicy.default),d={loadPolicy:u,timeout:u.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:n5};t.stats=l.stats,l.load(c,d,{onSuccess:(r,i,a,s)=>{this.resetLoader(e,l),this.updateStatsFromPart(e,t);const c={frag:e,part:t,payload:r.data,networkDetails:s};n(c),o(c)},onError:(n,r,i,a)=>{this.resetLoader(e,l),s(new o5({type:g1.NETWORK_ERROR,details:v1.FRAG_LOAD_ERROR,fatal:!1,frag:e,part:t,response:l1({url:c.url,data:void 0},n),error:new Error(`HTTP Error ${n.code} ${n.text}`),networkDetails:i,stats:a}))},onAbort:(n,r,i)=>{e.stats.aborted=t.stats.aborted,this.resetLoader(e,l),s(new o5({type:g1.NETWORK_ERROR,details:v1.INTERNAL_ABORTED,fatal:!1,frag:e,part:t,error:new Error("Aborted"),networkDetails:i,stats:n}))},onTimeout:(n,r,i)=>{this.resetLoader(e,l),s(new o5({type:g1.NETWORK_ERROR,details:v1.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,part:t,error:new Error(`Timeout after ${d.timeout}ms`),networkDetails:i,stats:n}))}})}))}updateStatsFromPart(e,t){const n=e.stats,r=t.stats,i=r.total;if(n.loaded+=r.loaded,i){const r=Math.round(e.duration/t.duration),a=Math.min(Math.round(n.loaded/i),r),o=(r-a)*Math.round(n.loaded/a);n.total=n.loaded+o}else n.total=Math.max(n.loaded,n.total);const a=n.loading,o=r.loading;a.start?a.first+=o.first-o.start:(a.start=o.start,a.first=o.first),a.end=o.end}resetLoader(e,t){e.loader=null,this.loader===t&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),t.destroy()}}function i5(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=t||e,r={frag:e,part:t,responseType:"arraybuffer",url:n.url,headers:{},rangeStart:0,rangeEnd:0},i=n.byteRangeStartOffset,a=n.byteRangeEndOffset;if(h1(i)&&h1(a)){var o;let t=i,n=a;if("initSegment"===e.sn&&"AES-128"===(null==(o=e.decryptdata)?void 0:o.method)){const e=a-i;e%16&&(n=a+(16-e%16)),0!==i&&(r.resetIV=!0,t=i-16)}r.rangeStart=t,r.rangeEnd=n}return r}function a5(e,t){const n=new Error(`GAP ${e.gap?"tag":"attribute"} found`),r={type:g1.MEDIA_ERROR,details:v1.FRAG_GAP,fatal:!1,frag:e,error:n,networkDetails:null};return t&&(r.part=t),(t||e).stats.aborted=!0,new o5(r)}class o5 extends Error{constructor(e){super(e.error.message),this.data=void 0,this.data=e}}class s5{constructor(e,t){this.subtle=void 0,this.aesIV=void 0,this.subtle=e,this.aesIV=t}decrypt(e,t){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e)}}class l5{constructor(e,t){this.subtle=void 0,this.key=void 0,this.subtle=e,this.key=t}expandKey(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])}}class c5{constructor(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}uint8ArrayToUint32Array_(e){const t=new DataView(e),n=new Uint32Array(4);for(let r=0;r<4;r++)n[r]=t.getUint32(4*r);return n}initTable(){const e=this.sBox,t=this.invSBox,n=this.subMix,r=n[0],i=n[1],a=n[2],o=n[3],s=this.invSubMix,l=s[0],c=s[1],u=s[2],d=s[3],h=new Uint32Array(256);let p=0,f=0,m=0;for(m=0;m<256;m++)h[m]=m<128?m<<1:m<<1^283;for(m=0;m<256;m++){let n=f^f<<1^f<<2^f<<3^f<<4;n=n>>>8^255&n^99,e[p]=n,t[n]=p;const s=h[p],m=h[s],g=h[m];let v=257*h[n]^16843008*n;r[p]=v<<24|v>>>8,i[p]=v<<16|v>>>16,a[p]=v<<8|v>>>24,o[p]=v,v=16843009*g^65537*m^257*s^16843008*p,l[n]=v<<24|v>>>8,c[n]=v<<16|v>>>16,u[n]=v<<8|v>>>24,d[n]=v,p?(p=s^h[h[h[g^s]]],f^=h[h[f]]):p=f=1}}expandKey(e){const t=this.uint8ArrayToUint32Array_(e);let n=!0,r=0;for(;r<t.length&&n;)n=t[r]===this.key[r],r++;if(n)return;this.key=t;const i=this.keySize=t.length;if(4!==i&&6!==i&&8!==i)throw new Error("Invalid aes key size="+i);const a=this.ksRows=4*(i+6+1);let o,s;const l=this.keySchedule=new Uint32Array(a),c=this.invKeySchedule=new Uint32Array(a),u=this.sBox,d=this.rcon,h=this.invSubMix,p=h[0],f=h[1],m=h[2],g=h[3];let v,y;for(o=0;o<a;o++)o<i?v=l[o]=t[o]:(y=v,o%i===0?(y=y<<8|y>>>24,y=u[y>>>24]<<24|u[y>>>16&255]<<16|u[y>>>8&255]<<8|u[255&y],y^=d[o/i|0]<<24):i>6&&o%i===4&&(y=u[y>>>24]<<24|u[y>>>16&255]<<16|u[y>>>8&255]<<8|u[255&y]),l[o]=v=(l[o-i]^y)>>>0);for(s=0;s<a;s++)o=a-s,y=3&s?l[o]:l[o-4],c[s]=s<4||o<=4?y:p[u[y>>>24]]^f[u[y>>>16&255]]^m[u[y>>>8&255]]^g[u[255&y]],c[s]=c[s]>>>0}networkToHostOrderSwap(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24}decrypt(e,t,n){const r=this.keySize+6,i=this.invKeySchedule,a=this.invSBox,o=this.invSubMix,s=o[0],l=o[1],c=o[2],u=o[3],d=this.uint8ArrayToUint32Array_(n);let h=d[0],p=d[1],f=d[2],m=d[3];const g=new Int32Array(e),v=new Int32Array(g.length);let y,b,w,E,x,_,A,T,S,k,C,I,R,D;const L=this.networkToHostOrderSwap;for(;t<g.length;){for(S=L(g[t]),k=L(g[t+1]),C=L(g[t+2]),I=L(g[t+3]),x=S^i[0],_=I^i[1],A=C^i[2],T=k^i[3],R=4,D=1;D<r;D++)y=s[x>>>24]^l[_>>16&255]^c[A>>8&255]^u[255&T]^i[R],b=s[_>>>24]^l[A>>16&255]^c[T>>8&255]^u[255&x]^i[R+1],w=s[A>>>24]^l[T>>16&255]^c[x>>8&255]^u[255&_]^i[R+2],E=s[T>>>24]^l[x>>16&255]^c[_>>8&255]^u[255&A]^i[R+3],x=y,_=b,A=w,T=E,R+=4;y=a[x>>>24]<<24^a[_>>16&255]<<16^a[A>>8&255]<<8^a[255&T]^i[R],b=a[_>>>24]<<24^a[A>>16&255]<<16^a[T>>8&255]<<8^a[255&x]^i[R+1],w=a[A>>>24]<<24^a[T>>16&255]<<16^a[x>>8&255]<<8^a[255&_]^i[R+2],E=a[T>>>24]<<24^a[x>>16&255]<<16^a[_>>8&255]<<8^a[255&A]^i[R+3],v[t]=L(y^h),v[t+1]=L(E^p),v[t+2]=L(w^f),v[t+3]=L(b^m),h=S,p=k,f=C,m=I,t+=4}return v.buffer}}class u5{constructor(e){let{removePKCS7Padding:t=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.useSoftware=e.enableSoftwareAES,this.removePKCS7Padding=t,t)try{const e=self.crypto;e&&(this.subtle=e.subtle||e.webkitSubtle)}catch(Q_){}this.useSoftware=!this.subtle}destroy(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null}isSync(){return this.useSoftware}flush(){const{currentResult:e,remainderData:t}=this;if(!e||t)return this.reset(),null;const n=new Uint8Array(e);return this.reset(),this.removePKCS7Padding?function(e){const t=e.byteLength,n=t&&new DataView(e.buffer).getUint8(t-1);return n?n2(e,0,t-n):e}(n):n}reset(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)}decrypt(e,t,n){return this.useSoftware?new Promise(((r,i)=>{this.softwareDecrypt(new Uint8Array(e),t,n);const a=this.flush();a?r(a.buffer):i(new Error("[softwareDecrypt] Failed to decrypt data"))})):this.webCryptoDecrypt(new Uint8Array(e),t,n)}softwareDecrypt(e,t,n){const{currentIV:r,currentResult:i,remainderData:a}=this;this.logOnce("JS AES decrypt"),a&&(e=U2(a,e),this.remainderData=null);const o=this.getValidChunk(e);if(!o.length)return null;r&&(n=r);let s=this.softwareDecrypter;s||(s=this.softwareDecrypter=new c5),s.expandKey(t);const l=i;return this.currentResult=s.decrypt(o.buffer,0,n),this.currentIV=n2(o,-16).buffer,l||null}webCryptoDecrypt(e,t,n){if(this.key!==t||!this.fastAesKey){if(!this.subtle)return Promise.resolve(this.onWebCryptoError(e,t,n));this.key=t,this.fastAesKey=new l5(this.subtle,t)}return this.fastAesKey.expandKey().then((t=>{if(!this.subtle)return Promise.reject(new Error("web crypto not initialized"));this.logOnce("WebCrypto AES decrypt");return new s5(this.subtle,new Uint8Array(n)).decrypt(e.buffer,t)})).catch((r=>(x1.warn(`[decrypter]: WebCrypto Error, disable WebCrypto API, ${r.name}: ${r.message}`),this.onWebCryptoError(e,t,n))))}onWebCryptoError(e,t,n){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(e,t,n);const r=this.flush();if(r)return r.buffer;throw new Error("WebCrypto and softwareDecrypt: failed to decrypt data")}getValidChunk(e){let t=e;const n=e.length-e.length%16;return n!==e.length&&(t=n2(e,0,n),this.remainderData=n2(e,n)),t}logOnce(e){this.logEnabled&&(x1.log(`[decrypter]: ${e}`),this.logEnabled=!1)}}const d5=function(e){let t="";const n=e.length;for(let r=0;r<n;r++)t+=`[${e.start(r).toFixed(3)}-${e.end(r).toFixed(3)}]`;return t},h5="STOPPED",p5="IDLE",f5="KEY_LOADING",m5="FRAG_LOADING",g5="FRAG_LOADING_WAITING_RETRY",v5="WAITING_TRACK",y5="PARSING",b5="PARSED",w5="ENDED",E5="ERROR",x5="WAITING_INIT_PTS",_5="WAITING_LEVEL";class A5 extends B4{constructor(e,t,n,r,i){super(),this.hls=void 0,this.fragPrevious=null,this.fragCurrent=null,this.fragmentTracker=void 0,this.transmuxer=null,this._state=h5,this.playlistType=void 0,this.media=null,this.mediaBuffer=null,this.config=void 0,this.bitrateTest=!1,this.lastCurrentTime=0,this.nextLoadPosition=0,this.startPosition=0,this.startTimeOffset=null,this.loadedmetadata=!1,this.retryDate=0,this.levels=null,this.fragmentLoader=void 0,this.keyLoader=void 0,this.levelLastLoaded=null,this.startFragRequested=!1,this.decrypter=void 0,this.initPTS=[],this.buffering=!0,this.onvseeking=null,this.onvended=null,this.logPrefix="",this.log=void 0,this.warn=void 0,this.playlistType=i,this.logPrefix=r,this.log=x1.log.bind(x1,`${r}:`),this.warn=x1.warn.bind(x1,`${r}:`),this.hls=e,this.fragmentLoader=new r5(e.config),this.keyLoader=n,this.fragmentTracker=t,this.config=e.config,this.decrypter=new u5(e.config),e.on(m1.MANIFEST_LOADED,this.onManifestLoaded,this)}doTick(){this.onTickEnd()}onTickEnd(){}startLoad(e){}stopLoad(){this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);const e=this.fragCurrent;null!=e&&e.loader&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=h5}pauseBuffering(){this.buffering=!1}resumeBuffering(){this.buffering=!0}_streamEnded(e,t){if(t.live||e.nextStart||!e.end||!this.media)return!1;const n=t.partList;if(null!=n&&n.length){const e=n[n.length-1];return Y4.isBuffered(this.media,e.start+e.duration/2)}const r=t.fragments[t.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(r)}getLevelDetails(){var e;if(this.levels&&null!==this.levelLastLoaded)return null==(e=this.levelLastLoaded)?void 0:e.details}onMediaAttached(e,t){const n=this.media=this.mediaBuffer=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),n.addEventListener("seeking",this.onvseeking),n.addEventListener("ended",this.onvended);const r=this.config;this.levels&&r.autoStartLoad&&this.state===h5&&this.startLoad(r.startPosition)}onMediaDetaching(){const e=this.media;null!=e&&e.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),e&&this.onvseeking&&this.onvended&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvended=null),this.keyLoader&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()}onMediaSeeking(){const{config:e,fragCurrent:t,media:n,mediaBuffer:r,state:i}=this,a=n?n.currentTime:0,o=Y4.bufferInfo(r||n,a,e.maxBufferHole);if(this.log(`media seeking to ${h1(a)?a.toFixed(3):a}, state: ${i}`),this.state===w5)this.resetLoadingState();else if(t){const n=e.maxFragLookUpTolerance,r=t.start-n,i=t.start+t.duration+n;if(!o.len||i<o.start||r>o.end){const e=a>i;(a<r||e)&&(e&&t.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),t.abortRequests(),this.resetLoadingState()),this.fragPrevious=null)}}n&&(this.fragmentTracker.removeFragmentsInRange(a,1/0,this.playlistType,!0),this.lastCurrentTime=a),this.loadedmetadata||o.len||(this.nextLoadPosition=this.startPosition=a),this.tickImmediate()}onMediaEnded(){this.startPosition=this.lastCurrentTime=0}onManifestLoaded(e,t){this.startTimeOffset=t.startTimeOffset,this.initPTS=[]}onHandlerDestroying(){this.hls.off(m1.MANIFEST_LOADED,this.onManifestLoaded,this),this.stopLoad(),super.onHandlerDestroying(),this.hls=null}onHandlerDestroyed(){this.state=h5,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,super.onHandlerDestroyed()}loadFragment(e,t,n){this._loadFragForPlayback(e,t,n)}_loadFragForPlayback(e,t,n){this._doFragLoad(e,t,n,(t=>{if(this.fragContextChanged(e))return this.warn(`Fragment ${e.sn}${t.part?" p: "+t.part.index:""} of level ${e.level} was dropped during download.`),void this.fragmentTracker.removeFragment(e);e.stats.chunkCount++,this._handleFragmentLoadProgress(t)})).then((t=>{if(!t)return;const n=this.state;this.fragContextChanged(e)?(n===m5||!this.fragCurrent&&n===y5)&&(this.fragmentTracker.removeFragment(e),this.state=p5):("payload"in t&&(this.log(`Loaded fragment ${e.sn} of level ${e.level}`),this.hls.trigger(m1.FRAG_LOADED,t)),this._handleFragmentLoadComplete(t))})).catch((t=>{this.state!==h5&&this.state!==E5&&(this.warn(`Frag error: ${(null==t?void 0:t.message)||t}`),this.resetFragmentLoading(e))}))}clearTrackerIfNeeded(e){var t;const{fragmentTracker:n}=this;if(n.getState(e)===V4){const t=e.type,r=this.getFwdBufferInfo(this.mediaBuffer,t),i=Math.max(e.duration,r?r.len:this.config.maxBufferLength),a=this.backtrackFragment;(1===(a?e.sn-a.sn:0)||this.reduceMaxBufferLength(i,e.duration))&&n.removeFragment(e)}else 0===(null==(t=this.mediaBuffer)?void 0:t.buffered.length)?n.removeAllFragments():n.hasParts(e.type)&&(n.detectPartialFragments({frag:e,part:null,stats:e.stats,id:e.type}),n.getState(e)===W4&&n.removeFragment(e))}checkLiveUpdate(e){if(e.updated&&!e.live){const t=e.fragments[e.fragments.length-1];this.fragmentTracker.detectPartialFragments({frag:t,part:null,stats:t.stats,id:t.type})}e.fragments[0]||(e.deltaUpdateFailed=!0)}flushMainBuffer(e,t){if(!(e-t))return;const n={startOffset:e,endOffset:t,type:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null};this.hls.trigger(m1.BUFFER_FLUSHING,n)}_loadInitSegment(e,t){this._doFragLoad(e,t).then((t=>{if(!t||this.fragContextChanged(e)||!this.levels)throw new Error("init load aborted");return t})).then((t=>{const{hls:n}=this,{payload:r}=t,i=e.decryptdata;if(r&&r.byteLength>0&&null!=i&&i.key&&i.iv&&"AES-128"===i.method){const a=self.performance.now();return this.decrypter.decrypt(new Uint8Array(r),i.key.buffer,i.iv.buffer).catch((t=>{throw n.trigger(m1.ERROR,{type:g1.MEDIA_ERROR,details:v1.FRAG_DECRYPT_ERROR,fatal:!1,error:t,reason:t.message,frag:e}),t})).then((r=>{const i=self.performance.now();return n.trigger(m1.FRAG_DECRYPTED,{frag:e,payload:r,stats:{tstart:a,tdecrypt:i}}),t.payload=r,this.completeInitSegmentLoad(t)}))}return this.completeInitSegmentLoad(t)})).catch((t=>{this.state!==h5&&this.state!==E5&&(this.warn(t),this.resetFragmentLoading(e))}))}completeInitSegmentLoad(e){const{levels:t}=this;if(!t)throw new Error("init load aborted, missing levels");const n=e.frag.stats;this.state=p5,e.frag.data=new Uint8Array(e.payload),n.parsing.start=n.buffering.start=self.performance.now(),n.parsing.end=n.buffering.end=self.performance.now(),this.tick()}fragContextChanged(e){const{fragCurrent:t}=this;return!e||!t||e.sn!==t.sn||e.level!==t.level}fragBufferedComplete(e,t){var n,r,i,a;const o=this.mediaBuffer?this.mediaBuffer:this.media;if(this.log(`Buffered ${e.type} sn: ${e.sn}${t?" part: "+t.index:""} of ${this.playlistType===C3?"level":"track"} ${e.level} (frag:[${(null!=(n=e.startPTS)?n:NaN).toFixed(3)}-${(null!=(r=e.endPTS)?r:NaN).toFixed(3)}] > buffer:${o?d5(Y4.getBuffered(o)):"(detached)"})`),"initSegment"!==e.sn){var s;if(e.type!==R3){const t=e.elementaryStreams;if(!Object.keys(t).some((e=>!!t[e])))return void(this.state=p5)}const t=null==(s=this.levels)?void 0:s[e.level];null!=t&&t.fragmentError&&(this.log(`Resetting level fragment error count of ${t.fragmentError} on frag buffered`),t.fragmentError=0)}this.state=p5,o&&(!this.loadedmetadata&&e.type==C3&&o.buffered.length&&(null==(i=this.fragCurrent)?void 0:i.sn)===(null==(a=this.fragPrevious)?void 0:a.sn)&&(this.loadedmetadata=!0,this.seekToStartPos()),this.tick())}seekToStartPos(){}_handleFragmentLoadComplete(e){const{transmuxer:t}=this;if(!t)return;const{frag:n,part:r,partsLoaded:i}=e,a=!i||0===i.length||i.some((e=>!e)),o=new Q4(n.level,n.sn,n.stats.chunkCount+1,0,r?r.index:-1,!a);t.flush(o)}_handleFragmentLoadProgress(e){}_doFragLoad(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;var i;const a=null==t?void 0:t.details;if(!this.levels||!a)throw new Error(`frag load aborted, missing level${a?"":" detail"}s`);let o=null;if(!e.encrypted||null!=(i=e.decryptdata)&&i.key?!e.encrypted&&a.encryptedFragments.length&&this.keyLoader.loadClear(e,a.encryptedFragments):(this.log(`Loading key for ${e.sn} of [${a.startSN}-${a.endSN}], ${"[stream-controller]"===this.logPrefix?"level":"track"} ${e.level}`),this.state=f5,this.fragCurrent=e,o=this.keyLoader.load(e).then((e=>{if(!this.fragContextChanged(e.frag))return this.hls.trigger(m1.KEY_LOADED,e),this.state===f5&&(this.state=p5),e})),this.hls.trigger(m1.KEY_LOADING,{frag:e}),null===this.fragCurrent&&(o=Promise.reject(new Error("frag load aborted, context changed in KEY_LOADING")))),n=Math.max(e.start,n||0),this.config.lowLatencyMode&&"initSegment"!==e.sn){const i=a.partList;if(i&&r){n>e.end&&a.fragmentHint&&(e=a.fragmentHint);const s=this.getNextPart(i,e,n);if(s>-1){const l=i[s];let c;return this.log(`Loading part sn: ${e.sn} p: ${l.index} cc: ${e.cc} of playlist [${a.startSN}-${a.endSN}] parts [0-${s}-${i.length-1}] ${"[stream-controller]"===this.logPrefix?"level":"track"}: ${e.level}, target: ${parseFloat(n.toFixed(3))}`),this.nextLoadPosition=l.start+l.duration,this.state=m5,c=o?o.then((n=>!n||this.fragContextChanged(n.frag)?null:this.doFragPartsLoad(e,l,t,r))).catch((e=>this.handleFragLoadError(e))):this.doFragPartsLoad(e,l,t,r).catch((e=>this.handleFragLoadError(e))),this.hls.trigger(m1.FRAG_LOADING,{frag:e,part:l,targetBufferTime:n}),null===this.fragCurrent?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):c}if(!e.url||this.loadedEndOfParts(i,n))return Promise.resolve(null)}}this.log(`Loading fragment ${e.sn} cc: ${e.cc} ${a?"of ["+a.startSN+"-"+a.endSN+"] ":""}${"[stream-controller]"===this.logPrefix?"level":"track"}: ${e.level}, target: ${parseFloat(n.toFixed(3))}`),h1(e.sn)&&!this.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),this.state=m5;const s=this.config.progressive;let l;return l=s&&o?o.then((t=>!t||this.fragContextChanged(null==t?void 0:t.frag)?null:this.fragmentLoader.load(e,r))).catch((e=>this.handleFragLoadError(e))):Promise.all([this.fragmentLoader.load(e,s?r:void 0),o]).then((e=>{let[t]=e;return!s&&t&&r&&r(t),t})).catch((e=>this.handleFragLoadError(e))),this.hls.trigger(m1.FRAG_LOADING,{frag:e,targetBufferTime:n}),null===this.fragCurrent?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):l}doFragPartsLoad(e,t,n,r){return new Promise(((i,a)=>{var o;const s=[],l=null==(o=n.details)?void 0:o.partList,c=t=>{this.fragmentLoader.loadPart(e,t,r).then((r=>{s[t.index]=r;const a=r.part;this.hls.trigger(m1.FRAG_LOADED,r);const o=l4(n,e.sn,t.index+1)||c4(l,e.sn,t.index+1);if(!o)return i({frag:e,part:a,partsLoaded:s});c(o)})).catch(a)};c(t)}))}handleFragLoadError(e){if("data"in e){const t=e.data;e.data&&t.details===v1.INTERNAL_ABORTED?this.handleFragLoadAborted(t.frag,t.part):this.hls.trigger(m1.ERROR,t)}else this.hls.trigger(m1.ERROR,{type:g1.OTHER_ERROR,details:v1.INTERNAL_EXCEPTION,err:e,error:e,fatal:!0});return null}_handleTransmuxerFlush(e){const t=this.getCurrentContext(e);if(!t||this.state!==y5)return void(this.fragCurrent||this.state===h5||this.state===E5||(this.state=p5));const{frag:n,part:r,level:i}=t,a=self.performance.now();n.stats.parsing.end=a,r&&(r.stats.parsing.end=a),this.updateLevelTiming(n,r,i,e.partial)}getCurrentContext(e){const{levels:t,fragCurrent:n}=this,{level:r,sn:i,part:a}=e;if(null==t||!t[r])return this.warn(`Levels object was unset while buffering fragment ${i} of level ${r}. The current chunk will not be buffered.`),null;const o=t[r],s=a>-1?l4(o,i,a):null,l=s?s.fragment:function(e,t,n){if(null==e||!e.details)return null;const r=e.details;let i=r.fragments[t-r.startSN];return i||(i=r.fragmentHint,i&&i.sn===t?i:t<r.startSN&&n&&n.sn===t?n:null)}(o,i,n);return l?(n&&n!==l&&(l.stats=n.stats),{frag:l,part:s,level:o}):null}bufferFragmentData(e,t,n,r,i){var a;if(!e||this.state!==y5)return;const{data1:o,data2:s}=e;let l=o;if(o&&s&&(l=U2(o,s)),null==(a=l)||!a.length)return;const c={type:e.type,frag:t,part:n,chunkMeta:r,parent:t.type,data:l};if(this.hls.trigger(m1.BUFFER_APPENDING,c),e.dropped&&e.independent&&!n){if(i)return;this.flushBufferGap(t)}}flushBufferGap(e){const t=this.media;if(!t)return;if(!Y4.isBuffered(t,t.currentTime))return void this.flushMainBuffer(0,e.start);const n=t.currentTime,r=Y4.bufferInfo(t,n,0),i=e.duration,a=Math.min(2*this.config.maxFragLookUpTolerance,.25*i),o=Math.max(Math.min(e.start-a,r.end-a),n+a);e.start-o>a&&this.flushMainBuffer(o,e.start)}getFwdBufferInfo(e,t){const n=this.getLoadPosition();return h1(n)?this.getFwdBufferInfoAtPos(e,n,t):null}getFwdBufferInfoAtPos(e,t,n){const{config:{maxBufferHole:r}}=this,i=Y4.bufferInfo(e,t,r);if(0===i.len&&void 0!==i.nextStart){const a=this.fragmentTracker.getBufferedFrag(t,n);if(a&&i.nextStart<a.end)return Y4.bufferInfo(e,t,Math.max(i.nextStart,r))}return i}getMaxBufferLength(e){const{config:t}=this;let n;return n=e?Math.max(8*t.maxBufferSize/e,t.maxBufferLength):t.maxBufferLength,Math.min(n,t.maxMaxBufferLength)}reduceMaxBufferLength(e,t){const n=this.config,r=Math.max(Math.min(e-t,n.maxBufferLength),t),i=Math.max(e-3*t,n.maxMaxBufferLength/2,r);return i>=r&&(n.maxMaxBufferLength=i,this.warn(`Reduce max buffer length to ${i}s`),!0)}getAppendedFrag(e){const t=this.fragmentTracker.getAppendedFrag(e,C3);return t&&"fragment"in t?t.fragment:t}getNextFragment(e,t){const n=t.fragments,r=n.length;if(!r)return null;const{config:i}=this,a=n[0].start;let o;if(t.live){const s=i.initialLiveManifestSize;if(r<s)return this.warn(`Not enough fragments to start playback (have: ${r}, need: ${s})`),null;(!t.PTSKnown&&!this.startFragRequested&&-1===this.startPosition||e<a)&&(o=this.getInitialLiveFragment(t,n),this.startPosition=this.nextLoadPosition=o?this.hls.liveSyncPosition||o.start:e)}else e<=a&&(o=n[0]);if(!o){const n=i.lowLatencyMode?t.partEnd:t.fragmentEnd;o=this.getFragmentAtPosition(e,n,t)}return this.mapToInitFragWhenRequired(o)}isLoopLoading(e,t){const n=this.fragmentTracker.getState(e);return(n===z4||n===W4&&!!e.gap)&&this.nextLoadPosition>t}getNextFragmentLoopLoading(e,t,n,r,i){const a=e.gap,o=this.getNextFragment(this.nextLoadPosition,t);if(null===o)return o;if(e=o,a&&e&&!e.gap&&n.nextStart){const t=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,n.nextStart,r);if(null!==t&&n.len+t.len>=i)return this.log(`buffer full after gaps in "${r}" playlist starting at sn: ${e.sn}`),null}return e}mapToInitFragWhenRequired(e){return null==e||!e.initSegment||null!=e&&e.initSegment.data||this.bitrateTest?e:e.initSegment}getNextPart(e,t,n){let r=-1,i=!1,a=!0;for(let o=0,s=e.length;o<s;o++){const s=e[o];if(a=a&&!s.independent,r>-1&&n<s.start)break;const l=s.loaded;l?r=-1:(i||s.independent||a)&&s.fragment===t&&(r=o),i=l}return r}loadedEndOfParts(e,t){const n=e[e.length-1];return n&&t>n.start&&n.loaded}getInitialLiveFragment(e,t){const n=this.fragPrevious;let r=null;if(n){if(e.hasProgramDateTime&&(this.log(`Live playlist, switching playlist, load frag with same PDT: ${n.programDateTime}`),r=function(e,t,n){if(null===t||!Array.isArray(e)||!e.length||!h1(t))return null;if(t<(e[0].programDateTime||0))return null;if(t>=(e[e.length-1].endProgramDateTime||0))return null;n=n||0;for(let r=0;r<e.length;++r){const i=e[r];if(b4(t,n,i))return i}return null}(t,n.endProgramDateTime,this.config.maxFragLookUpTolerance)),!r){const i=n.sn+1;if(i>=e.startSN&&i<=e.endSN){const a=t[i-e.startSN];n.cc===a.cc&&(r=a,this.log(`Live playlist, switching playlist, load frag with next SN: ${r.sn}`))}r||(r=function(e,t){return g4(e,(e=>e.cc<t?1:e.cc>t?-1:0))}(t,n.cc),r&&this.log(`Live playlist, switching playlist, load frag with same CC: ${r.sn}`))}}else{const t=this.hls.liveSyncPosition;null!==t&&(r=this.getFragmentAtPosition(t,this.bitrateTest?e.fragmentEnd:e.edge,e))}return r}getFragmentAtPosition(e,t,n){const{config:r}=this;let{fragPrevious:i}=this,{fragments:a,endSN:o}=n;const{fragmentHint:s}=n,{maxFragLookUpTolerance:l}=r,c=n.partList,u=!!(r.lowLatencyMode&&null!=c&&c.length&&s);let d;if(u&&s&&!this.bitrateTest&&(a=a.concat(s),o=s.sn),e<t){d=v4(i,a,e,e>t-l?0:l)}else d=a[a.length-1];if(d){const e=d.sn-n.startSN,t=this.fragmentTracker.getState(d);if((t===z4||t===W4&&d.gap)&&(i=d),i&&d.sn===i.sn&&(!u||c[0].fragment.sn>d.sn)){if(i&&d.level===i.level){const t=a[e+1];d=d.sn<o&&this.fragmentTracker.getState(t)!==z4?t:null}}}return d}synchronizeToLiveEdge(e){const{config:t,media:n}=this;if(!n)return;const r=this.hls.liveSyncPosition,i=n.currentTime,a=e.fragments[0].start,o=e.edge,s=i>=a-t.maxFragLookUpTolerance&&i<=o;if(null!==r&&n.duration>r&&(i<r||!s)){const a=void 0!==t.liveMaxLatencyDuration?t.liveMaxLatencyDuration:t.liveMaxLatencyDurationCount*e.targetduration;(!s&&n.readyState<4||i<o-a)&&(this.loadedmetadata||(this.nextLoadPosition=r),n.readyState&&(this.warn(`Playback: ${i.toFixed(3)} is located too far from the end of live sliding playlist: ${o}, reset currentTime to : ${r.toFixed(3)}`),n.currentTime=r))}}alignPlaylists(e,t,n){const r=e.fragments.length;if(!r)return this.warn("No fragments in live playlist"),0;const i=e.fragments[0].start,a=!t,o=e.alignedSliding&&h1(i);if(a||!o&&!i){const{fragPrevious:i}=this;e5(i,n,e);const a=e.fragments[0].start;return this.log(`Live playlist sliding: ${a.toFixed(2)} start-sn: ${t?t.startSN:"na"}->${e.startSN} prev-sn: ${i?i.sn:"na"} fragments: ${r}`),a}return i}waitForCdnTuneIn(e){return e.live&&e.canBlockReload&&e.partTarget&&e.tuneInGoal>Math.max(e.partHoldBack,3*e.partTarget)}setStartPosition(e,t){let n=this.startPosition;if(n<t&&(n=-1),-1===n||-1===this.lastCurrentTime){const r=null!==this.startTimeOffset,i=r?this.startTimeOffset:e.startTimeOffset;null!==i&&h1(i)?(n=t+i,i<0&&(n+=e.totalduration),n=Math.min(Math.max(t,n),t+e.totalduration),this.log(`Start time offset ${i} found in ${r?"multivariant":"media"} playlist, adjust startPosition to ${n}`),this.startPosition=n):e.live?n=this.hls.liveSyncPosition||t:this.startPosition=n=0,this.lastCurrentTime=n}this.nextLoadPosition=n}getLoadPosition(){const{media:e}=this;let t=0;return this.loadedmetadata&&e?t=e.currentTime:this.nextLoadPosition&&(t=this.nextLoadPosition),t}handleFragLoadAborted(e,t){this.transmuxer&&"initSegment"!==e.sn&&e.stats.aborted&&(this.warn(`Fragment ${e.sn}${t?" part "+t.index:""} of level ${e.level} was aborted`),this.resetFragmentLoading(e))}resetFragmentLoading(e){this.fragCurrent&&(this.fragContextChanged(e)||this.state===g5)||(this.state=p5)}onFragmentOrKeyLoadError(e,t){if(t.chunkMeta&&!t.frag){const e=this.getCurrentContext(t.chunkMeta);e&&(t.frag=e.frag)}const n=t.frag;if(!n||n.type!==e||!this.levels)return;var r;if(this.fragContextChanged(n))return void this.warn(`Frag load error must match current frag to retry ${n.url} > ${null==(r=this.fragCurrent)?void 0:r.url}`);const i=t.details===v1.FRAG_GAP;i&&this.fragmentTracker.fragBuffered(n,!0);const a=t.errorAction,{action:o,retryCount:s=0,retryConfig:l}=a||{};if(a&&o===_4&&l){this.resetStartWhenNotLoaded(this.levelLastLoaded);const r=p4(l,s);this.warn(`Fragment ${n.sn} of ${e} ${n.level} errored with ${t.details}, retrying loading ${s+1}/${l.maxNumRetry} in ${r}ms`),a.resolved=!0,this.retryDate=self.performance.now()+r,this.state=g5}else if(l&&a){if(this.resetFragmentErrors(e),!(s<l.maxNumRetry))return void x1.warn(`${t.details} reached or exceeded max retry (${s})`);i||o===x4||(a.resolved=!0)}else(null==a?void 0:a.action)===E4?this.state=_5:this.state=E5;this.tickImmediate()}reduceLengthAndFlushBuffer(e){if(this.state===y5||this.state===b5){const t=e.frag,n=e.parent,r=this.getFwdBufferInfo(this.mediaBuffer,n),i=r&&r.len>.5;i&&this.reduceMaxBufferLength(r.len,(null==t?void 0:t.duration)||10);const a=!i;return a&&this.warn(`Buffer full error while media.currentTime is not buffered, flush ${n} buffer`),t&&(this.fragmentTracker.removeFragment(t),this.nextLoadPosition=t.start),this.resetLoadingState(),a}return!1}resetFragmentErrors(e){e===I3&&(this.fragCurrent=null),this.loadedmetadata||(this.startFragRequested=!1),this.state!==h5&&(this.state=p5)}afterBufferFlushed(e,t,n){if(!e)return;const r=Y4.getBuffered(e);this.fragmentTracker.detectEvictedFragments(t,r,n),this.state===w5&&this.resetLoadingState()}resetLoadingState(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state=p5}resetStartWhenNotLoaded(e){if(!this.loadedmetadata){this.startFragRequested=!1;const t=e?e.details:null;null!=t&&t.live?(this.startPosition=-1,this.setStartPosition(t,0),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}}resetWhenMissingContext(e){this.warn(`The loading context changed while buffering fragment ${e.sn} of level ${e.level}. This chunk will not be buffered.`),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState()}removeUnbufferedFrags(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.fragmentTracker.removeFragmentsInRange(e,1/0,this.playlistType,!1,!0)}updateLevelTiming(e,t,n,r){var i;const a=n.details;if(!a)return void this.warn("level.details undefined");if(!Object.keys(e.elementaryStreams).reduce(((t,i)=>{const o=e.elementaryStreams[i];if(o){const s=o.endPTS-o.startPTS;if(s<=0)return this.warn(`Could not parse fragment ${e.sn} ${i} duration reliably (${s})`),t||!1;const l=r?0:i4(a,e,o.startPTS,o.endPTS,o.startDTS,o.endDTS);return this.hls.trigger(m1.LEVEL_PTS_UPDATED,{details:a,level:n,drift:l,type:i,frag:e,start:o.startPTS,end:o.endPTS}),!0}return t}),!1)&&null===(null==(i=this.transmuxer)?void 0:i.error)){const t=new Error(`Found no media in fragment ${e.sn} of level ${e.level} resetting transmuxer to fallback to playlist timing`);if(0===n.fragmentError&&(n.fragmentError++,e.gap=!0,this.fragmentTracker.removeFragment(e),this.fragmentTracker.fragBuffered(e,!0)),this.warn(t.message),this.hls.trigger(m1.ERROR,{type:g1.MEDIA_ERROR,details:v1.FRAG_PARSING_ERROR,fatal:!1,error:t,frag:e,reason:`Found no media in msn ${e.sn} of level "${n.url}"`}),!this.hls)return;this.resetTransmuxer()}this.state=b5,this.hls.trigger(m1.FRAG_PARSED,{frag:e,part:t})}resetTransmuxer(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null)}recoverWorkerError(e){"demuxerWorker"===e.event&&(this.fragmentTracker.removeAllFragments(),this.resetTransmuxer(),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState())}set state(e){const t=this._state;t!==e&&(this._state=e,this.log(`${t}->${e}`))}get state(){return this._state}}class T5{constructor(){this.chunks=[],this.dataLength=0}push(e){this.chunks.push(e),this.dataLength+=e.length}flush(){const{chunks:e,dataLength:t}=this;let n;return e.length?(n=1===e.length?e[0]:function(e,t){const n=new Uint8Array(t);let r=0;for(let i=0;i<e.length;i++){const t=e[i];n.set(t,r),r+=t.length}return n}(e,t),this.reset(),n):new Uint8Array(0)}reset(){this.chunks.length=0,this.dataLength=0}}function S5(){return{type:arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",id:-1,pid:-1,inputTimeScale:arguments.length>1&&void 0!==arguments[1]?arguments[1]:9e4,sequenceNumber:-1,samples:[],dropped:0}}class k5{constructor(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}resetInitSegment(e,t,n,r){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}}resetTimeStamp(e){this.initPTS=e,this.resetContiguity()}resetContiguity(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0}canParse(e,t){return!1}appendFrame(e,t,n){}demux(e,t){this.cachedData&&(e=U2(this.cachedData,e),this.cachedData=null);let n,r=a2(e,0),i=r?r.length:0;const a=this._audioTrack,o=this._id3Track,s=r?l2(r):void 0,l=e.length;for((null===this.basePTS||0===this.frameIndex&&h1(s))&&(this.basePTS=C5(s,t,this.initPTS),this.lastPTS=this.basePTS),null===this.lastPTS&&(this.lastPTS=this.basePTS),r&&r.length>0&&o.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:r,type:U3,duration:Number.POSITIVE_INFINITY});i<l;){if(this.canParse(e,i)){const t=this.appendFrame(a,e,i);t?(this.frameIndex++,this.lastPTS=t.sample.pts,i+=t.length,n=i):i=l}else s2(e,i)?(r=a2(e,i),o.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:r,type:U3,duration:Number.POSITIVE_INFINITY}),i+=r.length,n=i):i++;if(i===l&&n!==l){const t=n2(e,n);this.cachedData?this.cachedData=U2(this.cachedData,t):this.cachedData=t}}return{audioTrack:a,videoTrack:S5(),id3Track:o,textTrack:S5()}}demuxSampleAes(e,t,n){return Promise.reject(new Error(`[${this}] This demuxer does not support Sample-AES decryption`))}flush(e){const t=this.cachedData;return t&&(this.cachedData=null,this.demux(t,0)),{audioTrack:this._audioTrack,videoTrack:S5(),id3Track:this._id3Track,textTrack:S5()}}destroy(){}}const C5=(e,t,n)=>{if(h1(e))return 90*e;return 9e4*t+(n?9e4*n.baseTime/n.timescale:0)};function I5(e,t){return 255===e[t]&&240===(246&e[t+1])}function R5(e,t){return 1&e[t+1]?7:9}function D5(e,t){return(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5}function L5(e,t){return t+1<e.length&&I5(e,t)}function P5(e,t){if(L5(e,t)){const n=R5(e,t);if(t+n>=e.length)return!1;const r=D5(e,t);if(r<=n)return!1;const i=t+r;return i===e.length||L5(e,i)}return!1}function M5(e,t,n,r,i){if(!e.samplerate){const a=function(e,t,n,r){let i,a,o,s;const l=navigator.userAgent.toLowerCase(),c=r,u=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];i=1+((192&t[n+2])>>>6);const d=(60&t[n+2])>>>2;if(!(d>u.length-1))return o=(1&t[n+2])<<2,o|=(192&t[n+3])>>>6,x1.log(`manifest codec:${r}, ADTS type:${i}, samplingIndex:${d}`),/firefox/i.test(l)?d>=6?(i=5,s=new Array(4),a=d-3):(i=2,s=new Array(2),a=d):-1!==l.indexOf("android")?(i=2,s=new Array(2),a=d):(i=5,s=new Array(4),r&&(-1!==r.indexOf("mp4a.40.29")||-1!==r.indexOf("mp4a.40.5"))||!r&&d>=6?a=d-3:((r&&-1!==r.indexOf("mp4a.40.2")&&(d>=6&&1===o||/vivaldi/i.test(l))||!r&&1===o)&&(i=2,s=new Array(2)),a=d)),s[0]=i<<3,s[0]|=(14&d)>>1,s[1]|=(1&d)<<7,s[1]|=o<<3,5===i&&(s[1]|=(14&a)>>1,s[2]=(1&a)<<7,s[2]|=8,s[3]=0),{config:s,samplerate:u[d],channelCount:o,codec:"mp4a.40."+i,manifestCodec:c};{const t=new Error(`invalid ADTS sampling index:${d}`);e.emit(m1.ERROR,m1.ERROR,{type:g1.MEDIA_ERROR,details:v1.FRAG_PARSING_ERROR,fatal:!0,error:t,reason:t.message})}}(t,n,r,i);if(!a)return;e.config=a.config,e.samplerate=a.samplerate,e.channelCount=a.channelCount,e.codec=a.codec,e.manifestCodec=a.manifestCodec,x1.log(`parsed codec:${e.codec}, rate:${a.samplerate}, channels:${a.channelCount}`)}}function N5(e){return 9216e4/e}function O5(e,t,n,r,i){const a=r+i*N5(e.samplerate),o=function(e,t){const n=R5(e,t);if(t+n<=e.length){const r=D5(e,t)-n;if(r>0)return{headerLength:n,frameLength:r}}}(t,n);let s;if(o){const{frameLength:r,headerLength:i}=o,l=i+r,c=Math.max(0,n+l-t.length);c?(s=new Uint8Array(l-i),s.set(t.subarray(n+i,t.length),0)):s=t.subarray(n+i,n+l);const u={unit:s,pts:a};return c||e.samples.push(u),{sample:u,length:l,missing:c}}const l=t.length-n;s=new Uint8Array(l),s.set(t.subarray(n,t.length),0);return{sample:{unit:s,pts:a},length:l,missing:-1}}let j5=null;const F5=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],U5=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],B5=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],$5=[0,1,1,4];function V5(e,t,n,r,i){if(n+24>t.length)return;const a=W5(t,n);if(a&&n+a.frameLength<=t.length){const o=r+i*(9e4*a.samplesPerFrame/a.sampleRate),s={unit:t.subarray(n,n+a.frameLength),pts:o,dts:o};return e.config=[],e.channelCount=a.channelCount,e.samplerate=a.sampleRate,e.samples.push(s),{sample:s,length:a.frameLength,missing:0}}}function W5(e,t){const n=e[t+1]>>3&3,r=e[t+1]>>1&3,i=e[t+2]>>4&15,a=e[t+2]>>2&3;if(1!==n&&0!==i&&15!==i&&3!==a){const o=e[t+2]>>1&1,s=e[t+3]>>6,l=1e3*F5[14*(3===n?3-r:3===r?3:4)+i-1],c=U5[3*(3===n?0:2===n?1:2)+a],u=3===s?1:2,d=B5[n][r],h=$5[r],p=8*d*h,f=Math.floor(d*l/c+o)*h;if(null===j5){const e=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);j5=e?parseInt(e[1]):0}return!!j5&&j5<=87&&2===r&&l>=224e3&&0===s&&(e[t+3]=128|e[t+3]),{sampleRate:c,channelCount:u,frameLength:f,samplesPerFrame:p}}}function z5(e,t){return 255===e[t]&&224===(224&e[t+1])&&0!==(6&e[t+1])}function H5(e,t){return t+1<e.length&&z5(e,t)}function q5(e,t){if(t+1<e.length&&z5(e,t)){const n=4,r=W5(e,t);let i=n;null!=r&&r.frameLength&&(i=r.frameLength);const a=t+i;return a===e.length||H5(e,a)}return!1}const G5=/\/emsg[-/]ID3/i;const K5=(e,t)=>{let n=0,r=5;t+=r;const i=new Uint32Array(1),a=new Uint32Array(1),o=new Uint8Array(1);for(;r>0;){o[0]=e[t];const s=Math.min(r,8),l=8-s;a[0]=4278190080>>>24+l<<l,i[0]=(o[0]&a[0])>>l,n=n?n<<s|i[0]:i[0],t+=1,r-=s}return n};class Y5 extends k5{constructor(e){super(),this.observer=void 0,this.observer=e}resetInitSegment(e,t,n,r){super.resetInitSegment(e,t,n,r),this._audioTrack={container:"audio/ac-3",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"ac3",samples:[],manifestCodec:t,duration:r,inputTimeScale:9e4,dropped:0}}canParse(e,t){return t+64<e.length}appendFrame(e,t,n){const r=Q5(e,t,n,this.basePTS,this.frameIndex);if(-1!==r){return{sample:e.samples[e.samples.length-1],length:r,missing:0}}}static probe(e){if(!e)return!1;const t=a2(e,0);if(!t)return!1;const n=t.length;return 11===e[n]&&119===e[n+1]&&void 0!==l2(t)&&K5(e,n)<16}}function Q5(e,t,n,r,i){if(n+8>t.length)return-1;if(11!==t[n]||119!==t[n+1])return-1;const a=t[n+4]>>6;if(a>=3)return-1;const o=[48e3,44100,32e3][a],s=63&t[n+4],l=2*[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][3*s+a];if(n+l>t.length)return-1;const c=t[n+6]>>5;let u=0;2===c?u+=2:(1&c&&1!==c&&(u+=2),4&c&&(u+=2));const d=(t[n+6]<<8|t[n+7])>>12-u&1,h=[2,1,2,3,3,4,4,5][c]+d,p=t[n+5]>>3,f=7&t[n+5],m=new Uint8Array([a<<6|p<<1|f>>2,(3&f)<<6|c<<3|d<<2|s>>4,s<<4&224]),g=r+i*(1536/o*9e4),v=t.subarray(n,n+l);return e.config=m,e.channelCount=h,e.samplerate=o,e.samples.push({unit:v,pts:g}),l}class X5{constructor(){this.VideoSample=null}createVideoSample(e,t,n,r){return{key:e,frame:!1,pts:t,dts:n,units:[],debug:r,length:0}}getLastNalUnit(e){var t;let n,r=this.VideoSample;if(r&&0!==r.units.length||(r=e[e.length-1]),null!=(t=r)&&t.units){const e=r.units;n=e[e.length-1]}return n}pushAccessUnit(e,t){if(e.units.length&&e.frame){if(void 0===e.pts){const n=t.samples,r=n.length;if(!r)return void t.dropped++;{const t=n[r-1];e.pts=t.pts,e.dts=t.dts}}t.samples.push(e)}e.debug.length&&x1.log(e.pts+"/"+e.dts+":"+e.debug)}}class Z5{constructor(e){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}loadWord(){const e=this.data,t=this.bytesAvailable,n=e.byteLength-t,r=new Uint8Array(4),i=Math.min(4,t);if(0===i)throw new Error("no bytes available");r.set(e.subarray(n,n+i)),this.word=new DataView(r.buffer).getUint32(0),this.bitsAvailable=8*i,this.bytesAvailable-=i}skipBits(e){let t;e=Math.min(e,8*this.bytesAvailable+this.bitsAvailable),this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(t=(e-=this.bitsAvailable)>>3,e-=t<<3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)}readBits(e){let t=Math.min(this.bitsAvailable,e);const n=this.word>>>32-t;if(e>32&&x1.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0)this.word<<=t;else{if(!(this.bytesAvailable>0))throw new Error("no bits available");this.loadWord()}return t=e-t,t>0&&this.bitsAvailable?n<<t|this.readBits(t):n}skipLZ(){let e;for(e=0;e<this.bitsAvailable;++e)if(0!==(this.word&2147483648>>>e))return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()}skipUEG(){this.skipBits(1+this.skipLZ())}skipEG(){this.skipBits(1+this.skipLZ())}readUEG(){const e=this.skipLZ();return this.readBits(e+1)-1}readEG(){const e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}readBoolean(){return 1===this.readBits(1)}readUByte(){return this.readBits(8)}readUShort(){return this.readBits(16)}readUInt(){return this.readBits(32)}skipScalingList(e){let t,n=8,r=8;for(let i=0;i<e;i++)0!==r&&(t=this.readEG(),r=(n+t+256)%256),n=0===r?n:r}readSPS(){let e,t,n,r=0,i=0,a=0,o=0;const s=this.readUByte.bind(this),l=this.readBits.bind(this),c=this.readUEG.bind(this),u=this.readBoolean.bind(this),d=this.skipBits.bind(this),h=this.skipEG.bind(this),p=this.skipUEG.bind(this),f=this.skipScalingList.bind(this);s();const m=s();if(l(5),d(3),s(),p(),100===m||110===m||122===m||244===m||44===m||83===m||86===m||118===m||128===m){const e=c();if(3===e&&d(1),p(),p(),d(1),u())for(t=3!==e?8:12,n=0;n<t;n++)u()&&f(n<6?16:64)}p();const g=c();if(0===g)c();else if(1===g)for(d(1),h(),h(),e=c(),n=0;n<e;n++)h();p(),d(1);const v=c(),y=c(),b=l(1);0===b&&d(1),d(1),u()&&(r=c(),i=c(),a=c(),o=c());let w=[1,1];if(u()&&u()){switch(s()){case 1:w=[1,1];break;case 2:w=[12,11];break;case 3:w=[10,11];break;case 4:w=[16,11];break;case 5:w=[40,33];break;case 6:w=[24,11];break;case 7:w=[20,11];break;case 8:w=[32,11];break;case 9:w=[80,33];break;case 10:w=[18,11];break;case 11:w=[15,11];break;case 12:w=[64,33];break;case 13:w=[160,99];break;case 14:w=[4,3];break;case 15:w=[3,2];break;case 16:w=[2,1];break;case 255:w=[s()<<8|s(),s()<<8|s()]}}return{width:Math.ceil(16*(v+1)-2*r-2*i),height:(2-b)*(y+1)*16-(b?2:4)*(a+o),pixelRatio:w}}readSliceType(){return this.readUByte(),this.readUEG(),this.readUEG()}}class J5 extends X5{parseAVCPES(e,t,n,r,i){const a=this.parseAVCNALu(e,n.data);let o,s=this.VideoSample,l=!1;n.data=null,s&&a.length&&!e.audFound&&(this.pushAccessUnit(s,e),s=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts,"")),a.forEach((r=>{var a;switch(r.type){case 1:{let t=!1;o=!0;const i=r.data;if(l&&i.length>4){const e=new Z5(i).readSliceType();2!==e&&4!==e&&7!==e&&9!==e||(t=!0)}var c;if(t)null!=(c=s)&&c.frame&&!s.key&&(this.pushAccessUnit(s,e),s=this.VideoSample=null);s||(s=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts,"")),s.frame=!0,s.key=t;break}case 5:o=!0,null!=(a=s)&&a.frame&&!s.key&&(this.pushAccessUnit(s,e),s=this.VideoSample=null),s||(s=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts,"")),s.key=!0,s.frame=!0;break;case 6:o=!0,V2(r.data,1,n.pts,t.samples);break;case 7:{var u,d;o=!0,l=!0;const t=r.data,n=new Z5(t).readSPS();if(!e.sps||e.width!==n.width||e.height!==n.height||(null==(u=e.pixelRatio)?void 0:u[0])!==n.pixelRatio[0]||(null==(d=e.pixelRatio)?void 0:d[1])!==n.pixelRatio[1]){e.width=n.width,e.height=n.height,e.pixelRatio=n.pixelRatio,e.sps=[t],e.duration=i;const r=t.subarray(1,4);let a="avc1.";for(let e=0;e<3;e++){let t=r[e].toString(16);t.length<2&&(t="0"+t),a+=t}e.codec=a}break}case 8:o=!0,e.pps=[r.data];break;case 9:o=!0,e.audFound=!0,s&&this.pushAccessUnit(s,e),s=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts,"");break;case 12:o=!0;break;default:o=!1,s&&(s.debug+="unknown NAL "+r.type+" ")}if(s&&o){s.units.push(r)}})),r&&s&&(this.pushAccessUnit(s,e),this.VideoSample=null)}parseAVCNALu(e,t){const n=t.byteLength;let r=e.naluState||0;const i=r,a=[];let o,s,l,c=0,u=-1,d=0;for(-1===r&&(u=0,d=31&t[0],r=0,c=1);c<n;)if(o=t[c++],r)if(1!==r)if(o)if(1===o){if(s=c-r-1,u>=0){const e={data:t.subarray(u,s),type:d};a.push(e)}else{const n=this.getLastNalUnit(e.samples);n&&(i&&c<=4-i&&n.state&&(n.data=n.data.subarray(0,n.data.byteLength-i)),s>0&&(n.data=U2(n.data,t.subarray(0,s)),n.state=0))}c<n?(l=31&t[c],u=c,d=l,r=0):r=-1}else r=0;else r=3;else r=o?0:2;else r=o?0:1;if(u>=0&&r>=0){const e={data:t.subarray(u,n),type:d,state:r};a.push(e)}if(0===a.length){const n=this.getLastNalUnit(e.samples);n&&(n.data=U2(n.data,t))}return e.naluState=r,a}}class e6{constructor(e,t,n){this.keyData=void 0,this.decrypter=void 0,this.keyData=n,this.decrypter=new u5(t,{removePKCS7Padding:!1})}decryptBuffer(e){return this.decrypter.decrypt(e,this.keyData.key.buffer,this.keyData.iv.buffer)}decryptAacSample(e,t,n){const r=e[t].unit;if(r.length<=16)return;const i=r.subarray(16,r.length-r.length%16),a=i.buffer.slice(i.byteOffset,i.byteOffset+i.length);this.decryptBuffer(a).then((i=>{const a=new Uint8Array(i);r.set(a,16),this.decrypter.isSync()||this.decryptAacSamples(e,t+1,n)}))}decryptAacSamples(e,t,n){for(;;t++){if(t>=e.length)return void n();if(!(e[t].unit.length<32)&&(this.decryptAacSample(e,t,n),!this.decrypter.isSync()))return}}getAvcEncryptedData(e){const t=16*Math.floor((e.length-48)/160)+16,n=new Int8Array(t);let r=0;for(let i=32;i<e.length-16;i+=160,r+=16)n.set(e.subarray(i,i+16),r);return n}getAvcDecryptedUnit(e,t){const n=new Uint8Array(t);let r=0;for(let i=32;i<e.length-16;i+=160,r+=16)e.set(n.subarray(r,r+16),i);return e}decryptAvcSample(e,t,n,r,i){const a=W2(i.data),o=this.getAvcEncryptedData(a);this.decryptBuffer(o.buffer).then((o=>{i.data=this.getAvcDecryptedUnit(a,o),this.decrypter.isSync()||this.decryptAvcSamples(e,t,n+1,r)}))}decryptAvcSamples(e,t,n,r){if(e instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;t++,n=0){if(t>=e.length)return void r();const i=e[t].units;for(;!(n>=i.length);n++){const a=i[n];if(!(a.data.length<=48||1!==a.type&&5!==a.type)&&(this.decryptAvcSample(e,t,n,r,a),!this.decrypter.isSync()))return}}}}const t6=188;class n6{constructor(e,t,n){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._duration=0,this._pmtId=-1,this._videoTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.remainderData=null,this.videoParser=void 0,this.observer=e,this.config=t,this.typeSupported=n,this.videoParser=new J5}static probe(e){const t=n6.syncOffset(e);return t>0&&x1.warn(`MPEG2-TS detected but first sync word found @ offset ${t}`),-1!==t}static syncOffset(e){const t=e.length;let n=Math.min(940,t-t6)+1,r=0;for(;r<n;){let i=!1,a=-1,o=0;for(let s=r;s<t;s+=t6){if(71!==e[s]||t-s!==t6&&71!==e[s+t6]){if(o)return-1;break}if(o++,-1===a&&(a=s,0!==a&&(n=Math.min(a+18612,e.length-t6)+1)),i||(i=0===r6(e,s)),i&&o>1&&(0===a&&o>2||s+t6>n))return a}r++}return-1}static createTrack(e,t){return{container:"video"===e||"audio"===e?"video/mp2t":void 0,type:e,id:_2[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:"audio"===e?t:void 0}}resetInitSegment(e,t,n,r){this.pmtParsed=!1,this._pmtId=-1,this._videoTrack=n6.createTrack("video"),this._audioTrack=n6.createTrack("audio",r),this._id3Track=n6.createTrack("id3"),this._txtTrack=n6.createTrack("text"),this._audioTrack.segmentCodec="aac",this.aacOverFlow=null,this.remainderData=null,this.audioCodec=t,this.videoCodec=n,this._duration=r}resetTimeStamp(){}resetContiguity(){const{_audioTrack:e,_videoTrack:t,_id3Track:n}=this;e&&(e.pesData=null),t&&(t.pesData=null),n&&(n.pesData=null),this.aacOverFlow=null,this.remainderData=null}demux(e,t){let n,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];r||(this.sampleAes=null);const a=this._videoTrack,o=this._audioTrack,s=this._id3Track,l=this._txtTrack;let c=a.pid,u=a.pesData,d=o.pid,h=s.pid,p=o.pesData,f=s.pesData,m=null,g=this.pmtParsed,v=this._pmtId,y=e.length;if(this.remainderData&&(y=(e=U2(this.remainderData,e)).length,this.remainderData=null),y<t6&&!i)return this.remainderData=e,{audioTrack:o,videoTrack:a,id3Track:s,textTrack:l};const b=Math.max(0,n6.syncOffset(e));y-=(y-b)%t6,y<e.byteLength&&!i&&(this.remainderData=new Uint8Array(e.buffer,y,e.buffer.byteLength-y));let w=0;for(let x=b;x<y;x+=t6)if(71===e[x]){const t=!!(64&e[x+1]),i=r6(e,x);let y;if((48&e[x+3])>>4>1){if(y=x+5+e[x+4],y===x+t6)continue}else y=x+4;switch(i){case c:t&&(u&&(n=l6(u))&&this.videoParser.parseAVCPES(a,l,n,!1,this._duration),u={data:[],size:0}),u&&(u.data.push(e.subarray(y,x+t6)),u.size+=x+t6-y);break;case d:if(t){if(p&&(n=l6(p)))switch(o.segmentCodec){case"aac":this.parseAACPES(o,n);break;case"mp3":this.parseMPEGPES(o,n);break;case"ac3":this.parseAC3PES(o,n)}p={data:[],size:0}}p&&(p.data.push(e.subarray(y,x+t6)),p.size+=x+t6-y);break;case h:t&&(f&&(n=l6(f))&&this.parseID3PES(s,n),f={data:[],size:0}),f&&(f.data.push(e.subarray(y,x+t6)),f.size+=x+t6-y);break;case 0:t&&(y+=e[y]+1),v=this._pmtId=i6(e,y);break;case v:{t&&(y+=e[y]+1);const n=a6(e,y,this.typeSupported,r,this.observer);c=n.videoPid,c>0&&(a.pid=c,a.segmentCodec=n.segmentVideoCodec),d=n.audioPid,d>0&&(o.pid=d,o.segmentCodec=n.segmentAudioCodec),h=n.id3Pid,h>0&&(s.pid=h),null===m||g||(x1.warn(`MPEG-TS PMT found at ${x} after unknown PID '${m}'. Backtracking to sync byte @${b} to parse all TS packets.`),m=null,x=b-188),g=this.pmtParsed=!0;break}case 17:case 8191:break;default:m=i}}else w++;w>0&&o6(this.observer,new Error(`Found ${w} TS packet/s that do not start with 0x47`)),a.pesData=u,o.pesData=p,s.pesData=f;const E={audioTrack:o,videoTrack:a,id3Track:s,textTrack:l};return i&&this.extractRemainingSamples(E),E}flush(){const{remainderData:e}=this;let t;return this.remainderData=null,t=e?this.demux(e,-1,!1,!0):{videoTrack:this._videoTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(t),this.sampleAes?this.decrypt(t,this.sampleAes):t}extractRemainingSamples(e){const{audioTrack:t,videoTrack:n,id3Track:r,textTrack:i}=e,a=n.pesData,o=t.pesData,s=r.pesData;let l;if(a&&(l=l6(a))?(this.videoParser.parseAVCPES(n,i,l,!0,this._duration),n.pesData=null):n.pesData=a,o&&(l=l6(o))){switch(t.segmentCodec){case"aac":this.parseAACPES(t,l);break;case"mp3":this.parseMPEGPES(t,l);break;case"ac3":this.parseAC3PES(t,l)}t.pesData=null}else null!=o&&o.size&&x1.log("last AAC PES packet truncated,might overlap between fragments"),t.pesData=o;s&&(l=l6(s))?(this.parseID3PES(r,l),r.pesData=null):r.pesData=s}demuxSampleAes(e,t,n){const r=this.demux(e,n,!0,!this.config.progressive),i=this.sampleAes=new e6(this.observer,this.config,t);return this.decrypt(r,i)}decrypt(e,t){return new Promise((n=>{const{audioTrack:r,videoTrack:i}=e;r.samples&&"aac"===r.segmentCodec?t.decryptAacSamples(r.samples,0,(()=>{i.samples?t.decryptAvcSamples(i.samples,0,0,(()=>{n(e)})):n(e)})):i.samples&&t.decryptAvcSamples(i.samples,0,0,(()=>{n(e)}))}))}destroy(){this._duration=0}parseAACPES(e,t){let n=0;const r=this.aacOverFlow;let i,a,o,s=t.data;if(r){this.aacOverFlow=null;const t=r.missing,i=r.sample.unit.byteLength;if(-1===t)s=U2(r.sample.unit,s);else{const a=i-t;r.sample.unit.set(s.subarray(0,t),a),e.samples.push(r.sample),n=r.missing}}for(i=n,a=s.length;i<a-1&&!L5(s,i);i++);if(i!==n){let e;const t=i<a-1;if(e=t?`AAC PES did not start with ADTS header,offset:${i}`:"No ADTS header found in AAC PES",o6(this.observer,new Error(e),t),!t)return}if(M5(e,this.observer,s,i,this.audioCodec),void 0!==t.pts)o=t.pts;else{if(!r)return void x1.warn("[tsdemuxer]: AAC PES unknown PTS");{const t=N5(e.samplerate);o=r.sample.pts+t}}let l,c=0;for(;i<a;){if(l=O5(e,s,i,o,c),i+=l.length,l.missing){this.aacOverFlow=l;break}for(c++;i<a-1&&!L5(s,i);i++);}}parseMPEGPES(e,t){const n=t.data,r=n.length;let i=0,a=0;const o=t.pts;if(void 0!==o)for(;a<r;)if(H5(n,a)){const t=V5(e,n,a,o,i);if(!t)break;a+=t.length,i++}else a++;else x1.warn("[tsdemuxer]: MPEG PES unknown PTS")}parseAC3PES(e,t){{const n=t.data,r=t.pts;if(void 0===r)return void x1.warn("[tsdemuxer]: AC3 PES unknown PTS");const i=n.length;let a,o=0,s=0;for(;s<i&&(a=Q5(e,n,s,r,o++))>0;)s+=a}}parseID3PES(e,t){if(void 0===t.pts)return void x1.warn("[tsdemuxer]: ID3 PES unknown PTS");const n=d1({},t,{type:this._videoTrack?$3:U3,duration:Number.POSITIVE_INFINITY});e.samples.push(n)}}function r6(e,t){return((31&e[t+1])<<8)+e[t+2]}function i6(e,t){return(31&e[t+10])<<8|e[t+11]}function a6(e,t,n,r,i){const a={audioPid:-1,videoPid:-1,id3Pid:-1,segmentVideoCodec:"avc",segmentAudioCodec:"aac"},o=t+3+((15&e[t+1])<<8|e[t+2])-4;for(t+=12+((15&e[t+10])<<8|e[t+11]);t<o;){const o=r6(e,t),s=(15&e[t+3])<<8|e[t+4];switch(e[t]){case 207:if(!r){s6("ADTS AAC");break}case 15:-1===a.audioPid&&(a.audioPid=o);break;case 21:-1===a.id3Pid&&(a.id3Pid=o);break;case 219:if(!r){s6("H.264");break}case 27:-1===a.videoPid&&(a.videoPid=o,a.segmentVideoCodec="avc");break;case 3:case 4:n.mpeg||n.mp3?-1===a.audioPid&&(a.audioPid=o,a.segmentAudioCodec="mp3"):x1.log("MPEG audio found, not supported in this browser");break;case 193:if(!r){s6("AC-3");break}case 129:n.ac3?-1===a.audioPid&&(a.audioPid=o,a.segmentAudioCodec="ac3"):x1.log("AC-3 audio found, not supported in this browser");break;case 6:if(-1===a.audioPid&&s>0){let r=t+5,i=s;for(;i>2;){if(106===e[r])!0!==n.ac3?x1.log("AC-3 audio found, not supported in this browser for now"):(a.audioPid=o,a.segmentAudioCodec="ac3");const t=e[r+1]+2;r+=t,i-=t}}break;case 194:case 135:return o6(i,new Error("Unsupported EC-3 in M2TS found")),a;case 36:return o6(i,new Error("Unsupported HEVC in M2TS found")),a}t+=s+5}return a}function o6(e,t,n){x1.warn(`parsing error: ${t.message}`),e.emit(m1.ERROR,m1.ERROR,{type:g1.MEDIA_ERROR,details:v1.FRAG_PARSING_ERROR,fatal:!1,levelRetry:n,error:t,reason:t.message})}function s6(e){x1.log(`${e} with AES-128-CBC encryption found in unencrypted stream`)}function l6(e){let t,n,r,i,a,o=0;const s=e.data;if(!e||0===e.size)return null;for(;s[0].length<19&&s.length>1;)s[0]=U2(s[0],s[1]),s.splice(1,1);t=s[0];if(1===(t[0]<<16)+(t[1]<<8)+t[2]){if(n=(t[4]<<8)+t[5],n&&n>e.size-6)return null;const l=t[7];192&l&&(i=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2,64&l?(a=536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2,i-a>54e5&&(x1.warn(`${Math.round((i-a)/9e4)}s delta between PTS and DTS, align them`),i=a)):a=i),r=t[8];let c=r+9;if(e.size<=c)return null;e.size-=c;const u=new Uint8Array(e.size);for(let e=0,n=s.length;e<n;e++){t=s[e];let n=t.byteLength;if(c){if(c>n){c-=n;continue}t=t.subarray(c),n-=c,c=0}u.set(t,o),o+=n}return n&&(n-=r+3),{data:u,pts:i,dts:a,len:n}}return null}class c6{static getSilentFrame(e,t){if("mp4a.40.2"===e){if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}}}const u6=Math.pow(2,32)-1;class d6{static init(){let e;for(e in d6.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],dac3:[],"ac-3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},d6.types)d6.types.hasOwnProperty(e)&&(d6.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);const t=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),n=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);d6.HDLR_TYPES={video:t,audio:n};const r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),i=new Uint8Array([0,0,0,0,0,0,0,0]);d6.STTS=d6.STSC=d6.STCO=i,d6.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),d6.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),d6.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),d6.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);const a=new Uint8Array([105,115,111,109]),o=new Uint8Array([97,118,99,49]),s=new Uint8Array([0,0,0,1]);d6.FTYP=d6.box(d6.types.ftyp,a,s,a,o),d6.DINF=d6.box(d6.types.dinf,d6.box(d6.types.dref,r))}static box(e){let t=8;for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];let a=r.length;const o=a;for(;a--;)t+=r[a].byteLength;const s=new Uint8Array(t);for(s[0]=t>>24&255,s[1]=t>>16&255,s[2]=t>>8&255,s[3]=255&t,s.set(e,4),a=0,t=8;a<o;a++)s.set(r[a],t),t+=r[a].byteLength;return s}static hdlr(e){return d6.box(d6.types.hdlr,d6.HDLR_TYPES[e])}static mdat(e){return d6.box(d6.types.mdat,e)}static mdhd(e,t){t*=e;const n=Math.floor(t/(u6+1)),r=Math.floor(t%(u6+1));return d6.box(d6.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,n>>24,n>>16&255,n>>8&255,255&n,r>>24,r>>16&255,r>>8&255,255&r,85,196,0,0]))}static mdia(e){return d6.box(d6.types.mdia,d6.mdhd(e.timescale,e.duration),d6.hdlr(e.type),d6.minf(e))}static mfhd(e){return d6.box(d6.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e]))}static minf(e){return"audio"===e.type?d6.box(d6.types.minf,d6.box(d6.types.smhd,d6.SMHD),d6.DINF,d6.stbl(e)):d6.box(d6.types.minf,d6.box(d6.types.vmhd,d6.VMHD),d6.DINF,d6.stbl(e))}static moof(e,t,n){return d6.box(d6.types.moof,d6.mfhd(e),d6.traf(n,t))}static moov(e){let t=e.length;const n=[];for(;t--;)n[t]=d6.trak(e[t]);return d6.box.apply(null,[d6.types.moov,d6.mvhd(e[0].timescale,e[0].duration)].concat(n).concat(d6.mvex(e)))}static mvex(e){let t=e.length;const n=[];for(;t--;)n[t]=d6.trex(e[t]);return d6.box.apply(null,[d6.types.mvex,...n])}static mvhd(e,t){t*=e;const n=Math.floor(t/(u6+1)),r=Math.floor(t%(u6+1)),i=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,n>>24,n>>16&255,n>>8&255,255&n,r>>24,r>>16&255,r>>8&255,255&r,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return d6.box(d6.types.mvhd,i)}static sdtp(e){const t=e.samples||[],n=new Uint8Array(4+t.length);let r,i;for(r=0;r<t.length;r++)i=t[r].flags,n[r+4]=i.dependsOn<<4|i.isDependedOn<<2|i.hasRedundancy;return d6.box(d6.types.sdtp,n)}static stbl(e){return d6.box(d6.types.stbl,d6.stsd(e),d6.box(d6.types.stts,d6.STTS),d6.box(d6.types.stsc,d6.STSC),d6.box(d6.types.stsz,d6.STSZ),d6.box(d6.types.stco,d6.STCO))}static avc1(e){let t,n,r,i=[],a=[];for(t=0;t<e.sps.length;t++)n=e.sps[t],r=n.byteLength,i.push(r>>>8&255),i.push(255&r),i=i.concat(Array.prototype.slice.call(n));for(t=0;t<e.pps.length;t++)n=e.pps[t],r=n.byteLength,a.push(r>>>8&255),a.push(255&r),a=a.concat(Array.prototype.slice.call(n));const o=d6.box(d6.types.avcC,new Uint8Array([1,i[3],i[4],i[5],255,224|e.sps.length].concat(i).concat([e.pps.length]).concat(a))),s=e.width,l=e.height,c=e.pixelRatio[0],u=e.pixelRatio[1];return d6.box(d6.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,s>>8&255,255&s,l>>8&255,255&l,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o,d6.box(d6.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),d6.box(d6.types.pasp,new Uint8Array([c>>24,c>>16&255,c>>8&255,255&c,u>>24,u>>16&255,u>>8&255,255&u])))}static esds(e){const t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))}static audioStsd(e){const t=e.samplerate;return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,t>>8&255,255&t,0,0])}static mp4a(e){return d6.box(d6.types.mp4a,d6.audioStsd(e),d6.box(d6.types.esds,d6.esds(e)))}static mp3(e){return d6.box(d6.types[".mp3"],d6.audioStsd(e))}static ac3(e){return d6.box(d6.types["ac-3"],d6.audioStsd(e),d6.box(d6.types.dac3,e.config))}static stsd(e){return"audio"===e.type?"mp3"===e.segmentCodec&&"mp3"===e.codec?d6.box(d6.types.stsd,d6.STSD,d6.mp3(e)):"ac3"===e.segmentCodec?d6.box(d6.types.stsd,d6.STSD,d6.ac3(e)):d6.box(d6.types.stsd,d6.STSD,d6.mp4a(e)):d6.box(d6.types.stsd,d6.STSD,d6.avc1(e))}static tkhd(e){const t=e.id,n=e.duration*e.timescale,r=e.width,i=e.height,a=Math.floor(n/(u6+1)),o=Math.floor(n%(u6+1));return d6.box(d6.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,0,0,0,0,a>>24,a>>16&255,a>>8&255,255&a,o>>24,o>>16&255,o>>8&255,255&o,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,r>>8&255,255&r,0,0,i>>8&255,255&i,0,0]))}static traf(e,t){const n=d6.sdtp(e),r=e.id,i=Math.floor(t/(u6+1)),a=Math.floor(t%(u6+1));return d6.box(d6.types.traf,d6.box(d6.types.tfhd,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r])),d6.box(d6.types.tfdt,new Uint8Array([1,0,0,0,i>>24,i>>16&255,i>>8&255,255&i,a>>24,a>>16&255,a>>8&255,255&a])),d6.trun(e,n.length+16+20+8+16+8+8),n)}static trak(e){return e.duration=e.duration||4294967295,d6.box(d6.types.trak,d6.tkhd(e),d6.mdia(e))}static trex(e){const t=e.id;return d6.box(d6.types.trex,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}static trun(e,t){const n=e.samples||[],r=n.length,i=12+16*r,a=new Uint8Array(i);let o,s,l,c,u,d;for(t+=8+i,a.set(["video"===e.type?1:0,0,15,1,r>>>24&255,r>>>16&255,r>>>8&255,255&r,t>>>24&255,t>>>16&255,t>>>8&255,255&t],0),o=0;o<r;o++)s=n[o],l=s.duration,c=s.size,u=s.flags,d=s.cts,a.set([l>>>24&255,l>>>16&255,l>>>8&255,255&l,c>>>24&255,c>>>16&255,c>>>8&255,255&c,u.isLeading<<2|u.dependsOn,u.isDependedOn<<6|u.hasRedundancy<<4|u.paddingValue<<1|u.isNonSync,61440&u.degradPrio,15&u.degradPrio,d>>>24&255,d>>>16&255,d>>>8&255,255&d],12+16*o);return d6.box(d6.types.trun,a)}static initSegment(e){d6.types||d6.init();const t=d6.moov(e);return U2(d6.FTYP,t)}}d6.types=void 0,d6.HDLR_TYPES=void 0,d6.STTS=void 0,d6.STSC=void 0,d6.STCO=void 0,d6.STSZ=void 0,d6.VMHD=void 0,d6.SMHD=void 0,d6.STSD=void 0,d6.FTYP=void 0,d6.DINF=void 0;function h6(e,t){const n=e*t*(arguments.length>2&&void 0!==arguments[2]?arguments[2]:1);return arguments.length>3&&void 0!==arguments[3]&&arguments[3]?Math.round(n):n}function p6(e){return h6(e,1e3,1/9e4,arguments.length>1&&void 0!==arguments[1]&&arguments[1])}let f6,m6=null,g6=null;class v6{constructor(e,t,n){if(this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextAvcDts=null,this.nextAudioPts=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.videoTrackConfig=void 0,this.observer=e,this.config=t,this.typeSupported=n,this.ISGenerated=!1,null===m6){const e=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);m6=e?parseInt(e[1]):0}if(null===g6){const e=navigator.userAgent.match(/Safari\/(\d+)/i);g6=e?parseInt(e[1]):0}}destroy(){this.config=this.videoTrackConfig=this._initPTS=this._initDTS=null}resetTimeStamp(e){x1.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=e}resetNextTimestamp(){x1.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1}resetInitSegment(){x1.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1,this.videoTrackConfig=void 0}getVideoStartPts(e){let t=!1;const n=e[0].pts,r=e.reduce(((e,r)=>{let i=r.pts,a=i-e;return a<-4294967296&&(t=!0,i=y6(i,n),a=i-e),a>0?e:i}),n);return t&&x1.debug("PTS rollover detected"),r}remux(e,t,n,r,i,a,o,s){let l,c,u,d,h,p,f=i,m=i;const g=e.pid>-1,v=t.pid>-1,y=t.samples.length,b=e.samples.length>0,w=o&&y>0||y>1;if((!g||b)&&(!v||w)||this.ISGenerated||o){if(this.ISGenerated){var E,x,_,A;const e=this.videoTrackConfig;!e||t.width===e.width&&t.height===e.height&&(null==(E=t.pixelRatio)?void 0:E[0])===(null==(x=e.pixelRatio)?void 0:x[0])&&(null==(_=t.pixelRatio)?void 0:_[1])===(null==(A=e.pixelRatio)?void 0:A[1])||this.resetInitSegment()}else u=this.generateIS(e,t,i,a);const n=this.isVideoContiguous;let r,o=-1;if(w&&(o=function(e){for(let t=0;t<e.length;t++)if(e[t].key)return t;return-1}(t.samples),!n&&this.config.forceKeyFrameOnDiscontinuity))if(p=!0,o>0){x1.warn(`[mp4-remuxer]: Dropped ${o} out of ${y} video samples due to a missing keyframe`);const e=this.getVideoStartPts(t.samples);t.samples=t.samples.slice(o),t.dropped+=o,m+=(t.samples[0].pts-e)/t.inputTimeScale,r=m}else-1===o&&(x1.warn(`[mp4-remuxer]: No keyframe found out of ${y} video samples`),p=!1);if(this.ISGenerated){if(b&&w){const n=this.getVideoStartPts(t.samples),r=(y6(e.samples[0].pts,n)-n)/t.inputTimeScale;f+=Math.max(0,r),m+=Math.max(0,-r)}if(b){if(e.samplerate||(x1.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),u=this.generateIS(e,t,i,a)),c=this.remuxAudio(e,f,this.isAudioContiguous,a,v||w||s===I3?m:void 0),w){const r=c?c.endPTS-c.startPTS:0;t.inputTimeScale||(x1.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),u=this.generateIS(e,t,i,a)),l=this.remuxVideo(t,m,n,r)}}else w&&(l=this.remuxVideo(t,m,n,0));l&&(l.firstKeyFrame=o,l.independent=-1!==o,l.firstKeyFramePTS=r)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(n.samples.length&&(h=b6(n,i,this._initPTS,this._initDTS)),r.samples.length&&(d=w6(r,i,this._initPTS))),{audio:c,video:l,initSegment:u,independent:p,text:d,id3:h}}generateIS(e,t,n,r){const i=e.samples,a=t.samples,o=this.typeSupported,s={},l=this._initPTS;let c,u,d,h=!l||r,p="audio/mp4";if(h&&(c=u=1/0),e.config&&i.length){switch(e.timescale=e.samplerate,e.segmentCodec){case"mp3":o.mpeg?(p="audio/mpeg",e.codec=""):o.mp3&&(e.codec="mp3");break;case"ac3":e.codec="ac-3"}s.audio={id:"audio",container:p,codec:e.codec,initSegment:"mp3"===e.segmentCodec&&o.mpeg?new Uint8Array(0):d6.initSegment([e]),metadata:{channelCount:e.channelCount}},h&&(d=e.inputTimeScale,l&&d===l.timescale?h=!1:c=u=i[0].pts-Math.round(d*n))}if(t.sps&&t.pps&&a.length){if(t.timescale=t.inputTimeScale,s.video={id:"main",container:"video/mp4",codec:t.codec,initSegment:d6.initSegment([t]),metadata:{width:t.width,height:t.height}},h)if(d=t.inputTimeScale,l&&d===l.timescale)h=!1;else{const e=this.getVideoStartPts(a),t=Math.round(d*n);u=Math.min(u,y6(a[0].dts,e)-t),c=Math.min(c,e-t)}this.videoTrackConfig={width:t.width,height:t.height,pixelRatio:t.pixelRatio}}if(Object.keys(s).length)return this.ISGenerated=!0,h?(this._initPTS={baseTime:c,timescale:d},this._initDTS={baseTime:u,timescale:d}):c=d=void 0,{tracks:s,initPTS:c,timescale:d}}remuxVideo(e,t,n,r){const i=e.inputTimeScale,a=e.samples,o=[],s=a.length,l=this._initPTS;let c,u,d=this.nextAvcDts,h=8,p=this.videoSampleDuration,f=Number.POSITIVE_INFINITY,m=Number.NEGATIVE_INFINITY,g=!1;if(!n||null===d){const e=t*i,r=a[0].pts-y6(a[0].dts,a[0].pts);m6&&null!==d&&Math.abs(e-r-d)<15e3?n=!0:d=e-r}const v=l.baseTime*i/l.timescale;for(let P=0;P<s;P++){const e=a[P];e.pts=y6(e.pts-v,d),e.dts=y6(e.dts-v,d),e.dts<a[P>0?P-1:P].dts&&(g=!0)}g&&a.sort((function(e,t){const n=e.dts-t.dts,r=e.pts-t.pts;return n||r})),c=a[0].dts,u=a[a.length-1].dts;const y=u-c,b=y?Math.round(y/(s-1)):p||e.inputTimeScale/30;if(n){const e=c-d,n=e>b,r=e<-1;if((n||r)&&(n?x1.warn(`AVC: ${p6(e,!0)} ms (${e}dts) hole between fragments detected at ${t.toFixed(3)}`):x1.warn(`AVC: ${p6(-e,!0)} ms (${e}dts) overlapping between fragments detected at ${t.toFixed(3)}`),!r||d>=a[0].pts||m6)){c=d;const t=a[0].pts-e;if(n)a[0].dts=c,a[0].pts=t;else for(let n=0;n<a.length&&!(a[n].dts>t);n++)a[n].dts-=e,a[n].pts-=e;x1.log(`Video: Initial PTS/DTS adjusted: ${p6(t,!0)}/${p6(c,!0)}, delta: ${p6(e,!0)} ms`)}}c=Math.max(0,c);let w=0,E=0,x=c;for(let P=0;P<s;P++){const e=a[P],t=e.units,n=t.length;let r=0;for(let i=0;i<n;i++)r+=t[i].data.length;E+=r,w+=n,e.length=r,e.dts<x?(e.dts=x,x+=b/4|0||1):x=e.dts,f=Math.min(e.pts,f),m=Math.max(e.pts,m)}u=a[s-1].dts;const _=E+4*w+8;let A;try{A=new Uint8Array(_)}catch(L){return void this.observer.emit(m1.ERROR,m1.ERROR,{type:g1.MUX_ERROR,details:v1.REMUX_ALLOC_ERROR,fatal:!1,error:L,bytes:_,reason:`fail allocating video mdat ${_}`})}const T=new DataView(A.buffer);T.setUint32(0,_),A.set(d6.types.mdat,4);let S=!1,k=Number.POSITIVE_INFINITY,C=Number.POSITIVE_INFINITY,I=Number.NEGATIVE_INFINITY,R=Number.NEGATIVE_INFINITY;for(let P=0;P<s;P++){const e=a[P],t=e.units;let n,l=0;for(let r=0,i=t.length;r<i;r++){const e=t[r],n=e.data,i=e.data.byteLength;T.setUint32(h,i),h+=4,A.set(n,h),h+=i,l+=4+i}if(P<s-1)p=a[P+1].dts-e.dts,n=a[P+1].pts-e.pts;else{const t=this.config,o=P>0?e.dts-a[P-1].dts:b;if(n=P>0?e.pts-a[P-1].pts:b,t.stretchShortVideoTrack&&null!==this.nextAudioPts){const n=Math.floor(t.maxBufferHole*i),a=(r?f+r*i:this.nextAudioPts)-e.pts;a>n?(p=a-o,p<0?p=o:S=!0,x1.log(`[mp4-remuxer]: It is approximately ${a/90} ms to the next segment; using duration ${p/90} ms for the last video frame.`)):p=o}else p=o}const c=Math.round(e.pts-e.dts);k=Math.min(k,p),I=Math.max(I,p),C=Math.min(C,n),R=Math.max(R,n),o.push(new E6(e.key,p,l,c))}if(o.length)if(m6){if(m6<70){const e=o[0].flags;e.dependsOn=2,e.isNonSync=0}}else if(g6&&R-C<I-k&&b/I<.025&&0===o[0].cts){x1.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");let e=c;for(let t=0,n=o.length;t<n;t++){const r=e+o[t].duration,i=e+o[t].cts;if(t<n-1){const e=r+o[t+1].cts;o[t].duration=e-i}else o[t].duration=t?o[t-1].duration:b;o[t].cts=0,e=r}}p=S||!p?b:p,this.nextAvcDts=d=u+p,this.videoSampleDuration=p,this.isVideoContiguous=!0;const D={data1:d6.moof(e.sequenceNumber++,c,d1({},e,{samples:o})),data2:A,startPTS:f/i,endPTS:(m+p)/i,startDTS:c/i,endDTS:d/i,type:"video",hasAudio:!1,hasVideo:!0,nb:o.length,dropped:e.dropped};return e.samples=[],e.dropped=0,D}getSamplesPerFrame(e){switch(e.segmentCodec){case"mp3":return 1152;case"ac3":return 1536;default:return 1024}}remuxAudio(e,t,n,r,i){const a=e.inputTimeScale,o=a/(e.samplerate?e.samplerate:a),s=this.getSamplesPerFrame(e),l=s*o,c=this._initPTS,u="mp3"===e.segmentCodec&&this.typeSupported.mpeg,d=[],h=void 0!==i;let p=e.samples,f=u?0:8,m=this.nextAudioPts||-1;const g=t*a,v=c.baseTime*a/c.timescale;if(this.isAudioContiguous=n=n||p.length&&m>0&&(r&&Math.abs(g-m)<9e3||Math.abs(y6(p[0].pts-v,g)-m)<20*l),p.forEach((function(e){e.pts=y6(e.pts-v,g)})),!n||m<0){if(p=p.filter((e=>e.pts>=0)),!p.length)return;m=0===i?0:r&&!h?Math.max(0,g):p[0].pts}if("aac"===e.segmentCodec){const t=this.config.maxAudioFramesDrift;for(let n=0,r=m;n<p.length;n++){const i=p[n],o=i.pts,s=o-r,c=Math.abs(1e3*s/a);if(s<=-t*l&&h)0===n&&(x1.warn(`Audio frame @ ${(o/a).toFixed(3)}s overlaps nextAudioPts by ${Math.round(1e3*s/a)} ms.`),this.nextAudioPts=m=r=o);else if(s>=t*l&&c<1e4&&h){let t=Math.round(s/l);r=o-t*l,r<0&&(t--,r+=l),0===n&&(this.nextAudioPts=m=r),x1.warn(`[mp4-remuxer]: Injecting ${t} audio frame @ ${(r/a).toFixed(3)}s due to ${Math.round(1e3*s/a)} ms gap.`);for(let a=0;a<t;a++){const t=Math.max(r,0);let a=c6.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);a||(x1.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),a=i.unit.subarray()),p.splice(n,0,{unit:a,pts:t}),r+=l,n++}}i.pts=r,r+=l}}let y,b=null,w=null,E=0,x=p.length;for(;x--;)E+=p[x].unit.byteLength;for(let R=0,D=p.length;R<D;R++){const t=p[R],r=t.unit;let i=t.pts;if(null!==w){d[R-1].duration=Math.round((i-w)/o)}else{if(n&&"aac"===e.segmentCodec&&(i=m),b=i,!(E>0))return;E+=f;try{y=new Uint8Array(E)}catch(I){return void this.observer.emit(m1.ERROR,m1.ERROR,{type:g1.MUX_ERROR,details:v1.REMUX_ALLOC_ERROR,fatal:!1,error:I,bytes:E,reason:`fail allocating audio mdat ${E}`})}if(!u){new DataView(y.buffer).setUint32(0,E),y.set(d6.types.mdat,4)}}y.set(r,f);const a=r.byteLength;f+=a,d.push(new E6(!0,s,a,0)),w=i}const _=d.length;if(!_)return;const A=d[d.length-1];this.nextAudioPts=m=w+o*A.duration;const T=u?new Uint8Array(0):d6.moof(e.sequenceNumber++,b/o,d1({},e,{samples:d}));e.samples=[];const S=b/a,k=m/a,C={data1:T,data2:y,startPTS:S,endPTS:k,startDTS:S,endDTS:k,type:"audio",hasAudio:!0,hasVideo:!1,nb:_};return this.isAudioContiguous=!0,C}remuxEmptyAudio(e,t,n,r){const i=e.inputTimeScale,a=i/(e.samplerate?e.samplerate:i),o=this.nextAudioPts,s=this._initDTS,l=9e4*s.baseTime/s.timescale,c=(null!==o?o:r.startDTS*i)+l,u=r.endDTS*i+l,d=1024*a,h=Math.ceil((u-c)/d),p=c6.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(x1.warn("[mp4-remuxer]: remux empty Audio"),!p)return void x1.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec");const f=[];for(let m=0;m<h;m++){const e=c+m*d;f.push({unit:p,pts:e,dts:e})}return e.samples=f,this.remuxAudio(e,t,n,!1)}}function y6(e,t){let n;if(null===t)return e;for(n=t<e?-8589934592:8589934592;Math.abs(e-t)>4294967296;)e+=n;return e}function b6(e,t,n,r){const i=e.samples.length;if(!i)return;const a=e.inputTimeScale;for(let s=0;s<i;s++){const i=e.samples[s];i.pts=y6(i.pts-n.baseTime*a/n.timescale,t*a)/a,i.dts=y6(i.dts-r.baseTime*a/r.timescale,t*a)/a}const o=e.samples;return e.samples=[],{samples:o}}function w6(e,t,n){const r=e.samples.length;if(!r)return;const i=e.inputTimeScale;for(let o=0;o<r;o++){const r=e.samples[o];r.pts=y6(r.pts-n.baseTime*i/n.timescale,t*i)/i}e.samples.sort(((e,t)=>e.pts-t.pts));const a=e.samples;return e.samples=[],{samples:a}}class E6{constructor(e,t,n,r){this.size=void 0,this.duration=void 0,this.cts=void 0,this.flags=void 0,this.duration=t,this.size=n,this.cts=r,this.flags={isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:e?2:1,isNonSync:e?0:1}}}function x6(e,t){const n=null==e?void 0:e.codec;if(n&&n.length>4)return n;if(t===I1){if("ec-3"===n||"ac-3"===n||"alac"===n)return n;if("fLaC"===n||"Opus"===n){return c3(n,!1)}const e="mp4a.40.5";return x1.info(`Parsed audio codec "${n}" or audio object type not handled. Using "${e}"`),e}return x1.warn(`Unhandled video codec "${n}"`),"hvc1"===n||"hev1"===n?"hvc1.1.6.L120.90":"av01"===n?"av01.0.04M.08":"avc1.42e01e"}try{f6=self.performance.now.bind(self.performance)}catch(mme){x1.debug("Unable to use Performance API on this environment"),f6=null==U1?void 0:U1.Date.now}const _6=[{demux:class{constructor(e,t){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=t}resetTimeStamp(){}resetInitSegment(e,t,n,r){const i=this.videoTrack=S5("video",1),a=this.audioTrack=S5("audio",1),o=this.txtTrack=S5("text",1);if(this.id3Track=S5("id3",1),this.timeOffset=0,null==e||!e.byteLength)return;const s=L2(e);if(s.video){const{id:e,timescale:t,codec:n}=s.video;i.id=e,i.timescale=o.timescale=t,i.codec=n}if(s.audio){const{id:e,timescale:t,codec:n}=s.audio;a.id=e,a.timescale=t,a.codec=n}o.id=_2.text,i.sampleDuration=0,i.duration=a.duration=r}resetContiguity(){this.remainderData=null}static probe(e){return function(e){const t=e.byteLength;for(let n=0;n<t;){const r=S2(e,n);if(r>8&&109===e[n+4]&&111===e[n+5]&&111===e[n+6]&&102===e[n+7])return!0;n=r>1?n+r:t}return!1}(e)}demux(e,t){this.timeOffset=t;let n=e;const r=this.videoTrack,i=this.txtTrack;if(this.config.progressive){this.remainderData&&(n=U2(this.remainderData,e));const t=function(e){const t={valid:null,remainder:null},n=R2(e,["moof"]);if(n.length<2)return t.remainder=e,t;const r=n[n.length-1];return t.valid=n2(e,0,r.byteOffset-8),t.remainder=n2(e,r.byteOffset-8),t}(n);this.remainderData=t.remainder,r.samples=t.valid||new Uint8Array}else r.samples=n;const a=this.extractID3Track(r,t);return i.samples=B2(t,r),{videoTrack:r,audioTrack:this.audioTrack,id3Track:a,textTrack:this.txtTrack}}flush(){const e=this.timeOffset,t=this.videoTrack,n=this.txtTrack;t.samples=this.remainderData||new Uint8Array,this.remainderData=null;const r=this.extractID3Track(t,this.timeOffset);return n.samples=B2(e,t),{videoTrack:t,audioTrack:S5(),id3Track:r,textTrack:S5()}}extractID3Track(e,t){const n=this.id3Track;if(e.samples.length){const r=R2(e.samples,["emsg"]);r&&r.forEach((e=>{const r=function(e){const t=e[0];let n="",r="",i=0,a=0,o=0,s=0,l=0,c=0;if(0===t){for(;"\0"!==A2(e.subarray(c,c+1));)n+=A2(e.subarray(c,c+1)),c+=1;for(n+=A2(e.subarray(c,c+1)),c+=1;"\0"!==A2(e.subarray(c,c+1));)r+=A2(e.subarray(c,c+1)),c+=1;r+=A2(e.subarray(c,c+1)),c+=1,i=S2(e,12),a=S2(e,16),s=S2(e,20),l=S2(e,24),c=28}else if(1===t){c+=4,i=S2(e,c),c+=4;const t=S2(e,c);c+=4;const a=S2(e,c);for(c+=4,o=2**32*t+a,p1(o)||(o=Number.MAX_SAFE_INTEGER,x1.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),s=S2(e,c),c+=4,l=S2(e,c),c+=4;"\0"!==A2(e.subarray(c,c+1));)n+=A2(e.subarray(c,c+1)),c+=1;for(n+=A2(e.subarray(c,c+1)),c+=1;"\0"!==A2(e.subarray(c,c+1));)r+=A2(e.subarray(c,c+1)),c+=1;r+=A2(e.subarray(c,c+1)),c+=1}return{schemeIdUri:n,value:r,timeScale:i,presentationTime:o,presentationTimeDelta:a,eventDuration:s,id:l,payload:e.subarray(c,e.byteLength)}}(e);if(G5.test(r.schemeIdUri)){const e=h1(r.presentationTime)?r.presentationTime/r.timeScale:t+r.presentationTimeDelta/r.timeScale;let i=4294967295===r.eventDuration?Number.POSITIVE_INFINITY:r.eventDuration/r.timeScale;i<=.001&&(i=Number.POSITIVE_INFINITY);const a=r.payload;n.samples.push({data:a,len:a.byteLength,dts:e,pts:e,type:$3,duration:i})}}))}return n}demuxSampleAes(e,t,n){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))}destroy(){}},remux:class{constructor(){this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null}destroy(){}resetTimeStamp(e){this.initPTS=e,this.lastEndTime=null}resetNextTimestamp(){this.lastEndTime=null}resetInitSegment(e,t,n,r){this.audioCodec=t,this.videoCodec=n,this.generateInitSegment(function(e,t){if(!e||!t)return e;const n=t.keyId;n&&t.isCommonEncryption&&R2(e,["moov","trak"]).forEach((e=>{const t=R2(e,["mdia","minf","stbl","stsd"])[0].subarray(8);let r=R2(t,["enca"]);const i=r.length>0;i||(r=R2(t,["encv"])),r.forEach((e=>{R2(i?e.subarray(28):e.subarray(78),["sinf"]).forEach((e=>{const t=j2(e);if(t){const e=t.subarray(8,24);e.some((e=>0!==e))||(x1.log(`[eme] Patching keyId in 'enc${i?"a":"v"}>sinf>>tenc' box: ${w2(e)} -> ${w2(n)}`),t.set(n,8))}}))}))}));return e}(e,r)),this.emitInitSegment=!0}generateInitSegment(e){let{audioCodec:t,videoCodec:n}=this;if(null==e||!e.byteLength)return this.initTracks=void 0,void(this.initData=void 0);const r=this.initData=L2(e);r.audio&&(t=x6(r.audio,I1)),r.video&&(n=x6(r.video,R1));const i={};r.audio&&r.video?i.audiovideo={container:"video/mp4",codec:t+","+n,initSegment:e,id:"main"}:r.audio?i.audio={container:"audio/mp4",codec:t,initSegment:e,id:"audio"}:r.video?i.video={container:"video/mp4",codec:n,initSegment:e,id:"main"}:x1.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=i}remux(e,t,n,r,i,a){var o,s;let{initPTS:l,lastEndTime:c}=this;const u={audio:void 0,video:void 0,text:r,id3:n,initSegment:void 0};h1(c)||(c=this.lastEndTime=i||0);const d=t.samples;if(null==d||!d.length)return u;const h={initPTS:void 0,timescale:1};let p=this.initData;if(null!=(o=p)&&o.length||(this.generateInitSegment(d),p=this.initData),null==(s=p)||!s.length)return x1.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),u;this.emitInitSegment&&(h.tracks=this.initTracks,this.emitInitSegment=!1);const f=function(e,t){let n=0,r=0,i=0;const a=R2(e,["moof","traf"]);for(let o=0;o<a.length;o++){const e=a[o],s=R2(e,["tfhd"])[0],l=t[S2(s,4)];if(!l)continue;const c=l.default,u=S2(s,0)|(null==c?void 0:c.flags);let d=null==c?void 0:c.duration;8&u&&(d=S2(s,2&u?12:8));const h=l.timescale||9e4,p=R2(e,["trun"]);for(let t=0;t<p.length;t++)n=F2(p[t]),!n&&d&&(n=d*S2(p[t],4)),l.type===R1?r+=n/h:l.type===I1&&(i+=n/h)}if(0===r&&0===i){let t=1/0,n=0,r=0;const i=R2(e,["sidx"]);for(let e=0;e<i.length;e++){const a=D2(i[e]);if(null!=a&&a.references){t=Math.min(t,a.earliestPresentationTime/a.timescale);const e=a.references.reduce(((e,t)=>e+t.info.duration||0),0);n=Math.max(n,e+a.earliestPresentationTime/a.timescale),r=n-t}}if(r&&h1(r))return r}return r||i}(d,p),m=function(e,t){return R2(t,["moof","traf"]).reduce(((t,n)=>{const r=R2(n,["tfdt"])[0],i=r[0],a=R2(n,["tfhd"]).reduce(((t,n)=>{const a=S2(n,4),o=e[a];if(o){let e=S2(r,4);if(1===i){if(e===E2)return x1.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"),t;e*=E2+1,e+=S2(r,8)}const n=e/(o.timescale||9e4);if(h1(n)&&(null===t||n<t))return n}return t}),null);return null!==a&&h1(a)&&(null===t||a<t)?a:t}),null)}(p,d),g=null===m?i:m;(function(e,t,n,r){if(null===e)return!0;const i=Math.max(r,1),a=t-e.baseTime/e.timescale;return Math.abs(a-n)>i}(l,g,i,f)||h.timescale!==l.timescale&&a)&&(h.initPTS=g-i,l&&1===l.timescale&&x1.warn("Adjusting initPTS by "+(h.initPTS-l.baseTime)),this.initPTS=l={baseTime:h.initPTS,timescale:1});const v=e?g-l.baseTime/l.timescale:c,y=v+f;!function(e,t,n){R2(t,["moof","traf"]).forEach((t=>{R2(t,["tfhd"]).forEach((r=>{const i=S2(r,4),a=e[i];if(!a)return;const o=a.timescale||9e4;R2(t,["tfdt"]).forEach((e=>{const t=e[0],r=n*o;if(r){let n=S2(e,4);if(0===t)n-=r,n=Math.max(n,0),I2(e,4,n);else{n*=Math.pow(2,32),n+=S2(e,8),n-=r,n=Math.max(n,0);const t=Math.floor(n/(E2+1)),i=Math.floor(n%(E2+1));I2(e,4,t),I2(e,8,i)}}}))}))}))}(p,d,l.baseTime/l.timescale),f>0?this.lastEndTime=y:(x1.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());const b=!!p.audio,w=!!p.video;let E="";b&&(E+="audio"),w&&(E+="video");const x={data1:d,startPTS:v,startDTS:v,endPTS:y,endDTS:y,type:E,hasAudio:b,hasVideo:w,nb:1,dropped:0};return u.audio="audio"===x.type?x:void 0,u.video="audio"!==x.type?x:void 0,u.initSegment=h,u.id3=b6(n,i,l,l),r.samples.length&&(u.text=w6(r,i,l)),u}}},{demux:n6,remux:v6},{demux:class extends k5{constructor(e,t){super(),this.observer=void 0,this.config=void 0,this.observer=e,this.config=t}resetInitSegment(e,t,n,r){super.resetInitSegment(e,t,n,r),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:t,duration:r,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;const t=a2(e,0);let n=(null==t?void 0:t.length)||0;if(q5(e,n))return!1;for(let r=e.length;n<r;n++)if(P5(e,n))return x1.log("ADTS sync word found !"),!0;return!1}canParse(e,t){return function(e,t){return function(e,t){return t+5<e.length}(e,t)&&I5(e,t)&&D5(e,t)<=e.length-t}(e,t)}appendFrame(e,t,n){M5(e,this.observer,t,n,e.manifestCodec);const r=O5(e,t,n,this.basePTS,this.frameIndex);if(r&&0===r.missing)return r}},remux:v6},{demux:class extends k5{resetInitSegment(e,t,n,r){super.resetInitSegment(e,t,n,r),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:t,duration:r,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;const t=a2(e,0);let n=(null==t?void 0:t.length)||0;if(t&&11===e[n]&&119===e[n+1]&&void 0!==l2(t)&&K5(e,n)<=16)return!1;for(let r=e.length;n<r;n++)if(q5(e,n))return x1.log("MPEG Audio sync word found !"),!0;return!1}canParse(e,t){return function(e,t){return z5(e,t)&&4<=e.length-t}(e,t)}appendFrame(e,t,n){if(null!==this.basePTS)return V5(e,t,n,this.basePTS,this.frameIndex)}},remux:v6}];_6.splice(2,0,{demux:Y5,remux:v6});class A6{constructor(e,t,n,r,i){this.async=!1,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.vendor=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=e,this.typeSupported=t,this.config=n,this.vendor=r,this.id=i}configure(e){this.transmuxConfig=e,this.decrypter&&this.decrypter.reset()}push(e,t,n,r){const i=n.transmuxing;i.executeStart=f6();let a=new Uint8Array(e);const{currentTransmuxState:o,transmuxConfig:s}=this;r&&(this.currentTransmuxState=r);const{contiguous:l,discontinuity:c,trackSwitch:u,accurateTimeOffset:d,timeOffset:h,initSegmentChange:p}=r||o,{audioCodec:f,videoCodec:m,defaultInitPts:g,duration:v,initSegmentData:y}=s,b=function(e,t){let n=null;e.byteLength>0&&null!=(null==t?void 0:t.key)&&null!==t.iv&&null!=t.method&&(n=t);return n}(a,t);if(b&&"AES-128"===b.method){const e=this.getDecrypter();if(!e.isSync())return this.decryptionPromise=e.webCryptoDecrypt(a,b.key.buffer,b.iv.buffer).then((e=>{const t=this.push(e,null,n);return this.decryptionPromise=null,t})),this.decryptionPromise;{let t=e.softwareDecrypt(a,b.key.buffer,b.iv.buffer);if(n.part>-1&&(t=e.flush()),!t)return i.executeEnd=f6(),T6(n);a=new Uint8Array(t)}}const w=this.needsProbing(c,u);if(w){const e=this.configureTransmuxer(a);if(e)return x1.warn(`[transmuxer] ${e.message}`),this.observer.emit(m1.ERROR,m1.ERROR,{type:g1.MEDIA_ERROR,details:v1.FRAG_PARSING_ERROR,fatal:!1,error:e,reason:e.message}),i.executeEnd=f6(),T6(n)}(c||u||p||w)&&this.resetInitSegment(y,f,m,v,t),(c||p||w)&&this.resetInitialTimestamp(g),l||this.resetContiguity();const E=this.transmux(a,b,h,d,n),x=this.currentTransmuxState;return x.contiguous=!0,x.discontinuity=!1,x.trackSwitch=!1,i.executeEnd=f6(),E}flush(e){const t=e.transmuxing;t.executeStart=f6();const{decrypter:n,currentTransmuxState:r,decryptionPromise:i}=this;if(i)return i.then((()=>this.flush(e)));const a=[],{timeOffset:o}=r;if(n){const t=n.flush();t&&a.push(this.push(t,null,e))}const{demuxer:s,remuxer:l}=this;if(!s||!l)return t.executeEnd=f6(),[T6(e)];const c=s.flush(o);return S6(c)?c.then((t=>(this.flushRemux(a,t,e),a))):(this.flushRemux(a,c,e),a)}flushRemux(e,t,n){const{audioTrack:r,videoTrack:i,id3Track:a,textTrack:o}=t,{accurateTimeOffset:s,timeOffset:l}=this.currentTransmuxState;x1.log(`[transmuxer.ts]: Flushed fragment ${n.sn}${n.part>-1?" p: "+n.part:""} of level ${n.level}`);const c=this.remuxer.remux(r,i,a,o,l,s,!0,this.id);e.push({remuxResult:c,chunkMeta:n}),n.transmuxing.executeEnd=f6()}resetInitialTimestamp(e){const{demuxer:t,remuxer:n}=this;t&&n&&(t.resetTimeStamp(e),n.resetTimeStamp(e))}resetContiguity(){const{demuxer:e,remuxer:t}=this;e&&t&&(e.resetContiguity(),t.resetNextTimestamp())}resetInitSegment(e,t,n,r,i){const{demuxer:a,remuxer:o}=this;a&&o&&(a.resetInitSegment(e,t,n,r),o.resetInitSegment(e,t,n,i))}destroy(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)}transmux(e,t,n,r,i){let a;return a=t&&"SAMPLE-AES"===t.method?this.transmuxSampleAes(e,t,n,r,i):this.transmuxUnencrypted(e,n,r,i),a}transmuxUnencrypted(e,t,n,r){const{audioTrack:i,videoTrack:a,id3Track:o,textTrack:s}=this.demuxer.demux(e,t,!1,!this.config.progressive);return{remuxResult:this.remuxer.remux(i,a,o,s,t,n,!1,this.id),chunkMeta:r}}transmuxSampleAes(e,t,n,r,i){return this.demuxer.demuxSampleAes(e,t,n).then((e=>({remuxResult:this.remuxer.remux(e.audioTrack,e.videoTrack,e.id3Track,e.textTrack,n,r,!1,this.id),chunkMeta:i})))}configureTransmuxer(e){const{config:t,observer:n,typeSupported:r,vendor:i}=this;let a;for(let d=0,h=_6.length;d<h;d++){var o;if(null!=(o=_6[d].demux)&&o.probe(e)){a=_6[d];break}}if(!a)return new Error("Failed to find demuxer by probing fragment data");const s=this.demuxer,l=this.remuxer,c=a.remux,u=a.demux;l&&l instanceof c||(this.remuxer=new c(n,t,r,i)),s&&s instanceof u||(this.demuxer=new u(n,t,r),this.probe=u.probe)}needsProbing(e,t){return!this.demuxer||!this.remuxer||e||t}getDecrypter(){let e=this.decrypter;return e||(e=this.decrypter=new u5(this.config)),e}}const T6=e=>({remuxResult:{},chunkMeta:e});function S6(e){return"then"in e&&e.then instanceof Function}class k6{constructor(e,t,n,r,i){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=e,this.videoCodec=t,this.initSegmentData=n,this.duration=r,this.defaultInitPts=i||null}}class C6{constructor(e,t,n,r,i,a){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=e,this.contiguous=t,this.accurateTimeOffset=n,this.trackSwitch=r,this.timeOffset=i,this.initSegmentChange=a}}var I6={exports:{}};!function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function a(e,t,r,a,o){if("function"!==typeof r)throw new TypeError("The listener must be a function");var s=new i(r,a||e,o),l=n?n+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],s]:e._events[l].push(s):(e._events[l]=s,e._eventsCount++),e}function o(e,t){0===--e._eventsCount?e._events=new r:delete e._events[t]}function s(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),s.prototype.eventNames=function(){var e,r,i=[];if(0===this._eventsCount)return i;for(r in e=this._events)t.call(e,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},s.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,a=r.length,o=new Array(a);i<a;i++)o[i]=r[i].fn;return o},s.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},s.prototype.emit=function(e,t,r,i,a,o){var s=n?n+e:e;if(!this._events[s])return!1;var l,c,u=this._events[s],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,r),!0;case 4:return u.fn.call(u.context,t,r,i),!0;case 5:return u.fn.call(u.context,t,r,i,a),!0;case 6:return u.fn.call(u.context,t,r,i,a,o),!0}for(c=1,l=new Array(d-1);c<d;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var h,p=u.length;for(c=0;c<p;c++)switch(u[c].once&&this.removeListener(e,u[c].fn,void 0,!0),d){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,t);break;case 3:u[c].fn.call(u[c].context,t,r);break;case 4:u[c].fn.call(u[c].context,t,r,i);break;default:if(!l)for(h=1,l=new Array(d-1);h<d;h++)l[h-1]=arguments[h];u[c].fn.apply(u[c].context,l)}}return!0},s.prototype.on=function(e,t,n){return a(this,e,t,n,!1)},s.prototype.once=function(e,t,n){return a(this,e,t,n,!0)},s.prototype.removeListener=function(e,t,r,i){var a=n?n+e:e;if(!this._events[a])return this;if(!t)return o(this,a),this;var s=this._events[a];if(s.fn)s.fn!==t||i&&!s.once||r&&s.context!==r||o(this,a);else{for(var l=0,c=[],u=s.length;l<u;l++)(s[l].fn!==t||i&&!s[l].once||r&&s[l].context!==r)&&c.push(s[l]);c.length?this._events[a]=1===c.length?c[0]:c:o(this,a)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&o(this,t)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s}(I6);var R6=r1(I6.exports);class D6{constructor(e,t,n,r){this.error=null,this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0;const i=e.config;this.hls=e,this.id=t,this.useWorker=!!i.enableWorker,this.onTransmuxComplete=n,this.onFlush=r;const a=(e,t)=>{(t=t||{}).frag=this.frag,t.id=this.id,e===m1.ERROR&&(this.error=t.error),this.hls.trigger(e,t)};this.observer=new R6,this.observer.on(m1.FRAG_DECRYPTED,a),this.observer.on(m1.ERROR,a);const o=e3(i.preferManagedMediaSource)||{isTypeSupported:()=>!1},s={mpeg:o.isTypeSupported("audio/mpeg"),mp3:o.isTypeSupported('audio/mp4; codecs="mp3"'),ac3:o.isTypeSupported('audio/mp4; codecs="ac-3"')};if(this.useWorker&&"undefined"!==typeof Worker){if(i.workerPath||"function"===typeof __HLS_WORKER_BUNDLE__){try{i.workerPath?(x1.log(`loading Web Worker ${i.workerPath} for "${t}"`),this.workerContext=function(e){const t=new self.URL(e,self.location.href).href;return{worker:new self.Worker(t),scriptURL:t}}(i.workerPath)):(x1.log(`injecting Web Worker for "${t}"`),this.workerContext=function(){const e=new self.Blob([`var exports={};var module={exports:exports};function define(f){f()};define.amd=true;(${__HLS_WORKER_BUNDLE__.toString()})(true);`],{type:"text/javascript"}),t=self.URL.createObjectURL(e);return{worker:new self.Worker(t),objectURL:t}}()),this.onwmsg=e=>this.onWorkerMessage(e);const{worker:e}=this.workerContext;e.addEventListener("message",this.onwmsg),e.onerror=e=>{const n=new Error(`${e.message}  (${e.filename}:${e.lineno})`);i.enableWorker=!1,x1.warn(`Error in "${t}" Web Worker, fallback to inline`),this.hls.trigger(m1.ERROR,{type:g1.OTHER_ERROR,details:v1.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:n})},e.postMessage({cmd:"init",typeSupported:s,vendor:"",id:t,config:JSON.stringify(i)})}catch(mme){x1.warn(`Error setting up "${t}" Web Worker, fallback to inline`,mme),this.resetWorker(),this.error=null,this.transmuxer=new A6(this.observer,s,i,"",t)}return}}this.transmuxer=new A6(this.observer,s,i,"",t)}resetWorker(){if(this.workerContext){const{worker:e,objectURL:t}=this.workerContext;t&&self.URL.revokeObjectURL(t),e.removeEventListener("message",this.onwmsg),e.onerror=null,e.terminate(),this.workerContext=null}}destroy(){if(this.workerContext)this.resetWorker(),this.onwmsg=void 0;else{const e=this.transmuxer;e&&(e.destroy(),this.transmuxer=null)}const e=this.observer;e&&e.removeAllListeners(),this.frag=null,this.observer=null,this.hls=null}push(e,t,n,r,i,a,o,s,l,c){var u,d;l.transmuxing.start=self.performance.now();const{transmuxer:h}=this,p=a?a.start:i.start,f=i.decryptdata,m=this.frag,g=!(m&&i.cc===m.cc),v=!(m&&l.level===m.level),y=m?l.sn-m.sn:-1,b=this.part?l.part-this.part.index:-1,w=0===y&&l.id>1&&l.id===(null==m?void 0:m.stats.chunkCount),E=!v&&(1===y||0===y&&(1===b||w&&b<=0)),x=self.performance.now();(v||y||0===i.stats.parsing.start)&&(i.stats.parsing.start=x),!a||!b&&E||(a.stats.parsing.start=x);const _=!(m&&(null==(u=i.initSegment)?void 0:u.url)===(null==(d=m.initSegment)?void 0:d.url)),A=new C6(g,E,s,v,p,_);if(!E||g||_){x1.log(`[transmuxer-interface, ${i.type}]: Starting new transmux session for sn: ${l.sn} p: ${l.part} level: ${l.level} id: ${l.id}\n        discontinuity: ${g}\n        trackSwitch: ${v}\n        contiguous: ${E}\n        accurateTimeOffset: ${s}\n        timeOffset: ${p}\n        initSegmentChange: ${_}`);const e=new k6(n,r,t,o,c);this.configureTransmuxer(e)}if(this.frag=i,this.part=a,this.workerContext)this.workerContext.worker.postMessage({cmd:"demux",data:e,decryptdata:f,chunkMeta:l,state:A},e instanceof ArrayBuffer?[e]:[]);else if(h){const t=h.push(e,f,l,A);S6(t)?(h.async=!0,t.then((e=>{this.handleTransmuxComplete(e)})).catch((e=>{this.transmuxerError(e,l,"transmuxer-interface push error")}))):(h.async=!1,this.handleTransmuxComplete(t))}}flush(e){e.transmuxing.start=self.performance.now();const{transmuxer:t}=this;if(this.workerContext)this.workerContext.worker.postMessage({cmd:"flush",chunkMeta:e});else if(t){let n=t.flush(e);S6(n)||t.async?(S6(n)||(n=Promise.resolve(n)),n.then((t=>{this.handleFlushResult(t,e)})).catch((t=>{this.transmuxerError(t,e,"transmuxer-interface flush error")}))):this.handleFlushResult(n,e)}}transmuxerError(e,t,n){this.hls&&(this.error=e,this.hls.trigger(m1.ERROR,{type:g1.MEDIA_ERROR,details:v1.FRAG_PARSING_ERROR,chunkMeta:t,frag:this.frag||void 0,fatal:!1,error:e,err:e,reason:n}))}handleFlushResult(e,t){e.forEach((e=>{this.handleTransmuxComplete(e)})),this.onFlush(t)}onWorkerMessage(e){const t=e.data;if(null==t||!t.event)return void x1.warn("worker message received with no "+(t?"event name":"data"));const n=this.hls;if(this.hls)switch(t.event){case"init":{var r;const e=null==(r=this.workerContext)?void 0:r.objectURL;e&&self.URL.revokeObjectURL(e);break}case"transmuxComplete":this.handleTransmuxComplete(t.data);break;case"flush":this.onFlush(t.data);break;case"workerLog":x1[t.data.logType]&&x1[t.data.logType](t.data.message);break;default:t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,n.trigger(t.event,t.data)}}configureTransmuxer(e){const{transmuxer:t}=this;this.workerContext?this.workerContext.worker.postMessage({cmd:"configure",config:e}):t&&t.configure(e)}handleTransmuxComplete(e){e.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(e)}}function L6(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!P6(e[n].attrs,t[n].attrs))return!1;return!0}function P6(e,t,n){const r=e["STABLE-RENDITION-ID"];return r&&!n?r===t["STABLE-RENDITION-ID"]:!(n||["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED","ASSOC-LANGUAGE"]).some((n=>e[n]!==t[n]))}function M6(e,t){return t.label.toLowerCase()===e.name.toLowerCase()&&(!t.language||t.language.toLowerCase()===(e.lang||"").toLowerCase())}class N6{constructor(e){this.buffered=void 0;const t=(t,n,r)=>{if((n>>>=0)>r-1)throw new DOMException(`Failed to execute '${t}' on 'TimeRanges': The index provided (${n}) is greater than the maximum bound (${r})`);return e[n][t]};this.buffered={get length(){return e.length},end:n=>t("end",n,e.length),start:n=>t("start",n,e.length)}}}class O6{constructor(e){this.buffers=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.buffers=e}append(e,t,n){const r=this.queues[t];r.push(e),1!==r.length||n||this.executeNext(t)}insertAbort(e,t){this.queues[t].unshift(e),this.executeNext(t)}appendBlocker(e){let t;const n=new Promise((e=>{t=e})),r={execute:t,onStart:()=>{},onComplete:()=>{},onError:()=>{}};return this.append(r,e),n}executeNext(e){const t=this.queues[e];if(t.length){const n=t[0];try{n.execute()}catch(Rb){x1.warn(`[buffer-operation-queue]: Exception executing "${e}" SourceBuffer operation: ${Rb}`),n.onError(Rb);const r=this.buffers[e];null!=r&&r.updating||this.shiftAndExecuteNext(e)}}}shiftAndExecuteNext(e){this.queues[e].shift(),this.executeNext(e)}current(e){return this.queues[e][0]}}const j6=/(avc[1234]|hvc1|hev1|dvh[1e]|vp09|av01)(?:\.[^.,]+)+/;function F6(e){const t=e.querySelectorAll("source");[].slice.call(t).forEach((t=>{e.removeChild(t)}))}const U6={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},B6=e=>String.fromCharCode(U6[e]||e),$6=15,V6=100,W6={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},z6={17:2,18:4,21:6,22:8,23:10,19:13,20:15},H6={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},q6={25:2,26:4,29:6,30:8,31:10,27:13,28:15},G6=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];class K6{constructor(){this.time=null,this.verboseLevel=0}log(e,t){if(this.verboseLevel>=e){const n="function"===typeof t?t():t;x1.log(`${this.time} [${e}] ${n}`)}}}const Y6=function(e){const t=[];for(let n=0;n<e.length;n++)t.push(e[n].toString(16));return t};class Q6{constructor(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}setStyles(e){const t=["foreground","underline","italics","background","flash"];for(let n=0;n<t.length;n++){const r=t[n];e.hasOwnProperty(r)&&(this[r]=e[r])}}isDefault(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash}equals(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash}copy(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash}toString(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}class X6{constructor(){this.uchar=" ",this.penState=new Q6}reset(){this.uchar=" ",this.penState.reset()}setChar(e,t){this.uchar=e,this.penState.copy(t)}setPenState(e){this.penState.copy(e)}equals(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)}copy(e){this.uchar=e.uchar,this.penState.copy(e.penState)}isEmpty(){return" "===this.uchar&&this.penState.isDefault()}}class Z6{constructor(e){this.chars=[],this.pos=0,this.currPenState=new Q6,this.cueStartTime=null,this.logger=void 0;for(let t=0;t<V6;t++)this.chars.push(new X6);this.logger=e}equals(e){for(let t=0;t<V6;t++)if(!this.chars[t].equals(e.chars[t]))return!1;return!0}copy(e){for(let t=0;t<V6;t++)this.chars[t].copy(e.chars[t])}isEmpty(){let e=!0;for(let t=0;t<V6;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e}setCursor(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>V6&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=V6)}moveCursor(e){const t=this.pos+e;if(e>1)for(let n=this.pos+1;n<t+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(t)}backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}insertChar(e){e>=144&&this.backSpace();const t=B6(e);this.pos>=V6?this.logger.log(0,(()=>"Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!")):(this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1))}clearFromPos(e){let t;for(t=e;t<V6;t++)this.chars[t].reset()}clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}clearToEndOfRow(){this.clearFromPos(this.pos)}getTextString(){const e=[];let t=!0;for(let n=0;n<V6;n++){const r=this.chars[n].uchar;" "!==r&&(t=!1),e.push(r)}return t?"":e.join("")}setPenStyles(e){this.currPenState.setStyles(e);this.chars[this.pos].setPenState(this.currPenState)}}class J6{constructor(e){this.rows=[],this.currRow=14,this.nrRollUpRows=null,this.lastOutputScreen=null,this.logger=void 0;for(let t=0;t<$6;t++)this.rows.push(new Z6(e));this.logger=e}reset(){for(let e=0;e<$6;e++)this.rows[e].clear();this.currRow=14}equals(e){let t=!0;for(let n=0;n<$6;n++)if(!this.rows[n].equals(e.rows[n])){t=!1;break}return t}copy(e){for(let t=0;t<$6;t++)this.rows[t].copy(e.rows[t])}isEmpty(){let e=!0;for(let t=0;t<$6;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e}backSpace(){this.rows[this.currRow].backSpace()}clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()}insertChar(e){this.rows[this.currRow].insertChar(e)}setPen(e){this.rows[this.currRow].setPenStyles(e)}moveCursor(e){this.rows[this.currRow].moveCursor(e)}setCursor(e){this.logger.log(2,"setCursor: "+e);this.rows[this.currRow].setCursor(e)}setPAC(e){this.logger.log(2,(()=>"pacData = "+JSON.stringify(e)));let t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(let t=0;t<$6;t++)this.rows[t].clear();const e=this.currRow+1-this.nrRollUpRows,n=this.lastOutputScreen;if(n){const r=n.rows[e].cueStartTime,i=this.logger.time;if(null!==r&&null!==i&&r<i)for(let a=0;a<this.nrRollUpRows;a++)this.rows[t-this.nrRollUpRows+a+1].copy(n.rows[e+a])}}this.currRow=t;const n=this.rows[this.currRow];if(null!==e.indent){const t=e.indent,r=Math.max(t-1,0);n.setCursor(e.indent),e.color=n.chars[r].penState.foreground}const r={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(r)}setBkgData(e){this.logger.log(2,(()=>"bkgData = "+JSON.stringify(e))),this.backSpace(),this.setPen(e),this.insertChar(32)}setRollUpRows(e){this.nrRollUpRows=e}rollUp(){if(null===this.nrRollUpRows)return void this.logger.log(3,"roll_up but nrRollUpRows not set yet");this.logger.log(1,(()=>this.getDisplayText()));const e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),this.logger.log(2,"Rolling up")}getDisplayText(e){e=e||!1;const t=[];let n="",r=-1;for(let i=0;i<$6;i++){const n=this.rows[i].getTextString();n&&(r=i+1,e?t.push("Row "+r+": '"+n+"'"):t.push(n.trim()))}return t.length>0&&(n=e?"["+t.join(" | ")+"]":t.join("\n")),n}getTextAndFormat(){return this.rows}}class e9{constructor(e,t,n){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new J6(n),this.nonDisplayedMemory=new J6(n),this.lastOutputScreen=new J6(n),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=n}reset(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}getHandler(){return this.outputFilter}setHandler(e){this.outputFilter=e}setPAC(e){this.writeScreen.setPAC(e)}setBkgData(e){this.writeScreen.setBkgData(e)}setMode(e){e!==this.mode&&(this.mode=e,this.logger.log(2,(()=>"MODE="+e)),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)}insertChars(e){for(let n=0;n<e.length;n++)this.writeScreen.insertChar(e[n]);const t=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,(()=>t+": "+this.writeScreen.getDisplayText(!0))),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(this.logger.log(1,(()=>"DISPLAYED: "+this.displayedMemory.getDisplayText(!0))),this.outputDataUpdate())}ccRCL(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}ccBS(){this.logger.log(2,"BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}ccAOF(){}ccAON(){}ccDER(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}ccRU(e){this.logger.log(2,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)}ccFON(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})}ccRDC(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}ccTR(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")}ccRTD(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")}ccEDM(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)}ccCR(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)}ccENM(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}ccEOC(){if(this.logger.log(2,"EOC - End Of Caption"),"MODE_POP-ON"===this.mode){const e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,(()=>"DISP: "+this.displayedMemory.getDisplayText()))}this.outputDataUpdate(!0)}ccTO(e){this.logger.log(2,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)}ccMIDROW(e){const t={flash:!1};if(t.underline=e%2===1,t.italics=e>=46,t.italics)t.foreground="white";else{const n=Math.floor(e/2)-16,r=["white","green","blue","cyan","red","yellow","magenta"];t.foreground=r[n]}this.logger.log(2,"MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)}outputDataUpdate(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this.logger.time;null!==t&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:t):this.cueStartTime=t,this.lastOutputScreen.copy(this.displayedMemory))}cueSplitAtTime(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}}class t9{constructor(e,t,n){this.channels=void 0,this.currentChannel=0,this.cmdHistory={a:null,b:null},this.logger=void 0;const r=this.logger=new K6;this.channels=[null,new e9(e,t,r),new e9(e+1,n,r)]}getHandler(e){return this.channels[e].getHandler()}setHandler(e,t){this.channels[e].setHandler(t)}addData(e,t){this.logger.time=e;for(let n=0;n<t.length;n+=2){const e=127&t[n],r=127&t[n+1];let i=!1,a=null;if(0===e&&0===r)continue;this.logger.log(3,(()=>"["+Y6([t[n],t[n+1]])+"] -> ("+Y6([e,r])+")"));const o=this.cmdHistory;if(e>=16&&e<=31){if(r9(e,r,o)){n9(null,null,o),this.logger.log(3,(()=>"Repeated command ("+Y6([e,r])+") is dropped"));continue}n9(e,r,this.cmdHistory),i=this.parseCmd(e,r),i||(i=this.parseMidrow(e,r)),i||(i=this.parsePAC(e,r)),i||(i=this.parseBackgroundAttributes(e,r))}else n9(null,null,o);if(!i&&(a=this.parseChars(e,r),a)){const e=this.currentChannel;if(e&&e>0){this.channels[e].insertChars(a)}else this.logger.log(2,"No channel found yet. TEXT-MODE?")}i||a||this.logger.log(2,(()=>"Couldn't parse cleaned data "+Y6([e,r])+" orig: "+Y6([t[n],t[n+1]])))}}parseCmd(e,t){if(!((20===e||28===e||21===e||29===e)&&t>=32&&t<=47)&&!((23===e||31===e)&&t>=33&&t<=35))return!1;const n=20===e||21===e||23===e?1:2,r=this.channels[n];return 20===e||21===e||28===e||29===e?32===t?r.ccRCL():33===t?r.ccBS():34===t?r.ccAOF():35===t?r.ccAON():36===t?r.ccDER():37===t?r.ccRU(2):38===t?r.ccRU(3):39===t?r.ccRU(4):40===t?r.ccFON():41===t?r.ccRDC():42===t?r.ccTR():43===t?r.ccRTD():44===t?r.ccEDM():45===t?r.ccCR():46===t?r.ccENM():47===t&&r.ccEOC():r.ccTO(t-32),this.currentChannel=n,!0}parseMidrow(e,t){let n=0;if((17===e||25===e)&&t>=32&&t<=47){if(n=17===e?1:2,n!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;const r=this.channels[n];return!!r&&(r.ccMIDROW(t),this.logger.log(3,(()=>"MIDROW ("+Y6([e,t])+")")),!0)}return!1}parsePAC(e,t){let n;if(!((e>=17&&e<=23||e>=25&&e<=31)&&t>=64&&t<=127)&&!((16===e||24===e)&&t>=64&&t<=95))return!1;const r=e<=23?1:2;n=t>=64&&t<=95?1===r?W6[e]:H6[e]:1===r?z6[e]:q6[e];const i=this.channels[r];return!!i&&(i.setPAC(this.interpretPAC(n,t)),this.currentChannel=r,!0)}interpretPAC(e,t){let n;const r={color:null,italics:!1,indent:null,underline:!1,row:e};return n=t>95?t-96:t-64,r.underline=1===(1&n),n<=13?r.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(r.italics=!0,r.color="white"):r.indent=4*Math.floor((n-16)/2),r}parseChars(e,t){let n,r=null,i=null;if(e>=25?(n=2,i=e-8):(n=1,i=e),i>=17&&i<=19){let e;e=17===i?t+80:18===i?t+112:t+144,this.logger.log(2,(()=>"Special char '"+B6(e)+"' in channel "+n)),r=[e]}else e>=32&&e<=127&&(r=0===t?[e]:[e,t]);return r&&this.logger.log(3,(()=>"Char codes =  "+Y6(r).join(","))),r}parseBackgroundAttributes(e,t){if(!((16===e||24===e)&&t>=32&&t<=47)&&!((23===e||31===e)&&t>=45&&t<=47))return!1;let n;const r={};16===e||24===e?(n=Math.floor((t-32)/2),r.background=G6[n],t%2===1&&(r.background=r.background+"_semi")):45===t?r.background="transparent":(r.foreground="black",47===t&&(r.underline=!0));const i=e<=23?1:2;return this.channels[i].setBkgData(r),!0}reset(){for(let e=0;e<Object.keys(this.channels).length;e++){const t=this.channels[e];t&&t.reset()}n9(null,null,this.cmdHistory)}cueSplitAtTime(e){for(let t=0;t<this.channels.length;t++){const n=this.channels[t];n&&n.cueSplitAtTime(e)}}}function n9(e,t,n){n.a=e,n.b=t}function r9(e,t,n){return n.a===e&&n.b===t}class i9{constructor(e,t){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=t}dispatchCue(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)}newCue(e,t,n){(null===this.startTime||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=n,this.timelineController.createCaptionsTrack(this.trackName)}reset(){this.cueRanges=[],this.startTime=null}}var a9=function(){if(null!=U1&&U1.VTTCue)return self.VTTCue;const e=["","lr","rl"],t=["start","middle","end","left","right"];function n(e,t){if("string"!==typeof t)return!1;if(!Array.isArray(e))return!1;const n=t.toLowerCase();return!!~e.indexOf(n)&&n}function r(e){return n(t,e)}function i(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];let i=1;for(;i<arguments.length;i++){const t=arguments[i];for(const n in t)e[n]=t[n]}return e}function a(t,a,o){const s=this,l={enumerable:!0};s.hasBeenReset=!1;let c="",u=!1,d=t,h=a,p=o,f=null,m="",g=!0,v="auto",y="start",b=50,w="middle",E=50,x="middle";Object.defineProperty(s,"id",i({},l,{get:function(){return c},set:function(e){c=""+e}})),Object.defineProperty(s,"pauseOnExit",i({},l,{get:function(){return u},set:function(e){u=!!e}})),Object.defineProperty(s,"startTime",i({},l,{get:function(){return d},set:function(e){if("number"!==typeof e)throw new TypeError("Start time must be set to a number.");d=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"endTime",i({},l,{get:function(){return h},set:function(e){if("number"!==typeof e)throw new TypeError("End time must be set to a number.");h=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"text",i({},l,{get:function(){return p},set:function(e){p=""+e,this.hasBeenReset=!0}})),Object.defineProperty(s,"region",i({},l,{get:function(){return f},set:function(e){f=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"vertical",i({},l,{get:function(){return m},set:function(t){const r=function(t){return n(e,t)}(t);if(!1===r)throw new SyntaxError("An invalid or illegal string was specified.");m=r,this.hasBeenReset=!0}})),Object.defineProperty(s,"snapToLines",i({},l,{get:function(){return g},set:function(e){g=!!e,this.hasBeenReset=!0}})),Object.defineProperty(s,"line",i({},l,{get:function(){return v},set:function(e){if("number"!==typeof e&&"auto"!==e)throw new SyntaxError("An invalid number or illegal string was specified.");v=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"lineAlign",i({},l,{get:function(){return y},set:function(e){const t=r(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");y=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"position",i({},l,{get:function(){return b},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");b=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"positionAlign",i({},l,{get:function(){return w},set:function(e){const t=r(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");w=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"size",i({},l,{get:function(){return E},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");E=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"align",i({},l,{get:function(){return x},set:function(e){const t=r(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");x=t,this.hasBeenReset=!0}})),s.displayState=void 0}return a.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},a}();class o9{decode(e,t){if(!e)return"";if("string"!==typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}function s9(e){function t(e,t,n,r){return 3600*(0|e)+60*(0|t)+(0|n)+parseFloat(r||0)}const n=e.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return n?parseFloat(n[2])>59?t(n[2],n[3],0,n[4]):t(n[1],n[2],n[3],n[4]):null}class l9{constructor(){this.values=Object.create(null)}set(e,t){this.get(e)||""===t||(this.values[e]=t)}get(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t}has(e){return e in this.values}alt(e,t,n){for(let r=0;r<n.length;++r)if(t===n[r]){this.set(e,t);break}}integer(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))}percent(e,t){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(t)){const n=parseFloat(t);if(n>=0&&n<=100)return this.set(e,n),!0}return!1}}function c9(e,t,n,r){const i=r?e.split(r):[e];for(const a in i){if("string"!==typeof i[a])continue;const e=i[a].split(n);if(2!==e.length)continue;t(e[0],e[1])}}const u9=new a9(0,0,""),d9="middle"===u9.align?"middle":"center";function h9(e,t,n){const r=e;function i(){const t=s9(e);if(null===t)throw new Error("Malformed timestamp: "+r);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function a(){e=e.replace(/^\s+/,"")}if(a(),t.startTime=i(),a(),"--\x3e"!==e.slice(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+r);e=e.slice(3),a(),t.endTime=i(),a(),function(e,t){const r=new l9;c9(e,(function(e,t){let i;switch(e){case"region":for(let i=n.length-1;i>=0;i--)if(n[i].id===t){r.set(e,n[i].region);break}break;case"vertical":r.alt(e,t,["rl","lr"]);break;case"line":i=t.split(","),r.integer(e,i[0]),r.percent(e,i[0])&&r.set("snapToLines",!1),r.alt(e,i[0],["auto"]),2===i.length&&r.alt("lineAlign",i[1],["start",d9,"end"]);break;case"position":i=t.split(","),r.percent(e,i[0]),2===i.length&&r.alt("positionAlign",i[1],["start",d9,"end","line-left","line-right","auto"]);break;case"size":r.percent(e,t);break;case"align":r.alt(e,t,["start",d9,"end","left","right"])}}),/:/,/\s/),t.region=r.get("region",null),t.vertical=r.get("vertical","");let i=r.get("line","auto");"auto"===i&&-1===u9.line&&(i=-1),t.line=i,t.lineAlign=r.get("lineAlign","start"),t.snapToLines=r.get("snapToLines",!0),t.size=r.get("size",100),t.align=r.get("align",d9);let a=r.get("position","auto");"auto"===a&&50===u9.position&&(a="start"===t.align||"left"===t.align?0:"end"===t.align||"right"===t.align?100:50),t.position=a}(e,t)}function p9(e){return e.replace(/<br(?: \/)?>/gi,"\n")}class f9{constructor(){this.state="INITIAL",this.buffer="",this.decoder=new o9,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}parse(e){const t=this;function n(){let e=t.buffer,n=0;for(e=p9(e);n<e.length&&"\r"!==e[n]&&"\n"!==e[n];)++n;const r=e.slice(0,n);return"\r"===e[n]&&++n,"\n"===e[n]&&++n,t.buffer=e.slice(n),r}e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));try{let e="";if("INITIAL"===t.state){if(!/\r\n|\n/.test(t.buffer))return this;e=n();const r=e.match(/^(\xef\xbb\xbf)?WEBVTT([ \t].*)?$/);if(null==r||!r[0])throw new Error("Malformed WebVTT signature.");t.state="HEADER"}let r=!1;for(;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(r?r=!1:e=n(),t.state){case"HEADER":/:/.test(e)?c9(e,(function(e,t){}),/:/):e||(t.state="ID");continue;case"NOTE":e||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(e)){t.state="NOTE";break}if(!e)continue;if(t.cue=new a9(0,0,""),t.state="CUE",-1===e.indexOf("--\x3e")){t.cue.id=e;continue}case"CUE":if(!t.cue){t.state="BADCUE";continue}try{h9(e,t.cue,t.regionList)}catch(Q_){t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":{const n=-1!==e.indexOf("--\x3e");if(!e||n&&(r=!0)){t.oncue&&t.cue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}if(null===t.cue)continue;t.cue.text&&(t.cue.text+="\n"),t.cue.text+=e}continue;case"BADCUE":e||(t.state="ID")}}}catch(Q_){"CUETEXT"===t.state&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state="INITIAL"===t.state?"BADWEBVTT":"BADCUE"}return this}flush(){const e=this;try{if((e.cue||"HEADER"===e.state)&&(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state||"BADWEBVTT"===e.state)throw new Error("Malformed WebVTT signature.")}catch(Q_){e.onparsingerror&&e.onparsingerror(Q_)}return e.onflush&&e.onflush(),this}}const m9=/\r\n|\n\r|\n|\r/g,g9=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e.slice(n,n+t.length)===t},v9=function(e){let t=5381,n=e.length;for(;n;)t=33*t^e.charCodeAt(--n);return(t>>>0).toString()};function y9(e,t,n){return v9(e.toString())+v9(t.toString())+v9(n)}function b9(e,t,n,r,i,a,o){const s=new f9,l=v2(new Uint8Array(e)).trim().replace(m9,"\n").split("\n"),c=[],u=t?function(e){return h6(e,9e4,1/(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1))}(t.baseTime,t.timescale):0;let d,h="00:00.000",p=0,f=0,m=!0;s.oncue=function(e){const a=n[r];let o=n.ccOffset;const s=(p-u)/9e4;if(null!=a&&a.new&&(void 0!==f?o=n.ccOffset=a.start:function(e,t,n){let r=e[t],i=e[r.prevCC];if(!i||!i.new&&r.new)return e.ccOffset=e.presentationOffset=r.start,void(r.new=!1);for(;null!=(a=i)&&a.new;){var a;e.ccOffset+=r.start-i.start,r.new=!1,r=i,i=e[r.prevCC]}e.presentationOffset=n}(n,r,s)),s){if(!t)return void(d=new Error("Missing initPTS for VTT MPEGTS"));o=s-n.presentationOffset}const l=e.endTime-e.startTime,h=y6(9e4*(e.startTime+o-f),9e4*i)/9e4;e.startTime=Math.max(h,0),e.endTime=Math.max(h+l,0);const m=e.text.trim();e.text=decodeURIComponent(encodeURIComponent(m)),e.id||(e.id=y9(e.startTime,e.endTime,m)),e.endTime>0&&c.push(e)},s.onparsingerror=function(e){d=e},s.onflush=function(){d?o(d):a(c)},l.forEach((e=>{if(m){if(g9(e,"X-TIMESTAMP-MAP=")){m=!1,e.slice(16).split(",").forEach((e=>{g9(e,"LOCAL:")?h=e.slice(6):g9(e,"MPEGTS:")&&(p=parseInt(e.slice(7)))}));try{f=function(e){let t=parseInt(e.slice(-3));const n=parseInt(e.slice(-6,-4)),r=parseInt(e.slice(-9,-7)),i=e.length>9?parseInt(e.substring(0,e.indexOf(":"))):0;if(!h1(t)||!h1(n)||!h1(r)||!h1(i))throw Error(`Malformed X-TIMESTAMP-MAP: Local:${e}`);return t+=1e3*n,t+=6e4*r,t+=36e5*i,t}(h)/1e3}catch(Rb){d=Rb}return}""===e&&(m=!1)}s.parse(e+"\n")})),s.flush()}const w9="stpp.ttml.im1t",E9=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,x9=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,_9={left:"start",center:"center",right:"end",start:"start",end:"end"};function A9(e,t,n,r){const i=R2(new Uint8Array(e),["mdat"]);if(0===i.length)return void r(new Error("Could not parse IMSC1 mdat"));const a=i.map((e=>v2(e))),o=function(e,t){return h6(e,t,1/(arguments.length>2&&void 0!==arguments[2]?arguments[2]:1),arguments.length>3&&void 0!==arguments[3]&&arguments[3])}(t.baseTime,1,t.timescale);try{a.forEach((e=>n(function(e,t){const n=(new DOMParser).parseFromString(e,"text/xml"),r=n.getElementsByTagName("tt")[0];if(!r)throw new Error("Invalid ttml");const i={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},a=Object.keys(i).reduce(((e,t)=>(e[t]=r.getAttribute(`ttp:${t}`)||i[t],e)),{}),o="preserve"!==r.getAttribute("xml:space"),s=S9(T9(r,"styling","style")),l=S9(T9(r,"layout","region")),c=T9(r,"body","[begin]");return[].map.call(c,(e=>{const n=k9(e,o);if(!n||!e.hasAttribute("begin"))return null;const r=R9(e.getAttribute("begin"),a),i=R9(e.getAttribute("dur"),a);let c=R9(e.getAttribute("end"),a);if(null===r)throw I9(e);if(null===c){if(null===i)throw I9(e);c=r+i}const u=new a9(r-t,c-t,n);u.id=y9(u.startTime,u.endTime,u.text);const d=function(e,t,n){const r="http://www.w3.org/ns/ttml#styling";let i=null;const a=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],o=null!=e&&e.hasAttribute("style")?e.getAttribute("style"):null;o&&n.hasOwnProperty(o)&&(i=n[o]);return a.reduce(((n,a)=>{const o=C9(t,r,a)||C9(e,r,a)||C9(i,r,a);return o&&(n[a]=o),n}),{})}(l[e.getAttribute("region")],s[e.getAttribute("style")],s),{textAlign:h}=d;if(h){const e=_9[h];e&&(u.lineAlign=e),u.align=h}return d1(u,d),u})).filter((e=>null!==e))}(e,o))))}catch(Rb){r(Rb)}}function T9(e,t,n){const r=e.getElementsByTagName(t)[0];return r?[].slice.call(r.querySelectorAll(n)):[]}function S9(e){return e.reduce(((e,t)=>{const n=t.getAttribute("xml:id");return n&&(e[n]=t),e}),{})}function k9(e,t){return[].slice.call(e.childNodes).reduce(((e,n,r)=>{var i;return"br"===n.nodeName&&r?e+"\n":null!=(i=n.childNodes)&&i.length?k9(n,t):t?e+n.textContent.trim().replace(/\s+/g," "):e+n.textContent}),"")}function C9(e,t,n){return e&&e.hasAttributeNS(t,n)?e.getAttributeNS(t,n):null}function I9(e){return new Error(`Could not parse ttml timestamp ${e}`)}function R9(e,t){if(!e)return null;let n=s9(e);return null===n&&(E9.test(e)?n=function(e,t){const n=E9.exec(e),r=(0|n[4])+(0|n[5])/t.subFrameRate;return 3600*(0|n[1])+60*(0|n[2])+(0|n[3])+r/t.frameRate}(e,t):x9.test(e)&&(n=function(e,t){const n=x9.exec(e),r=Number(n[1]);switch(n[2]){case"h":return 3600*r;case"m":return 60*r;case"ms":return 1e3*r;case"f":return r/t.frameRate;case"t":return r/t.tickRate}return r}(e,t))),n}function D9(e){return e.characteristics&&/transcribes-spoken-dialog/gi.test(e.characteristics)&&/describes-music-and-sound/gi.test(e.characteristics)?"captions":"subtitles"}function L9(e,t){return!!e&&e.kind===D9(t)&&M6(t,e)}class P9{constructor(e){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=e,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}setStreamController(e){this.streamController=e}destroy(){this.hls&&this.unregisterListener(),this.timer&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null}registerListeners(){const{hls:e}=this;e.on(m1.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.on(m1.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(m1.MANIFEST_PARSED,this.onManifestParsed,this),e.on(m1.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(m1.BUFFER_CODECS,this.onBufferCodecs,this),e.on(m1.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListener(){const{hls:e}=this;e.off(m1.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.off(m1.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(m1.MANIFEST_PARSED,this.onManifestParsed,this),e.off(m1.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(m1.BUFFER_CODECS,this.onBufferCodecs,this),e.off(m1.MEDIA_DETACHING,this.onMediaDetaching,this)}onFpsDropLevelCapping(e,t){const n=this.hls.levels[t.droppedLevel];this.isLevelAllowed(n)&&this.restrictedLevels.push({bitrate:n.bitrate,height:n.height,width:n.width})}onMediaAttaching(e,t){this.media=t.media instanceof HTMLVideoElement?t.media:null,this.clientRect=null,this.timer&&this.hls.levels.length&&this.detectPlayerSize()}onManifestParsed(e,t){const n=this.hls;this.restrictedLevels=[],this.firstLevel=t.firstLevel,n.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onLevelsUpdated(e,t){this.timer&&h1(this.autoLevelCapping)&&this.detectPlayerSize()}onBufferCodecs(e,t){this.hls.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onMediaDetaching(){this.stopCapping()}detectPlayerSize(){if(this.media){if(this.mediaHeight<=0||this.mediaWidth<=0)return void(this.clientRect=null);const e=this.hls.levels;if(e.length){const t=this.hls,n=this.getMaxLevel(e.length-1);n!==this.autoLevelCapping&&x1.log(`Setting autoLevelCapping to ${n}: ${e[n].height}p@${e[n].bitrate} for media ${this.mediaWidth}x${this.mediaHeight}`),t.autoLevelCapping=n,t.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}}getMaxLevel(e){const t=this.hls.levels;if(!t.length)return-1;const n=t.filter(((t,n)=>this.isLevelAllowed(t)&&n<=e));return this.clientRect=null,P9.getMaxLevelByMediaSize(n,this.mediaWidth,this.mediaHeight)}startCapping(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}stopCapping(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)}getDimensions(){if(this.clientRect)return this.clientRect;const e=this.media,t={width:0,height:0};if(e){const n=e.getBoundingClientRect();t.width=n.width,t.height=n.height,t.width||t.height||(t.width=n.right-n.left||e.width||0,t.height=n.bottom-n.top||e.height||0)}return this.clientRect=t,t}get mediaWidth(){return this.getDimensions().width*this.contentScaleFactor}get mediaHeight(){return this.getDimensions().height*this.contentScaleFactor}get contentScaleFactor(){let e=1;if(!this.hls.config.ignoreDevicePixelRatio)try{e=self.devicePixelRatio}catch(Q_){}return e}isLevelAllowed(e){return!this.restrictedLevels.some((t=>e.bitrate===t.bitrate&&e.width===t.width&&e.height===t.height))}static getMaxLevelByMediaSize(e,t,n){if(null==e||!e.length)return-1;let r=e.length-1;const i=Math.max(t,n);for(let s=0;s<e.length;s+=1){const t=e[s];if((t.width>=i||t.height>=i)&&(a=t,!(o=e[s+1])||a.width!==o.width||a.height!==o.height)){r=s;break}}var a,o;return r}}const M9="[eme]";class N9{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.setMediaKeysQueue=N9.CDMCleanupPromise?[N9.CDMCleanupPromise]:[],this.debug=x1.debug.bind(x1,M9),this.log=x1.log.bind(x1,M9),this.warn=x1.warn.bind(x1,M9),this.error=x1.error.bind(x1,M9),this.onMediaEncrypted=e=>{const{initDataType:t,initData:n}=e,r=`"${e.type}" event: init data type: "${t}"`;if(this.debug(r),null!==n){if(!this.keyFormatPromise){let e=Object.keys(this.keySystemAccessPromises);e.length||(e=Z1(this.config));const t=e.map(X1).filter((e=>!!e));this.keyFormatPromise=this.getKeyFormatPromise(t)}this.keyFormatPromise.then((i=>{const a=H1(i);let o,s;if("sinf"===t){if(a!==B1.FAIRPLAY)return void this.warn(`Ignoring unexpected "${e.type}" event with init data type: "${t}" for selected key-system ${a}`);const i=A2(new Uint8Array(n));try{const e=j2(O1(JSON.parse(i).sinf));if(!e)throw new Error("'schm' box missing or not cbcs/cenc with schi > tenc");o=e.subarray(8,24),s=B1.FAIRPLAY}catch(Rb){return void this.warn(`${r} Failed to parse sinf: ${Rb}`)}}else{if(a!==B1.WIDEVINE&&a!==B1.PLAYREADY)return void this.warn(`Ignoring unexpected "${e.type}" event with init data type: "${t}" for selected key-system ${a}`);const i=function(e){const t=[];if(e instanceof ArrayBuffer){const n=e.byteLength;let r=0;for(;r+32<n;){const n=H2(new DataView(e,r));t.push(n),r+=n.size}}return t}(n),l=i.filter((e=>!!e.systemId&&Q1(e.systemId)===a));l.length>1&&this.warn(`${r} Using first of ${l.length} pssh found for selected key-system ${a}`);const c=l[0];if(!c)return void(0===i.length||i.some((e=>!e.systemId))?this.warn(`${r} contains incomplete or invalid pssh data`):this.log(`ignoring ${r} for ${i.map((e=>Q1(e.systemId))).join(",")} pssh data in favor of playlist keys`));if(s=Q1(c.systemId),0===c.version&&c.data)if(s===B1.WIDEVINE){const e=c.data.length-22;o=c.data.subarray(e,e+16)}else s===B1.PLAYREADY&&(o=t2(c.data))}if(!s||!o)return void this.log(`Unable to handle ${r} with key-system ${a}`);const l=w2(o),{keyIdToKeySessionPromise:c,mediaKeySessions:u}=this;let d=c[l];for(let e=0;e<u.length;e++){const r=u[e],i=r.decryptdata;if(!i.keyId)continue;const a=w2(i.keyId);if(l===a||-1!==i.uri.replace(/-/g,"").indexOf(l)){if(d=c[a],i.pssh)break;delete c[a],i.pssh=new Uint8Array(n),i.keyId=o,d=c[l]=d.then((()=>this.generateRequestWithPreferredKeySession(r,t,n,"encrypted-event-key-match"))),d.catch((e=>this.handleError(e)));break}}if(!d){if(s!==a)return void this.log(`Ignoring "${r}" with ${s} init data for selected key-system ${a}`);d=c[l]=this.getKeySystemSelectionPromise([s]).then((e=>{let{keySystem:r,mediaKeys:i}=e;var a;this.throwIfDestroyed();const s=new G2("ISO-23001-7",l,null!=(a=X1(r))?a:"");return s.pssh=new Uint8Array(n),s.keyId=o,this.attemptSetMediaKeys(r,i).then((()=>{this.throwIfDestroyed();const e=this.createMediaKeySessionContext({decryptdata:s,keySystem:r,mediaKeys:i});return this.generateRequestWithPreferredKeySession(e,t,n,"encrypted-event-no-match")}))})),d.catch((e=>this.handleError(e)))}}))}},this.onWaitingForKey=e=>{this.log(`"${e.type}" event`)},this.hls=e,this.config=e.config,this.registerListeners()}destroy(){this.unregisterListeners(),this.onMediaDetached();const e=this.config;e.requestMediaKeySystemAccessFunc=null,e.licenseXhrSetup=e.licenseResponseCallback=void 0,e.drmSystems=e.drmSystemOptions={},this.hls=this.config=this.keyIdToKeySessionPromise=null,this.onMediaEncrypted=this.onWaitingForKey=null}registerListeners(){this.hls.on(m1.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(m1.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(m1.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(m1.MANIFEST_LOADED,this.onManifestLoaded,this)}unregisterListeners(){this.hls.off(m1.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(m1.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(m1.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(m1.MANIFEST_LOADED,this.onManifestLoaded,this)}getLicenseServerUrl(e){const{drmSystems:t,widevineLicenseUrl:n}=this.config,r=t[e];return r?r.licenseUrl:e===B1.WIDEVINE&&n?n:void 0}getLicenseServerUrlOrThrow(e){const t=this.getLicenseServerUrl(e);if(void 0===t)throw new Error(`no license server URL configured for key-system "${e}"`);return t}getServerCertificateUrl(e){const{drmSystems:t}=this.config,n=t[e];if(n)return n.serverCertificateUrl;this.log(`No Server Certificate in config.drmSystems["${e}"]`)}attemptKeySystemAccess(e){const t=this.hls.levels,n=(e,t,n)=>!!e&&n.indexOf(e)===t,r=t.map((e=>e.audioCodec)).filter(n),i=t.map((e=>e.videoCodec)).filter(n);return r.length+i.length===0&&i.push("avc1.42e01e"),new Promise(((t,n)=>{const a=e=>{const o=e.shift();this.getMediaKeysPromise(o,r,i).then((e=>t({keySystem:o,mediaKeys:e}))).catch((t=>{e.length?a(e):n(t instanceof O9?t:new O9({type:g1.KEY_SYSTEM_ERROR,details:v1.KEY_SYSTEM_NO_ACCESS,error:t,fatal:!0},t.message))}))};a(e)}))}requestMediaKeySystemAccess(e,t){const{requestMediaKeySystemAccessFunc:n}=this.config;if("function"!==typeof n){let e=`Configured requestMediaKeySystemAccess is not a function ${n}`;return null===J1&&"http:"===self.location.protocol&&(e=`navigator.requestMediaKeySystemAccess is not available over insecure protocol ${location.protocol}`),Promise.reject(new Error(e))}return n(e,t)}getMediaKeysPromise(e,t,n){const r=function(e,t,n,r){let i;switch(e){case B1.FAIRPLAY:i=["cenc","sinf"];break;case B1.WIDEVINE:case B1.PLAYREADY:i=["cenc"];break;case B1.CLEARKEY:i=["cenc","keyids"];break;default:throw new Error(`Unknown key-system: ${e}`)}return function(e,t,n,r){return[{initDataTypes:e,persistentState:r.persistentState||"optional",distinctiveIdentifier:r.distinctiveIdentifier||"optional",sessionTypes:r.sessionTypes||[r.sessionType||"temporary"],audioCapabilities:t.map((e=>({contentType:`audio/mp4; codecs="${e}"`,robustness:r.audioRobustness||"",encryptionScheme:r.audioEncryptionScheme||null}))),videoCapabilities:n.map((e=>({contentType:`video/mp4; codecs="${e}"`,robustness:r.videoRobustness||"",encryptionScheme:r.videoEncryptionScheme||null})))}]}(i,t,n,r)}(e,t,n,this.config.drmSystemOptions),i=this.keySystemAccessPromises[e];let a=null==i?void 0:i.keySystemAccess;if(!a){this.log(`Requesting encrypted media "${e}" key-system access with config: ${JSON.stringify(r)}`),a=this.requestMediaKeySystemAccess(e,r);const t=this.keySystemAccessPromises[e]={keySystemAccess:a};return a.catch((t=>{this.log(`Failed to obtain access to key-system "${e}": ${t}`)})),a.then((n=>{this.log(`Access for key-system "${n.keySystem}" obtained`);const r=this.fetchServerCertificate(e);return this.log(`Create media-keys for "${e}"`),t.mediaKeys=n.createMediaKeys().then((t=>(this.log(`Media-keys created for "${e}"`),r.then((n=>n?this.setMediaKeysServerCertificate(t,e,n):t))))),t.mediaKeys.catch((t=>{this.error(`Failed to create media-keys for "${e}"}: ${t}`)})),t.mediaKeys}))}return a.then((()=>i.mediaKeys))}createMediaKeySessionContext(e){let{decryptdata:t,keySystem:n,mediaKeys:r}=e;this.log(`Creating key-system session "${n}" keyId: ${w2(t.keyId||[])}`);const i=r.createSession(),a={decryptdata:t,keySystem:n,mediaKeys:r,mediaKeysSession:i,keyStatus:"status-pending"};return this.mediaKeySessions.push(a),a}renewKeySession(e){const t=e.decryptdata;if(t.pssh){const n=this.createMediaKeySessionContext(e),r=this.getKeyIdString(t),i="cenc";this.keyIdToKeySessionPromise[r]=this.generateRequestWithPreferredKeySession(n,i,t.pssh,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(e)}getKeyIdString(e){if(!e)throw new Error("Could not read keyId of undefined decryptdata");if(null===e.keyId)throw new Error("keyId is null");return w2(e.keyId)}updateKeySession(e,t){var n;const r=e.mediaKeysSession;return this.log(`Updating key-session "${r.sessionId}" for keyID ${w2((null==(n=e.decryptdata)?void 0:n.keyId)||[])}\n      } (data length: ${t?t.byteLength:t})`),r.update(t)}selectKeySystemFormat(e){const t=Object.keys(e.levelkeys||{});return this.keyFormatPromise||(this.log(`Selecting key-system from fragment (sn: ${e.sn} ${e.type}: ${e.level}) key formats ${t.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(t)),this.keyFormatPromise}getKeyFormatPromise(e){return new Promise(((t,n)=>{const r=Z1(this.config),i=e.map(H1).filter((e=>!!e&&-1!==r.indexOf(e)));return this.getKeySystemSelectionPromise(i).then((e=>{let{keySystem:r}=e;const i=X1(r);i?t(i):n(new Error(`Unable to find format for key-system "${r}"`))})).catch(n)}))}loadKey(e){const t=e.keyInfo.decryptdata,n=this.getKeyIdString(t),r=`(keyId: ${n} format: "${t.keyFormat}" method: ${t.method} uri: ${t.uri})`;this.log(`Starting session for key ${r}`);let i=this.keyIdToKeySessionPromise[n];return i||(i=this.keyIdToKeySessionPromise[n]=this.getKeySystemForKeyPromise(t).then((n=>{let{keySystem:i,mediaKeys:a}=n;return this.throwIfDestroyed(),this.log(`Handle encrypted media sn: ${e.frag.sn} ${e.frag.type}: ${e.frag.level} using key ${r}`),this.attemptSetMediaKeys(i,a).then((()=>{this.throwIfDestroyed();const e=this.createMediaKeySessionContext({keySystem:i,mediaKeys:a,decryptdata:t});return this.generateRequestWithPreferredKeySession(e,"cenc",t.pssh,"playlist-key")}))})),i.catch((e=>this.handleError(e)))),i}throwIfDestroyed(){if(!this.hls)throw new Error("invalid state")}handleError(e){this.hls&&(this.error(e.message),e instanceof O9?this.hls.trigger(m1.ERROR,e.data):this.hls.trigger(m1.ERROR,{type:g1.KEY_SYSTEM_ERROR,details:v1.KEY_SYSTEM_NO_KEYS,error:e,fatal:!0}))}getKeySystemForKeyPromise(e){const t=this.getKeyIdString(e),n=this.keyIdToKeySessionPromise[t];if(!n){const t=H1(e.keyFormat),n=t?[t]:Z1(this.config);return this.attemptKeySystemAccess(n)}return n}getKeySystemSelectionPromise(e){if(e.length||(e=Z1(this.config)),0===e.length)throw new O9({type:g1.KEY_SYSTEM_ERROR,details:v1.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},`Missing key-system license configuration options ${JSON.stringify({drmSystems:this.config.drmSystems})}`);return this.attemptKeySystemAccess(e)}attemptSetMediaKeys(e,t){const n=this.setMediaKeysQueue.slice();this.log(`Setting media-keys for "${e}"`);const r=Promise.all(n).then((()=>{if(!this.media)throw new Error("Attempted to set mediaKeys without media element attached");return this.media.setMediaKeys(t)}));return this.setMediaKeysQueue.push(r),r.then((()=>{this.log(`Media-keys set for "${e}"`),n.push(r),this.setMediaKeysQueue=this.setMediaKeysQueue.filter((e=>-1===n.indexOf(e)))}))}generateRequestWithPreferredKeySession(e,t,n,r){var i,a;const o=null==(i=this.config.drmSystems)||null==(a=i[e.keySystem])?void 0:a.generateRequest;if(o)try{const r=o.call(this.hls,t,n,e);if(!r)throw new Error("Invalid response from configured generateRequest filter");t=r.initDataType,n=e.decryptdata.pssh=r.initData?new Uint8Array(r.initData):null}catch(Rb){var s;if(this.warn(Rb.message),null!=(s=this.hls)&&s.config.debug)throw Rb}if(null===n)return this.log(`Skipping key-session request for "${r}" (no initData)`),Promise.resolve(e);const l=this.getKeyIdString(e.decryptdata);this.log(`Generating key-session request for "${r}": ${l} (init data type: ${t} length: ${n?n.byteLength:null})`);const c=new R6,u=e._onmessage=t=>{const n=e.mediaKeysSession;if(!n)return void c.emit("error",new Error("invalid state"));const{messageType:r,message:i}=t;this.log(`"${r}" message event for session "${n.sessionId}" message size: ${i.byteLength}`),"license-request"===r||"license-renewal"===r?this.renewLicense(e,i).catch((e=>{this.handleError(e),c.emit("error",e)})):"license-release"===r?e.keySystem===B1.FAIRPLAY&&(this.updateKeySession(e,F1("acknowledged")),this.removeSession(e)):this.warn(`unhandled media key message type "${r}"`)},d=e._onkeystatuseschange=t=>{if(!e.mediaKeysSession)return void c.emit("error",new Error("invalid state"));this.onKeyStatusChange(e);const n=e.keyStatus;c.emit("keyStatus",n),"expired"===n&&(this.warn(`${e.keySystem} expired for key ${l}`),this.renewKeySession(e))};e.mediaKeysSession.addEventListener("message",u),e.mediaKeysSession.addEventListener("keystatuseschange",d);const h=new Promise(((e,t)=>{c.on("error",t),c.on("keyStatus",(n=>{n.startsWith("usable")?e():"output-restricted"===n?t(new O9({type:g1.KEY_SYSTEM_ERROR,details:v1.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED,fatal:!1},"HDCP level output restricted")):"internal-error"===n?t(new O9({type:g1.KEY_SYSTEM_ERROR,details:v1.KEY_SYSTEM_STATUS_INTERNAL_ERROR,fatal:!0},`key status changed to "${n}"`)):"expired"===n?t(new Error("key expired while generating request")):this.warn(`unhandled key status change "${n}"`)}))}));return e.mediaKeysSession.generateRequest(t,n).then((()=>{var t;this.log(`Request generated for key-session "${null==(t=e.mediaKeysSession)?void 0:t.sessionId}" keyId: ${l}`)})).catch((e=>{throw new O9({type:g1.KEY_SYSTEM_ERROR,details:v1.KEY_SYSTEM_NO_SESSION,error:e,fatal:!1},`Error generating key-session request: ${e}`)})).then((()=>h)).catch((t=>{throw c.removeAllListeners(),this.removeSession(e),t})).then((()=>(c.removeAllListeners(),e)))}onKeyStatusChange(e){e.mediaKeysSession.keyStatuses.forEach(((t,n)=>{this.log(`key status change "${t}" for keyStatuses keyId: ${w2("buffer"in n?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):new Uint8Array(n))} session keyId: ${w2(new Uint8Array(e.decryptdata.keyId||[]))} uri: ${e.decryptdata.uri}`),e.keyStatus=t}))}fetchServerCertificate(e){const t=this.config,n=new(0,t.loader)(t),r=this.getServerCertificateUrl(e);return r?(this.log(`Fetching server certificate for "${e}"`),new Promise(((i,a)=>{const o={responseType:"arraybuffer",url:r},s=t.certLoadPolicy.default,l={loadPolicy:s,timeout:s.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},c={onSuccess:(e,t,n,r)=>{i(e.data)},onError:(t,n,i,s)=>{a(new O9({type:g1.KEY_SYSTEM_ERROR,details:v1.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:i,response:l1({url:o.url,data:void 0},t)},`"${e}" certificate request failed (${r}). Status: ${t.code} (${t.text})`))},onTimeout:(t,n,i)=>{a(new O9({type:g1.KEY_SYSTEM_ERROR,details:v1.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:i,response:{url:o.url,data:void 0}},`"${e}" certificate request timed out (${r})`))},onAbort:(e,t,n)=>{a(new Error("aborted"))}};n.load(o,l,c)}))):Promise.resolve()}setMediaKeysServerCertificate(e,t,n){return new Promise(((r,i)=>{e.setServerCertificate(n).then((i=>{this.log(`setServerCertificate ${i?"success":"not supported by CDM"} (${null==n?void 0:n.byteLength}) on "${t}"`),r(e)})).catch((e=>{i(new O9({type:g1.KEY_SYSTEM_ERROR,details:v1.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:e,fatal:!0},e.message))}))}))}renewLicense(e,t){return this.requestLicense(e,new Uint8Array(t)).then((t=>this.updateKeySession(e,new Uint8Array(t)).catch((e=>{throw new O9({type:g1.KEY_SYSTEM_ERROR,details:v1.KEY_SYSTEM_SESSION_UPDATE_FAILED,error:e,fatal:!0},e.message)}))))}unpackPlayReadyKeyMessage(e,t){const n=String.fromCharCode.apply(null,new Uint16Array(t.buffer));if(!n.includes("PlayReadyKeyMessage"))return e.setRequestHeader("Content-Type","text/xml; charset=utf-8"),t;const r=(new DOMParser).parseFromString(n,"application/xml"),i=r.querySelectorAll("HttpHeader");if(i.length>0){let t;for(let n=0,r=i.length;n<r;n++){var a,o;t=i[n];const r=null==(a=t.querySelector("name"))?void 0:a.textContent,s=null==(o=t.querySelector("value"))?void 0:o.textContent;r&&s&&e.setRequestHeader(r,s)}}const s=r.querySelector("Challenge"),l=null==s?void 0:s.textContent;if(!l)throw new Error("Cannot find <Challenge> in key message");return F1(atob(l))}setupLicenseXHR(e,t,n,r){const i=this.config.licenseXhrSetup;return i?Promise.resolve().then((()=>{if(!n.decryptdata)throw new Error("Key removed");return i.call(this.hls,e,t,n,r)})).catch((a=>{if(!n.decryptdata)throw a;return e.open("POST",t,!0),i.call(this.hls,e,t,n,r)})).then((n=>{e.readyState||e.open("POST",t,!0);return{xhr:e,licenseChallenge:n||r}})):(e.open("POST",t,!0),Promise.resolve({xhr:e,licenseChallenge:r}))}requestLicense(e,t){const n=this.config.keyLoadPolicy.default;return new Promise(((r,i)=>{const a=this.getLicenseServerUrlOrThrow(e.keySystem);this.log(`Sending license request to URL: ${a}`);const o=new XMLHttpRequest;o.responseType="arraybuffer",o.onreadystatechange=()=>{if(!this.hls||!e.mediaKeysSession)return i(new Error("invalid state"));if(4===o.readyState)if(200===o.status){this._requestLicenseFailureCount=0;let t=o.response;this.log(`License received ${t instanceof ArrayBuffer?t.byteLength:t}`);const n=this.config.licenseResponseCallback;if(n)try{t=n.call(this.hls,o,a,e)}catch(Rb){this.error(Rb)}r(t)}else{const s=n.errorRetry,l=s?s.maxNumRetry:0;if(this._requestLicenseFailureCount++,this._requestLicenseFailureCount>l||o.status>=400&&o.status<500)i(new O9({type:g1.KEY_SYSTEM_ERROR,details:v1.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0,networkDetails:o,response:{url:a,data:void 0,code:o.status,text:o.statusText}},`License Request XHR failed (${a}). Status: ${o.status} (${o.statusText})`));else{const n=l-this._requestLicenseFailureCount+1;this.warn(`Retrying license request, ${n} attempts left`),this.requestLicense(e,t).then(r,i)}}},e.licenseXhr&&e.licenseXhr.readyState!==XMLHttpRequest.DONE&&e.licenseXhr.abort(),e.licenseXhr=o,this.setupLicenseXHR(o,a,e,t).then((t=>{let{xhr:n,licenseChallenge:r}=t;e.keySystem==B1.PLAYREADY&&(r=this.unpackPlayReadyKeyMessage(n,r)),n.send(r)}))}))}onMediaAttached(e,t){if(!this.config.emeEnabled)return;const n=t.media;this.media=n,n.removeEventListener("encrypted",this.onMediaEncrypted),n.removeEventListener("waitingforkey",this.onWaitingForKey),n.addEventListener("encrypted",this.onMediaEncrypted),n.addEventListener("waitingforkey",this.onWaitingForKey)}onMediaDetached(){const e=this.media,t=this.mediaKeySessions;e&&(e.removeEventListener("encrypted",this.onMediaEncrypted),e.removeEventListener("waitingforkey",this.onWaitingForKey),this.media=null),this._requestLicenseFailureCount=0,this.setMediaKeysQueue=[],this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},G2.clearKeyUriToKeyIdMap();const n=t.length;N9.CDMCleanupPromise=Promise.all(t.map((e=>this.removeSession(e))).concat(null==e?void 0:e.setMediaKeys(null).catch((e=>{this.log(`Could not clear media keys: ${e}`)})))).then((()=>{n&&(this.log("finished closing key sessions and clearing media keys"),t.length=0)})).catch((e=>{this.log(`Could not close sessions and clear media keys: ${e}`)}))}onManifestLoading(){this.keyFormatPromise=null}onManifestLoaded(e,t){let{sessionKeys:n}=t;if(n&&this.config.emeEnabled&&!this.keyFormatPromise){const e=n.reduce(((e,t)=>(-1===e.indexOf(t.keyFormat)&&e.push(t.keyFormat),e)),[]);this.log(`Selecting key-system from session-keys ${e.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(e)}}removeSession(e){const{mediaKeysSession:t,licenseXhr:n}=e;if(t){this.log(`Remove licenses and keys and close session ${t.sessionId}`),e._onmessage&&(t.removeEventListener("message",e._onmessage),e._onmessage=void 0),e._onkeystatuseschange&&(t.removeEventListener("keystatuseschange",e._onkeystatuseschange),e._onkeystatuseschange=void 0),n&&n.readyState!==XMLHttpRequest.DONE&&n.abort(),e.mediaKeysSession=e.decryptdata=e.licenseXhr=void 0;const r=this.mediaKeySessions.indexOf(e);return r>-1&&this.mediaKeySessions.splice(r,1),t.remove().catch((e=>{this.log(`Could not remove session: ${e}`)})).then((()=>t.close())).catch((e=>{this.log(`Could not close session: ${e}`)}))}}}N9.CDMCleanupPromise=void 0;class O9 extends Error{constructor(e,t){super(t),this.data=void 0,e.error||(e.error=new Error(t)),this.data=e,e.err=e.error}}var j9,F9,U9;!function(e){e.MANIFEST="m",e.AUDIO="a",e.VIDEO="v",e.MUXED="av",e.INIT="i",e.CAPTION="c",e.TIMED_TEXT="tt",e.KEY="k",e.OTHER="o"}(j9||(j9={})),function(e){e.DASH="d",e.HLS="h",e.SMOOTH="s",e.OTHER="o"}(F9||(F9={})),function(e){e.OBJECT="CMCD-Object",e.REQUEST="CMCD-Request",e.SESSION="CMCD-Session",e.STATUS="CMCD-Status"}(U9||(U9={}));const B9={[U9.OBJECT]:["br","d","ot","tb"],[U9.REQUEST]:["bl","dl","mtp","nor","nrr","su"],[U9.SESSION]:["cid","pr","sf","sid","st","v"],[U9.STATUS]:["bs","rtp"]};class $9{constructor(e,t){this.value=void 0,this.params=void 0,Array.isArray(e)&&(e=e.map((e=>e instanceof $9?e:new $9(e)))),this.value=e,this.params=t}}class V9{constructor(e){this.description=void 0,this.description=e}}function W9(e,t,n,r){return new Error(`failed to ${e} "${i=t,Array.isArray(i)?JSON.stringify(i):i instanceof Map?"Map{}":i instanceof Set?"Set{}":"object"===typeof i?JSON.stringify(i):String(i)}" as ${n}`,{cause:r});var i}const z9="Bare Item";const H9=/[\x00-\x1f\x7f]+/;function q9(e,t,n){return W9("serialize",e,t,n)}function G9(e){if(!1===ArrayBuffer.isView(e))throw q9(e,"Byte Sequence");return`:${t=e,btoa(String.fromCharCode(...t))}:`;var t}function K9(e){if(function(e){return e<-999999999999999||999999999999999<e}(e))throw q9(e,"Integer");return e.toString()}function Y9(e,t){if(e<0)return-Y9(-e,t);const n=Math.pow(10,t);if(Math.abs(e*n%1-.5)<Number.EPSILON){const t=Math.floor(e*n);return(t%2===0?t:t+1)/n}return Math.round(e*n)/n}function Q9(e){const t=Y9(e,3);if(Math.floor(Math.abs(t)).toString().length>12)throw q9(e,"Decimal");const n=t.toString();return n.includes(".")?n:`${n}.0`}function X9(e){const t=(n=e).description||n.toString().slice(7,-1);var n;if(!1===/^([a-zA-Z*])([!#$%&'*+\-.^_`|~\w:/]*)$/.test(t))throw q9(t,"Token");return t}function Z9(e){switch(typeof e){case"number":if(!h1(e))throw q9(e,z9);return Number.isInteger(e)?K9(e):Q9(e);case"string":return function(e){if(H9.test(e))throw q9(e,"String");return`"${e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`}(e);case"symbol":return X9(e);case"boolean":return function(e){if("boolean"!==typeof e)throw q9(e,"Boolean");return e?"?1":"?0"}(e);case"object":if(e instanceof Date)return function(e){return`@${K9(e.getTime()/1e3)}`}(e);if(e instanceof Uint8Array)return G9(e);if(e instanceof V9)return X9(e);default:throw q9(e,z9)}}function J9(e){if(!1===/^[a-z*][a-z0-9\-_.*]*$/.test(e))throw q9(e,"Key");return e}function e8(e){return null==e?"":Object.entries(e).map((e=>{let[t,n]=e;return!0===n?`;${J9(t)}`:`;${J9(t)}=${Z9(n)}`})).join("")}function t8(e){return e instanceof $9?`${Z9(e.value)}${e8(e.params)}`:Z9(e)}function n8(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{whitespace:!0};if("object"!==typeof e)throw q9(e,"Dict");const n=e instanceof Map?e.entries():Object.entries(e),r=null!=t&&t.whitespace?" ":"";return Array.from(n).map((e=>{let[t,n]=e;n instanceof $9===!1&&(n=new $9(n));let r=J9(t);var i;return!0===n.value?r+=e8(n.params):(r+="=",Array.isArray(n.value)?r+=`(${(i=n).value.map(t8).join(" ")})${e8(i.params)}`:r+=t8(n)),r})).join(`,${r}`)}const r8=e=>Math.round(e),i8=e=>100*r8(e/100),a8={br:r8,d:r8,bl:i8,dl:i8,mtp:i8,nor:(e,t)=>(null!=t&&t.baseUrl&&(e=function(e,t){const n=new URL(e),r=new URL(t);if(n.origin!==r.origin)return e;const i=n.pathname.split("/").slice(1),a=r.pathname.split("/").slice(1,-1);for(;i[0]===a[0];)i.shift(),a.shift();for(;a.length;)a.shift(),i.unshift("..");return i.join("/")}(e,t.baseUrl)),encodeURIComponent(e)),rtp:i8,tb:r8};function o8(e,t){const n={};if(null==e||"object"!==typeof e)return n;const r=Object.keys(e).sort(),i=d1({},a8,null==t?void 0:t.formatters),a=null==t?void 0:t.filter;return r.forEach((r=>{if(null!=a&&a(r))return;let o=e[r];const s=i[r];s&&(o=s(o,t)),"v"===r&&1===o||"pr"==r&&1===o||(e=>"number"===typeof e?h1(e):null!=e&&""!==e&&!1!==e)(o)&&((e=>"ot"===e||"sf"===e||"st"===e)(r)&&"string"===typeof o&&(o=new V9(o)),n[r]=o)})),n}function s8(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e?function(e,t){return n8(e,t)}(o8(e,t),d1({whitespace:!1},t)):""}function l8(e,t,n){return d1(e,function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return{};const n=Object.entries(e),r=Object.entries(B9).concat(Object.entries((null==t?void 0:t.customHeaderMap)||{})),i=n.reduce(((e,t)=>{var n;const[i,a]=t,o=(null==(n=r.find((e=>e[1].includes(i))))?void 0:n[0])||U9.REQUEST;return null!=e[o]||(e[o]={}),e[o][i]=a,e}),{});return Object.entries(i).reduce(((e,n)=>{let[r,i]=n;return e[r]=s8(i,t),e}),{})}(t,n))}const c8=/CMCD=[^&#]+/;function u8(e,t,n){const r=function(e){if(!e)return"";const t=s8(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});return`CMCD=${encodeURIComponent(t)}`}(t,n);if(!r)return e;if(c8.test(e))return e.replace(c8,r);const i=e.includes("?")?"&":"?";return`${e}${i}${r}`}function d8(e,t,n,r){e&&Object.keys(t).forEach((i=>{const a=e.filter((e=>e.groupId===i)).map((e=>{const a=d1({},e);return a.details=void 0,a.attrs=new T1(a.attrs),a.url=a.attrs.URI=h8(e.url,e.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",n),a.groupId=a.attrs["GROUP-ID"]=t[i],a.attrs["PATHWAY-ID"]=r,a}));e.push(...a)}))}function h8(e,t,n,r){const{HOST:i,PARAMS:a,[n]:o}=r;let s;t&&(s=null==o?void 0:o[t],s&&(e=s));const l=new self.URL(e);return i&&!s&&(l.host=i),a&&Object.keys(a).sort().forEach((e=>{e&&l.searchParams.set(e,a[e])})),l.href}const p8=/^age:\s*[\d.]+\s*$/im;class f8{constructor(e){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=null,this.loader=null,this.stats=void 0,this.xhrSetup=e&&e.xhrSetup||null,this.stats=new C1,this.retryDelay=0}destroy(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null,this.context=null,this.xhrSetup=null}abortInternal(){const e=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),e&&(e.onreadystatechange=null,e.onprogress=null,4!==e.readyState&&(this.stats.aborted=!0,e.abort()))}abort(){var e;this.abortInternal(),null!=(e=this.callbacks)&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)}load(e,t,n){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=e,this.config=t,this.callbacks=n,this.loadInternal()}loadInternal(){const{config:e,context:t}=this;if(!e||!t)return;const n=this.loader=new self.XMLHttpRequest,r=this.stats;r.loading.first=0,r.loaded=0,r.aborted=!1;const i=this.xhrSetup;i?Promise.resolve().then((()=>{if(this.loader===n&&!this.stats.aborted)return i(n,t.url)})).catch((e=>{if(this.loader===n&&!this.stats.aborted)return n.open("GET",t.url,!0),i(n,t.url)})).then((()=>{this.loader!==n||this.stats.aborted||this.openAndSendXhr(n,t,e)})).catch((e=>{this.callbacks.onError({code:n.status,text:e.message},t,n,r)})):this.openAndSendXhr(n,t,e)}openAndSendXhr(e,t,n){e.readyState||e.open("GET",t.url,!0);const r=t.headers,{maxTimeToFirstByteMs:i,maxLoadTimeMs:a}=n.loadPolicy;if(r)for(const o in r)e.setRequestHeader(o,r[o]);t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,self.clearTimeout(this.requestTimeout),n.timeout=i&&h1(i)?i:a,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),n.timeout),e.send()}readystatechange(){const{context:e,loader:t,stats:n}=this;if(!e||!t)return;const r=t.readyState,i=this.config;if(!n.aborted&&r>=2&&(0===n.loading.first&&(n.loading.first=Math.max(self.performance.now(),n.loading.start),i.timeout!==i.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),i.timeout=i.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),i.loadPolicy.maxLoadTimeMs-(n.loading.first-n.loading.start)))),4===r)){self.clearTimeout(this.requestTimeout),t.onreadystatechange=null,t.onprogress=null;const r=t.status,a="text"===t.responseType?t.responseText:null;if(r>=200&&r<300){const i=null!=a?a:t.response;if(null!=i){n.loading.end=Math.max(self.performance.now(),n.loading.first);const a="arraybuffer"===t.responseType?i.byteLength:i.length;if(n.loaded=n.total=a,n.bwEstimate=8e3*n.total/(n.loading.end-n.loading.first),!this.callbacks)return;const o=this.callbacks.onProgress;if(o&&o(n,e,i,t),!this.callbacks)return;const s={url:t.responseURL,data:i,code:r};return void this.callbacks.onSuccess(s,n,e,t)}}const o=i.loadPolicy.errorRetry;m4(o,n.retry,!1,{url:e.url,data:void 0,code:r})?this.retry(o):(x1.error(`${r} while loading ${e.url}`),this.callbacks.onError({code:r,text:t.statusText},e,t,n))}}loadtimeout(){if(!this.config)return;const e=this.config.loadPolicy.timeoutRetry;if(m4(e,this.stats.retry,!0))this.retry(e);else{var t;x1.warn(`timeout while loading ${null==(t=this.context)?void 0:t.url}`);const e=this.callbacks;e&&(this.abortInternal(),e.onTimeout(this.stats,this.context,this.loader))}}retry(e){const{context:t,stats:n}=this;this.retryDelay=p4(e,n.retry),n.retry++,x1.warn(`${status?"HTTP Status "+status:"Timeout"} while loading ${null==t?void 0:t.url}, retrying ${n.retry}/${e.maxNumRetry} in ${this.retryDelay}ms`),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)}loadprogress(e){const t=this.stats;t.loaded=e.loaded,e.lengthComputable&&(t.total=e.total)}getCacheAge(){let e=null;if(this.loader&&p8.test(this.loader.getAllResponseHeaders())){const t=this.loader.getResponseHeader("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.loader&&new RegExp(`^${e}:\\s*[\\d.]+\\s*$`,"im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(e):null}}const m8=/(\d+)-(\d+)\/(\d+)/;class g8{constructor(e){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=null,this.response=null,this.controller=void 0,this.context=null,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=e.fetchSetup||v8,this.controller=new self.AbortController,this.stats=new C1}destroy(){this.loader=this.callbacks=this.context=this.config=this.request=null,this.abortInternal(),this.response=null,this.fetchSetup=this.controller=this.stats=null}abortInternal(){this.controller&&!this.stats.loading.end&&(this.stats.aborted=!0,this.controller.abort())}abort(){var e;this.abortInternal(),null!=(e=this.callbacks)&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)}load(e,t,n){const r=this.stats;if(r.loading.start)throw new Error("Loader can only be used once.");r.loading.start=self.performance.now();const i=function(e,t){const n={method:"GET",mode:"cors",credentials:"same-origin",signal:t,headers:new self.Headers(d1({},e.headers))};e.rangeEnd&&n.headers.set("Range","bytes="+e.rangeStart+"-"+String(e.rangeEnd-1));return n}(e,this.controller.signal),a=n.onProgress,o="arraybuffer"===e.responseType,s=o?"byteLength":"length",{maxTimeToFirstByteMs:l,maxLoadTimeMs:c}=t.loadPolicy;this.context=e,this.config=t,this.callbacks=n,this.request=this.fetchSetup(e,i),self.clearTimeout(this.requestTimeout),t.timeout=l&&h1(l)?l:c,this.requestTimeout=self.setTimeout((()=>{this.abortInternal(),n.onTimeout(r,e,this.response)}),t.timeout),self.fetch(this.request).then((i=>{this.response=this.loader=i;const s=Math.max(self.performance.now(),r.loading.start);if(self.clearTimeout(this.requestTimeout),t.timeout=c,this.requestTimeout=self.setTimeout((()=>{this.abortInternal(),n.onTimeout(r,e,this.response)}),c-(s-r.loading.start)),!i.ok){const{status:e,statusText:t}=i;throw new y8(t||"fetch, bad network response",e,i)}return r.loading.first=s,r.total=function(e){const t=e.get("Content-Range");if(t){const e=function(e){const t=m8.exec(e);if(t)return parseInt(t[2])-parseInt(t[1])+1}(t);if(h1(e))return e}const n=e.get("Content-Length");if(n)return parseInt(n)}(i.headers)||r.total,a&&h1(t.highWaterMark)?this.loadProgressively(i,r,e,t.highWaterMark,a):o?i.arrayBuffer():"json"===e.responseType?i.json():i.text()})).then((i=>{const o=this.response;if(!o)throw new Error("loader destroyed");self.clearTimeout(this.requestTimeout),r.loading.end=Math.max(self.performance.now(),r.loading.first);const l=i[s];l&&(r.loaded=r.total=l);const c={url:o.url,data:i,code:o.status};a&&!h1(t.highWaterMark)&&a(r,e,i,o),n.onSuccess(c,r,e,o)})).catch((t=>{if(self.clearTimeout(this.requestTimeout),r.aborted)return;const i=t&&t.code||0,a=t?t.message:null;n.onError({code:i,text:a},e,t?t.details:null,r)}))}getCacheAge(){let e=null;if(this.response){const t=this.response.headers.get("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.response?this.response.headers.get(e):null}loadProgressively(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4?arguments[4]:void 0;const a=new T5,o=e.body.getReader(),s=()=>o.read().then((o=>{if(o.done)return a.dataLength&&i(t,n,a.flush(),e),Promise.resolve(new ArrayBuffer(0));const l=o.value,c=l.length;return t.loaded+=c,c<r||a.dataLength?(a.push(l),a.dataLength>=r&&i(t,n,a.flush(),e)):i(t,n,l,e),s()})).catch((()=>Promise.reject()));return s()}}function v8(e,t){return new self.Request(e.url,t)}class y8 extends Error{constructor(e,t,n){super(e),this.code=void 0,this.details=void 0,this.code=t,this.details=n}}const b8=/\s/,w8={newCue(e,t,n,r){const i=[];let a,o,s,l,c;const u=self.VTTCue||self.TextTrackCue;for(let h=0;h<r.rows.length;h++)if(a=r.rows[h],s=!0,l=0,c="",!a.isEmpty()){var d;for(let e=0;e<a.chars.length;e++)b8.test(a.chars[e].uchar)&&s?l++:(c+=a.chars[e].uchar,s=!1);a.cueStartTime=t,t===n&&(n+=1e-4),l>=16?l--:l++;const r=p9(c.trim()),p=y9(t,n,r);null!=e&&null!=(d=e.cues)&&d.getCueById(p)||(o=new u(t,n,r),o.id=p,o.line=h+1,o.align="left",o.position=10+Math.min(80,10*Math.floor(8*l/32)),i.push(o))}return e&&i.length&&(i.sort(((e,t)=>"auto"===e.line||"auto"===t.line?0:e.line>8&&t.line>8?t.line-e.line:e.line-t.line)),i.forEach((t=>N3(e,t)))),i}},E8=l1(l1({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,preferManagedMediaSource:!0,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,frontBufferFlushThreshold:1/0,maxBufferSize:6e7,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:f8,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:class{constructor(e){this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=-1,this.firstSelection=-1,this._nextAutoLevel=-1,this.nextAutoLevelKey="",this.audioTracksByGroup=null,this.codecTiers=null,this.timer=-1,this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.bwEstimator=void 0,this._abandonRulesCheck=()=>{const{fragCurrent:e,partCurrent:t,hls:n}=this,{autoLevelEnabled:r,media:i}=n;if(!e||!i)return;const a=performance.now(),o=t?t.stats:e.stats,s=t?t.duration:e.duration,l=a-o.loading.start,c=n.minAutoLevel;if(o.aborted||o.loaded&&o.loaded===o.total||e.level<=c)return this.clearTimer(),void(this._nextAutoLevel=-1);if(!r||i.paused||!i.playbackRate||!i.readyState)return;const u=n.mainForwardBufferInfo;if(null===u)return;const d=this.bwEstimator.getEstimateTTFB(),h=Math.abs(i.playbackRate);if(l<=Math.max(d,s/(2*h)*1e3))return;const p=u.len/h,f=o.loading.first?o.loading.first-o.loading.start:-1,m=o.loaded&&f>-1,g=this.getBwEstimate(),v=n.levels,y=v[e.level],b=o.total||Math.max(o.loaded,Math.round(s*y.averageBitrate/8));let w=m?l-f:l;w<1&&m&&(w=Math.min(l,8*o.loaded/g));const E=m?1e3*o.loaded/w:0,x=E?(b-o.loaded)/E:8*b/g+d/1e3;if(x<=p)return;const _=E?8*E:g;let A,T=Number.POSITIVE_INFINITY;for(A=e.level-1;A>c;A--){const e=v[A].maxBitrate;if(T=this.getTimeToLoadFrag(d/1e3,_,s*e,!v[A].details),T<p)break}if(T>=x)return;if(T>10*s)return;n.nextLoadLevel=n.nextAutoLevel=A,m?this.bwEstimator.sample(l-Math.min(d,f),o.loaded):this.bwEstimator.sampleTTFB(l);const S=v[A].maxBitrate;this.getBwEstimate()*this.hls.config.abrBandWidthUpFactor>S&&this.resetEstimator(S),this.clearTimer(),x1.warn(`[abr] Fragment ${e.sn}${t?" part "+t.index:""} of level ${e.level} is loading too slowly;\n      Time to underbuffer: ${p.toFixed(3)} s\n      Estimated load time for current fragment: ${x.toFixed(3)} s\n      Estimated load time for down switch fragment: ${T.toFixed(3)} s\n      TTFB estimate: ${0|f} ms\n      Current BW estimate: ${h1(g)?0|g:"Unknown"} bps\n      New BW estimate: ${0|this.getBwEstimate()} bps\n      Switching to level ${A} @ ${0|S} bps`),n.trigger(m1.FRAG_LOAD_EMERGENCY_ABORTED,{frag:e,part:t,stats:o})},this.hls=e,this.bwEstimator=this.initEstimator(),this.registerListeners()}resetEstimator(e){e&&(x1.log(`setting initial bwe to ${e}`),this.hls.config.abrEwmaDefaultEstimate=e),this.firstSelection=-1,this.bwEstimator=this.initEstimator()}initEstimator(){const e=this.hls.config;return new I4(e.abrEwmaSlowVoD,e.abrEwmaFastVoD,e.abrEwmaDefaultEstimate)}registerListeners(){const{hls:e}=this;e.on(m1.MANIFEST_LOADING,this.onManifestLoading,this),e.on(m1.FRAG_LOADING,this.onFragLoading,this),e.on(m1.FRAG_LOADED,this.onFragLoaded,this),e.on(m1.FRAG_BUFFERED,this.onFragBuffered,this),e.on(m1.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(m1.LEVEL_LOADED,this.onLevelLoaded,this),e.on(m1.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(m1.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.on(m1.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e&&(e.off(m1.MANIFEST_LOADING,this.onManifestLoading,this),e.off(m1.FRAG_LOADING,this.onFragLoading,this),e.off(m1.FRAG_LOADED,this.onFragLoaded,this),e.off(m1.FRAG_BUFFERED,this.onFragBuffered,this),e.off(m1.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(m1.LEVEL_LOADED,this.onLevelLoaded,this),e.off(m1.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(m1.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.off(m1.ERROR,this.onError,this))}destroy(){this.unregisterListeners(),this.clearTimer(),this.hls=this._abandonRulesCheck=null,this.fragCurrent=this.partCurrent=null}onManifestLoading(e,t){this.lastLoadedFragLevel=-1,this.firstSelection=-1,this.lastLevelLoadSec=0,this.fragCurrent=this.partCurrent=null,this.onLevelsUpdated(),this.clearTimer()}onLevelsUpdated(){this.lastLoadedFragLevel>-1&&this.fragCurrent&&(this.lastLoadedFragLevel=this.fragCurrent.level),this._nextAutoLevel=-1,this.onMaxAutoLevelUpdated(),this.codecTiers=null,this.audioTracksByGroup=null}onMaxAutoLevelUpdated(){this.firstSelection=-1,this.nextAutoLevelKey=""}onFragLoading(e,t){const n=t.frag;if(!this.ignoreFragment(n)){var r;if(!n.bitrateTest)this.fragCurrent=n,this.partCurrent=null!=(r=t.part)?r:null;this.clearTimer(),this.timer=self.setInterval(this._abandonRulesCheck,100)}}onLevelSwitching(e,t){this.clearTimer()}onError(e,t){if(!t.fatal)switch(t.details){case v1.BUFFER_ADD_CODEC_ERROR:case v1.BUFFER_APPEND_ERROR:this.lastLoadedFragLevel=-1,this.firstSelection=-1;break;case v1.FRAG_LOAD_TIMEOUT:{const e=t.frag,{fragCurrent:n,partCurrent:r}=this;if(e&&n&&e.sn===n.sn&&e.level===n.level){const t=performance.now(),n=r?r.stats:e.stats,i=t-n.loading.start,a=n.loading.first?n.loading.first-n.loading.start:-1;if(n.loaded&&a>-1){const e=this.bwEstimator.getEstimateTTFB();this.bwEstimator.sample(i-Math.min(e,a),n.loaded)}else this.bwEstimator.sampleTTFB(i)}break}}}getTimeToLoadFrag(e,t,n,r){return e+n/t+(r?this.lastLevelLoadSec:0)}onLevelLoaded(e,t){const n=this.hls.config,{loading:r}=t.stats,i=r.end-r.start;h1(i)&&(this.lastLevelLoadSec=i/1e3),t.details.live?this.bwEstimator.update(n.abrEwmaSlowLive,n.abrEwmaFastLive):this.bwEstimator.update(n.abrEwmaSlowVoD,n.abrEwmaFastVoD)}onFragLoaded(e,t){let{frag:n,part:r}=t;const i=r?r.stats:n.stats;if(n.type===C3&&this.bwEstimator.sampleTTFB(i.loading.first-i.loading.start),!this.ignoreFragment(n)){if(this.clearTimer(),n.level===this._nextAutoLevel&&(this._nextAutoLevel=-1),this.firstSelection=-1,this.hls.config.abrMaxWithRealBitrate){const e=r?r.duration:n.duration,t=this.hls.levels[n.level],a=(t.loaded?t.loaded.bytes:0)+i.loaded,o=(t.loaded?t.loaded.duration:0)+e;t.loaded={bytes:a,duration:o},t.realBitrate=Math.round(8*a/o)}if(n.bitrateTest){const e={stats:i,frag:n,part:r,id:n.type};this.onFragBuffered(m1.FRAG_BUFFERED,e),n.bitrateTest=!1}else this.lastLoadedFragLevel=n.level}}onFragBuffered(e,t){const{frag:n,part:r}=t,i=null!=r&&r.stats.loaded?r.stats:n.stats;if(i.aborted)return;if(this.ignoreFragment(n))return;const a=i.parsing.end-i.loading.start-Math.min(i.loading.first-i.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(a,i.loaded),i.bwEstimate=this.getBwEstimate(),n.bitrateTest?this.bitrateTestDelay=a/1e3:this.bitrateTestDelay=0}ignoreFragment(e){return e.type!==C3||"initSegment"===e.sn}clearTimer(){this.timer>-1&&(self.clearInterval(this.timer),this.timer=-1)}get firstAutoLevel(){const{maxAutoLevel:e,minAutoLevel:t}=this.hls,n=this.getBwEstimate(),r=this.hls.config.maxStarvationDelay,i=this.findBestLevel(n,t,e,0,r,1,1);if(i>-1)return i;const a=this.hls.firstLevel,o=Math.min(Math.max(a,t),e);return x1.warn(`[abr] Could not find best starting auto level. Defaulting to first in playlist ${a} clamped to ${o}`),o}get forcedAutoLevel(){return this.nextAutoLevelKey?-1:this._nextAutoLevel}get nextAutoLevel(){const e=this.forcedAutoLevel,t=this.bwEstimator.canEstimate(),n=this.lastLoadedFragLevel>-1;if(-1!==e&&(!t||!n||this.nextAutoLevelKey===this.getAutoLevelKey()))return e;const r=t&&n?this.getNextABRAutoLevel():this.firstAutoLevel;if(-1!==e){const t=this.hls.levels;if(t.length>Math.max(e,r)&&t[e].loadError<=t[r].loadError)return e}return this._nextAutoLevel=r,this.nextAutoLevelKey=this.getAutoLevelKey(),r}getAutoLevelKey(){return`${this.getBwEstimate()}_${this.getStarvationDelay().toFixed(2)}`}getNextABRAutoLevel(){const{fragCurrent:e,partCurrent:t,hls:n}=this,{maxAutoLevel:r,config:i,minAutoLevel:a}=n,o=t?t.duration:e?e.duration:0,s=this.getBwEstimate(),l=this.getStarvationDelay();let c=i.abrBandWidthFactor,u=i.abrBandWidthUpFactor;if(l){const e=this.findBestLevel(s,a,r,l,0,c,u);if(e>=0)return e}let d=o?Math.min(o,i.maxStarvationDelay):i.maxStarvationDelay;if(!l){const e=this.bitrateTestDelay;if(e){d=(o?Math.min(o,i.maxLoadingDelay):i.maxLoadingDelay)-e,x1.info(`[abr] bitrate test took ${Math.round(1e3*e)}ms, set first fragment max fetchDuration to ${Math.round(1e3*d)} ms`),c=u=1}}const h=this.findBestLevel(s,a,r,l,d,c,u);if(x1.info(`[abr] ${l?"rebuffering expected":"buffer is empty"}, optimal quality level ${h}`),h>-1)return h;const p=n.levels[a],f=n.levels[n.loadLevel];return(null==p?void 0:p.bitrate)<(null==f?void 0:f.bitrate)?a:n.loadLevel}getStarvationDelay(){const e=this.hls,t=e.media;if(!t)return 1/0;const n=t&&0!==t.playbackRate?Math.abs(t.playbackRate):1,r=e.mainForwardBufferInfo;return(r?r.len:0)/n}getBwEstimate(){return this.bwEstimator.canEstimate()?this.bwEstimator.getEstimate():this.hls.config.abrEwmaDefaultEstimate}findBestLevel(e,t,n,r,i,a,o){var s;const l=r+i,c=this.lastLoadedFragLevel,u=-1===c?this.hls.firstLevel:c,{fragCurrent:d,partCurrent:h}=this,{levels:p,allAudioTracks:f,loadLevel:m,config:g}=this.hls;if(1===p.length)return 0;const v=p[u],y=!(null==v||null==(s=v.details)||!s.live),b=-1===m||-1===c;let w,E="SDR",x=(null==v?void 0:v.frameRate)||0;const{audioPreference:_,videoPreference:A}=g,T=this.audioTracksByGroup||(this.audioTracksByGroup=function(e){return e.reduce(((e,t)=>{let n=e.groups[t.groupId];n||(n=e.groups[t.groupId]={tracks:[],channels:{2:0},hasDefault:!1,hasAutoSelect:!1}),n.tracks.push(t);const r=t.channels||"2";return n.channels[r]=(n.channels[r]||0)+1,n.hasDefault=n.hasDefault||t.default,n.hasAutoSelect=n.hasAutoSelect||t.autoselect,n.hasDefault&&(e.hasDefaultAudio=!0),n.hasAutoSelect&&(e.hasAutoSelectAudio=!0),e}),{hasDefaultAudio:!1,hasAutoSelectAudio:!1,groups:{}})}(f));if(b){if(-1!==this.firstSelection)return this.firstSelection;const r=this.codecTiers||(this.codecTiers=function(e,t,n,r){return e.slice(n,r+1).reduce(((e,n)=>{if(!n.codecSet)return e;const r=n.audioGroups;let i=e[n.codecSet];i||(e[n.codecSet]=i={minBitrate:1/0,minHeight:1/0,minFramerate:1/0,maxScore:0,videoRanges:{SDR:0},channels:{2:0},hasDefaultAudio:!r,fragmentError:0}),i.minBitrate=Math.min(i.minBitrate,n.bitrate);const a=Math.min(n.height,n.width);return i.minHeight=Math.min(i.minHeight,a),i.minFramerate=Math.min(i.minFramerate,n.frameRate),i.maxScore=Math.max(i.maxScore,n.score),i.fragmentError+=n.fragmentError,i.videoRanges[n.videoRange]=(i.videoRanges[n.videoRange]||0)+1,r&&r.forEach((e=>{if(!e)return;const n=t.groups[e];n&&(i.hasDefaultAudio=i.hasDefaultAudio||t.hasDefaultAudio?n.hasDefault:n.hasAutoSelect||!t.hasDefaultAudio&&!t.hasAutoSelectAudio,Object.keys(n.channels).forEach((e=>{i.channels[e]=(i.channels[e]||0)+n.channels[e]})))})),e}),{})}(p,T,t,n)),i=function(e,t,n,r,i){const a=Object.keys(e),o=null==r?void 0:r.channels,s=null==r?void 0:r.audioCodec,l=o&&2===parseInt(o);let c=!0,u=!1,d=1/0,h=1/0,p=1/0,f=0,m=[];const{preferHDR:g,allowedVideoRanges:v}=M4(t,i);for(let w=a.length;w--;){const t=e[a[w]];c=t.channels[2]>0,d=Math.min(d,t.minHeight),h=Math.min(h,t.minFramerate),p=Math.min(p,t.minBitrate);const n=v.filter((e=>t.videoRanges[e]>0));n.length>0&&(u=!0,m=n)}d=h1(d)?d:0,h=h1(h)?h:0;const y=Math.max(1080,d),b=Math.max(30,h);return p=h1(p)?p:n,n=Math.max(p,n),u||(t=void 0,m=[]),{codecSet:a.reduce(((t,r)=>{const i=e[r];if(r===t)return t;if(i.minBitrate>n)return N4(r,`min bitrate of ${i.minBitrate} > current estimate of ${n}`),t;if(!i.hasDefaultAudio)return N4(r,"no renditions with default or auto-select sound found"),t;if(s&&r.indexOf(s.substring(0,4))%5!==0)return N4(r,`audio codec preference "${s}" not found`),t;if(o&&!l){if(!i.channels[o])return N4(r,`no renditions with ${o} channel sound found (channels options: ${Object.keys(i.channels)})`),t}else if((!s||l)&&c&&0===i.channels[2])return N4(r,"no renditions with stereo sound found"),t;return i.minHeight>y?(N4(r,`min resolution of ${i.minHeight} > maximum of ${y}`),t):i.minFramerate>b?(N4(r,`min framerate of ${i.minFramerate} > maximum of ${b}`),t):m.some((e=>i.videoRanges[e]>0))?i.maxScore<f?(N4(r,`max score of ${i.maxScore} < selected max of ${f}`),t):t&&(o3(r)>=o3(t)||i.fragmentError>e[t].fragmentError)?t:(f=i.maxScore,r):(N4(r,`no variants with VIDEO-RANGE of ${JSON.stringify(m)} found`),t)}),void 0),videoRanges:m,preferHDR:g,minFramerate:h,minBitrate:p}}(r,E,e,_,A),{codecSet:a,videoRanges:o,minFramerate:s,minBitrate:l,preferHDR:c}=i;w=a,E=c?o[o.length-1]:o[0],x=s,e=Math.max(e,l),x1.log(`[abr] picked start tier ${JSON.stringify(i)}`)}else w=null==v?void 0:v.codecSet,E=null==v?void 0:v.videoRange;const S=h?h.duration:d?d.duration:0,k=this.bwEstimator.getEstimateTTFB()/1e3,C=[];for(let R=n;R>=t;R--){var I;const t=p[R],s=R>u;if(!t)continue;if(g.useMediaCapabilities&&!t.supportedResult&&!t.supportedPromise){const n=navigator.mediaCapabilities;"function"===typeof(null==n?void 0:n.decodingInfo)&&L4(t,T,E,x,e,_)?(t.supportedPromise=P4(t,T,n),t.supportedPromise.then((e=>{if(!this.hls)return;t.supportedResult=e;const n=this.hls.levels,r=n.indexOf(t);e.error?x1.warn(`[abr] MediaCapabilities decodingInfo error: "${e.error}" for level ${r} ${JSON.stringify(e)}`):e.supported||(x1.warn(`[abr] Unsupported MediaCapabilities decodingInfo result for level ${r} ${JSON.stringify(e)}`),r>-1&&n.length>1&&(x1.log(`[abr] Removing unsupported level ${r}`),this.hls.removeLevel(r)))}))):t.supportedResult=R4}if(w&&t.codecSet!==w||E&&t.videoRange!==E||s&&x>t.frameRate||!s&&x>0&&x<t.frameRate||t.supportedResult&&(null==(I=t.supportedResult.decodingInfoResults)||!I[0].smooth)){C.push(R);continue}const d=t.details,f=(h?null==d?void 0:d.partTarget:null==d?void 0:d.averagetargetduration)||S;let A;A=s?o*e:a*e;const D=S&&r>=2*S&&0===i?p[R].averageBitrate:p[R].maxBitrate,L=this.getTimeToLoadFrag(k,A,D*f,void 0===d);if(A>=D&&(R===c||0===t.loadError&&0===t.fragmentError)&&(L<=k||!h1(L)||y&&!this.bitrateTestDelay||L<l)){const e=this.forcedAutoLevel;return R===m||-1!==e&&e===m||(C.length&&x1.trace(`[abr] Skipped level(s) ${C.join(",")} of ${n} max with CODECS and VIDEO-RANGE:"${p[C[0]].codecs}" ${p[C[0]].videoRange}; not compatible with "${v.codecs}" ${E}`),x1.info(`[abr] switch candidate:${u}->${R} adjustedbw(${Math.round(A)})-bitrate=${Math.round(A-D)} ttfb:${k.toFixed(1)} avgDuration:${f.toFixed(1)} maxFetchDuration:${l.toFixed(1)} fetchDuration:${L.toFixed(1)} firstSelection:${b} codecSet:${w} videoRange:${E} hls.loadLevel:${m}`)),b&&(this.firstSelection=R),R}}return-1}set nextAutoLevel(e){const{maxAutoLevel:t,minAutoLevel:n}=this.hls,r=Math.min(Math.max(e,n),t);this._nextAutoLevel!==r&&(this.nextAutoLevelKey="",this._nextAutoLevel=r)}},bufferController:class{constructor(e){this.details=null,this._objectUrl=null,this.operationQueue=void 0,this.listeners=void 0,this.hls=void 0,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.appendSource=void 0,this.appendErrors={audio:0,video:0,audiovideo:0},this.tracks={},this.pendingTracks={},this.sourceBuffer=void 0,this.log=void 0,this.warn=void 0,this.error=void 0,this._onEndStreaming=e=>{this.hls&&this.hls.pauseBuffering()},this._onStartStreaming=e=>{this.hls&&this.hls.resumeBuffering()},this._onMediaSourceOpen=()=>{const{media:e,mediaSource:t}=this;this.log("Media source opened"),e&&(e.removeEventListener("emptied",this._onMediaEmptied),this.updateMediaElementDuration(),this.hls.trigger(m1.MEDIA_ATTACHED,{media:e,mediaSource:t})),t&&t.removeEventListener("sourceopen",this._onMediaSourceOpen),this.checkPendingTracks()},this._onMediaSourceClose=()=>{this.log("Media source closed")},this._onMediaSourceEnded=()=>{this.log("Media source ended")},this._onMediaEmptied=()=>{const{mediaSrc:e,_objectUrl:t}=this;e!==t&&x1.error(`Media element src was set while attaching MediaSource (${t} > ${e})`)},this.hls=e;const t="[buffer-controller]";var n;this.appendSource=(n=e3(e.config.preferManagedMediaSource),"undefined"!==typeof self&&n===self.ManagedMediaSource),this.log=x1.log.bind(x1,t),this.warn=x1.warn.bind(x1,t),this.error=x1.error.bind(x1,t),this._initSourceBuffer(),this.registerListeners()}hasSourceTypes(){return this.getSourceBufferTypes().length>0||Object.keys(this.pendingTracks).length>0}destroy(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=null,this.hls=null}registerListeners(){const{hls:e}=this;e.on(m1.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(m1.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(m1.MANIFEST_LOADING,this.onManifestLoading,this),e.on(m1.MANIFEST_PARSED,this.onManifestParsed,this),e.on(m1.BUFFER_RESET,this.onBufferReset,this),e.on(m1.BUFFER_APPENDING,this.onBufferAppending,this),e.on(m1.BUFFER_CODECS,this.onBufferCodecs,this),e.on(m1.BUFFER_EOS,this.onBufferEos,this),e.on(m1.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(m1.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(m1.FRAG_PARSED,this.onFragParsed,this),e.on(m1.FRAG_CHANGED,this.onFragChanged,this)}unregisterListeners(){const{hls:e}=this;e.off(m1.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(m1.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(m1.MANIFEST_LOADING,this.onManifestLoading,this),e.off(m1.MANIFEST_PARSED,this.onManifestParsed,this),e.off(m1.BUFFER_RESET,this.onBufferReset,this),e.off(m1.BUFFER_APPENDING,this.onBufferAppending,this),e.off(m1.BUFFER_CODECS,this.onBufferCodecs,this),e.off(m1.BUFFER_EOS,this.onBufferEos,this),e.off(m1.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(m1.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(m1.FRAG_PARSED,this.onFragParsed,this),e.off(m1.FRAG_CHANGED,this.onFragChanged,this)}_initSourceBuffer(){this.sourceBuffer={},this.operationQueue=new O6(this.sourceBuffer),this.listeners={audio:[],video:[],audiovideo:[]},this.appendErrors={audio:0,video:0,audiovideo:0},this.lastMpegAudioChunk=null}onManifestLoading(){this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=0,this.details=null}onManifestParsed(e,t){let n=2;(t.audio&&!t.video||!t.altAudio)&&(n=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=n,this.log(`${this.bufferCodecEventsExpected} bufferCodec event(s) expected`)}onMediaAttaching(e,t){const n=this.media=t.media,r=e3(this.appendSource);if(n&&r){var i;const e=this.mediaSource=new r;this.log(`created media source: ${null==(i=e.constructor)?void 0:i.name}`),e.addEventListener("sourceopen",this._onMediaSourceOpen),e.addEventListener("sourceended",this._onMediaSourceEnded),e.addEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(e.addEventListener("startstreaming",this._onStartStreaming),e.addEventListener("endstreaming",this._onEndStreaming));const t=this._objectUrl=self.URL.createObjectURL(e);if(this.appendSource)try{n.removeAttribute("src");const r=self.ManagedMediaSource;n.disableRemotePlayback=n.disableRemotePlayback||r&&e instanceof r,F6(n),function(e,t){const n=self.document.createElement("source");n.type="video/mp4",n.src=t,e.appendChild(n)}(n,t),n.load()}catch(Rb){n.src=t}else n.src=t;n.addEventListener("emptied",this._onMediaEmptied)}}onMediaDetaching(){const{media:e,mediaSource:t,_objectUrl:n}=this;if(t){if(this.log("media source detaching"),"open"===t.readyState)try{t.endOfStream()}catch(mme){this.warn(`onMediaDetaching: ${mme.message} while calling endOfStream`)}this.onBufferReset(),t.removeEventListener("sourceopen",this._onMediaSourceOpen),t.removeEventListener("sourceended",this._onMediaSourceEnded),t.removeEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(t.removeEventListener("startstreaming",this._onStartStreaming),t.removeEventListener("endstreaming",this._onEndStreaming)),e&&(e.removeEventListener("emptied",this._onMediaEmptied),n&&self.URL.revokeObjectURL(n),this.mediaSrc===n?(e.removeAttribute("src"),this.appendSource&&F6(e),e.load()):this.warn("media|source.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={}}this.hls.trigger(m1.MEDIA_DETACHED,void 0)}onBufferReset(){this.getSourceBufferTypes().forEach((e=>{this.resetBuffer(e)})),this._initSourceBuffer(),this.hls.resumeBuffering()}resetBuffer(e){const t=this.sourceBuffer[e];try{var n;if(t)this.removeBufferListeners(e),this.sourceBuffer[e]=void 0,null!=(n=this.mediaSource)&&n.sourceBuffers.length&&this.mediaSource.removeSourceBuffer(t)}catch(mme){this.warn(`onBufferReset ${e}`,mme)}}onBufferCodecs(e,t){const n=this.getSourceBufferTypes().length,r=Object.keys(t);if(r.forEach((e=>{if(n){const n=this.tracks[e];if(n&&"function"===typeof n.buffer.changeType){var r;const{id:i,codec:a,levelCodec:o,container:s,metadata:l}=t[e],c=u3(n.codec,n.levelCodec),u=null==c?void 0:c.replace(j6,"$1");let d=u3(a,o);const h=null==(r=d)?void 0:r.replace(j6,"$1");if(d&&u!==h){"audio"===e.slice(0,5)&&(d=c3(d,this.appendSource));const t=`${s};codecs=${d}`;this.appendChangeType(e,t),this.log(`switching codec ${c} to ${d}`),this.tracks[e]={buffer:n.buffer,codec:a,container:s,levelCodec:o,metadata:l,id:i}}}}else this.pendingTracks[e]=t[e]})),n)return;const i=Math.max(this.bufferCodecEventsExpected-1,0);this.bufferCodecEventsExpected!==i&&(this.log(`${i} bufferCodec event(s) expected ${r.join(",")}`),this.bufferCodecEventsExpected=i),this.mediaSource&&"open"===this.mediaSource.readyState&&this.checkPendingTracks()}appendChangeType(e,t){const{operationQueue:n}=this,r={execute:()=>{const r=this.sourceBuffer[e];r&&(this.log(`changing ${e} sourceBuffer type to ${t}`),r.changeType(t)),n.shiftAndExecuteNext(e)},onStart:()=>{},onComplete:()=>{},onError:t=>{this.warn(`Failed to change ${e} SourceBuffer type`,t)}};n.append(r,e,!!this.pendingTracks[e])}onBufferAppending(e,t){const{hls:n,operationQueue:r,tracks:i}=this,{data:a,type:o,frag:s,part:l,chunkMeta:c}=t,u=c.buffering[o],d=self.performance.now();u.start=d;const h=s.stats.buffering,p=l?l.stats.buffering:null;0===h.start&&(h.start=d),p&&0===p.start&&(p.start=d);const f=i.audio;let m=!1;"audio"===o&&"audio/mpeg"===(null==f?void 0:f.container)&&(m=!this.lastMpegAudioChunk||1===c.id||this.lastMpegAudioChunk.sn!==c.sn,this.lastMpegAudioChunk=c);const g=s.start,v={execute:()=>{if(u.executeStart=self.performance.now(),m){const e=this.sourceBuffer[o];if(e){const t=g-e.timestampOffset;Math.abs(t)>=.1&&(this.log(`Updating audio SourceBuffer timestampOffset to ${g} (delta: ${t}) sn: ${s.sn})`),e.timestampOffset=g)}}this.appendExecutor(a,o)},onStart:()=>{},onComplete:()=>{const e=self.performance.now();u.executeEnd=u.end=e,0===h.first&&(h.first=e),p&&0===p.first&&(p.first=e);const{sourceBuffer:t}=this,n={};for(const r in t)n[r]=Y4.getBuffered(t[r]);this.appendErrors[o]=0,"audio"===o||"video"===o?this.appendErrors.audiovideo=0:(this.appendErrors.audio=0,this.appendErrors.video=0),this.hls.trigger(m1.BUFFER_APPENDED,{type:o,frag:s,part:l,chunkMeta:c,parent:s.type,timeRanges:n})},onError:e=>{const t={type:g1.MEDIA_ERROR,parent:s.type,details:v1.BUFFER_APPEND_ERROR,sourceBufferName:o,frag:s,part:l,chunkMeta:c,error:e,err:e,fatal:!1};if(e.code===DOMException.QUOTA_EXCEEDED_ERR)t.details=v1.BUFFER_FULL_ERROR;else{const e=++this.appendErrors[o];t.details=v1.BUFFER_APPEND_ERROR,this.warn(`Failed ${e}/${n.config.appendErrorMaxRetry} times to append segment in "${o}" sourceBuffer`),e>=n.config.appendErrorMaxRetry&&(t.fatal=!0)}n.trigger(m1.ERROR,t)}};r.append(v,o,!!this.pendingTracks[o])}onBufferFlushing(e,t){const{operationQueue:n}=this,r=e=>({execute:this.removeExecutor.bind(this,e,t.startOffset,t.endOffset),onStart:()=>{},onComplete:()=>{this.hls.trigger(m1.BUFFER_FLUSHED,{type:e})},onError:t=>{this.warn(`Failed to remove from ${e} SourceBuffer`,t)}});t.type?n.append(r(t.type),t.type):this.getSourceBufferTypes().forEach((e=>{n.append(r(e),e)}))}onFragParsed(e,t){const{frag:n,part:r}=t,i=[],a=r?r.elementaryStreams:n.elementaryStreams;a[D1]?i.push("audiovideo"):(a[I1]&&i.push("audio"),a[R1]&&i.push("video"));0===i.length&&this.warn(`Fragments must have at least one ElementaryStreamType set. type: ${n.type} level: ${n.level} sn: ${n.sn}`),this.blockBuffers((()=>{const e=self.performance.now();n.stats.buffering.end=e,r&&(r.stats.buffering.end=e);const t=r?r.stats:n.stats;this.hls.trigger(m1.FRAG_BUFFERED,{frag:n,part:r,stats:t,id:n.type})}),i)}onFragChanged(e,t){this.trimBuffers()}onBufferEos(e,t){this.getSourceBufferTypes().reduce(((e,n)=>{const r=this.sourceBuffer[n];return!r||t.type&&t.type!==n||(r.ending=!0,r.ended||(r.ended=!0,this.log(`${n} sourceBuffer now EOS`))),e&&!(r&&!r.ended)}),!0)&&(this.log("Queueing mediaSource.endOfStream()"),this.blockBuffers((()=>{this.getSourceBufferTypes().forEach((e=>{const t=this.sourceBuffer[e];t&&(t.ending=!1)}));const{mediaSource:e}=this;e&&"open"===e.readyState?(this.log("Calling mediaSource.endOfStream()"),e.endOfStream()):e&&this.log(`Could not call mediaSource.endOfStream(). mediaSource.readyState: ${e.readyState}`)})))}onLevelUpdated(e,t){let{details:n}=t;n.fragments.length&&(this.details=n,this.getSourceBufferTypes().length?this.blockBuffers(this.updateMediaElementDuration.bind(this)):this.updateMediaElementDuration())}trimBuffers(){const{hls:e,details:t,media:n}=this;if(!n||null===t)return;if(!this.getSourceBufferTypes().length)return;const r=e.config,i=n.currentTime,a=t.levelTargetDuration,o=t.live&&null!==r.liveBackBufferLength?r.liveBackBufferLength:r.backBufferLength;if(h1(o)&&o>0){const e=Math.max(o,a),t=Math.floor(i/a)*a-e;this.flushBackBuffer(i,a,t)}if(h1(r.frontBufferFlushThreshold)&&r.frontBufferFlushThreshold>0){const e=Math.max(r.maxBufferLength,r.frontBufferFlushThreshold),t=Math.max(e,a),n=Math.floor(i/a)*a+t;this.flushFrontBuffer(i,a,n)}}flushBackBuffer(e,t,n){const{details:r,sourceBuffer:i}=this;this.getSourceBufferTypes().forEach((a=>{const o=i[a];if(o){const i=Y4.getBuffered(o);if(i.length>0&&n>i.start(0)){if(this.hls.trigger(m1.BACK_BUFFER_REACHED,{bufferEnd:n}),null!=r&&r.live)this.hls.trigger(m1.LIVE_BACK_BUFFER_REACHED,{bufferEnd:n});else if(o.ended&&i.end(i.length-1)-e<2*t)return void this.log(`Cannot flush ${a} back buffer while SourceBuffer is in ended state`);this.hls.trigger(m1.BUFFER_FLUSHING,{startOffset:0,endOffset:n,type:a})}}}))}flushFrontBuffer(e,t,n){const{sourceBuffer:r}=this;this.getSourceBufferTypes().forEach((i=>{const a=r[i];if(a){const r=Y4.getBuffered(a),o=r.length;if(o<2)return;const s=r.start(o-1),l=r.end(o-1);if(n>s||e>=s&&e<=l)return;if(a.ended&&e-l<2*t)return void this.log(`Cannot flush ${i} front buffer while SourceBuffer is in ended state`);this.hls.trigger(m1.BUFFER_FLUSHING,{startOffset:s,endOffset:1/0,type:i})}}))}updateMediaElementDuration(){if(!this.details||!this.media||!this.mediaSource||"open"!==this.mediaSource.readyState)return;const{details:e,hls:t,media:n,mediaSource:r}=this,i=e.fragments[0].start+e.totalduration,a=n.duration,o=h1(r.duration)?r.duration:0;e.live&&t.config.liveDurationInfinity?(r.duration=1/0,this.updateSeekableRange(e)):(i>o&&i>a||!h1(a))&&(this.log(`Updating Media Source duration to ${i.toFixed(3)}`),r.duration=i)}updateSeekableRange(e){const t=this.mediaSource,n=e.fragments;if(n.length&&e.live&&null!=t&&t.setLiveSeekableRange){const r=Math.max(0,n[0].start),i=Math.max(r,r+e.totalduration);this.log(`Media Source duration is set to ${t.duration}. Setting seekable range to ${r}-${i}.`),t.setLiveSeekableRange(r,i)}}checkPendingTracks(){const{bufferCodecEventsExpected:e,operationQueue:t,pendingTracks:n}=this,r=Object.keys(n).length;if(r&&(!e||2===r||"audiovideo"in n)){this.createSourceBuffers(n),this.pendingTracks={};const e=this.getSourceBufferTypes();if(e.length)this.hls.trigger(m1.BUFFER_CREATED,{tracks:this.tracks}),e.forEach((e=>{t.executeNext(e)}));else{const e=new Error("could not create source buffer for media codec(s)");this.hls.trigger(m1.ERROR,{type:g1.MEDIA_ERROR,details:v1.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:e,reason:e.message})}}}createSourceBuffers(e){const{sourceBuffer:t,mediaSource:n}=this;if(!n)throw Error("createSourceBuffers called when mediaSource was null");for(const i in e)if(!t[i]){var r;const a=e[i];if(!a)throw Error(`source buffer exists for track ${i}, however track does not`);let o=-1===(null==(r=a.levelCodec)?void 0:r.indexOf(","))?a.levelCodec:a.codec;o&&"audio"===i.slice(0,5)&&(o=c3(o,this.appendSource));const s=`${a.container};codecs=${o}`;this.log(`creating sourceBuffer(${s})`);try{const e=t[i]=n.addSourceBuffer(s),r=i;this.addBufferListener(r,"updatestart",this._onSBUpdateStart),this.addBufferListener(r,"updateend",this._onSBUpdateEnd),this.addBufferListener(r,"error",this._onSBUpdateError),this.appendSource&&this.addBufferListener(r,"bufferedchange",((e,t)=>{const n=t.removedRanges;null!=n&&n.length&&this.hls.trigger(m1.BUFFER_FLUSHED,{type:i})})),this.tracks[i]={buffer:e,codec:o,container:a.container,levelCodec:a.levelCodec,metadata:a.metadata,id:a.id}}catch(mme){this.error(`error while trying to add sourceBuffer: ${mme.message}`),this.hls.trigger(m1.ERROR,{type:g1.MEDIA_ERROR,details:v1.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:mme,sourceBufferName:i,mimeType:s})}}}get mediaSrc(){var e,t;const n=(null==(e=this.media)||null==(t=e.querySelector)?void 0:t.call(e,"source"))||this.media;return null==n?void 0:n.src}_onSBUpdateStart(e){const{operationQueue:t}=this;t.current(e).onStart()}_onSBUpdateEnd(e){var t;if("closed"===(null==(t=this.mediaSource)?void 0:t.readyState))return void this.resetBuffer(e);const{operationQueue:n}=this;n.current(e).onComplete(),n.shiftAndExecuteNext(e)}_onSBUpdateError(e,t){var n;const r=new Error(`${e} SourceBuffer error. MediaSource readyState: ${null==(n=this.mediaSource)?void 0:n.readyState}`);this.error(`${r}`,t),this.hls.trigger(m1.ERROR,{type:g1.MEDIA_ERROR,details:v1.BUFFER_APPENDING_ERROR,sourceBufferName:e,error:r,fatal:!1});const i=this.operationQueue.current(e);i&&i.onError(r)}removeExecutor(e,t,n){const{media:r,mediaSource:i,operationQueue:a,sourceBuffer:o}=this,s=o[e];if(!r||!i||!s)return this.warn(`Attempting to remove from the ${e} SourceBuffer, but it does not exist`),void a.shiftAndExecuteNext(e);const l=h1(r.duration)?r.duration:1/0,c=h1(i.duration)?i.duration:1/0,u=Math.max(0,t),d=Math.min(n,l,c);d>u&&(!s.ending||s.ended)?(s.ended=!1,this.log(`Removing [${u},${d}] from the ${e} SourceBuffer`),s.remove(u,d)):a.shiftAndExecuteNext(e)}appendExecutor(e,t){const n=this.sourceBuffer[t];if(n)n.ended=!1,n.appendBuffer(e);else if(!this.pendingTracks[t])throw new Error(`Attempting to append to the ${t} SourceBuffer, but it does not exist`)}blockBuffers(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getSourceBufferTypes();if(!t.length)return this.log("Blocking operation requested, but no SourceBuffers exist"),void Promise.resolve().then(e);const{operationQueue:n}=this,r=t.map((e=>n.appendBlocker(e)));Promise.all(r).then((()=>{e(),t.forEach((e=>{const t=this.sourceBuffer[e];null!=t&&t.updating||n.shiftAndExecuteNext(e)}))}))}getSourceBufferTypes(){return Object.keys(this.sourceBuffer)}addBufferListener(e,t,n){const r=this.sourceBuffer[e];if(!r)return;const i=n.bind(this,e);this.listeners[e].push({event:t,listener:i}),r.addEventListener(t,i)}removeBufferListeners(e){const t=this.sourceBuffer[e];t&&this.listeners[e].forEach((e=>{t.removeEventListener(e.event,e.listener)}))}},capLevelController:P9,errorController:class{constructor(e){this.hls=void 0,this.playlistError=0,this.penalizedRenditions={},this.log=void 0,this.warn=void 0,this.error=void 0,this.hls=e,this.log=x1.log.bind(x1,"[info]:"),this.warn=x1.warn.bind(x1,"[warning]:"),this.error=x1.error.bind(x1,"[error]:"),this.registerListeners()}registerListeners(){const e=this.hls;e.on(m1.ERROR,this.onError,this),e.on(m1.MANIFEST_LOADING,this.onManifestLoading,this),e.on(m1.LEVEL_UPDATED,this.onLevelUpdated,this)}unregisterListeners(){const e=this.hls;e&&(e.off(m1.ERROR,this.onError,this),e.off(m1.ERROR,this.onErrorOut,this),e.off(m1.MANIFEST_LOADING,this.onManifestLoading,this),e.off(m1.LEVEL_UPDATED,this.onLevelUpdated,this))}destroy(){this.unregisterListeners(),this.hls=null,this.penalizedRenditions={}}startLoad(e){}stopLoad(){this.playlistError=0}getVariantLevelIndex(e){return(null==e?void 0:e.type)===C3?e.level:this.hls.loadLevel}onManifestLoading(){this.playlistError=0,this.penalizedRenditions={}}onLevelUpdated(){this.playlistError=0}onError(e,t){var n,r;if(t.fatal)return;const i=this.hls,a=t.context;switch(t.details){case v1.FRAG_LOAD_ERROR:case v1.FRAG_LOAD_TIMEOUT:case v1.KEY_LOAD_ERROR:case v1.KEY_LOAD_TIMEOUT:return void(t.errorAction=this.getFragRetryOrSwitchAction(t));case v1.FRAG_PARSING_ERROR:if(null!=(n=t.frag)&&n.gap)return void(t.errorAction={action:w4,flags:A4});case v1.FRAG_GAP:case v1.FRAG_DECRYPT_ERROR:return t.errorAction=this.getFragRetryOrSwitchAction(t),void(t.errorAction.action=E4);case v1.LEVEL_EMPTY_ERROR:case v1.LEVEL_PARSING_ERROR:{var o,s;const e=t.parent===C3?t.level:i.loadLevel;t.details===v1.LEVEL_EMPTY_ERROR&&null!=(o=t.context)&&null!=(s=o.levelDetails)&&s.live?t.errorAction=this.getPlaylistRetryOrSwitchAction(t,e):(t.levelRetry=!1,t.errorAction=this.getLevelSwitchAction(t,e))}return;case v1.LEVEL_LOAD_ERROR:case v1.LEVEL_LOAD_TIMEOUT:return void("number"===typeof(null==a?void 0:a.level)&&(t.errorAction=this.getPlaylistRetryOrSwitchAction(t,a.level)));case v1.AUDIO_TRACK_LOAD_ERROR:case v1.AUDIO_TRACK_LOAD_TIMEOUT:case v1.SUBTITLE_LOAD_ERROR:case v1.SUBTITLE_TRACK_LOAD_TIMEOUT:if(a){const e=i.levels[i.loadLevel];if(e&&(a.type===S3&&e.hasAudioGroup(a.groupId)||a.type===k3&&e.hasSubtitleGroup(a.groupId)))return t.errorAction=this.getPlaylistRetryOrSwitchAction(t,i.loadLevel),t.errorAction.action=E4,void(t.errorAction.flags=T4)}return;case v1.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:{const e=i.levels[i.loadLevel],n=null==e?void 0:e.attrs["HDCP-LEVEL"];n?t.errorAction={action:E4,flags:S4,hdcpLevel:n}:this.keySystemError(t)}return;case v1.BUFFER_ADD_CODEC_ERROR:case v1.REMUX_ALLOC_ERROR:case v1.BUFFER_APPEND_ERROR:return void(t.errorAction=this.getLevelSwitchAction(t,null!=(r=t.level)?r:i.loadLevel));case v1.INTERNAL_EXCEPTION:case v1.BUFFER_APPENDING_ERROR:case v1.BUFFER_FULL_ERROR:case v1.LEVEL_SWITCH_ERROR:case v1.BUFFER_STALLED_ERROR:case v1.BUFFER_SEEK_OVER_HOLE:case v1.BUFFER_NUDGE_ON_STALL:return void(t.errorAction={action:w4,flags:A4})}t.type===g1.KEY_SYSTEM_ERROR&&this.keySystemError(t)}keySystemError(e){const t=this.getVariantLevelIndex(e.frag);e.levelRetry=!1,e.errorAction=this.getLevelSwitchAction(e,t)}getPlaylistRetryOrSwitchAction(e,t){const n=h4(this.hls.config.playlistLoadPolicy,e),r=this.playlistError++;if(m4(n,r,d4(e),e.response))return{action:_4,flags:A4,retryConfig:n,retryCount:r};const i=this.getLevelSwitchAction(e,t);return n&&(i.retryConfig=n,i.retryCount=r),i}getFragRetryOrSwitchAction(e){const t=this.hls,n=this.getVariantLevelIndex(e.frag),r=t.levels[n],{fragLoadPolicy:i,keyLoadPolicy:a}=t.config,o=h4(e.details.startsWith("key")?a:i,e),s=t.levels.reduce(((e,t)=>e+t.fragmentError),0);if(r){e.details!==v1.FRAG_GAP&&r.fragmentError++;if(m4(o,s,d4(e),e.response))return{action:_4,flags:A4,retryConfig:o,retryCount:s}}const l=this.getLevelSwitchAction(e,n);return o&&(l.retryConfig=o,l.retryCount=s),l}getLevelSwitchAction(e,t){const n=this.hls;null!==t&&void 0!==t||(t=n.loadLevel);const r=this.hls.levels[t];if(r){var i,a;const t=e.details;r.loadError++,t===v1.BUFFER_APPEND_ERROR&&r.fragmentError++;let l=-1;const{levels:c,loadLevel:u,minAutoLevel:d,maxAutoLevel:h}=n;n.autoLevelEnabled||(n.loadLevel=-1);const p=null==(i=e.frag)?void 0:i.type,f=(p===I3&&t===v1.FRAG_PARSING_ERROR||"audio"===e.sourceBufferName&&(t===v1.BUFFER_ADD_CODEC_ERROR||t===v1.BUFFER_APPEND_ERROR))&&c.some((e=>{let{audioCodec:t}=e;return r.audioCodec!==t})),m="video"===e.sourceBufferName&&(t===v1.BUFFER_ADD_CODEC_ERROR||t===v1.BUFFER_APPEND_ERROR)&&c.some((e=>{let{codecSet:t,audioCodec:n}=e;return r.codecSet!==t&&r.audioCodec===n})),{type:g,groupId:v}=null!=(a=e.context)?a:{};for(let n=c.length;n--;){const i=(n+u)%c.length;if(i!==u&&i>=d&&i<=h&&0===c[i].loadError){var o,s;const n=c[i];if(t===v1.FRAG_GAP&&p===C3&&e.frag){const t=c[i].details;if(t){const n=v4(e.frag,t.fragments,e.frag.start);if(null!=n&&n.gap)continue}}else{if(g===S3&&n.hasAudioGroup(v)||g===k3&&n.hasSubtitleGroup(v))continue;if(p===I3&&null!=(o=r.audioGroups)&&o.some((e=>n.hasAudioGroup(e)))||p===R3&&null!=(s=r.subtitleGroups)&&s.some((e=>n.hasSubtitleGroup(e)))||f&&r.audioCodec===n.audioCodec||!f&&r.audioCodec!==n.audioCodec||m&&r.codecSet===n.codecSet)continue}l=i;break}}if(l>-1&&n.loadLevel!==l)return e.levelRetry=!0,this.playlistError=0,{action:E4,flags:A4,nextAutoLevel:l}}return{action:E4,flags:T4}}onErrorOut(e,t){var n;switch(null==(n=t.errorAction)?void 0:n.action){case w4:break;case E4:this.sendAlternateToPenaltyBox(t),t.errorAction.resolved||t.details===v1.FRAG_GAP?/MediaSource readyState: ended/.test(t.error.message)&&(this.warn(`MediaSource ended after "${t.sourceBufferName}" sourceBuffer append error. Attempting to recover from media error.`),this.hls.recoverMediaError()):t.fatal=!0}t.fatal&&this.hls.stopLoad()}sendAlternateToPenaltyBox(e){const t=this.hls,n=e.errorAction;if(!n)return;const{flags:r,hdcpLevel:i,nextAutoLevel:a}=n;switch(r){case A4:this.switchLevel(e,a);break;case S4:i&&(t.maxHdcpLevel=K3[K3.indexOf(i)-1],n.resolved=!0),this.warn(`Restricting playback to HDCP-LEVEL of "${t.maxHdcpLevel}" or lower`)}n.resolved||this.switchLevel(e,a)}switchLevel(e,t){void 0!==t&&e.errorAction&&(this.warn(`switching to level ${t} after ${e.details}`),this.hls.nextAutoLevel=t,e.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel)}},fpsController:class{constructor(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners()}setStreamController(e){this.streamController=e}registerListeners(){this.hls.on(m1.MEDIA_ATTACHING,this.onMediaAttaching,this)}unregisterListeners(){this.hls.off(m1.MEDIA_ATTACHING,this.onMediaAttaching,this)}destroy(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null}onMediaAttaching(e,t){const n=this.hls.config;if(n.capLevelOnFPSDrop){const e=t.media instanceof self.HTMLVideoElement?t.media:null;this.media=e,e&&"function"===typeof e.getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),n.fpsDroppedMonitoringPeriod)}}checkFPS(e,t,n){const r=performance.now();if(t){if(this.lastTime){const e=r-this.lastTime,i=n-this.lastDroppedFrames,a=t-this.lastDecodedFrames,o=1e3*i/e,s=this.hls;if(s.trigger(m1.FPS_DROP,{currentDropped:i,currentDecoded:a,totalDroppedFrames:n}),o>0&&i>s.config.fpsDroppedMonitoringThreshold*a){let e=s.currentLevel;x1.warn("drop FPS ratio greater than max allowed value for currentLevel: "+e),e>0&&(-1===s.autoLevelCapping||s.autoLevelCapping>=e)&&(e-=1,s.trigger(m1.FPS_DROP_LEVEL_CAPPING,{level:e,droppedLevel:s.currentLevel}),s.autoLevelCapping=e,this.streamController.nextLevelSwitch())}}this.lastTime=r,this.lastDroppedFrames=n,this.lastDecodedFrames=t}}checkFPSInterval(){const e=this.media;if(e)if(this.isVideoPlaybackQualityAvailable){const t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)}},stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrEwmaDefaultEstimateMax:5e6,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:J1,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableID3MetadataCues:!0,useMediaCapabilities:!0,certLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null}},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},{cueHandler:w8,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}),{},{subtitleStreamController:class extends A5{constructor(e,t,n){super(e,t,n,"[subtitle-stream-controller]",R3),this.currentTrackId=-1,this.tracksBuffered=[],this.mainDetails=null,this._registerListeners()}onHandlerDestroying(){this._unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null}_registerListeners(){const{hls:e}=this;e.on(m1.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(m1.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(m1.MANIFEST_LOADING,this.onManifestLoading,this),e.on(m1.LEVEL_LOADED,this.onLevelLoaded,this),e.on(m1.ERROR,this.onError,this),e.on(m1.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(m1.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(m1.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(m1.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.on(m1.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(m1.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:e}=this;e.off(m1.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(m1.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(m1.MANIFEST_LOADING,this.onManifestLoading,this),e.off(m1.LEVEL_LOADED,this.onLevelLoaded,this),e.off(m1.ERROR,this.onError,this),e.off(m1.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(m1.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(m1.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(m1.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.off(m1.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(m1.FRAG_BUFFERED,this.onFragBuffered,this)}startLoad(e){this.stopLoad(),this.state=p5,this.setInterval(500),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}onManifestLoading(){this.mainDetails=null,this.fragmentTracker.removeAllFragments()}onMediaDetaching(){this.tracksBuffered=[],super.onMediaDetaching()}onLevelLoaded(e,t){this.mainDetails=t.details}onSubtitleFragProcessed(e,t){const{frag:n,success:r}=t;if(this.fragPrevious=n,this.state=p5,!r)return;const i=this.tracksBuffered[this.currentTrackId];if(!i)return;let a;const o=n.start;for(let l=0;l<i.length;l++)if(o>=i[l].start&&o<=i[l].end){a=i[l];break}const s=n.start+n.duration;a?a.end=s:(a={start:o,end:s},i.push(a)),this.fragmentTracker.fragBuffered(n),this.fragBufferedComplete(n,null)}onBufferFlushing(e,t){const{startOffset:n,endOffset:r}=t;if(0===n&&r!==Number.POSITIVE_INFINITY){const e=r-1;if(e<=0)return;t.endOffsetSubtitles=Math.max(0,e),this.tracksBuffered.forEach((t=>{for(let n=0;n<t.length;)if(t[n].end<=e)t.shift();else{if(!(t[n].start<e))break;t[n].start=e,n++}})),this.fragmentTracker.removeFragmentsInRange(n,e,R3)}}onFragBuffered(e,t){var n;this.loadedmetadata||t.frag.type!==C3||null!=(n=this.media)&&n.buffered.length&&(this.loadedmetadata=!0)}onError(e,t){const n=t.frag;(null==n?void 0:n.type)===R3&&(t.details===v1.FRAG_GAP&&this.fragmentTracker.fragBuffered(n,!0),this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==h5&&(this.state=p5))}onSubtitleTracksUpdated(e,t){let{subtitleTracks:n}=t;this.levels&&L6(this.levels,n)?this.levels=n.map((e=>new t4(e))):(this.tracksBuffered=[],this.levels=n.map((e=>{const t=new t4(e);return this.tracksBuffered[t.id]=[],t})),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,R3),this.fragPrevious=null,this.mediaBuffer=null)}onSubtitleTrackSwitch(e,t){var n;if(this.currentTrackId=t.id,null==(n=this.levels)||!n.length||-1===this.currentTrackId)return void this.clearInterval();const r=this.levels[this.currentTrackId];null!=r&&r.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,r&&this.setInterval(500)}onSubtitleTrackLoaded(e,t){var n;const{currentTrackId:r,levels:i}=this,{details:a,id:o}=t;if(!i)return void this.warn(`Subtitle tracks were reset while loading level ${o}`);const s=i[o];if(o>=i.length||!s)return;this.log(`Subtitle track ${o} loaded [${a.startSN},${a.endSN}]${a.lastPartSn?`[part-${a.lastPartSn}-${a.lastPartIndex}]`:""},duration:${a.totalduration}`),this.mediaBuffer=this.mediaBufferTimeRanges;let l=0;if(a.live||null!=(n=s.details)&&n.live){const e=this.mainDetails;if(a.deltaUpdateFailed||!e)return;const t=e.fragments[0];var c;if(s.details)l=this.alignPlaylists(a,s.details,null==(c=this.levelLastLoaded)?void 0:c.details),0===l&&t&&(l=t.start,s4(a,l));else a.hasProgramDateTime&&e.hasProgramDateTime?(t5(a,e),l=a.fragments[0].start):t&&(l=t.start,s4(a,l))}if(s.details=a,this.levelLastLoaded=s,o===r&&(this.startFragRequested||!this.mainDetails&&a.live||this.setStartPosition(this.mainDetails||a,l),this.tick(),a.live&&!this.fragCurrent&&this.media&&this.state===p5)){v4(null,a.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),s.details=void 0)}}_handleFragmentLoadComplete(e){const{frag:t,payload:n}=e,r=t.decryptdata,i=this.hls;if(!this.fragContextChanged(t)&&n&&n.byteLength>0&&null!=r&&r.key&&r.iv&&"AES-128"===r.method){const e=performance.now();this.decrypter.decrypt(new Uint8Array(n),r.key.buffer,r.iv.buffer).catch((e=>{throw i.trigger(m1.ERROR,{type:g1.MEDIA_ERROR,details:v1.FRAG_DECRYPT_ERROR,fatal:!1,error:e,reason:e.message,frag:t}),e})).then((n=>{const r=performance.now();i.trigger(m1.FRAG_DECRYPTED,{frag:t,payload:n,stats:{tstart:e,tdecrypt:r}})})).catch((e=>{this.warn(`${e.name}: ${e.message}`),this.state=p5}))}}doTick(){if(this.media){if(this.state===p5){const{currentTrackId:e,levels:t}=this,n=null==t?void 0:t[e];if(!n||!t.length||!n.details)return;const{config:r}=this,i=this.getLoadPosition(),a=Y4.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],i,r.maxBufferHole),{end:o,len:s}=a,l=this.getFwdBufferInfo(this.media,C3),c=n.details;if(s>this.getMaxBufferLength(null==l?void 0:l.len)+c.levelTargetDuration)return;const u=c.fragments,d=u.length,h=c.edge;let p=null;const f=this.fragPrevious;if(o<h){const e=r.maxFragLookUpTolerance,t=o>h-e?0:e;p=v4(f,u,Math.max(u[0].start,o),t),!p&&f&&f.start<u[0].start&&(p=u[0])}else p=u[d-1];if(!p)return;if(p=this.mapToInitFragWhenRequired(p),"initSegment"!==p.sn){const e=u[p.sn-c.startSN-1];e&&e.cc===p.cc&&this.fragmentTracker.getState(e)===$4&&(p=e)}this.fragmentTracker.getState(p)===$4&&this.loadFragment(p,n,o)}}else this.state=p5}getMaxBufferLength(e){const t=super.getMaxBufferLength();return e?Math.max(t,e):t}loadFragment(e,t,n){this.fragCurrent=e,"initSegment"===e.sn?this._loadInitSegment(e,t):(this.startFragRequested=!0,super.loadFragment(e,t,n))}get mediaBufferTimeRanges(){return new N6(this.tracksBuffered[this.currentTrackId]||[])}},subtitleTrackController:class extends k4{constructor(e){super(e,"[subtitle-track-controller]"),this.media=null,this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.queuedDefaultTrack=-1,this.asyncPollTrackChange=()=>this.pollTrackChange(0),this.useTextTrackPolling=!1,this.subtitlePollingInterval=-1,this._subtitleDisplay=!0,this.onTextTracksChanged=()=>{if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!this.media||!this.hls.config.renderTextTracksNatively)return;let e=null;const t=F3(this.media.textTracks);for(let r=0;r<t.length;r++)if("hidden"===t[r].mode)e=t[r];else if("showing"===t[r].mode){e=t[r];break}const n=this.findTrackForTextTrack(e);this.subtitleTrack!==n&&this.setSubtitleTrack(n)},this.registerListeners()}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,this.onTextTracksChanged=this.asyncPollTrackChange=null,super.destroy()}get subtitleDisplay(){return this._subtitleDisplay}set subtitleDisplay(e){this._subtitleDisplay=e,this.trackId>-1&&this.toggleTrackModes()}registerListeners(){const{hls:e}=this;e.on(m1.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(m1.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(m1.MANIFEST_LOADING,this.onManifestLoading,this),e.on(m1.MANIFEST_PARSED,this.onManifestParsed,this),e.on(m1.LEVEL_LOADING,this.onLevelLoading,this),e.on(m1.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(m1.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(m1.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(m1.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(m1.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(m1.MANIFEST_LOADING,this.onManifestLoading,this),e.off(m1.MANIFEST_PARSED,this.onManifestParsed,this),e.off(m1.LEVEL_LOADING,this.onLevelLoading,this),e.off(m1.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(m1.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(m1.ERROR,this.onError,this)}onMediaAttached(e,t){this.media=t.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))}pollTrackChange(e){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.onTextTracksChanged,e)}onMediaDetaching(){if(!this.media)return;self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||this.media.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId);F3(this.media.textTracks).forEach((e=>{O3(e)})),this.subtitleTrack=-1,this.media=null}onManifestLoading(){this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.subtitleTracks}onSubtitleTrackLoaded(e,t){const{id:n,groupId:r,details:i}=t,a=this.tracksInGroup[n];if(!a||a.groupId!==r)return void this.warn(`Subtitle track with id:${n} and group:${r} not found in active group ${null==a?void 0:a.groupId}`);const o=a.details;a.details=t.details,this.log(`Subtitle track ${n} "${a.name}" lang:${a.lang} group:${r} loaded [${i.startSN}-${i.endSN}]`),n===this.trackId&&this.playlistLoaded(n,t,o)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(!t)return;const n=t.subtitleGroups||null,r=this.groupIds;let i=this.currentTrack;if(!n||(null==r?void 0:r.length)!==(null==n?void 0:n.length)||null!=n&&n.some((e=>-1===(null==r?void 0:r.indexOf(e))))){this.groupIds=n,this.trackId=-1,this.currentTrack=null;const e=this.tracks.filter((e=>!n||-1!==n.indexOf(e.groupId)));if(e.length)this.selectDefaultTrack&&!e.some((e=>e.default))&&(this.selectDefaultTrack=!1),e.forEach(((e,t)=>{e.id=t}));else if(!i&&!this.tracksInGroup.length)return;this.tracksInGroup=e;const t=this.hls.config.subtitlePreference;if(!i&&t){this.selectDefaultTrack=!1;const n=O4(t,e);if(n>-1)i=e[n];else{const e=O4(t,this.tracks);i=this.tracks[e]}}let r=this.findTrackId(i);-1===r&&i&&(r=this.findTrackId(null));const a={subtitleTracks:e};this.log(`Updating subtitle tracks, ${e.length} track(s) found in "${null==n?void 0:n.join(",")}" group-id`),this.hls.trigger(m1.SUBTITLE_TRACKS_UPDATED,a),-1!==r&&-1===this.trackId&&this.setSubtitleTrack(r)}else this.shouldReloadPlaylist(i)&&this.setSubtitleTrack(this.trackId)}findTrackId(e){const t=this.tracksInGroup,n=this.selectDefaultTrack;for(let r=0;r<t.length;r++){const i=t[r];if((!n||i.default)&&(n||e)&&(!e||j4(i,e)))return r}if(e){for(let n=0;n<t.length;n++){const r=t[n];if(P6(e.attrs,r.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return n}for(let n=0;n<t.length;n++){const r=t[n];if(P6(e.attrs,r.attrs,["LANGUAGE"]))return n}}return-1}findTrackForTextTrack(e){if(e){const t=this.tracksInGroup;for(let n=0;n<t.length;n++){if(M6(t[n],e))return n}}return-1}onError(e,t){!t.fatal&&t.context&&(t.context.type!==k3||t.context.id!==this.trackId||this.groupIds&&-1===this.groupIds.indexOf(t.context.groupId)||this.checkRetry(t))}get allSubtitleTracks(){return this.tracks}get subtitleTracks(){return this.tracksInGroup}get subtitleTrack(){return this.trackId}set subtitleTrack(e){this.selectDefaultTrack=!1,this.setSubtitleTrack(e)}setSubtitleOption(e){if(this.hls.config.subtitlePreference=e,e){const t=this.allSubtitleTracks;if(this.selectDefaultTrack=!1,t.length){const n=this.currentTrack;if(n&&j4(e,n))return n;const r=O4(e,this.tracksInGroup);if(r>-1){const e=this.tracksInGroup[r];return this.setSubtitleTrack(r),e}if(n)return null;{const n=O4(e,t);if(n>-1)return t[n]}}}return null}loadPlaylist(e){super.loadPlaylist();const t=this.currentTrack;if(this.shouldLoadPlaylist(t)&&t){const n=t.id,r=t.groupId;let i=t.url;if(e)try{i=e.addDirectives(i)}catch(Rb){this.warn(`Could not construct new URL with HLS Delivery Directives: ${Rb}`)}this.log(`Loading subtitle playlist for id ${n}`),this.hls.trigger(m1.SUBTITLE_TRACK_LOADING,{url:i,id:n,groupId:r,deliveryDirectives:e||null})}}toggleTrackModes(){const{media:e}=this;if(!e)return;const t=F3(e.textTracks),n=this.currentTrack;let r;if(n&&(r=t.filter((e=>M6(n,e)))[0],r||this.warn(`Unable to find subtitle TextTrack with name "${n.name}" and language "${n.lang}"`)),[].slice.call(t).forEach((e=>{"disabled"!==e.mode&&e!==r&&(e.mode="disabled")})),r){const e=this.subtitleDisplay?"showing":"hidden";r.mode!==e&&(r.mode=e)}}setSubtitleTrack(e){const t=this.tracksInGroup;if(!this.media)return void(this.queuedDefaultTrack=e);if(e<-1||e>=t.length||!h1(e))return void this.warn(`Invalid subtitle track id: ${e}`);this.clearTimer(),this.selectDefaultTrack=!1;const n=this.currentTrack,r=t[e]||null;if(this.trackId=e,this.currentTrack=r,this.toggleTrackModes(),!r)return void this.hls.trigger(m1.SUBTITLE_TRACK_SWITCH,{id:e});const i=!!r.details&&!r.details.live;if(e===this.trackId&&r===n&&i)return;this.log(`Switching to subtitle-track ${e}`+(r?` "${r.name}" lang:${r.lang} group:${r.groupId}`:""));const{id:a,groupId:o="",name:s,type:l,url:c}=r;this.hls.trigger(m1.SUBTITLE_TRACK_SWITCH,{id:a,groupId:o,name:s,type:l,url:c});const u=this.switchParams(r.url,null==n?void 0:n.details,r.details);this.loadPlaylist(u)}},timelineController:class{constructor(e){this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}},this.captionsProperties=void 0,this.hls=e,this.config=e.config,this.Cues=e.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},e.on(m1.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(m1.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(m1.MANIFEST_LOADING,this.onManifestLoading,this),e.on(m1.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(m1.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(m1.FRAG_LOADING,this.onFragLoading,this),e.on(m1.FRAG_LOADED,this.onFragLoaded,this),e.on(m1.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.on(m1.FRAG_DECRYPTED,this.onFragDecrypted,this),e.on(m1.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(m1.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.on(m1.BUFFER_FLUSHING,this.onBufferFlushing,this)}destroy(){const{hls:e}=this;e.off(m1.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(m1.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(m1.MANIFEST_LOADING,this.onManifestLoading,this),e.off(m1.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(m1.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(m1.FRAG_LOADING,this.onFragLoading,this),e.off(m1.FRAG_LOADED,this.onFragLoaded,this),e.off(m1.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.off(m1.FRAG_DECRYPTED,this.onFragDecrypted,this),e.off(m1.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(m1.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.off(m1.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=null,this.cea608Parser1=this.cea608Parser2=void 0}initCea608Parsers(){if(this.config.enableCEA708Captions&&(!this.cea608Parser1||!this.cea608Parser2)){const e=new i9(this,"textTrack1"),t=new i9(this,"textTrack2"),n=new i9(this,"textTrack3"),r=new i9(this,"textTrack4");this.cea608Parser1=new t9(1,e,t),this.cea608Parser2=new t9(3,n,r)}}addCues(e,t,n,r,i){let a=!1;for(let u=i.length;u--;){const e=i[u],r=(o=e[0],s=e[1],l=t,c=n,Math.min(s,c)-Math.max(o,l));if(r>=0&&(e[0]=Math.min(e[0],t),e[1]=Math.max(e[1],n),a=!0,r/(n-t)>.5))return}var o,s,l,c;if(a||i.push([t,n]),this.config.renderTextTracksNatively){const i=this.captionsTracks[e];this.Cues.newCue(i,t,n,r)}else{const i=this.Cues.newCue(null,t,n,r);this.hls.trigger(m1.CUES_PARSED,{type:"captions",cues:i,track:e})}}onInitPtsFound(e,t){let{frag:n,id:r,initPTS:i,timescale:a}=t;const{unparsedVttFrags:o}=this;"main"===r&&(this.initPTS[n.cc]={baseTime:i,timescale:a}),o.length&&(this.unparsedVttFrags=[],o.forEach((e=>{this.onFragLoaded(m1.FRAG_LOADED,e)})))}getExistingTrack(e,t){const{media:n}=this;if(n)for(let r=0;r<n.textTracks.length;r++){const i=n.textTracks[r];if(L9(i,{name:e,lang:t,attrs:{}}))return i}return null}createCaptionsTrack(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)}createNativeTrack(e){if(this.captionsTracks[e])return;const{captionsProperties:t,captionsTracks:n,media:r}=this,{label:i,languageCode:a}=t[e],o=this.getExistingTrack(i,a);if(o)n[e]=o,O3(n[e]),M3(n[e],r);else{const t=this.createTextTrack("captions",i,a);t&&(t[e]=!0,n[e]=t)}}createNonNativeTrack(e){if(this.nonNativeCaptionsTracks[e])return;const t=this.captionsProperties[e];if(!t)return;const n={_id:e,label:t.label,kind:"captions",default:!!t.media&&!!t.media.default,closedCaptions:t.media};this.nonNativeCaptionsTracks[e]=n,this.hls.trigger(m1.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[n]})}createTextTrack(e,t,n){const r=this.media;if(r)return r.addTextTrack(e,t,n)}onMediaAttaching(e,t){this.media=t.media,this._cleanTracks()}onMediaDetaching(){const{captionsTracks:e}=this;Object.keys(e).forEach((t=>{O3(e[t]),delete e[t]})),this.nonNativeCaptionsTracks={}}onManifestLoading(){this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}},this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())}_cleanTracks(){const{media:e}=this;if(!e)return;const t=e.textTracks;if(t)for(let n=0;n<t.length;n++)O3(t[n])}onSubtitleTracksUpdated(e,t){const n=t.subtitleTracks||[],r=n.some((e=>e.textCodec===w9));if(this.config.enableWebVTT||r&&this.config.enableIMSC1){if(L6(this.tracks,n))return void(this.tracks=n);if(this.textTracks=[],this.tracks=n,this.config.renderTextTracksNatively){const e=this.media,t=e?F3(e.textTracks):null;if(this.tracks.forEach(((e,n)=>{let r;if(t){let n=null;for(let r=0;r<t.length;r++)if(t[r]&&L9(t[r],e)){n=t[r],t[r]=null;break}n&&(r=n)}if(r)O3(r);else{const t=D9(e);r=this.createTextTrack(t,e.name,e.lang),r&&(r.mode="disabled")}r&&this.textTracks.push(r)})),null!=t&&t.length){const e=t.filter((e=>null!==e)).map((e=>e.label));e.length&&x1.warn(`Media element contains unused subtitle tracks: ${e.join(", ")}. Replace media element for each source to clear TextTracks and captions menu.`)}}else if(this.tracks.length){const e=this.tracks.map((e=>({label:e.name,kind:e.type.toLowerCase(),default:e.default,subtitleTrack:e})));this.hls.trigger(m1.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:e})}}}onManifestLoaded(e,t){this.config.enableCEA708Captions&&t.captions&&t.captions.forEach((e=>{const t=/(?:CC|SERVICE)([1-4])/.exec(e.instreamId);if(!t)return;const n=`textTrack${t[1]}`,r=this.captionsProperties[n];r&&(r.label=e.name,e.lang&&(r.languageCode=e.lang),r.media=e)}))}closedCaptionsForLevel(e){const t=this.hls.levels[e.level];return null==t?void 0:t.attrs["CLOSED-CAPTIONS"]}onFragLoading(e,t){if(this.enabled&&t.frag.type===C3){var n,r;const{cea608Parser1:e,cea608Parser2:i,lastSn:a}=this,{cc:o,sn:s}=t.frag,l=null!=(n=null==(r=t.part)?void 0:r.index)?n:-1;e&&i&&(s!==a+1||s===a&&l!==this.lastPartIndex+1||o!==this.lastCc)&&(e.reset(),i.reset()),this.lastCc=o,this.lastSn=s,this.lastPartIndex=l}}onFragLoaded(e,t){const{frag:n,payload:r}=t;if(n.type===R3)if(r.byteLength){const e=n.decryptdata,i="stats"in t;if(null==e||!e.encrypted||i){const e=this.tracks[n.level],i=this.vttCCs;i[n.cc]||(i[n.cc]={start:n.start,prevCC:this.prevCC,new:!0},this.prevCC=n.cc),e&&e.textCodec===w9?this._parseIMSC1(n,r):this._parseVTTs(t)}}else this.hls.trigger(m1.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:new Error("Empty subtitle payload")})}_parseIMSC1(e,t){const n=this.hls;A9(t,this.initPTS[e.cc],(t=>{this._appendCues(t,e.level),n.trigger(m1.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})}),(t=>{x1.log(`Failed to parse IMSC1: ${t}`),n.trigger(m1.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:t})}))}_parseVTTs(e){var t;const{frag:n,payload:r}=e,{initPTS:i,unparsedVttFrags:a}=this,o=i.length-1;if(!i[n.cc]&&-1===o)return void a.push(e);const s=this.hls;b9(null!=(t=n.initSegment)&&t.data?U2(n.initSegment.data,new Uint8Array(r)):r,this.initPTS[n.cc],this.vttCCs,n.cc,n.start,(e=>{this._appendCues(e,n.level),s.trigger(m1.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:n})}),(t=>{const i="Missing initPTS for VTT MPEGTS"===t.message;i?a.push(e):this._fallbackToIMSC1(n,r),x1.log(`Failed to parse VTT cue: ${t}`),i&&o>n.cc||s.trigger(m1.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:t})}))}_fallbackToIMSC1(e,t){const n=this.tracks[e.level];n.textCodec||A9(t,this.initPTS[e.cc],(()=>{n.textCodec=w9,this._parseIMSC1(e,t)}),(()=>{n.textCodec="wvtt"}))}_appendCues(e,t){const n=this.hls;if(this.config.renderTextTracksNatively){const n=this.textTracks[t];if(!n||"disabled"===n.mode)return;e.forEach((e=>N3(n,e)))}else{const r=this.tracks[t];if(!r)return;const i=r.default?"default":"subtitles"+t;n.trigger(m1.CUES_PARSED,{type:"subtitles",cues:e,track:i})}}onFragDecrypted(e,t){const{frag:n}=t;n.type===R3&&this.onFragLoaded(m1.FRAG_LOADED,t)}onSubtitleTracksCleared(){this.tracks=[],this.captionsTracks={}}onFragParsingUserdata(e,t){this.initCea608Parsers();const{cea608Parser1:n,cea608Parser2:r}=this;if(!this.enabled||!n||!r)return;const{frag:i,samples:a}=t;if(i.type!==C3||"NONE"!==this.closedCaptionsForLevel(i))for(let o=0;o<a.length;o++){const e=a[o].bytes;if(e){const t=this.extractCea608Data(e);n.addData(a[o].pts,t[0]),r.addData(a[o].pts,t[1])}}}onBufferFlushing(e,t){let{startOffset:n,endOffset:r,endOffsetSubtitles:i,type:a}=t;const{media:o}=this;if(o&&!(o.currentTime<r)){if(!a||"video"===a){const{captionsTracks:e}=this;Object.keys(e).forEach((t=>j3(e[t],n,r)))}if(this.config.renderTextTracksNatively&&0===n&&void 0!==i){const{textTracks:e}=this;Object.keys(e).forEach((t=>j3(e[t],n,i)))}}}extractCea608Data(e){const t=[[],[]],n=31&e[0];let r=2;for(let i=0;i<n;i++){const n=e[r++],i=127&e[r++],a=127&e[r++];if(0===i&&0===a)continue;if(0!==(4&n)){const e=3&n;0!==e&&1!==e||(t[e].push(i),t[e].push(a))}}return t}},audioStreamController:class extends A5{constructor(e,t,n){super(e,t,n,"[audio-stream-controller]",I3),this.videoBuffer=null,this.videoTrackCC=-1,this.waitingVideoCC=-1,this.bufferedTrack=null,this.switchingTrack=null,this.trackId=-1,this.waitingData=null,this.mainDetails=null,this.flushing=!1,this.bufferFlushed=!1,this.cachedTrackLoadedData=null,this._registerListeners()}onHandlerDestroying(){this._unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null,this.bufferedTrack=null,this.switchingTrack=null}_registerListeners(){const{hls:e}=this;e.on(m1.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(m1.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(m1.MANIFEST_LOADING,this.onManifestLoading,this),e.on(m1.LEVEL_LOADED,this.onLevelLoaded,this),e.on(m1.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.on(m1.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(m1.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(m1.ERROR,this.onError,this),e.on(m1.BUFFER_RESET,this.onBufferReset,this),e.on(m1.BUFFER_CREATED,this.onBufferCreated,this),e.on(m1.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(m1.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(m1.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(m1.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:e}=this;e.off(m1.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(m1.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(m1.MANIFEST_LOADING,this.onManifestLoading,this),e.off(m1.LEVEL_LOADED,this.onLevelLoaded,this),e.off(m1.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.off(m1.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(m1.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(m1.ERROR,this.onError,this),e.off(m1.BUFFER_RESET,this.onBufferReset,this),e.off(m1.BUFFER_CREATED,this.onBufferCreated,this),e.off(m1.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(m1.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(m1.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(m1.FRAG_BUFFERED,this.onFragBuffered,this)}onInitPtsFound(e,t){let{frag:n,id:r,initPTS:i,timescale:a}=t;if("main"===r){const e=n.cc;this.initPTS[n.cc]={baseTime:i,timescale:a},this.log(`InitPTS for cc: ${e} found from main: ${i}`),this.videoTrackCC=e,this.state===x5&&this.tick()}}startLoad(e){if(!this.levels)return this.startPosition=e,void(this.state=h5);const t=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),t>0&&-1===e?(this.log(`Override startPosition with lastCurrentTime @${t.toFixed(3)}`),e=t,this.state=p5):(this.loadedmetadata=!1,this.state=v5),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}doTick(){switch(this.state){case p5:this.doTickIdle();break;case v5:{var e;const{levels:t,trackId:n}=this,r=null==t||null==(e=t[n])?void 0:e.details;if(r){if(this.waitForCdnTuneIn(r))break;this.state=x5}break}case g5:{var t;const e=performance.now(),n=this.retryDate;if(!n||e>=n||null!=(t=this.media)&&t.seeking){const{levels:e,trackId:t}=this;this.log("RetryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded((null==e?void 0:e[t])||null),this.state=p5}break}case x5:{const e=this.waitingData;if(e){const{frag:t,part:n,cache:r,complete:i}=e;if(void 0!==this.initPTS[t.cc]){this.waitingData=null,this.waitingVideoCC=-1,this.state=m5;const e={frag:t,part:n,payload:r.flush(),networkDetails:null};this._handleFragmentLoadProgress(e),i&&super._handleFragmentLoadComplete(e)}else if(this.videoTrackCC!==this.waitingVideoCC)this.log(`Waiting fragment cc (${t.cc}) cancelled because video is at cc ${this.videoTrackCC}`),this.clearWaitingFragment();else{const e=this.getLoadPosition(),n=Y4.bufferInfo(this.mediaBuffer,e,this.config.maxBufferHole);y4(n.end,this.config.maxFragLookUpTolerance,t)<0&&(this.log(`Waiting fragment cc (${t.cc}) @ ${t.start} cancelled because another fragment at ${n.end} is needed`),this.clearWaitingFragment())}}else this.state=p5}}this.onTickEnd()}clearWaitingFragment(){const e=this.waitingData;e&&(this.fragmentTracker.removeFragment(e.frag),this.waitingData=null,this.waitingVideoCC=-1,this.state=p5)}resetLoadingState(){this.clearWaitingFragment(),super.resetLoadingState()}onTickEnd(){const{media:e}=this;null!=e&&e.readyState&&(this.lastCurrentTime=e.currentTime)}doTickIdle(){const{hls:e,levels:t,media:n,trackId:r}=this,i=e.config;if(!this.buffering||!n&&(this.startFragRequested||!i.startFragPrefetch)||null==t||!t[r])return;const a=t[r],o=a.details;if(!o||o.live&&this.levelLastLoaded!==a||this.waitForCdnTuneIn(o))return void(this.state=v5);const s=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&s&&(this.bufferFlushed=!1,this.afterBufferFlushed(s,I1,I3));const l=this.getFwdBufferInfo(s,I3);if(null===l)return;if(!this.switchingTrack&&this._streamEnded(l,o))return e.trigger(m1.BUFFER_EOS,{type:"audio"}),void(this.state=w5);const c=this.getFwdBufferInfo(this.videoBuffer?this.videoBuffer:this.media,C3),u=l.len,d=this.getMaxBufferLength(null==c?void 0:c.len),h=o.fragments,p=h[0].start,f=this.getLoadPosition(),m=this.flushing?f:l.end;if(this.switchingTrack&&n){const e=f;o.PTSKnown&&e<p&&(l.end>p||l.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),n.currentTime=p+.05)}if(u>=d&&!this.switchingTrack&&m<h[h.length-1].start)return;let g=this.getNextFragment(m,o),v=!1;if(g&&this.isLoopLoading(g,m)&&(v=!!g.gap,g=this.getNextFragmentLoopLoading(g,o,l,C3,d)),!g)return void(this.bufferFlushed=!0);const y=c&&g.start>c.end+o.targetduration;if(y||(null==c||!c.len)&&l.len){const e=this.getAppendedFrag(g.start,C3);if(null===e)return;if(v||(v=!!e.gap||!!y&&0===c.len),y&&!v||v&&l.nextStart&&l.nextStart<e.end)return}this.loadFragment(g,a,m)}getMaxBufferLength(e){const t=super.getMaxBufferLength();return e?Math.min(Math.max(t,e),this.config.maxMaxBufferLength):t}onMediaDetaching(){this.videoBuffer=null,this.bufferFlushed=this.flushing=!1,super.onMediaDetaching()}onAudioTracksUpdated(e,t){let{audioTracks:n}=t;this.resetTransmuxer(),this.levels=n.map((e=>new t4(e)))}onAudioTrackSwitching(e,t){const n=!!t.url;this.trackId=t.id;const{fragCurrent:r}=this;r&&(r.abortRequests(),this.removeUnbufferedFrags(r.start)),this.resetLoadingState(),n?this.setInterval(100):this.resetTransmuxer(),n?(this.switchingTrack=t,this.state=p5,this.flushAudioIfNeeded(t)):(this.switchingTrack=null,this.bufferedTrack=t,this.state=h5),this.tick()}onManifestLoading(){this.fragmentTracker.removeAllFragments(),this.startPosition=this.lastCurrentTime=0,this.bufferFlushed=this.flushing=!1,this.levels=this.mainDetails=this.waitingData=this.bufferedTrack=this.cachedTrackLoadedData=this.switchingTrack=null,this.startFragRequested=!1,this.trackId=this.videoTrackCC=this.waitingVideoCC=-1}onLevelLoaded(e,t){this.mainDetails=t.details,null!==this.cachedTrackLoadedData&&(this.hls.trigger(m1.AUDIO_TRACK_LOADED,this.cachedTrackLoadedData),this.cachedTrackLoadedData=null)}onAudioTrackLoaded(e,t){var n;if(null==this.mainDetails)return void(this.cachedTrackLoadedData=t);const{levels:r}=this,{details:i,id:a}=t;if(!r)return void this.warn(`Audio tracks were reset while loading level ${a}`);this.log(`Audio track ${a} loaded [${i.startSN},${i.endSN}]${i.lastPartSn?`[part-${i.lastPartSn}-${i.lastPartIndex}]`:""},duration:${i.totalduration}`);const o=r[a];let s=0;if(i.live||null!=(n=o.details)&&n.live){this.checkLiveUpdate(i);const e=this.mainDetails;if(i.deltaUpdateFailed||!e)return;var l;if(!o.details&&i.hasProgramDateTime&&e.hasProgramDateTime)t5(i,e),s=i.fragments[0].start;else s=this.alignPlaylists(i,o.details,null==(l=this.levelLastLoaded)?void 0:l.details)}o.details=i,this.levelLastLoaded=o,this.startFragRequested||!this.mainDetails&&i.live||this.setStartPosition(this.mainDetails||i,s),this.state!==v5||this.waitForCdnTuneIn(i)||(this.state=p5),this.tick()}_handleFragmentLoadProgress(e){var t;const{frag:n,part:r,payload:i}=e,{config:a,trackId:o,levels:s}=this;if(!s)return void this.warn(`Audio tracks were reset while fragment load was in progress. Fragment ${n.sn} of level ${n.level} will not be buffered`);const l=s[o];if(!l)return void this.warn("Audio track is undefined on fragment load progress");const c=l.details;if(!c)return this.warn("Audio track details undefined on fragment load progress"),void this.removeUnbufferedFrags(n.start);const u=a.defaultAudioCodec||l.audioCodec||"mp4a.40.2";let d=this.transmuxer;d||(d=this.transmuxer=new D6(this.hls,I3,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));const h=this.initPTS[n.cc],p=null==(t=n.initSegment)?void 0:t.data;if(void 0!==h){const e=!1,t=r?r.index:-1,a=-1!==t,o=new Q4(n.level,n.sn,n.stats.chunkCount,i.byteLength,t,a);d.push(i,p,u,"",n,r,c.totalduration,e,o,h)}else{this.log(`Unknown video PTS for cc ${n.cc}, waiting for video PTS before demuxing audio frag ${n.sn} of [${c.startSN} ,${c.endSN}],track ${o}`);const{cache:e}=this.waitingData=this.waitingData||{frag:n,part:r,cache:new T5,complete:!1};e.push(new Uint8Array(i)),this.waitingVideoCC=this.videoTrackCC,this.state=x5}}_handleFragmentLoadComplete(e){this.waitingData?this.waitingData.complete=!0:super._handleFragmentLoadComplete(e)}onBufferReset(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1}onBufferCreated(e,t){const n=t.tracks.audio;n&&(this.mediaBuffer=n.buffer||null),t.tracks.video&&(this.videoBuffer=t.tracks.video.buffer||null)}onFragBuffered(e,t){const{frag:n,part:r}=t;if(n.type===I3)if(this.fragContextChanged(n))this.warn(`Fragment ${n.sn}${r?" p: "+r.index:""} of level ${n.level} finished buffering, but was aborted. state: ${this.state}, audioSwitch: ${this.switchingTrack?this.switchingTrack.name:"false"}`);else{if("initSegment"!==n.sn){this.fragPrevious=n;const e=this.switchingTrack;e&&(this.bufferedTrack=e,this.switchingTrack=null,this.hls.trigger(m1.AUDIO_TRACK_SWITCHED,l1({},e)))}this.fragBufferedComplete(n,r)}else if(!this.loadedmetadata&&n.type===C3){const e=this.videoBuffer||this.media;if(e){Y4.getBuffered(e).length&&(this.loadedmetadata=!0)}}}onError(e,t){var n;if(t.fatal)this.state=E5;else switch(t.details){case v1.FRAG_GAP:case v1.FRAG_PARSING_ERROR:case v1.FRAG_DECRYPT_ERROR:case v1.FRAG_LOAD_ERROR:case v1.FRAG_LOAD_TIMEOUT:case v1.KEY_LOAD_ERROR:case v1.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(I3,t);break;case v1.AUDIO_TRACK_LOAD_ERROR:case v1.AUDIO_TRACK_LOAD_TIMEOUT:case v1.LEVEL_PARSING_ERROR:t.levelRetry||this.state!==v5||(null==(n=t.context)?void 0:n.type)!==S3||(this.state=p5);break;case v1.BUFFER_APPEND_ERROR:case v1.BUFFER_FULL_ERROR:if(!t.parent||"audio"!==t.parent)return;if(t.details===v1.BUFFER_APPEND_ERROR)return void this.resetLoadingState();this.reduceLengthAndFlushBuffer(t)&&(this.bufferedTrack=null,super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"));break;case v1.INTERNAL_EXCEPTION:this.recoverWorkerError(t)}}onBufferFlushing(e,t){let{type:n}=t;n!==R1&&(this.flushing=!0)}onBufferFlushed(e,t){let{type:n}=t;if(n!==R1){this.flushing=!1,this.bufferFlushed=!0,this.state===w5&&(this.state=p5);const e=this.mediaBuffer||this.media;e&&(this.afterBufferFlushed(e,n,I3),this.tick())}}_handleTransmuxComplete(e){var t;const n="audio",{hls:r}=this,{remuxResult:i,chunkMeta:a}=e,o=this.getCurrentContext(a);if(!o)return void this.resetWhenMissingContext(a);const{frag:s,part:l,level:c}=o,{details:u}=c,{audio:d,text:h,id3:p,initSegment:f}=i;if(!this.fragContextChanged(s)&&u){if(this.state=y5,this.switchingTrack&&d&&this.completeAudioSwitch(this.switchingTrack),null!=f&&f.tracks){const e=s.initSegment||s;this._bufferInitSegment(c,f.tracks,e,a),r.trigger(m1.FRAG_PARSING_INIT_SEGMENT,{frag:e,id:n,tracks:f.tracks})}if(d){const{startPTS:e,endPTS:t,startDTS:n,endDTS:r}=d;l&&(l.elementaryStreams[I1]={startPTS:e,endPTS:t,startDTS:n,endDTS:r}),s.setElementaryStreamInfo(I1,e,t,n,r),this.bufferFragmentData(d,s,l,a)}if(null!=p&&null!=(t=p.samples)&&t.length){const e=d1({id:n,frag:s,details:u},p);r.trigger(m1.FRAG_PARSING_METADATA,e)}if(h){const e=d1({id:n,frag:s,details:u},h);r.trigger(m1.FRAG_PARSING_USERDATA,e)}}else this.fragmentTracker.removeFragment(s)}_bufferInitSegment(e,t,n,r){if(this.state!==y5)return;t.video&&delete t.video;const i=t.audio;if(!i)return;i.id="audio";const a=e.audioCodec;this.log(`Init audio buffer, container:${i.container}, codecs[level/parsed]=[${a}/${i.codec}]`),a&&1===a.split(",").length&&(i.levelCodec=a),this.hls.trigger(m1.BUFFER_CODECS,t);const o=i.initSegment;if(null!=o&&o.byteLength){const e={type:"audio",frag:n,part:null,chunkMeta:r,parent:n.type,data:o};this.hls.trigger(m1.BUFFER_APPENDING,e)}this.tickImmediate()}loadFragment(e,t,n){const r=this.fragmentTracker.getState(e);var i;if(this.fragCurrent=e,this.switchingTrack||r===$4||r===W4)if("initSegment"===e.sn)this._loadInitSegment(e,t);else if(null!=(i=t.details)&&i.live&&!this.initPTS[e.cc]){this.log(`Waiting for video PTS in continuity counter ${e.cc} of live stream before loading audio fragment ${e.sn} of level ${this.trackId}`),this.state=x5;const n=this.mainDetails;n&&n.fragments[0].start!==t.details.fragments[0].start&&t5(t.details,n)}else this.startFragRequested=!0,super.loadFragment(e,t,n);else this.clearTrackerIfNeeded(e)}flushAudioIfNeeded(e){if(this.media&&this.bufferedTrack){const{name:t,lang:n,assocLang:r,characteristics:i,audioCodec:a,channels:o}=this.bufferedTrack;j4({name:t,lang:n,assocLang:r,characteristics:i,audioCodec:a,channels:o},e,F4)||(this.log("Switching audio track : flushing all audio"),super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"),this.bufferedTrack=null)}}completeAudioSwitch(e){const{hls:t}=this;this.flushAudioIfNeeded(e),this.bufferedTrack=e,this.switchingTrack=null,t.trigger(m1.AUDIO_TRACK_SWITCHED,l1({},e))}},audioTrackController:class extends k4{constructor(e){super(e,"[audio-track-controller]"),this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.registerListeners()}registerListeners(){const{hls:e}=this;e.on(m1.MANIFEST_LOADING,this.onManifestLoading,this),e.on(m1.MANIFEST_PARSED,this.onManifestParsed,this),e.on(m1.LEVEL_LOADING,this.onLevelLoading,this),e.on(m1.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(m1.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(m1.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(m1.MANIFEST_LOADING,this.onManifestLoading,this),e.off(m1.MANIFEST_PARSED,this.onManifestParsed,this),e.off(m1.LEVEL_LOADING,this.onLevelLoading,this),e.off(m1.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(m1.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(m1.ERROR,this.onError,this)}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,super.destroy()}onManifestLoading(){this.tracks=[],this.tracksInGroup=[],this.groupIds=null,this.currentTrack=null,this.trackId=-1,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.audioTracks||[]}onAudioTrackLoaded(e,t){const{id:n,groupId:r,details:i}=t,a=this.tracksInGroup[n];if(!a||a.groupId!==r)return void this.warn(`Audio track with id:${n} and group:${r} not found in active group ${null==a?void 0:a.groupId}`);const o=a.details;a.details=t.details,this.log(`Audio track ${n} "${a.name}" lang:${a.lang} group:${r} loaded [${i.startSN}-${i.endSN}]`),n===this.trackId&&this.playlistLoaded(n,t,o)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(!t)return;const n=t.audioGroups||null,r=this.groupIds;let i=this.currentTrack;if(!n||(null==r?void 0:r.length)!==(null==n?void 0:n.length)||null!=n&&n.some((e=>-1===(null==r?void 0:r.indexOf(e))))){this.groupIds=n,this.trackId=-1,this.currentTrack=null;const e=this.tracks.filter((e=>!n||-1!==n.indexOf(e.groupId)));if(e.length)this.selectDefaultTrack&&!e.some((e=>e.default))&&(this.selectDefaultTrack=!1),e.forEach(((e,t)=>{e.id=t}));else if(!i&&!this.tracksInGroup.length)return;this.tracksInGroup=e;const t=this.hls.config.audioPreference;if(!i&&t){const n=O4(t,e,F4);if(n>-1)i=e[n];else{const e=O4(t,this.tracks);i=this.tracks[e]}}let r=this.findTrackId(i);-1===r&&i&&(r=this.findTrackId(null));const o={audioTracks:e};this.log(`Updating audio tracks, ${e.length} track(s) found in group(s): ${null==n?void 0:n.join(",")}`),this.hls.trigger(m1.AUDIO_TRACKS_UPDATED,o);const s=this.trackId;if(-1!==r&&-1===s)this.setAudioTrack(r);else if(e.length&&-1===s){var a;const t=new Error(`No audio track selected for current audio group-ID(s): ${null==(a=this.groupIds)?void 0:a.join(",")} track count: ${e.length}`);this.warn(t.message),this.hls.trigger(m1.ERROR,{type:g1.MEDIA_ERROR,details:v1.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:t})}}else this.shouldReloadPlaylist(i)&&this.setAudioTrack(this.trackId)}onError(e,t){!t.fatal&&t.context&&(t.context.type!==S3||t.context.id!==this.trackId||this.groupIds&&-1===this.groupIds.indexOf(t.context.groupId)||(this.requestScheduled=-1,this.checkRetry(t)))}get allAudioTracks(){return this.tracks}get audioTracks(){return this.tracksInGroup}get audioTrack(){return this.trackId}set audioTrack(e){this.selectDefaultTrack=!1,this.setAudioTrack(e)}setAudioOption(e){const t=this.hls;if(t.config.audioPreference=e,e){const n=this.allAudioTracks;if(this.selectDefaultTrack=!1,n.length){const r=this.currentTrack;if(r&&j4(e,r,F4))return r;const i=O4(e,this.tracksInGroup,F4);if(i>-1){const e=this.tracksInGroup[i];return this.setAudioTrack(i),e}if(r){let r=t.loadLevel;-1===r&&(r=t.firstAutoLevel);const i=function(e,t,n,r,i){const a=t[r],o=t.reduce(((e,t,n)=>{const r=t.uri;return(e[r]||(e[r]=[])).push(n),e}),{})[a.uri];o.length>1&&(r=Math.max.apply(Math,o));const s=a.videoRange,l=a.frameRate,c=a.codecSet.substring(0,4),u=U4(t,r,(t=>{if(t.videoRange!==s||t.frameRate!==l||t.codecSet.substring(0,4)!==c)return!1;const r=t.audioGroups,a=n.filter((e=>!r||-1!==r.indexOf(e.groupId)));return O4(e,a,i)>-1}));return u>-1?u:U4(t,r,(t=>{const r=t.audioGroups,a=n.filter((e=>!r||-1!==r.indexOf(e.groupId)));return O4(e,a,i)>-1}))}(e,t.levels,n,r,F4);if(-1===i)return null;t.nextLoadLevel=i}if(e.channels||e.audioCodec){const t=O4(e,n);if(t>-1)return n[t]}}}return null}setAudioTrack(e){const t=this.tracksInGroup;if(e<0||e>=t.length)return void this.warn(`Invalid audio track id: ${e}`);this.clearTimer(),this.selectDefaultTrack=!1;const n=this.currentTrack,r=t[e],i=r.details&&!r.details.live;if(e===this.trackId&&r===n&&i)return;if(this.log(`Switching to audio-track ${e} "${r.name}" lang:${r.lang} group:${r.groupId} channels:${r.channels}`),this.trackId=e,this.currentTrack=r,this.hls.trigger(m1.AUDIO_TRACK_SWITCHING,l1({},r)),i)return;const a=this.switchParams(r.url,null==n?void 0:n.details,r.details);this.loadPlaylist(a)}findTrackId(e){const t=this.tracksInGroup;for(let n=0;n<t.length;n++){const r=t[n];if((!this.selectDefaultTrack||r.default)&&(!e||j4(e,r,F4)))return n}if(e){const{name:n,lang:r,assocLang:i,characteristics:a,audioCodec:o,channels:s}=e;for(let e=0;e<t.length;e++){if(j4({name:n,lang:r,assocLang:i,characteristics:a,audioCodec:o,channels:s},t[e],F4))return e}for(let l=0;l<t.length;l++){const n=t[l];if(P6(e.attrs,n.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return l}for(let l=0;l<t.length;l++){const n=t[l];if(P6(e.attrs,n.attrs,["LANGUAGE"]))return l}}return-1}loadPlaylist(e){const t=this.currentTrack;if(this.shouldLoadPlaylist(t)&&t){super.loadPlaylist();const n=t.id,r=t.groupId;let i=t.url;if(e)try{i=e.addDirectives(i)}catch(Rb){this.warn(`Could not construct new URL with HLS Delivery Directives: ${Rb}`)}this.log(`loading audio-track playlist ${n} "${t.name}" lang:${t.lang} group:${r}`),this.clearTimer(),this.hls.trigger(m1.AUDIO_TRACK_LOADING,{url:i,id:n,groupId:r,deliveryDirectives:e||null})}}},emeController:N9,cmcdController:class{constructor(e){this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.includeKeys=void 0,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=()=>{this.initialized&&(this.starved=!0),this.buffering=!0},this.onPlaying=()=>{this.initialized||(this.initialized=!0),this.buffering=!1},this.applyPlaylistData=e=>{try{this.apply(e,{ot:j9.MANIFEST,su:!this.initialized})}catch(Rb){x1.warn("Could not generate manifest CMCD data.",Rb)}},this.applyFragmentData=e=>{try{const t=e.frag,n=this.hls.levels[t.level],r=this.getObjectType(t),i={d:1e3*t.duration,ot:r};r!==j9.VIDEO&&r!==j9.AUDIO&&r!=j9.MUXED||(i.br=n.bitrate/1e3,i.tb=this.getTopBandwidth(r)/1e3,i.bl=this.getBufferLength(r)),this.apply(e,i)}catch(Rb){x1.warn("Could not generate segment CMCD data.",Rb)}},this.hls=e;const t=this.config=e.config,{cmcd:n}=t;null!=n&&(t.pLoader=this.createPlaylistLoader(),t.fLoader=this.createFragmentLoader(),this.sid=n.sessionId||function(){try{return crypto.randomUUID()}catch(Rb){try{const e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.slice(t.lastIndexOf("/")+1)}catch(Rb){let t=(new Date).getTime();const n="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(e=>{const n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?n:3&n|8).toString(16)}));return n}}}(),this.cid=n.contentId,this.useHeaders=!0===n.useHeaders,this.includeKeys=n.includeKeys,this.registerListeners())}registerListeners(){const e=this.hls;e.on(m1.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(m1.MEDIA_DETACHED,this.onMediaDetached,this),e.on(m1.BUFFER_CREATED,this.onBufferCreated,this)}unregisterListeners(){const e=this.hls;e.off(m1.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(m1.MEDIA_DETACHED,this.onMediaDetached,this),e.off(m1.BUFFER_CREATED,this.onBufferCreated,this)}destroy(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null,this.onWaiting=this.onPlaying=null}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)}onMediaDetached(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)}onBufferCreated(e,t){var n,r;this.audioBuffer=null==(n=t.tracks.audio)?void 0:n.buffer,this.videoBuffer=null==(r=t.tracks.video)?void 0:r.buffer}createData(){var e;return{v:1,sf:F9.HLS,sid:this.sid,cid:this.cid,pr:null==(e=this.media)?void 0:e.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}}apply(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};d1(t,this.createData());const n=t.ot===j9.INIT||t.ot===j9.VIDEO||t.ot===j9.MUXED;this.starved&&n&&(t.bs=!0,t.su=!0,this.starved=!1),null==t.su&&(t.su=this.buffering);const{includeKeys:r}=this;r&&(t=Object.keys(t).reduce(((e,n)=>(r.includes(n)&&(e[n]=t[n]),e)),{})),this.useHeaders?(e.headers||(e.headers={}),l8(e.headers,t)):e.url=u8(e.url,t)}getObjectType(e){const{type:t}=e;return"subtitle"===t?j9.TIMED_TEXT:"initSegment"===e.sn?j9.INIT:"audio"===t?j9.AUDIO:"main"===t?this.hls.audioTracks.length?j9.VIDEO:j9.MUXED:void 0}getTopBandwidth(e){let t,n=0;const r=this.hls;if(e===j9.AUDIO)t=r.audioTracks;else{const e=r.maxAutoLevel,n=e>-1?e+1:r.levels.length;t=r.levels.slice(0,n)}for(const i of t)i.bitrate>n&&(n=i.bitrate);return n>0?n:NaN}getBufferLength(e){const t=this.hls.media,n=e===j9.AUDIO?this.audioBuffer:this.videoBuffer;if(!n||!t)return NaN;return 1e3*Y4.bufferInfo(n,t.currentTime,this.config.maxBufferHole).len}createPlaylistLoader(){const{pLoader:e}=this.config,t=this.applyPlaylistData,n=e||this.config.loader;return class{constructor(e){this.loader=void 0,this.loader=new n(e)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(e,n,r){t(e),this.loader.load(e,n,r)}}}createFragmentLoader(){const{fLoader:e}=this.config,t=this.applyFragmentData,n=e||this.config.loader;return class{constructor(e){this.loader=void 0,this.loader=new n(e)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(e,n,r){t(e),this.loader.load(e,n,r)}}}},contentSteeringController:class{constructor(e){this.hls=void 0,this.log=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this.pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=e,this.log=x1.log.bind(x1,"[content-steering]:"),this.registerListeners()}registerListeners(){const e=this.hls;e.on(m1.MANIFEST_LOADING,this.onManifestLoading,this),e.on(m1.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(m1.MANIFEST_PARSED,this.onManifestParsed,this),e.on(m1.ERROR,this.onError,this)}unregisterListeners(){const e=this.hls;e&&(e.off(m1.MANIFEST_LOADING,this.onManifestLoading,this),e.off(m1.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(m1.MANIFEST_PARSED,this.onManifestParsed,this),e.off(m1.ERROR,this.onError,this))}startLoad(){if(this.started=!0,this.clearTimeout(),this.enabled&&this.uri){if(this.updated){const e=1e3*this.timeToLoad-(performance.now()-this.updated);if(e>0)return void this.scheduleRefresh(this.uri,e)}this.loadSteeringManifest(this.uri)}}stopLoad(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),this.clearTimeout()}clearTimeout(){-1!==this.reloadTimer&&(self.clearTimeout(this.reloadTimer),this.reloadTimer=-1)}destroy(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null}removeLevel(e){const t=this.levels;t&&(this.levels=t.filter((t=>t!==e)))}onManifestLoading(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null}onManifestLoaded(e,t){const{contentSteering:n}=t;null!==n&&(this.pathwayId=n.pathwayId,this.uri=n.uri,this.started&&this.startLoad())}onManifestParsed(e,t){this.audioTracks=t.audioTracks,this.subtitleTracks=t.subtitleTracks}onError(e,t){const{errorAction:n}=t;if((null==n?void 0:n.action)===E4&&n.flags===T4){const e=this.levels;let r=this.pathwayPriority,i=this.pathwayId;if(t.context){const{groupId:n,pathwayId:r,type:a}=t.context;n&&e?i=this.getPathwayForGroupId(n,a,i):r&&(i=r)}i in this.penalizedPathways||(this.penalizedPathways[i]=performance.now()),!r&&e&&(r=e.reduce(((e,t)=>(-1===e.indexOf(t.pathwayId)&&e.push(t.pathwayId),e)),[])),r&&r.length>1&&(this.updatePathwayPriority(r),n.resolved=this.pathwayId!==i),n.resolved||x1.warn(`Could not resolve ${t.details} ("${t.error.message}") with content-steering for Pathway: ${i} levels: ${e?e.length:e} priorities: ${JSON.stringify(r)} penalized: ${JSON.stringify(this.penalizedPathways)}`)}}filterParsedLevels(e){this.levels=e;let t=this.getLevelsForPathway(this.pathwayId);if(0===t.length){const n=e[0].pathwayId;this.log(`No levels found in Pathway ${this.pathwayId}. Setting initial Pathway to "${n}"`),t=this.getLevelsForPathway(n),this.pathwayId=n}return t.length!==e.length&&this.log(`Found ${t.length}/${e.length} levels in Pathway "${this.pathwayId}"`),t}getLevelsForPathway(e){return null===this.levels?[]:this.levels.filter((t=>e===t.pathwayId))}updatePathwayPriority(e){let t;this.pathwayPriority=e;const n=this.penalizedPathways,r=performance.now();Object.keys(n).forEach((e=>{r-n[e]>3e5&&delete n[e]}));for(let i=0;i<e.length;i++){const r=e[i];if(r in n)continue;if(r===this.pathwayId)return;const a=this.hls.nextLoadLevel,o=this.hls.levels[a];if(t=this.getLevelsForPathway(r),t.length>0){this.log(`Setting Pathway to "${r}"`),this.pathwayId=r,u4(t),this.hls.trigger(m1.LEVELS_UPDATED,{levels:t});const e=this.hls.levels[a];o&&e&&this.levels&&(e.attrs["STABLE-VARIANT-ID"]!==o.attrs["STABLE-VARIANT-ID"]&&e.bitrate!==o.bitrate&&this.log(`Unstable Pathways change from bitrate ${o.bitrate} to ${e.bitrate}`),this.hls.nextLoadLevel=a);break}}}getPathwayForGroupId(e,t,n){const r=this.getLevelsForPathway(n).concat(this.levels||[]);for(let i=0;i<r.length;i++)if(t===S3&&r[i].hasAudioGroup(e)||t===k3&&r[i].hasSubtitleGroup(e))return r[i].pathwayId;return n}clonePathways(e){const t=this.levels;if(!t)return;const n={},r={};e.forEach((e=>{const{ID:i,"BASE-ID":a,"URI-REPLACEMENT":o}=e;if(t.some((e=>e.pathwayId===i)))return;const s=this.getLevelsForPathway(a).map((e=>{const t=new T1(e.attrs);t["PATHWAY-ID"]=i;const a=t.AUDIO&&`${t.AUDIO}_clone_${i}`,s=t.SUBTITLES&&`${t.SUBTITLES}_clone_${i}`;a&&(n[t.AUDIO]=a,t.AUDIO=a),s&&(r[t.SUBTITLES]=s,t.SUBTITLES=s);const l=h8(e.uri,t["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",o),c=new t4({attrs:t,audioCodec:e.audioCodec,bitrate:e.bitrate,height:e.height,name:e.name,url:l,videoCodec:e.videoCodec,width:e.width});if(e.audioGroups)for(let n=1;n<e.audioGroups.length;n++)c.addGroupId("audio",`${e.audioGroups[n]}_clone_${i}`);if(e.subtitleGroups)for(let n=1;n<e.subtitleGroups.length;n++)c.addGroupId("text",`${e.subtitleGroups[n]}_clone_${i}`);return c}));t.push(...s),d8(this.audioTracks,n,o,i),d8(this.subtitleTracks,r,o,i)}))}loadSteeringManifest(e){const t=this.hls.config,n=t.loader;let r;this.loader&&this.loader.destroy(),this.loader=new n(t);try{r=new self.URL(e)}catch(Rb){return this.enabled=!1,void this.log(`Failed to parse Steering Manifest URI: ${e}`)}if("data:"!==r.protocol){const e=0|(this.hls.bandwidthEstimate||t.abrEwmaDefaultEstimate);r.searchParams.set("_HLS_pathway",this.pathwayId),r.searchParams.set("_HLS_throughput",""+e)}const i={responseType:"json",url:r.href},a=t.steeringManifestLoadPolicy.default,o=a.errorRetry||a.timeoutRetry||{},s={loadPolicy:a,timeout:a.maxLoadTimeMs,maxRetry:o.maxNumRetry||0,retryDelay:o.retryDelayMs||0,maxRetryDelay:o.maxRetryDelayMs||0},l={onSuccess:(e,t,n,i)=>{this.log(`Loaded steering manifest: "${r}"`);const a=e.data;if(1!==a.VERSION)return void this.log(`Steering VERSION ${a.VERSION} not supported!`);this.updated=performance.now(),this.timeToLoad=a.TTL;const{"RELOAD-URI":o,"PATHWAY-CLONES":s,"PATHWAY-PRIORITY":l}=a;if(o)try{this.uri=new self.URL(o,r).href}catch(Rb){return this.enabled=!1,void this.log(`Failed to parse Steering Manifest RELOAD-URI: ${o}`)}this.scheduleRefresh(this.uri||n.url),s&&this.clonePathways(s);const c={steeringManifest:a,url:r.toString()};this.hls.trigger(m1.STEERING_MANIFEST_LOADED,c),l&&this.updatePathwayPriority(l)},onError:(e,t,n,r)=>{if(this.log(`Error loading steering manifest: ${e.code} ${e.text} (${t.url})`),this.stopLoad(),410===e.code)return this.enabled=!1,void this.log(`Steering manifest ${t.url} no longer available`);let i=1e3*this.timeToLoad;if(429!==e.code)this.scheduleRefresh(this.uri||t.url,i);else{const e=this.loader;if("function"===typeof(null==e?void 0:e.getResponseHeader)){const t=e.getResponseHeader("Retry-After");t&&(i=1e3*parseFloat(t))}this.log(`Steering manifest ${t.url} rate limited`)}},onTimeout:(e,t,n)=>{this.log(`Timeout loading steering manifest (${t.url})`),this.scheduleRefresh(this.uri||t.url)}};this.log(`Requesting steering manifest: ${r}`),this.loader.load(i,s,l)}scheduleRefresh(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3*this.timeToLoad;this.clearTimeout(),this.reloadTimer=self.setTimeout((()=>{var t;const n=null==(t=this.hls)?void 0:t.media;!n||n.ended?this.scheduleRefresh(e,1e3*this.timeToLoad):this.loadSteeringManifest(e)}),t)}}});function x8(e){return e&&"object"===typeof e?Array.isArray(e)?e.map(x8):Object.keys(e).reduce(((t,n)=>(t[n]=x8(e[n]),t)),{}):e}function _8(e){const t=e.loader;if(t!==g8&&t!==f8)x1.log("[config]: Custom loader detected, cannot enable progressive streaming"),e.progressive=!1;else{(function(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch(Q_){}return!1})()&&(e.loader=g8,e.progressive=!0,e.enableSoftwareAES=!0,x1.log("[config]: Progressive streaming enabled, using FetchLoader"))}}let A8;class T8 extends k4{constructor(e,t){super(e,"[level-controller]"),this._levels=[],this._firstLevel=-1,this._maxAutoLevel=-1,this._startLevel=void 0,this.currentLevel=null,this.currentLevelIndex=-1,this.manualLevelIndex=-1,this.steering=void 0,this.onParsedComplete=void 0,this.steering=t,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(m1.MANIFEST_LOADING,this.onManifestLoading,this),e.on(m1.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(m1.LEVEL_LOADED,this.onLevelLoaded,this),e.on(m1.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(m1.FRAG_BUFFERED,this.onFragBuffered,this),e.on(m1.ERROR,this.onError,this)}_unregisterListeners(){const{hls:e}=this;e.off(m1.MANIFEST_LOADING,this.onManifestLoading,this),e.off(m1.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(m1.LEVEL_LOADED,this.onLevelLoaded,this),e.off(m1.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(m1.FRAG_BUFFERED,this.onFragBuffered,this),e.off(m1.ERROR,this.onError,this)}destroy(){this._unregisterListeners(),this.steering=null,this.resetLevels(),super.destroy()}stopLoad(){this._levels.forEach((e=>{e.loadError=0,e.fragmentError=0})),super.stopLoad()}resetLevels(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[],this._maxAutoLevel=-1}onManifestLoading(e,t){this.resetLevels()}onManifestLoaded(e,t){const n=this.hls.config.preferManagedMediaSource,r=[],i={},a={};let o=!1,s=!1,l=!1;t.levels.forEach((e=>{var t,c;const u=e.attrs;let{audioCodec:d,videoCodec:h}=e;-1!==(null==(t=d)?void 0:t.indexOf("mp4a.40.34"))&&(A8||(A8=/chrome|firefox/i.test(navigator.userAgent)),A8&&(e.audioCodec=d=void 0)),d&&(e.audioCodec=d=c3(d,n)),0===(null==(c=h)?void 0:c.indexOf("avc1"))&&(h=e.videoCodec=function(e){const t=e.split(",");for(let n=0;n<t.length;n++){const e=t[n].split(".");if(e.length>2){let r=e.shift()+".";r+=parseInt(e.shift()).toString(16),r+=("000"+parseInt(e.shift()).toString(16)).slice(-4),t[n]=r}}return t.join(",")}(h));const{width:p,height:f,unknownCodecs:m}=e;if(o||(o=!(!p||!f)),s||(s=!!h),l||(l=!!d),null!=m&&m.length||d&&!n3(d,"audio",n)||h&&!n3(h,"video",n))return;const{CODECS:g,"FRAME-RATE":v,"HDCP-LEVEL":y,"PATHWAY-ID":b,RESOLUTION:w,"VIDEO-RANGE":E}=u,x=`${`${b||"."}-`}${e.bitrate}-${w}-${v}-${g}-${E}-${y}`;if(i[x])if(i[x].uri===e.url||e.attrs["PATHWAY-ID"])i[x].addGroupId("audio",u.AUDIO),i[x].addGroupId("text",u.SUBTITLES);else{const t=a[x]+=1;e.attrs["PATHWAY-ID"]=new Array(t+1).join(".");const n=new t4(e);i[x]=n,r.push(n)}else{const t=new t4(e);i[x]=t,a[x]=1,r.push(t)}})),this.filterAndSortMediaOptions(r,t,o,s,l)}filterAndSortMediaOptions(e,t,n,r,i){let a=[],o=[],s=e;if((n||r)&&i&&(s=s.filter((e=>{let{videoCodec:t,videoRange:n,width:r,height:i}=e;return(!!t||!(!r||!i))&&(!!(a=n)&&Y3.indexOf(a)>-1);var a}))),0===s.length)return void Promise.resolve().then((()=>{if(this.hls){t.levels.length&&this.warn(`One or more CODECS in variant not supported: ${JSON.stringify(t.levels[0].attrs)}`);const e=new Error("no level with compatible codecs found in manifest");this.hls.trigger(m1.ERROR,{type:g1.MEDIA_ERROR,details:v1.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:t.url,error:e,reason:e.message})}}));if(t.audioTracks){const{preferManagedMediaSource:e}=this.hls.config;a=t.audioTracks.filter((t=>!t.audioCodec||n3(t.audioCodec,"audio",e))),S8(a)}t.subtitles&&(o=t.subtitles,S8(o));const l=s.slice(0);s.sort(((e,t)=>{if(e.attrs["HDCP-LEVEL"]!==t.attrs["HDCP-LEVEL"])return(e.attrs["HDCP-LEVEL"]||"")>(t.attrs["HDCP-LEVEL"]||"")?1:-1;if(n&&e.height!==t.height)return e.height-t.height;if(e.frameRate!==t.frameRate)return e.frameRate-t.frameRate;if(e.videoRange!==t.videoRange)return Y3.indexOf(e.videoRange)-Y3.indexOf(t.videoRange);if(e.videoCodec!==t.videoCodec){const n=a3(e.videoCodec),r=a3(t.videoCodec);if(n!==r)return r-n}if(e.uri===t.uri&&e.codecSet!==t.codecSet){const n=o3(e.codecSet),r=o3(t.codecSet);if(n!==r)return r-n}return e.averageBitrate!==t.averageBitrate?e.averageBitrate-t.averageBitrate:0}));let c=l[0];if(this.steering&&(s=this.steering.filterParsedLevels(s),s.length!==l.length))for(let p=0;p<l.length;p++)if(l[p].pathwayId===s[0].pathwayId){c=l[p];break}this._levels=s;for(let p=0;p<s.length;p++)if(s[p]===c){var u;this._firstLevel=p;const e=c.bitrate,t=this.hls.bandwidthEstimate;if(this.log(`manifest loaded, ${s.length} level(s) found, first bitrate: ${e}`),void 0===(null==(u=this.hls.userConfig)?void 0:u.abrEwmaDefaultEstimate)){const n=Math.min(e,this.hls.config.abrEwmaDefaultEstimateMax);n>t&&t===E8.abrEwmaDefaultEstimate&&(this.hls.bandwidthEstimate=n)}break}const d=i&&!r,h={levels:s,audioTracks:a,subtitleTracks:o,sessionData:t.sessionData,sessionKeys:t.sessionKeys,firstLevel:this._firstLevel,stats:t.stats,audio:i,video:r,altAudio:!d&&a.some((e=>!!e.url))};this.hls.trigger(m1.MANIFEST_PARSED,h),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition)}get levels(){return 0===this._levels.length?null:this._levels}get level(){return this.currentLevelIndex}set level(e){const t=this._levels;if(0===t.length)return;if(e<0||e>=t.length){const n=new Error("invalid level idx"),r=e<0;if(this.hls.trigger(m1.ERROR,{type:g1.OTHER_ERROR,details:v1.LEVEL_SWITCH_ERROR,level:e,fatal:r,error:n,reason:n.message}),r)return;e=Math.min(e,t.length-1)}const n=this.currentLevelIndex,r=this.currentLevel,i=r?r.attrs["PATHWAY-ID"]:void 0,a=t[e],o=a.attrs["PATHWAY-ID"];if(this.currentLevelIndex=e,this.currentLevel=a,n===e&&a.details&&r&&i===o)return;this.log(`Switching to level ${e} (${a.height?a.height+"p ":""}${a.videoRange?a.videoRange+" ":""}${a.codecSet?a.codecSet+" ":""}@${a.bitrate})${o?" with Pathway "+o:""} from level ${n}${i?" with Pathway "+i:""}`);const s={level:e,attrs:a.attrs,details:a.details,bitrate:a.bitrate,averageBitrate:a.averageBitrate,maxBitrate:a.maxBitrate,realBitrate:a.realBitrate,width:a.width,height:a.height,codecSet:a.codecSet,audioCodec:a.audioCodec,videoCodec:a.videoCodec,audioGroups:a.audioGroups,subtitleGroups:a.subtitleGroups,loaded:a.loaded,loadError:a.loadError,fragmentError:a.fragmentError,name:a.name,id:a.id,uri:a.uri,url:a.url,urlId:0,audioGroupIds:a.audioGroupIds,textGroupIds:a.textGroupIds};this.hls.trigger(m1.LEVEL_SWITCHING,s);const l=a.details;if(!l||l.live){const e=this.switchParams(a.uri,null==r?void 0:r.details,l);this.loadPlaylist(e)}}get manualLevel(){return this.manualLevelIndex}set manualLevel(e){this.manualLevelIndex=e,void 0===this._startLevel&&(this._startLevel=e),-1!==e&&(this.level=e)}get firstLevel(){return this._firstLevel}set firstLevel(e){this._firstLevel=e}get startLevel(){if(void 0===this._startLevel){const e=this.hls.config.startLevel;return void 0!==e?e:this.hls.firstAutoLevel}return this._startLevel}set startLevel(e){this._startLevel=e}onError(e,t){!t.fatal&&t.context&&t.context.type===T3&&t.context.level===this.level&&this.checkRetry(t)}onFragBuffered(e,t){let{frag:n}=t;if(void 0!==n&&n.type===C3){const e=n.elementaryStreams;if(!Object.keys(e).some((t=>!!e[t])))return;const t=this._levels[n.level];null!=t&&t.loadError&&(this.log(`Resetting level error count of ${t.loadError} on frag buffered`),t.loadError=0)}}onLevelLoaded(e,t){var n;const{level:r,details:i}=t,a=this._levels[r];var o;if(!a)return this.warn(`Invalid level index ${r}`),void(null!=(o=t.deliveryDirectives)&&o.skip&&(i.deltaUpdateFailed=!0));r===this.currentLevelIndex?(0===a.fragmentError&&(a.loadError=0),this.playlistLoaded(r,t,a.details)):null!=(n=t.deliveryDirectives)&&n.skip&&(i.deltaUpdateFailed=!0)}loadPlaylist(e){super.loadPlaylist();const t=this.currentLevelIndex,n=this.currentLevel;if(n&&this.shouldLoadPlaylist(n)){let r=n.uri;if(e)try{r=e.addDirectives(r)}catch(Rb){this.warn(`Could not construct new URL with HLS Delivery Directives: ${Rb}`)}const i=n.attrs["PATHWAY-ID"];this.log(`Loading level index ${t}${void 0!==(null==e?void 0:e.msn)?" at sn "+e.msn+" part "+e.part:""} with${i?" Pathway "+i:""} ${r}`),this.clearTimer(),this.hls.trigger(m1.LEVEL_LOADING,{url:r,level:t,pathwayId:n.attrs["PATHWAY-ID"],id:0,deliveryDirectives:e||null})}}get nextLoadLevel(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel}set nextLoadLevel(e){this.level=e,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=e)}removeLevel(e){var t;const n=this._levels.filter(((t,n)=>n!==e||(this.steering&&this.steering.removeLevel(t),t===this.currentLevel&&(this.currentLevel=null,this.currentLevelIndex=-1,t.details&&t.details.fragments.forEach((e=>e.level=-1))),!1)));u4(n),this._levels=n,this.currentLevelIndex>-1&&null!=(t=this.currentLevel)&&t.details&&(this.currentLevelIndex=this.currentLevel.details.fragments[0].level),this.hls.trigger(m1.LEVELS_UPDATED,{levels:n})}onLevelsUpdated(e,t){let{levels:n}=t;this._levels=n}checkMaxAutoUpdated(){const{autoLevelCapping:e,maxAutoLevel:t,maxHdcpLevel:n}=this.hls;this._maxAutoLevel!==t&&(this._maxAutoLevel=t,this.hls.trigger(m1.MAX_AUTO_LEVEL_UPDATED,{autoLevelCapping:e,levels:this.levels,maxAutoLevel:t,minAutoLevel:this.hls.minAutoLevel,maxHdcpLevel:n}))}}function S8(e){const t={};e.forEach((e=>{const n=e.groupId||"";e.id=t[n]=t[n]||0,t[n]++}))}class k8{constructor(e){this.config=void 0,this.keyUriToKeyInfo={},this.emeController=null,this.config=e}abort(e){for(const n in this.keyUriToKeyInfo){const r=this.keyUriToKeyInfo[n].loader;if(r){var t;if(e&&e!==(null==(t=r.context)?void 0:t.frag.type))return;r.abort()}}}detach(){for(const e in this.keyUriToKeyInfo){const t=this.keyUriToKeyInfo[e];(t.mediaKeySessionContext||t.decryptdata.isCommonEncryption)&&delete this.keyUriToKeyInfo[e]}}destroy(){this.detach();for(const e in this.keyUriToKeyInfo){const t=this.keyUriToKeyInfo[e].loader;t&&t.destroy()}this.keyUriToKeyInfo={}}createKeyLoadError(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:v1.KEY_LOAD_ERROR,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;return new o5({type:g1.NETWORK_ERROR,details:t,fatal:!1,frag:e,response:i,error:n,networkDetails:r})}loadClear(e,t){if(this.emeController&&this.config.emeEnabled){const{sn:n,cc:r}=e;for(let e=0;e<t.length;e++){const i=t[e];if(r<=i.cc&&("initSegment"===n||"initSegment"===i.sn||n<i.sn)){this.emeController.selectKeySystemFormat(i).then((e=>{i.setKeyFormat(e)}));break}}}}load(e){return!e.decryptdata&&e.encrypted&&this.emeController&&this.config.emeEnabled?this.emeController.selectKeySystemFormat(e).then((t=>this.loadInternal(e,t))):this.loadInternal(e)}loadInternal(e,t){var n,r;t&&e.setKeyFormat(t);const i=e.decryptdata;if(!i){const n=new Error(t?`Expected frag.decryptdata to be defined after setting format ${t}`:"Missing decryption data on fragment in onKeyLoading");return Promise.reject(this.createKeyLoadError(e,v1.KEY_LOAD_ERROR,n))}const a=i.uri;if(!a)return Promise.reject(this.createKeyLoadError(e,v1.KEY_LOAD_ERROR,new Error(`Invalid key URI: "${a}"`)));let o=this.keyUriToKeyInfo[a];if(null!=(n=o)&&n.decryptdata.key)return i.key=o.decryptdata.key,Promise.resolve({frag:e,keyInfo:o});var s;if(null!=(r=o)&&r.keyLoadPromise)switch(null==(s=o.mediaKeySessionContext)?void 0:s.keyStatus){case void 0:case"status-pending":case"usable":case"usable-in-future":return o.keyLoadPromise.then((t=>(i.key=t.keyInfo.decryptdata.key,{frag:e,keyInfo:o})))}switch(o=this.keyUriToKeyInfo[a]={decryptdata:i,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},i.method){case"ISO-23001-7":case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return"identity"===i.keyFormat?this.loadKeyHTTP(o,e):this.loadKeyEME(o,e);case"AES-128":return this.loadKeyHTTP(o,e);default:return Promise.reject(this.createKeyLoadError(e,v1.KEY_LOAD_ERROR,new Error(`Key supplied with unsupported METHOD: "${i.method}"`)))}}loadKeyEME(e,t){const n={frag:t,keyInfo:e};if(this.emeController&&this.config.emeEnabled){const t=this.emeController.loadKey(n);if(t)return(e.keyLoadPromise=t.then((t=>(e.mediaKeySessionContext=t,n)))).catch((t=>{throw e.keyLoadPromise=null,t}))}return Promise.resolve(n)}loadKeyHTTP(e,t){const n=this.config,r=new(0,n.loader)(n);return t.keyLoader=e.loader=r,e.keyLoadPromise=new Promise(((i,a)=>{const o={keyInfo:e,frag:t,responseType:"arraybuffer",url:e.decryptdata.uri},s=n.keyLoadPolicy.default,l={loadPolicy:s,timeout:s.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},c={onSuccess:(e,t,n,r)=>{const{frag:o,keyInfo:s,url:l}=n;if(!o.decryptdata||s!==this.keyUriToKeyInfo[l])return a(this.createKeyLoadError(o,v1.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),r));s.decryptdata.key=o.decryptdata.key=new Uint8Array(e.data),o.keyLoader=null,s.loader=null,i({frag:o,keyInfo:s})},onError:(e,n,r,i)=>{this.resetLoader(n),a(this.createKeyLoadError(t,v1.KEY_LOAD_ERROR,new Error(`HTTP Error ${e.code} loading key ${e.text}`),r,l1({url:o.url,data:void 0},e)))},onTimeout:(e,n,r)=>{this.resetLoader(n),a(this.createKeyLoadError(t,v1.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),r))},onAbort:(e,n,r)=>{this.resetLoader(n),a(this.createKeyLoadError(t,v1.INTERNAL_ABORTED,new Error("key loading aborted"),r))}};r.load(o,l,c)}))}resetLoader(e){const{frag:t,keyInfo:n,url:r}=e,i=n.loader;t.keyLoader===i&&(t.keyLoader=null,n.loader=null),delete this.keyUriToKeyInfo[r],i&&i.destroy()}}function C8(){return self.SourceBuffer||self.WebKitSourceBuffer}function I8(){if(!e3())return!1;const e=C8();return!e||e.prototype&&"function"===typeof e.prototype.appendBuffer&&"function"===typeof e.prototype.remove}class R8{constructor(e,t,n,r){this.config=void 0,this.media=null,this.fragmentTracker=void 0,this.hls=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.config=e,this.media=t,this.fragmentTracker=n,this.hls=r}destroy(){this.media=null,this.hls=this.fragmentTracker=null}poll(e,t){const{config:n,media:r,stalled:i}=this;if(null===r)return;const{currentTime:a,seeking:o}=r,s=this.seeking&&!o,l=!this.seeking&&o;if(this.seeking=o,a!==e){if(this.moved=!0,o||(this.nudgeRetry=0),null!==i){if(this.stallReported){const e=self.performance.now()-i;x1.warn(`playback not stuck anymore @${a}, after ${Math.round(e)}ms`),this.stallReported=!1}this.stalled=null}return}if(l||s)return void(this.stalled=null);if(r.paused&&!o||r.ended||0===r.playbackRate||!Y4.getBuffered(r).length)return void(this.nudgeRetry=0);const c=Y4.bufferInfo(r,a,0),u=c.nextStart||0;if(o){const e=c.len>2,n=!u||t&&t.start<=a||u-a>2&&!this.fragmentTracker.getPartialFragment(a);if(e||n)return;this.moved=!1}if(!this.moved&&null!==this.stalled){var d;if(!(c.len>0)&&!u)return;const e=Math.max(u,c.start||0)-a,t=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null,n=(null==t||null==(d=t.details)?void 0:d.live)?2*t.details.targetduration:2,i=this.fragmentTracker.getPartialFragment(a);if(e>0&&(e<=n||i))return void(r.paused||this._trySkipBufferHole(i))}const h=self.performance.now();if(null===i)return void(this.stalled=h);const p=h-i;if(!o&&p>=250&&(this._reportStall(c),!this.media))return;const f=Y4.bufferInfo(r,a,n.maxBufferHole);this._tryFixBufferStall(f,p)}_tryFixBufferStall(e,t){const{config:n,fragmentTracker:r,media:i}=this;if(null===i)return;const a=i.currentTime,o=r.getPartialFragment(a);if(o){if(this._trySkipBufferHole(o)||!this.media)return}(e.len>n.maxBufferHole||e.nextStart&&e.nextStart-a<n.maxBufferHole)&&t>1e3*n.highBufferWatchdogPeriod&&(x1.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())}_reportStall(e){const{hls:t,media:n,stallReported:r}=this;if(!r&&n){this.stallReported=!0;const r=new Error(`Playback stalling at @${n.currentTime} due to low buffer (${JSON.stringify(e)})`);x1.warn(r.message),t.trigger(m1.ERROR,{type:g1.MEDIA_ERROR,details:v1.BUFFER_STALLED_ERROR,fatal:!1,error:r,buffer:e.len})}}_trySkipBufferHole(e){const{config:t,hls:n,media:r}=this;if(null===r)return 0;const i=r.currentTime,a=Y4.bufferInfo(r,i,0),o=i<a.start?a.start:a.nextStart;if(o){const s=a.len<=t.maxBufferHole,l=a.len>0&&a.len<1&&r.readyState<3,c=o-i;if(c>0&&(s||l)){if(c>t.maxBufferHole){const{fragmentTracker:t}=this;let n=!1;if(0===i){const e=t.getAppendedFrag(0,C3);e&&o<e.end&&(n=!0)}if(!n){const n=e||t.getAppendedFrag(i,C3);if(n){let e=!1,r=n.end;for(;r<o;){const n=t.getPartialFragment(r);if(!n){e=!0;break}r+=n.duration}if(e)return 0}}}const a=Math.max(o+.05,i+.1);if(x1.warn(`skipping hole, adjusting currentTime from ${i} to ${a}`),this.moved=!0,this.stalled=null,r.currentTime=a,e&&!e.gap){const t=new Error(`fragment loaded with buffer holes, seeking from ${i} to ${a}`);n.trigger(m1.ERROR,{type:g1.MEDIA_ERROR,details:v1.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:t,reason:t.message,frag:e})}return a}}return 0}_tryNudgeBuffer(){const{config:e,hls:t,media:n,nudgeRetry:r}=this;if(null===n)return;const i=n.currentTime;if(this.nudgeRetry++,r<e.nudgeMaxRetry){const a=i+(r+1)*e.nudgeOffset,o=new Error(`Nudging 'currentTime' from ${i} to ${a}`);x1.warn(o.message),n.currentTime=a,t.trigger(m1.ERROR,{type:g1.MEDIA_ERROR,details:v1.BUFFER_NUDGE_ON_STALL,error:o,fatal:!1})}else{const n=new Error(`Playhead still not moving while enough data buffered @${i} after ${e.nudgeMaxRetry} nudges`);x1.error(n.message),t.trigger(m1.ERROR,{type:g1.MEDIA_ERROR,details:v1.BUFFER_STALLED_ERROR,error:n,fatal:!0})}}}class D8 extends A5{constructor(e,t,n){super(e,t,n,"[stream-controller]",C3),this.audioCodecSwap=!1,this.gapController=null,this.level=-1,this._forceStartLoad=!1,this.altAudio=!1,this.audioOnly=!1,this.fragPlaying=null,this.onvplaying=null,this.onvseeked=null,this.fragLastKbps=0,this.couldBacktrack=!1,this.backtrackFragment=null,this.audioCodecSwitch=!1,this.videoBuffer=null,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(m1.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(m1.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(m1.MANIFEST_LOADING,this.onManifestLoading,this),e.on(m1.MANIFEST_PARSED,this.onManifestParsed,this),e.on(m1.LEVEL_LOADING,this.onLevelLoading,this),e.on(m1.LEVEL_LOADED,this.onLevelLoaded,this),e.on(m1.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.on(m1.ERROR,this.onError,this),e.on(m1.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(m1.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(m1.BUFFER_CREATED,this.onBufferCreated,this),e.on(m1.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(m1.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(m1.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:e}=this;e.off(m1.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(m1.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(m1.MANIFEST_LOADING,this.onManifestLoading,this),e.off(m1.MANIFEST_PARSED,this.onManifestParsed,this),e.off(m1.LEVEL_LOADED,this.onLevelLoaded,this),e.off(m1.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.off(m1.ERROR,this.onError,this),e.off(m1.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(m1.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(m1.BUFFER_CREATED,this.onBufferCreated,this),e.off(m1.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(m1.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(m1.FRAG_BUFFERED,this.onFragBuffered,this)}onHandlerDestroying(){this._unregisterListeners(),super.onHandlerDestroying()}startLoad(e){if(this.levels){const{lastCurrentTime:t,hls:n}=this;if(this.stopLoad(),this.setInterval(100),this.level=-1,!this.startFragRequested){let e=n.startLevel;-1===e&&(n.config.testBandwidth&&this.levels.length>1?(e=0,this.bitrateTest=!0):e=n.firstAutoLevel),n.nextLoadLevel=e,this.level=n.loadLevel,this.loadedmetadata=!1}t>0&&-1===e&&(this.log(`Override startPosition with lastCurrentTime @${t.toFixed(3)}`),e=t),this.state=p5,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}else this._forceStartLoad=!0,this.state=h5}stopLoad(){this._forceStartLoad=!1,super.stopLoad()}doTick(){switch(this.state){case _5:{const{levels:e,level:t}=this,n=null==e?void 0:e[t],r=null==n?void 0:n.details;if(r&&(!r.live||this.levelLastLoaded===n)){if(this.waitForCdnTuneIn(r))break;this.state=p5;break}if(this.hls.nextLoadLevel!==this.level){this.state=p5;break}break}case g5:{var e;const t=self.performance.now(),n=this.retryDate;if(!n||t>=n||null!=(e=this.media)&&e.seeking){const{levels:e,level:t}=this,n=null==e?void 0:e[t];this.resetStartWhenNotLoaded(n||null),this.state=p5}}}this.state===p5&&this.doTickIdle(),this.onTickEnd()}onTickEnd(){super.onTickEnd(),this.checkBuffer(),this.checkFragmentChanged()}doTickIdle(){const{hls:e,levelLastLoaded:t,levels:n,media:r}=this;if(null===t||!r&&(this.startFragRequested||!e.config.startFragPrefetch))return;if(this.altAudio&&this.audioOnly)return;const i=this.buffering?e.nextLoadLevel:e.loadLevel;if(null==n||!n[i])return;const a=n[i],o=this.getMainFwdBufferInfo();if(null===o)return;const s=this.getLevelDetails();if(s&&this._streamEnded(o,s)){const e={};return this.altAudio&&(e.type="video"),this.hls.trigger(m1.BUFFER_EOS,e),void(this.state=w5)}if(!this.buffering)return;e.loadLevel!==i&&-1===e.manualLevel&&this.log(`Adapting to level ${i} from level ${this.level}`),this.level=e.nextLoadLevel=i;const l=a.details;if(!l||this.state===_5||l.live&&this.levelLastLoaded!==a)return this.level=i,void(this.state=_5);const c=o.len,u=this.getMaxBufferLength(a.maxBitrate);if(c>=u)return;this.backtrackFragment&&this.backtrackFragment.start>o.end&&(this.backtrackFragment=null);const d=this.backtrackFragment?this.backtrackFragment.start:o.end;let h=this.getNextFragment(d,l);if(this.couldBacktrack&&!this.fragPrevious&&h&&"initSegment"!==h.sn&&this.fragmentTracker.getState(h)!==z4){var p;const e=(null!=(p=this.backtrackFragment)?p:h).sn-l.startSN,t=l.fragments[e-1];t&&h.cc===t.cc&&(h=t,this.fragmentTracker.removeFragment(t))}else this.backtrackFragment&&o.len&&(this.backtrackFragment=null);if(h&&this.isLoopLoading(h,d)){if(!h.gap){const e=this.audioOnly&&!this.altAudio?I1:R1,t=(e===R1?this.videoBuffer:this.mediaBuffer)||this.media;t&&this.afterBufferFlushed(t,e,C3)}h=this.getNextFragmentLoopLoading(h,l,o,C3,u)}h&&(!h.initSegment||h.initSegment.data||this.bitrateTest||(h=h.initSegment),this.loadFragment(h,a,d))}loadFragment(e,t,n){const r=this.fragmentTracker.getState(e);this.fragCurrent=e,r===$4||r===W4?"initSegment"===e.sn?this._loadInitSegment(e,t):this.bitrateTest?(this.log(`Fragment ${e.sn} of level ${e.level} is being downloaded to test bitrate and will not be buffered`),this._loadBitrateTestFrag(e,t)):(this.startFragRequested=!0,super.loadFragment(e,t,n)):this.clearTrackerIfNeeded(e)}getBufferedFrag(e){return this.fragmentTracker.getBufferedFrag(e,C3)}followingBufferedFrag(e){return e?this.getBufferedFrag(e.end+.5):null}immediateLevelSwitch(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}nextLevelSwitch(){const{levels:e,media:t}=this;if(null!=t&&t.readyState){let n;const r=this.getAppendedFrag(t.currentTime);r&&r.start>1&&this.flushMainBuffer(0,r.start-1);const i=this.getLevelDetails();if(null!=i&&i.live){const e=this.getMainFwdBufferInfo();if(!e||e.len<2*i.targetduration)return}if(!t.paused&&e){const t=e[this.hls.nextLoadLevel],r=this.fragLastKbps;n=r&&this.fragCurrent?this.fragCurrent.duration*t.maxBitrate/(1e3*r)+1:0}else n=0;const a=this.getBufferedFrag(t.currentTime+n);if(a){const e=this.followingBufferedFrag(a);if(e){this.abortCurrentFrag();const t=e.maxStartPTS?e.maxStartPTS:e.start,n=e.duration,r=Math.max(a.end,t+Math.min(Math.max(n-this.config.maxFragLookUpTolerance,n*(this.couldBacktrack?.5:.125)),n*(this.couldBacktrack?.75:.25)));this.flushMainBuffer(r,Number.POSITIVE_INFINITY)}}}}abortCurrentFrag(){const e=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,e&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.state){case f5:case m5:case g5:case y5:case b5:this.state=p5}this.nextLoadPosition=this.getLoadPosition()}flushMainBuffer(e,t){super.flushMainBuffer(e,t,this.altAudio?"video":null)}onMediaAttached(e,t){super.onMediaAttached(e,t);const n=t.media;this.onvplaying=this.onMediaPlaying.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),n.addEventListener("playing",this.onvplaying),n.addEventListener("seeked",this.onvseeked),this.gapController=new R8(this.config,n,this.fragmentTracker,this.hls)}onMediaDetaching(){const{media:e}=this;e&&this.onvplaying&&this.onvseeked&&(e.removeEventListener("playing",this.onvplaying),e.removeEventListener("seeked",this.onvseeked),this.onvplaying=this.onvseeked=null,this.videoBuffer=null),this.fragPlaying=null,this.gapController&&(this.gapController.destroy(),this.gapController=null),super.onMediaDetaching()}onMediaPlaying(){this.tick()}onMediaSeeked(){const e=this.media,t=e?e.currentTime:null;h1(t)&&this.log(`Media seeked to ${t.toFixed(3)}`);const n=this.getMainFwdBufferInfo();null!==n&&0!==n.len?this.tick():this.warn(`Main forward buffer length on "seeked" event ${n?n.len:"empty"})`)}onManifestLoading(){this.log("Trigger BUFFER_RESET"),this.hls.trigger(m1.BUFFER_RESET,void 0),this.fragmentTracker.removeAllFragments(),this.couldBacktrack=!1,this.startPosition=this.lastCurrentTime=this.fragLastKbps=0,this.levels=this.fragPlaying=this.backtrackFragment=this.levelLastLoaded=null,this.altAudio=this.audioOnly=this.startFragRequested=!1}onManifestParsed(e,t){let n=!1,r=!1;t.levels.forEach((e=>{const t=e.audioCodec;t&&(n=n||-1!==t.indexOf("mp4a.40.2"),r=r||-1!==t.indexOf("mp4a.40.5"))})),this.audioCodecSwitch=n&&r&&!function(){var e;const t=C8();return"function"===typeof(null==t||null==(e=t.prototype)?void 0:e.changeType)}(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=t.levels,this.startFragRequested=!1}onLevelLoading(e,t){const{levels:n}=this;if(!n||this.state!==p5)return;const r=n[t.level];(!r.details||r.details.live&&this.levelLastLoaded!==r||this.waitForCdnTuneIn(r.details))&&(this.state=_5)}onLevelLoaded(e,t){var n;const{levels:r}=this,i=t.level,a=t.details,o=a.totalduration;if(!r)return void this.warn(`Levels were reset while loading level ${i}`);this.log(`Level ${i} loaded [${a.startSN},${a.endSN}]${a.lastPartSn?`[part-${a.lastPartSn}-${a.lastPartIndex}]`:""}, cc [${a.startCC}, ${a.endCC}] duration:${o}`);const s=r[i],l=this.fragCurrent;!l||this.state!==m5&&this.state!==g5||l.level!==t.level&&l.loader&&this.abortCurrentFrag();let c=0;if(a.live||null!=(n=s.details)&&n.live){var u;if(this.checkLiveUpdate(a),a.deltaUpdateFailed)return;c=this.alignPlaylists(a,s.details,null==(u=this.levelLastLoaded)?void 0:u.details)}if(s.details=a,this.levelLastLoaded=s,this.hls.trigger(m1.LEVEL_UPDATED,{details:a,level:i}),this.state===_5){if(this.waitForCdnTuneIn(a))return;this.state=p5}this.startFragRequested?a.live&&this.synchronizeToLiveEdge(a):this.setStartPosition(a,c),this.tick()}_handleFragmentLoadProgress(e){var t;const{frag:n,part:r,payload:i}=e,{levels:a}=this;if(!a)return void this.warn(`Levels were reset while fragment load was in progress. Fragment ${n.sn} of level ${n.level} will not be buffered`);const o=a[n.level],s=o.details;if(!s)return this.warn(`Dropping fragment ${n.sn} of level ${n.level} after level details were reset`),void this.fragmentTracker.removeFragment(n);const l=o.videoCodec,c=s.PTSKnown||!s.live,u=null==(t=n.initSegment)?void 0:t.data,d=this._getAudioCodec(o),h=this.transmuxer=this.transmuxer||new D6(this.hls,C3,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),p=r?r.index:-1,f=-1!==p,m=new Q4(n.level,n.sn,n.stats.chunkCount,i.byteLength,p,f),g=this.initPTS[n.cc];h.push(i,u,d,l,n,r,s.totalduration,c,m,g)}onAudioTrackSwitching(e,t){const n=this.altAudio;if(!!!t.url){if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;const e=this.fragCurrent;e&&(this.log("Switching to main audio track, cancel main fragment load"),e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();const e=this.hls;n&&(e.trigger(m1.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null}),this.fragmentTracker.removeAllFragments()),e.trigger(m1.AUDIO_TRACK_SWITCHED,t)}}onAudioTrackSwitched(e,t){const n=t.id,r=!!this.hls.audioTracks[n].url;if(r){const e=this.videoBuffer;e&&this.mediaBuffer!==e&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=e)}this.altAudio=r,this.tick()}onBufferCreated(e,t){const n=t.tracks;let r,i,a=!1;for(const o in n){const e=n[o];if("main"===e.id){if(i=o,r=e,"video"===o){const e=n[o];e&&(this.videoBuffer=e.buffer)}}else a=!0}a&&r?(this.log(`Alternate track found, use ${i}.buffered to schedule main fragment loading`),this.mediaBuffer=r.buffer):this.mediaBuffer=this.media}onFragBuffered(e,t){const{frag:n,part:r}=t;if(n&&n.type!==C3)return;if(this.fragContextChanged(n))return this.warn(`Fragment ${n.sn}${r?" p: "+r.index:""} of level ${n.level} finished buffering, but was aborted. state: ${this.state}`),void(this.state===b5&&(this.state=p5));const i=r?r.stats:n.stats;this.fragLastKbps=Math.round(8*i.total/(i.buffering.end-i.loading.first)),"initSegment"!==n.sn&&(this.fragPrevious=n),this.fragBufferedComplete(n,r)}onError(e,t){var n;if(t.fatal)this.state=E5;else switch(t.details){case v1.FRAG_GAP:case v1.FRAG_PARSING_ERROR:case v1.FRAG_DECRYPT_ERROR:case v1.FRAG_LOAD_ERROR:case v1.FRAG_LOAD_TIMEOUT:case v1.KEY_LOAD_ERROR:case v1.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(C3,t);break;case v1.LEVEL_LOAD_ERROR:case v1.LEVEL_LOAD_TIMEOUT:case v1.LEVEL_PARSING_ERROR:t.levelRetry||this.state!==_5||(null==(n=t.context)?void 0:n.type)!==T3||(this.state=p5);break;case v1.BUFFER_APPEND_ERROR:case v1.BUFFER_FULL_ERROR:if(!t.parent||"main"!==t.parent)return;if(t.details===v1.BUFFER_APPEND_ERROR)return void this.resetLoadingState();this.reduceLengthAndFlushBuffer(t)&&this.flushMainBuffer(0,Number.POSITIVE_INFINITY);break;case v1.INTERNAL_EXCEPTION:this.recoverWorkerError(t)}}checkBuffer(){const{media:e,gapController:t}=this;if(e&&t&&e.readyState){if(this.loadedmetadata||!Y4.getBuffered(e).length){const e=this.state!==p5?this.fragCurrent:null;t.poll(this.lastCurrentTime,e)}this.lastCurrentTime=e.currentTime}}onFragLoadEmergencyAborted(){this.state=p5,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tickImmediate()}onBufferFlushed(e,t){let{type:n}=t;if(n!==I1||this.audioOnly&&!this.altAudio){const e=(n===R1?this.videoBuffer:this.mediaBuffer)||this.media;this.afterBufferFlushed(e,n,C3),this.tick()}}onLevelsUpdated(e,t){this.level>-1&&this.fragCurrent&&(this.level=this.fragCurrent.level),this.levels=t.levels}swapAudioCodec(){this.audioCodecSwap=!this.audioCodecSwap}seekToStartPos(){const{media:e}=this;if(!e)return;const t=e.currentTime;let n=this.startPosition;if(n>=0&&t<n){if(e.seeking)return void this.log(`could not seek to ${n}, already seeking at ${t}`);const r=Y4.getBuffered(e),i=(r.length?r.start(0):0)-n;i>0&&(i<this.config.maxBufferHole||i<this.config.maxFragLookUpTolerance)&&(this.log(`adjusting start position by ${i} to match buffer start`),n+=i,this.startPosition=n),this.log(`seek to target start position ${n} from current time ${t}`),e.currentTime=n}}_getAudioCodec(e){let t=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&t&&(this.log("Swapping audio codec"),t=-1!==t.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),t}_loadBitrateTestFrag(e,t){e.bitrateTest=!0,this._doFragLoad(e,t).then((n=>{const{hls:r}=this;if(!n||this.fragContextChanged(e))return;t.fragmentError=0,this.state=p5,this.startFragRequested=!1,this.bitrateTest=!1;const i=e.stats;i.parsing.start=i.parsing.end=i.buffering.start=i.buffering.end=self.performance.now(),r.trigger(m1.FRAG_LOADED,n),e.bitrateTest=!1}))}_handleTransmuxComplete(e){var t;const n="main",{hls:r}=this,{remuxResult:i,chunkMeta:a}=e,o=this.getCurrentContext(a);if(!o)return void this.resetWhenMissingContext(a);const{frag:s,part:l,level:c}=o,{video:u,text:d,id3:h,initSegment:p}=i,{details:f}=c,m=this.altAudio?void 0:i.audio;if(this.fragContextChanged(s))this.fragmentTracker.removeFragment(s);else{if(this.state=y5,p){if(null!=p&&p.tracks){const e=s.initSegment||s;this._bufferInitSegment(c,p.tracks,e,a),r.trigger(m1.FRAG_PARSING_INIT_SEGMENT,{frag:e,id:n,tracks:p.tracks})}const e=p.initPTS,t=p.timescale;h1(e)&&(this.initPTS[s.cc]={baseTime:e,timescale:t},r.trigger(m1.INIT_PTS_FOUND,{frag:s,id:n,initPTS:e,timescale:t}))}if(u&&f&&"initSegment"!==s.sn){const e=f.fragments[s.sn-1-f.startSN],t=s.sn===f.startSN,n=!e||s.cc>e.cc;if(!1!==i.independent){const{startPTS:e,endPTS:r,startDTS:i,endDTS:o}=u;if(l)l.elementaryStreams[u.type]={startPTS:e,endPTS:r,startDTS:i,endDTS:o};else if(u.firstKeyFrame&&u.independent&&1===a.id&&!n&&(this.couldBacktrack=!0),u.dropped&&u.independent){const i=this.getMainFwdBufferInfo(),a=(i?i.end:this.getLoadPosition())+this.config.maxBufferHole,l=u.firstKeyFramePTS?u.firstKeyFramePTS:e;if(!t&&a<l-this.config.maxBufferHole&&!n)return void this.backtrack(s);n&&(s.gap=!0),s.setElementaryStreamInfo(u.type,s.start,r,s.start,o,!0)}else t&&e>2&&(s.gap=!0);s.setElementaryStreamInfo(u.type,e,r,i,o),this.backtrackFragment&&(this.backtrackFragment=s),this.bufferFragmentData(u,s,l,a,t||n)}else{if(!t&&!n)return void this.backtrack(s);s.gap=!0}}if(m){const{startPTS:e,endPTS:t,startDTS:n,endDTS:r}=m;l&&(l.elementaryStreams[I1]={startPTS:e,endPTS:t,startDTS:n,endDTS:r}),s.setElementaryStreamInfo(I1,e,t,n,r),this.bufferFragmentData(m,s,l,a)}if(f&&null!=h&&null!=(t=h.samples)&&t.length){const e={id:n,frag:s,details:f,samples:h.samples};r.trigger(m1.FRAG_PARSING_METADATA,e)}if(f&&d){const e={id:n,frag:s,details:f,samples:d.samples};r.trigger(m1.FRAG_PARSING_USERDATA,e)}}}_bufferInitSegment(e,t,n,r){if(this.state!==y5)return;this.audioOnly=!!t.audio&&!t.video,this.altAudio&&!this.audioOnly&&delete t.audio;const{audio:i,video:a,audiovideo:o}=t;if(i){let t=e.audioCodec;const n=navigator.userAgent.toLowerCase();if(this.audioCodecSwitch){t&&(t=-1!==t.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5");const e=i.metadata;e&&"channelCount"in e&&1!==(e.channelCount||1)&&-1===n.indexOf("firefox")&&(t="mp4a.40.5")}t&&-1!==t.indexOf("mp4a.40.5")&&-1!==n.indexOf("android")&&"audio/mpeg"!==i.container&&(t="mp4a.40.2",this.log(`Android: force audio codec to ${t}`)),e.audioCodec&&e.audioCodec!==t&&this.log(`Swapping manifest audio codec "${e.audioCodec}" for "${t}"`),i.levelCodec=t,i.id="main",this.log(`Init audio buffer, container:${i.container}, codecs[selected/level/parsed]=[${t||""}/${e.audioCodec||""}/${i.codec}]`)}a&&(a.levelCodec=e.videoCodec,a.id="main",this.log(`Init video buffer, container:${a.container}, codecs[level/parsed]=[${e.videoCodec||""}/${a.codec}]`)),o&&this.log(`Init audiovideo buffer, container:${o.container}, codecs[level/parsed]=[${e.codecs}/${o.codec}]`),this.hls.trigger(m1.BUFFER_CODECS,t),Object.keys(t).forEach((e=>{const i=t[e].initSegment;null!=i&&i.byteLength&&this.hls.trigger(m1.BUFFER_APPENDING,{type:e,data:i,frag:n,part:null,chunkMeta:r,parent:n.type})})),this.tickImmediate()}getMainFwdBufferInfo(){return this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:this.media,C3)}backtrack(e){this.couldBacktrack=!0,this.backtrackFragment=e,this.resetTransmuxer(),this.flushBufferGap(e),this.fragmentTracker.removeFragment(e),this.fragPrevious=null,this.nextLoadPosition=e.start,this.state=p5}checkFragmentChanged(){const e=this.media;let t=null;if(e&&e.readyState>1&&!1===e.seeking){const n=e.currentTime;if(Y4.isBuffered(e,n)?t=this.getAppendedFrag(n):Y4.isBuffered(e,n+.1)&&(t=this.getAppendedFrag(n+.1)),t){this.backtrackFragment=null;const e=this.fragPlaying,n=t.level;e&&t.sn===e.sn&&e.level===n||(this.fragPlaying=t,this.hls.trigger(m1.FRAG_CHANGED,{frag:t}),e&&e.level===n||this.hls.trigger(m1.LEVEL_SWITCHED,{level:n}))}}}get nextLevel(){const e=this.nextBufferedFrag;return e?e.level:-1}get currentFrag(){const e=this.media;return e?this.fragPlaying||this.getAppendedFrag(e.currentTime):null}get currentProgramDateTime(){const e=this.media;if(e){const t=e.currentTime,n=this.currentFrag;if(n&&h1(t)&&h1(n.programDateTime)){const e=n.programDateTime+1e3*(t-n.start);return new Date(e)}}return null}get currentLevel(){const e=this.currentFrag;return e?e.level:-1}get nextBufferedFrag(){const e=this.currentFrag;return e?this.followingBufferedFrag(e):null}get forceStartLoad(){return this._forceStartLoad}}class L8{static get version(){return"1.5.20"}static isMSESupported(){return I8()}static isSupported(){return function(){if(!I8())return!1;const e=e3();return"function"===typeof(null==e?void 0:e.isTypeSupported)&&(["avc1.42E01E,mp4a.40.2","av01.0.01M.08","vp09.00.50.08"].some((t=>e.isTypeSupported(i3(t,"video"))))||["mp4a.40.2","fLaC"].some((t=>e.isTypeSupported(i3(t,"audio")))))}()}static getMediaSource(){return e3()}static get Events(){return m1}static get ErrorTypes(){return g1}static get ErrorDetails(){return v1}static get DefaultConfig(){return L8.defaultConfig?L8.defaultConfig:E8}static set DefaultConfig(e){L8.defaultConfig=e}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.config=void 0,this.userConfig=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this.started=!1,this._emitter=new R6,this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this.url=null,this.triggeringException=void 0,function(e,t){if("object"===typeof console&&!0===e||"object"===typeof e){E1(e,"debug","log","info","warn","error");try{w1.log(`Debug logs enabled for "${t}" in hls.js version 1.5.20`)}catch(Q_){w1=b1}}else w1=b1}(e.debug||!1,"Hls instance");const t=this.config=function(e,t){if((t.liveSyncDurationCount||t.liveMaxLatencyDurationCount)&&(t.liveSyncDuration||t.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(void 0!==t.liveMaxLatencyDurationCount&&(void 0===t.liveSyncDurationCount||t.liveMaxLatencyDurationCount<=t.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(void 0!==t.liveMaxLatencyDuration&&(void 0===t.liveSyncDuration||t.liveMaxLatencyDuration<=t.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');const n=x8(e),r=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return["manifest","level","frag"].forEach((e=>{const i=`${"level"===e?"playlist":e}LoadPolicy`,a=void 0===t[i],o=[];r.forEach((r=>{const s=`${e}Loading${r}`,l=t[s];if(void 0!==l&&a){o.push(s);const e=n[i].default;switch(t[i]={default:e},r){case"TimeOut":e.maxLoadTimeMs=l,e.maxTimeToFirstByteMs=l;break;case"MaxRetry":e.errorRetry.maxNumRetry=l,e.timeoutRetry.maxNumRetry=l;break;case"RetryDelay":e.errorRetry.retryDelayMs=l,e.timeoutRetry.retryDelayMs=l;break;case"MaxRetryTimeout":e.errorRetry.maxRetryDelayMs=l,e.timeoutRetry.maxRetryDelayMs=l}}})),o.length&&x1.warn(`hls.js config: "${o.join('", "')}" setting(s) are deprecated, use "${i}": ${JSON.stringify(t[i])}`)})),l1(l1({},n),t)}(L8.DefaultConfig,e);this.userConfig=e,t.progressive&&_8(t);const{abrController:n,bufferController:r,capLevelController:i,errorController:a,fpsController:o}=t,s=new a(this),l=this.abrController=new n(this),c=this.bufferController=new r(this),u=this.capLevelController=new i(this),d=new o(this),h=new P3(this),p=new q3(this),f=t.contentSteeringController,m=f?new f(this):null,g=this.levelController=new T8(this,m),v=new H4(this),y=new k8(this.config),b=this.streamController=new D8(this,v,y);u.setStreamController(b),d.setStreamController(b);const w=[h,g,b];m&&w.splice(1,0,m),this.networkControllers=w;const E=[l,c,u,d,p,v];this.audioTrackController=this.createController(t.audioTrackController,w);const x=t.audioStreamController;x&&w.push(new x(this,v,y)),this.subtitleTrackController=this.createController(t.subtitleTrackController,w);const _=t.subtitleStreamController;_&&w.push(new _(this,v,y)),this.createController(t.timelineController,E),y.emeController=this.emeController=this.createController(t.emeController,E),this.cmcdController=this.createController(t.cmcdController,E),this.latencyController=this.createController(G3,E),this.coreComponents=E,w.push(s);const A=s.onErrorOut;"function"===typeof A&&this.on(m1.ERROR,A,s)}createController(e,t){if(e){const n=new e(this);return t&&t.push(n),n}return null}on(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this;this._emitter.on(e,t,n)}once(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this;this._emitter.once(e,t,n)}removeAllListeners(e){this._emitter.removeAllListeners(e)}off(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this,r=arguments.length>3?arguments[3]:void 0;this._emitter.off(e,t,n,r)}listeners(e){return this._emitter.listeners(e)}emit(e,t,n){return this._emitter.emit(e,t,n)}trigger(e,t){if(this.config.debug)return this.emit(e,e,t);try{return this.emit(e,e,t)}catch(Rb){if(x1.error("An internal error happened while handling event "+e+'. Error message: "'+Rb.message+'". Here is a stacktrace:',Rb),!this.triggeringException){this.triggeringException=!0;const n=e===m1.ERROR;this.trigger(m1.ERROR,{type:g1.OTHER_ERROR,details:v1.INTERNAL_EXCEPTION,fatal:n,event:e,error:Rb}),this.triggeringException=!1}}return!1}listenerCount(e){return this._emitter.listenerCount(e)}destroy(){x1.log("destroy"),this.trigger(m1.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this.url=null,this.networkControllers.forEach((e=>e.destroy())),this.networkControllers.length=0,this.coreComponents.forEach((e=>e.destroy())),this.coreComponents.length=0;const e=this.config;e.xhrSetup=e.fetchSetup=void 0,this.userConfig=null}attachMedia(e){x1.log("attachMedia"),this._media=e,this.trigger(m1.MEDIA_ATTACHING,{media:e})}detachMedia(){x1.log("detachMedia"),this.trigger(m1.MEDIA_DETACHING,void 0),this._media=null}loadSource(e){this.stopLoad();const t=this.media,n=this.url,r=this.url=o1.buildAbsoluteURL(self.location.href,e,{alwaysNormalize:!0});this._autoLevelCapping=-1,this._maxHdcpLevel=null,x1.log(`loadSource:${r}`),t&&n&&(n!==r||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(t)),this.trigger(m1.MANIFEST_LOADING,{url:e})}startLoad(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;x1.log(`startLoad(${e})`),this.started=!0,this.resumeBuffering();for(let t=0;t<this.networkControllers.length&&(this.networkControllers[t].startLoad(e),this.started&&this.networkControllers);t++);}stopLoad(){x1.log("stopLoad"),this.started=!1;for(let e=0;e<this.networkControllers.length&&(this.networkControllers[e].stopLoad(),!this.started&&this.networkControllers);e++);}resumeBuffering(){x1.log("resume buffering"),this.networkControllers.forEach((e=>{e.resumeBuffering&&e.resumeBuffering()}))}pauseBuffering(){x1.log("pause buffering"),this.networkControllers.forEach((e=>{e.pauseBuffering&&e.pauseBuffering()}))}swapAudioCodec(){x1.log("swapAudioCodec"),this.streamController.swapAudioCodec()}recoverMediaError(){x1.log("recoverMediaError");const e=this._media;this.detachMedia(),e&&this.attachMedia(e)}removeLevel(e){this.levelController.removeLevel(e)}get levels(){const e=this.levelController.levels;return e||[]}get currentLevel(){return this.streamController.currentLevel}set currentLevel(e){x1.log(`set currentLevel:${e}`),this.levelController.manualLevel=e,this.streamController.immediateLevelSwitch()}get nextLevel(){return this.streamController.nextLevel}set nextLevel(e){x1.log(`set nextLevel:${e}`),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}get loadLevel(){return this.levelController.level}set loadLevel(e){x1.log(`set loadLevel:${e}`),this.levelController.manualLevel=e}get nextLoadLevel(){return this.levelController.nextLoadLevel}set nextLoadLevel(e){this.levelController.nextLoadLevel=e}get firstLevel(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)}set firstLevel(e){x1.log(`set firstLevel:${e}`),this.levelController.firstLevel=e}get startLevel(){const e=this.levelController.startLevel;return-1===e&&this.abrController.forcedAutoLevel>-1?this.abrController.forcedAutoLevel:e}set startLevel(e){x1.log(`set startLevel:${e}`),-1!==e&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}get capLevelToPlayerSize(){return this.config.capLevelToPlayerSize}set capLevelToPlayerSize(e){const t=!!e;t!==this.config.capLevelToPlayerSize&&(t?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=t)}get autoLevelCapping(){return this._autoLevelCapping}get bandwidthEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimate():NaN}set bandwidthEstimate(e){this.abrController.resetEstimator(e)}get ttfbEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimateTTFB():NaN}set autoLevelCapping(e){this._autoLevelCapping!==e&&(x1.log(`set autoLevelCapping:${e}`),this._autoLevelCapping=e,this.levelController.checkMaxAutoUpdated())}get maxHdcpLevel(){return this._maxHdcpLevel}set maxHdcpLevel(e){(function(e){return K3.indexOf(e)>-1})(e)&&this._maxHdcpLevel!==e&&(this._maxHdcpLevel=e,this.levelController.checkMaxAutoUpdated())}get autoLevelEnabled(){return-1===this.levelController.manualLevel}get manualLevel(){return this.levelController.manualLevel}get minAutoLevel(){const{levels:e,config:{minAutoBitrate:t}}=this;if(!e)return 0;const n=e.length;for(let r=0;r<n;r++)if(e[r].maxBitrate>=t)return r;return 0}get maxAutoLevel(){const{levels:e,autoLevelCapping:t,maxHdcpLevel:n}=this;let r;if(r=-1===t&&null!=e&&e.length?e.length-1:t,n)for(let i=r;i--;){const t=e[i].attrs["HDCP-LEVEL"];if(t&&t<=n)return i}return r}get firstAutoLevel(){return this.abrController.firstAutoLevel}get nextAutoLevel(){return this.abrController.nextAutoLevel}set nextAutoLevel(e){this.abrController.nextAutoLevel=e}get playingDate(){return this.streamController.currentProgramDateTime}get mainForwardBufferInfo(){return this.streamController.getMainFwdBufferInfo()}setAudioOption(e){var t;return null==(t=this.audioTrackController)?void 0:t.setAudioOption(e)}setSubtitleOption(e){var t;return null==(t=this.subtitleTrackController)||t.setSubtitleOption(e),null}get allAudioTracks(){const e=this.audioTrackController;return e?e.allAudioTracks:[]}get audioTracks(){const e=this.audioTrackController;return e?e.audioTracks:[]}get audioTrack(){const e=this.audioTrackController;return e?e.audioTrack:-1}set audioTrack(e){const t=this.audioTrackController;t&&(t.audioTrack=e)}get allSubtitleTracks(){const e=this.subtitleTrackController;return e?e.allSubtitleTracks:[]}get subtitleTracks(){const e=this.subtitleTrackController;return e?e.subtitleTracks:[]}get subtitleTrack(){const e=this.subtitleTrackController;return e?e.subtitleTrack:-1}get media(){return this._media}set subtitleTrack(e){const t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}get subtitleDisplay(){const e=this.subtitleTrackController;return!!e&&e.subtitleDisplay}set subtitleDisplay(e){const t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}get lowLatencyMode(){return this.config.lowLatencyMode}set lowLatencyMode(e){this.config.lowLatencyMode=e}get liveSyncPosition(){return this.latencyController.liveSyncPosition}get latency(){return this.latencyController.latency}get maxLatency(){return this.latencyController.maxLatency}get targetLatency(){return this.latencyController.targetLatency}get drift(){return this.latencyController.drift}get forceStartLoad(){return this.streamController.forceStartLoad}}L8.defaultConfig=void 0;var P8=L8,M8="video",N8="drm",O8={NOT_AN_ERROR:0,NETWORK_OFFLINE:2000002,NETWORK_UNKNOWN_ERROR:2e6,NETWORK_NO_STATUS:2000001,NETWORK_INVALID_URL:24e5,NETWORK_NOT_FOUND:2404e3,NETWORK_NOT_READY:2412e3,NETWORK_GENERIC_SERVER_FAIL:25e5,NETWORK_TOKEN_MISSING:2403201,NETWORK_TOKEN_MALFORMED:2412202,NETWORK_TOKEN_EXPIRED:2403210,NETWORK_TOKEN_AUD_MISSING:2403221,NETWORK_TOKEN_AUD_MISMATCH:2403222,NETWORK_TOKEN_SUB_MISMATCH:2403232,ENCRYPTED_ERROR:5e6,ENCRYPTED_UNSUPPORTED_KEY_SYSTEM:5000001,ENCRYPTED_GENERATE_REQUEST_FAILED:5000002,ENCRYPTED_UPDATE_LICENSE_FAILED:5000003,ENCRYPTED_UPDATE_SERVER_CERT_FAILED:5000004,ENCRYPTED_CDM_ERROR:5000005,ENCRYPTED_OUTPUT_RESTRICTED:5000006,ENCRYPTED_MISSING_TOKEN:5000002},j8=e=>e===M8?"playback":e,F8=class e extends Error{constructor(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.MEDIA_ERR_CUSTOM,r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;var a;super(t),this.name="MediaError",this.code=n,this.context=i,this.fatal=null!=r?r:n>=e.MEDIA_ERR_NETWORK&&n<=e.MEDIA_ERR_ENCRYPTED,this.message||(this.message=null!=(a=e.defaultMessages[this.code])?a:"")}};F8.MEDIA_ERR_ABORTED=1,F8.MEDIA_ERR_NETWORK=2,F8.MEDIA_ERR_DECODE=3,F8.MEDIA_ERR_SRC_NOT_SUPPORTED=4,F8.MEDIA_ERR_ENCRYPTED=5,F8.MEDIA_ERR_CUSTOM=100,F8.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail.",3:"A media error caused playback to be aborted. The media could be corrupt or your browser does not support this format.",4:"An unsupported error occurred. The server or network failed, or your browser does not support this format.",5:"The media is encrypted and there are no keys to decrypt it."};var U8=F8,B8=(e,t)=>!(e=>null==e)(t)&&e in t,$8={ANY:"any",MUTED:"muted"},V8={ON_DEMAND:"on-demand",LIVE:"live",UNKNOWN:"unknown"},W8="mse",z8="native",H8={HEADER:"header",QUERY:"query",NONE:"none"},q8=Object.values(H8),G8={M3U8:"application/vnd.apple.mpegurl",MP4:"video/mp4"},K8={HLS:G8.M3U8},Y8=(Object.keys(K8),Object.values(G8),{code:"en"}),Q8=function(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e;i.addEventListener(t,n,r),e.addEventListener("teardown",(()=>{i.removeEventListener(t,n)}),{once:!0})};var X8=e=>{let t=e.indexOf("?");return t<0?[e]:[e.slice(0,t),e.slice(t)]},Z8=e=>{let{type:t}=e;if(t){let e=t.toUpperCase();return B8(e,K8)?K8[e]:t}return t7(e)},J8=e=>"VOD"===e?V8.ON_DEMAND:V8.LIVE,e7=e=>"EVENT"===e?Number.POSITIVE_INFINITY:"VOD"===e?Number.NaN:0,t7=e=>{let{src:t}=e;if(!t)return"";let n="";try{n=new URL(t).pathname}catch{console.error("invalid url")}let r=n.lastIndexOf(".");if(r<0)return r7(e)?G8.M3U8:"";let i=n.slice(r+1).toUpperCase();return B8(i,G8)?G8[i]:""},n7="mux.com",r7=e=>{let t,{src:n,customDomain:r=n7}=e;try{t=new URL(`${n}`)}catch{return!1}let i="https:"===t.protocol,a=t.hostname===`stream.${r}`.toLowerCase(),o=t.pathname.split("/"),s=2===o.length,l=!(null!=o&&o[1].includes("."));return i&&a&&s&&l},i7=e=>{let t=(null!=e?e:"").split(".")[1];if(t)try{let e=t.replace(/-/g,"+").replace(/_/g,"/"),n=decodeURIComponent(atob(e).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""));return JSON.parse(n)}catch{return}};function a7(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];var n,r;let i=t&&null!=(r=null==(n=Y8)?void 0:n[e])?r:e;return new o7(i,t?Y8.code:"en")}var o7=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e=>null!=(e=Y8)?e:"en")();this.message=e,this.locale=t}format(e){return this.message.replace(/\{(\w+)\}/g,((t,n)=>{var r;return null!=(r=e[n])?r:""}))}toString(){return this.message}},s7=Object.values($8),l7=e=>"boolean"==typeof e||"string"==typeof e&&s7.includes(e),c7=(e,t)=>{if(!t)return;let n=e.muted,r=()=>e.muted=n;switch(t){case $8.ANY:e.play().catch((()=>{e.muted=!0,e.play().catch(r)}));break;case $8.MUTED:e.muted=!0,e.play().catch(r);break;default:e.play().catch((()=>{}))}};function u7(e,t){var n;if(!("videoTracks"in e))return;let r=new WeakMap;t.on(P8.Events.MANIFEST_PARSED,(function(t,n){o();let i=e.addVideoTrack("main");i.selected=!0;for(let[e,a]of n.levels.entries()){let t=i.addRendition(a.url[0],a.width,a.height,a.videoCodec,a.bitrate);r.set(a,`${e}`),t.id=`${e}`}})),t.on(P8.Events.AUDIO_TRACKS_UPDATED,(function(t,n){a();for(let r of n.audioTracks){let t=r.default?"main":"alternative",n=e.addAudioTrack(t,r.name,r.lang);n.id=`${r.id}`,r.default&&(n.enabled=!0)}})),e.audioTracks.addEventListener("change",(()=>{var n;let r=+(null==(n=[...e.audioTracks].find((e=>e.enabled)))?void 0:n.id),i=t.audioTracks.map((e=>e.id));r!=t.audioTrack&&i.includes(r)&&(t.audioTrack=r)})),t.on(P8.Events.LEVELS_UPDATED,(function(t,n){var i;let a=e.videoTracks[null!=(i=e.videoTracks.selectedIndex)?i:0];if(!a)return;let o=n.levels.map((e=>r.get(e)));for(let r of e.videoRenditions)r.id&&!o.includes(r.id)&&a.removeRendition(r)}));let i=n=>{let r=e.currentTime,i=!1,a=(e,t)=>{i||(i=!Number.isFinite(t.endOffset))};t.on(P8.Events.BUFFER_FLUSHING,a),t.nextLevel=n,t.off(P8.Events.BUFFER_FLUSHING,a),i||t.trigger(P8.Events.BUFFER_FLUSHING,{startOffset:r+10,endOffset:1/0,type:"video"})};null==(n=e.videoRenditions)||n.addEventListener("change",(e=>{let n=e.target.selectedIndex;n!=t.nextLevel&&i(n)}));let a=()=>{for(let t of e.audioTracks)e.removeAudioTrack(t)},o=()=>{(()=>{for(let t of e.videoTracks)e.removeVideoTrack(t)})(),a()};t.once(P8.Events.DESTROYING,o)}var d7=e=>"time"in e?e.time:e.startTime;function h7(e,t,n,r,i,a){let o=document.createElement("track");return o.kind=t,o.label=n,r&&(o.srclang=r),i&&(o.id=i),a&&(o.default=!0),o.track.mode=["subtitles","captions"].includes(t)?"disabled":"hidden",o.setAttribute("data-removeondestroy",""),e.append(o),o.track}function p7(e,t,n){var r;return null==(r=Array.from(e.querySelectorAll("track")).find((e=>e.track.label===t&&e.track.kind===n)))?void 0:r.track}async function f7(e,t,n,r){let i=p7(e,n,r);return i||(i=h7(e,r,n),i.mode="hidden",await new Promise((e=>setTimeout((()=>e(void 0)),0)))),"hidden"!==i.mode&&(i.mode="hidden"),[...t].sort(((e,t)=>d7(t)-d7(e))).forEach((t=>{var n,a;let o=t.value,s=d7(t);if("endTime"in t&&null!=t.endTime)null==i||i.addCue(new VTTCue(s,t.endTime,"chapters"===r?o:JSON.stringify(null!=o?o:null)));else{let t=Array.prototype.findIndex.call(null==i?void 0:i.cues,(e=>e.startTime>=s)),l=null==(n=null==i?void 0:i.cues)?void 0:n[t],c=l?l.startTime:Number.isFinite(e.duration)?e.duration:Number.MAX_SAFE_INTEGER,u=null==(a=null==i?void 0:i.cues)?void 0:a[t-1];u&&(u.endTime=s),null==i||i.addCue(new VTTCue(s,c,"chapters"===r?o:JSON.stringify(null!=o?o:null)))}})),e.textTracks.dispatchEvent(new Event("change",{bubbles:!0,composed:!0})),i}var m7="cuepoints",g7=Object.freeze({label:m7});async function v7(e,t){return f7(e,t,(arguments.length>2&&void 0!==arguments[2]?arguments[2]:g7).label,"metadata")}var y7=e=>({time:e.startTime,value:JSON.parse(e.text)});function b7(e){var t,n;let r=p7(e,(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{label:m7}).label,"metadata");if(null==(t=null==r?void 0:r.activeCues)||!t.length)return;if(1===r.activeCues.length)return y7(r.activeCues[0]);let{currentTime:i}=e,a=Array.prototype.find.call(null!=(n=r.activeCues)?n:[],(e=>{let{startTime:t,endTime:n}=e;return t<=i&&n>i}));return y7(a||r.activeCues[0])}var w7="chapters",E7=Object.freeze({label:w7}),x7=e=>({startTime:e.startTime,endTime:e.endTime,value:e.text});async function _7(e,t){return f7(e,t,(arguments.length>2&&void 0!==arguments[2]?arguments[2]:E7).label,"chapters")}function A7(e){var t,n;let r=p7(e,(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{label:w7}).label,"chapters");if(null==(t=null==r?void 0:r.activeCues)||!t.length)return;if(1===r.activeCues.length)return x7(r.activeCues[0]);let{currentTime:i}=e,a=Array.prototype.find.call(null!=(n=r.activeCues)?n:[],(e=>{let{startTime:t,endTime:n}=e;return t<=i&&n>i}));return x7(a||r.activeCues[0])}var T7="v",S7="t",k7="s",C7="d",I7=function(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:!(e=>null==(e=globalThis.navigator)?void 0:e.onLine)();var o,s;if(a){let n,r=a7("Your device appears to be offline",i),a=U8.MEDIA_ERR_NETWORK,o=new U8(r,a,!1,n);return o.errorCategory=t,o.muxCode=O8.NETWORK_OFFLINE,o.data=e,o}let l="status"in e?e.status:e.code,c=Date.now(),u=U8.MEDIA_ERR_NETWORK;if(200===l)return;let d=j8(t),h=((e,t)=>{var n,r;let i=j8(e),a=`${i}Token`;return null!=(n=t.tokens)&&n[i]?null==(r=t.tokens)?void 0:r[i]:B8(a,t)?t[a]:void 0})(t,n),p=(e=>e===M8?T7:e===N8?C7:void 0)(t),[f]=X8(null!=(o=n.playbackId)?o:"");if(!l||!f)return;let m=i7(h);if(h&&!m){let n=a7("The {tokenNamePrefix}-token provided is invalid or malformed.",i).format({tokenNamePrefix:d}),r=a7("Compact JWT string: {token}",i).format({token:h}),a=new U8(n,u,!0,r);return a.errorCategory=t,a.muxCode=O8.NETWORK_TOKEN_MALFORMED,a.data=e,a}if(l>=500){let e=new U8("",u,null==r||r);return e.errorCategory=t,e.muxCode=O8.NETWORK_UNKNOWN_ERROR,e}if(403===l){if(!m){let n=a7("Authorization error trying to access this {category} URL. If this is a signed URL, you might need to provide a {tokenNamePrefix}-token.",i).format({tokenNamePrefix:d,category:t}),a=a7("Specified playback ID: {playbackId}",i).format({playbackId:f}),o=new U8(n,u,null==r||r,a);return o.errorCategory=t,o.muxCode=O8.NETWORK_TOKEN_MISSING,o.data=e,o}if(function(e){let{exp:t}=e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();return!t||1e3*t<n}(m,c)){let n={timeStyle:"medium",dateStyle:"medium"},r=a7("The video\u2019s secured {tokenNamePrefix}-token has expired.",i).format({tokenNamePrefix:d}),a=a7("Expired at: {expiredDate}. Current time: {currentDate}.",i).format({expiredDate:new Intl.DateTimeFormat("en",n).format(null!=(s=m.exp)?s:0),currentDate:new Intl.DateTimeFormat("en",n).format(c)}),o=new U8(r,u,!0,a);return o.errorCategory=t,o.muxCode=O8.NETWORK_TOKEN_EXPIRED,o.data=e,o}if(((e,t)=>{let{sub:n}=e;return n!==t})(m,f)){let n=a7("The video\u2019s playback ID does not match the one encoded in the {tokenNamePrefix}-token.",i).format({tokenNamePrefix:d}),r=a7("Specified playback ID: {playbackId} and the playback ID encoded in the {tokenNamePrefix}-token: {tokenPlaybackId}",i).format({tokenNamePrefix:d,playbackId:f,tokenPlaybackId:m.sub}),a=new U8(n,u,!0,r);return a.errorCategory=t,a.muxCode=O8.NETWORK_TOKEN_SUB_MISMATCH,a.data=e,a}if((e=>{let{aud:t}=e;return!t})(m)){let n=a7("The {tokenNamePrefix}-token is formatted with incorrect information.",i).format({tokenNamePrefix:d}),r=a7("The {tokenNamePrefix}-token has no aud value. aud value should be {expectedAud}.",i).format({tokenNamePrefix:d,expectedAud:p}),a=new U8(n,u,!0,r);return a.errorCategory=t,a.muxCode=O8.NETWORK_TOKEN_AUD_MISSING,a.data=e,a}if(((e,t)=>{let{aud:n}=e;return n!==t})(m,p)){let n=a7("The {tokenNamePrefix}-token is formatted with incorrect information.",i).format({tokenNamePrefix:d}),r=a7("The {tokenNamePrefix}-token has an incorrect aud value: {aud}. aud value should be {expectedAud}.",i).format({tokenNamePrefix:d,expectedAud:p,aud:m.aud}),a=new U8(n,u,!0,r);return a.errorCategory=t,a.muxCode=O8.NETWORK_TOKEN_AUD_MISMATCH,a.data=e,a}}if(412===l){let n=a7("This playback-id may belong to a live stream that is not currently active or an asset that is not ready.",i),a=a7("Specified playback ID: {playbackId}",i).format({playbackId:f}),o=new U8(n,u,null==r||r,a);return o.errorCategory=t,o.muxCode=O8.NETWORK_NOT_READY,o.data=e,o}if(404===l){let n=a7("This URL or playback-id does not exist. You may have used an Asset ID or an ID from a different resource.",i),a=a7("Specified playback ID: {playbackId}",i).format({playbackId:f}),o=new U8(n,u,null==r||r,a);return o.errorCategory=t,o.muxCode=O8.NETWORK_NOT_FOUND,o.data=e,o}if(400===l){let n=a7("The URL or playback-id was invalid. You may have used an invalid value as a playback-id."),a=a7("Specified playback ID: {playbackId}",i).format({playbackId:f}),o=new U8(n,u,null==r||r,a);return o.errorCategory=t,o.muxCode=O8.NETWORK_INVALID_URL,o.data=e,o}let g=new U8("",u,null==r||r);return g.errorCategory=t,g.muxCode=O8.NETWORK_UNKNOWN_ERROR,g.data=e,g},R7=P8.DefaultConfig.capLevelController,D7=class e extends R7{constructor(e){super(e)}get levels(){var e;return null!=(e=this.hls.levels)?e:[]}getValidLevels(e){return this.levels.filter(((t,n)=>this.isLevelAllowed(t)&&n<=e))}getMaxLevel(t){let n=super.getMaxLevel(t),r=this.getValidLevels(t);if(!r[n])return n;let i=Math.min(r[n].width,r[n].height),a=e.minMaxResolution;return i>=a?n:R7.getMaxLevelByMediaSize(r,a*(16/9),a)}};D7.minMaxResolution=720;var L7,P7,M7,N7,O7,j7,F7,U7=D7,B7="fairplay",$7="playready",V7="widevine",W7=async(e,t)=>{if(t===G8.MP4)return{streamType:V8.ON_DEMAND,targetLiveWindow:Number.NaN,liveEdgeStartOffset:void 0};if(t===G8.M3U8){let t=await(async e=>fetch(e).then((e=>200!==e.status?Promise.reject(e):e.text())).then((e=>{let t=e.split("\n").find(((e,t,n)=>t&&n[t-1].startsWith("#EXT-X-STREAM-INF")));return fetch(t).then((e=>200!==e.status?Promise.reject(e):e.text())).then((e=>e.split("\n")))})))(e);return(e=>{var t,n,r;let i,a=null==(n=(null!=(t=e.find((e=>e.startsWith("#EXT-X-PLAYLIST-TYPE"))))?t:"").split(":")[1])?void 0:n.trim(),o=J8(a),s=e7(a);if(o===V8.LIVE){let t=e.find((e=>e.startsWith("#EXT-X-PART-INF")));if(t)i=2*+t.split(":")[1].split("=")[1];else{let t=e.find((e=>e.startsWith("#EXT-X-TARGETDURATION"))),n=null==(r=null==t?void 0:t.split(":"))?void 0:r[1];i=3*+(null!=n?n:6)}}return{streamType:o,targetLiveWindow:s,liveEdgeStartOffset:i}})(t)}return console.error(`Media type ${t} is an unrecognized or unsupported type for src ${e}.`),{streamType:void 0,targetLiveWindow:void 0,liveEdgeStartOffset:void 0}},z7=(e,t,n)=>{var r,i,a,o,s,l,c,u;let{streamType:d,targetLiveWindow:h,liveEdgeStartOffset:p,lowLatency:f}=(e=>{var t;let n,r=e.type,i=J8(r),a=e7(r),o=!(null==(t=e.partList)||!t.length);return i===V8.LIVE&&(n=o?2*e.partTarget:3*e.targetduration),{streamType:i,targetLiveWindow:a,liveEdgeStartOffset:n,lowLatency:o}})(e);if(d===V8.LIVE){f?(n.config.backBufferLength=null!=(r=n.userConfig.backBufferLength)?r:4,n.config.maxFragLookUpTolerance=null!=(i=n.userConfig.maxFragLookUpTolerance)?i:.001,n.config.abrBandWidthUpFactor=null!=(a=n.userConfig.abrBandWidthUpFactor)?a:n.config.abrBandWidthFactor):n.config.backBufferLength=null!=(o=n.userConfig.backBufferLength)?o:8;let e=Object.freeze({get length(){return t.seekable.length},start:e=>t.seekable.start(e),end(e){var r;return e>this.length||e<0||Number.isFinite(t.duration)?t.seekable.end(e):null!=(r=n.liveSyncPosition)?r:t.seekable.end(e)}});(null!=(s=K7.get(t))?s:{}).seekable=e}(null!=(l=K7.get(t))?l:{}).liveEdgeStartOffset=p,(null!=(c=K7.get(t))?c:{}).targetLiveWindow=h,t.dispatchEvent(new CustomEvent("targetlivewindowchange",{composed:!0,bubbles:!0})),(null!=(u=K7.get(t))?u:{}).streamType=d,t.dispatchEvent(new CustomEvent("streamtypechange",{composed:!0,bubbles:!0}))},H7=null!=(P7=null==(L7=null==globalThis?void 0:globalThis.navigator)?void 0:L7.userAgent)?P7:"",q7=null!=(O7=null==(N7=null==(M7=null==globalThis?void 0:globalThis.navigator)?void 0:M7.userAgentData)?void 0:N7.platform)?O7:"",G7=H7.toLowerCase().includes("android")||["x11","android"].some((e=>q7.toLowerCase().includes(e))),K7=new WeakMap,Y7="mux.com",Q7=null==(F7=(j7=P8).isSupported)?void 0:F7.call(j7),X7=G7,Z7=()=>n1.utils.now(),J7=n1.utils.generateUUID,eee=function(){let{playbackId:e,customDomain:t=Y7,maxResolution:n,minResolution:r,renditionOrder:i,programStartTime:a,programEndTime:o,assetStartTime:s,assetEndTime:l,playbackToken:c,tokens:{playback:u=c}={},extraSourceParams:d={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e)return;let[h,p=""]=X8(e),f=new URL(`https://stream.${t}/${h}.m3u8${p}`);return u||f.searchParams.has("token")?(f.searchParams.forEach(((e,t)=>{"token"!=t&&f.searchParams.delete(t)})),u&&f.searchParams.set("token",u)):(n&&f.searchParams.set("max_resolution",n),r&&(f.searchParams.set("min_resolution",r),n&&+n.slice(0,-1)<+r.slice(0,-1)&&console.error("minResolution must be <= maxResolution","minResolution",r,"maxResolution",n)),i&&f.searchParams.set("rendition_order",i),a&&f.searchParams.set("program_start_time",`${a}`),o&&f.searchParams.set("program_end_time",`${o}`),s&&f.searchParams.set("asset_start_time",`${s}`),l&&f.searchParams.set("asset_end_time",`${l}`),Object.entries(d).forEach((e=>{let[t,n]=e;null!=n&&f.searchParams.set(t,n)}))),f.toString()},tee=e=>{if(!e)return;let[t]=e.split("?");return t||void 0},nee=e=>{if(!e||!e.startsWith("https://stream."))return;let[t]=new URL(e).pathname.slice(1).split(".m3u8");return t||void 0},ree=e=>{var t;return null==(t=K7.get(e))?void 0:t.error},iee=e=>{var t,n;return null!=(n=null==(t=K7.get(e))?void 0:t.streamType)?n:V8.UNKNOWN},aee=e=>{var t,n;return null!=(n=null==(t=K7.get(e))?void 0:t.seekable)?n:e.seekable},oee=.034,see=function(e,t){return e>t||function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:oee;return Math.abs(e-t)<=n}(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:oee)},lee=(e,t)=>{var n,r,i;if(!t||!e.buffered.length)return;if(e.readyState>2)return!1;let a=t.currentLevel>=0?null==(r=null==(n=t.levels)?void 0:n[t.currentLevel])?void 0:r.details:null==(i=t.levels.find((e=>!!e.details)))?void 0:i.details;if(!a||a.live)return;let{fragments:o}=a;if(null==o||!o.length)return;if(e.currentTime<e.duration-(a.targetduration+.5))return!1;let s=o[o.length-1];if(e.currentTime<=s.start)return!1;let l=s.start+s.duration/2,c=e.buffered.start(e.buffered.length-1),u=e.buffered.end(e.buffered.length-1);return l>c&&l<u},cee=(e,t)=>e.ended||e.loop?e.ended:!(!t||!lee(e,t))||function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:oee;return e.paused&&see(e.currentTime,e.duration,t)}(e),uee=(e,t,n)=>{dee(t,n);let{metadata:r={}}=e,{view_session_id:i=J7()}=r,a=(e=>{var t,n,r;return null!=(t=null==e?void 0:e.metadata)&&t.video_id?e.metadata.video_id:bee(e)&&null!=(r=null!=(n=tee(e.playbackId))?n:nee(e.src))?r:e.src})(e);r.view_session_id=i,r.video_id=a,e.metadata=r;e.drmTypeCb=e=>{var n;null==(n=t.mux)||n.emit("hb",{view_drm_type:e})},K7.set(t,{});let o=pee(e,t),s=((e,t,n)=>{let{preload:r,src:i}=e,a=e=>{null!=e&&["","none","metadata","auto"].includes(e)?t.setAttribute("preload",e):t.removeAttribute("preload")};if(!n)return a(r),a;let o=!1,s=!1,l=n.config.maxBufferLength,c=n.config.maxBufferSize,u=e=>{a(e);let r=null!=e?e:t.preload;s||"none"===r||("metadata"===r?(n.config.maxBufferLength=1,n.config.maxBufferSize=1):(n.config.maxBufferLength=l,n.config.maxBufferSize=c),d())},d=()=>{!o&&i&&(o=!0,n.loadSource(i))};return Q8(t,"play",(()=>{s=!0,n.config.maxBufferLength=l,n.config.maxBufferSize=c,d()}),{once:!0}),u(r),u})(e,t,o);wee(e,t,o),Eee(e,t,o),async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g7;new Promise((n=>{Q8(e,"loadstart",(async()=>{let r=await v7(e,[],t);Q8(e,"cuechange",(()=>{let t=b7(e);if(t){let n=new CustomEvent("cuepointchange",{composed:!0,bubbles:!0,detail:t});e.dispatchEvent(n)}}),{},r),n(r)}))}))}(t),async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:E7;new Promise((n=>{Q8(e,"loadstart",(async()=>{let r=await _7(e,[],t);Q8(e,"cuechange",(()=>{let t=A7(e);if(t){let n=new CustomEvent("chapterchange",{composed:!0,bubbles:!0,detail:t});e.dispatchEvent(n)}}),{},r),n(r)}))}))}(t);let l=((e,t,n)=>{let{autoplay:r}=e,i=!1,a=!1,o=l7(r)?r:!!r,s=()=>{i||Q8(t,"playing",(()=>{i=!0}),{once:!0})};if(s(),Q8(t,"loadstart",(()=>{i=!1,s(),c7(t,o)}),{once:!0}),Q8(t,"loadstart",(()=>{n||(a=e.streamType&&e.streamType!==V8.UNKNOWN?e.streamType===V8.LIVE:!Number.isFinite(t.duration)),c7(t,o)}),{once:!0}),n&&n.once(P8.Events.LEVEL_LOADED,((t,n)=>{var r;a=e.streamType&&e.streamType!==V8.UNKNOWN?e.streamType===V8.LIVE:null!=(r=n.details.live)&&r})),!o){let r=()=>{!a||Number.isFinite(e.startTime)||(null!=n&&n.liveSyncPosition?t.currentTime=n.liveSyncPosition:Number.isFinite(t.seekable.end(0))&&(t.currentTime=t.seekable.end(0)))};n&&Q8(t,"play",(()=>{"metadata"===t.preload?n.once(P8.Events.LEVEL_UPDATED,r):r()}),{once:!0})}return e=>{i||(o=l7(e)?e:!!e,c7(t,o))}})(e,t,o);return{engine:o,setAutoplay:l,setPreload:s}},dee=(e,t)=>{let n=null==t?void 0:t.engine;n&&(n.detachMedia(),n.destroy()),null!=e&&e.mux&&!e.mux.deleted&&(e.mux.destroy(),delete e.mux),e&&(e.removeAttribute("src"),e.load(),e.removeEventListener("error",_ee),e.removeEventListener("error",Tee),e.removeEventListener("durationchange",xee),K7.delete(e),e.dispatchEvent(new Event("teardown")))};function hee(e,t){var n;let r=Z8(e);if(r!==G8.M3U8)return!0;let i=!r||null==(n=t.canPlayType(r))||n,{preferPlayback:a}=e;return i&&(a===z8||!(Q7&&(a===W8||X7)))}var pee=(e,t)=>{let{debug:n,streamType:r,startTime:i=-1,metadata:a,preferCmcd:o,_hlsConfig:s={}}=e,l=Z8(e)===G8.M3U8,c=hee(e,t);if(l&&!c&&Q7){let t={backBufferLength:30,renderTextTracksNatively:!1,liveDurationInfinity:!0,capLevelToPlayerSize:!0,capLevelOnFPSDrop:!0},l=fee(r),c=mee(e),u=o!==H8.NONE?{useHeaders:o===H8.HEADER,sessionId:null==a?void 0:a.view_session_id,contentId:null==a?void 0:a.video_id}:void 0;return new P8({debug:n,startPosition:i,cmcd:u,xhrSetup:(e,t)=>{var n,r;if(o&&o!==H8.QUERY)return;let i=new URL(t);if(!i.searchParams.has("CMCD"))return;let a=(null!=(r=null==(n=i.searchParams.get("CMCD"))?void 0:n.split(","))?r:[]).filter((e=>e.startsWith("sid")||e.startsWith("cid"))).join(",");i.searchParams.set("CMCD",a),e.open("GET",i)},capLevelController:U7,...t,...l,...c,...s})}},fee=e=>e===V8.LIVE?{backBufferLength:8}:{},mee=e=>{let{tokens:{drm:t}={},playbackId:n,drmTypeCb:r}=e,i=tee(n);return t&&i?{emeEnabled:!0,drmSystems:{"com.apple.fps":{licenseUrl:vee(e,"fairplay"),serverCertificateUrl:yee(e,"fairplay")},"com.widevine.alpha":{licenseUrl:vee(e,"widevine")},"com.microsoft.playready":{licenseUrl:vee(e,"playready")}},requestMediaKeySystemAccessFunc:(e,t)=>("com.widevine.alpha"===e&&(t=[...t.map((e=>{var t;let n=null==(t=e.videoCapabilities)?void 0:t.map((e=>({...e,robustness:"HW_SECURE_ALL"})));return{...e,videoCapabilities:n}})),...t]),navigator.requestMediaKeySystemAccess(e,t).then((t=>{let n=(e=>e.includes("fps")?B7:e.includes("playready")?$7:e.includes("widevine")?V7:void 0)(e);return null==r||r(n),t})))}:{}},gee=(e,t)=>{Q8(t,"encrypted",(async n=>{try{let r=n.initDataType;if("skd"!==r)return void console.error(`Received unexpected initialization data type "${r}"`);if(!t.mediaKeys){let n=await navigator.requestMediaKeySystemAccess("com.apple.fps",[{initDataTypes:[r],videoCapabilities:[{contentType:"application/vnd.apple.mpegurl",robustness:""}],distinctiveIdentifier:"not-allowed",persistentState:"not-allowed",sessionTypes:["temporary"]}]).then((t=>{var n;return null==(n=e.drmTypeCb)||n.call(e,B7),t})).catch((()=>{let e=a7("Cannot play DRM-protected content with current security configuration on this browser. Try playing in another browser."),n=new U8(e,U8.MEDIA_ERR_ENCRYPTED,!0);n.errorCategory=N8,n.muxCode=O8.ENCRYPTED_UNSUPPORTED_KEY_SYSTEM,Aee(t,n)}));if(!n)return;let i=await n.createMediaKeys();try{let t=await(async e=>{let t=await fetch(e);return 200!==t.status?Promise.reject(t):await t.arrayBuffer()})(yee(e,"fairplay")).catch((t=>{if(t instanceof Response){let n=I7(t,N8,e);return console.error("mediaError",null==n?void 0:n.message,null==n?void 0:n.context),n?Promise.reject(n):Promise.reject(new Error("Unexpected error in app cert request"))}return Promise.reject(t)}));await i.setServerCertificate(t).catch((()=>{let e=a7("Your server certificate failed when attempting to set it. This may be an issue with a no longer valid certificate."),t=new U8(e,U8.MEDIA_ERR_ENCRYPTED,!0);return t.errorCategory=N8,t.muxCode=O8.ENCRYPTED_UPDATE_SERVER_CERT_FAILED,Promise.reject(t)}))}catch(oA){return void Aee(t,oA)}await t.setMediaKeys(i)}let i=n.initData;if(null==i)return void console.error(`Could not start encrypted playback due to missing initData in ${n.type} event`);let a=t.mediaKeys.createSession();a.addEventListener("keystatuseschange",(()=>{a.keyStatuses.forEach((e=>{let n;if("internal-error"===e){let e=a7("The DRM Content Decryption Module system had an internal failure. Try reloading the page, upading your browser, or playing in another browser.");n=new U8(e,U8.MEDIA_ERR_ENCRYPTED,!0),n.errorCategory=N8,n.muxCode=O8.ENCRYPTED_CDM_ERROR}else if("output-restricted"===e||"output-downscaled"===e){let e=a7("DRM playback is being attempted in an environment that is not sufficiently secure. User may see black screen.");n=new U8(e,U8.MEDIA_ERR_ENCRYPTED,!1),n.errorCategory=N8,n.muxCode=O8.ENCRYPTED_OUTPUT_RESTRICTED}n&&Aee(t,n)}))}));let o=await Promise.all([a.generateRequest(r,i).catch((()=>{let e=a7("Failed to generate a DRM license request. This may be an issue with the player or your protected content."),n=new U8(e,U8.MEDIA_ERR_ENCRYPTED,!0);n.errorCategory=N8,n.muxCode=O8.ENCRYPTED_GENERATE_REQUEST_FAILED,Aee(t,n)})),new Promise((e=>{a.addEventListener("message",(t=>{e(t.message)}),{once:!0})}))]).then((e=>{let[,t]=e;return t})),s=await(async(e,t)=>{let n=await fetch(t,{method:"POST",headers:{"Content-type":"application/octet-stream"},body:e});if(200!==n.status)return Promise.reject(n);let r=await n.arrayBuffer();return new Uint8Array(r)})(o,vee(e,"fairplay")).catch((t=>{if(t instanceof Response){let n=I7(t,N8,e);return console.error("mediaError",null==n?void 0:n.message,null==n?void 0:n.context),n?Promise.reject(n):Promise.reject(new Error("Unexpected error in license key request"))}return Promise.reject(t)}));await a.update(s).catch((()=>{let e=a7("Failed to update DRM license. This may be an issue with the player or your protected content."),t=new U8(e,U8.MEDIA_ERR_ENCRYPTED,!0);return t.errorCategory=N8,t.muxCode=O8.ENCRYPTED_UPDATE_LICENSE_FAILED,Promise.reject(t)}))}catch(tA){return void Aee(t,tA)}}))},vee=(e,t)=>{let{playbackId:n,tokens:{drm:r}={},customDomain:i=Y7}=e,a=tee(n);return`https://license.${i.toLocaleLowerCase().endsWith(Y7)?i:Y7}/license/${t}/${a}?token=${r}`},yee=(e,t)=>{let{playbackId:n,tokens:{drm:r}={},customDomain:i=Y7}=e,a=tee(n);return`https://license.${i.toLocaleLowerCase().endsWith(Y7)?i:Y7}/appcert/${t}/${a}?token=${r}`},bee=e=>{let{playbackId:t,src:n,customDomain:r}=e;if(t)return!0;if("string"!=typeof n)return!1;let i=null==window?void 0:window.location.href,a=new URL(n,i).hostname.toLocaleLowerCase();return a.includes(Y7)||!!r&&a.includes(r.toLocaleLowerCase())},wee=(e,t,n)=>{var r;let{envKey:i,disableTracking:a}=e,o=bee(e);if(!a&&(i||o)){let{playerInitTime:a,playerSoftwareName:o,playerSoftwareVersion:s,beaconCollectionDomain:l,debug:c,disableCookies:u}=e,d={...e.metadata,video_title:(null==(r=null==e?void 0:e.metadata)?void 0:r.video_title)||void 0},h=t=>"string"!=typeof t.player_error_code&&("function"==typeof e.errorTranslator?e.errorTranslator(t):t);n1.monitor(t,{debug:c,beaconCollectionDomain:l,hlsjs:n,Hls:n?P8:void 0,automaticErrorTracking:!1,errorTranslator:h,disableCookies:u,data:{...i?{env_key:i}:{},player_software_name:o,player_software:o,player_software_version:s,player_init_time:a,...d}})}},Eee=(e,t,n)=>{var r,i;let a,o,s=hee(e,t),{src:l}=e,c=()=>{t.ended||!cee(t,n)||(lee(t,n)?t.currentTime=t.buffered.end(t.buffered.length-1):t.dispatchEvent(new Event("ended")))},u=()=>{let e,n,r=aee(t);r.length>0&&(e=r.start(0),n=r.end(0)),(o!==n||a!==e)&&t.dispatchEvent(new CustomEvent("seekablechange",{composed:!0})),a=e,o=n};if(Q8(t,"durationchange",u),t&&s){let n=Z8(e);if("string"==typeof l){let a=()=>{if(iee(t)!==V8.LIVE||Number.isFinite(t.duration))return;let e=setInterval(u,1e3);t.addEventListener("teardown",(()=>{clearInterval(e)}),{once:!0}),Q8(t,"durationchange",(()=>{Number.isFinite(t.duration)&&clearInterval(e)}))},o=async()=>async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Z8({src:e});var r,i,a;let{streamType:o,targetLiveWindow:s,liveEdgeStartOffset:l}=await W7(e,n);(null!=(r=K7.get(t))?r:{}).liveEdgeStartOffset=l,(null!=(i=K7.get(t))?i:{}).targetLiveWindow=s,t.dispatchEvent(new CustomEvent("targetlivewindowchange",{composed:!0,bubbles:!0})),(null!=(a=K7.get(t))?a:{}).streamType=o,t.dispatchEvent(new CustomEvent("streamtypechange",{composed:!0,bubbles:!0}))}(l,t,n).then(a).catch((n=>{if(n instanceof Response){let r=I7(n,M8,e);if(r)return void Aee(t,r)}else Error}));if("none"===t.preload){let e=()=>{o(),t.removeEventListener("loadedmetadata",n)},n=()=>{o(),t.removeEventListener("play",e)};Q8(t,"play",e,{once:!0}),Q8(t,"loadedmetadata",n,{once:!0})}else o();null!=(r=e.tokens)&&r.drm?gee(e,t):Q8(t,"encrypted",(()=>{let e=a7("Attempting to play DRM-protected content without providing a DRM token."),n=new U8(e,U8.MEDIA_ERR_ENCRYPTED,!0);n.errorCategory=N8,n.muxCode=O8.ENCRYPTED_MISSING_TOKEN,Aee(t,n)}),{once:!0}),t.setAttribute("src",l),e.startTime&&((null!=(i=K7.get(t))?i:{}).startTime=e.startTime,t.addEventListener("durationchange",xee,{once:!0}))}else t.removeAttribute("src");t.addEventListener("error",_ee),t.addEventListener("error",Tee),t.addEventListener("emptied",(()=>{t.querySelectorAll("track[data-removeondestroy]").forEach((e=>{e.remove()}))}),{once:!0}),Q8(t,"pause",c),Q8(t,"seeked",c),Q8(t,"play",(()=>{t.ended||see(t.currentTime,t.duration)&&(t.currentTime=t.seekable.length?t.seekable.start(0):0)}))}else n&&l?(n.once(P8.Events.LEVEL_LOADED,((e,r)=>{z7(r.details,t,n),u(),iee(t)===V8.LIVE&&!Number.isFinite(t.duration)&&(n.on(P8.Events.LEVEL_UPDATED,u),Q8(t,"durationchange",(()=>{Number.isFinite(t.duration)&&n.off(P8.Events.LEVELS_UPDATED,u)})))})),n.on(P8.Events.ERROR,((n,r)=>{Aee(t,See(r,e))})),t.addEventListener("error",Tee),Q8(t,"waiting",c),u7(e,n),function(e,t){t.on(P8.Events.NON_NATIVE_TEXT_TRACKS_FOUND,((n,r)=>{let{tracks:i}=r;i.forEach((n=>{var r,i;let a=null!=(r=n.subtitleTrack)?r:n.closedCaptions,o=t.subtitleTracks.findIndex((e=>{let{lang:t,name:r,type:i}=e;return t==(null==a?void 0:a.lang)&&r===n.label&&i.toLowerCase()===n.kind})),s=(null!=(i=n._id)?i:n.default)?"default":`${n.kind}${o}`;h7(e,n.kind,n.label,null==a?void 0:a.lang,s,n.default)}))}));let n=()=>{if(!t.subtitleTracks.length)return;let n=Array.from(e.textTracks).find((e=>e.id&&"showing"===e.mode&&["subtitles","captions"].includes(e.kind)));if(!n)return;let r=t.subtitleTracks[t.subtitleTrack],i=r?r.default?"default":`${t.subtitleTracks[t.subtitleTrack].type.toLowerCase()}${t.subtitleTrack}`:void 0;if(t.subtitleTrack<0||(null==n?void 0:n.id)!==i){let e=t.subtitleTracks.findIndex((e=>{let{lang:t,name:r,type:i,default:a}=e;return"default"===n.id&&a||t==n.language&&r===n.label&&i.toLowerCase()===n.kind}));t.subtitleTrack=e}(null==n?void 0:n.id)===i&&n.cues&&Array.from(n.cues).forEach((e=>{n.addCue(e)}))};e.textTracks.addEventListener("change",n),t.on(P8.Events.CUES_PARSED,((t,n)=>{let{track:r,cues:i}=n,a=e.textTracks.getTrackById(r);if(!a)return;let o="disabled"===a.mode;o&&(a.mode="hidden"),i.forEach((e=>{var t;null!=(t=a.cues)&&t.getCueById(e.id)||a.addCue(e)})),o&&(a.mode="disabled")})),t.once(P8.Events.DESTROYING,(()=>{e.textTracks.removeEventListener("change",n),e.querySelectorAll("track[data-removeondestroy]").forEach((e=>{e.remove()}))}));let r=()=>{Array.from(e.textTracks).forEach((t=>{var n,r;if(!["subtitles","caption"].includes(t.kind)&&("thumbnails"===t.label||"chapters"===t.kind)){if(null==(n=t.cues)||!n.length){let n="track";t.kind&&(n+=`[kind="${t.kind}"]`),t.label&&(n+=`[label="${t.label}"]`);let i=e.querySelector(n),a=null!=(r=null==i?void 0:i.getAttribute("src"))?r:"";null==i||i.removeAttribute("src"),setTimeout((()=>{null==i||i.setAttribute("src",a)}),0)}"hidden"!==t.mode&&(t.mode="hidden")}}))};t.once(P8.Events.MANIFEST_LOADED,r),t.once(P8.Events.MEDIA_ATTACHED,r)}(t,n),n.attachMedia(t)):console.error("It looks like the video you're trying to play will not work on this system! If possible, try upgrading to the newest versions of your browser or software.")};function xee(e){var t;let n=e.target,r=null==(t=K7.get(n))?void 0:t.startTime;if(r&&function(e,t,n){t&&n>t&&(n=t);for(let r=0;r<e.length;r++)if(e.start(r)<=n&&e.end(r)>=n)return!0;return!1}(n.seekable,n.duration,r)){let e="auto"===n.preload;e&&(n.preload="none"),n.currentTime=r,e&&(n.preload="auto")}}async function _ee(e){if(!e.isTrusted)return;e.stopImmediatePropagation();let t=e.target;if(null==t||!t.error)return;let{message:n,code:r}=t.error,i=new U8(n,r);if(t.src&&r===U8.MEDIA_ERR_SRC_NOT_SUPPORTED&&t.readyState===HTMLMediaElement.HAVE_NOTHING)setTimeout((()=>{var e;let n=null!=(e=ree(t))?e:t.error;(null==n?void 0:n.code)===U8.MEDIA_ERR_SRC_NOT_SUPPORTED&&Aee(t,i)}),500);else{if(t.src&&(r!==U8.MEDIA_ERR_DECODE||void 0!==r))try{let{status:e}=await fetch(t.src);i.data={response:{code:e}}}catch{}Aee(t,i)}}function Aee(e,t){var n;t.fatal&&((null!=(n=K7.get(e))?n:{}).error=t,e.dispatchEvent(new CustomEvent("error",{detail:t})))}function Tee(e){var t,n;if(!(e instanceof CustomEvent)||!(e.detail instanceof U8))return;let r=e.target,i=e.detail;!i||!i.fatal||((null!=(t=K7.get(r))?t:{}).error=i,null==(n=r.mux)||n.emit("error",{player_error_code:i.code,player_error_message:i.message,player_error_context:i.context}))}var See=(e,t)=>{var n,r,i;console.error("getErrorFromHlsErrorData()",e);let a,o={[P8.ErrorTypes.NETWORK_ERROR]:U8.MEDIA_ERR_NETWORK,[P8.ErrorTypes.MEDIA_ERROR]:U8.MEDIA_ERR_DECODE,[P8.ErrorTypes.KEY_SYSTEM_ERROR]:U8.MEDIA_ERR_ENCRYPTED},s=(e=>[P8.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,P8.ErrorDetails.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED].includes(e.details)?U8.MEDIA_ERR_NETWORK:o[e.type])(e);if(s===U8.MEDIA_ERR_NETWORK&&e.response){let i=null!=(n=(e=>e.type===P8.ErrorTypes.KEY_SYSTEM_ERROR?N8:e.type===P8.ErrorTypes.NETWORK_ERROR?M8:void 0)(e))?n:M8;a=null!=(r=I7(e.response,i,t,e.fatal))?r:new U8("",s,e.fatal)}else if(s===U8.MEDIA_ERR_ENCRYPTED)if(e.details===P8.ErrorDetails.KEY_SYSTEM_NO_CONFIGURED_LICENSE){let t=a7("Attempting to play DRM-protected content without providing a DRM token.");a=new U8(t,U8.MEDIA_ERR_ENCRYPTED,e.fatal),a.errorCategory=N8,a.muxCode=O8.ENCRYPTED_MISSING_TOKEN}else if(e.details===P8.ErrorDetails.KEY_SYSTEM_NO_ACCESS){let t=a7("Cannot play DRM-protected content with current security configuration on this browser. Try playing in another browser.");a=new U8(t,U8.MEDIA_ERR_ENCRYPTED,e.fatal),a.errorCategory=N8,a.muxCode=O8.ENCRYPTED_UNSUPPORTED_KEY_SYSTEM}else if(e.details===P8.ErrorDetails.KEY_SYSTEM_NO_SESSION){let e=a7("Failed to generate a DRM license request. This may be an issue with the player or your protected content.");a=new U8(e,U8.MEDIA_ERR_ENCRYPTED,!0),a.errorCategory=N8,a.muxCode=O8.ENCRYPTED_GENERATE_REQUEST_FAILED}else if(e.details===P8.ErrorDetails.KEY_SYSTEM_SESSION_UPDATE_FAILED){let t=a7("Failed to update DRM license. This may be an issue with the player or your protected content.");a=new U8(t,U8.MEDIA_ERR_ENCRYPTED,e.fatal),a.errorCategory=N8,a.muxCode=O8.ENCRYPTED_UPDATE_LICENSE_FAILED}else if(e.details===P8.ErrorDetails.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED){let t=a7("Your server certificate failed when attempting to set it. This may be an issue with a no longer valid certificate.");a=new U8(t,U8.MEDIA_ERR_ENCRYPTED,e.fatal),a.errorCategory=N8,a.muxCode=O8.ENCRYPTED_UPDATE_SERVER_CERT_FAILED}else if(e.details===P8.ErrorDetails.KEY_SYSTEM_STATUS_INTERNAL_ERROR){let t=a7("The DRM Content Decryption Module system had an internal failure. Try reloading the page, upading your browser, or playing in another browser.");a=new U8(t,U8.MEDIA_ERR_ENCRYPTED,e.fatal),a.errorCategory=N8,a.muxCode=O8.ENCRYPTED_CDM_ERROR}else if(e.details===P8.ErrorDetails.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED){let e=a7("DRM playback is being attempted in an environment that is not sufficiently secure. User may see black screen.");a=new U8(e,U8.MEDIA_ERR_ENCRYPTED,!1),a.errorCategory=N8,a.muxCode=O8.ENCRYPTED_OUTPUT_RESTRICTED}else a=new U8(e.error.message,U8.MEDIA_ERR_ENCRYPTED,e.fatal),a.errorCategory=N8,a.muxCode=O8.ENCRYPTED_ERROR;else a=new U8("",s,e.fatal);return a.context||(a.context=`${e.url?`url: ${e.url}\n`:""}${e.response&&(e.response.code||e.response.text)?`response: ${e.response.code}, ${e.response.text}\n`:""}${e.reason?`failure reason: ${e.reason}\n`:""}${e.level?`level: ${e.level}\n`:""}${e.parent?`parent stream controller: ${e.parent}\n`:""}${e.buffer?`buffer length: ${e.buffer}\n`:""}${e.error?`error: ${e.error}\n`:""}${e.event?`event: ${e.event}\n`:""}${e.err?`error message: ${null==(i=e.err)?void 0:i.message}\n`:""}`),a.data=e,a},kee=Object.defineProperty,Cee=Object.getPrototypeOf,Iee=Reflect.get,Ree=e=>{throw TypeError(e)},Dee=(e,t,n)=>((e,t,n)=>t in e?kee(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n),Lee=(e,t,n)=>t.has(e)||Ree("Cannot "+n),Pee=(e,t,n)=>(Lee(e,t,"read from private field"),n?n.call(e):t.get(e)),Mee=(e,t,n)=>t.has(e)?Ree("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Nee=(e,t,n,r)=>(Lee(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),Oee=(e,t,n)=>(Lee(e,t,"access private method"),n),jee=(e,t,n)=>Iee(Cee(e),n,t),Fee=class{addEventListener(){}removeEventListener(){}dispatchEvent(e){return!0}};if("undefined"==typeof DocumentFragment){class e extends Fee{}globalThis.DocumentFragment=e}var Uee,Bee=class extends Fee{},$ee={get(e){},define(e,t,n){},getName:e=>null,upgrade(e){},whenDefined:e=>Promise.resolve(Bee)};Uee=new WeakMap;var Vee={document:{createElement:function(e,t){return new Bee}},DocumentFragment:DocumentFragment,customElements:$ee,CustomEvent:class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Mee(this,Uee),Nee(this,Uee,null==t?void 0:t.detail)}get detail(){return Pee(this,Uee)}initCustomEvent(){}},EventTarget:Fee,HTMLElement:Bee,HTMLVideoElement:class extends Fee{}},Wee="undefined"==typeof window||"undefined"==typeof globalThis.customElements,zee=Wee?Vee:globalThis,Hee=(Wee||globalThis.document,(()=>{try{return"0.25.1"}catch{}return"UNKNOWN"})()),qee=["abort","canplay","canplaythrough","durationchange","emptied","encrypted","ended","error","loadeddata","loadedmetadata","loadstart","pause","play","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting","waitingforkey","resize","enterpictureinpicture","leavepictureinpicture","webkitbeginfullscreen","webkitendfullscreen","webkitpresentationmodechanged"],Gee=["autopictureinpicture","disablepictureinpicture","disableremoteplayback","autoplay","controls","controlslist","crossorigin","loop","muted","playsinline","poster","preload","src"];function Kee(e){return`\n    <style>\n      :host {\n        display: inline-flex;\n        line-height: 0;\n        flex-direction: column;\n        justify-content: end;\n      }\n\n      audio {\n        width: 100%;\n      }\n    </style>\n    <slot name="media">\n      <audio${Xee(e)}></audio>\n    </slot>\n    <slot></slot>\n  `}function Yee(e){return`\n    <style>\n      :host {\n        display: inline-block;\n        line-height: 0;\n      }\n\n      video {\n        max-width: 100%;\n        max-height: 100%;\n        min-width: 100%;\n        min-height: 100%;\n        object-fit: var(--media-object-fit, contain);\n        object-position: var(--media-object-position, 50% 50%);\n      }\n\n      video::-webkit-media-text-track-container {\n        transform: var(--media-webkit-text-track-transform);\n        transition: var(--media-webkit-text-track-transition);\n      }\n    </style>\n    <slot name="media">\n      <video${Xee(e)}></video>\n    </slot>\n    <slot></slot>\n  `}function Qee(e,t){let{tag:n,is:r}=t;var i,a,o,s,l,c,u,d,h,p,f,m,g,v,y,b,w;let E=null==(a=null==(i=globalThis.document)?void 0:i.createElement)?void 0:a.call(i,n,{is:r}),x=E?function(e){let t=[];for(let n=Object.getPrototypeOf(e);n&&n!==HTMLElement.prototype;n=Object.getPrototypeOf(n)){let e=Object.getOwnPropertyNames(n);t.push(...e)}return t}(E):[];return o=class extends e{constructor(){super(...arguments),Mee(this,f),Mee(this,u,!1),Mee(this,d,null),Mee(this,h,new Map),Mee(this,p),Dee(this,"get"),Dee(this,"set"),Dee(this,"call")}static get observedAttributes(){var e,t,n;return Oee(e=o,l,c).call(e),[...null!=(n=null==(t=null==E?void 0:E.constructor)?void 0:t.observedAttributes)?n:[],...Gee]}get nativeEl(){var e,t,r,i,a;return Oee(this,f,m).call(this),null!=(a=null!=(i=null!=(t=null!=(e=Pee(this,d))?e:this.querySelector(":scope > [slot=media]"))?t:this.querySelector(n))?i:null==(r=this.shadowRoot)?void 0:r.querySelector(n))?a:null}set nativeEl(e){Nee(this,d,e)}get defaultMuted(){return this.hasAttribute("muted")}set defaultMuted(e){this.toggleAttribute("muted",e)}get src(){return this.getAttribute("src")}set src(e){this.setAttribute("src",`${e}`)}get preload(){var e,t;return null!=(t=this.getAttribute("preload"))?t:null==(e=this.nativeEl)?void 0:e.preload}set preload(e){this.setAttribute("preload",`${e}`)}init(){var e;if(!this.shadowRoot){this.attachShadow({mode:"open"});let e=function(e){let t={};for(let n of e)t[n.name]=n.value;return t}(this.attributes);r&&(e.is=r),n&&(e.part=n),this.shadowRoot.innerHTML=this.constructor.getTemplateHTML(e)}this.nativeEl.muted=this.hasAttribute("muted");for(let t of x)Oee(this,f,b).call(this,t);Nee(this,p,new MutationObserver(Oee(this,f,v).bind(this))),this.shadowRoot.addEventListener("slotchange",this),Oee(this,f,g).call(this);for(let t of this.constructor.Events)null==(e=this.shadowRoot)||e.addEventListener(t,this,!0)}handleEvent(e){"slotchange"!==e.type?e.target===this.nativeEl&&this.dispatchEvent(new CustomEvent(e.type,{detail:e.detail})):Oee(this,f,g).call(this)}attributeChangedCallback(e,t,n){Oee(this,f,m).call(this),Oee(this,f,w).call(this,e,t,n)}connectedCallback(){Oee(this,f,m).call(this)}},s=new WeakMap,l=new WeakSet,c=function(){if(Pee(this,s))return;Nee(this,s,!0);let e=new Set(this.observedAttributes);e.delete("muted");for(let t of x)if(!(t in this.prototype))if("function"==typeof E[t])this.prototype[t]=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Oee(this,f,m).call(this),(()=>{var e;if(this.call)return this.call(t,...n);let r=null==(e=this.nativeEl)?void 0:e[t];return null==r?void 0:r.apply(this.nativeEl,n)})()};else{let n={get(){var n,r,i;Oee(this,f,m).call(this);let a=t.toLowerCase();if(e.has(a)){let e=this.getAttribute(a);return null!==e&&(""===e||e)}return null!=(i=null==(n=this.get)?void 0:n.call(this,t))?i:null==(r=this.nativeEl)?void 0:r[t]}};t!==t.toUpperCase()&&(n.set=function(n){Oee(this,f,m).call(this);let r=t.toLowerCase();e.has(r)?!0===n||!1===n||null==n?this.toggleAttribute(r,!!n):this.setAttribute(r,n):this.set?this.set(t,n):this.nativeEl&&(this.nativeEl[t]=n)}),Object.defineProperty(this.prototype,t,n)}},u=new WeakMap,d=new WeakMap,h=new WeakMap,p=new WeakMap,f=new WeakSet,m=function(){Pee(this,u)||(Nee(this,u,!0),this.init())},g=function(){var e;let t=new Map(Pee(this,h)),n=null==(e=this.shadowRoot)?void 0:e.querySelector("slot:not([name])");(null==n?void 0:n.assignedElements({flatten:!0}).filter((e=>["track","source"].includes(e.localName)))).forEach((e=>{var n,r;t.delete(e);let i=Pee(this,h).get(e);i||(i=e.cloneNode(),Pee(this,h).set(e,i),null==(n=Pee(this,p))||n.observe(e,{attributes:!0})),null==(r=this.nativeEl)||r.append(i),Oee(this,f,y).call(this,i)})),t.forEach(((e,t)=>{e.remove(),Pee(this,h).delete(t)}))},v=function(e){var t;for(let n of e)if("attributes"===n.type){let{target:e,attributeName:r}=n,i=Pee(this,h).get(e);i&&r&&(i.setAttribute(r,null!=(t=e.getAttribute(r))?t:""),Oee(this,f,y).call(this,i))}},y=function(e){e&&"track"===e.localName&&e.default&&("chapters"===e.kind||"metadata"===e.kind)&&"disabled"===e.track.mode&&(e.track.mode="hidden")},b=function(e){if(Object.prototype.hasOwnProperty.call(this,e)){let t=this[e];delete this[e],this[e]=t}},w=function(e,t,n){var r,i,a;["id","class"].includes(e)||!o.observedAttributes.includes(e)&&this.constructor.observedAttributes.includes(e)||(null===n?null==(r=this.nativeEl)||r.removeAttribute(e):(null==(i=this.nativeEl)?void 0:i.getAttribute(e))!==n&&(null==(a=this.nativeEl)||a.setAttribute(e,n)))},Mee(o,l),Dee(o,"getTemplateHTML",n.endsWith("audio")?Kee:Yee),Dee(o,"shadowRootOptions",{mode:"open"}),Dee(o,"Events",qee),Mee(o,s,!1),o}function Xee(e){let t="";for(let n in e){if(!Gee.includes(n))continue;let r=e[n];t+=""===r?` ${n}`:` ${n}="${r}"`}return t}var Zee,Jee,ete=Qee(null!=(Zee=globalThis.HTMLElement)?Zee:class{},{tag:"video"}),tte=(Qee(null!=(Jee=globalThis.HTMLElement)?Jee:class{},{tag:"audio"}),new WeakMap),nte=class extends Error{},rte=class extends Error{},ite=["application/x-mpegURL","application/vnd.apple.mpegurl","audio/mpegurl"],ate=globalThis.WeakRef?class extends Set{add(e){super.add(new WeakRef(e))}forEach(e){super.forEach((t=>{let n=t.deref();n&&e(n)}))}}:Set;function ote(){var e,t;return null==(t=null==(e=globalThis.cast)?void 0:e.framework)?void 0:t.CastContext.getInstance()}function ste(){var e;return null==(e=ote())?void 0:e.getCurrentSession()}function lte(){var e;return null==(e=ste())?void 0:e.getSessionObj().media[0]}function cte(e){return ote().setOptions({receiverApplicationId:"CC1AD845",autoJoinPolicy:"origin_scoped",androidReceiverCompatible:!1,language:"en-US",resumeSavedSession:!0,...e})}var ute,dte=new ate,hte=new WeakSet;!function(e){var t,n,r;null!=(n=null==(t=globalThis.chrome)?void 0:t.cast)&&n.isAvailable?null!=(r=globalThis.cast)&&r.framework?e():customElements.whenDefined("google-cast-button").then(e):globalThis.__onGCastApiAvailable=()=>{customElements.whenDefined("google-cast-button").then(e)}}((()=>{var e,t,n,r;null!=(t=null==(e=globalThis.chrome)?void 0:e.cast)&&t.isAvailable?ute||(ute=cast.framework,ote().addEventListener(ute.CastContextEventType.CAST_STATE_CHANGED,(e=>{dte.forEach((t=>{var n,r;return null==(r=(n=tte.get(t)).onCastStateChanged)?void 0:r.call(n,e)}))})),ote().addEventListener(ute.CastContextEventType.SESSION_STATE_CHANGED,(e=>{dte.forEach((t=>{var n,r;return null==(r=(n=tte.get(t)).onSessionStateChanged)?void 0:r.call(n,e)}))})),dte.forEach((e=>{var t,n;return null==(n=(t=tte.get(e)).init)?void 0:n.call(t)}))):console.debug("chrome.cast.isAvailable",null==(r=null==(n=globalThis.chrome)?void 0:n.cast)?void 0:r.isAvailable)}));var pte,fte,mte,gte,vte,yte,bte,wte,Ete,xte,_te,Ate,Tte,Ste,kte,Cte,Ite=0,Rte=class extends EventTarget{constructor(e){super(),Mee(this,Ete),Mee(this,pte),Mee(this,fte),Mee(this,mte),Mee(this,gte),Mee(this,vte,"disconnected"),Mee(this,yte,!1),Mee(this,bte,new Set),Mee(this,wte,new WeakMap),Nee(this,pte,e),dte.add(this),tte.set(this,{init:()=>Oee(this,Ete,Ste).call(this),onCastStateChanged:()=>Oee(this,Ete,Ate).call(this),onSessionStateChanged:()=>Oee(this,Ete,Tte).call(this),getCastPlayer:()=>Pee(this,Ete,xte)}),Oee(this,Ete,Ste).call(this)}get state(){return Pee(this,vte)}async watchAvailability(e){if(Pee(this,pte).disableRemotePlayback)throw new nte("disableRemotePlayback attribute is present.");return Pee(this,wte).set(e,++Ite),Pee(this,bte).add(e),Ite}async cancelWatchAvailability(e){if(Pee(this,pte).disableRemotePlayback)throw new nte("disableRemotePlayback attribute is present.");e?Pee(this,bte).delete(e):Pee(this,bte).clear()}async prompt(){var e,t,n,r;if(Pee(this,pte).disableRemotePlayback)throw new nte("disableRemotePlayback attribute is present.");if(null==(t=null==(e=globalThis.chrome)?void 0:e.cast)||!t.isAvailable)throw new rte("The RemotePlayback API is disabled on this platform.");let i=hte.has(Pee(this,pte));hte.add(Pee(this,pte)),cte(Pee(this,pte).castOptions),Object.entries(Pee(this,gte)).forEach((e=>{let[t,n]=e;Pee(this,mte).controller.addEventListener(t,n)}));try{await ote().requestSession()}catch(oA){if("cancel"===oA)return void(i||hte.delete(Pee(this,pte)));throw new Error(oA)}null==(r=null==(n=tte.get(Pee(this,pte)))?void 0:n.loadOnPrompt)||r.call(n)}};pte=new WeakMap,fte=new WeakMap,mte=new WeakMap,gte=new WeakMap,vte=new WeakMap,yte=new WeakMap,bte=new WeakMap,wte=new WeakMap,Ete=new WeakSet,xte=function(){if(hte.has(Pee(this,pte)))return Pee(this,mte)},_te=function(){hte.has(Pee(this,pte))&&(Object.entries(Pee(this,gte)).forEach((e=>{let[t,n]=e;Pee(this,mte).controller.removeEventListener(t,n)})),hte.delete(Pee(this,pte)),Pee(this,pte).muted=Pee(this,mte).isMuted,Pee(this,pte).currentTime=Pee(this,mte).savedPlayerState.currentTime,!1===Pee(this,mte).savedPlayerState.isPaused&&Pee(this,pte).play())},Ate=function(){let e=ote().getCastState();if(hte.has(Pee(this,pte))&&"CONNECTING"===e&&(Nee(this,vte,"connecting"),this.dispatchEvent(new Event("connecting"))),!Pee(this,yte)&&null!=e&&e.includes("CONNECT")){Nee(this,yte,!0);for(let e of Pee(this,bte))e(!0)}else if(Pee(this,yte)&&(!e||"NO_DEVICES_AVAILABLE"===e)){Nee(this,yte,!1);for(let e of Pee(this,bte))e(!1)}},Tte=async function(){var e;let{SESSION_RESUMED:t}=ute.SessionState;if(ote().getSessionState()===t&&Pee(this,pte).castSrc===(null==(e=lte())?void 0:e.media.contentId)){hte.add(Pee(this,pte)),Object.entries(Pee(this,gte)).forEach((e=>{let[t,n]=e;Pee(this,mte).controller.addEventListener(t,n)}));try{await function(e){return new Promise(((t,n)=>{lte().getStatus(e,t,n)}))}(new chrome.cast.media.GetStatusRequest)}catch(eA){console.error(eA)}Pee(this,gte)[ute.RemotePlayerEventType.IS_PAUSED_CHANGED](),Pee(this,gte)[ute.RemotePlayerEventType.PLAYER_STATE_CHANGED]()}},Ste=function(){!ute||Pee(this,fte)||(Nee(this,fte,!0),cte(Pee(this,pte).castOptions),Pee(this,pte).textTracks.addEventListener("change",(()=>Oee(this,Ete,Cte).call(this))),Oee(this,Ete,Ate).call(this),Nee(this,mte,new ute.RemotePlayer),new ute.RemotePlayerController(Pee(this,mte)),Nee(this,gte,{[ute.RemotePlayerEventType.IS_CONNECTED_CHANGED]:e=>{let{value:t}=e;!0===t?(Nee(this,vte,"connected"),this.dispatchEvent(new Event("connect"))):(Oee(this,Ete,_te).call(this),Nee(this,vte,"disconnected"),this.dispatchEvent(new Event("disconnect")))},[ute.RemotePlayerEventType.DURATION_CHANGED]:()=>{Pee(this,pte).dispatchEvent(new Event("durationchange"))},[ute.RemotePlayerEventType.VOLUME_LEVEL_CHANGED]:()=>{Pee(this,pte).dispatchEvent(new Event("volumechange"))},[ute.RemotePlayerEventType.IS_MUTED_CHANGED]:()=>{Pee(this,pte).dispatchEvent(new Event("volumechange"))},[ute.RemotePlayerEventType.CURRENT_TIME_CHANGED]:()=>{var e;null!=(e=Pee(this,Ete,xte))&&e.isMediaLoaded&&Pee(this,pte).dispatchEvent(new Event("timeupdate"))},[ute.RemotePlayerEventType.VIDEO_INFO_CHANGED]:()=>{Pee(this,pte).dispatchEvent(new Event("resize"))},[ute.RemotePlayerEventType.IS_PAUSED_CHANGED]:()=>{Pee(this,pte).dispatchEvent(new Event(this.paused?"pause":"play"))},[ute.RemotePlayerEventType.PLAYER_STATE_CHANGED]:()=>{var e,t;(null==(e=Pee(this,Ete,xte))?void 0:e.playerState)!==chrome.cast.media.PlayerState.PAUSED&&Pee(this,pte).dispatchEvent(new Event({[chrome.cast.media.PlayerState.PLAYING]:"playing",[chrome.cast.media.PlayerState.BUFFERING]:"waiting",[chrome.cast.media.PlayerState.IDLE]:"emptied"}[null==(t=Pee(this,Ete,xte))?void 0:t.playerState]))},[ute.RemotePlayerEventType.IS_MEDIA_LOADED_CHANGED]:async()=>{var e;null!=(e=Pee(this,Ete,xte))&&e.isMediaLoaded&&(await Promise.resolve(),Oee(this,Ete,kte).call(this))}}))},kte=function(){Oee(this,Ete,Cte).call(this)},Cte=async function(){var e,t,n,r,i;if(!Pee(this,Ete,xte))return;let a=(null!=(t=null==(e=Pee(this,mte).mediaInfo)?void 0:e.tracks)?t:[]).filter((e=>{let{type:t}=e;return t===chrome.cast.media.TrackType.TEXT})),o=[...Pee(this,pte).textTracks].filter((e=>{let{kind:t}=e;return"subtitles"===t||"captions"===t})),s=a.map((e=>{let{language:t,name:n,trackId:r}=e;var i;let{mode:a}=null!=(i=o.find((e=>e.language===t&&e.label===n)))?i:{};return!!a&&{mode:a,trackId:r}})).filter(Boolean),l=s.filter((e=>{let{mode:t}=e;return"showing"!==t})).map((e=>{let{trackId:t}=e;return t})),c=s.find((e=>{let{mode:t}=e;return"showing"===t})),u=null!=(i=null==(r=null==(n=ste())?void 0:n.getSessionObj().media[0])?void 0:r.activeTrackIds)?i:[],d=u;if(u.length&&(d=d.filter((e=>!l.includes(e)))),null!=c&&c.trackId&&(d=[...d,c.trackId]),d=[...new Set(d)],!((e,t)=>e.length===t.length&&e.every((e=>t.includes(e))))(u,d))try{let e=new chrome.cast.media.EditTracksInfoRequest(d);await function(e){return new Promise(((t,n)=>{lte().editTracksInfo(e,t,n)}))}(e)}catch(Os){console.error(Os)}};var Dte=e=>{var t,n,r,i,a,o,s,l,c;return n=class extends e{constructor(){super(...arguments),Mee(this,s),Mee(this,r,{paused:!1}),Mee(this,i,{receiverApplicationId:"CC1AD845",autoJoinPolicy:"origin_scoped",androidReceiverCompatible:!1,language:"en-US",resumeSavedSession:!0}),Mee(this,a),Mee(this,o)}get remote(){return Pee(this,o)?Pee(this,o):globalThis.chrome?(this.disableRemotePlayback||function(){var e;let t="https://www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1";if(null!=(e=globalThis.chrome)&&e.cast||document.querySelector(`script[src="${t}"]`))return;let n=document.createElement("script");n.src=t,document.head.append(n)}(),tte.set(this,{loadOnPrompt:()=>Oee(this,s,c).call(this)}),Nee(this,o,new Rte(this))):super.remote}attributeChangedCallback(e,t,n){if(super.attributeChangedCallback(e,t,n),"cast-receiver"===e&&n)Pee(this,i).receiverApplicationId=n;else if(Pee(this,s,l))switch(e){case"cast-stream-type":case"cast-src":this.load()}}async load(){var e,n;if(!Pee(this,s,l))return super.load();let i=new chrome.cast.media.MediaInfo(this.castSrc,this.castContentType);i.customData=this.castCustomData;let a=[...this.querySelectorAll("track")].filter((e=>{let{kind:t,src:n}=e;return n&&("subtitles"===t||"captions"===t)})),o=[],c=0;if(a.length&&(i.tracks=a.map((e=>{let t=++c;0===o.length&&"showing"===e.track.mode&&o.push(t);let n=new chrome.cast.media.Track(t,chrome.cast.media.TrackType.TEXT);return n.trackContentId=e.src,n.trackContentType="text/vtt",n.subtype="captions"===e.kind?chrome.cast.media.TextTrackType.CAPTIONS:chrome.cast.media.TextTrackType.SUBTITLES,n.name=e.label,n.language=e.srclang,n}))),"live"===this.castStreamType?i.streamType=chrome.cast.media.StreamType.LIVE:i.streamType=chrome.cast.media.StreamType.BUFFERED,i.metadata=new chrome.cast.media.GenericMediaMetadata,i.metadata.title=this.title,i.metadata.images=[{url:this.poster}],async function(e){try{let t=(await fetch(e,{method:"HEAD"})).headers.get("Content-Type");return ite.some((e=>t===e))}catch(t){return console.error("Error while trying to get the Content-Type of the manifest",t),!1}}(this.castSrc)){let e=await async function(e){try{let t=await(await fetch(e)).text(),n=t,r=function(e){let t=e.split("\n"),n=[];for(let r=0;r<t.length;r++)if(t[r].trim().startsWith("#EXT-X-STREAM-INF")){let e=t[r+1]?t[r+1].trim():"";e&&!e.startsWith("#")&&n.push(e)}return n}(t);if(r.length>0){let t=new URL(r[0],e).toString();n=await(await fetch(t)).text()}let i=function(e){return e.split("\n").find((e=>!e.trim().startsWith("#")&&""!==e.trim()))}(n);return function(e){if(!e)return;let t=e.match(/\.([a-zA-Z0-9]+)(?:\?.*)?$/);return t?t[1]:null}(i)}catch(t){return void console.error("Error while trying to parse the manifest playlist",t)}}(this.castSrc);((null==e?void 0:e.includes("m4s"))||(null==e?void 0:e.includes("mp4")))&&(i.hlsSegmentFormat=chrome.cast.media.HlsSegmentFormat.FMP4,i.hlsVideoSegmentFormat=chrome.cast.media.HlsVideoSegmentFormat.FMP4)}let u=new chrome.cast.media.LoadRequest(i);u.currentTime=null!=(e=super.currentTime)?e:0,u.autoplay=!Pee(this,r).paused,u.activeTrackIds=o,await(null==(n=ste())?void 0:n.loadMedia(u)),this.dispatchEvent(new Event("volumechange"))}play(){var e;if(!Pee(this,s,l))return super.play();Pee(this,s,l).isPaused&&(null==(e=Pee(this,s,l).controller)||e.playOrPause())}pause(){var e;Pee(this,s,l)?Pee(this,s,l).isPaused||null==(e=Pee(this,s,l).controller)||e.playOrPause():super.pause()}get castOptions(){return Pee(this,i)}get castReceiver(){var e;return null!=(e=this.getAttribute("cast-receiver"))?e:void 0}set castReceiver(e){this.castReceiver!=e&&this.setAttribute("cast-receiver",`${e}`)}get castSrc(){var e,t,n;return null!=(n=null!=(t=this.getAttribute("cast-src"))?t:null==(e=this.querySelector("source"))?void 0:e.src)?n:this.currentSrc}set castSrc(e){this.castSrc!=e&&this.setAttribute("cast-src",`${e}`)}get castContentType(){var e;return null!=(e=this.getAttribute("cast-content-type"))?e:void 0}set castContentType(e){this.setAttribute("cast-content-type",`${e}`)}get castStreamType(){var e,t;return null!=(t=null!=(e=this.getAttribute("cast-stream-type"))?e:this.streamType)?t:void 0}set castStreamType(e){this.setAttribute("cast-stream-type",`${e}`)}get castCustomData(){return Pee(this,a)}set castCustomData(e){let t=typeof e;["object","undefined"].includes(t)?Nee(this,a,e):console.error(`castCustomData must be nullish or an object but value was of type ${t}`)}get readyState(){if(Pee(this,s,l))switch(Pee(this,s,l).playerState){case chrome.cast.media.PlayerState.IDLE:return 0;case chrome.cast.media.PlayerState.BUFFERING:return 2;default:return 3}return super.readyState}get paused(){return Pee(this,s,l)?Pee(this,s,l).isPaused:super.paused}get muted(){var e;return Pee(this,s,l)?null==(e=Pee(this,s,l))?void 0:e.isMuted:super.muted}set muted(e){var t;Pee(this,s,l)?(e&&!Pee(this,s,l).isMuted||!e&&Pee(this,s,l).isMuted)&&(null==(t=Pee(this,s,l).controller)||t.muteOrUnmute()):super.muted=e}get volume(){var e,t;return Pee(this,s,l)?null!=(t=null==(e=Pee(this,s,l))?void 0:e.volumeLevel)?t:1:super.volume}set volume(e){var t;if(Pee(this,s,l))return Pee(this,s,l).volumeLevel=+e,void(null==(t=Pee(this,s,l).controller)||t.setVolumeLevel());super.volume=e}get duration(){var e,t,n;return Pee(this,s,l)&&null!=(e=Pee(this,s,l))&&e.isMediaLoaded?null!=(n=null==(t=Pee(this,s,l))?void 0:t.duration)?n:NaN:super.duration}get currentTime(){var e,t,n;return Pee(this,s,l)&&null!=(e=Pee(this,s,l))&&e.isMediaLoaded?null!=(n=null==(t=Pee(this,s,l))?void 0:t.currentTime)?n:0:super.currentTime}set currentTime(e){var t;if(Pee(this,s,l))return Pee(this,s,l).currentTime=e,void(null==(t=Pee(this,s,l).controller)||t.seek());super.currentTime=e}},r=new WeakMap,i=new WeakMap,a=new WeakMap,o=new WeakMap,s=new WeakSet,l=function(){var e,t;return null==(t=null==(e=tte.get(this.remote))?void 0:e.getCastPlayer)?void 0:t.call(e)},c=async function(){Pee(this,r).paused=jee(n.prototype,this,"paused"),jee(n.prototype,this,"pause").call(this),this.muted=jee(n.prototype,this,"muted");try{await this.load()}catch(J_){console.error(J_)}},Dee(n,"observedAttributes",[...null!=(t=e.observedAttributes)?t:[],"cast-src","cast-content-type","cast-stream-type","cast-receiver"]),n},Lte=class extends Event{constructor(e,t){super(e),Dee(this,"track"),this.track=t.track}},Pte=new WeakMap;function Mte(e){var t;return null!=(t=Pte.get(e))?t:function(e,t){let n=Pte.get(e);return n||Pte.set(e,n={}),Object.assign(n,t)}(e,{})}function Nte(e,t){let n=e.videoTracks;Mte(t).media=e,Mte(t).renditionSet||(Mte(t).renditionSet=new Set);let r=Mte(n).trackSet;r.add(t);let i=r.size-1;i in Vte.prototype||Object.defineProperty(Vte.prototype,i,{get(){return[...Mte(this).trackSet][i]}}),queueMicrotask((()=>{n.dispatchEvent(new Lte("addtrack",{track:t}))}))}function Ote(e){var t;let n=null==(t=Mte(e).media)?void 0:t.videoTracks;n&&(Mte(n).trackSet.delete(e),queueMicrotask((()=>{n.dispatchEvent(new Lte("removetrack",{track:e}))})))}var jte,Fte,Ute,Bte,$te,Vte=class extends EventTarget{constructor(){super(),Mee(this,Bte),Mee(this,jte),Mee(this,Fte),Mee(this,Ute),Mte(this).trackSet=new Set}[Symbol.iterator](){return Pee(this,Bte,$te).values()}get length(){return Pee(this,Bte,$te).size}getTrackById(e){var t;return null!=(t=[...Pee(this,Bte,$te)].find((t=>t.id===e)))?t:null}get selectedIndex(){return[...Pee(this,Bte,$te)].findIndex((e=>e.selected))}get onaddtrack(){return Pee(this,jte)}set onaddtrack(e){Pee(this,jte)&&(this.removeEventListener("addtrack",Pee(this,jte)),Nee(this,jte,void 0)),"function"==typeof e&&(Nee(this,jte,e),this.addEventListener("addtrack",e))}get onremovetrack(){return Pee(this,Fte)}set onremovetrack(e){Pee(this,Fte)&&(this.removeEventListener("removetrack",Pee(this,Fte)),Nee(this,Fte,void 0)),"function"==typeof e&&(Nee(this,Fte,e),this.addEventListener("removetrack",e))}get onchange(){return Pee(this,Ute)}set onchange(e){Pee(this,Ute)&&(this.removeEventListener("change",Pee(this,Ute)),Nee(this,Ute,void 0)),"function"==typeof e&&(Nee(this,Ute,e),this.addEventListener("change",e))}};jte=new WeakMap,Fte=new WeakMap,Ute=new WeakMap,Bte=new WeakSet,$te=function(){return Mte(this).trackSet};var Wte=class extends Event{constructor(e,t){super(e),Dee(this,"rendition"),this.rendition=t.rendition}};function zte(e){return[...Mte(e).media.videoTracks].filter((e=>e.selected)).flatMap((e=>[...Mte(e).renditionSet]))}var Hte,qte,Gte,Kte=class extends EventTarget{constructor(){super(...arguments),Mee(this,Hte),Mee(this,qte),Mee(this,Gte)}[Symbol.iterator](){return zte(this).values()}get length(){return zte(this).length}getRenditionById(e){var t;return null!=(t=zte(this).find((t=>`${t.id}`==`${e}`)))?t:null}get selectedIndex(){return zte(this).findIndex((e=>e.selected))}set selectedIndex(e){for(let[t,n]of zte(this).entries())n.selected=t===e}get onaddrendition(){return Pee(this,Hte)}set onaddrendition(e){Pee(this,Hte)&&(this.removeEventListener("addrendition",Pee(this,Hte)),Nee(this,Hte,void 0)),"function"==typeof e&&(Nee(this,Hte,e),this.addEventListener("addrendition",e))}get onremoverendition(){return Pee(this,qte)}set onremoverendition(e){Pee(this,qte)&&(this.removeEventListener("removerendition",Pee(this,qte)),Nee(this,qte,void 0)),"function"==typeof e&&(Nee(this,qte,e),this.addEventListener("removerendition",e))}get onchange(){return Pee(this,Gte)}set onchange(e){Pee(this,Gte)&&(this.removeEventListener("change",Pee(this,Gte)),Nee(this,Gte,void 0)),"function"==typeof e&&(Nee(this,Gte,e),this.addEventListener("change",e))}};Hte=new WeakMap,qte=new WeakMap,Gte=new WeakMap;var Yte,Qte=class{constructor(){Dee(this,"src"),Dee(this,"id"),Dee(this,"width"),Dee(this,"height"),Dee(this,"bitrate"),Dee(this,"frameRate"),Dee(this,"codec"),Mee(this,Yte,!1)}get selected(){return Pee(this,Yte)}set selected(e){Pee(this,Yte)!==e&&(Nee(this,Yte,e),function(e){let t=Mte(e).media.videoRenditions;!t||Mte(t).changeRequested||(Mte(t).changeRequested=!0,queueMicrotask((()=>{delete Mte(t).changeRequested,Mte(e).track.selected&&t.dispatchEvent(new Event("change"))})))}(this))}};Yte=new WeakMap;var Xte,Zte=class{constructor(){Dee(this,"id"),Dee(this,"kind"),Dee(this,"label",""),Dee(this,"language",""),Dee(this,"sourceBuffer"),Mee(this,Xte,!1)}addRendition(e,t,n,r,i,a){let o=new Qte;return o.src=e,o.width=t,o.height=n,o.frameRate=a,o.bitrate=i,o.codec=r,function(e,t){let n=Mte(e).media.videoRenditions;Mte(t).media=Mte(e).media,Mte(t).track=e;let r=Mte(e).renditionSet;r.add(t);let i=r.size-1;i in Kte.prototype||Object.defineProperty(Kte.prototype,i,{get(){return zte(this)[i]}}),queueMicrotask((()=>{e.selected&&n.dispatchEvent(new Wte("addrendition",{rendition:t}))}))}(this,o),o}removeRendition(e){!function(e){let t=Mte(e).media.videoRenditions,n=Mte(e).track;Mte(n).renditionSet.delete(e),queueMicrotask((()=>{Mte(e).track.selected&&t.dispatchEvent(new Wte("removerendition",{rendition:e}))}))}(e)}get selected(){return Pee(this,Xte)}set selected(e){Pee(this,Xte)!==e&&(Nee(this,Xte,e),!0===e&&function(e){var t;let n=null!=(t=Mte(e).media.videoTracks)?t:[],r=!1;for(let i of n)i!==e&&(i.selected=!1,r=!0);if(r){if(Mte(n).changeRequested)return;Mte(n).changeRequested=!0,queueMicrotask((()=>{delete Mte(n).changeRequested,n.dispatchEvent(new Event("change"))}))}}(this))}};function Jte(e){return[...Mte(e).media.audioTracks].filter((e=>e.enabled)).flatMap((e=>[...Mte(e).renditionSet]))}Xte=new WeakMap;var ene,tne,nne,rne=class extends EventTarget{constructor(){super(...arguments),Mee(this,ene),Mee(this,tne),Mee(this,nne)}[Symbol.iterator](){return Jte(this).values()}get length(){return Jte(this).length}getRenditionById(e){var t;return null!=(t=Jte(this).find((t=>`${t.id}`==`${e}`)))?t:null}get selectedIndex(){return Jte(this).findIndex((e=>e.selected))}set selectedIndex(e){for(let[t,n]of Jte(this).entries())n.selected=t===e}get onaddrendition(){return Pee(this,ene)}set onaddrendition(e){Pee(this,ene)&&(this.removeEventListener("addrendition",Pee(this,ene)),Nee(this,ene,void 0)),"function"==typeof e&&(Nee(this,ene,e),this.addEventListener("addrendition",e))}get onremoverendition(){return Pee(this,tne)}set onremoverendition(e){Pee(this,tne)&&(this.removeEventListener("removerendition",Pee(this,tne)),Nee(this,tne,void 0)),"function"==typeof e&&(Nee(this,tne,e),this.addEventListener("removerendition",e))}get onchange(){return Pee(this,nne)}set onchange(e){Pee(this,nne)&&(this.removeEventListener("change",Pee(this,nne)),Nee(this,nne,void 0)),"function"==typeof e&&(Nee(this,nne,e),this.addEventListener("change",e))}};ene=new WeakMap,tne=new WeakMap,nne=new WeakMap;var ine,ane=class{constructor(){Dee(this,"src"),Dee(this,"id"),Dee(this,"bitrate"),Dee(this,"codec"),Mee(this,ine,!1)}get selected(){return Pee(this,ine)}set selected(e){Pee(this,ine)!==e&&(Nee(this,ine,e),function(e){let t=Mte(e).media.audioRenditions;!t||Mte(t).changeRequested||(Mte(t).changeRequested=!0,queueMicrotask((()=>{delete Mte(t).changeRequested,Mte(e).track.enabled&&t.dispatchEvent(new Event("change"))})))}(this))}};function one(e,t){let n=e.audioTracks;Mte(t).media=e,Mte(t).renditionSet||(Mte(t).renditionSet=new Set);let r=Mte(n).trackSet;r.add(t);let i=r.size-1;i in pne.prototype||Object.defineProperty(pne.prototype,i,{get(){return[...Mte(this).trackSet][i]}}),queueMicrotask((()=>{n.dispatchEvent(new Lte("addtrack",{track:t}))}))}function sne(e){var t;let n=null==(t=Mte(e).media)?void 0:t.audioTracks;n&&(Mte(n).trackSet.delete(e),queueMicrotask((()=>{n.dispatchEvent(new Lte("removetrack",{track:e}))})))}ine=new WeakMap;var lne,cne,une,dne,hne,pne=class extends EventTarget{constructor(){super(),Mee(this,dne),Mee(this,lne),Mee(this,cne),Mee(this,une),Mte(this).trackSet=new Set}[Symbol.iterator](){return Pee(this,dne,hne).values()}get length(){return Pee(this,dne,hne).size}getTrackById(e){var t;return null!=(t=[...Pee(this,dne,hne)].find((t=>t.id===e)))?t:null}get onaddtrack(){return Pee(this,lne)}set onaddtrack(e){Pee(this,lne)&&(this.removeEventListener("addtrack",Pee(this,lne)),Nee(this,lne,void 0)),"function"==typeof e&&(Nee(this,lne,e),this.addEventListener("addtrack",e))}get onremovetrack(){return Pee(this,cne)}set onremovetrack(e){Pee(this,cne)&&(this.removeEventListener("removetrack",Pee(this,cne)),Nee(this,cne,void 0)),"function"==typeof e&&(Nee(this,cne,e),this.addEventListener("removetrack",e))}get onchange(){return Pee(this,une)}set onchange(e){Pee(this,une)&&(this.removeEventListener("change",Pee(this,une)),Nee(this,une,void 0)),"function"==typeof e&&(Nee(this,une,e),this.addEventListener("change",e))}};lne=new WeakMap,cne=new WeakMap,une=new WeakMap,dne=new WeakSet,hne=function(){return Mte(this).trackSet};var fne,mne=class{constructor(){Dee(this,"id"),Dee(this,"kind"),Dee(this,"label",""),Dee(this,"language",""),Dee(this,"sourceBuffer"),Mee(this,fne,!1)}addRendition(e,t,n){let r=new ane;return r.src=e,r.codec=t,r.bitrate=n,function(e,t){let n=Mte(e).media.audioRenditions;Mte(t).media=Mte(e).media,Mte(t).track=e;let r=Mte(e).renditionSet;r.add(t);let i=r.size-1;i in rne.prototype||Object.defineProperty(rne.prototype,i,{get(){return Jte(this)[i]}}),queueMicrotask((()=>{e.enabled&&n.dispatchEvent(new Wte("addrendition",{rendition:t}))}))}(this,r),r}removeRendition(e){!function(e){let t=Mte(e).media.audioRenditions,n=Mte(e).track;Mte(n).renditionSet.delete(e),queueMicrotask((()=>{Mte(e).track.enabled&&t.dispatchEvent(new Wte("removerendition",{rendition:e}))}))}(e)}get enabled(){return Pee(this,fne)}set enabled(e){Pee(this,fne)!==e&&(Nee(this,fne,e),function(e){let t=Mte(e).media.audioTracks;!t||Mte(t).changeRequested||(Mte(t).changeRequested=!0,queueMicrotask((()=>{delete Mte(t).changeRequested,t.dispatchEvent(new Event("change"))})))}(this))}};fne=new WeakMap;var gne=bne(globalThis.HTMLMediaElement,"video"),vne=bne(globalThis.HTMLMediaElement,"audio");function yne(e){if(null==e||!e.prototype)return e;let t=bne(e,"video");(!t||`${t}`.includes("[native code]"))&&Object.defineProperty(e.prototype,"videoTracks",{get(){return function(e){var t;let n=Mte(e).videoTracks;if(!n&&(n=new Vte,Mte(e).videoTracks=n,gne)){let r=gne.call(null!=(t=e.nativeEl)?t:e);for(let t of r)Nte(e,t);r.addEventListener("change",(()=>{n.dispatchEvent(new Event("change"))})),r.addEventListener("addtrack",(t=>{if([...n].some((e=>e instanceof Zte)))for(let e of r)Ote(e);else Nte(e,t.track)})),r.addEventListener("removetrack",(e=>{Ote(e.track)}))}return n}(this)}});let n=bne(e,"audio");(!n||`${n}`.includes("[native code]"))&&Object.defineProperty(e.prototype,"audioTracks",{get(){return function(e){var t;let n=Mte(e).audioTracks;if(!n&&(n=new pne,Mte(e).audioTracks=n,vne)){let r=vne.call(null!=(t=e.nativeEl)?t:e);for(let t of r)one(e,t);r.addEventListener("change",(()=>{n.dispatchEvent(new Event("change"))})),r.addEventListener("addtrack",(t=>{if([...n].some((e=>e instanceof mne)))for(let e of r)sne(e);else one(e,t.track)})),r.addEventListener("removetrack",(e=>{sne(e.track)}))}return n}(this)}}),"addVideoTrack"in e.prototype||(e.prototype.addVideoTrack=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=new Zte;return r.kind=e,r.label=t,r.language=n,Nte(this,r),r}),"removeVideoTrack"in e.prototype||(e.prototype.removeVideoTrack=Ote),"addAudioTrack"in e.prototype||(e.prototype.addAudioTrack=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=new mne;return r.kind=e,r.label=t,r.language=n,one(this,r),r}),"removeAudioTrack"in e.prototype||(e.prototype.removeAudioTrack=sne),"videoRenditions"in e.prototype||Object.defineProperty(e.prototype,"videoRenditions",{get(){return r(this)}});let r=e=>{let t=Mte(e).videoRenditions;return t||(t=new Kte,Mte(t).media=e,Mte(e).videoRenditions=t),t};"audioRenditions"in e.prototype||Object.defineProperty(e.prototype,"audioRenditions",{get(){return i(this)}});let i=e=>{let t=Mte(e).audioRenditions;return t||(t=new rne,Mte(t).media=e,Mte(e).audioRenditions=t),t};return e}function bne(e,t){var n;if(null!=e&&e.prototype)return null==(n=Object.getOwnPropertyDescriptor(e.prototype,`${t}Tracks`))?void 0:n.get}qee.push("castchange","entercast","leavecast");var wne,Ene,xne,_ne,Ane,Tne,Sne,kne,Cne,Ine,Rne,Dne={BEACON_COLLECTION_DOMAIN:"beacon-collection-domain",CUSTOM_DOMAIN:"custom-domain",DEBUG:"debug",DISABLE_TRACKING:"disable-tracking",DISABLE_COOKIES:"disable-cookies",DRM_TOKEN:"drm-token",PLAYBACK_TOKEN:"playback-token",ENV_KEY:"env-key",MAX_RESOLUTION:"max-resolution",MIN_RESOLUTION:"min-resolution",RENDITION_ORDER:"rendition-order",PROGRAM_START_TIME:"program-start-time",PROGRAM_END_TIME:"program-end-time",ASSET_START_TIME:"asset-start-time",ASSET_END_TIME:"asset-end-time",METADATA_URL:"metadata-url",PLAYBACK_ID:"playback-id",PLAYER_SOFTWARE_NAME:"player-software-name",PLAYER_SOFTWARE_VERSION:"player-software-version",PLAYER_INIT_TIME:"player-init-time",PREFER_CMCD:"prefer-cmcd",PREFER_PLAYBACK:"prefer-playback",START_TIME:"start-time",STREAM_TYPE:"stream-type",TARGET_LIVE_WINDOW:"target-live-window",LIVE_EDGE_OFFSET:"live-edge-offset",TYPE:"type",LOGO:"logo"},Lne=Object.values(Dne),Pne=Hee,Mne="mux-video",Nne=class extends ete{constructor(){super(),Mee(this,Ine),Mee(this,wne),Mee(this,Ene),Mee(this,xne),Mee(this,_ne,{}),Mee(this,Ane,{}),Mee(this,Tne),Mee(this,Sne),Mee(this,kne),Mee(this,Cne),Nee(this,xne,Z7())}static get NAME(){return Mne}static get VERSION(){return Pne}static get observedAttributes(){var e;return[...Lne,...null!=(e=ete.observedAttributes)?e:[]]}static getTemplateHTML(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=super.getTemplateHTML(e),n="false"!==e.logo&&void 0!==e.logo,r=e.logo&&""!==e.logo,i=e.logo;return`\n      ${t}\n      ${n?`\n      <style>\n        :host {\n          position: relative;\n        }\n        :host slot[name="logo"] {\n          display: flex;\n          justify-content: end;\n          position: absolute;\n          top: 1rem;\n          right: 1rem;\n\n        }\n         :host slot[name="logo"] .logo{\n          width: 5rem;\n          pointer-events: none;\n          user-select: none;\n         }\n      </style>\n      <slot name="logo">\n        ${r?`<img class="logo" part="logo" src="${i}" />`:'\n<svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" class="logo" part="logo" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2" viewBox="0 0 1600 500"><g fill="#fff"><path d="M994.287 93.486c-17.121 0-31-13.879-31-31 0-17.121 13.879-31 31-31 17.121 0 31 13.879 31 31 0 17.121-13.879 31-31 31m0-93.486c-34.509 0-62.484 27.976-62.484 62.486v187.511c0 68.943-56.09 125.033-125.032 125.033s-125.03-56.09-125.03-125.033V62.486C681.741 27.976 653.765 0 619.256 0s-62.484 27.976-62.484 62.486v187.511C556.772 387.85 668.921 500 806.771 500c137.851 0 250.001-112.15 250.001-250.003V62.486c0-34.51-27.976-62.486-62.485-62.486M1537.51 468.511c-17.121 0-31-13.879-31-31 0-17.121 13.879-31 31-31 17.121 0 31 13.879 31 31 0 17.121-13.879 31-31 31m-275.883-218.509-143.33 143.329c-24.402 24.402-24.402 63.966 0 88.368 24.402 24.402 63.967 24.402 88.369 0l143.33-143.329 143.328 143.329c24.402 24.4 63.967 24.402 88.369 0 24.403-24.402 24.403-63.966.001-88.368l-143.33-143.329.001-.004 143.329-143.329c24.402-24.402 24.402-63.965 0-88.367s-63.967-24.402-88.369 0L1349.996 161.63 1206.667 18.302c-24.402-24.401-63.967-24.402-88.369 0s-24.402 63.965 0 88.367l143.329 143.329v.004ZM437.511 468.521c-17.121 0-31-13.879-31-31 0-17.121 13.879-31 31-31 17.121 0 31 13.879 31 31 0 17.121-13.879 31-31 31M461.426 4.759C438.078-4.913 411.2.432 393.33 18.303L249.999 161.632 106.669 18.303C88.798.432 61.922-4.913 38.573 4.759 15.224 14.43-.001 37.214-.001 62.488v375.026c0 34.51 27.977 62.486 62.487 62.486 34.51 0 62.486-27.976 62.486-62.486V213.341l80.843 80.844c24.404 24.402 63.965 24.402 88.369 0l80.843-80.844v224.173c0 34.51 27.976 62.486 62.486 62.486s62.486-27.976 62.486-62.486V62.488c0-25.274-15.224-48.058-38.573-57.729" style="fill-rule:nonzero"/></g></svg>'}\n      </slot>\n    `:""}\n    `}get preferCmcd(){var e;return null!=(e=this.getAttribute(Dne.PREFER_CMCD))?e:void 0}set preferCmcd(e){e!==this.preferCmcd&&(e?q8.includes(e)?this.setAttribute(Dne.PREFER_CMCD,e):console.warn(`Invalid value for preferCmcd. Must be one of ${q8.join()}`):this.removeAttribute(Dne.PREFER_CMCD))}get playerInitTime(){return this.hasAttribute(Dne.PLAYER_INIT_TIME)?+this.getAttribute(Dne.PLAYER_INIT_TIME):Pee(this,xne)}set playerInitTime(e){e!=this.playerInitTime&&(null==e?this.removeAttribute(Dne.PLAYER_INIT_TIME):this.setAttribute(Dne.PLAYER_INIT_TIME,""+ +e))}get playerSoftwareName(){var e;return null!=(e=Pee(this,kne))?e:Mne}set playerSoftwareName(e){Nee(this,kne,e)}get playerSoftwareVersion(){var e;return null!=(e=Pee(this,Sne))?e:Pne}set playerSoftwareVersion(e){Nee(this,Sne,e)}get _hls(){var e;return null==(e=Pee(this,wne))?void 0:e.engine}get mux(){var e;return null==(e=this.nativeEl)?void 0:e.mux}get error(){var e;return null!=(e=ree(this.nativeEl))?e:null}get errorTranslator(){return Pee(this,Cne)}set errorTranslator(e){Nee(this,Cne,e)}get src(){return this.getAttribute("src")}set src(e){e!==this.src&&(null==e?this.removeAttribute("src"):this.setAttribute("src",e))}get type(){var e;return null!=(e=this.getAttribute(Dne.TYPE))?e:void 0}set type(e){e!==this.type&&(e?this.setAttribute(Dne.TYPE,e):this.removeAttribute(Dne.TYPE))}get autoplay(){let e=this.getAttribute("autoplay");return null!==e&&(""===e||e)}set autoplay(e){e!==this.autoplay&&(e?this.setAttribute("autoplay","string"==typeof e?e:""):this.removeAttribute("autoplay"))}get preload(){let e=this.getAttribute("preload");return""===e?"auto":["none","metadata","auto"].includes(e)?e:super.preload}set preload(e){e!=this.getAttribute("preload")&&(["","none","metadata","auto"].includes(e)?this.setAttribute("preload",e):this.removeAttribute("preload"))}get debug(){return null!=this.getAttribute(Dne.DEBUG)}set debug(e){e!==this.debug&&(e?this.setAttribute(Dne.DEBUG,""):this.removeAttribute(Dne.DEBUG))}get disableTracking(){return this.hasAttribute(Dne.DISABLE_TRACKING)}set disableTracking(e){e!==this.disableTracking&&this.toggleAttribute(Dne.DISABLE_TRACKING,!!e)}get disableCookies(){return this.hasAttribute(Dne.DISABLE_COOKIES)}set disableCookies(e){e!==this.disableCookies&&(e?this.setAttribute(Dne.DISABLE_COOKIES,""):this.removeAttribute(Dne.DISABLE_COOKIES))}get startTime(){let e=this.getAttribute(Dne.START_TIME);if(null==e)return;let t=+e;return Number.isNaN(t)?void 0:t}set startTime(e){e!==this.startTime&&(null==e?this.removeAttribute(Dne.START_TIME):this.setAttribute(Dne.START_TIME,`${e}`))}get playbackId(){var e;return this.hasAttribute(Dne.PLAYBACK_ID)?this.getAttribute(Dne.PLAYBACK_ID):null!=(e=nee(this.src))?e:void 0}set playbackId(e){e!==this.playbackId&&(e?this.setAttribute(Dne.PLAYBACK_ID,e):this.removeAttribute(Dne.PLAYBACK_ID))}get maxResolution(){var e;return null!=(e=this.getAttribute(Dne.MAX_RESOLUTION))?e:void 0}set maxResolution(e){e!==this.maxResolution&&(e?this.setAttribute(Dne.MAX_RESOLUTION,e):this.removeAttribute(Dne.MAX_RESOLUTION))}get minResolution(){var e;return null!=(e=this.getAttribute(Dne.MIN_RESOLUTION))?e:void 0}set minResolution(e){e!==this.minResolution&&(e?this.setAttribute(Dne.MIN_RESOLUTION,e):this.removeAttribute(Dne.MIN_RESOLUTION))}get renditionOrder(){var e;return null!=(e=this.getAttribute(Dne.RENDITION_ORDER))?e:void 0}set renditionOrder(e){e!==this.renditionOrder&&(e?this.setAttribute(Dne.RENDITION_ORDER,e):this.removeAttribute(Dne.RENDITION_ORDER))}get programStartTime(){let e=this.getAttribute(Dne.PROGRAM_START_TIME);if(null==e)return;let t=+e;return Number.isNaN(t)?void 0:t}set programStartTime(e){null==e?this.removeAttribute(Dne.PROGRAM_START_TIME):this.setAttribute(Dne.PROGRAM_START_TIME,`${e}`)}get programEndTime(){let e=this.getAttribute(Dne.PROGRAM_END_TIME);if(null==e)return;let t=+e;return Number.isNaN(t)?void 0:t}set programEndTime(e){null==e?this.removeAttribute(Dne.PROGRAM_END_TIME):this.setAttribute(Dne.PROGRAM_END_TIME,`${e}`)}get assetStartTime(){let e=this.getAttribute(Dne.ASSET_START_TIME);if(null==e)return;let t=+e;return Number.isNaN(t)?void 0:t}set assetStartTime(e){null==e?this.removeAttribute(Dne.ASSET_START_TIME):this.setAttribute(Dne.ASSET_START_TIME,`${e}`)}get assetEndTime(){let e=this.getAttribute(Dne.ASSET_END_TIME);if(null==e)return;let t=+e;return Number.isNaN(t)?void 0:t}set assetEndTime(e){null==e?this.removeAttribute(Dne.ASSET_END_TIME):this.setAttribute(Dne.ASSET_END_TIME,`${e}`)}get customDomain(){var e;return null!=(e=this.getAttribute(Dne.CUSTOM_DOMAIN))?e:void 0}set customDomain(e){e!==this.customDomain&&(e?this.setAttribute(Dne.CUSTOM_DOMAIN,e):this.removeAttribute(Dne.CUSTOM_DOMAIN))}get drmToken(){var e;return null!=(e=this.getAttribute(Dne.DRM_TOKEN))?e:void 0}set drmToken(e){e!==this.drmToken&&(e?this.setAttribute(Dne.DRM_TOKEN,e):this.removeAttribute(Dne.DRM_TOKEN))}get playbackToken(){var e,t,n,r;if(this.hasAttribute(Dne.PLAYBACK_TOKEN))return null!=(e=this.getAttribute(Dne.PLAYBACK_TOKEN))?e:void 0;if(this.hasAttribute(Dne.PLAYBACK_ID)){let[,e]=X8(null!=(t=this.playbackId)?t:"");return null!=(n=new URLSearchParams(e).get("token"))?n:void 0}return this.src&&null!=(r=new URLSearchParams(this.src).get("token"))?r:void 0}set playbackToken(e){e!==this.playbackToken&&(e?this.setAttribute(Dne.PLAYBACK_TOKEN,e):this.removeAttribute(Dne.PLAYBACK_TOKEN))}get tokens(){let e=this.getAttribute(Dne.PLAYBACK_TOKEN),t=this.getAttribute(Dne.DRM_TOKEN);return{...Pee(this,Ane),...null!=e?{playback:e}:{},...null!=t?{drm:t}:{}}}set tokens(e){Nee(this,Ane,null!=e?e:{})}get ended(){return cee(this.nativeEl,this._hls)}get envKey(){var e;return null!=(e=this.getAttribute(Dne.ENV_KEY))?e:void 0}set envKey(e){e!==this.envKey&&(e?this.setAttribute(Dne.ENV_KEY,e):this.removeAttribute(Dne.ENV_KEY))}get beaconCollectionDomain(){var e;return null!=(e=this.getAttribute(Dne.BEACON_COLLECTION_DOMAIN))?e:void 0}set beaconCollectionDomain(e){e!==this.beaconCollectionDomain&&(e?this.setAttribute(Dne.BEACON_COLLECTION_DOMAIN,e):this.removeAttribute(Dne.BEACON_COLLECTION_DOMAIN))}get streamType(){var e;return null!=(e=this.getAttribute(Dne.STREAM_TYPE))?e:iee(this.nativeEl)}set streamType(e){e!==this.streamType&&(e?this.setAttribute(Dne.STREAM_TYPE,e):this.removeAttribute(Dne.STREAM_TYPE))}get targetLiveWindow(){return this.hasAttribute(Dne.TARGET_LIVE_WINDOW)?+this.getAttribute(Dne.TARGET_LIVE_WINDOW):(e=>{var t,n;return null!=(n=null==(t=K7.get(e))?void 0:t.targetLiveWindow)?n:Number.NaN})(this.nativeEl)}set targetLiveWindow(e){e!=this.targetLiveWindow&&(null==e?this.removeAttribute(Dne.TARGET_LIVE_WINDOW):this.setAttribute(Dne.TARGET_LIVE_WINDOW,""+ +e))}get liveEdgeStart(){var e,t;if(this.hasAttribute(Dne.LIVE_EDGE_OFFSET)){let{liveEdgeOffset:n}=this,r=null!=(e=this.nativeEl.seekable.end(0))?e:0,i=null!=(t=this.nativeEl.seekable.start(0))?t:0;return Math.max(i,r-n)}return(e=>{var t;let n=null==(t=K7.get(e))?void 0:t.liveEdgeStartOffset;if("number"!=typeof n)return Number.NaN;let r=aee(e);return r.length?r.end(r.length-1)-n:Number.NaN})(this.nativeEl)}get liveEdgeOffset(){if(this.hasAttribute(Dne.LIVE_EDGE_OFFSET))return+this.getAttribute(Dne.LIVE_EDGE_OFFSET)}set liveEdgeOffset(e){e!=this.liveEdgeOffset&&(null==e?this.removeAttribute(Dne.LIVE_EDGE_OFFSET):this.setAttribute(Dne.LIVE_EDGE_OFFSET,""+ +e))}get seekable(){return aee(this.nativeEl)}async addCuePoints(e){return v7(this.nativeEl,e)}get activeCuePoint(){return b7(this.nativeEl)}get cuePoints(){return function(e){let t=p7(e,(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{label:m7}).label,"metadata");return null!=t&&t.cues?Array.from(t.cues,(e=>y7(e))):[]}(this.nativeEl)}async addChapters(e){return _7(this.nativeEl,e)}get activeChapter(){return A7(this.nativeEl)}get chapters(){return function(e){var t;let n=p7(e,(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{label:w7}).label,"chapters");return null!=(t=null==n?void 0:n.cues)&&t.length?Array.from(n.cues,(e=>x7(e))):[]}(this.nativeEl)}getStartDate(){return function(e,t){if(t){let n=t.playingDate;if(null!=n)return new Date(n.getTime()-1e3*e.currentTime)}return"function"==typeof e.getStartDate?e.getStartDate():new Date(NaN)}(this.nativeEl,this._hls)}get currentPdt(){return function(e,t){if(t&&t.playingDate)return t.playingDate;if("function"==typeof e.getStartDate){let t=e.getStartDate();return new Date(t.getTime()+1e3*e.currentTime)}return new Date(NaN)}(this.nativeEl,this._hls)}get preferPlayback(){let e=this.getAttribute(Dne.PREFER_PLAYBACK);if(e===W8||e===z8)return e}set preferPlayback(e){e!==this.preferPlayback&&(e===W8||e===z8?this.setAttribute(Dne.PREFER_PLAYBACK,e):this.removeAttribute(Dne.PREFER_PLAYBACK))}get metadata(){return{...this.getAttributeNames().filter((e=>e.startsWith("metadata-")&&![Dne.METADATA_URL].includes(e))).reduce(((e,t)=>{let n=this.getAttribute(t);return null!=n&&(e[t.replace(/^metadata-/,"").replace(/-/g,"_")]=n),e}),{}),...Pee(this,_ne)}}set metadata(e){Nee(this,_ne,null!=e?e:{}),this.mux&&this.mux.emit("hb",Pee(this,_ne))}get _hlsConfig(){return Pee(this,Tne)}set _hlsConfig(e){Nee(this,Tne,e)}get logo(){return this.getAttribute(Dne.LOGO)}set logo(e){e?this.setAttribute(Dne.LOGO,e):this.removeAttribute(Dne.LOGO)}load(){Nee(this,wne,uee(this,this.nativeEl,Pee(this,wne)))}unload(){dee(this.nativeEl,Pee(this,wne)),Nee(this,wne,void 0)}attributeChangedCallback(e,t,n){var r,i;switch(ete.observedAttributes.includes(e)&&!["src","autoplay","preload"].includes(e)&&super.attributeChangedCallback(e,t,n),e){case Dne.PLAYER_SOFTWARE_NAME:this.playerSoftwareName=null!=n?n:void 0;break;case Dne.PLAYER_SOFTWARE_VERSION:this.playerSoftwareVersion=null!=n?n:void 0;break;case"src":{let e=!!t,r=!!n;!e&&r?Oee(this,Ine,Rne).call(this):e&&!r?this.unload():e&&r&&(this.unload(),Oee(this,Ine,Rne).call(this));break}case"autoplay":if(n===t)break;null==(r=Pee(this,wne))||r.setAutoplay(this.autoplay);break;case"preload":if(n===t)break;null==(i=Pee(this,wne))||i.setPreload(n);break;case Dne.PLAYBACK_ID:this.src=eee(this);break;case Dne.DEBUG:{let e=this.debug;this.mux&&console.info("Cannot toggle debug mode of mux data after initialization. Make sure you set all metadata to override before setting the src."),this._hls&&(this._hls.config.debug=e);break}case Dne.METADATA_URL:n&&fetch(n).then((e=>e.json())).then((e=>this.metadata=e)).catch((()=>console.error(`Unable to load or parse metadata JSON from metadata-url ${n}!`)));break;case Dne.STREAM_TYPE:(null==n||n!==t)&&this.dispatchEvent(new CustomEvent("streamtypechange",{composed:!0,bubbles:!0}));break;case Dne.TARGET_LIVE_WINDOW:(null==n||n!==t)&&this.dispatchEvent(new CustomEvent("targetlivewindowchange",{composed:!0,bubbles:!0,detail:this.targetLiveWindow}))}}connectedCallback(){var e;null==(e=super.connectedCallback)||e.call(this),this.nativeEl&&this.src&&!Pee(this,wne)&&Oee(this,Ine,Rne).call(this)}disconnectedCallback(){this.unload()}};wne=new WeakMap,Ene=new WeakMap,xne=new WeakMap,_ne=new WeakMap,Ane=new WeakMap,Tne=new WeakMap,Sne=new WeakMap,kne=new WeakMap,Cne=new WeakMap,Ine=new WeakSet,Rne=async function(){Pee(this,Ene)||(await Nee(this,Ene,Promise.resolve()),Nee(this,Ene,null),this.load())};var One,jne=class extends(Dte(yne(Nne))){constructor(){super(...arguments),Mee(this,One)}get muxCastCustomData(){return{mux:{playbackId:this.playbackId,minResolution:this.minResolution,maxResolution:this.maxResolution,renditionOrder:this.renditionOrder,customDomain:this.customDomain,tokens:{drm:this.drmToken},envKey:this.envKey,metadata:this.metadata,disableCookies:this.disableCookies,disableTracking:this.disableTracking,beaconCollectionDomain:this.beaconCollectionDomain,startTime:this.startTime,preferCmcd:this.preferCmcd}}}get castCustomData(){var e;return null!=(e=Pee(this,One))?e:this.muxCastCustomData}set castCustomData(e){Nee(this,One,e)}};One=new WeakMap,zee.customElements.get("mux-video")||(zee.customElements.define("mux-video",jne),zee.MuxVideoElement=jne);var Fne,Une,Bne,$ne,Vne,Wne,zne,Hne,qne,Gne,Kne,Yne=jne,Qne=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},Xne=(e,t,n)=>(Qne(e,t,"read from private field"),n?n.call(e):t.get(e)),Zne=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},Jne=(e,t,n,r)=>(Qne(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n);const ere={processCallback(e,t,n){if(n)for(const[r,i]of t)if(r in n){const e=n[r];"boolean"===typeof e&&i instanceof lre&&"boolean"===typeof i.element[i.attributeName]?i.booleanValue=e:"function"===typeof e&&i instanceof lre?i.element[i.attributeName]=e:i.value=e}}};class tre extends Wz.DocumentFragment{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ere;var r;super(),Zne(this,Fne,void 0),Zne(this,Une,void 0),this.append(e.content.cloneNode(!0)),Jne(this,Fne,nre(this)),Jne(this,Une,n),null==(r=n.createCallback)||r.call(n,this,Xne(this,Fne),t),n.processCallback(this,Xne(this,Fne),t)}update(e){Xne(this,Une).processCallback(this,Xne(this,Fne),e)}}Fne=new WeakMap,Une=new WeakMap;const nre=function(e){let t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];for(const i of e.attributes||[])if(i.value.includes("{{")){const a=new sre;for([t,n]of ire(i.value))if(t){const t=new lre(e,i.name,i.namespaceURI);a.append(t),r.push([n,t])}else a.append(n);i.value=a.toString()}for(const i of e.childNodes)if(1!==i.nodeType||i instanceof HTMLTemplateElement){const a=i.data;if(1===i.nodeType||a.includes("{{")){const o=[];if(a)for([t,n]of ire(a))if(t){const t=new cre(e);o.push(t),r.push([n,t])}else o.push(new Text(n));else if(i instanceof HTMLTemplateElement){const t=new ure(e,i);o.push(t),r.push([t.expression,t])}i.replaceWith(...o.flatMap((e=>e.replacementNodes||[e])))}}else nre(i,r);return r},rre={},ire=e=>{let t,n="",r=0,i=rre[e],a=0;if(i)return i;for(i=[];t=e[a];a++)"{"===t&&"{"===e[a+1]&&"\\"!==e[a-1]&&e[a+2]&&1==++r?(n&&i.push([0,n]),n="",a++):"}"!==t||"}"!==e[a+1]||"\\"===e[a-1]||--r?n+=t||"":(i.push([1,n.trim()]),n="",a++);return n&&i.push([0,(r>0?"{{":"")+n]),rre[e]=i};class are{get value(){return""}set value(e){}toString(){return this.value}}const ore=new WeakMap;class sre{constructor(){Zne(this,Bne,[])}[Symbol.iterator](){return Xne(this,Bne).values()}get length(){return Xne(this,Bne).length}item(e){return Xne(this,Bne)[e]}append(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(const r of t)r instanceof lre&&ore.set(r,this),Xne(this,Bne).push(r)}toString(){return Xne(this,Bne).join("")}}Bne=new WeakMap;class lre extends are{constructor(e,t,n){super(),Zne(this,Hne),Zne(this,$ne,""),Zne(this,Vne,void 0),Zne(this,Wne,void 0),Zne(this,zne,void 0),Jne(this,Vne,e),Jne(this,Wne,t),Jne(this,zne,n)}get attributeName(){return Xne(this,Wne)}get attributeNamespace(){return Xne(this,zne)}get element(){return Xne(this,Vne)}get value(){return Xne(this,$ne)}set value(e){Xne(this,$ne)!==e&&(Jne(this,$ne,e),Xne(this,Hne,qne)&&1!==Xne(this,Hne,qne).length?Xne(this,Vne).setAttributeNS(Xne(this,zne),Xne(this,Wne),Xne(this,Hne,qne).toString()):null==e?Xne(this,Vne).removeAttributeNS(Xne(this,zne),Xne(this,Wne)):Xne(this,Vne).setAttributeNS(Xne(this,zne),Xne(this,Wne),e))}get booleanValue(){return Xne(this,Vne).hasAttributeNS(Xne(this,zne),Xne(this,Wne))}set booleanValue(e){if(Xne(this,Hne,qne)&&1!==Xne(this,Hne,qne).length)throw new DOMException("Value is not fully templatized");this.value=e?"":null}}$ne=new WeakMap,Vne=new WeakMap,Wne=new WeakMap,zne=new WeakMap,Hne=new WeakSet,qne=function(){return ore.get(this)};class cre extends are{constructor(e,t){super(),Zne(this,Gne,void 0),Zne(this,Kne,void 0),Jne(this,Gne,e),Jne(this,Kne,t?[...t]:[new Text])}get replacementNodes(){return Xne(this,Kne)}get parentNode(){return Xne(this,Gne)}get nextSibling(){return Xne(this,Kne)[Xne(this,Kne).length-1].nextSibling}get previousSibling(){return Xne(this,Kne)[0].previousSibling}get value(){return Xne(this,Kne).map((e=>e.textContent)).join("")}set value(e){this.replace(e)}replace(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t.flat().flatMap((e=>null==e?[new Text]:e.forEach?[...e]:11===e.nodeType?[...e.childNodes]:e.nodeType?[e]:[new Text(e)]));r.length||r.push(new Text),Jne(this,Kne,function(e,t,n){let r,i,a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=0,l=n.length,c=t.length;for(;s<l&&s<c&&t[s]==n[s];)s++;for(;s<l&&s<c&&n[l-1]==t[c-1];)o=n[(--c,--l)];if(s==c)for(;s<l;)e.insertBefore(n[s++],o);if(s==l)for(;s<c;)e.removeChild(t[s++]);else{for(r=t[s];s<l;)a=n[s++],i=r?r.nextSibling:o,r==a?r=i:s<l&&n[s]==i?(e.replaceChild(a,r),r=i):e.insertBefore(a,r);for(;r!=o;)i=r.nextSibling,e.removeChild(r),r=i}return n}(Xne(this,Kne)[0].parentNode,Xne(this,Kne),r,this.nextSibling))}}Gne=new WeakMap,Kne=new WeakMap;class ure extends cre{constructor(e,t){const n=t.getAttribute("directive")||t.getAttribute("type");let r=t.getAttribute("expression")||t.getAttribute(n)||"";r.startsWith("{{")&&(r=r.trim().slice(2,-2).trim()),super(e),this.expression=r,this.template=t,this.directive=n}}const dre={string:e=>String(e)};class hre{constructor(e){this.template=e,this.state=void 0}}const pre=new WeakMap,fre=new WeakMap,mre={partial:(e,t)=>{t[e.expression]=new hre(e.template)},if:(e,t)=>{var n;if(bre(e.expression,t))if(pre.get(e)!==e.template){pre.set(e,e.template);const n=new tre(e.template,t,vre);e.replace(n),fre.set(e,n)}else null==(n=fre.get(e))||n.update(t);else e.replace(""),pre.delete(e),fre.delete(e)}},gre=Object.keys(mre),vre={processCallback(e,t,n){var r,i;if(n)for(const[a,o]of t){if(o instanceof ure){if(!o.directive){const e=gre.find((e=>o.template.hasAttribute(e)));e&&(o.directive=e,o.expression=o.template.getAttribute(e))}null==(r=mre[o.directive])||r.call(mre,o,n);continue}let e=bre(a,n);e instanceof hre?pre.get(o)!==e.template?(pre.set(o,e.template),e=new tre(e.template,e.state,vre),o.value=e,fre.set(o,e)):null==(i=fre.get(o))||i.update(e.state):e?(o instanceof lre&&o.attributeName.startsWith("aria-")&&(e=String(e)),o instanceof lre?"boolean"===typeof e?o.booleanValue=e:"function"===typeof e?o.element[o.attributeName]=e:o.value=e:(o.value=e,pre.delete(o),fre.delete(o))):o instanceof lre?o.value=void 0:(o.value=void 0,pre.delete(o),fre.delete(o))}}},yre={"!":e=>!e,"!!":e=>!!e,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,">":(e,t)=>e>t,">=":(e,t)=>e>=t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,"??":(e,t)=>null!=e?e:t,"|":(e,t)=>{var n;return null==(n=dre[t])?void 0:n.call(dre,e)}};function bre(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n,r,i,a,o,s,l;const c=function(e){return function(e,t){let n,r,i;const a=[];for(;e;){i=null,n=e.length;for(const a in t)r=t[a].exec(e),r&&r.index<n&&(i={token:r[0],type:a,matches:r.slice(1)},n=r.index);n&&a.push({token:e.substr(0,n),type:void 0}),i&&a.push(i),e=e.substr(n+(i?i.token.length:0))}return a}(e,{boolean:/true|false/,number:/-?\d+\.?\d*/,string:/(["'])((?:\\.|[^\\])*?)\1/,operator:/[!=><][=!]?|\?\?|\|/,ws:/\s+/,param:/[$a-z_][$\w]*/i}).filter((e=>{let{type:t}=e;return"ws"!==t}))}(e);if(0===c.length||c.some((e=>{let{type:t}=e;return!t})))return wre(e);if(">"===(null==(n=c[0])?void 0:n.token)){const n=t[null==(r=c[1])?void 0:r.token];if(!n)return wre(e);const s={...t};n.state=s;const l=c.slice(2);for(let e=0;e<l.length;e+=3){const n=null==(i=l[e])?void 0:i.token,r=null==(a=l[e+1])?void 0:a.token,c=null==(o=l[e+2])?void 0:o.token;n&&"="===r&&(s[n]=xre(c,t))}return n}if(1===c.length)return Ere(c[0])?xre(c[0].token,t):wre(e);if(2===c.length){const n=null==(s=c[0])?void 0:s.token,r=yre[n];if(!r||!Ere(c[1]))return wre(e);return r(xre(c[1].token,t))}if(3===c.length){const n=null==(l=c[1])?void 0:l.token,r=yre[n];if(!r||!Ere(c[0])||!Ere(c[2]))return wre(e);const i=xre(c[0].token,t);if("|"===n)return r(i,c[2].token);return r(i,xre(c[2].token,t))}}function wre(e){return console.warn(`Warning: invalid expression \`${e}\``),!1}function Ere(e){let{type:t}=e;return["number","boolean","string","param"].includes(t)}function xre(e,t){const n=e[0],r=e.slice(-1);return"true"===e||"false"===e?"true"===e:n===r&&["'",'"'].includes(n)?e.slice(1,-1):Sz(e)?parseFloat(e):t[e]}var _re,Are,Tre,Sre,kre,Cre,Ire,Rre=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},Dre=(e,t,n)=>(Rre(e,t,"read from private field"),n?n.call(e):t.get(e)),Lre=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},Pre=(e,t,n,r)=>(Rre(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),Mre=(e,t,n)=>(Rre(e,t,"access private method"),n);const Nre={mediatargetlivewindow:"targetlivewindow",mediastreamtype:"streamtype"},Ore=zz.createElement("template");Ore.innerHTML="\n  <style>\n    :host {\n      display: inline-block;\n      line-height: 0;\n    }\n\n    media-controller {\n      width: 100%;\n      height: 100%;\n    }\n\n    media-captions-button:not([mediasubtitleslist]),\n    media-captions-menu:not([mediasubtitleslist]),\n    media-captions-menu-button:not([mediasubtitleslist]),\n    media-audio-track-menu[mediaaudiotrackunavailable],\n    media-audio-track-menu-button[mediaaudiotrackunavailable],\n    media-rendition-menu[mediarenditionunavailable],\n    media-rendition-menu-button[mediarenditionunavailable],\n    media-volume-range[mediavolumeunavailable],\n    media-airplay-button[mediaairplayunavailable],\n    media-fullscreen-button[mediafullscreenunavailable],\n    media-cast-button[mediacastunavailable],\n    media-pip-button[mediapipunavailable] {\n      display: none;\n    }\n  </style>\n";class jre extends Wz.HTMLElement{constructor(){super(),Lre(this,Sre),Lre(this,Cre),Lre(this,_re,void 0),Lre(this,Are,void 0),Lre(this,Tre,void 0),this.shadowRoot?this.renderRoot=this.shadowRoot:(this.renderRoot=this.attachShadow({mode:"open"}),this.createRenderer());const e=new MutationObserver((e=>{var t;this.mediaController&&!(null==(t=this.mediaController)?void 0:t.breakpointsComputed)||e.some((e=>{const t=e.target;return t===this||"media-controller"===t.localName&&(!!Nre[e.attributeName]||!!e.attributeName.startsWith("breakpoint"))}))&&this.render()}));e.observe(this,{attributes:!0}),e.observe(this.renderRoot,{attributes:!0,subtree:!0}),this.addEventListener(cz.BREAKPOINTS_COMPUTED,this.render),Mre(this,Sre,kre).call(this,"template")}get mediaController(){return this.renderRoot.querySelector("media-controller")}get template(){var e;return null!=(e=Dre(this,_re))?e:this.constructor.template}set template(e){Pre(this,Tre,null),Pre(this,_re,e),this.createRenderer()}get props(){var e,t,n;const r=[...Array.from(null!=(t=null==(e=this.mediaController)?void 0:e.attributes)?t:[]).filter((e=>{let{name:t}=e;return Nre[t]||t.startsWith("breakpoint")})),...Array.from(this.attributes)],i={};for(const a of r){const e=null!=(n=Nre[a.name])?n:Az(a.name);let{value:t}=a;null!=t?(Sz(t)&&(t=parseFloat(t)),i[e]=""===t||t):i[e]=!1}return i}attributeChangedCallback(e,t,n){"template"===e&&t!=n&&Mre(this,Cre,Ire).call(this)}connectedCallback(){Mre(this,Cre,Ire).call(this)}createRenderer(){this.template&&this.template!==Dre(this,Are)&&(Pre(this,Are,this.template),this.renderer=new tre(this.template,this.props,this.constructor.processor),this.renderRoot.textContent="",this.renderRoot.append(Ore.content.cloneNode(!0),this.renderer))}render(){var e;null==(e=this.renderer)||e.update(this.props)}}function Fre(e){let{anchor:t,floating:n,placement:r}=e;const i=function(e){let{anchor:t,floating:n}=e;return{anchor:Ure(t,n.offsetParent),floating:{x:0,y:0,width:n.offsetWidth,height:n.offsetHeight}}}({anchor:t,floating:n}),{x:a,y:o}=function(e,t){let{anchor:n,floating:r}=e;const i="x"===function(e){return["top","bottom"].includes(Bre(e))?"y":"x"}(t)?"y":"x",a="y"===i?"height":"width",o=Bre(t),s=n.x+n.width/2-r.width/2,l=n.y+n.height/2-r.height/2,c=n[a]/2-r[a]/2;let u;switch(o){case"top":u={x:s,y:n.y-r.height};break;case"bottom":u={x:s,y:n.y+n.height};break;case"right":u={x:n.x+n.width,y:l};break;case"left":u={x:n.x-r.width,y:l};break;default:u={x:n.x,y:n.y}}switch(t.split("-")[1]){case"start":u[i]-=c;break;case"end":u[i]+=c}return u}(i,r);return{x:a,y:o}}function Ure(e,t){var n;const r=e.getBoundingClientRect(),i=null!=(n=null==t?void 0:t.getBoundingClientRect())?n:{x:0,y:0};return{x:r.x-i.x,y:r.y-i.y,width:r.width,height:r.height}}function Bre(e){return e.split("-")[0]}_re=new WeakMap,Are=new WeakMap,Tre=new WeakMap,Sre=new WeakSet,kre=function(e){if(Object.prototype.hasOwnProperty.call(this,e)){const t=this[e];delete this[e],this[e]=t}},Cre=new WeakSet,Ire=function(){var e;const t=this.getAttribute("template");if(!t||t===Dre(this,Tre))return;const n=this.getRootNode(),r=null==(e=null==n?void 0:n.getElementById)?void 0:e.call(n,t);if(r)return Pre(this,Tre,t),Pre(this,_re,r),void this.createRenderer();(function(e){if(!/^(\/|\.\/|https?:\/\/)/.test(e))return!1;const t=/^https?:\/\//.test(e)?void 0:location.origin;try{new URL(e,t)}catch(Q_){return!1}return!0})(t)&&(Pre(this,Tre,t),async function(e){const t=await fetch(e);if(200!==t.status)throw new Error(`Failed to load resource: the server responded with a status of ${t.status}`);return t.text()}(t).then((e=>{const t=zz.createElement("template");t.innerHTML=e,Pre(this,_re,t),this.createRenderer()})).catch(console.error))},jre.observedAttributes=["template"],jre.processor=vre,Wz.customElements.get("media-theme")||Wz.customElements.define("media-theme",jre);class $re extends Event{constructor(e){let{action:t="auto",relatedTarget:n,...r}=e;super("invoke",r),this.action=t,this.relatedTarget=n}}class Vre extends Event{constructor(e){let{newState:t,oldState:n,...r}=e;super("toggle",r),this.newState=t,this.oldState=n}}var Wre,zre,Hre,qre,Gre,Kre,Yre,Qre,Xre,Zre,Jre,eie,tie,nie,rie,iie,aie,oie,sie,lie,cie,uie,die,hie,pie,fie,mie,gie,vie,yie,bie,wie,Eie,xie,_ie,Aie,Tie,Sie,kie,Cie,Iie,Rie,Die,Lie,Pie=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},Mie=(e,t,n)=>(Pie(e,t,"read from private field"),n?n.call(e):t.get(e)),Nie=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},Oie=(e,t,n,r)=>(Pie(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),jie=(e,t,n)=>(Pie(e,t,"access private method"),n);function Fie(e){let{type:t,text:n,value:r,checked:i}=e;const a=zz.createElement("media-chrome-menu-item");a.type=null!=t?t:"",a.part.add("menu-item"),t&&a.part.add(t),a.value=r,a.checked=i;const o=zz.createElement("span");return o.textContent=n,a.append(o),a}function Uie(e,t){let n=e.querySelector(`:scope > [slot="${t}"]`);if("SLOT"==(null==n?void 0:n.nodeName)&&(n=n.assignedElements({flatten:!0})[0]),n)return n=n.cloneNode(!0),n;const r=e.shadowRoot.querySelector(`[name="${t}"] > svg`);return r?r.cloneNode(!0):""}const Bie=zz.createElement("template");Bie.innerHTML='\n  <style>\n    :host {\n      font: var(--media-font,\n        var(--media-font-weight, normal)\n        var(--media-font-size, 14px) /\n        var(--media-text-content-height, var(--media-control-height, 24px))\n        var(--media-font-family, helvetica neue, segoe ui, roboto, arial, sans-serif));\n      color: var(--media-text-color, var(--media-primary-color, rgb(238 238 238)));\n      --_menu-bg: rgb(20 20 30 / .8);\n      background: var(--media-menu-background, var(--media-control-background, var(--media-secondary-color, var(--_menu-bg))));\n      border-radius: var(--media-menu-border-radius);\n      border: var(--media-menu-border, none);\n      display: var(--media-menu-display, inline-flex);\n      transition: var(--media-menu-transition-in,\n        visibility 0s,\n        opacity .2s ease-out,\n        transform .15s ease-out,\n        left .2s ease-in-out,\n        min-width .2s ease-in-out,\n        min-height .2s ease-in-out\n      ) !important;\n      \n      visibility: var(--media-menu-visibility, visible);\n      opacity: var(--media-menu-opacity, 1);\n      max-height: var(--media-menu-max-height, var(--_menu-max-height, 300px));\n      transform: var(--media-menu-transform-in, translateY(0) scale(1));\n      flex-direction: column;\n      \n      min-height: 0;\n      position: relative;\n      bottom: var(--_menu-bottom);\n      box-sizing: border-box;\n    } \n\n    @-moz-document url-prefix() {\n      :host{\n        --_menu-bg: rgb(20 20 30);\n      }\n    }\n\n    :host([hidden]) {\n      transition: var(--media-menu-transition-out,\n        visibility .15s ease-in,\n        opacity .15s ease-in,\n        transform .15s ease-in\n      ) !important;\n      visibility: var(--media-menu-hidden-visibility, hidden);\n      opacity: var(--media-menu-hidden-opacity, 0);\n      max-height: var(--media-menu-hidden-max-height,\n        var(--media-menu-max-height, var(--_menu-max-height, 300px)));\n      transform: var(--media-menu-transform-out, translateY(2px) scale(.99));\n      pointer-events: none;\n    }\n\n    :host([slot="submenu"]) {\n      background: none;\n      width: 100%;\n      min-height: 100%;\n      position: absolute;\n      bottom: 0;\n      right: -100%;\n    }\n\n    #container {\n      display: flex;\n      flex-direction: column;\n      min-height: 0;\n      transition: transform .2s ease-out;\n      transform: translate(0, 0);\n    }\n\n    #container.has-expanded {\n      transition: transform .2s ease-in;\n      transform: translate(-100%, 0);\n    }\n\n    button {\n      background: none;\n      color: inherit;\n      border: none;\n      padding: 0;\n      font: inherit;\n      outline: inherit;\n      display: inline-flex;\n      align-items: center;\n    }\n\n    slot[name="header"][hidden] {\n      display: none;\n    }\n\n    slot[name="header"] > *,\n    slot[name="header"]::slotted(*) {\n      padding: .4em .7em;\n      border-bottom: 1px solid rgb(255 255 255 / .25);\n      cursor: var(--media-cursor, default);\n    }\n\n    slot[name="header"] > button[part~="back"],\n    slot[name="header"]::slotted(button[part~="back"]) {\n      cursor: var(--media-cursor, pointer);\n    }\n\n    svg[part~="back"] {\n      height: var(--media-menu-icon-height, var(--media-control-height, 24px));\n      fill: var(--media-icon-color, var(--media-primary-color, rgb(238 238 238)));\n      display: block;\n      margin-right: .5ch;\n    }\n\n    slot:not([name]) {\n      gap: var(--media-menu-gap);\n      flex-direction: var(--media-menu-flex-direction, column);\n      overflow: var(--media-menu-overflow, hidden auto);\n      display: flex;\n      min-height: 0;\n    }\n\n    :host([role="menu"]) slot:not([name]) {\n      padding-block: .4em;\n    }\n\n    slot:not([name])::slotted([role="menu"]) {\n      background: none;\n    }\n\n    media-chrome-menu-item > span {\n      margin-right: .5ch;\n      max-width: var(--media-menu-item-max-width);\n      text-overflow: ellipsis;\n      overflow: hidden;\n    }\n  </style>\n  <style id="layout-row" media="width:0">\n\n    slot[name="header"] > *,\n    slot[name="header"]::slotted(*) {\n      padding: .4em .5em;\n    }\n\n    slot:not([name]) {\n      gap: var(--media-menu-gap, .25em);\n      flex-direction: var(--media-menu-flex-direction, row);\n      padding-inline: .5em;\n    }\n\n    media-chrome-menu-item {\n      padding: .3em .5em;\n    }\n\n    media-chrome-menu-item[aria-checked="true"] {\n      background: var(--media-menu-item-checked-background, rgb(255 255 255 / .2));\n    }\n\n    \n    media-chrome-menu-item::part(checked-indicator) {\n      display: var(--media-menu-item-checked-indicator-display, none);\n    }\n  </style>\n  <div id="container">\n    <slot name="header" hidden>\n      <button part="back button" aria-label="Back to previous menu">\n        <slot name="back-icon">\n          <svg aria-hidden="true" viewBox="0 0 20 24" part="back indicator">\n            <path d="m11.88 17.585.742-.669-4.2-4.665 4.2-4.666-.743-.669-4.803 5.335 4.803 5.334Z"/>\n          </svg>\n        </slot>\n        <slot name="title"></slot>\n      </button>\n    </slot>\n    <slot></slot>\n  </div>\n  <slot name="checked-indicator" hidden></slot>\n';const $ie="style",Vie="hidden",Wie="disabled",zie="anchor";class Hie extends Wz.HTMLElement{constructor(){super(),Nie(this,Qre),Nie(this,Jre),Nie(this,tie),Nie(this,rie),Nie(this,aie),Nie(this,cie),Nie(this,die),Nie(this,pie),Nie(this,mie),Nie(this,vie),Nie(this,bie),Nie(this,Eie),Nie(this,_ie),Nie(this,Tie),Nie(this,kie),Nie(this,Iie),Nie(this,Die),Nie(this,Wre,null),Nie(this,zre,null),Nie(this,Hre,null),Nie(this,qre,new Set),Nie(this,Gre,void 0),Nie(this,Kre,!1),Nie(this,Yre,null),Nie(this,Zre,(()=>{const e=Mie(this,qre),t=new Set(this.items);for(const n of e)t.has(n)||this.dispatchEvent(new CustomEvent("removemenuitem",{detail:n}));for(const n of t)e.has(n)||this.dispatchEvent(new CustomEvent("addmenuitem",{detail:n}));Oie(this,qre,t)})),Nie(this,sie,(()=>{jie(this,cie,uie).call(this),jie(this,die,hie).call(this,!1)})),Nie(this,lie,(()=>{jie(this,cie,uie).call(this)})),this.shadowRoot||(this.attachShadow({mode:"open"}),this.nativeEl=this.constructor.template.content.cloneNode(!0),this.shadowRoot.append(this.nativeEl)),this.container=this.shadowRoot.querySelector("#container"),this.defaultSlot=this.shadowRoot.querySelector("slot:not([name])"),this.shadowRoot.addEventListener("slotchange",this),Oie(this,Gre,new MutationObserver(Mie(this,Zre))),Mie(this,Gre).observe(this.defaultSlot,{childList:!0})}static get observedAttributes(){return[Wie,Vie,$ie,zie,az.MEDIA_CONTROLLER]}static formatMenuItemText(e,t){return e}enable(){this.addEventListener("click",this),this.addEventListener("focusout",this),this.addEventListener("keydown",this),this.addEventListener("invoke",this),this.addEventListener("toggle",this)}disable(){this.removeEventListener("click",this),this.removeEventListener("focusout",this),this.removeEventListener("keyup",this),this.removeEventListener("invoke",this),this.removeEventListener("toggle",this)}handleEvent(e){switch(e.type){case"slotchange":jie(this,Qre,Xre).call(this,e);break;case"invoke":jie(this,tie,nie).call(this,e);break;case"click":jie(this,pie,fie).call(this,e);break;case"toggle":jie(this,vie,yie).call(this,e);break;case"focusout":jie(this,Eie,xie).call(this,e);break;case"keydown":jie(this,_ie,Aie).call(this,e)}}connectedCallback(){var e,t;Oie(this,Yre,oH(this.shadowRoot,":host")),jie(this,Jre,eie).call(this),this.hasAttribute("disabled")||this.enable(),this.role||(this.role="menu"),Oie(this,Wre,Xz(this)),null==(t=null==(e=Mie(this,Wre))?void 0:e.associateElement)||t.call(e,this),this.hidden||(Kz(Gie(this),Mie(this,sie)),Kz(this,Mie(this,lie)))}disconnectedCallback(){var e,t;Yz(Gie(this),Mie(this,sie)),Yz(this,Mie(this,lie)),this.disable(),null==(t=null==(e=Mie(this,Wre))?void 0:e.unassociateElement)||t.call(e,this),Oie(this,Wre,null)}attributeChangedCallback(e,t,n){var r,i,a,o;e===Vie&&n!==t?(Mie(this,Kre)||Oie(this,Kre,!0),this.hidden?jie(this,aie,oie).call(this):jie(this,rie,iie).call(this),this.dispatchEvent(new Vre({oldState:this.hidden?"open":"closed",newState:this.hidden?"closed":"open",bubbles:!0}))):e===az.MEDIA_CONTROLLER?(t&&(null==(i=null==(r=Mie(this,Wre))?void 0:r.unassociateElement)||i.call(r,this),Oie(this,Wre,null)),n&&this.isConnected&&(Oie(this,Wre,Xz(this)),null==(o=null==(a=Mie(this,Wre))?void 0:a.associateElement)||o.call(a,this))):e===Wie&&n!==t?null==n?this.enable():this.disable():e===$ie&&n!==t&&jie(this,Jre,eie).call(this)}formatMenuItemText(e,t){return this.constructor.formatMenuItemText(e,t)}get anchor(){return this.getAttribute("anchor")}set anchor(e){this.setAttribute("anchor",`${e}`)}get anchorElement(){var e;return this.anchor?null==(e=rH(this))?void 0:e.querySelector(`#${this.anchor}`):null}get items(){return this.defaultSlot.assignedElements({flatten:!0}).filter(qie)}get radioGroupItems(){return this.items.filter((e=>"menuitemradio"===e.role))}get checkedItems(){return this.items.filter((e=>e.checked))}get value(){var e,t;return null!=(t=null==(e=this.checkedItems[0])?void 0:e.value)?t:""}set value(e){const t=this.items.find((t=>t.value===e));t&&jie(this,Die,Lie).call(this,t)}focus(){if(Oie(this,zre,nH()),this.items.length)return jie(this,Iie,Rie).call(this,this.items[0]),void this.items[0].focus();const e=this.querySelector('[autofocus], [tabindex]:not([tabindex="-1"]), [role="menu"]');null==e||e.focus()}handleSelect(e){var t;const n=jie(this,Tie,Sie).call(this,e);n&&(jie(this,Die,Lie).call(this,n,"checkbox"===n.type),Mie(this,Hre)&&!this.hidden&&(null==(t=Mie(this,zre))||t.focus(),this.hidden=!0))}get keysUsed(){return["Enter","Escape","Tab"," ","ArrowDown","ArrowUp","Home","End"]}handleMove(e){var t,n;const{key:r}=e,i=this.items,a=null!=(n=null!=(t=jie(this,Tie,Sie).call(this,e))?t:jie(this,kie,Cie).call(this))?n:i[0],o=i.indexOf(a);let s=Math.max(0,o);"ArrowDown"===r?s++:"ArrowUp"===r?s--:"Home"===e.key?s=0:"End"===e.key&&(s=i.length-1),s<0&&(s=i.length-1),s>i.length-1&&(s=0),jie(this,Iie,Rie).call(this,i[s]),i[s].focus()}}function qie(e){return["menuitem","menuitemradio","menuitemcheckbox"].includes(null==e?void 0:e.role)}function Gie(e){var t;return null!=(t=e.getAttribute("bounds")?tH(e,`#${e.getAttribute("bounds")}`):Qz(e)||e.parentElement)?t:e}Wre=new WeakMap,zre=new WeakMap,Hre=new WeakMap,qre=new WeakMap,Gre=new WeakMap,Kre=new WeakMap,Yre=new WeakMap,Qre=new WeakSet,Xre=function(e){const t=e.target;for(const n of t.assignedNodes({flatten:!0}))3===n.nodeType&&""===n.textContent.trim()&&n.remove();if(["header","title"].includes(t.name)){this.shadowRoot.querySelector('slot[name="header"]').hidden=0===t.assignedNodes().length}t.name||Mie(this,Zre).call(this)},Zre=new WeakMap,Jre=new WeakSet,eie=function(){var e;const t=this.shadowRoot.querySelector("#layout-row"),n=null==(e=getComputedStyle(this).getPropertyValue("--media-menu-layout"))?void 0:e.trim();t.setAttribute("media","row"===n?"":"width:0")},tie=new WeakSet,nie=function(e){Oie(this,Hre,e.relatedTarget),eH(this,e.relatedTarget)||(this.hidden=!this.hidden)},rie=new WeakSet,iie=function(){var e;null==(e=Mie(this,Hre))||e.setAttribute("aria-expanded","true"),this.addEventListener("transitionend",(()=>this.focus()),{once:!0}),Kz(Gie(this),Mie(this,sie)),Kz(this,Mie(this,lie))},aie=new WeakSet,oie=function(){var e;null==(e=Mie(this,Hre))||e.setAttribute("aria-expanded","false"),Yz(Gie(this),Mie(this,sie)),Yz(this,Mie(this,lie))},sie=new WeakMap,lie=new WeakMap,cie=new WeakSet,uie=function(e){if(this.hasAttribute("mediacontroller")&&!this.anchor)return;if(this.hidden||!this.anchorElement)return;const{x:t,y:n}=Fre({anchor:this.anchorElement,floating:this,placement:"top-start"});null!=e||(e=this.offsetWidth);const r=Gie(this).getBoundingClientRect(),i=r.width-t-e,a=r.height-n-this.offsetHeight,{style:o}=Mie(this,Yre);o.setProperty("position","absolute"),o.setProperty("right",`${Math.max(0,i)}px`),o.setProperty("--_menu-bottom",`${a}px`);const s=getComputedStyle(this),l=o.getPropertyValue("--_menu-bottom")===s.bottom?a:parseFloat(s.bottom),c=r.height-l-parseFloat(s.marginBottom);this.style.setProperty("--_menu-max-height",`${c}px`)},die=new WeakSet,hie=function(e){const t=this.querySelector('[role="menuitem"][aria-haspopup][aria-expanded="true"]'),n=null==t?void 0:t.querySelector('[role="menu"]'),{style:r}=Mie(this,Yre);if(e||r.setProperty("--media-menu-transition-in","none"),n){const e=n.offsetHeight,r=Math.max(n.offsetWidth,t.offsetWidth);this.style.setProperty("min-width",`${r}px`),this.style.setProperty("min-height",`${e}px`),jie(this,cie,uie).call(this,r)}else this.style.removeProperty("min-width"),this.style.removeProperty("min-height"),jie(this,cie,uie).call(this);r.removeProperty("--media-menu-transition-in")},pie=new WeakSet,fie=function(e){var t;if(e.stopPropagation(),e.composedPath().includes(Mie(this,mie,gie)))return null==(t=Mie(this,zre))||t.focus(),void(this.hidden=!0);const n=jie(this,Tie,Sie).call(this,e);n&&!n.hasAttribute("disabled")&&(jie(this,Iie,Rie).call(this,n),this.handleSelect(e))},mie=new WeakSet,gie=function(){var e;return null==(e=this.shadowRoot.querySelector('slot[name="header"]').assignedElements({flatten:!0}))?void 0:e.find((e=>e.matches('button[part~="back"]')))},vie=new WeakSet,yie=function(e){if(e.target===this)return;jie(this,bie,wie).call(this);const t=Array.from(this.querySelectorAll('[role="menuitem"][aria-haspopup]'));for(const n of t)n.invokeTargetElement!=e.target&&("open"!=e.newState||"true"!=n.getAttribute("aria-expanded")||n.invokeTargetElement.hidden||n.invokeTargetElement.dispatchEvent(new $re({relatedTarget:n})));for(const n of t)n.setAttribute("aria-expanded",`${!n.submenuElement.hidden}`);jie(this,die,hie).call(this,!0)},bie=new WeakSet,wie=function(){const e=this.querySelector('[role="menuitem"] > [role="menu"]:not([hidden])');this.container.classList.toggle("has-expanded",!!e)},Eie=new WeakSet,xie=function(e){var t;eH(this,e.relatedTarget)||(Mie(this,Kre)&&(null==(t=Mie(this,zre))||t.focus()),Mie(this,Hre)&&Mie(this,Hre)!==e.relatedTarget&&!this.hidden&&(this.hidden=!0))},_ie=new WeakSet,Aie=function(e){var t,n,r,i,a;const{key:o,ctrlKey:s,altKey:l,metaKey:c}=e;if(!(s||l||c)&&this.keysUsed.includes(o))if(e.preventDefault(),e.stopPropagation(),"Tab"===o){if(Mie(this,Kre))return void(this.hidden=!0);e.shiftKey?null==(n=null==(t=this.previousElementSibling)?void 0:t.focus)||n.call(t):null==(i=null==(r=this.nextElementSibling)?void 0:r.focus)||i.call(r),this.blur()}else"Escape"===o?(null==(a=Mie(this,zre))||a.focus(),Mie(this,Kre)&&(this.hidden=!0)):"Enter"===o||" "===o?this.handleSelect(e):this.handleMove(e)},Tie=new WeakSet,Sie=function(e){return e.composedPath().find((e=>["menuitemradio","menuitemcheckbox"].includes(e.role)))},kie=new WeakSet,Cie=function(){return this.items.find((e=>0===e.tabIndex))},Iie=new WeakSet,Rie=function(e){for(const t of this.items)t.tabIndex=t===e?0:-1},Die=new WeakSet,Lie=function(e,t){const n=[...this.checkedItems];"radio"===e.type&&this.radioGroupItems.forEach((e=>e.checked=!1)),e.checked=!t||!e.checked,this.checkedItems.some(((e,t)=>e!=n[t]))&&this.dispatchEvent(new Event("change",{bubbles:!0,composed:!0}))},Hie.template=Bie,Wz.customElements.get("media-chrome-menu")||Wz.customElements.define("media-chrome-menu",Hie);var Kie,Yie,Qie,Xie,Zie,Jie,eae,tae,nae,rae,iae,aae,oae,sae,lae,cae=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},uae=(e,t,n)=>(cae(e,t,"read from private field"),n?n.call(e):t.get(e)),dae=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},hae=(e,t,n,r)=>(cae(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),pae=(e,t,n)=>(cae(e,t,"access private method"),n);const fae=zz.createElement("template");fae.innerHTML='\n  <style>\n    :host {\n      transition: var(--media-menu-item-transition,\n        background .15s linear,\n        opacity .2s ease-in-out\n      );\n      outline: var(--media-menu-item-outline, 0);\n      outline-offset: var(--media-menu-item-outline-offset, -1px);\n      cursor: var(--media-cursor, pointer);\n      display: flex;\n      align-items: center;\n      align-self: stretch;\n      justify-self: stretch;\n      white-space: nowrap;\n      white-space-collapse: collapse;\n      text-wrap: nowrap;\n      padding: .4em .8em .4em 1em;\n    }\n\n    :host(:focus-visible) {\n      box-shadow: var(--media-menu-item-focus-shadow, inset 0 0 0 2px rgb(27 127 204 / .9));\n      outline: var(--media-menu-item-hover-outline, 0);\n      outline-offset: var(--media-menu-item-hover-outline-offset,  var(--media-menu-item-outline-offset, -1px));\n    }\n\n    :host(:hover) {\n      cursor: var(--media-cursor, pointer);\n      background: var(--media-menu-item-hover-background, rgb(92 92 102 / .5));\n      outline: var(--media-menu-item-hover-outline);\n      outline-offset: var(--media-menu-item-hover-outline-offset,  var(--media-menu-item-outline-offset, -1px));\n    }\n\n    :host([aria-checked="true"]) {\n      background: var(--media-menu-item-checked-background);\n    }\n\n    :host([hidden]) {\n      display: none;\n    }\n\n    :host([disabled]) {\n      pointer-events: none;\n      color: rgba(255, 255, 255, .3);\n    }\n\n    slot:not([name]) {\n      width: 100%;\n    }\n\n    slot:not([name="submenu"]) {\n      display: inline-flex;\n      align-items: center;\n      transition: inherit;\n      opacity: var(--media-menu-item-opacity, 1);\n    }\n\n    slot[name="description"] {\n      justify-content: end;\n    }\n\n    slot[name="description"] > span {\n      display: inline-block;\n      margin-inline: 1em .2em;\n      max-width: var(--media-menu-item-description-max-width, 100px);\n      text-overflow: ellipsis;\n      overflow: hidden;\n      font-size: .8em;\n      font-weight: 400;\n      text-align: right;\n      position: relative;\n      top: .04em;\n    }\n\n    slot[name="checked-indicator"] {\n      display: none;\n    }\n\n    :host(:is([role="menuitemradio"],[role="menuitemcheckbox"])) slot[name="checked-indicator"] {\n      display: var(--media-menu-item-checked-indicator-display, inline-block);\n    }\n\n    \n    svg, img, ::slotted(svg), ::slotted(img) {\n      height: var(--media-menu-item-icon-height, var(--media-control-height, 24px));\n      fill: var(--media-icon-color, var(--media-primary-color, rgb(238 238 238)));\n      display: block;\n    }\n\n    \n    [part~="indicator"],\n    ::slotted([part~="indicator"]) {\n      fill: var(--media-menu-item-indicator-fill,\n        var(--media-icon-color, var(--media-primary-color, rgb(238 238 238))));\n      height: var(--media-menu-item-indicator-height, 1.25em);\n      margin-right: .5ch;\n    }\n\n    [part~="checked-indicator"] {\n      visibility: hidden;\n    }\n\n    :host([aria-checked="true"]) [part~="checked-indicator"] {\n      visibility: visible;\n    }\n  </style>\n  <slot name="checked-indicator">\n    <svg aria-hidden="true" viewBox="0 1 24 24" part="checked-indicator indicator">\n      <path d="m10 15.17 9.193-9.191 1.414 1.414-10.606 10.606-6.364-6.364 1.414-1.414 4.95 4.95Z"/>\n    </svg>\n  </slot>\n  <slot name="prefix"></slot>\n  <slot></slot>\n  <slot name="description"></slot>\n  <slot name="suffix"></slot>\n  <slot name="submenu"></slot>\n';const mae="type",gae="value",vae="checked",yae="disabled";class bae extends Wz.HTMLElement{constructor(){super(),dae(this,Qie),dae(this,Zie),dae(this,eae),dae(this,rae),dae(this,aae),dae(this,sae),dae(this,Kie,!1),dae(this,Yie,void 0),dae(this,nae,(()=>{var e,t;this.setAttribute("submenusize",`${this.submenuElement.items.length}`);const n=this.shadowRoot.querySelector('slot[name="description"]'),r=null==(e=this.submenuElement.checkedItems)?void 0:e[0],i=null!=(t=null==r?void 0:r.dataset.description)?t:null==r?void 0:r.text,a=zz.createElement("span");a.textContent=null!=i?i:"",n.replaceChildren(a)})),this.shadowRoot||(this.attachShadow({mode:"open"}),this.shadowRoot.append(this.constructor.template.content.cloneNode(!0))),this.shadowRoot.addEventListener("slotchange",this)}static get observedAttributes(){return[mae,yae,vae,gae]}enable(){this.hasAttribute("tabindex")||this.setAttribute("tabindex","-1"),wae(this)&&!this.hasAttribute("aria-checked")&&this.setAttribute("aria-checked","false"),this.addEventListener("click",this),this.addEventListener("keydown",this)}disable(){this.removeAttribute("tabindex"),this.removeEventListener("click",this),this.removeEventListener("keydown",this),this.removeEventListener("keyup",this)}handleEvent(e){switch(e.type){case"slotchange":pae(this,Qie,Xie).call(this,e);break;case"click":this.handleClick(e);break;case"keydown":pae(this,aae,oae).call(this,e);break;case"keyup":pae(this,rae,iae).call(this,e)}}attributeChangedCallback(e,t,n){e===vae&&wae(this)&&!uae(this,Kie)?this.setAttribute("aria-checked",null!=n?"true":"false"):e===mae&&n!==t?this.role="menuitem"+n:e===yae&&n!==t&&(null==n?this.enable():this.disable())}connectedCallback(){this.hasAttribute(yae)||this.enable(),this.role="menuitem"+this.type,hae(this,Yie,Eae(this,this.parentNode)),pae(this,sae,lae).call(this)}disconnectedCallback(){this.disable(),pae(this,sae,lae).call(this),hae(this,Yie,null)}get invokeTarget(){return this.getAttribute("invoketarget")}set invokeTarget(e){this.setAttribute("invoketarget",`${e}`)}get invokeTargetElement(){var e;return this.invokeTarget?null==(e=rH(this))?void 0:e.querySelector(`#${this.invokeTarget}`):this.submenuElement}get submenuElement(){return this.shadowRoot.querySelector('slot[name="submenu"]').assignedElements({flatten:!0})[0]}get type(){var e;return null!=(e=this.getAttribute(mae))?e:""}set type(e){this.setAttribute(mae,`${e}`)}get value(){var e;return null!=(e=this.getAttribute(gae))?e:this.text}set value(e){this.setAttribute(gae,e)}get text(){var e;return(null!=(e=this.textContent)?e:"").trim()}get checked(){if(wae(this))return"true"===this.getAttribute("aria-checked")}set checked(e){wae(this)&&(hae(this,Kie,!0),this.setAttribute("aria-checked",e?"true":"false"),e?this.part.add("checked"):this.part.remove("checked"))}handleClick(e){wae(this)||this.invokeTargetElement&&eH(this,e.target)&&this.invokeTargetElement.dispatchEvent(new $re({relatedTarget:this}))}get keysUsed(){return["Enter"," "]}}function wae(e){return"radio"===e.type||"checkbox"===e.type}function Eae(e,t){if(!e)return null;const{host:n}=e.getRootNode();return!t&&n?Eae(e,n):(null==t?void 0:t.items)?t:Eae(t,null==t?void 0:t.parentNode)}Kie=new WeakMap,Yie=new WeakMap,Qie=new WeakSet,Xie=function(e){const t=e.target;if(!(null==t?void 0:t.name))for(const n of t.assignedNodes({flatten:!0}))n instanceof Text&&""===n.textContent.trim()&&n.remove();"submenu"===t.name&&(this.submenuElement?pae(this,Zie,Jie).call(this):pae(this,eae,tae).call(this))},Zie=new WeakSet,Jie=async function(){this.setAttribute("aria-haspopup","menu"),this.setAttribute("aria-expanded",`${!this.submenuElement.hidden}`),this.submenuElement.addEventListener("change",uae(this,nae)),this.submenuElement.addEventListener("addmenuitem",uae(this,nae)),this.submenuElement.addEventListener("removemenuitem",uae(this,nae)),uae(this,nae).call(this)},eae=new WeakSet,tae=function(){this.removeAttribute("aria-haspopup"),this.removeAttribute("aria-expanded"),this.submenuElement.removeEventListener("change",uae(this,nae)),this.submenuElement.removeEventListener("addmenuitem",uae(this,nae)),this.submenuElement.removeEventListener("removemenuitem",uae(this,nae)),uae(this,nae).call(this)},nae=new WeakMap,rae=new WeakSet,iae=function(e){const{key:t}=e;this.keysUsed.includes(t)?this.handleClick(e):this.removeEventListener("keyup",pae(this,rae,iae))},aae=new WeakSet,oae=function(e){const{metaKey:t,altKey:n,key:r}=e;t||n||!this.keysUsed.includes(r)?this.removeEventListener("keyup",pae(this,rae,iae)):this.addEventListener("keyup",pae(this,rae,iae),{once:!0})},sae=new WeakSet,lae=function(){var e;const t=null==(e=uae(this,Yie))?void 0:e.radioGroupItems;if(!t)return;let n=t.filter((e=>"true"===e.getAttribute("aria-checked"))).pop();n||(n=t[0]);for(const r of t)r.setAttribute("aria-checked","false");null==n||n.setAttribute("aria-checked","true")},bae.template=fae,Wz.customElements.get("media-chrome-menu-item")||Wz.customElements.define("media-chrome-menu-item",bae);const xae=zz.createElement("template");xae.innerHTML=Hie.template.innerHTML+'\n  <style>\n    :host {\n      --_menu-bg: rgb(20 20 30 / .8);\n      background: var(--media-settings-menu-background,\n          var(--media-menu-background,\n            var(--media-control-background,\n              var(--media-secondary-color, var(--_menu-bg)))));\n      min-width: var(--media-settings-menu-min-width, 170px);\n      border-radius: 2px 2px 0 0;\n      overflow: hidden;\n    }\n\n    @-moz-document url-prefix() {\n      :host{\n        --_menu-bg: rgb(20 20 30);\n      }\n    }\n\n    :host([role="menu"]) {\n      \n      justify-content: end;\n    }\n\n    slot:not([name]) {\n      justify-content: var(--media-settings-menu-justify-content);\n      flex-direction: var(--media-settings-menu-flex-direction, column);\n      overflow: visible;\n    }\n\n    #container.has-expanded {\n      --media-settings-menu-item-opacity: 0;\n    }\n  </style>\n';class _ae extends Hie{get anchorElement(){return"auto"!==this.anchor?super.anchorElement:Qz(this).querySelector("media-settings-menu-button")}}_ae.template=xae,Wz.customElements.get("media-settings-menu")||Wz.customElements.define("media-settings-menu",_ae);var Aae;const Tae=zz.createElement("template");Tae.innerHTML=bae.template.innerHTML+'\n  <style>\n    slot:not([name="submenu"]) {\n      opacity: var(--media-settings-menu-item-opacity, var(--media-menu-item-opacity));\n    }\n\n    :host([aria-expanded="true"]:hover) {\n      background: transparent;\n    }\n  </style>\n',(null==(Aae=Tae.content)?void 0:Aae.querySelector)&&(Tae.content.querySelector('slot[name="suffix"]').innerHTML='\n    <svg aria-hidden="true" viewBox="0 0 20 24">\n      <path d="m8.12 17.585-.742-.669 4.2-4.665-4.2-4.666.743-.669 4.803 5.335-4.803 5.334Z"/>\n    </svg>\n  ');class Sae extends bae{}Sae.template=Tae,Wz.customElements.get("media-settings-menu-item")||Wz.customElements.define("media-settings-menu-item",Sae);class kae extends qG{connectedCallback(){super.connectedCallback(),this.invokeTargetElement&&this.setAttribute("aria-haspopup","menu")}get invokeTarget(){return this.getAttribute("invoketarget")}set invokeTarget(e){this.setAttribute("invoketarget",`${e}`)}get invokeTargetElement(){var e;return this.invokeTarget?null==(e=rH(this))?void 0:e.querySelector(`#${this.invokeTarget}`):null}handleClick(){var e;null==(e=this.invokeTargetElement)||e.dispatchEvent(new $re({relatedTarget:this}))}}Wz.customElements.get("media-chrome-menu-button")||Wz.customElements.define("media-chrome-menu-button",kae);const Cae=zz.createElement("template");Cae.innerHTML='\n  <style>\n    :host([aria-expanded="true"]) slot[name=tooltip] {\n      display: none;\n    }\n  </style>\n  <slot name="icon">\n    <svg aria-hidden="true" viewBox="0 0 24 24">\n      <path d="M4.5 14.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Zm7.5 0a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Zm7.5 0a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Z"/>\n    </svg>\n  </slot>\n';class Iae extends kae{static get observedAttributes(){return[...super.observedAttributes,"target"]}constructor(){super({slotTemplate:Cae,tooltipContent:Nz("Settings")})}connectedCallback(){super.connectedCallback(),this.setAttribute("aria-label",Nz("settings"))}get invokeTargetElement(){return void 0!=this.invokeTarget?super.invokeTargetElement:Qz(this).querySelector("media-settings-menu")}}Wz.customElements.get("media-settings-menu-button")||Wz.customElements.define("media-settings-menu-button",Iae);var Rae,Dae,Lae,Pae,Mae,Nae,Oae=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},jae=(e,t,n)=>(Oae(e,t,"read from private field"),n?n.call(e):t.get(e)),Fae=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},Uae=(e,t,n,r)=>(Oae(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),Bae=(e,t,n)=>(Oae(e,t,"access private method"),n);class $ae extends Hie{constructor(){super(...arguments),Fae(this,Lae),Fae(this,Mae),Fae(this,Rae,[]),Fae(this,Dae,void 0)}static get observedAttributes(){return[...super.observedAttributes,lz.MEDIA_AUDIO_TRACK_LIST,lz.MEDIA_AUDIO_TRACK_ENABLED,lz.MEDIA_AUDIO_TRACK_UNAVAILABLE]}attributeChangedCallback(e,t,n){var r;super.attributeChangedCallback(e,t,n),e===lz.MEDIA_AUDIO_TRACK_ENABLED&&t!==n?this.value=n:e===lz.MEDIA_AUDIO_TRACK_LIST&&t!==n&&(Uae(this,Rae,null==(r=null!=n?n:"")?void 0:r.split(/\s+/).map(_z)),Bae(this,Lae,Pae).call(this))}connectedCallback(){super.connectedCallback(),this.addEventListener("change",Bae(this,Mae,Nae))}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("change",Bae(this,Mae,Nae))}get anchorElement(){var e;return"auto"!==this.anchor?super.anchorElement:null==(e=Qz(this))?void 0:e.querySelector("media-audio-track-menu-button")}get mediaAudioTrackList(){return jae(this,Rae)}set mediaAudioTrackList(e){Uae(this,Rae,e),Bae(this,Lae,Pae).call(this)}get mediaAudioTrackEnabled(){var e;return null!=(e=dH(this,lz.MEDIA_AUDIO_TRACK_ENABLED))?e:""}set mediaAudioTrackEnabled(e){hH(this,lz.MEDIA_AUDIO_TRACK_ENABLED,e)}}Rae=new WeakMap,Dae=new WeakMap,Lae=new WeakSet,Pae=function(){if(jae(this,Dae)===JSON.stringify(this.mediaAudioTrackList))return;Uae(this,Dae,JSON.stringify(this.mediaAudioTrackList));const e=this.mediaAudioTrackList;this.defaultSlot.textContent="";for(const t of e){const e=Fie({type:"radio",text:this.formatMenuItemText(t.label,t),value:`${t.id}`,checked:t.enabled});e.prepend(Uie(this,"checked-indicator")),this.defaultSlot.append(e)}},Mae=new WeakSet,Nae=function(){if(null==this.value)return;const e=new Wz.CustomEvent(iz.MEDIA_AUDIO_TRACK_REQUEST,{composed:!0,bubbles:!0,detail:this.value});this.dispatchEvent(e)},Wz.customElements.get("media-audio-track-menu")||Wz.customElements.define("media-audio-track-menu",$ae);const Vae=zz.createElement("template");Vae.innerHTML='\n  <style>\n    :host([aria-expanded="true"]) slot[name=tooltip] {\n      display: none;\n    }\n  </style>\n  <slot name="icon"><svg aria-hidden="true" viewBox="0 0 24 24">\n  <path d="M11 17H9.5V7H11v10Zm-3-3H6.5v-4H8v4Zm6-5h-1.5v6H14V9Zm3 7h-1.5V8H17v8Z"/>\n  <path d="M22 12c0 5.523-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2s10 4.477 10 10Zm-2 0a8 8 0 1 0-16 0 8 8 0 0 0 16 0Z"/>\n</svg></slot>\n';class Wae extends kae{static get observedAttributes(){return[...super.observedAttributes,lz.MEDIA_AUDIO_TRACK_ENABLED,lz.MEDIA_AUDIO_TRACK_UNAVAILABLE]}constructor(){super({slotTemplate:Vae,tooltipContent:Nz("Audio")})}connectedCallback(){super.connectedCallback(),this.setAttribute("aria-label",Nz("Audio"))}attributeChangedCallback(e,t,n){super.attributeChangedCallback(e,t,n)}get invokeTargetElement(){var e;return void 0!=this.invokeTarget?super.invokeTargetElement:null==(e=Qz(this))?void 0:e.querySelector("media-audio-track-menu")}get mediaAudioTrackEnabled(){var e;return null!=(e=dH(this,lz.MEDIA_AUDIO_TRACK_ENABLED))?e:""}set mediaAudioTrackEnabled(e){hH(this,lz.MEDIA_AUDIO_TRACK_ENABLED,e)}}Wz.customElements.get("media-audio-track-menu-button")||Wz.customElements.define("media-audio-track-menu-button",Wae);var zae,Hae,qae,Gae,Kae,Yae=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},Qae=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},Xae=(e,t,n)=>(Yae(e,t,"access private method"),n);const Zae=zz.createElement("template");Zae.innerHTML=Hie.template.innerHTML+'\n  <slot name="captions-indicator" hidden>\n  <svg aria-hidden="true" viewBox="0 0 26 24" part="captions-indicator indicator">\n    <path d="M22.83 5.68a2.58 2.58 0 0 0-2.3-2.5c-3.62-.24-11.44-.24-15.06 0a2.58 2.58 0 0 0-2.3 2.5c-.23 4.21-.23 8.43 0 12.64a2.58 2.58 0 0 0 2.3 2.5c3.62.24 11.44.24 15.06 0a2.58 2.58 0 0 0 2.3-2.5c.23-4.21.23-8.43 0-12.64Zm-11.39 9.45a3.07 3.07 0 0 1-1.91.57 3.06 3.06 0 0 1-2.34-1 3.75 3.75 0 0 1-.92-2.67 3.92 3.92 0 0 1 .92-2.77 3.18 3.18 0 0 1 2.43-1 2.94 2.94 0 0 1 2.13.78c.364.359.62.813.74 1.31l-1.43.35a1.49 1.49 0 0 0-1.51-1.17 1.61 1.61 0 0 0-1.29.58 2.79 2.79 0 0 0-.5 1.89 3 3 0 0 0 .49 1.93 1.61 1.61 0 0 0 1.27.58 1.48 1.48 0 0 0 1-.37 2.1 2.1 0 0 0 .59-1.14l1.4.44a3.23 3.23 0 0 1-1.07 1.69Zm7.22 0a3.07 3.07 0 0 1-1.91.57 3.06 3.06 0 0 1-2.34-1 3.75 3.75 0 0 1-.92-2.67 3.88 3.88 0 0 1 .93-2.77 3.14 3.14 0 0 1 2.42-1 3 3 0 0 1 2.16.82 2.8 2.8 0 0 1 .73 1.31l-1.43.35a1.49 1.49 0 0 0-1.51-1.21 1.61 1.61 0 0 0-1.29.58A2.79 2.79 0 0 0 15 12a3 3 0 0 0 .49 1.93 1.61 1.61 0 0 0 1.27.58 1.44 1.44 0 0 0 1-.37 2.1 2.1 0 0 0 .6-1.15l1.4.44a3.17 3.17 0 0 1-1.1 1.7Z"/>\n  </svg></slot>';class Jae extends Hie{constructor(){super(...arguments),Qae(this,Hae),Qae(this,Gae),Qae(this,zae,void 0)}static get observedAttributes(){return[...super.observedAttributes,lz.MEDIA_SUBTITLES_LIST,lz.MEDIA_SUBTITLES_SHOWING]}attributeChangedCallback(e,t,n){super.attributeChangedCallback(e,t,n),e===lz.MEDIA_SUBTITLES_LIST&&t!==n?Xae(this,Hae,qae).call(this):e===lz.MEDIA_SUBTITLES_SHOWING&&t!==n&&(this.value=n)}connectedCallback(){super.connectedCallback(),this.addEventListener("change",Xae(this,Gae,Kae))}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("change",Xae(this,Gae,Kae))}get anchorElement(){return"auto"!==this.anchor?super.anchorElement:Qz(this).querySelector("media-captions-menu-button")}get mediaSubtitlesList(){return eoe(this,lz.MEDIA_SUBTITLES_LIST)}set mediaSubtitlesList(e){toe(this,lz.MEDIA_SUBTITLES_LIST,e)}get mediaSubtitlesShowing(){return eoe(this,lz.MEDIA_SUBTITLES_SHOWING)}set mediaSubtitlesShowing(e){toe(this,lz.MEDIA_SUBTITLES_SHOWING,e)}}zae=new WeakMap,Hae=new WeakSet,qae=function(){var e,t,n,r;if(Yae(t=this,n=zae,"read from private field"),(r?r.call(t):n.get(t))===JSON.stringify(this.mediaSubtitlesList))return;((e,t,n,r)=>{Yae(e,t,"write to private field"),r?r.call(e,n):t.set(e,n)})(this,zae,JSON.stringify(this.mediaSubtitlesList)),this.defaultSlot.textContent="";const i=!this.value,a=Fie({type:"radio",text:this.formatMenuItemText("Off"),value:"off",checked:i});a.prepend(Uie(this,"checked-indicator")),this.defaultSlot.append(a);const o=this.mediaSubtitlesList;for(const s of o){const t=Fie({type:"radio",text:this.formatMenuItemText(s.label,s),value:lq(s),checked:this.value==lq(s)});t.prepend(Uie(this,"checked-indicator"));"captions"===(null!=(e=s.kind)?e:"subs")&&t.append(Uie(this,"captions-indicator")),this.defaultSlot.append(t)}},Gae=new WeakSet,Kae=function(){const e=this.mediaSubtitlesShowing,t=this.getAttribute(lz.MEDIA_SUBTITLES_SHOWING),n=this.value!==t;if((null==e?void 0:e.length)&&n&&this.dispatchEvent(new Wz.CustomEvent(iz.MEDIA_DISABLE_SUBTITLES_REQUEST,{composed:!0,bubbles:!0,detail:e})),!this.value||!n)return;const r=new Wz.CustomEvent(iz.MEDIA_SHOW_SUBTITLES_REQUEST,{composed:!0,bubbles:!0,detail:this.value});this.dispatchEvent(r)},Jae.template=Zae;const eoe=(e,t)=>{const n=e.getAttribute(t);return n?oq(n):[]},toe=(e,t,n)=>{if(!(null==n?void 0:n.length))return void e.removeAttribute(t);const r=cq(n);e.getAttribute(t)!==r&&e.setAttribute(t,r)};Wz.customElements.get("media-captions-menu")||Wz.customElements.define("media-captions-menu",Jae);var noe,roe=(e,t,n,r)=>(((e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)})(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n);const ioe=zz.createElement("template");ioe.innerHTML='\n  <style>\n    :host([aria-checked="true"]) slot[name=off] {\n      display: none !important;\n    }\n\n    \n    :host(:not([aria-checked="true"])) slot[name=on] {\n      display: none !important;\n    }\n\n    :host([aria-expanded="true"]) slot[name=tooltip] {\n      display: none;\n    }\n  </style>\n\n  <slot name="icon">\n    <slot name="on"><svg aria-hidden="true" viewBox="0 0 26 24">\n  <path d="M22.83 5.68a2.58 2.58 0 0 0-2.3-2.5c-3.62-.24-11.44-.24-15.06 0a2.58 2.58 0 0 0-2.3 2.5c-.23 4.21-.23 8.43 0 12.64a2.58 2.58 0 0 0 2.3 2.5c3.62.24 11.44.24 15.06 0a2.58 2.58 0 0 0 2.3-2.5c.23-4.21.23-8.43 0-12.64Zm-11.39 9.45a3.07 3.07 0 0 1-1.91.57 3.06 3.06 0 0 1-2.34-1 3.75 3.75 0 0 1-.92-2.67 3.92 3.92 0 0 1 .92-2.77 3.18 3.18 0 0 1 2.43-1 2.94 2.94 0 0 1 2.13.78c.364.359.62.813.74 1.31l-1.43.35a1.49 1.49 0 0 0-1.51-1.17 1.61 1.61 0 0 0-1.29.58 2.79 2.79 0 0 0-.5 1.89 3 3 0 0 0 .49 1.93 1.61 1.61 0 0 0 1.27.58 1.48 1.48 0 0 0 1-.37 2.1 2.1 0 0 0 .59-1.14l1.4.44a3.23 3.23 0 0 1-1.07 1.69Zm7.22 0a3.07 3.07 0 0 1-1.91.57 3.06 3.06 0 0 1-2.34-1 3.75 3.75 0 0 1-.92-2.67 3.88 3.88 0 0 1 .93-2.77 3.14 3.14 0 0 1 2.42-1 3 3 0 0 1 2.16.82 2.8 2.8 0 0 1 .73 1.31l-1.43.35a1.49 1.49 0 0 0-1.51-1.21 1.61 1.61 0 0 0-1.29.58A2.79 2.79 0 0 0 15 12a3 3 0 0 0 .49 1.93 1.61 1.61 0 0 0 1.27.58 1.44 1.44 0 0 0 1-.37 2.1 2.1 0 0 0 .6-1.15l1.4.44a3.17 3.17 0 0 1-1.1 1.7Z"/>\n</svg></slot>\n    <slot name="off"><svg aria-hidden="true" viewBox="0 0 26 24">\n  <path d="M17.73 14.09a1.4 1.4 0 0 1-1 .37 1.579 1.579 0 0 1-1.27-.58A3 3 0 0 1 15 12a2.8 2.8 0 0 1 .5-1.85 1.63 1.63 0 0 1 1.29-.57 1.47 1.47 0 0 1 1.51 1.2l1.43-.34A2.89 2.89 0 0 0 19 9.07a3 3 0 0 0-2.14-.78 3.14 3.14 0 0 0-2.42 1 3.91 3.91 0 0 0-.93 2.78 3.74 3.74 0 0 0 .92 2.66 3.07 3.07 0 0 0 2.34 1 3.07 3.07 0 0 0 1.91-.57 3.17 3.17 0 0 0 1.07-1.74l-1.4-.45c-.083.43-.3.822-.62 1.12Zm-7.22 0a1.43 1.43 0 0 1-1 .37 1.58 1.58 0 0 1-1.27-.58A3 3 0 0 1 7.76 12a2.8 2.8 0 0 1 .5-1.85 1.63 1.63 0 0 1 1.29-.57 1.47 1.47 0 0 1 1.51 1.2l1.43-.34a2.81 2.81 0 0 0-.74-1.32 2.94 2.94 0 0 0-2.13-.78 3.18 3.18 0 0 0-2.43 1 4 4 0 0 0-.92 2.78 3.74 3.74 0 0 0 .92 2.66 3.07 3.07 0 0 0 2.34 1 3.07 3.07 0 0 0 1.91-.57 3.23 3.23 0 0 0 1.07-1.74l-1.4-.45a2.06 2.06 0 0 1-.6 1.07Zm12.32-8.41a2.59 2.59 0 0 0-2.3-2.51C18.72 3.05 15.86 3 13 3c-2.86 0-5.72.05-7.53.17a2.59 2.59 0 0 0-2.3 2.51c-.23 4.207-.23 8.423 0 12.63a2.57 2.57 0 0 0 2.3 2.5c1.81.13 4.67.19 7.53.19 2.86 0 5.72-.06 7.53-.19a2.57 2.57 0 0 0 2.3-2.5c.23-4.207.23-8.423 0-12.63Zm-1.49 12.53a1.11 1.11 0 0 1-.91 1.11c-1.67.11-4.45.18-7.43.18-2.98 0-5.76-.07-7.43-.18a1.11 1.11 0 0 1-.91-1.11c-.21-4.14-.21-8.29 0-12.43a1.11 1.11 0 0 1 .91-1.11C7.24 4.56 10 4.49 13 4.49s5.76.07 7.43.18a1.11 1.11 0 0 1 .91 1.11c.21 4.14.21 8.29 0 12.43Z"/>\n</svg></slot>\n  </slot>\n';const aoe=e=>{e.setAttribute("aria-checked",pq(e).toString())};class ooe extends kae{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super({slotTemplate:ioe,tooltipContent:Nz("Captions"),...e}),((e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)})(this,noe,void 0),roe(this,noe,!1)}static get observedAttributes(){return[...super.observedAttributes,lz.MEDIA_SUBTITLES_LIST,lz.MEDIA_SUBTITLES_SHOWING]}connectedCallback(){super.connectedCallback(),this.setAttribute("aria-label",Nz("closed captions")),aoe(this)}attributeChangedCallback(e,t,n){super.attributeChangedCallback(e,t,n),e===lz.MEDIA_SUBTITLES_SHOWING&&aoe(this)}get invokeTargetElement(){var e;return void 0!=this.invokeTarget?super.invokeTargetElement:null==(e=Qz(this))?void 0:e.querySelector("media-captions-menu")}get mediaSubtitlesList(){return soe(this,lz.MEDIA_SUBTITLES_LIST)}set mediaSubtitlesList(e){loe(this,lz.MEDIA_SUBTITLES_LIST,e)}get mediaSubtitlesShowing(){return soe(this,lz.MEDIA_SUBTITLES_SHOWING)}set mediaSubtitlesShowing(e){loe(this,lz.MEDIA_SUBTITLES_SHOWING,e)}}noe=new WeakMap;const soe=(e,t)=>{const n=e.getAttribute(t);return n?oq(n):[]},loe=(e,t,n)=>{if(!(null==n?void 0:n.length))return void e.removeAttribute(t);const r=cq(n);e.getAttribute(t)!==r&&e.setAttribute(t,r)};Wz.customElements.get("media-captions-menu-button")||Wz.customElements.define("media-captions-menu-button",ooe);var coe,uoe,doe,hoe,poe,foe=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},moe=(e,t,n)=>(foe(e,t,"read from private field"),n?n.call(e):t.get(e)),goe=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},voe=(e,t,n)=>(foe(e,t,"access private method"),n);const yoe="rates";class boe extends Hie{constructor(){super(),goe(this,uoe),goe(this,hoe),goe(this,coe,new iq(this,yoe,{defaultValue:mQ})),voe(this,uoe,doe).call(this)}static get observedAttributes(){return[...super.observedAttributes,lz.MEDIA_PLAYBACK_RATE,yoe]}attributeChangedCallback(e,t,n){super.attributeChangedCallback(e,t,n),e===lz.MEDIA_PLAYBACK_RATE&&t!=n?this.value=n:e===yoe&&t!=n&&(moe(this,coe).value=n,voe(this,uoe,doe).call(this))}connectedCallback(){super.connectedCallback(),this.addEventListener("change",voe(this,hoe,poe))}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("change",voe(this,hoe,poe))}get anchorElement(){return"auto"!==this.anchor?super.anchorElement:Qz(this).querySelector("media-playback-rate-menu-button")}get rates(){return moe(this,coe)}set rates(e){e?Array.isArray(e)&&(moe(this,coe).value=e.join(" ")):moe(this,coe).value="",voe(this,uoe,doe).call(this)}get mediaPlaybackRate(){return sH(this,lz.MEDIA_PLAYBACK_RATE,1)}set mediaPlaybackRate(e){lH(this,lz.MEDIA_PLAYBACK_RATE,e)}}coe=new WeakMap,uoe=new WeakSet,doe=function(){this.defaultSlot.textContent="";for(const e of this.rates){const t=Fie({type:"radio",text:this.formatMenuItemText(`${e}x`,e),value:e,checked:this.mediaPlaybackRate==e});t.prepend(Uie(this,"checked-indicator")),this.defaultSlot.append(t)}},hoe=new WeakSet,poe=function(){if(!this.value)return;const e=new Wz.CustomEvent(iz.MEDIA_PLAYBACK_RATE_REQUEST,{composed:!0,bubbles:!0,detail:this.value});this.dispatchEvent(e)},Wz.customElements.get("media-playback-rate-menu")||Wz.customElements.define("media-playback-rate-menu",boe);var woe,Eoe=(e,t,n)=>(((e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)})(e,t,"read from private field"),n?n.call(e):t.get(e));const xoe="rates",_oe=[1,1.2,1.5,1.7,2],Aoe=zz.createElement("template");Aoe.innerHTML='\n  <style>\n    :host {\n      min-width: 5ch;\n      padding: var(--media-button-padding, var(--media-control-padding, 10px 5px));\n    }\n    \n    :host([aria-expanded="true"]) slot[name=tooltip] {\n      display: none;\n    }\n  </style>\n  <slot name="icon"></slot>\n';class Toe extends kae{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super({slotTemplate:Aoe,tooltipContent:Nz("Playback rate"),...e}),((e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)})(this,woe,new iq(this,xoe,{defaultValue:_oe})),this.container=this.shadowRoot.querySelector('slot[name="icon"]'),this.container.innerHTML="1x"}static get observedAttributes(){return[...super.observedAttributes,lz.MEDIA_PLAYBACK_RATE,xoe]}attributeChangedCallback(e,t,n){if(super.attributeChangedCallback(e,t,n),e===xoe&&(Eoe(this,woe).value=n),e===lz.MEDIA_PLAYBACK_RATE){const e=n?+n:Number.NaN,t=Number.isNaN(e)?1:e;this.container.innerHTML=`${t}x`,this.setAttribute("aria-label",Nz("Playback rate {playbackRate}",{playbackRate:t}))}}get invokeTargetElement(){return void 0!=this.invokeTarget?super.invokeTargetElement:Qz(this).querySelector("media-playback-rate-menu")}get rates(){return Eoe(this,woe)}set rates(e){e?Array.isArray(e)&&(Eoe(this,woe).value=e.join(" ")):Eoe(this,woe).value=""}get mediaPlaybackRate(){return sH(this,lz.MEDIA_PLAYBACK_RATE,1)}set mediaPlaybackRate(e){lH(this,lz.MEDIA_PLAYBACK_RATE,e)}}woe=new WeakMap,Wz.customElements.get("media-playback-rate-menu-button")||Wz.customElements.define("media-playback-rate-menu-button",Toe);var Soe,koe,Coe,Ioe,Roe,Doe,Loe=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},Poe=(e,t,n)=>(Loe(e,t,"read from private field"),n?n.call(e):t.get(e)),Moe=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},Noe=(e,t,n,r)=>(Loe(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),Ooe=(e,t,n)=>(Loe(e,t,"access private method"),n);class joe extends Hie{constructor(){super(...arguments),Moe(this,Coe),Moe(this,Roe),Moe(this,Soe,[]),Moe(this,koe,{})}static get observedAttributes(){return[...super.observedAttributes,lz.MEDIA_RENDITION_LIST,lz.MEDIA_RENDITION_SELECTED,lz.MEDIA_RENDITION_UNAVAILABLE,lz.MEDIA_HEIGHT]}attributeChangedCallback(e,t,n){var r;super.attributeChangedCallback(e,t,n),e===lz.MEDIA_RENDITION_SELECTED&&t!==n?(this.value=null!=n?n:"auto",Ooe(this,Coe,Ioe).call(this)):e===lz.MEDIA_RENDITION_LIST&&t!==n?(Noe(this,Soe,null==(r=n)?void 0:r.split(/\s+/).map(Ez)),Ooe(this,Coe,Ioe).call(this)):e===lz.MEDIA_HEIGHT&&t!==n&&Ooe(this,Coe,Ioe).call(this)}connectedCallback(){super.connectedCallback(),this.addEventListener("change",Ooe(this,Roe,Doe))}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("change",Ooe(this,Roe,Doe))}get anchorElement(){return"auto"!==this.anchor?super.anchorElement:Qz(this).querySelector("media-rendition-menu-button")}get mediaRenditionList(){return Poe(this,Soe)}set mediaRenditionList(e){Noe(this,Soe,e),Ooe(this,Coe,Ioe).call(this)}get mediaRenditionSelected(){return dH(this,lz.MEDIA_RENDITION_SELECTED)}set mediaRenditionSelected(e){hH(this,lz.MEDIA_RENDITION_SELECTED,e)}get mediaHeight(){return sH(this,lz.MEDIA_HEIGHT)}set mediaHeight(e){lH(this,lz.MEDIA_HEIGHT,e)}}Soe=new WeakMap,koe=new WeakMap,Coe=new WeakSet,Ioe=function(){if(Poe(this,koe).mediaRenditionList===JSON.stringify(this.mediaRenditionList)&&Poe(this,koe).mediaHeight===this.mediaHeight)return;Poe(this,koe).mediaRenditionList=JSON.stringify(this.mediaRenditionList),Poe(this,koe).mediaHeight=this.mediaHeight;const e=this.mediaRenditionList.sort(((e,t)=>t.height-e.height));for(const i of e)i.selected=i.id===this.mediaRenditionSelected;this.defaultSlot.textContent="";const t=!this.mediaRenditionSelected;for(const i of e){const e=Fie({type:"radio",text:this.formatMenuItemText(`${Math.min(i.width,i.height)}p`,i),value:`${i.id}`,checked:i.selected&&!t});e.prepend(Uie(this,"checked-indicator")),this.defaultSlot.append(e)}const n=Fie({type:"radio",text:t?this.formatMenuItemText(`Auto (${this.mediaHeight}p)`):this.formatMenuItemText("Auto"),value:"auto",checked:t}),r=this.mediaHeight>0?`Auto (${this.mediaHeight}p)`:"Auto";n.dataset.description=r,n.prepend(Uie(this,"checked-indicator")),this.defaultSlot.append(n)},Roe=new WeakSet,Doe=function(){if(null==this.value)return;const e=new Wz.CustomEvent(iz.MEDIA_RENDITION_REQUEST,{composed:!0,bubbles:!0,detail:this.value});this.dispatchEvent(e)},Wz.customElements.get("media-rendition-menu")||Wz.customElements.define("media-rendition-menu",joe);const Foe=zz.createElement("template");Foe.innerHTML='\n  <style>\n    :host([aria-expanded="true"]) slot[name=tooltip] {\n      display: none;\n    }\n  </style>\n  <slot name="icon"><svg aria-hidden="true" viewBox="0 0 24 24">\n  <path d="M13.5 2.5h2v6h-2v-2h-11v-2h11v-2Zm4 2h4v2h-4v-2Zm-12 4h2v6h-2v-2h-3v-2h3v-2Zm4 2h12v2h-12v-2Zm1 4h2v6h-2v-2h-8v-2h8v-2Zm4 2h7v2h-7v-2Z" />\n</svg></slot>\n';class Uoe extends kae{static get observedAttributes(){return[...super.observedAttributes,lz.MEDIA_RENDITION_SELECTED,lz.MEDIA_RENDITION_UNAVAILABLE,lz.MEDIA_HEIGHT]}constructor(){super({slotTemplate:Foe,tooltipContent:Nz("Quality")})}connectedCallback(){super.connectedCallback(),this.setAttribute("aria-label",Nz("quality"))}get invokeTargetElement(){return void 0!=this.invokeTarget?super.invokeTargetElement:Qz(this).querySelector("media-rendition-menu")}get mediaRenditionSelected(){return dH(this,lz.MEDIA_RENDITION_SELECTED)}set mediaRenditionSelected(e){hH(this,lz.MEDIA_RENDITION_SELECTED,e)}get mediaHeight(){return sH(this,lz.MEDIA_HEIGHT)}set mediaHeight(e){lH(this,lz.MEDIA_HEIGHT,e)}}Wz.customElements.get("media-rendition-menu-button")||Wz.customElements.define("media-rendition-menu-button",Uoe);var Boe=e=>{throw TypeError(e)},$oe=(e,t,n)=>t.has(e)||Boe("Cannot "+n),Voe=(e,t,n)=>($oe(e,t,"read from private field"),n?n.call(e):t.get(e)),Woe=(e,t,n)=>t.has(e)?Boe("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),zoe=(e,t,n,r)=>($oe(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),Hoe=(e,t,n)=>($oe(e,t,"access private method"),n),qoe=class{addEventListener(){}removeEventListener(){}dispatchEvent(e){return!0}};if("undefined"==typeof DocumentFragment){class e extends qoe{}globalThis.DocumentFragment=e}var Goe,Koe=class extends qoe{},Yoe={get(e){},define(e,t,n){},getName:e=>null,upgrade(e){},whenDefined:e=>Promise.resolve(Koe)};Goe=new WeakMap;var Qoe={document:{createElement:function(e,t){return new Koe}},DocumentFragment:DocumentFragment,customElements:Yoe,CustomEvent:class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Woe(this,Goe),zoe(this,Goe,null==t?void 0:t.detail)}get detail(){return Voe(this,Goe)}initCustomEvent(){}},EventTarget:qoe,HTMLElement:Koe,HTMLVideoElement:class extends qoe{}},Xoe="undefined"==typeof window||"undefined"==typeof globalThis.customElements,Zoe=Xoe?Qoe:globalThis,Joe=Xoe?Qoe.document:globalThis.document;function ese(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function tse(e){return e.replace(/[-_]([a-z])/g,((e,t)=>t.toUpperCase()))}function nse(e){if(null==e)return;let t=+e;return Number.isNaN(t)?void 0:t}function rse(e){let t=function(e){let t={};for(let n in e)null!=e[n]&&(t[n]=e[n]);return new URLSearchParams(t)}(e).toString();return t?"?"+t:""}var ise=(e,t)=>!(!e||!t)&&(!!e.contains(t)||ise(e,t.getRootNode().host)),ase="mux.com",ose=(()=>{try{return"3.3.4"}catch{}return"UNKNOWN"})(),sse=()=>ose,lse=e=>{if(e){if([V8.LIVE,V8.ON_DEMAND].includes(e))return e;if(null!=e&&e.includes("live"))return V8.LIVE}},cse={crossorigin:"crossOrigin",playsinline:"playsInline"};function use(e){var t;return null!=(t=cse[e])?t:tse(e)}var dse,hse,pse,fse=class{constructor(e,t){Woe(this,dse),Woe(this,hse),Woe(this,pse,[]),zoe(this,dse,e),zoe(this,hse,t)}[Symbol.iterator](){return Voe(this,pse).values()}get length(){return Voe(this,pse).length}get value(){var e;return null!=(e=Voe(this,pse).join(" "))?e:""}set value(e){var t;e!==this.value&&(zoe(this,pse,[]),this.add(...null!=(t=null==e?void 0:e.split(" "))?t:[]))}toString(){return this.value}item(e){return Voe(this,pse)[e]}values(){return Voe(this,pse).values()}keys(){return Voe(this,pse).keys()}forEach(e){Voe(this,pse).forEach(e)}add(){for(var e,t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];r.forEach((e=>{this.contains(e)||Voe(this,pse).push(e)})),(""!==this.value||null!=(e=Voe(this,dse))&&e.hasAttribute(`${Voe(this,hse)}`))&&(null==(t=Voe(this,dse))||t.setAttribute(`${Voe(this,hse)}`,`${this.value}`))}remove(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];n.forEach((e=>{Voe(this,pse).splice(Voe(this,pse).indexOf(e),1)})),null==(e=Voe(this,dse))||e.setAttribute(`${Voe(this,hse)}`,`${this.value}`)}contains(e){return Voe(this,pse).includes(e)}toggle(e,t){return"undefined"!=typeof t?t?(this.add(e),!0):(this.remove(e),!1):this.contains(e)?(this.remove(e),!1):(this.add(e),!0)}replace(e,t){this.remove(e),this.add(t)}};dse=new WeakMap,hse=new WeakMap,pse=new WeakMap;var mse=`[mux-player ${sse()}]`;function gse(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.warn(mse,...t)}function vse(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.error(mse,...t)}function yse(e){var t;let n=null!=(t=e.message)?t:"";e.context&&(n+=` ${e.context}`),e.file&&(n+=` ${a7("Read more: ")}\nhttps://github.com/muxinc/elements/blob/main/errors/${e.file}`),gse(n)}var bse={AUTOPLAY:"autoplay",CROSSORIGIN:"crossorigin",LOOP:"loop",MUTED:"muted",PLAYSINLINE:"playsinline",PRELOAD:"preload"},wse={VOLUME:"volume",PLAYBACKRATE:"playbackrate",MUTED:"muted"},Ese=Object.freeze({length:0,start(e){let t=e>>>0;if(t>=this.length)throw new DOMException(`Failed to execute 'start' on 'TimeRanges': The index provided (${t}) is greater than or equal to the maximum bound (${this.length}).`);return 0},end(e){let t=e>>>0;if(t>=this.length)throw new DOMException(`Failed to execute 'end' on 'TimeRanges': The index provided (${t}) is greater than or equal to the maximum bound (${this.length}).`);return 0}}),xse=qee.filter((e=>"error"!==e)),_se=Object.values(bse).filter((e=>![bse.PLAYSINLINE].includes(e))),Ase=Object.values(wse),Tse=class extends Zoe.HTMLElement{static get observedAttributes(){return[..._se,...Ase]}constructor(){super()}init(){xse.forEach((e=>{var t;null==(t=this.media)||t.addEventListener(e,(e=>{this.dispatchEvent(new Event(e.type))}))}))}attributeChangedCallback(e,t,n){var r,i;switch(e){case wse.MUTED:return void(this.media&&(this.media.muted=null!=n,this.media.defaultMuted=null!=n));case wse.VOLUME:{let e=null!=(r=nse(n))?r:1;return void(this.media&&(this.media.volume=e))}case wse.PLAYBACKRATE:{let e=null!=(i=nse(n))?i:1;return void(this.media&&(this.media.playbackRate=e,this.media.defaultPlaybackRate=e))}}}play(){var e,t;return null!=(t=null==(e=this.media)?void 0:e.play())?t:Promise.reject()}pause(){var e;null==(e=this.media)||e.pause()}load(){var e;null==(e=this.media)||e.load()}requestCast(e){var t;return null==(t=this.media)?void 0:t.requestCast(e)}get media(){var e;return null==(e=this.shadowRoot)?void 0:e.querySelector("mux-video")}get audioTracks(){return this.media.audioTracks}get videoTracks(){return this.media.videoTracks}get audioRenditions(){return this.media.audioRenditions}get videoRenditions(){return this.media.videoRenditions}get paused(){var e,t;return null==(t=null==(e=this.media)?void 0:e.paused)||t}get duration(){var e,t;return null!=(t=null==(e=this.media)?void 0:e.duration)?t:NaN}get ended(){var e,t;return null!=(t=null==(e=this.media)?void 0:e.ended)&&t}get buffered(){var e,t;return null!=(t=null==(e=this.media)?void 0:e.buffered)?t:Ese}get seekable(){var e,t;return null!=(t=null==(e=this.media)?void 0:e.seekable)?t:Ese}get readyState(){var e,t;return null!=(t=null==(e=this.media)?void 0:e.readyState)?t:0}get videoWidth(){var e,t;return null!=(t=null==(e=this.media)?void 0:e.videoWidth)?t:0}get videoHeight(){var e,t;return null!=(t=null==(e=this.media)?void 0:e.videoHeight)?t:0}get currentSrc(){var e,t;return null!=(t=null==(e=this.media)?void 0:e.currentSrc)?t:""}get currentTime(){var e,t;return null!=(t=null==(e=this.media)?void 0:e.currentTime)?t:0}set currentTime(e){this.media&&(this.media.currentTime=Number(e))}get volume(){var e,t;return null!=(t=null==(e=this.media)?void 0:e.volume)?t:1}set volume(e){this.media&&(this.media.volume=Number(e))}get playbackRate(){var e,t;return null!=(t=null==(e=this.media)?void 0:e.playbackRate)?t:1}set playbackRate(e){this.media&&(this.media.playbackRate=Number(e))}get defaultPlaybackRate(){var e;return null!=(e=nse(this.getAttribute(wse.PLAYBACKRATE)))?e:1}set defaultPlaybackRate(e){null!=e?this.setAttribute(wse.PLAYBACKRATE,`${e}`):this.removeAttribute(wse.PLAYBACKRATE)}get crossOrigin(){return Sse(this,bse.CROSSORIGIN)}set crossOrigin(e){this.setAttribute(bse.CROSSORIGIN,`${e}`)}get autoplay(){return null!=Sse(this,bse.AUTOPLAY)}set autoplay(e){e?this.setAttribute(bse.AUTOPLAY,"string"==typeof e?e:""):this.removeAttribute(bse.AUTOPLAY)}get loop(){return null!=Sse(this,bse.LOOP)}set loop(e){e?this.setAttribute(bse.LOOP,""):this.removeAttribute(bse.LOOP)}get muted(){var e,t;return null!=(t=null==(e=this.media)?void 0:e.muted)&&t}set muted(e){this.media&&(this.media.muted=!!e)}get defaultMuted(){return null!=Sse(this,bse.MUTED)}set defaultMuted(e){e?this.setAttribute(bse.MUTED,""):this.removeAttribute(bse.MUTED)}get playsInline(){return null!=Sse(this,bse.PLAYSINLINE)}set playsInline(e){vse("playsInline is set to true by default and is not currently supported as a setter.")}get preload(){return this.media?this.media.preload:this.getAttribute("preload")}set preload(e){["","none","metadata","auto"].includes(e)?this.setAttribute(bse.PRELOAD,e):this.removeAttribute(bse.PRELOAD)}};function Sse(e,t){return e.media?e.media.getAttribute(t):e.getAttribute(t)}var kse=Tse,Cse=new WeakMap,Ise=class e{constructor(e,t){this.element=e,this.type=t,this.element.addEventListener(this.type,this);let n=Cse.get(this.element);n&&n.set(this.type,this)}set(e){if("function"==typeof e)this.handleEvent=e.bind(this.element);else if("object"==typeof e&&"function"==typeof e.handleEvent)this.handleEvent=e.handleEvent.bind(e);else{this.element.removeEventListener(this.type,this);let e=Cse.get(this.element);e&&e.delete(this.type)}}static for(t){Cse.has(t.element)||Cse.set(t.element,new Map);let n=t.attributeName.slice(2),r=Cse.get(t.element);return r&&r.has(n)?r.get(n):new e(t.element,n)}};function Rse(e,t){(function(e,t){if(e instanceof lre&&t instanceof Element){let n=e.element;return n[e.attributeName]!==t&&(e.element.removeAttributeNS(e.attributeNamespace,e.attributeName),n[e.attributeName]=t),!0}return!1})(e,t)||function(e,t){if("boolean"==typeof t&&e instanceof lre){let n=e.attributeNamespace;return t!==e.element.hasAttributeNS(n,e.attributeName)&&(e.booleanValue=t),!0}return!1}(e,t)||function(e,t){return!!(e instanceof lre&&e.attributeName.startsWith("on"))&&(Ise.for(e).set(t),e.element.removeAttributeNS(e.attributeNamespace,e.attributeName),!0)}(e,t)||function(e,t){return!1===t&&e instanceof cre&&(e.replace(""),!0)}(e,t)||function(e,t){return t instanceof Mse&&e instanceof cre&&(t.renderInto(e),!0)}(e,t)||function(e,t){return t instanceof DocumentFragment&&e instanceof cre&&(t.childNodes.length&&e.replace(...t.childNodes),!0)}(e,t)||function(e,t){if(e instanceof lre){let n=e.attributeNamespace,r=e.element.getAttributeNS(n,e.attributeName);return String(t)!==r&&(e.value=String(t)),!0}e.value=String(t)}(e,t)}var Dse=new Map,Lse=new WeakMap,Pse=new WeakMap,Mse=class{constructor(e,t,n){this.strings=e,this.values=t,this.processor=n,this.stringsKey=this.strings.join("\x01")}get template(){if(Dse.has(this.stringsKey))return Dse.get(this.stringsKey);{let e=Joe.createElement("template"),t=this.strings.length-1;return e.innerHTML=this.strings.reduce(((e,n,r)=>e+n+(r<t?`{{ ${r} }}`:"")),""),Dse.set(this.stringsKey,e),e}}renderInto(e){var t;let n=this.template;if(Lse.get(e)!==n){Lse.set(e,n);let t=new tre(n,this.values,this.processor);return Pse.set(e,t),void(e instanceof cre?e.replace(...t.children):e.appendChild(t))}let r=Pse.get(e);null==(t=null==r?void 0:r.update)||t.call(r,this.values)}},Nse={processCallback(e,t,n){var r;if(n)for(let[i,a]of t)if(i in n){Rse(a,null!=(r=n[i])?r:"")}}};function Ose(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return new Mse(e,n,Nse)}var jse=Object.values({TOP:"top",CENTER:"center",BOTTOM:"bottom",LAYER:"layer",MEDIA_LAYER:"media-layer",POSTER_LAYER:"poster-layer",VERTICAL_LAYER:"vertical-layer",CENTERED_LAYER:"centered-layer",GESTURE_LAYER:"gesture-layer",CONTROLLER_LAYER:"controller",BUTTON:"button",RANGE:"range",DISPLAY:"display",CONTROL_BAR:"control-bar",MENU_BUTTON:"menu-button",MENU:"menu",OPTION:"option",POSTER:"poster",LIVE:"live",PLAY:"play",PRE_PLAY:"pre-play",SEEK_BACKWARD:"seek-backward",SEEK_FORWARD:"seek-forward",MUTE:"mute",CAPTIONS:"captions",AIRPLAY:"airplay",PIP:"pip",FULLSCREEN:"fullscreen",CAST:"cast",PLAYBACK_RATE:"playback-rate",VOLUME:"volume",TIME:"time",TITLE:"title",AUDIO_TRACK:"audio-track",RENDITION:"rendition"}).join(", "),Fse=e=>{var t,n,r,i,a,o,s,l,c,u,d,h,p,f,m,g,v,y,b,w,E,x,_,A,T,S,k,C,I,R,D,L,P,M;return Ose`
  <media-theme
    template="${e.themeTemplate||!1}"
    defaultstreamtype="${null!=(t=e.defaultStreamType)&&t}"
    hotkeys="${(e=>{let t=e.hotKeys?`${e.hotKeys}`:"";return"live"===lse(e.streamType)&&(t+=" noarrowleft noarrowright"),t})(e)||!1}"
    nohotkeys="${e.noHotKeys||!e.hasSrc||!1}"
    noautoseektolive="${!(null==(n=e.streamType)||!n.includes(V8.LIVE))&&0!==e.targetLiveWindow}"
    novolumepref="${e.novolumepref||!1}"
    disabled="${!e.hasSrc||e.isDialogOpen}"
    audio="${null!=(r=e.audio)&&r}"
    style="${null!=(i=function(e){let t="";return Object.entries(e).forEach((e=>{let[n,r]=e;null!=r&&(t+=`${ese(n)}: ${r}; `)})),t?t.trim():void 0}({"--media-primary-color":e.primaryColor,"--media-secondary-color":e.secondaryColor,"--media-accent-color":e.accentColor}))&&i}"
    defaultsubtitles="${!e.defaultHiddenCaptions}"
    forwardseekoffset="${null!=(a=e.forwardSeekOffset)&&a}"
    backwardseekoffset="${null!=(o=e.backwardSeekOffset)&&o}"
    playbackrates="${null!=(s=e.playbackRates)&&s}"
    defaultshowremainingtime="${null!=(l=e.defaultShowRemainingTime)&&l}"
    defaultduration="${null!=(c=e.defaultDuration)&&c}"
    hideduration="${null!=(u=e.hideDuration)&&u}"
    title="${null!=(d=e.title)&&d}"
    proudlydisplaymuxbadge="${null!=(h=e.proudlyDisplayMuxBadge)&&h}"
    exportparts="${jse}"
    onclose="${e.onCloseErrorDialog}"
    onfocusin="${e.onFocusInErrorDialog}"
  >
    <mux-video
      slot="media"
      target-live-window="${null!=(p=e.targetLiveWindow)&&p}"
      stream-type="${null!=(f=lse(e.streamType))&&f}"
      crossorigin="${null!=(m=e.crossOrigin)?m:""}"
      playsinline
      autoplay="${null!=(g=e.autoplay)&&g}"
      muted="${null!=(v=e.muted)&&v}"
      loop="${null!=(y=e.loop)&&y}"
      preload="${null!=(b=e.preload)&&b}"
      debug="${null!=(w=e.debug)&&w}"
      prefer-cmcd="${null!=(E=e.preferCmcd)&&E}"
      disable-tracking="${null!=(x=e.disableTracking)&&x}"
      disable-cookies="${null!=(_=e.disableCookies)&&_}"
      prefer-playback="${null!=(A=e.preferPlayback)&&A}"
      start-time="${null!=e.startTime&&e.startTime}"
      beacon-collection-domain="${null!=(T=e.beaconCollectionDomain)&&T}"
      player-init-time="${null!=(S=e.playerInitTime)&&S}"
      player-software-name="${null!=(k=e.playerSoftwareName)&&k}"
      player-software-version="${null!=(C=e.playerSoftwareVersion)&&C}"
      env-key="${null!=(I=e.envKey)&&I}"
      custom-domain="${null!=(R=e.customDomain)&&R}"
      src="${e.src?e.src:!!e.playbackId&&eee(e)}"
      cast-src="${e.src?e.src:!!e.playbackId&&eee(e)}"
      cast-receiver="${null!=(D=e.castReceiver)&&D}"
      drm-token="${null!=(P=null==(L=e.tokens)?void 0:L.drm)&&P}"
      exportparts="video"
    >
      ${e.storyboard?Ose`<track label="thumbnails" default kind="metadata" src="${e.storyboard}" />`:Ose``}
      <slot></slot>
    </mux-video>
    <slot name="poster" slot="poster">
      <media-poster-image
        part="poster"
        exportparts="poster, img"
        src="${!!e.poster&&e.poster}"
        placeholdersrc="${null!=(M=e.placeholder)&&M}"
      ></media-poster-image>
    </slot>
  </media-theme>
`},Use=e=>e.charAt(0).toUpperCase()+e.slice(1),Bse=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var n,r;if(e.muxCode){let i=Use(null!=(n=e.errorCategory)?n:"video"),a=j8(null!=(r=e.errorCategory)?r:M8);if(e.muxCode===O8.NETWORK_OFFLINE)return a7("Your device appears to be offline",t);if(e.muxCode===O8.NETWORK_TOKEN_EXPIRED)return a7("{category} URL has expired",t).format({category:i});if([O8.NETWORK_TOKEN_SUB_MISMATCH,O8.NETWORK_TOKEN_AUD_MISMATCH,O8.NETWORK_TOKEN_AUD_MISSING,O8.NETWORK_TOKEN_MALFORMED].includes(e.muxCode))return a7("{category} URL is formatted incorrectly",t).format({category:i});if(e.muxCode===O8.NETWORK_TOKEN_MISSING)return a7("Invalid {categoryName} URL",t).format({categoryName:a});if(e.muxCode===O8.NETWORK_NOT_FOUND)return a7("{category} does not exist",t).format({category:i});if(e.muxCode===O8.NETWORK_NOT_READY)return a7("{category} is not currently available",t).format({category:i})}if(e.code){if(e.code===U8.MEDIA_ERR_NETWORK)return a7("Network Error",t);if(e.code===U8.MEDIA_ERR_DECODE)return a7("Media Error",t);if(e.code===U8.MEDIA_ERR_SRC_NOT_SUPPORTED)return a7("Source Not Supported",t)}return a7("Error",t)}(e,t),r=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var n,r;if(e.muxCode){let i=Use(null!=(n=e.errorCategory)?n:"video"),a=j8(null!=(r=e.errorCategory)?r:M8);return e.muxCode===O8.NETWORK_OFFLINE?a7("Check your internet connection and try reloading this video.",t):e.muxCode===O8.NETWORK_TOKEN_EXPIRED?a7("The video\u2019s secured {tokenNamePrefix}-token has expired.",t).format({tokenNamePrefix:a}):e.muxCode===O8.NETWORK_TOKEN_SUB_MISMATCH?a7("The video\u2019s playback ID does not match the one encoded in the {tokenNamePrefix}-token.",t).format({tokenNamePrefix:a}):e.muxCode===O8.NETWORK_TOKEN_MALFORMED?a7("{category} URL is formatted incorrectly",t).format({category:i}):[O8.NETWORK_TOKEN_AUD_MISMATCH,O8.NETWORK_TOKEN_AUD_MISSING].includes(e.muxCode)?a7("The {tokenNamePrefix}-token is formatted with incorrect information.",t).format({tokenNamePrefix:a}):[O8.NETWORK_TOKEN_MISSING,O8.NETWORK_INVALID_URL].includes(e.muxCode)?a7("The video URL or {tokenNamePrefix}-token are formatted with incorrect or incomplete information.",t).format({tokenNamePrefix:a}):e.muxCode===O8.NETWORK_NOT_FOUND?"":e.muxCode===O8.NETWORK_NOT_READY?a7("The live stream or video file are not yet ready.",t):e.message}return e.code&&(e.code===U8.MEDIA_ERR_NETWORK||e.code===U8.MEDIA_ERR_DECODE||(e.code,U8.MEDIA_ERR_SRC_NOT_SUPPORTED)),e.message}(e,t);return{title:n,message:r}},$se=(e,t)=>{let n=(e=>{if(e.muxCode){if(e.muxCode===O8.NETWORK_TOKEN_EXPIRED)return"403-expired-token.md";if(e.muxCode===O8.NETWORK_TOKEN_MALFORMED)return"403-malformatted-token.md";if([O8.NETWORK_TOKEN_AUD_MISMATCH,O8.NETWORK_TOKEN_AUD_MISSING].includes(e.muxCode))return"403-incorrect-aud-value.md";if(e.muxCode===O8.NETWORK_TOKEN_SUB_MISMATCH)return"403-playback-id-mismatch.md";if(e.muxCode===O8.NETWORK_TOKEN_MISSING)return"missing-signed-tokens.md";if(e.muxCode===O8.NETWORK_NOT_FOUND)return"404-not-found.md";if(e.muxCode===O8.NETWORK_NOT_READY)return"412-not-playable.md"}if(e.code){if(e.code===U8.MEDIA_ERR_NETWORK)return"";if(e.code===U8.MEDIA_ERR_DECODE)return"media-decode-error.md";if(e.code===U8.MEDIA_ERR_SRC_NOT_SUPPORTED)return"media-src-not-supported.md"}return""})(e);return{message:e.message,context:e.context,file:n}},Vse=Joe.createElement("template");"innerHTML"in Vse&&(Vse.innerHTML='<template id="media-theme-gerwig">\n  <style>\n    @keyframes pre-play-hide {\n      0% {\n        transform: scale(1);\n        opacity: 1;\n      }\n\n      30% {\n        transform: scale(0.7);\n      }\n\n      100% {\n        transform: scale(1.5);\n        opacity: 0;\n      }\n    }\n\n    :host {\n      --_primary-color: var(--media-primary-color, #fff);\n      --_secondary-color: var(--media-secondary-color, transparent);\n      --_accent-color: var(--media-accent-color, #fa50b5);\n      --_text-color: var(--media-text-color, #000);\n\n      --media-icon-color: var(--_primary-color);\n      --media-control-background: var(--_secondary-color);\n      --media-control-hover-background: var(--_accent-color);\n      --media-time-buffered-color: rgba(255, 255, 255, 0.4);\n      --media-preview-time-text-shadow: none;\n      --media-control-height: 14px;\n      --media-control-padding: 6px;\n      --media-tooltip-container-margin: 6px;\n      --media-tooltip-distance: 18px;\n\n      color: var(--_primary-color);\n      display: inline-block;\n      width: 100%;\n      height: 100%;\n    }\n\n    :host([audio]) {\n      --_secondary-color: var(--media-secondary-color, black);\n      --media-preview-time-text-shadow: none;\n    }\n\n    :host([audio]) ::slotted([slot=\'media\']) {\n      height: 0px;\n    }\n\n    :host([audio]) media-loading-indicator {\n      display: none;\n    }\n\n    :host([audio]) media-controller {\n      background: transparent;\n    }\n\n    :host([audio]) media-controller::part(vertical-layer) {\n      background: transparent;\n    }\n\n    :host([audio]) media-control-bar {\n      width: 100%;\n      background-color: var(--media-control-background);\n    }\n\n    /*\n     * 0.433s is the transition duration for VTT Regions.\n     * Borrowed here, so the captions don\'t move too fast.\n     */\n    media-controller {\n      --media-webkit-text-track-transform: translateY(0) scale(0.98);\n      --media-webkit-text-track-transition: transform 0.433s ease-out 0.3s;\n    }\n    media-controller:is([mediapaused], :not([userinactive])) {\n      --media-webkit-text-track-transform: translateY(-50px) scale(0.98);\n      --media-webkit-text-track-transition: transform 0.15s ease;\n    }\n\n    /*\n     * CSS specific to iOS devices.\n     * See: https://stackoverflow.com/questions/30102792/css-media-query-to-target-only-ios-devices/60220757#60220757\n     */\n    @supports (-webkit-touch-callout: none) {\n      /* Disable subtitle adjusting for iOS Safari */\n      media-controller[mediaisfullscreen] {\n        --media-webkit-text-track-transform: unset;\n        --media-webkit-text-track-transition: unset;\n      }\n    }\n\n    media-time-range {\n      --media-box-padding-left: 6px;\n      --media-box-padding-right: 6px;\n      --media-range-bar-color: var(--_accent-color);\n      --media-time-range-buffered-color: var(--_primary-color);\n      --media-range-track-color: transparent;\n      --media-range-track-background: rgba(255, 255, 255, 0.4);\n      --media-range-thumb-background: radial-gradient(\n        circle,\n        #000 0%,\n        #000 25%,\n        var(--_accent-color) 25%,\n        var(--_accent-color)\n      );\n      --media-range-thumb-width: 12px;\n      --media-range-thumb-height: 12px;\n      --media-range-thumb-transform: scale(0);\n      --media-range-thumb-transition: transform 0.3s;\n      --media-range-thumb-opacity: 1;\n      --media-preview-background: var(--_primary-color);\n      --media-box-arrow-background: var(--_primary-color);\n      --media-preview-thumbnail-border: 5px solid var(--_primary-color);\n      --media-preview-border-radius: 5px;\n      --media-text-color: var(--_text-color);\n      --media-control-hover-background: transparent;\n      --media-preview-chapter-text-shadow: none;\n      color: var(--_accent-color);\n      padding: 0 6px;\n    }\n\n    :host([audio]) media-time-range {\n      --media-preview-time-padding: 1.5px 6px;\n      --media-preview-box-margin: 0 0 -5px;\n    }\n\n    media-time-range:hover {\n      --media-range-thumb-transform: scale(1);\n    }\n\n    media-preview-thumbnail {\n      border-bottom-width: 0;\n    }\n\n    [part~=\'menu\'] {\n      border-radius: 2px;\n      border: 1px solid rgba(0, 0, 0, 0.1);\n      bottom: 50px;\n      padding: 2.5px 10px;\n    }\n\n    [part~=\'menu\']::part(indicator) {\n      fill: var(--_accent-color);\n    }\n\n    [part~=\'menu\']::part(menu-item) {\n      box-sizing: border-box;\n      display: flex;\n      align-items: center;\n      padding: 6px 10px;\n      min-height: 34px;\n    }\n\n    [part~=\'menu\']::part(checked) {\n      font-weight: 700;\n    }\n\n    media-captions-menu,\n    media-rendition-menu,\n    media-audio-track-menu,\n    media-playback-rate-menu {\n      position: absolute; /* ensure they don\'t take up space in DOM on load */\n      --media-menu-background: var(--_primary-color);\n      --media-menu-item-checked-background: transparent;\n      --media-text-color: var(--_text-color);\n      --media-menu-item-hover-background: transparent;\n      --media-menu-item-hover-outline: var(--_accent-color) solid 1px;\n    }\n\n    /* The icon is a circle so make it 16px high instead of 14px for more balance. */\n    media-audio-track-menu-button {\n      --media-control-padding: 5px;\n      --media-control-height: 16px;\n    }\n\n    media-playback-rate-menu-button {\n      --media-control-padding: 6px 3px;\n      min-width: 4.4ch;\n    }\n\n    media-playback-rate-menu {\n      --media-menu-flex-direction: row;\n      --media-menu-item-checked-background: var(--_accent-color);\n      --media-menu-item-checked-indicator-display: none;\n      margin-right: 6px;\n      padding: 0;\n      --media-menu-gap: 0.25em;\n    }\n\n    media-playback-rate-menu[part~=\'menu\']::part(menu-item) {\n      padding: 6px 6px 6px 8px;\n    }\n\n    media-playback-rate-menu[part~=\'menu\']::part(checked) {\n      color: #fff;\n    }\n\n    :host(:not([audio])) media-time-range {\n      /* Adding px is required here for calc() */\n      --media-range-padding: 0px;\n      background: transparent;\n      z-index: 10;\n      height: 10px;\n      bottom: -3px;\n      width: 100%;\n    }\n\n    media-control-bar :is([role=\'button\'], [role=\'switch\'], button) {\n      line-height: 0;\n    }\n\n    media-control-bar :is([part*=\'button\'], [part*=\'range\'], [part*=\'display\']) {\n      border-radius: 3px;\n    }\n\n    .spacer {\n      flex-grow: 1;\n      background-color: var(--media-control-background, rgba(20, 20, 30, 0.7));\n    }\n\n    media-control-bar[slot~=\'top-chrome\'] {\n      min-height: 42px;\n      pointer-events: none;\n    }\n\n    media-control-bar {\n      --gradient-steps: hsl(0 0% 0% / 0) 0%, hsl(0 0% 0% / 0.013) 8.1%, hsl(0 0% 0% / 0.049) 15.5%,\n        hsl(0 0% 0% / 0.104) 22.5%, hsl(0 0% 0% / 0.175) 29%, hsl(0 0% 0% / 0.259) 35.3%, hsl(0 0% 0% / 0.352) 41.2%,\n        hsl(0 0% 0% / 0.45) 47.1%, hsl(0 0% 0% / 0.55) 52.9%, hsl(0 0% 0% / 0.648) 58.8%, hsl(0 0% 0% / 0.741) 64.7%,\n        hsl(0 0% 0% / 0.825) 71%, hsl(0 0% 0% / 0.896) 77.5%, hsl(0 0% 0% / 0.951) 84.5%, hsl(0 0% 0% / 0.987) 91.9%,\n        hsl(0 0% 0%) 100%;\n    }\n\n    :host([title]:not([audio])) media-control-bar[slot=\'top-chrome\']::before {\n      content: \'\';\n      position: absolute;\n      width: 100%;\n      padding-bottom: min(100px, 25%);\n      background: linear-gradient(to top, var(--gradient-steps));\n      opacity: 0.8;\n      pointer-events: none;\n    }\n\n    :host(:not([audio])) media-control-bar[part~=\'bottom\']::before {\n      content: \'\';\n      position: absolute;\n      width: 100%;\n      bottom: 0;\n      left: 0;\n      padding-bottom: min(100px, 25%);\n      background: linear-gradient(to bottom, var(--gradient-steps));\n      opacity: 0.8;\n      z-index: 1;\n      pointer-events: none;\n    }\n\n    media-control-bar[part~=\'bottom\'] > * {\n      z-index: 20;\n    }\n\n    media-control-bar[part~=\'bottom\'] {\n      padding: 6px 6px;\n    }\n\n    media-control-bar[slot~=\'top-chrome\'] > * {\n      --media-control-background: transparent;\n      --media-control-hover-background: transparent;\n      position: relative;\n    }\n\n    media-controller::part(vertical-layer) {\n      transition: background-color 1s;\n    }\n\n    media-controller:is([mediapaused], :not([userinactive]))::part(vertical-layer) {\n      background-color: var(--controls-backdrop-color, var(--controls, transparent));\n      transition: background-color 0.25s;\n    }\n\n    .center-controls {\n      --media-button-icon-width: 100%;\n      --media-button-icon-height: auto;\n      --media-tooltip-display: none;\n      pointer-events: none;\n      width: 100%;\n      display: flex;\n      flex-flow: row;\n      align-items: center;\n      justify-content: center;\n      filter: drop-shadow(0 0 2px rgb(0 0 0 / 0.25)) drop-shadow(0 0 6px rgb(0 0 0 / 0.25));\n      paint-order: stroke;\n      stroke: rgba(102, 102, 102, 1);\n      stroke-width: 0.3px;\n      text-shadow:\n        0 0 2px rgb(0 0 0 / 0.25),\n        0 0 6px rgb(0 0 0 / 0.25);\n    }\n\n    .center-controls media-play-button {\n      --media-control-background: transparent;\n      --media-control-hover-background: transparent;\n      --media-control-padding: 0;\n      width: 40px;\n    }\n\n    [breakpointsm] .center-controls media-play-button {\n      width: 90px;\n      height: 90px;\n      border-radius: 50%;\n      transition: background 0.4s;\n      padding: 24px;\n      --media-control-background: #000;\n      --media-control-hover-background: var(--_accent-color);\n    }\n\n    .center-controls media-seek-backward-button,\n    .center-controls media-seek-forward-button {\n      --media-control-background: transparent;\n      --media-control-hover-background: transparent;\n      padding: 0;\n      margin: 0 20px;\n      width: max(33px, min(8%, 40px));\n    }\n\n    [breakpointsm]:not([audio]) .center-controls.pre-playback {\n      display: grid;\n      align-items: initial;\n      justify-content: initial;\n      height: 100%;\n      overflow: hidden;\n    }\n\n    [breakpointsm]:not([audio]) .center-controls.pre-playback media-play-button {\n      place-self: var(--_pre-playback-place, center);\n      grid-area: 1 / 1;\n      margin: 16px;\n    }\n\n    /* Show and hide controls or pre-playback state */\n\n    [breakpointsm]:is([mediahasplayed], :not([mediapaused])):not([audio])\n      .center-controls.pre-playback\n      media-play-button {\n      /* Using `forwards` would lead to a laggy UI after the animation got in the end state */\n      animation: 0.3s linear pre-play-hide;\n      opacity: 0;\n      pointer-events: none;\n    }\n\n    .autoplay-unmute {\n      --media-control-hover-background: transparent;\n      width: 100%;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      filter: drop-shadow(0 0 2px rgb(0 0 0 / 0.25)) drop-shadow(0 0 6px rgb(0 0 0 / 0.25));\n    }\n\n    .autoplay-unmute-btn {\n      --media-control-height: 16px;\n      border-radius: 8px;\n      background: #000;\n      color: var(--_primary-color);\n      display: flex;\n      align-items: center;\n      padding: 8px 16px;\n      font-size: 18px;\n      font-weight: 500;\n      cursor: pointer;\n    }\n\n    .autoplay-unmute-btn:hover {\n      background: var(--_accent-color);\n    }\n\n    [breakpointsm] .autoplay-unmute-btn {\n      --media-control-height: 30px;\n      padding: 14px 24px;\n      font-size: 26px;\n    }\n\n    .autoplay-unmute-btn svg {\n      margin: 0 6px 0 0;\n    }\n\n    [breakpointsm] .autoplay-unmute-btn svg {\n      margin: 0 10px 0 0;\n    }\n\n    media-controller:not([audio]):not([mediahasplayed]) *:is(media-control-bar, media-time-range) {\n      display: none;\n    }\n\n    media-error-dialog:not([mediaerrorcode]) {\n      opacity: 0;\n    }\n\n    media-loading-indicator {\n      --media-loading-icon-width: 100%;\n      --media-button-icon-height: auto;\n      display: var(--media-control-display, var(--media-loading-indicator-display, flex));\n      pointer-events: none;\n      position: absolute;\n      width: min(15%, 150px);\n      flex-flow: row;\n      align-items: center;\n      justify-content: center;\n    }\n\n    /* Intentionally don\'t target the div for transition but the children\n     of the div. Prevents messing with media-chrome\'s autohide feature. */\n    media-loading-indicator + div * {\n      transition: opacity 0.15s;\n      opacity: 1;\n    }\n\n    media-loading-indicator[medialoading]:not([mediapaused]) ~ div > * {\n      opacity: 0;\n      transition-delay: 400ms;\n    }\n\n    media-volume-range {\n      width: min(100%, 100px);\n      --media-range-padding-left: 10px;\n      --media-range-padding-right: 10px;\n      --media-range-thumb-width: 12px;\n      --media-range-thumb-height: 12px;\n      --media-range-thumb-background: radial-gradient(\n        circle,\n        #000 0%,\n        #000 25%,\n        var(--_primary-color) 25%,\n        var(--_primary-color)\n      );\n      --media-control-hover-background: none;\n    }\n\n    media-time-display {\n      white-space: nowrap;\n    }\n\n    /* Generic style for explicitly disabled controls */\n    media-control-bar[part~=\'bottom\'] [disabled],\n    media-control-bar[part~=\'bottom\'] [aria-disabled=\'true\'] {\n      opacity: 60%;\n      cursor: not-allowed;\n    }\n\n    media-text-display {\n      --media-font-size: 16px;\n      --media-control-padding: 14px;\n      font-weight: 500;\n    }\n\n    media-play-button.animated *:is(g, path) {\n      transition: all 0.3s;\n    }\n\n    media-play-button.animated[mediapaused] .pause-icon-pt1 {\n      opacity: 0;\n    }\n\n    media-play-button.animated[mediapaused] .pause-icon-pt2 {\n      transform-origin: center center;\n      transform: scaleY(0);\n    }\n\n    media-play-button.animated[mediapaused] .play-icon {\n      clip-path: inset(0 0 0 0);\n    }\n\n    media-play-button.animated:not([mediapaused]) .play-icon {\n      clip-path: inset(0 0 0 100%);\n    }\n\n    media-seek-forward-button,\n    media-seek-backward-button {\n      --media-font-weight: 400;\n    }\n\n    .mute-icon {\n      display: inline-block;\n    }\n\n    .mute-icon :is(path, g) {\n      transition: opacity 0.5s;\n    }\n\n    .muted {\n      opacity: 0;\n    }\n\n    media-mute-button[mediavolumelevel=\'low\'] :is(.volume-medium, .volume-high),\n    media-mute-button[mediavolumelevel=\'medium\'] :is(.volume-high) {\n      opacity: 0;\n    }\n\n    media-mute-button[mediavolumelevel=\'off\'] .unmuted {\n      opacity: 0;\n    }\n\n    media-mute-button[mediavolumelevel=\'off\'] .muted {\n      opacity: 1;\n    }\n\n    /**\n     * Our defaults for these buttons are to hide them at small sizes\n     * users can override this with CSS\n     */\n    media-controller:not([breakpointsm]):not([audio]) {\n      --bottom-play-button: none;\n      --bottom-seek-backward-button: none;\n      --bottom-seek-forward-button: none;\n      --bottom-time-display: none;\n      --bottom-playback-rate-menu-button: none;\n      --bottom-pip-button: none;\n    }\n\n    [part=\'mux-badge\'] {\n      position: absolute;\n      bottom: 10px;\n      right: 10px;\n      z-index: 2;\n      opacity: 0.6;\n      transition:\n        opacity 0.2s ease-in-out,\n        bottom 0.2s ease-in-out;\n    }\n\n    [part=\'mux-badge\']:hover {\n      opacity: 1;\n    }\n\n    [part=\'mux-badge\'] a {\n      font-size: 14px;\n      font-family: var(--_font-family);\n      color: var(--_primary-color);\n      text-decoration: none;\n      display: flex;\n      align-items: center;\n      gap: 5px;\n    }\n\n    [part=\'mux-badge\'] .mux-badge-text {\n      transition: opacity 0.5s ease-in-out;\n      opacity: 0;\n    }\n\n    [part=\'mux-badge\'] .mux-badge-logo {\n      width: 40px;\n      height: auto;\n      display: inline-block;\n    }\n\n    [part=\'mux-badge\'] .mux-badge-logo svg {\n      width: 100%;\n      height: 100%;\n      fill: white;\n    }\n\n    media-controller:not([userinactive]):not([mediahasplayed]) [part=\'mux-badge\'],\n    media-controller:not([userinactive]) [part=\'mux-badge\'],\n    media-controller[mediahasplayed][mediapaused] [part=\'mux-badge\'] {\n      transition: bottom 0.1s ease-in-out;\n    }\n\n    media-controller[userinactive]:not([mediapaused]) [part=\'mux-badge\'] {\n      transition: bottom 0.2s ease-in-out 0.62s;\n    }\n\n    media-controller:not([userinactive]) [part=\'mux-badge\'] .mux-badge-text,\n    media-controller[mediahasplayed][mediapaused] [part=\'mux-badge\'] .mux-badge-text {\n      opacity: 1;\n    }\n\n    media-controller[userinactive]:not([mediapaused]) [part=\'mux-badge\'] .mux-badge-text {\n      opacity: 0;\n    }\n\n    media-controller[userinactive]:not([mediapaused]) [part=\'mux-badge\'] {\n      bottom: 10px;\n    }\n\n    media-controller:not([userinactive]):not([mediahasplayed]) [part=\'mux-badge\'] {\n      bottom: 10px;\n    }\n\n    media-controller:not([userinactive])[mediahasplayed] [part=\'mux-badge\'],\n    media-controller[mediahasplayed][mediapaused] [part=\'mux-badge\'] {\n      bottom: calc(28px + var(--media-control-height, 0px) + var(--media-control-padding, 0px) * 2);\n    }\n  </style>\n\n  <template partial="TitleDisplay">\n    <template if="title">\n      <media-text-display part="top title display" class="title-display">{{title}}</media-text-display>\n    </template>\n  </template>\n\n  <template partial="PlayButton">\n    <media-play-button\n      part="{{section ?? \'bottom\'}} play button"\n      disabled="{{disabled}}"\n      aria-disabled="{{disabled}}"\n      class="animated"\n    >\n      <svg aria-hidden="true" viewBox="0 0 18 14" slot="icon">\n        <g class="play-icon">\n          <path\n            d="M15.5987 6.2911L3.45577 0.110898C2.83667 -0.204202 2.06287 0.189698 2.06287 0.819798V13.1802C2.06287 13.8103 2.83667 14.2042 3.45577 13.8891L15.5987 7.7089C16.2178 7.3938 16.2178 6.6061 15.5987 6.2911Z"\n          />\n        </g>\n        <g class="pause-icon">\n          <path\n            class="pause-icon-pt1"\n            d="M5.90709 0H2.96889C2.46857 0 2.06299 0.405585 2.06299 0.9059V13.0941C2.06299 13.5944 2.46857 14 2.96889 14H5.90709C6.4074 14 6.81299 13.5944 6.81299 13.0941V0.9059C6.81299 0.405585 6.4074 0 5.90709 0Z"\n          />\n          <path\n            class="pause-icon-pt2"\n            d="M15.1571 0H12.2189C11.7186 0 11.313 0.405585 11.313 0.9059V13.0941C11.313 13.5944 11.7186 14 12.2189 14H15.1571C15.6574 14 16.063 13.5944 16.063 13.0941V0.9059C16.063 0.405585 15.6574 0 15.1571 0Z"\n          />\n        </g>\n      </svg>\n    </media-play-button>\n  </template>\n\n  <template partial="PrePlayButton">\n    <media-play-button\n      part="{{section ?? \'center\'}} play button pre-play"\n      disabled="{{disabled}}"\n      aria-disabled="{{disabled}}"\n    >\n      <svg aria-hidden="true" viewBox="0 0 18 14" slot="icon" style="transform: translate(3px, 0)">\n        <path\n          d="M15.5987 6.2911L3.45577 0.110898C2.83667 -0.204202 2.06287 0.189698 2.06287 0.819798V13.1802C2.06287 13.8103 2.83667 14.2042 3.45577 13.8891L15.5987 7.7089C16.2178 7.3938 16.2178 6.6061 15.5987 6.2911Z"\n        />\n      </svg>\n    </media-play-button>\n  </template>\n\n  <template partial="SeekBackwardButton">\n    <media-seek-backward-button\n      seekoffset="{{backwardseekoffset}}"\n      part="{{section ?? \'bottom\'}} seek-backward button"\n      disabled="{{disabled}}"\n      aria-disabled="{{disabled}}"\n    >\n      <svg viewBox="0 0 22 14" aria-hidden="true" slot="icon">\n        <path\n          d="M3.65 2.07888L0.0864 6.7279C-0.0288 6.87812 -0.0288 7.12188 0.0864 7.2721L3.65 11.9211C3.7792 12.0896 4 11.9703 4 11.7321V2.26787C4 2.02968 3.7792 1.9104 3.65 2.07888Z"\n        />\n        <text transform="translate(6 12)" style="font-size: 14px; font-family: \'ArialMT\', \'Arial\'">\n          {{backwardseekoffset}}\n        </text>\n      </svg>\n    </media-seek-backward-button>\n  </template>\n\n  <template partial="SeekForwardButton">\n    <media-seek-forward-button\n      seekoffset="{{forwardseekoffset}}"\n      part="{{section ?? \'bottom\'}} seek-forward button"\n      disabled="{{disabled}}"\n      aria-disabled="{{disabled}}"\n    >\n      <svg viewBox="0 0 22 14" aria-hidden="true" slot="icon">\n        <g>\n          <text transform="translate(-1 12)" style="font-size: 14px; font-family: \'ArialMT\', \'Arial\'">\n            {{forwardseekoffset}}\n          </text>\n          <path\n            d="M18.35 11.9211L21.9136 7.2721C22.0288 7.12188 22.0288 6.87812 21.9136 6.7279L18.35 2.07888C18.2208 1.91041 18 2.02968 18 2.26787V11.7321C18 11.9703 18.2208 12.0896 18.35 11.9211Z"\n          />\n        </g>\n      </svg>\n    </media-seek-forward-button>\n  </template>\n\n  <template partial="MuteButton">\n    <media-mute-button part="bottom mute button" disabled="{{disabled}}" aria-disabled="{{disabled}}">\n      <svg viewBox="0 0 18 14" slot="icon" class="mute-icon" aria-hidden="true">\n        <g class="unmuted">\n          <path\n            d="M6.76786 1.21233L3.98606 3.98924H1.19937C0.593146 3.98924 0.101743 4.51375 0.101743 5.1607V6.96412L0 6.99998L0.101743 7.03583V8.83926C0.101743 9.48633 0.593146 10.0108 1.19937 10.0108H3.98606L6.76773 12.7877C7.23561 13.2547 8 12.9007 8 12.2171V1.78301C8 1.09925 7.23574 0.745258 6.76786 1.21233Z"\n          />\n          <path\n            class="volume-low"\n            d="M10 3.54781C10.7452 4.55141 11.1393 5.74511 11.1393 6.99991C11.1393 8.25471 10.7453 9.44791 10 10.4515L10.7988 11.0496C11.6734 9.87201 12.1356 8.47161 12.1356 6.99991C12.1356 5.52821 11.6735 4.12731 10.7988 2.94971L10 3.54781Z"\n          />\n          <path\n            class="volume-medium"\n            d="M12.3778 2.40086C13.2709 3.76756 13.7428 5.35806 13.7428 7.00026C13.7428 8.64246 13.2709 10.233 12.3778 11.5992L13.2106 12.1484C14.2107 10.6185 14.739 8.83796 14.739 7.00016C14.739 5.16236 14.2107 3.38236 13.2106 1.85156L12.3778 2.40086Z"\n          />\n          <path\n            class="volume-high"\n            d="M15.5981 0.75L14.7478 1.2719C15.7937 2.9919 16.3468 4.9723 16.3468 7C16.3468 9.0277 15.7937 11.0082 14.7478 12.7281L15.5981 13.25C16.7398 11.3722 17.343 9.211 17.343 7C17.343 4.789 16.7398 2.6268 15.5981 0.75Z"\n          />\n        </g>\n        <g class="muted">\n          <path\n            fill-rule="evenodd"\n            clip-rule="evenodd"\n            d="M4.39976 4.98924H1.19937C1.19429 4.98924 1.17777 4.98961 1.15296 5.01609C1.1271 5.04369 1.10174 5.09245 1.10174 5.1607V8.83926C1.10174 8.90761 1.12714 8.95641 1.15299 8.984C1.17779 9.01047 1.1943 9.01084 1.19937 9.01084H4.39977L7 11.6066V2.39357L4.39976 4.98924ZM7.47434 1.92006C7.4743 1.9201 7.47439 1.92002 7.47434 1.92006V1.92006ZM6.76773 12.7877L3.98606 10.0108H1.19937C0.593146 10.0108 0.101743 9.48633 0.101743 8.83926V7.03583L0 6.99998L0.101743 6.96412V5.1607C0.101743 4.51375 0.593146 3.98924 1.19937 3.98924H3.98606L6.76786 1.21233C7.23574 0.745258 8 1.09925 8 1.78301V12.2171C8 12.9007 7.23561 13.2547 6.76773 12.7877Z"\n          />\n          <path\n            fill-rule="evenodd"\n            clip-rule="evenodd"\n            d="M15.2677 9.30323C15.463 9.49849 15.7796 9.49849 15.9749 9.30323C16.1701 9.10796 16.1701 8.79138 15.9749 8.59612L14.2071 6.82841L15.9749 5.06066C16.1702 4.8654 16.1702 4.54882 15.9749 4.35355C15.7796 4.15829 15.4631 4.15829 15.2678 4.35355L13.5 6.1213L11.7322 4.35348C11.537 4.15822 11.2204 4.15822 11.0251 4.35348C10.8298 4.54874 10.8298 4.86532 11.0251 5.06058L12.7929 6.82841L11.0251 8.59619C10.8299 8.79146 10.8299 9.10804 11.0251 9.3033C11.2204 9.49856 11.537 9.49856 11.7323 9.3033L13.5 7.53552L15.2677 9.30323Z"\n          />\n        </g>\n      </svg>\n    </media-mute-button>\n  </template>\n\n  <template partial="PipButton">\n    <media-pip-button part="bottom pip button" disabled="{{disabled}}" aria-disabled="{{disabled}}">\n      <svg viewBox="0 0 18 14" aria-hidden="true" slot="icon">\n        <path\n          d="M15.9891 0H2.011C0.9004 0 0 0.9003 0 2.0109V11.989C0 13.0996 0.9004 14 2.011 14H15.9891C17.0997 14 18 13.0997 18 11.9891V2.0109C18 0.9003 17.0997 0 15.9891 0ZM17 11.9891C17 12.5465 16.5465 13 15.9891 13H2.011C1.4536 13 1.0001 12.5465 1.0001 11.9891V2.0109C1.0001 1.4535 1.4536 0.9999 2.011 0.9999H15.9891C16.5465 0.9999 17 1.4535 17 2.0109V11.9891Z"\n        />\n        <path\n          d="M15.356 5.67822H8.19523C8.03253 5.67822 7.90063 5.81012 7.90063 5.97282V11.3836C7.90063 11.5463 8.03253 11.6782 8.19523 11.6782H15.356C15.5187 11.6782 15.6506 11.5463 15.6506 11.3836V5.97282C15.6506 5.81012 15.5187 5.67822 15.356 5.67822Z"\n        />\n      </svg>\n    </media-pip-button>\n  </template>\n\n  <template partial="CaptionsMenu">\n    <media-captions-menu-button part="bottom captions button">\n      <svg aria-hidden="true" viewBox="0 0 18 14" slot="on">\n        <path\n          d="M15.989 0H2.011C0.9004 0 0 0.9003 0 2.0109V11.9891C0 13.0997 0.9004 14 2.011 14H15.989C17.0997 14 18 13.0997 18 11.9891V2.0109C18 0.9003 17.0997 0 15.989 0ZM4.2292 8.7639C4.5954 9.1902 5.0935 9.4031 5.7233 9.4031C6.1852 9.4031 6.5544 9.301 6.8302 9.0969C7.1061 8.8933 7.2863 8.614 7.3702 8.26H8.4322C8.3062 8.884 8.0093 9.3733 7.5411 9.7273C7.0733 10.0813 6.4703 10.2581 5.732 10.2581C5.108 10.2581 4.5699 10.1219 4.1168 9.8489C3.6637 9.5759 3.3141 9.1946 3.0685 8.7058C2.8224 8.2165 2.6994 7.6511 2.6994 7.009C2.6994 6.3611 2.8224 5.7927 3.0685 5.3034C3.3141 4.8146 3.6637 4.4323 4.1168 4.1559C4.5699 3.88 5.108 3.7418 5.732 3.7418C6.4703 3.7418 7.0733 3.922 7.5411 4.2818C8.0094 4.6422 8.3062 5.1461 8.4322 5.794H7.3702C7.2862 5.4283 7.106 5.1368 6.8302 4.921C6.5544 4.7052 6.1852 4.5968 5.7233 4.5968C5.0934 4.5968 4.5954 4.8116 4.2292 5.2404C3.8635 5.6696 3.6804 6.259 3.6804 7.009C3.6804 7.7531 3.8635 8.3381 4.2292 8.7639ZM11.0974 8.7639C11.4636 9.1902 11.9617 9.4031 12.5915 9.4031C13.0534 9.4031 13.4226 9.301 13.6984 9.0969C13.9743 8.8933 14.1545 8.614 14.2384 8.26H15.3004C15.1744 8.884 14.8775 9.3733 14.4093 9.7273C13.9415 10.0813 13.3385 10.2581 12.6002 10.2581C11.9762 10.2581 11.4381 10.1219 10.985 9.8489C10.5319 9.5759 10.1823 9.1946 9.9367 8.7058C9.6906 8.2165 9.5676 7.6511 9.5676 7.009C9.5676 6.3611 9.6906 5.7927 9.9367 5.3034C10.1823 4.8146 10.5319 4.4323 10.985 4.1559C11.4381 3.88 11.9762 3.7418 12.6002 3.7418C13.3385 3.7418 13.9415 3.922 14.4093 4.2818C14.8776 4.6422 15.1744 5.1461 15.3004 5.794H14.2384C14.1544 5.4283 13.9742 5.1368 13.6984 4.921C13.4226 4.7052 13.0534 4.5968 12.5915 4.5968C11.9616 4.5968 11.4636 4.8116 11.0974 5.2404C10.7317 5.6696 10.5486 6.259 10.5486 7.009C10.5486 7.7531 10.7317 8.3381 11.0974 8.7639Z"\n        />\n      </svg>\n      <svg aria-hidden="true" viewBox="0 0 18 14" slot="off">\n        <path\n          d="M5.73219 10.258C5.10819 10.258 4.57009 10.1218 4.11699 9.8488C3.66389 9.5758 3.31429 9.1945 3.06869 8.7057C2.82259 8.2164 2.69958 7.651 2.69958 7.0089C2.69958 6.361 2.82259 5.7926 3.06869 5.3033C3.31429 4.8145 3.66389 4.4322 4.11699 4.1558C4.57009 3.8799 5.10819 3.7417 5.73219 3.7417C6.47049 3.7417 7.07348 3.9219 7.54128 4.2817C8.00958 4.6421 8.30638 5.146 8.43238 5.7939H7.37039C7.28639 5.4282 7.10618 5.1367 6.83039 4.9209C6.55459 4.7051 6.18538 4.5967 5.72348 4.5967C5.09358 4.5967 4.59559 4.8115 4.22939 5.2403C3.86369 5.6695 3.68058 6.2589 3.68058 7.0089C3.68058 7.753 3.86369 8.338 4.22939 8.7638C4.59559 9.1901 5.09368 9.403 5.72348 9.403C6.18538 9.403 6.55459 9.3009 6.83039 9.0968C7.10629 8.8932 7.28649 8.6139 7.37039 8.2599H8.43238C8.30638 8.8839 8.00948 9.3732 7.54128 9.7272C7.07348 10.0812 6.47049 10.258 5.73219 10.258Z"\n        />\n        <path\n          d="M12.6003 10.258C11.9763 10.258 11.4382 10.1218 10.9851 9.8488C10.532 9.5758 10.1824 9.1945 9.93685 8.7057C9.69075 8.2164 9.56775 7.651 9.56775 7.0089C9.56775 6.361 9.69075 5.7926 9.93685 5.3033C10.1824 4.8145 10.532 4.4322 10.9851 4.1558C11.4382 3.8799 11.9763 3.7417 12.6003 3.7417C13.3386 3.7417 13.9416 3.9219 14.4094 4.2817C14.8777 4.6421 15.1745 5.146 15.3005 5.7939H14.2385C14.1545 5.4282 13.9743 5.1367 13.6985 4.9209C13.4227 4.7051 13.0535 4.5967 12.5916 4.5967C11.9617 4.5967 11.4637 4.8115 11.0975 5.2403C10.7318 5.6695 10.5487 6.2589 10.5487 7.0089C10.5487 7.753 10.7318 8.338 11.0975 8.7638C11.4637 9.1901 11.9618 9.403 12.5916 9.403C13.0535 9.403 13.4227 9.3009 13.6985 9.0968C13.9744 8.8932 14.1546 8.6139 14.2385 8.2599H15.3005C15.1745 8.8839 14.8776 9.3732 14.4094 9.7272C13.9416 10.0812 13.3386 10.258 12.6003 10.258Z"\n        />\n        <path\n          d="M15.9891 1C16.5465 1 17 1.4535 17 2.011V11.9891C17 12.5465 16.5465 13 15.9891 13H2.0109C1.4535 13 1 12.5465 1 11.9891V2.0109C1 1.4535 1.4535 0.9999 2.0109 0.9999L15.9891 1ZM15.9891 0H2.0109C0.9003 0 0 0.9003 0 2.0109V11.9891C0 13.0997 0.9003 14 2.0109 14H15.9891C17.0997 14 18 13.0997 18 11.9891V2.0109C18 0.9003 17.0997 0 15.9891 0Z"\n        />\n      </svg>\n    </media-captions-menu-button>\n    <media-captions-menu\n      hidden\n      anchor="auto"\n      part="bottom captions menu"\n      disabled="{{disabled}}"\n      aria-disabled="{{disabled}}"\n      exportparts="menu-item"\n    >\n      <div slot="checked-indicator">\n        <style>\n          .indicator {\n            position: relative;\n            top: 1px;\n            width: 0.9em;\n            height: auto;\n            fill: var(--_accent-color);\n            margin-right: 5px;\n          }\n\n          [aria-checked=\'false\'] .indicator {\n            display: none;\n          }\n        </style>\n        <svg viewBox="0 0 14 18" class="indicator">\n          <path\n            d="M12.252 3.48c-.115.033-.301.161-.425.291-.059.063-1.407 1.815-2.995 3.894s-2.897 3.79-2.908 3.802c-.013.014-.661-.616-1.672-1.624-.908-.905-1.702-1.681-1.765-1.723-.401-.27-.783-.211-1.176.183a1.285 1.285 0 0 0-.261.342.582.582 0 0 0-.082.35c0 .165.01.205.08.35.075.153.213.296 2.182 2.271 1.156 1.159 2.17 2.159 2.253 2.222.189.143.338.196.539.194.203-.003.412-.104.618-.299.205-.193 6.7-8.693 6.804-8.903a.716.716 0 0 0 .085-.345c.01-.179.005-.203-.062-.339-.124-.252-.45-.531-.746-.639a.784.784 0 0 0-.469-.027"\n            fill-rule="evenodd"\n          />\n        </svg></div\n    ></media-captions-menu>\n  </template>\n\n  <template partial="AirplayButton">\n    <media-airplay-button part="bottom airplay button" disabled="{{disabled}}" aria-disabled="{{disabled}}">\n      <svg viewBox="0 0 18 14" aria-hidden="true" slot="icon">\n        <path\n          d="M16.1383 0H1.8618C0.8335 0 0 0.8335 0 1.8617V10.1382C0 11.1664 0.8335 12 1.8618 12H3.076C3.1204 11.9433 3.1503 11.8785 3.2012 11.826L4.004 11H1.8618C1.3866 11 1 10.6134 1 10.1382V1.8617C1 1.3865 1.3866 0.9999 1.8618 0.9999H16.1383C16.6135 0.9999 17.0001 1.3865 17.0001 1.8617V10.1382C17.0001 10.6134 16.6135 11 16.1383 11H13.9961L14.7989 11.826C14.8499 11.8785 14.8798 11.9432 14.9241 12H16.1383C17.1665 12 18.0001 11.1664 18.0001 10.1382V1.8617C18 0.8335 17.1665 0 16.1383 0Z"\n        />\n        <path\n          d="M9.55061 8.21903C9.39981 8.06383 9.20001 7.98633 9.00011 7.98633C8.80021 7.98633 8.60031 8.06383 8.44951 8.21903L4.09771 12.697C3.62471 13.1838 3.96961 13.9998 4.64831 13.9998H13.3518C14.0304 13.9998 14.3754 13.1838 13.9023 12.697L9.55061 8.21903Z"\n        />\n      </svg>\n    </media-airplay-button>\n  </template>\n\n  <template partial="FullscreenButton">\n    <media-fullscreen-button part="bottom fullscreen button" disabled="{{disabled}}" aria-disabled="{{disabled}}">\n      <svg viewBox="0 0 18 14" aria-hidden="true" slot="enter">\n        <path\n          d="M1.00745 4.39539L1.01445 1.98789C1.01605 1.43049 1.47085 0.978289 2.02835 0.979989L6.39375 0.992589L6.39665 -0.007411L2.03125 -0.020011C0.920646 -0.023211 0.0176463 0.874489 0.0144463 1.98509L0.00744629 4.39539H1.00745Z"\n        />\n        <path\n          d="M17.0144 2.03431L17.0076 4.39541H18.0076L18.0144 2.03721C18.0176 0.926712 17.1199 0.0237125 16.0093 0.0205125L11.6439 0.0078125L11.641 1.00781L16.0064 1.02041C16.5638 1.02201 17.016 1.47681 17.0144 2.03431Z"\n        />\n        <path\n          d="M16.9925 9.60498L16.9855 12.0124C16.9839 12.5698 16.5291 13.022 15.9717 13.0204L11.6063 13.0078L11.6034 14.0078L15.9688 14.0204C17.0794 14.0236 17.9823 13.1259 17.9855 12.0153L17.9925 9.60498H16.9925Z"\n        />\n        <path\n          d="M0.985626 11.9661L0.992426 9.60498H-0.0074737L-0.0142737 11.9632C-0.0174737 13.0738 0.880226 13.9767 1.99083 13.98L6.35623 13.9926L6.35913 12.9926L1.99373 12.98C1.43633 12.9784 0.983926 12.5236 0.985626 11.9661Z"\n        />\n      </svg>\n      <svg viewBox="0 0 18 14" aria-hidden="true" slot="exit">\n        <path\n          d="M5.39655 -0.0200195L5.38955 2.38748C5.38795 2.94488 4.93315 3.39708 4.37565 3.39538L0.0103463 3.38278L0.00744629 4.38278L4.37285 4.39538C5.48345 4.39858 6.38635 3.50088 6.38965 2.39028L6.39665 -0.0200195H5.39655Z"\n        />\n        <path\n          d="M12.6411 2.36891L12.6479 0.0078125H11.6479L11.6411 2.36601C11.6379 3.47651 12.5356 4.37951 13.6462 4.38271L18.0116 4.39531L18.0145 3.39531L13.6491 3.38271C13.0917 3.38111 12.6395 2.92641 12.6411 2.36891Z"\n        />\n        <path\n          d="M12.6034 14.0204L12.6104 11.613C12.612 11.0556 13.0668 10.6034 13.6242 10.605L17.9896 10.6176L17.9925 9.61759L13.6271 9.60499C12.5165 9.60179 11.6136 10.4995 11.6104 11.6101L11.6034 14.0204H12.6034Z"\n        />\n        <path\n          d="M5.359 11.6315L5.3522 13.9926H6.3522L6.359 11.6344C6.3622 10.5238 5.4645 9.62088 4.3539 9.61758L-0.0115043 9.60498L-0.0144043 10.605L4.351 10.6176C4.9084 10.6192 5.3607 11.074 5.359 11.6315Z"\n        />\n      </svg>\n    </media-fullscreen-button>\n  </template>\n\n  <template partial="CastButton">\n    <media-cast-button part="bottom cast button" disabled="{{disabled}}" aria-disabled="{{disabled}}">\n      <svg viewBox="0 0 18 14" aria-hidden="true" slot="enter">\n        <path\n          d="M16.0072 0H2.0291C0.9185 0 0.0181 0.9003 0.0181 2.011V5.5009C0.357 5.5016 0.6895 5.5275 1.0181 5.5669V2.011C1.0181 1.4536 1.4716 1 2.029 1H16.0072C16.5646 1 17.0181 1.4536 17.0181 2.011V11.9891C17.0181 12.5465 16.5646 13 16.0072 13H8.4358C8.4746 13.3286 8.4999 13.6611 8.4999 13.9999H16.0071C17.1177 13.9999 18.018 13.0996 18.018 11.989V2.011C18.0181 0.9003 17.1178 0 16.0072 0ZM0 6.4999V7.4999C3.584 7.4999 6.5 10.4159 6.5 13.9999H7.5C7.5 9.8642 4.1357 6.4999 0 6.4999ZM0 8.7499V9.7499C2.3433 9.7499 4.25 11.6566 4.25 13.9999H5.25C5.25 11.1049 2.895 8.7499 0 8.7499ZM0.0181 11V14H3.0181C3.0181 12.3431 1.675 11 0.0181 11Z"\n        />\n      </svg>\n      <svg viewBox="0 0 18 14" aria-hidden="true" slot="exit">\n        <path\n          d="M15.9891 0H2.01103C0.900434 0 3.35947e-05 0.9003 3.35947e-05 2.011V5.5009C0.338934 5.5016 0.671434 5.5275 1.00003 5.5669V2.011C1.00003 1.4536 1.45353 1 2.01093 1H15.9891C16.5465 1 17 1.4536 17 2.011V11.9891C17 12.5465 16.5465 13 15.9891 13H8.41773C8.45653 13.3286 8.48183 13.6611 8.48183 13.9999H15.989C17.0996 13.9999 17.9999 13.0996 17.9999 11.989V2.011C18 0.9003 17.0997 0 15.9891 0ZM-0.0180664 6.4999V7.4999C3.56593 7.4999 6.48193 10.4159 6.48193 13.9999H7.48193C7.48193 9.8642 4.11763 6.4999 -0.0180664 6.4999ZM-0.0180664 8.7499V9.7499C2.32523 9.7499 4.23193 11.6566 4.23193 13.9999H5.23193C5.23193 11.1049 2.87693 8.7499 -0.0180664 8.7499ZM3.35947e-05 11V14H3.00003C3.00003 12.3431 1.65693 11 3.35947e-05 11Z"\n        />\n        <path d="M2.15002 5.634C5.18352 6.4207 7.57252 8.8151 8.35282 11.8499H15.8501V2.1499H2.15002V5.634Z" />\n      </svg>\n    </media-cast-button>\n  </template>\n\n  <template partial="LiveButton">\n    <media-live-button part="{{section ?? \'top\'}} live button" disabled="{{disabled}}" aria-disabled="{{disabled}}">\n      <span slot="text">Live</span>\n    </media-live-button>\n  </template>\n\n  <template partial="PlaybackRateMenu">\n    <media-playback-rate-menu-button part="bottom playback-rate button"></media-playback-rate-menu-button>\n    <media-playback-rate-menu\n      hidden\n      anchor="auto"\n      rates="{{playbackrates}}"\n      exportparts="menu-item"\n      part="bottom playback-rate menu"\n      disabled="{{disabled}}"\n      aria-disabled="{{disabled}}"\n    ></media-playback-rate-menu>\n  </template>\n\n  <template partial="VolumeRange">\n    <media-volume-range\n      part="bottom volume range"\n      disabled="{{disabled}}"\n      aria-disabled="{{disabled}}"\n    ></media-volume-range>\n  </template>\n\n  <template partial="TimeDisplay">\n    <media-time-display\n      remaining="{{defaultshowremainingtime}}"\n      showduration="{{!hideduration}}"\n      part="bottom time display"\n      disabled="{{disabled}}"\n      aria-disabled="{{disabled}}"\n    ></media-time-display>\n  </template>\n\n  <template partial="TimeRange">\n    <media-time-range part="bottom time range" disabled="{{disabled}}" aria-disabled="{{disabled}}">\n      <media-preview-thumbnail slot="preview"></media-preview-thumbnail>\n      <media-preview-chapter-display slot="preview"></media-preview-chapter-display>\n      <media-preview-time-display slot="preview"></media-preview-time-display>\n      <div slot="preview" part="arrow"></div>\n    </media-time-range>\n  </template>\n\n  <template partial="AudioTrackMenu">\n    <media-audio-track-menu-button part="bottom audio-track button">\n      <svg aria-hidden="true" slot="icon" viewBox="0 0 18 16">\n        <path d="M9 15A7 7 0 1 1 9 1a7 7 0 0 1 0 14Zm0 1A8 8 0 1 0 9 0a8 8 0 0 0 0 16Z" />\n        <path\n          d="M5.2 6.3a.5.5 0 0 1 .5.5v2.4a.5.5 0 1 1-1 0V6.8a.5.5 0 0 1 .5-.5Zm2.4-2.4a.5.5 0 0 1 .5.5v7.2a.5.5 0 0 1-1 0V4.4a.5.5 0 0 1 .5-.5ZM10 5.5a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5Zm2.4-.8a.5.5 0 0 1 .5.5v5.6a.5.5 0 0 1-1 0V5.2a.5.5 0 0 1 .5-.5Z"\n        />\n      </svg>\n    </media-audio-track-menu-button>\n    <media-audio-track-menu\n      hidden\n      anchor="auto"\n      part="bottom audio-track menu"\n      disabled="{{disabled}}"\n      aria-disabled="{{disabled}}"\n      exportparts="menu-item"\n    >\n      <div slot="checked-indicator">\n        <style>\n          .indicator {\n            position: relative;\n            top: 1px;\n            width: 0.9em;\n            height: auto;\n            fill: var(--_accent-color);\n            margin-right: 5px;\n          }\n\n          [aria-checked=\'false\'] .indicator {\n            display: none;\n          }\n        </style>\n        <svg viewBox="0 0 14 18" class="indicator">\n          <path\n            d="M12.252 3.48c-.115.033-.301.161-.425.291-.059.063-1.407 1.815-2.995 3.894s-2.897 3.79-2.908 3.802c-.013.014-.661-.616-1.672-1.624-.908-.905-1.702-1.681-1.765-1.723-.401-.27-.783-.211-1.176.183a1.285 1.285 0 0 0-.261.342.582.582 0 0 0-.082.35c0 .165.01.205.08.35.075.153.213.296 2.182 2.271 1.156 1.159 2.17 2.159 2.253 2.222.189.143.338.196.539.194.203-.003.412-.104.618-.299.205-.193 6.7-8.693 6.804-8.903a.716.716 0 0 0 .085-.345c.01-.179.005-.203-.062-.339-.124-.252-.45-.531-.746-.639a.784.784 0 0 0-.469-.027"\n            fill-rule="evenodd"\n          />\n        </svg>\n      </div>\n    </media-audio-track-menu>\n  </template>\n\n  <template partial="RenditionMenu">\n    <media-rendition-menu-button part="bottom rendition button">\n      <svg aria-hidden="true" slot="icon" viewBox="0 0 18 14">\n        <path\n          d="M2.25 9a2 2 0 1 0 0-4 2 2 0 0 0 0 4ZM9 9a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm6.75 0a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z"\n        />\n      </svg>\n    </media-rendition-menu-button>\n    <media-rendition-menu\n      hidden\n      anchor="auto"\n      part="bottom rendition menu"\n      disabled="{{disabled}}"\n      aria-disabled="{{disabled}}"\n    >\n      <div slot="checked-indicator">\n        <style>\n          .indicator {\n            position: relative;\n            top: 1px;\n            width: 0.9em;\n            height: auto;\n            fill: var(--_accent-color);\n            margin-right: 5px;\n          }\n\n          [aria-checked=\'false\'] .indicator {\n            display: none;\n          }\n        </style>\n        <svg viewBox="0 0 14 18" class="indicator">\n          <path\n            d="M12.252 3.48c-.115.033-.301.161-.425.291-.059.063-1.407 1.815-2.995 3.894s-2.897 3.79-2.908 3.802c-.013.014-.661-.616-1.672-1.624-.908-.905-1.702-1.681-1.765-1.723-.401-.27-.783-.211-1.176.183a1.285 1.285 0 0 0-.261.342.582.582 0 0 0-.082.35c0 .165.01.205.08.35.075.153.213.296 2.182 2.271 1.156 1.159 2.17 2.159 2.253 2.222.189.143.338.196.539.194.203-.003.412-.104.618-.299.205-.193 6.7-8.693 6.804-8.903a.716.716 0 0 0 .085-.345c.01-.179.005-.203-.062-.339-.124-.252-.45-.531-.746-.639a.784.784 0 0 0-.469-.027"\n            fill-rule="evenodd"\n          />\n        </svg>\n      </div>\n    </media-rendition-menu>\n  </template>\n\n  <template partial="MuxBadge">\n    <div part="mux-badge">\n      <a href="https://www.mux.com/player" target="_blank">\n        <span class="mux-badge-text">Powered by</span>\n        <div class="mux-badge-logo">\n          <svg\n            viewBox="0 0 1600 500"\n            style="fill-rule: evenodd; clip-rule: evenodd; stroke-linejoin: round; stroke-miterlimit: 2"\n          >\n            <g>\n              <path\n                d="M994.287,93.486c-17.121,-0 -31,-13.879 -31,-31c0,-17.121 13.879,-31 31,-31c17.121,-0 31,13.879 31,31c0,17.121 -13.879,31 -31,31m0,-93.486c-34.509,-0 -62.484,27.976 -62.484,62.486l0,187.511c0,68.943 -56.09,125.033 -125.032,125.033c-68.942,-0 -125.03,-56.09 -125.03,-125.033l0,-187.511c0,-34.51 -27.976,-62.486 -62.485,-62.486c-34.509,-0 -62.484,27.976 -62.484,62.486l0,187.511c0,137.853 112.149,250.003 249.999,250.003c137.851,-0 250.001,-112.15 250.001,-250.003l0,-187.511c0,-34.51 -27.976,-62.486 -62.485,-62.486"\n                style="fill-rule: nonzero"\n              ></path>\n              <path\n                d="M1537.51,468.511c-17.121,-0 -31,-13.879 -31,-31c0,-17.121 13.879,-31 31,-31c17.121,-0 31,13.879 31,31c0,17.121 -13.879,31 -31,31m-275.883,-218.509l-143.33,143.329c-24.402,24.402 -24.402,63.966 0,88.368c24.402,24.402 63.967,24.402 88.369,-0l143.33,-143.329l143.328,143.329c24.402,24.4 63.967,24.402 88.369,-0c24.403,-24.402 24.403,-63.966 0.001,-88.368l-143.33,-143.329l0.001,-0.004l143.329,-143.329c24.402,-24.402 24.402,-63.965 0,-88.367c-24.402,-24.402 -63.967,-24.402 -88.369,-0l-143.329,143.328l-143.329,-143.328c-24.402,-24.401 -63.967,-24.402 -88.369,-0c-24.402,24.402 -24.402,63.965 0,88.367l143.329,143.329l0,0.004Z"\n                style="fill-rule: nonzero"\n              ></path>\n              <path\n                d="M437.511,468.521c-17.121,-0 -31,-13.879 -31,-31c0,-17.121 13.879,-31 31,-31c17.121,-0 31,13.879 31,31c0,17.121 -13.879,31 -31,31m23.915,-463.762c-23.348,-9.672 -50.226,-4.327 -68.096,13.544l-143.331,143.329l-143.33,-143.329c-17.871,-17.871 -44.747,-23.216 -68.096,-13.544c-23.349,9.671 -38.574,32.455 -38.574,57.729l0,375.026c0,34.51 27.977,62.486 62.487,62.486c34.51,-0 62.486,-27.976 62.486,-62.486l0,-224.173l80.843,80.844c24.404,24.402 63.965,24.402 88.369,-0l80.843,-80.844l0,224.173c0,34.51 27.976,62.486 62.486,62.486c34.51,-0 62.486,-27.976 62.486,-62.486l0,-375.026c0,-25.274 -15.224,-48.058 -38.573,-57.729"\n                style="fill-rule: nonzero"\n              ></path>\n            </g>\n          </svg>\n        </div>\n      </a>\n    </div>\n  </template>\n\n  <media-controller\n    part="controller"\n    defaultstreamtype="{{defaultstreamtype ?? \'on-demand\'}}"\n    breakpoints="sm:470"\n    gesturesdisabled="{{disabled}}"\n    hotkeys="{{hotkeys}}"\n    nohotkeys="{{nohotkeys}}"\n    novolumepref="{{novolumepref}}"\n    audio="{{audio}}"\n    noautoseektolive="{{noautoseektolive}}"\n    defaultsubtitles="{{defaultsubtitles}}"\n    defaultduration="{{defaultduration ?? false}}"\n    keyboardforwardseekoffset="{{forwardseekoffset}}"\n    keyboardbackwardseekoffset="{{backwardseekoffset}}"\n    exportparts="layer, media-layer, poster-layer, vertical-layer, centered-layer, gesture-layer"\n    style="--_pre-playback-place:{{preplaybackplace ?? \'center\'}}"\n  >\n    <slot name="media" slot="media"></slot>\n    <slot name="poster" slot="poster"></slot>\n\n    <media-loading-indicator slot="centered-chrome" noautohide></media-loading-indicator>\n    <media-error-dialog slot="dialog" noautohide></media-error-dialog>\n\n    <template if="!audio">\n      \x3c!-- Pre-playback UI --\x3e\n      \x3c!-- same for both on-demand and live --\x3e\n      <div slot="centered-chrome" class="center-controls pre-playback">\n        <template if="!breakpointsm">{{>PlayButton section="center"}}</template>\n        <template if="breakpointsm">{{>PrePlayButton section="center"}}</template>\n      </div>\n\n      \x3c!-- Mux Badge --\x3e\n      <template if="proudlydisplaymuxbadge"> {{>MuxBadge}} </template>\n\n      \x3c!-- Autoplay centered unmute button --\x3e\n      \x3c!--\n        todo: figure out how show this with available state variables\n        needs to show when:\n        - autoplay is enabled\n        - playback has been successful\n        - audio is muted\n        - in place / instead of the pre-plaback play button\n        - not to show again after user has interacted with this button\n          - OR user has interacted with the mute button in the control bar\n      --\x3e\n      \x3c!--\n        There should be a >MuteButton to the left of the "Unmute" text, but a templating bug\n        makes it appear even if commented out in the markup, add it back when code is un-commented\n      --\x3e\n      \x3c!-- <div slot="centered-chrome" class="autoplay-unmute">\n        <div role="button" class="autoplay-unmute-btn">Unmute</div>\n      </div> --\x3e\n\n      <template if="streamtype == \'on-demand\'">\n        <template if="breakpointsm">\n          <media-control-bar part="control-bar top" slot="top-chrome">{{>TitleDisplay}} </media-control-bar>\n        </template>\n        {{>TimeRange}}\n        <media-control-bar part="control-bar bottom">\n          {{>PlayButton}} {{>SeekBackwardButton}} {{>SeekForwardButton}} {{>TimeDisplay}} {{>MuteButton}}\n          {{>VolumeRange}}\n          <div class="spacer"></div>\n          {{>RenditionMenu}} {{>PlaybackRateMenu}} {{>AudioTrackMenu}} {{>CaptionsMenu}} {{>AirplayButton}}\n          {{>CastButton}} {{>PipButton}} {{>FullscreenButton}}\n        </media-control-bar>\n      </template>\n\n      <template if="streamtype == \'live\'">\n        <media-control-bar part="control-bar top" slot="top-chrome">\n          {{>LiveButton}}\n          <template if="breakpointsm"> {{>TitleDisplay}} </template>\n        </media-control-bar>\n        <template if="targetlivewindow > 0">{{>TimeRange}}</template>\n        <media-control-bar part="control-bar bottom">\n          {{>PlayButton}}\n          <template if="targetlivewindow > 0">{{>SeekBackwardButton}} {{>SeekForwardButton}}</template>\n          {{>MuteButton}} {{>VolumeRange}}\n          <div class="spacer"></div>\n          {{>RenditionMenu}} {{>AudioTrackMenu}} {{>CaptionsMenu}} {{>AirplayButton}} {{>CastButton}} {{>PipButton}}\n          {{>FullscreenButton}}\n        </media-control-bar>\n      </template>\n    </template>\n\n    <template if="audio">\n      <template if="streamtype == \'on-demand\'">\n        <template if="title">\n          <media-control-bar part="control-bar top">{{>TitleDisplay}}</media-control-bar>\n        </template>\n        <media-control-bar part="control-bar bottom">\n          {{>PlayButton}}\n          <template if="breakpointsm"> {{>SeekBackwardButton}} {{>SeekForwardButton}} </template>\n          {{>MuteButton}}\n          <template if="breakpointsm">{{>VolumeRange}}</template>\n          {{>TimeDisplay}} {{>TimeRange}}\n          <template if="breakpointsm">{{>PlaybackRateMenu}}</template>\n          {{>AirplayButton}} {{>CastButton}}\n        </media-control-bar>\n      </template>\n\n      <template if="streamtype == \'live\'">\n        <template if="title">\n          <media-control-bar part="control-bar top">{{>TitleDisplay}}</media-control-bar>\n        </template>\n        <media-control-bar part="control-bar bottom">\n          {{>PlayButton}} {{>LiveButton section="bottom"}} {{>MuteButton}}\n          <template if="breakpointsm">\n            {{>VolumeRange}}\n            <template if="targetlivewindow > 0"> {{>SeekBackwardButton}} {{>SeekForwardButton}} </template>\n          </template>\n          <template if="targetlivewindow > 0"> {{>TimeDisplay}} {{>TimeRange}} </template>\n          <template if="!targetlivewindow"><div class="spacer"></div></template>\n          {{>AirplayButton}} {{>CastButton}}\n        </media-control-bar>\n      </template>\n    </template>\n\n    <slot></slot>\n  </media-controller>\n</template>\n');var Wse,zse,Hse=class extends jre{};Hse.template=null==(zse=null==(Wse=Vse.content)?void 0:Wse.children)?void 0:zse[0],Zoe.customElements.get("media-theme-gerwig")||Zoe.customElements.define("media-theme-gerwig",Hse);var qse={SRC:"src",POSTER:"poster"},Gse={STYLE:"style",DEFAULT_HIDDEN_CAPTIONS:"default-hidden-captions",PRIMARY_COLOR:"primary-color",SECONDARY_COLOR:"secondary-color",ACCENT_COLOR:"accent-color",FORWARD_SEEK_OFFSET:"forward-seek-offset",BACKWARD_SEEK_OFFSET:"backward-seek-offset",PLAYBACK_TOKEN:"playback-token",THUMBNAIL_TOKEN:"thumbnail-token",STORYBOARD_TOKEN:"storyboard-token",DRM_TOKEN:"drm-token",STORYBOARD_SRC:"storyboard-src",THUMBNAIL_TIME:"thumbnail-time",AUDIO:"audio",NOHOTKEYS:"nohotkeys",HOTKEYS:"hotkeys",PLAYBACK_RATES:"playbackrates",DEFAULT_SHOW_REMAINING_TIME:"default-show-remaining-time",DEFAULT_DURATION:"default-duration",TITLE:"title",PLACEHOLDER:"placeholder",THEME:"theme",DEFAULT_STREAM_TYPE:"default-stream-type",TARGET_LIVE_WINDOW:"target-live-window",EXTRA_SOURCE_PARAMS:"extra-source-params",NO_VOLUME_PREF:"no-volume-pref",CAST_RECEIVER:"cast-receiver",NO_TOOLTIPS:"no-tooltips",PROUDLY_DISPLAY_MUX_BADGE:"proudly-display-mux-badge"},Kse=["audio","backwardseekoffset","defaultduration","defaultshowremainingtime","defaultsubtitles","noautoseektolive","disabled","exportparts","forwardseekoffset","hideduration","hotkeys","nohotkeys","playbackrates","defaultstreamtype","streamtype","style","targetlivewindow","template","title","novolumepref","proudlydisplaymuxbadge"];var Yse=PY.formatErrorMessage;function Qse(e){var t,n;let r=e.theme;if(r){let i=null==(n=null==(t=e.getRootNode())?void 0:t.getElementById)?void 0:n.call(t,r);if(i&&i instanceof HTMLTemplateElement)return i;r.startsWith("media-theme-")||(r=`media-theme-${r}`);let a=Zoe.customElements.get(r);if(null!=a&&a.template)return a.template}}function Xse(e){var t;let n=null==(t=e.mediaController)?void 0:t.querySelector("media-time-display");return n&&"none"===getComputedStyle(n).getPropertyValue("--media-duration-display-display").trim()}function Zse(e){let t=e.hasAttribute(Gse.TITLE)?{video_title:e.getAttribute(Gse.TITLE)}:{};return e.getAttributeNames().filter((e=>e.startsWith("metadata-"))).reduce(((t,n)=>{let r=e.getAttribute(n);return null!==r&&(t[n.replace(/^metadata-/,"").replace(/-/g,"_")]=r),t}),t)}PY.formatErrorMessage=e=>{var t,n;if(e instanceof U8){let r=Bse(e,!1);return`\n      ${null!=r&&r.title?`<h3>${r.title}</h3>`:""}\n      ${null!=r&&r.message||null!=r&&r.linkUrl?`<p>\n        ${null==r?void 0:r.message}\n        ${null!=r&&r.linkUrl?`<a\n              href="${r.linkUrl}"\n              target="_blank"\n              rel="external noopener"\n              aria-label="${null!=(t=r.linkText)?t:""} ${a7("(opens in a new window)")}"\n              >${null!=(n=r.linkText)?n:r.linkUrl}</a\n            >`:""}\n      </p>`:""}\n    `}return Yse(e)};var Jse,ele,tle,nle,rle,ile,ale,ole,sle,lle,cle,ule,dle,hle,ple,fle=Object.values(Dne),mle=Object.values(qse),gle=Object.values(Gse),vle=sse(),yle="mux-player",ble={isDialogOpen:!1},wle={redundant_streams:!0},Ele=class extends kse{constructor(){super(),Woe(this,ale),Woe(this,Jse),Woe(this,ele,!1),Woe(this,tle,{}),Woe(this,nle,!0),Woe(this,rle,new fse(this,"hotkeys")),Woe(this,ile,{...ble,onCloseErrorDialog:e=>{var t;"media-error-dialog"===(null==(t=e.composedPath()[0])?void 0:t.localName)&&Hoe(this,ale,lle).call(this,{isDialogOpen:!1})},onFocusInErrorDialog:e=>{var t;"media-error-dialog"===(null==(t=e.composedPath()[0])?void 0:t.localName)&&(ise(this,Joe.activeElement)||e.preventDefault())}}),zoe(this,Jse,Z7()),this.attachShadow({mode:"open"}),Hoe(this,ale,sle).call(this),this.isConnected&&Hoe(this,ale,ole).call(this)}static get NAME(){return yle}static get VERSION(){return vle}static get observedAttributes(){var e;return[...null!=(e=kse.observedAttributes)?e:[],...mle,...fle,...gle]}get mediaTheme(){var e;return null==(e=this.shadowRoot)?void 0:e.querySelector("media-theme")}get mediaController(){var e,t;return null==(t=null==(e=this.mediaTheme)?void 0:e.shadowRoot)?void 0:t.querySelector("media-controller")}connectedCallback(){var e;let t=null==(e=this.shadowRoot)?void 0:e.querySelector("mux-video");t&&(t.metadata=Zse(this))}attributeChangedCallback(e,t,n){switch(Hoe(this,ale,ole).call(this),super.attributeChangedCallback(e,t,n),e){case Gse.HOTKEYS:Voe(this,rle).value=n;break;case Gse.THUMBNAIL_TIME:null!=n&&this.tokens.thumbnail&&gse(a7("Use of thumbnail-time with thumbnail-token is currently unsupported. Ignore thumbnail-time."));break;case Gse.THUMBNAIL_TOKEN:if(n){let e=i7(n);if(e){let{aud:t}=e,n=S7;t!==n&&gse(a7("The {tokenNamePrefix}-token has an incorrect aud value: {aud}. aud value should be {expectedAud}.").format({aud:t,expectedAud:n,tokenNamePrefix:"thumbnail"}))}}break;case Gse.STORYBOARD_TOKEN:if(n){let e=i7(n);if(e){let{aud:t}=e,n=k7;t!==n&&gse(a7("The {tokenNamePrefix}-token has an incorrect aud value: {aud}. aud value should be {expectedAud}.").format({aud:t,expectedAud:n,tokenNamePrefix:"storyboard"}))}}break;case Gse.DRM_TOKEN:if(n){let e=i7(n);if(e){let{aud:t}=e,n=C7;t!==n&&gse(a7("The {tokenNamePrefix}-token has an incorrect aud value: {aud}. aud value should be {expectedAud}.").format({aud:t,expectedAud:n,tokenNamePrefix:"drm"}))}}break;case Dne.PLAYBACK_ID:null!=n&&n.includes("?token")&&vse(a7("The specificed playback ID {playbackId} contains a token which must be provided via the playback-token attribute.").format({playbackId:n}));break;case Dne.STREAM_TYPE:n&&![V8.LIVE,V8.ON_DEMAND,V8.UNKNOWN].includes(n)?["ll-live","live:dvr","ll-live:dvr"].includes(this.streamType)?this.targetLiveWindow=n.includes("dvr")?Number.POSITIVE_INFINITY:0:yse({file:"invalid-stream-type.md",message:a7("Invalid stream-type value supplied: `{streamType}`. Please provide stream-type as either: `on-demand` or `live`").format({streamType:this.streamType})}):n===V8.LIVE?null==this.getAttribute(Gse.TARGET_LIVE_WINDOW)&&(this.targetLiveWindow=0):this.targetLiveWindow=Number.NaN}[Dne.PLAYBACK_ID,qse.SRC,Gse.PLAYBACK_TOKEN].includes(e)&&t!==n&&zoe(this,ile,{...Voe(this,ile),...ble}),Hoe(this,ale,cle).call(this,{[use(e)]:n})}get preferCmcd(){var e;return null!=(e=this.getAttribute(Dne.PREFER_CMCD))?e:void 0}set preferCmcd(e){e!==this.preferCmcd&&(e?q8.includes(e)?this.setAttribute(Dne.PREFER_CMCD,e):gse(`Invalid value for preferCmcd. Must be one of ${q8.join()}`):this.removeAttribute(Dne.PREFER_CMCD))}get hasPlayed(){var e,t;return null!=(t=null==(e=this.mediaController)?void 0:e.hasAttribute(lz.MEDIA_HAS_PLAYED))&&t}get inLiveWindow(){var e;return null==(e=this.mediaController)?void 0:e.hasAttribute(lz.MEDIA_TIME_IS_LIVE)}get _hls(){var e;return null==(e=this.media)?void 0:e._hls}get mux(){var e;return null==(e=this.media)?void 0:e.mux}get theme(){var e;return null!=(e=this.getAttribute(Gse.THEME))?e:"gerwig"}set theme(e){this.setAttribute(Gse.THEME,`${e}`)}get themeProps(){let e=this.mediaTheme;if(!e)return;let t={};for(let n of e.getAttributeNames()){if(Kse.includes(n))continue;let r=e.getAttribute(n);t[tse(n)]=""===r||r}return t}set themeProps(e){var t,n;Hoe(this,ale,ole).call(this);let r={...this.themeProps,...e};for(let i in r){if(Kse.includes(i))continue;let r=null==e?void 0:e[i];"boolean"==typeof r||null==r?null==(t=this.mediaTheme)||t.toggleAttribute(ese(i),!!r):null==(n=this.mediaTheme)||n.setAttribute(ese(i),r)}}get playbackId(){var e;return null!=(e=this.getAttribute(Dne.PLAYBACK_ID))?e:void 0}set playbackId(e){e?this.setAttribute(Dne.PLAYBACK_ID,e):this.removeAttribute(Dne.PLAYBACK_ID)}get src(){var e,t;return this.playbackId?null!=(e=xle(this,qse.SRC))?e:void 0:null!=(t=this.getAttribute(qse.SRC))?t:void 0}set src(e){e?this.setAttribute(qse.SRC,e):this.removeAttribute(qse.SRC)}get poster(){var e;let t=this.getAttribute(qse.POSTER);if(null!=t)return t;let{tokens:n}=this;if(!n.playback||n.thumbnail)return this.playbackId&&!this.audio?function(e){let{token:t,customDomain:n=ase,thumbnailTime:r,programTime:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var a;let o=null==t?r:void 0,{aud:s}=null!=(a=i7(t))?a:{};if(!t||"t"===s)return`https://image.${n}/${e}/thumbnail.webp${rse({token:t,time:o,program_time:i})}`}(this.playbackId,{customDomain:this.customDomain,thumbnailTime:null!=(e=this.thumbnailTime)?e:this.startTime,programTime:this.programStartTime,token:n.thumbnail}):void 0;gse("Missing expected thumbnail token. No poster image will be shown")}set poster(e){e||""===e?this.setAttribute(qse.POSTER,e):this.removeAttribute(qse.POSTER)}get storyboardSrc(){var e;return null!=(e=this.getAttribute(Gse.STORYBOARD_SRC))?e:void 0}set storyboardSrc(e){e?this.setAttribute(Gse.STORYBOARD_SRC,e):this.removeAttribute(Gse.STORYBOARD_SRC)}get storyboard(){let{tokens:e}=this;return this.storyboardSrc&&!e.storyboard?this.storyboardSrc:this.audio||!this.playbackId||!this.streamType||[V8.LIVE,V8.UNKNOWN].includes(this.streamType)||e.playback&&!e.storyboard?void 0:function(e){let{token:t,customDomain:n=ase,programStartTime:r,programEndTime:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var a;let{aud:o}=null!=(a=i7(t))?a:{};if(!t||"s"===o)return`https://image.${n}/${e}/storyboard.vtt${rse({token:t,format:"webp",program_start_time:r,program_end_time:i})}`}(this.playbackId,{customDomain:this.customDomain,token:e.storyboard,programStartTime:this.programStartTime,programEndTime:this.programEndTime})}get audio(){return this.hasAttribute(Gse.AUDIO)}set audio(e){e?this.setAttribute(Gse.AUDIO,""):this.removeAttribute(Gse.AUDIO)}get hotkeys(){return Voe(this,rle)}get nohotkeys(){return this.hasAttribute(Gse.NOHOTKEYS)}set nohotkeys(e){e?this.setAttribute(Gse.NOHOTKEYS,""):this.removeAttribute(Gse.NOHOTKEYS)}get thumbnailTime(){return nse(this.getAttribute(Gse.THUMBNAIL_TIME))}set thumbnailTime(e){this.setAttribute(Gse.THUMBNAIL_TIME,`${e}`)}get title(){var e;return null!=(e=this.getAttribute(Gse.TITLE))?e:""}set title(e){e!==this.title&&(e?this.setAttribute(Gse.TITLE,e):this.removeAttribute("title"),super.title=e)}get placeholder(){var e;return null!=(e=xle(this,Gse.PLACEHOLDER))?e:""}set placeholder(e){this.setAttribute(Gse.PLACEHOLDER,`${e}`)}get primaryColor(){var e,t;let n=this.getAttribute(Gse.PRIMARY_COLOR);if(null!=n||this.mediaTheme&&(n=null==(t=null==(e=Zoe.getComputedStyle(this.mediaTheme))?void 0:e.getPropertyValue("--_primary-color"))?void 0:t.trim(),n))return n}set primaryColor(e){this.setAttribute(Gse.PRIMARY_COLOR,`${e}`)}get secondaryColor(){var e,t;let n=this.getAttribute(Gse.SECONDARY_COLOR);if(null!=n||this.mediaTheme&&(n=null==(t=null==(e=Zoe.getComputedStyle(this.mediaTheme))?void 0:e.getPropertyValue("--_secondary-color"))?void 0:t.trim(),n))return n}set secondaryColor(e){this.setAttribute(Gse.SECONDARY_COLOR,`${e}`)}get accentColor(){var e,t;let n=this.getAttribute(Gse.ACCENT_COLOR);if(null!=n||this.mediaTheme&&(n=null==(t=null==(e=Zoe.getComputedStyle(this.mediaTheme))?void 0:e.getPropertyValue("--_accent-color"))?void 0:t.trim(),n))return n}set accentColor(e){this.setAttribute(Gse.ACCENT_COLOR,`${e}`)}get defaultShowRemainingTime(){return this.hasAttribute(Gse.DEFAULT_SHOW_REMAINING_TIME)}set defaultShowRemainingTime(e){e?this.setAttribute(Gse.DEFAULT_SHOW_REMAINING_TIME,""):this.removeAttribute(Gse.DEFAULT_SHOW_REMAINING_TIME)}get playbackRates(){if(this.hasAttribute(Gse.PLAYBACK_RATES))return this.getAttribute(Gse.PLAYBACK_RATES).trim().split(/\s*,?\s+/).map((e=>Number(e))).filter((e=>!Number.isNaN(e))).sort(((e,t)=>e-t))}set playbackRates(e){e?this.setAttribute(Gse.PLAYBACK_RATES,e.join(" ")):this.removeAttribute(Gse.PLAYBACK_RATES)}get forwardSeekOffset(){var e;return null!=(e=nse(this.getAttribute(Gse.FORWARD_SEEK_OFFSET)))?e:10}set forwardSeekOffset(e){this.setAttribute(Gse.FORWARD_SEEK_OFFSET,`${e}`)}get backwardSeekOffset(){var e;return null!=(e=nse(this.getAttribute(Gse.BACKWARD_SEEK_OFFSET)))?e:10}set backwardSeekOffset(e){this.setAttribute(Gse.BACKWARD_SEEK_OFFSET,`${e}`)}get defaultHiddenCaptions(){return this.hasAttribute(Gse.DEFAULT_HIDDEN_CAPTIONS)}set defaultHiddenCaptions(e){e?this.setAttribute(Gse.DEFAULT_HIDDEN_CAPTIONS,""):this.removeAttribute(Gse.DEFAULT_HIDDEN_CAPTIONS)}get defaultDuration(){return nse(this.getAttribute(Gse.DEFAULT_DURATION))}set defaultDuration(e){null==e?this.removeAttribute(Gse.DEFAULT_DURATION):this.setAttribute(Gse.DEFAULT_DURATION,`${e}`)}get playerInitTime(){return this.hasAttribute(Dne.PLAYER_INIT_TIME)?nse(this.getAttribute(Dne.PLAYER_INIT_TIME)):Voe(this,Jse)}set playerInitTime(e){e!=this.playerInitTime&&(null==e?this.removeAttribute(Dne.PLAYER_INIT_TIME):this.setAttribute(Dne.PLAYER_INIT_TIME,""+ +e))}get playerSoftwareName(){var e;return null!=(e=this.getAttribute(Dne.PLAYER_SOFTWARE_NAME))?e:yle}get playerSoftwareVersion(){var e;return null!=(e=this.getAttribute(Dne.PLAYER_SOFTWARE_VERSION))?e:vle}get beaconCollectionDomain(){var e;return null!=(e=this.getAttribute(Dne.BEACON_COLLECTION_DOMAIN))?e:void 0}set beaconCollectionDomain(e){e!==this.beaconCollectionDomain&&(e?this.setAttribute(Dne.BEACON_COLLECTION_DOMAIN,e):this.removeAttribute(Dne.BEACON_COLLECTION_DOMAIN))}get maxResolution(){var e;return null!=(e=this.getAttribute(Dne.MAX_RESOLUTION))?e:void 0}set maxResolution(e){e!==this.maxResolution&&(e?this.setAttribute(Dne.MAX_RESOLUTION,e):this.removeAttribute(Dne.MAX_RESOLUTION))}get minResolution(){var e;return null!=(e=this.getAttribute(Dne.MIN_RESOLUTION))?e:void 0}set minResolution(e){e!==this.minResolution&&(e?this.setAttribute(Dne.MIN_RESOLUTION,e):this.removeAttribute(Dne.MIN_RESOLUTION))}get renditionOrder(){var e;return null!=(e=this.getAttribute(Dne.RENDITION_ORDER))?e:void 0}set renditionOrder(e){e!==this.renditionOrder&&(e?this.setAttribute(Dne.RENDITION_ORDER,e):this.removeAttribute(Dne.RENDITION_ORDER))}get programStartTime(){return nse(this.getAttribute(Dne.PROGRAM_START_TIME))}set programStartTime(e){null==e?this.removeAttribute(Dne.PROGRAM_START_TIME):this.setAttribute(Dne.PROGRAM_START_TIME,`${e}`)}get programEndTime(){return nse(this.getAttribute(Dne.PROGRAM_END_TIME))}set programEndTime(e){null==e?this.removeAttribute(Dne.PROGRAM_END_TIME):this.setAttribute(Dne.PROGRAM_END_TIME,`${e}`)}get assetStartTime(){return nse(this.getAttribute(Dne.ASSET_START_TIME))}set assetStartTime(e){null==e?this.removeAttribute(Dne.ASSET_START_TIME):this.setAttribute(Dne.ASSET_START_TIME,`${e}`)}get assetEndTime(){return nse(this.getAttribute(Dne.ASSET_END_TIME))}set assetEndTime(e){null==e?this.removeAttribute(Dne.ASSET_END_TIME):this.setAttribute(Dne.ASSET_END_TIME,`${e}`)}get extraSourceParams(){return this.hasAttribute(Gse.EXTRA_SOURCE_PARAMS)?[...new URLSearchParams(this.getAttribute(Gse.EXTRA_SOURCE_PARAMS)).entries()].reduce(((e,t)=>{let[n,r]=t;return e[n]=r,e}),{}):wle}set extraSourceParams(e){null==e?this.removeAttribute(Gse.EXTRA_SOURCE_PARAMS):this.setAttribute(Gse.EXTRA_SOURCE_PARAMS,new URLSearchParams(e).toString())}get customDomain(){var e;return null!=(e=this.getAttribute(Dne.CUSTOM_DOMAIN))?e:void 0}set customDomain(e){e!==this.customDomain&&(e?this.setAttribute(Dne.CUSTOM_DOMAIN,e):this.removeAttribute(Dne.CUSTOM_DOMAIN))}get envKey(){var e;return null!=(e=xle(this,Dne.ENV_KEY))?e:void 0}set envKey(e){this.setAttribute(Dne.ENV_KEY,`${e}`)}get noVolumePref(){return this.hasAttribute(Gse.NO_VOLUME_PREF)}set noVolumePref(e){e?this.setAttribute(Gse.NO_VOLUME_PREF,""):this.removeAttribute(Gse.NO_VOLUME_PREF)}get debug(){return null!=xle(this,Dne.DEBUG)}set debug(e){e?this.setAttribute(Dne.DEBUG,""):this.removeAttribute(Dne.DEBUG)}get disableTracking(){return null!=xle(this,Dne.DISABLE_TRACKING)}set disableTracking(e){this.toggleAttribute(Dne.DISABLE_TRACKING,!!e)}get disableCookies(){return null!=xle(this,Dne.DISABLE_COOKIES)}set disableCookies(e){e?this.setAttribute(Dne.DISABLE_COOKIES,""):this.removeAttribute(Dne.DISABLE_COOKIES)}get streamType(){var e,t,n;return null!=(n=null!=(t=this.getAttribute(Dne.STREAM_TYPE))?t:null==(e=this.media)?void 0:e.streamType)?n:V8.UNKNOWN}set streamType(e){this.setAttribute(Dne.STREAM_TYPE,`${e}`)}get defaultStreamType(){var e,t,n;return null!=(n=null!=(t=this.getAttribute(Gse.DEFAULT_STREAM_TYPE))?t:null==(e=this.mediaController)?void 0:e.getAttribute(Gse.DEFAULT_STREAM_TYPE))?n:V8.ON_DEMAND}set defaultStreamType(e){e?this.setAttribute(Gse.DEFAULT_STREAM_TYPE,e):this.removeAttribute(Gse.DEFAULT_STREAM_TYPE)}get targetLiveWindow(){var e,t;return this.hasAttribute(Gse.TARGET_LIVE_WINDOW)?+this.getAttribute(Gse.TARGET_LIVE_WINDOW):null!=(t=null==(e=this.media)?void 0:e.targetLiveWindow)?t:Number.NaN}set targetLiveWindow(e){e==this.targetLiveWindow||Number.isNaN(e)&&Number.isNaN(this.targetLiveWindow)||(null==e?this.removeAttribute(Gse.TARGET_LIVE_WINDOW):this.setAttribute(Gse.TARGET_LIVE_WINDOW,""+ +e))}get liveEdgeStart(){var e;return null==(e=this.media)?void 0:e.liveEdgeStart}get startTime(){return nse(xle(this,Dne.START_TIME))}set startTime(e){this.setAttribute(Dne.START_TIME,`${e}`)}get preferPlayback(){let e=this.getAttribute(Dne.PREFER_PLAYBACK);if(e===W8||e===z8)return e}set preferPlayback(e){e!==this.preferPlayback&&(e===W8||e===z8?this.setAttribute(Dne.PREFER_PLAYBACK,e):this.removeAttribute(Dne.PREFER_PLAYBACK))}get metadata(){var e;return null==(e=this.media)?void 0:e.metadata}set metadata(e){Hoe(this,ale,ole).call(this),this.media?this.media.metadata={...Zse(this),...e}:vse("underlying media element missing when trying to set metadata. metadata will not be set.")}get _hlsConfig(){var e;return null==(e=this.media)?void 0:e._hlsConfig}set _hlsConfig(e){Hoe(this,ale,ole).call(this),this.media?this.media._hlsConfig=e:vse("underlying media element missing when trying to set _hlsConfig. _hlsConfig will not be set.")}async addCuePoints(e){var t;if(Hoe(this,ale,ole).call(this),this.media)return null==(t=this.media)?void 0:t.addCuePoints(e);vse("underlying media element missing when trying to addCuePoints. cuePoints will not be added.")}get activeCuePoint(){var e;return null==(e=this.media)?void 0:e.activeCuePoint}get cuePoints(){var e,t;return null!=(t=null==(e=this.media)?void 0:e.cuePoints)?t:[]}addChapters(e){var t;if(Hoe(this,ale,ole).call(this),this.media)return null==(t=this.media)?void 0:t.addChapters(e);vse("underlying media element missing when trying to addChapters. chapters will not be added.")}get activeChapter(){var e;return null==(e=this.media)?void 0:e.activeChapter}get chapters(){var e,t;return null!=(t=null==(e=this.media)?void 0:e.chapters)?t:[]}getStartDate(){var e;return null==(e=this.media)?void 0:e.getStartDate()}get currentPdt(){var e;return null==(e=this.media)?void 0:e.currentPdt}get tokens(){let e=this.getAttribute(Gse.PLAYBACK_TOKEN),t=this.getAttribute(Gse.DRM_TOKEN),n=this.getAttribute(Gse.THUMBNAIL_TOKEN),r=this.getAttribute(Gse.STORYBOARD_TOKEN);return{...Voe(this,tle),...null!=e?{playback:e}:{},...null!=t?{drm:t}:{},...null!=n?{thumbnail:n}:{},...null!=r?{storyboard:r}:{}}}set tokens(e){zoe(this,tle,null!=e?e:{})}get playbackToken(){var e;return null!=(e=this.getAttribute(Gse.PLAYBACK_TOKEN))?e:void 0}set playbackToken(e){this.setAttribute(Gse.PLAYBACK_TOKEN,`${e}`)}get drmToken(){var e;return null!=(e=this.getAttribute(Gse.DRM_TOKEN))?e:void 0}set drmToken(e){this.setAttribute(Gse.DRM_TOKEN,`${e}`)}get thumbnailToken(){var e;return null!=(e=this.getAttribute(Gse.THUMBNAIL_TOKEN))?e:void 0}set thumbnailToken(e){this.setAttribute(Gse.THUMBNAIL_TOKEN,`${e}`)}get storyboardToken(){var e;return null!=(e=this.getAttribute(Gse.STORYBOARD_TOKEN))?e:void 0}set storyboardToken(e){this.setAttribute(Gse.STORYBOARD_TOKEN,`${e}`)}addTextTrack(e,t,n,r){var i;let a=null==(i=this.media)?void 0:i.nativeEl;if(a)return h7(a,e,t,n,r)}removeTextTrack(e){var t;let n=null==(t=this.media)?void 0:t.nativeEl;if(n)return function(e,t){let n=Array.prototype.find.call(e.querySelectorAll("track"),(e=>e.track===t));null==n||n.remove()}(n,e)}get textTracks(){var e;return null==(e=this.media)?void 0:e.textTracks}get castReceiver(){var e;return null!=(e=this.getAttribute(Gse.CAST_RECEIVER))?e:void 0}set castReceiver(e){e!==this.castReceiver&&(e?this.setAttribute(Gse.CAST_RECEIVER,e):this.removeAttribute(Gse.CAST_RECEIVER))}get castCustomData(){var e;return null==(e=this.media)?void 0:e.castCustomData}set castCustomData(e){this.media?this.media.castCustomData=e:vse("underlying media element missing when trying to set castCustomData. castCustomData will not be set.")}get noTooltips(){return this.hasAttribute(Gse.NO_TOOLTIPS)}set noTooltips(e){e?this.setAttribute(Gse.NO_TOOLTIPS,""):this.removeAttribute(Gse.NO_TOOLTIPS)}get proudlyDisplayMuxBadge(){return this.hasAttribute(Gse.PROUDLY_DISPLAY_MUX_BADGE)}set proudlyDisplayMuxBadge(e){e?this.setAttribute(Gse.PROUDLY_DISPLAY_MUX_BADGE,""):this.removeAttribute(Gse.PROUDLY_DISPLAY_MUX_BADGE)}};function xle(e,t){return e.media?e.media.getAttribute(t):e.getAttribute(t)}Jse=new WeakMap,ele=new WeakMap,tle=new WeakMap,nle=new WeakMap,rle=new WeakMap,ile=new WeakMap,ale=new WeakSet,ole=function(){var e,t,n,r;if(!Voe(this,ele)){zoe(this,ele,!0),Hoe(this,ale,cle).call(this);try{if(customElements.upgrade(this.mediaTheme),!(this.mediaTheme instanceof Zoe.HTMLElement))throw""}catch{vse("<media-theme> failed to upgrade!")}try{if(customElements.upgrade(this.media),!(this.media instanceof Yne))throw""}catch{vse("<mux-video> failed to upgrade!")}try{if(customElements.upgrade(this.mediaController),!(this.mediaController instanceof jG))throw""}catch{vse("<media-controller> failed to upgrade!")}this.init(),Hoe(this,ale,ule).call(this),Hoe(this,ale,dle).call(this),Hoe(this,ale,hle).call(this),zoe(this,nle,null==(t=null==(e=this.mediaController)?void 0:e.hasAttribute(WH.USER_INACTIVE))||t),Hoe(this,ale,ple).call(this),null==(n=this.media)||n.addEventListener("streamtypechange",(()=>Hoe(this,ale,cle).call(this))),null==(r=this.media)||r.addEventListener("loadstart",(()=>Hoe(this,ale,cle).call(this)))}},sle=function(){var e,t;try{null==(e=null==window?void 0:window.CSS)||e.registerProperty({name:"--media-primary-color",syntax:"<color>",inherits:!0}),null==(t=null==window?void 0:window.CSS)||t.registerProperty({name:"--media-secondary-color",syntax:"<color>",inherits:!0})}catch{}},lle=function(e){Object.assign(Voe(this,ile),e),Hoe(this,ale,cle).call(this)},cle=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){e.renderInto(t)}((e=>Ose`
  <style>
    ${(e=>{let{tokens:t}=e;return t.drm?":host { --_cast-button-drm-display: none; }":""})(e)}
    ${":host {\n  --media-control-display: var(--controls);\n  --media-loading-indicator-display: var(--loading-indicator);\n  --media-dialog-display: var(--dialog);\n  --media-play-button-display: var(--play-button);\n  --media-live-button-display: var(--live-button);\n  --media-seek-backward-button-display: var(--seek-backward-button);\n  --media-seek-forward-button-display: var(--seek-forward-button);\n  --media-mute-button-display: var(--mute-button);\n  --media-captions-button-display: var(--captions-button);\n  --media-captions-menu-button-display: var(--captions-menu-button, var(--media-captions-button-display));\n  --media-rendition-menu-button-display: var(--rendition-menu-button);\n  --media-audio-track-menu-button-display: var(--audio-track-menu-button);\n  --media-airplay-button-display: var(--airplay-button);\n  --media-pip-button-display: var(--pip-button);\n  --media-fullscreen-button-display: var(--fullscreen-button);\n  --media-cast-button-display: var(--cast-button, var(--_cast-button-drm-display));\n  --media-playback-rate-button-display: var(--playback-rate-button);\n  --media-playback-rate-menu-button-display: var(--playback-rate-menu-button);\n  --media-volume-range-display: var(--volume-range);\n  --media-time-range-display: var(--time-range);\n  --media-time-display-display: var(--time-display);\n  --media-duration-display-display: var(--duration-display);\n  --media-title-display-display: var(--title-display);\n\n  display: inline-block;\n  line-height: 0;\n  width: 100%;\n}\n\na {\n  color: #fff;\n  font-size: 0.9em;\n  text-decoration: underline;\n}\n\nmedia-theme {\n  display: inline-block;\n  line-height: 0;\n  width: 100%;\n  height: 100%;\n  direction: ltr;\n}\n\nmedia-poster-image {\n  display: inline-block;\n  line-height: 0;\n  width: 100%;\n  height: 100%;\n}\n\nmedia-poster-image:not([src]):not([placeholdersrc]) {\n  display: none;\n}\n\n::part(top),\n[part~='top'] {\n  --media-control-display: var(--controls, var(--top-controls));\n  --media-play-button-display: var(--play-button, var(--top-play-button));\n  --media-live-button-display: var(--live-button, var(--top-live-button));\n  --media-seek-backward-button-display: var(--seek-backward-button, var(--top-seek-backward-button));\n  --media-seek-forward-button-display: var(--seek-forward-button, var(--top-seek-forward-button));\n  --media-mute-button-display: var(--mute-button, var(--top-mute-button));\n  --media-captions-button-display: var(--captions-button, var(--top-captions-button));\n  --media-captions-menu-button-display: var(\n    --captions-menu-button,\n    var(--media-captions-button-display, var(--top-captions-menu-button))\n  );\n  --media-rendition-menu-button-display: var(--rendition-menu-button, var(--top-rendition-menu-button));\n  --media-audio-track-menu-button-display: var(--audio-track-menu-button, var(--top-audio-track-menu-button));\n  --media-airplay-button-display: var(--airplay-button, var(--top-airplay-button));\n  --media-pip-button-display: var(--pip-button, var(--top-pip-button));\n  --media-fullscreen-button-display: var(--fullscreen-button, var(--top-fullscreen-button));\n  --media-cast-button-display: var(--cast-button, var(--top-cast-button, var(--_cast-button-drm-display)));\n  --media-playback-rate-button-display: var(--playback-rate-button, var(--top-playback-rate-button));\n  --media-playback-rate-menu-button-display: var(\n    --captions-menu-button,\n    var(--media-playback-rate-button-display, var(--top-playback-rate-menu-button))\n  );\n  --media-volume-range-display: var(--volume-range, var(--top-volume-range));\n  --media-time-range-display: var(--time-range, var(--top-time-range));\n  --media-time-display-display: var(--time-display, var(--top-time-display));\n  --media-duration-display-display: var(--duration-display, var(--top-duration-display));\n  --media-title-display-display: var(--title-display, var(--top-title-display));\n}\n\n::part(center),\n[part~='center'] {\n  --media-control-display: var(--controls, var(--center-controls));\n  --media-play-button-display: var(--play-button, var(--center-play-button));\n  --media-live-button-display: var(--live-button, var(--center-live-button));\n  --media-seek-backward-button-display: var(--seek-backward-button, var(--center-seek-backward-button));\n  --media-seek-forward-button-display: var(--seek-forward-button, var(--center-seek-forward-button));\n  --media-mute-button-display: var(--mute-button, var(--center-mute-button));\n  --media-captions-button-display: var(--captions-button, var(--center-captions-button));\n  --media-captions-menu-button-display: var(\n    --captions-menu-button,\n    var(--media-captions-button-display, var(--center-captions-menu-button))\n  );\n  --media-rendition-menu-button-display: var(--rendition-menu-button, var(--center-rendition-menu-button));\n  --media-audio-track-menu-button-display: var(--audio-track-menu-button, var(--center-audio-track-menu-button));\n  --media-airplay-button-display: var(--airplay-button, var(--center-airplay-button));\n  --media-pip-button-display: var(--pip-button, var(--center-pip-button));\n  --media-fullscreen-button-display: var(--fullscreen-button, var(--center-fullscreen-button));\n  --media-cast-button-display: var(--cast-button, var(--center-cast-button, var(--_cast-button-drm-display)));\n  --media-playback-rate-button-display: var(--playback-rate-button, var(--center-playback-rate-button));\n  --media-playback-rate-menu-button-display: var(\n    --playback-rate-menu-button,\n    var(--media-playback-rate-button-display, var(--center-playback-rate-menu-button))\n  );\n  --media-volume-range-display: var(--volume-range, var(--center-volume-range));\n  --media-time-range-display: var(--time-range, var(--center-time-range));\n  --media-time-display-display: var(--time-display, var(--center-time-display));\n  --media-duration-display-display: var(--duration-display, var(--center-duration-display));\n}\n\n::part(bottom),\n[part~='bottom'] {\n  --media-control-display: var(--controls, var(--bottom-controls));\n  --media-play-button-display: var(--play-button, var(--bottom-play-button));\n  --media-live-button-display: var(--live-button, var(--bottom-live-button));\n  --media-seek-backward-button-display: var(--seek-backward-button, var(--bottom-seek-backward-button));\n  --media-seek-forward-button-display: var(--seek-forward-button, var(--bottom-seek-forward-button));\n  --media-mute-button-display: var(--mute-button, var(--bottom-mute-button));\n  --media-captions-button-display: var(--captions-button, var(--bottom-captions-button));\n  --media-captions-menu-button-display: var(\n    --captions-menu-button,\n    var(--media-captions-button-display, var(--bottom-captions-menu-button))\n  );\n  --media-rendition-menu-button-display: var(--rendition-menu-button, var(--bottom-rendition-menu-button));\n  --media-audio-track-menu-button-display: var(--audio-track-menu-button, var(--bottom-audio-track-menu-button));\n  --media-airplay-button-display: var(--airplay-button, var(--bottom-airplay-button));\n  --media-pip-button-display: var(--pip-button, var(--bottom-pip-button));\n  --media-fullscreen-button-display: var(--fullscreen-button, var(--bottom-fullscreen-button));\n  --media-cast-button-display: var(--cast-button, var(--bottom-cast-button, var(--_cast-button-drm-display)));\n  --media-playback-rate-button-display: var(--playback-rate-button, var(--bottom-playback-rate-button));\n  --media-playback-rate-menu-button-display: var(\n    --playback-rate-menu-button,\n    var(--media-playback-rate-button-display, var(--bottom-playback-rate-menu-button))\n  );\n  --media-volume-range-display: var(--volume-range, var(--bottom-volume-range));\n  --media-time-range-display: var(--time-range, var(--bottom-time-range));\n  --media-time-display-display: var(--time-display, var(--bottom-time-display));\n  --media-duration-display-display: var(--duration-display, var(--bottom-duration-display));\n  --media-title-display-display: var(--title-display, var(--bottom-title-display));\n}\n\n:host([no-tooltips]) {\n  --media-tooltip-display: none;\n}\n"}
  </style>
  ${Fse(e)}
`)(function(e,t){var n;return{src:!e.playbackId&&e.src,playbackId:e.playbackId,hasSrc:!!e.playbackId||!!e.src||!!e.currentSrc,poster:e.poster,storyboard:e.storyboard,storyboardSrc:e.getAttribute(Gse.STORYBOARD_SRC),placeholder:e.getAttribute("placeholder"),themeTemplate:Qse(e),thumbnailTime:!e.tokens.thumbnail&&e.thumbnailTime,autoplay:e.autoplay,crossOrigin:e.crossOrigin,loop:e.loop,noHotKeys:e.hasAttribute(Gse.NOHOTKEYS),hotKeys:e.getAttribute(Gse.HOTKEYS),muted:e.muted,paused:e.paused,preload:e.preload,envKey:e.envKey,preferCmcd:e.preferCmcd,debug:e.debug,disableTracking:e.disableTracking,disableCookies:e.disableCookies,tokens:e.tokens,beaconCollectionDomain:e.beaconCollectionDomain,maxResolution:e.maxResolution,minResolution:e.minResolution,programStartTime:e.programStartTime,programEndTime:e.programEndTime,assetStartTime:e.assetStartTime,assetEndTime:e.assetEndTime,renditionOrder:e.renditionOrder,metadata:e.metadata,playerInitTime:e.playerInitTime,playerSoftwareName:e.playerSoftwareName,playerSoftwareVersion:e.playerSoftwareVersion,startTime:e.startTime,preferPlayback:e.preferPlayback,audio:e.audio,defaultStreamType:e.defaultStreamType,targetLiveWindow:e.getAttribute(Dne.TARGET_LIVE_WINDOW),streamType:lse(e.getAttribute(Dne.STREAM_TYPE)),primaryColor:e.getAttribute(Gse.PRIMARY_COLOR),secondaryColor:e.getAttribute(Gse.SECONDARY_COLOR),accentColor:e.getAttribute(Gse.ACCENT_COLOR),forwardSeekOffset:e.forwardSeekOffset,backwardSeekOffset:e.backwardSeekOffset,defaultHiddenCaptions:e.defaultHiddenCaptions,defaultDuration:e.defaultDuration,defaultShowRemainingTime:e.defaultShowRemainingTime,hideDuration:Xse(e),playbackRates:e.getAttribute(Gse.PLAYBACK_RATES),customDomain:null!=(n=e.getAttribute(Dne.CUSTOM_DOMAIN))?n:void 0,title:e.getAttribute(Gse.TITLE),novolumepref:e.hasAttribute(Gse.NO_VOLUME_PREF),castReceiver:e.castReceiver,proudlyDisplayMuxBadge:e.hasAttribute(Gse.PROUDLY_DISPLAY_MUX_BADGE),...t,extraSourceParams:e.extraSourceParams}}(this,{...Voe(this,ile),...e})),this.shadowRoot)},ule=function(){let e=e=>{var t,n;if(null==e||!e.startsWith("theme-"))return;let r=e.replace(/^theme-/,"");if(Kse.includes(r))return;let i=this.getAttribute(e);null!=i?null==(t=this.mediaTheme)||t.setAttribute(r,i):null==(n=this.mediaTheme)||n.removeAttribute(r)};new MutationObserver((t=>{for(let{attributeName:n}of t)e(n)})).observe(this,{attributes:!0}),this.getAttributeNames().forEach(e)},dle=function(){var e,t=this;this.addEventListener("error",(e=>{let{detail:t}=e;if(t instanceof U8||(t=new U8(t.message,t.code,t.fatal)),null==t||!t.fatal)return gse(t),void(t.data&&gse(`${t.name} data:`,t.data));let n=$se(t);n.message&&yse(n),vse(t),t.data&&vse(`${t.name} data:`,t.data),Hoe(this,ale,lle).call(this,{isDialogOpen:!0})})),this.media&&(this.media.errorTranslator=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var n,r,i;if(!((null==(n=t.media)?void 0:n.error)instanceof U8))return e;let a=$se(null==(r=t.media)?void 0:r.error);return{player_error_code:null==(i=t.media)?void 0:i.error.code,player_error_message:a.message?String(a.message):e.player_error_message,player_error_context:a.context?String(a.context):e.player_error_context}}),null==(e=this.media)||e.addEventListener("error",(e=>{var t,n;let{detail:r}=e;if(!r){let{message:e,code:i}=null!=(n=null==(t=this.media)?void 0:t.error)?n:{};r=new U8(e,i)}null!=r&&r.fatal&&this.dispatchEvent(new CustomEvent("error",{detail:r}))}))},hle=function(){var e,t,n,r;let i=()=>Hoe(this,ale,cle).call(this);null==(t=null==(e=this.media)?void 0:e.textTracks)||t.addEventListener("addtrack",i),null==(r=null==(n=this.media)?void 0:n.textTracks)||r.addEventListener("removetrack",i)},ple=function(){var e,t,n=this;if(!/Firefox/i.test(navigator.userAgent))return;let r,i=new WeakMap,a=()=>this.streamType===V8.LIVE&&!this.secondaryColor&&this.offsetWidth>=800,o=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];a()||Array.from(e&&e.activeCues||[]).forEach((e=>{if(!(!e.snapToLines||e.line<-5||e.line>=0&&e.line<10))if(!t||n.paused){let t=e.text.split("\n").length,a=-3;n.streamType===V8.LIVE&&(a=-2);let o=a-t;if(e.line===o&&!r)return;i.has(e)||i.set(e,e.line),e.line=o}else setTimeout((()=>{e.line=i.get(e)||"auto"}),500)}))},s=()=>{var e,t;o(r,null!=(t=null==(e=this.mediaController)?void 0:e.hasAttribute(WH.USER_INACTIVE))&&t)},l=()=>{var e,t;let n=Array.from((null==(t=null==(e=this.mediaController)?void 0:e.media)?void 0:t.textTracks)||[]).filter((e=>["subtitles","captions"].includes(e.kind)&&"showing"===e.mode))[0];n!==r&&(null==r||r.removeEventListener("cuechange",s)),r=n,null==r||r.addEventListener("cuechange",s),o(r,Voe(this,nle))};l(),null==(e=this.textTracks)||e.addEventListener("change",l),null==(t=this.textTracks)||t.addEventListener("addtrack",l),this.addEventListener("userinactivechange",(()=>{var e,t;let n=null==(t=null==(e=this.mediaController)?void 0:e.hasAttribute(WH.USER_INACTIVE))||t;Voe(this,nle)!==n&&(zoe(this,nle,n),o(r,Voe(this,nle)))}))},Zoe.customElements.get("mux-player")||(Zoe.customElements.define("mux-player",Ele),Zoe.MuxPlayerElement=Ele);const _le="https://sideeye-backend-production.up.railway.app",Ale=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n={mode:"cors",credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json"}},r={...n,...t,headers:{...n.headers,...t.headers}};console.log("Fetching URL:",e),console.log("With options:",r);try{const t=await fetch(e,r);if(console.log("Response status:",t.status),console.log("Response headers:",Object.fromEntries(t.headers.entries())),!t.ok){const e=await t.json().catch((()=>null));throw console.error("Error response:",e),new Error((null===e||void 0===e?void 0:e.error)||`HTTP error! status: ${t.status}`)}return t}catch(Rb){throw console.error("Fetch error:",Rb),Rb}},Tle=async(e,t)=>{try{console.log("Creating live stream for room:",e,"user:",t);const n=await Ale(`${_le}/api/create-stream`,{method:"POST",body:JSON.stringify({roomId:e,userId:t})}),r=await n.json();return console.log("Stream created successfully:",r),r}catch(Rb){throw console.error("Error creating live stream:",Rb),Rb}},Sle=async e=>{try{console.log("Deleting stream:",e);const t=await Ale(`${_le}/api/delete-stream`,{method:"POST",body:JSON.stringify({streamId:e})});return console.log("Stream deleted successfully"),t.json()}catch(Rb){throw console.error("Error deleting live stream:",Rb),Rb}},kle=t.forwardRef(((e,t)=>{let{streamType:n,playbackId:r,metadataVideoTitle:i,metadataViewerUserId:a,style:o}=e;return(0,Ve.jsx)("mux-player",{ref:t,"stream-type":n,"playback-id":r,"metadata-video-title":i,"metadata-viewer-user-id":a,style:o})}));kle.displayName="MuxPlayer";const Cle=kle,Ile=e=>{let{isOwner:n,roomId:r}=e;const[i,a]=(0,t.useState)(""),[o,s]=(0,t.useState)(""),[l,c]=(0,t.useState)(null),[u,d]=(0,t.useState)(!1),[h,p]=(0,t.useState)(""),[f,m]=(0,t.useState)(!1),g=(0,t.useRef)(null),v=(0,t.useRef)(void 0);(0,t.useEffect)((()=>(n&&r?b():r&&(y(),v.current=setInterval(y,5e3)),()=>{v.current&&clearInterval(v.current)})),[n,r]);const y=async()=>{try{const e=await Ale(`https://sideeye-backend-production.up.railway.app/api/streams/${r}/status`);if(404===e.status)return n?(console.log("No stream found, creating new stream..."),void await b()):(console.log("No stream found for this room"),void c("Stream is not available. Please wait for the owner to start streaming."));if(!e.ok)throw new Error("Failed to check stream status");const t=await e.json();m(t.isActive),t.playbackId&&p(t.playbackId),t.streamId&&a(t.streamId),c(null)}catch(mme){console.error("Error checking stream status:",mme),m(!1),c("Failed to check stream status. Please try again later.")}},b=async()=>{try{var e,t;if(d(!0),c(null),!r)throw new Error("Room ID is required");console.log("Creating stream for room:",r);const n=await Tle(r,"owner");if(console.log("Stream created successfully:",n),!n.stream_key||null===(e=n.playback_ids)||void 0===e||null===(t=e[0])||void 0===t||!t.id)throw console.error("Invalid stream data:",n),new Error("Invalid stream data received from server");a(n.id),s(n.stream_key),p(n.playback_ids[0].id),m(!1),v.current&&clearInterval(v.current),v.current=setInterval(y,5e3)}catch(mme){throw console.error("Error initializing stream:",mme),c(mme instanceof Error?mme.message:"Failed to initialize streaming. Please try again."),mme}finally{d(!1)}};return(0,Ve.jsxs)(Xe,{sx:{p:2},children:[l&&(0,Ve.jsx)(HM,{severity:"error",sx:{mb:2},children:l}),u&&(0,Ve.jsx)(Xe,{sx:{display:"flex",justifyContent:"center",mb:2},children:(0,Ve.jsx)(jL,{})}),n&&(0,Ve.jsxs)(Xe,{sx:{display:"flex",gap:2,mb:2},children:[(0,Ve.jsx)(Ak,{variant:"contained",color:"primary",onClick:async()=>{try{if(d(!0),!i)throw new Error("No stream ID available");m(!0)}catch(mme){console.error("Error starting stream:",mme),c("Failed to start streaming. Please try again.")}finally{d(!1)}},disabled:u||!i||f,children:"Start Streaming"}),(0,Ve.jsx)(Ak,{variant:"contained",color:"secondary",onClick:async()=>{try{if(d(!0),!i)throw new Error("No stream ID available");await Sle(i),m(!1),a(""),s(""),p("")}catch(mme){console.error("Error stopping stream:",mme),c("Failed to stop streaming. Please try again.")}finally{d(!1)}},disabled:u||!i||!f,children:"Stop Streaming"})]}),n&&i&&(0,Ve.jsxs)(Xe,{sx:{mb:2,p:3,bgcolor:"background.paper",borderRadius:1},children:[(0,Ve.jsx)(hS,{variant:"h6",sx:{mb:2},children:"Stream Setup Instructions"}),(0,Ve.jsxs)(Xe,{sx:{mb:2},children:[(0,Ve.jsx)(hS,{variant:"subtitle1",color:"primary",children:"Stream Key (Required for OBS):"}),(0,Ve.jsx)(hS,{variant:"body2",sx:{wordBreak:"break-all",p:1,bgcolor:"action.hover",borderRadius:1,fontFamily:"monospace"},children:o})]}),(0,Ve.jsx)(hS,{variant:"subtitle1",sx:{mb:1},children:"How to Start Streaming:"}),(0,Ve.jsxs)("ol",{style:{marginLeft:"20px"},children:[(0,Ve.jsx)("li",{children:"Open OBS Studio"}),(0,Ve.jsxs)("li",{children:["Go to Settings ",">"," Stream"]}),(0,Ve.jsx)("li",{children:'Select "Custom..." as Service'}),(0,Ve.jsxs)("li",{children:["Set Server URL to: ",(0,Ve.jsx)(hS,{component:"span",sx:{fontFamily:"monospace"},children:"rtmps://global-live.mux.com:443/app"})]}),(0,Ve.jsx)("li",{children:'Copy the Stream Key shown above and paste it into the "Stream Key" field'}),(0,Ve.jsx)("li",{children:'Click "OK" to save settings'}),(0,Ve.jsx)("li",{children:'Click "Start Streaming" in OBS when ready'})]}),(0,Ve.jsx)(HM,{severity:"info",sx:{mt:2},children:"Keep your stream key private! Anyone with this key can stream to your channel."})]}),h&&(0,Ve.jsx)(Xe,{sx:{mt:2},children:f?(0,Ve.jsx)(Cle,{ref:g,streamType:"live",playbackId:h,metadataVideoTitle:"Live Stream",metadataViewerUserId:r,style:{width:"100%",maxHeight:"500px"}}):(0,Ve.jsx)(Xe,{sx:{textAlign:"center",p:3,bgcolor:"background.paper",borderRadius:1},children:(0,Ve.jsxs)(HM,{severity:"info",children:["The stream is not currently active. ",n?"Use the stream key above to start streaming.":"Please wait for the streamer to start broadcasting."]})})})]})},Rle=e=>{var n;let{open:r,onClose:i,onSubmit:a,initialData:o,title:s,submitButtonText:l,isProcessing:c=!1}=e;const[u,d]=(0,t.useState)({name:(null===o||void 0===o?void 0:o.name)||"",description:(null===o||void 0===o?void 0:o.description)||"",isPrivate:(null===o||void 0===o?void 0:o.isPrivate)||!1,password:(null===o||void 0===o?void 0:o.password)||"",category:(null===o||void 0===o?void 0:o.category)||"",tags:(null===o||void 0===o?void 0:o.tags)||[]});return(0,Ve.jsx)(bR,{open:r,onClose:i,maxWidth:"sm",fullWidth:!0,children:(0,Ve.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),await a(u)},children:[(0,Ve.jsx)(N$,{children:s}),(0,Ve.jsx)(w$,{children:(0,Ve.jsxs)(Xe,{sx:{display:"flex",flexDirection:"column",gap:2,pt:2},children:[(0,Ve.jsx)(xL,{autoFocus:!0,required:!0,label:"Room Name",value:u.name,onChange:e=>d((t=>({...t,name:e.target.value}))),fullWidth:!0}),(0,Ve.jsx)(xL,{label:"Description",value:u.description,onChange:e=>d((t=>({...t,description:e.target.value}))),multiline:!0,rows:4,fullWidth:!0}),(0,Ve.jsx)(xL,{label:"Category",value:u.category,onChange:e=>d((t=>({...t,category:e.target.value}))),fullWidth:!0}),(0,Ve.jsx)(xL,{label:"Tags (comma separated)",value:null===(n=u.tags)||void 0===n?void 0:n.join(", "),onChange:e=>d((t=>({...t,tags:e.target.value.split(",").map((e=>e.trim())).filter(Boolean)}))),fullWidth:!0,helperText:"Enter tags separated by commas"}),(0,Ve.jsx)(zW,{control:(0,Ve.jsx)(WV,{checked:u.isPrivate,onChange:e=>d((t=>({...t,isPrivate:e.target.checked})))}),label:"Private Room"}),u.isPrivate&&(0,Ve.jsx)(xL,{required:!0,label:"Password",type:"password",value:u.password,onChange:e=>d((t=>({...t,password:e.target.value}))),fullWidth:!0})]})}),(0,Ve.jsxs)(WF,{children:[(0,Ve.jsx)(Ak,{onClick:i,disabled:c,children:"Cancel"}),(0,Ve.jsx)(Ak,{type:"submit",variant:"contained",disabled:c,children:l})]})]})})};var Dle=n(1397),Lle=n.n(Dle);const Ple=[{label:"Default",value:"inherit"},{label:"Arial",value:"Arial, sans-serif"},{label:"Times New Roman",value:"Times New Roman, serif"},{label:"Roboto",value:"Roboto, sans-serif"},{label:"Open Sans",value:"Open Sans, sans-serif"},{label:"Montserrat",value:"Montserrat, sans-serif"},{label:"Playfair Display",value:"Playfair Display, serif"},{label:"Comic Sans MS",value:"Comic Sans MS, cursive"},{label:"Poppins",value:"Poppins, sans-serif"},{label:"Dancing Script",value:"Dancing Script, cursive"},{label:"Pacifico",value:"Pacifico, cursive"},{label:"Quicksand",value:"Quicksand, sans-serif"},{label:"Lato",value:"Lato, sans-serif"},{label:"Raleway",value:"Raleway, sans-serif"},{label:"Nunito",value:"Nunito, sans-serif"},{label:"Source Sans Pro",value:"Source Sans Pro, sans-serif"},{label:"Ubuntu",value:"Ubuntu, sans-serif"},{label:"Oswald",value:"Oswald, sans-serif"},{label:"Merriweather",value:"Merriweather, serif"},{label:"Noto Sans",value:"Noto Sans, sans-serif"}],Mle=[{name:"Default",value:"#ffffff"},{name:"Ocean Blue",value:"linear-gradient(135deg, #1e3c72 0%, #2a5298 100%)"},{name:"Sunset",value:"linear-gradient(135deg, #ff6b6b 0%, #556270 100%)"},{name:"Forest",value:"linear-gradient(135deg, #134e5e 0%, #71b280 100%)"},{name:"Purple Rain",value:"linear-gradient(135deg, #8e2de2 0%, #4a00e0 100%)"},{name:"Glitter Gold",value:"linear-gradient(135deg, #f6d365 0%, #fda085 100%)"},{name:"Neon Pink",value:"linear-gradient(135deg, #ff6b6b 0%, #ff8e8e 100%)"},{name:"Electric Blue",value:"linear-gradient(135deg, #00c6ff 0%, #0072ff 100%)"},{name:"Mint Fresh",value:"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)"},{name:"Glitter Purple",value:"linear-gradient(135deg, #a18cd1 0%, #fbc2eb 100%)"},{name:"Midnight",value:"linear-gradient(135deg, #0f2027 0%, #203a43 50%, #2c5364 100%)"},{name:"Sunrise",value:"linear-gradient(135deg, #ff512f 0%, #f09819 100%)"},{name:"Emerald",value:"linear-gradient(135deg, #11998e 0%, #38ef7d 100%)"},{name:"Rose",value:"linear-gradient(135deg, #ff758c 0%, #ff7eb3 100%)"},{name:"Sky",value:"linear-gradient(135deg, #56ccf2 0%, #2f80ed 100%)"},{name:"Autumn",value:"linear-gradient(135deg, #f2994a 0%, #f2c94c 100%)"},{name:"Crystal",value:"linear-gradient(135deg, #159957 0%, #155799 100%)"},{name:"Neon",value:"linear-gradient(135deg, #00f2fe 0%, #4facfe 100%)"},{name:"Royal",value:"linear-gradient(135deg, #141e30 0%, #243b55 100%)"},{name:"Cotton Candy",value:"linear-gradient(135deg, #ff9a9e 0%, #fad0c4 100%)"}],Nle=[{name:"Star",value:"\u2b50"},{name:"Heart",value:"\u2764\ufe0f"},{name:"Fire",value:"\ud83d\udd25"},{name:"Sparkles",value:"\u2728"},{name:"Rocket",value:"\ud83d\ude80"},{name:"Party",value:"\ud83c\udf89"},{name:"Music",value:"\ud83c\udfb5"},{name:"Gaming",value:"\ud83c\udfae"},{name:"Art",value:"\ud83c\udfa8"},{name:"Sports",value:"\u26bd"},{name:"Food",value:"\ud83c\udf55"},{name:"Travel",value:"\u2708\ufe0f"},{name:"Tech",value:"\ud83d\udcbb"},{name:"Nature",value:"\ud83c\udf3f"},{name:"Weather",value:"\u2600\ufe0f"}],Ole=()=>{var e,n,r,i,a,o,s,l,c,u,d,h,p,f;const{roomId:m}=J(),{currentUser:g,loading:v}=XA(),y=Z(),[b,w]=(0,t.useState)(null),[E,x]=(0,t.useState)(!0),[_,A]=(0,t.useState)(null),[T,S]=(0,t.useState)(!1),[k,C]=(0,t.useState)(""),[I,R]=(0,t.useState)(!1),[D,L]=(0,t.useState)([]),[P,M]=(0,t.useState)(""),[N,O]=(0,t.useState)(!1),[j,F]=(0,t.useState)(!1),[U,B]=(0,t.useState)(!1),[$,V]=(0,t.useState)(!1),[W,z]=(0,t.useState)(null),[H,q]=(0,t.useState)(!1),[G,K]=(0,t.useState)(!1),[Y,Q]=(0,t.useState)(""),[X,ee]=(0,t.useState)([]),[te,ne]=(0,t.useState)([]),[re,ie]=(0,t.useState)(!1),[ae,oe]=(0,t.useState)([]),[se,le]=(0,t.useState)(!1),[ce,ue]=(0,t.useState)(""),[de,he]=(0,t.useState)(!1),[pe,fe]=(0,t.useState)(""),[me,ge]=(0,t.useState)(!1),[ve,ye]=(0,t.useState)({headerColor:(null===b||void 0===b||null===(e=b.style)||void 0===e?void 0:e.headerColor)||"#ffffff",backgroundColor:(null===b||void 0===b||null===(n=b.style)||void 0===n?void 0:n.backgroundColor)||"#ffffff",textColor:(null===b||void 0===b||null===(r=b.style)||void 0===r?void 0:r.textColor)||"#000000",accentColor:(null===b||void 0===b||null===(i=b.style)||void 0===i?void 0:i.accentColor)||"#000000",font:(null===b||void 0===b||null===(a=b.style)||void 0===a?void 0:a.font)||"",customCss:(null===b||void 0===b||null===(o=b.style)||void 0===o?void 0:o.customCss)||"",headerGradient:(null===b||void 0===b||null===(s=b.style)||void 0===s?void 0:s.headerGradient)||!1,backgroundGradient:(null===b||void 0===b||null===(l=b.style)||void 0===l?void 0:l.backgroundGradient)||!1,glitterEffect:(null===b||void 0===b||null===(c=b.style)||void 0===c?void 0:c.glitterEffect)||!1,headerFontSize:(null===b||void 0===b||null===(u=b.style)||void 0===u?void 0:u.headerFontSize)||24,stickers:(null===b||void 0===b||null===(d=b.style)||void 0===d?void 0:d.stickers)||[]}),[be,we]=(0,t.useState)(!1),[Ee,xe]=(0,t.useState)([]),[_e,Ae]=(0,t.useState)(!1),[Te,Se]=(0,t.useState)(null),[ke,Ie]=(0,t.useState)(!1),[Re,De]=(0,t.useState)(!1),[Le,Pe]=(0,t.useState)("stream"),[Me,Ne]=(0,t.useState)(!1),Oe=(0,t.useRef)(!0),je=(0,t.useRef)(null),Fe=(0,t.useRef)(null),Ue=(0,t.useMemo)((()=>(null===b||void 0===b?void 0:b.ownerId)===(null===g||void 0===g?void 0:g.uid)),[null===b||void 0===b?void 0:b.ownerId,null===g||void 0===g?void 0:g.uid]),Be=(0,t.useMemo)((()=>{var e;return(null===b||void 0===b||null===(e=b.viewers)||void 0===e?void 0:e.some((e=>e.userId===(null===g||void 0===g?void 0:g.uid))))||!1}),[null===b||void 0===b?void 0:b.viewers,null===g||void 0===g?void 0:g.uid]);(0,t.useEffect)((()=>()=>{Oe.current=!1}),[]);const $e=(0,t.useCallback)(((e,t)=>{console.error(t,e),Oe.current&&(e instanceof js?A(`Firestore error: ${e.message}`):e instanceof Error?A(e.message):A(t))}),[]);(0,t.useEffect)((()=>{if(je.current)return Fe.current=new IntersectionObserver((e=>{e[0].isIntersecting&&(async()=>{if(Te&&!ke&&m&&q_)try{Ie(!0);const e=Zm(q_,"sideRooms",m,"messages"),t=Te.data().timestamp,n=Wg(e,Kg("timestamp","desc"),Hg("timestamp","<",t),Qg(25)),r=await uv(n);if(!r.empty){Se(r.docs[r.docs.length-1]);const e=r.docs.map((e=>{var t;return{id:e.id,...e.data(),timestamp:(null===(t=e.data().timestamp)||void 0===t?void 0:t.toDate())||new Date}})).reverse();L((t=>{const n=new Map;return[...t,...e].forEach((e=>{n.has(e.id)||n.set(e.id,e)})),Array.from(n.values())}))}}catch(mme){console.error("Error loading more messages:",mme),wA.error("Failed to load more messages")}finally{Ie(!1)}})()}),{threshold:.5}),Fe.current.observe(je.current),()=>{Fe.current&&Fe.current.disconnect()}}),[je.current,Te]);const We=(0,t.useCallback)(Lle().debounce((async()=>{if(null!==g&&void 0!==g&&g.uid&&m)try{var e,t;const n=Jm(q_,"sideRooms",m,"presence",g.uid),r={userId:g.uid,username:g.displayName||(null===(e=g.email)||void 0===e?void 0:e.split("@")[0])||"",avatar:g.photoURL||"",displayName:g.displayName||(null===(t=g.email)||void 0===t?void 0:t.split("@")[0])||"",lastSeen:Av(),isOnline:!0,role:Ue?"owner":"viewer"};await dv(n,r,{merge:!0})}catch(mme){console.error("Presence Firestore write failed:",mme,{currentUser:g,roomId:m})}else console.error("Presence update aborted: currentUser.uid or roomId is missing",{currentUser:g,roomId:m})}),1e3),[g,m,Ue]);(0,t.useEffect)((()=>{if(!g||!m||!q_)return;const e=Jm(q_,"sideRooms",m,"presence",g.uid),t=async()=>{try{await dv(e,{isOnline:!1,lastSeen:Av()},{merge:!0})}catch(mme){console.error("Error cleaning up presence:",mme)}};return window.addEventListener("beforeunload",t),document.addEventListener("visibilitychange",(()=>{"hidden"===document.visibilityState?t():We()})),()=>{window.removeEventListener("beforeunload",t),t()}}),[g,m]);const[ze,He]=(0,t.useState)(new Map),qe=async e=>{var t,n;if(e.preventDefault(),!m||!g||!P.trim())return;const r=P.trim();M("");const i=`temp-${Date.now()}`,a={id:i,userId:g.uid,username:g.displayName||(null===(t=g.email)||void 0===t?void 0:t.split("@")[0])||"",avatar:g.photoURL||"",content:r,timestamp:new Date,displayName:g.displayName||(null===(n=g.email)||void 0===n?void 0:n.split("@")[0])||""};L((e=>[...e,a]));try{var o,s,l;const e=Zm(q_,"sideRooms",m,"messages"),t={userId:g.uid,username:g.displayName||(null===(o=g.email)||void 0===o?void 0:o.split("@")[0])||"",avatar:g.photoURL||"",content:r,timestamp:Av(),displayName:g.displayName||(null===(s=g.email)||void 0===s?void 0:s.split("@")[0])||"",ownerId:null===b||void 0===b?void 0:b.ownerId,viewers:(null===b||void 0===b||null===(l=b.viewers)||void 0===l?void 0:l.map((e=>e.userId)))||[]},n=await fv(e,t);L((e=>e.map((e=>e.id===i?{...e,id:n.id}:e)))),c={...t,id:n.id,timestamp:new Date},He((e=>{const t=new Map(e);if(t.set(c.id,c),t.size>100){const e=Array.from(t.keys());e.length>0&&t.delete(e[0])}return t}))}catch(mme){L((e=>e.filter((e=>e.id!==i)))),$e(mme,"Failed to send message")}var c},Ge=()=>{if(g&&m&&q_)try{const e=Zm(q_,"sideRooms",m,"presence"),t=Jm(e,g.uid),n=Jm(q_,"sideRooms",m);let r=!1,i=0;const a=5e3,o=async()=>{if(null===g||void 0===g||!g.uid||!m)return void console.error("Presence update aborted: currentUser.uid or roomId is missing",{currentUser:g,roomId:m});if(r)return;const o=Date.now();if(!(o-i<a)){r=!0,i=o;try{var s,l;const r=(await uv(e)).docs.length,i={userId:g.uid,username:g.displayName||(null===(s=g.email)||void 0===s?void 0:s.split("@")[0])||"",avatar:g.photoURL||"",displayName:g.displayName||(null===(l=g.email)||void 0===l?void 0:l.split("@")[0])||"",lastSeen:Av(),isOnline:!0,role:Ue?"owner":"viewer"};await dv(t,i,{merge:!0}),await hv(n,{activeUsers:r,lastActive:Av()})}catch(_){console.error("Presence Firestore write failed (updateDoc):",_,{currentUser:g,roomId:m})}finally{r=!1}}},s=async()=>{try{await pv(t);const r=(await uv(e)).docs.length;await hv(n,{activeUsers:Math.max(0,r-1),lastActive:Av()})}catch(_){console.error("Error in cleanup:",_)}},l=setInterval(o,a),c=()=>{"hidden"===document.visibilityState?s():o()};document.addEventListener("visibilitychange",c),window.addEventListener("beforeunload",s),o();const u=mv(e,(e=>{const t=e.docs.map((e=>{var t;return{userId:e.id,username:e.data().displayName||e.data().username||"Anonymous",avatar:e.data().photoURL||e.data().avatar||"",lastSeen:(null===(t=e.data().lastSeen)||void 0===t?void 0:t.toDate())||new Date,isOnline:!0}}));oe(t)}));return()=>{clearInterval(l),document.removeEventListener("visibilitychange",c),window.removeEventListener("beforeunload",s),s(),u()}}catch(_){console.error("Error setting up presence listener:",_),A("Failed to set up presence listener")}};(0,t.useEffect)((()=>{if(v)return;if(!g)return void y("/login");let e,t,n;return(async()=>{try{if(!m||!q_)return;const r=Jm(q_,"sideRooms",m);e=mv(r,(async e=>{if(e.exists()){var r;const i=e.data();w(i),x(!1);const a=null===(r=i.viewers)||void 0===r?void 0:r.some((e=>e.userId===g.uid)),o=i.ownerId===g.uid;a||o?((()=>{if(g&&m&&q_)try{const e=mv(Wg(Zm(q_,"sideRooms",m,"messages"),Kg("timestamp","desc"),Qg(25)),(e=>{e.empty||Se(e.docs[e.docs.length-1]);const t=e.docs.map((e=>{var t;return{id:e.id,...e.data(),timestamp:(null===(t=e.data().timestamp)||void 0===t?void 0:t.toDate())||new Date}})).reverse();L((e=>{const n=new Map;return[...t,...e].forEach((e=>{n.has(e.id)||n.set(e.id,e)})),Array.from(n.values())}))}));return()=>e()}catch(mme){console.error("Error setting up message listener:",mme),A("Failed to set up message listener")}})(),Ge()):(t&&t(),n&&n(),t=void 0,n=void 0,A("You need to be a viewer of this room to access its content"))}else A("Room not found"),x(!1)}),(e=>{console.error("Error listening to room:",e),A("Failed to load room data"),x(!1)}))}catch(_){console.error("Error setting up room listener:",_),A("Failed to load room"),x(!1)}})(),()=>{e&&e(),t&&t(),n&&n()}}),[v,g,m,q_,y]);const Ke=(0,t.useCallback)((async()=>{if(b&&g&&m&&!I)try{R(!0);const e=Jm(q_,"sideRooms",m);await _v(q_,(async t=>{var n,r;const i=await t.get(e);if(!i.exists())throw new Error("Room not found");const a=i.data(),o=null===(n=a.members)||void 0===n?void 0:n.some((e=>e.userId===g.uid)),s=null===(r=a.viewers)||void 0===r?void 0:r.some((e=>e.userId===g.uid));if(o||s)throw new Error("You are already a member or viewer of this room");const l={userId:g.uid,username:g.displayName||"Anonymous",avatar:g.photoURL||"",role:"viewer",joinedAt:Av()};t.update(e,{viewers:Tv(l),viewerCount:kv(1),activeUsers:kv(1),lastActive:Av()});const c=Jm(Zm(q_,"users",g.uid,"notifications"));await dv(c,{type:"room_join",roomId:m,roomName:b.name,timestamp:Av(),status:"unread",message:`You have joined "${b.name}" as a viewer`})})),Oe.current&&(wA.success("Joined room successfully as a viewer"),S(!1))}catch(mme){console.error("Error joining room:",mme),mme instanceof Error?wA.error(mme.message):wA.error("Failed to join room"),Oe.current&&S(!1)}finally{Oe.current&&R(!1)}}),[b,g,m,I,q_,S,R]),Ye=((0,t.useCallback)((()=>{b?k.trim()?k===b.password?Ke():wA.error("Incorrect password"):wA.error("Please enter a password"):wA.error("Room not found")}),[b,k,Ke]),async()=>{if(q_&&g&&m&&b)try{R(!0);Jm(q_,"sideRooms",m);if(g){const e=Jm(q_,"sideRooms",m,"presence",g.uid);await pv(e);const t=Jm(Zm(q_,"users",g.uid,"notifications"));await dv(t,{type:"room_leave",roomId:m,roomName:b.name,timestamp:Av(),status:"unread",message:`You have left "${b.name}"`})}wA.success("Left room successfully"),y("/side-rooms")}catch(_){console.error("Error leaving room:",_),wA.error("Failed to leave room")}finally{R(!1)}}),Qe=async()=>{if(b&&g&&m)try{R(!0);const e=Jm(q_,"sideRooms",m);await hv(e,{isLive:!b.isLive,lastActivity:Av()}),O(!b.isLive),wA.success(b.isLive?"Stopped live session":"Started live session")}catch(mme){$e(mme,"Failed to update live status")}finally{R(!1)}},Ze=e=>{z(e.currentTarget)},Je=()=>{z(null)},et=()=>{Je(),V(!0)},tt=()=>{Je(),ge(!0)},nt=async()=>{if(Je(),b&&g&&m&&g.uid===b.ownerId){if(window.confirm("Are you sure you want to delete this room? This action cannot be undone."))try{q(!0);const e=Jm(q_,"sideRooms",m),t=Zm(q_,"sideRooms",m,"presence"),n=Zm(q_,"sideRooms",m,"messages"),r=Cv(q_),i=Jm(q_,"users",g.uid,"trash",m),a=await lv(e);a.exists()&&r.set(i,{...a.data(),deletedAt:Av(),originalPath:`sideRooms/${m}`}),r.delete(e);(await uv(t)).docs.forEach((e=>{r.delete(e.ref)}));(await uv(n)).docs.forEach((e=>{r.delete(e.ref)})),await r.commit(),wA.success("Room deleted successfully"),y("/side-rooms")}catch(mme){console.error("Error deleting room:",mme),wA.error("Failed to delete room")}finally{q(!1)}}else wA.error("You do not have permission to delete this room")},rt=async()=>{if(b&&m&&g&&0!==te.length)try{ie(!0);const e=Cv(q_);for(const t of te){const n=Jm(Zm(q_,"sideRooms",m,"invitations"));e.set(n,{userId:t.id,invitedBy:g.uid,inviterName:g.displayName||"Anonymous",inviterAvatar:g.photoURL||"",roomId:m,roomName:b.name,timestamp:Av(),status:"pending"});const r=Jm(Zm(q_,"users",t.id,"notifications"));e.set(r,{type:"room_invitation",roomId:m,roomName:b.name,invitedBy:g.uid,inviterName:g.displayName||"Anonymous",inviterAvatar:g.photoURL||"",timestamp:Av(),status:"unread",message:`${g.displayName||"Someone"} invited you to join "${b.name}"`})}await e.commit(),wA.success("Invitations sent successfully"),K(!1),ne([]),ee([])}catch(mme){console.error("Error sending invitations:",mme),wA.error("Failed to send invitations")}finally{ie(!1)}},it=async()=>{if(q_&&g&&m)try{var e,t;R(!0);const n=await Tle(m,g.uid);if(console.log("Stream created successfully:",n),!n.stream_key||null===(e=n.playback_ids)||void 0===e||null===(t=e[0])||void 0===t||!t.id)throw new Error("Invalid stream data received from server");const r=Jm(q_,"sideRooms",m);await hv(r,{mobileStreamKey:n.stream_key,mobilePlaybackId:n.playback_ids[0].id,mobileStreamerId:g.uid,lastActive:Av()}),ue(`https://stream.mux.com/${n.playback_ids[0].id}`),fe(n.stream_key),he(!0),wA.success("Mobile streaming setup complete. Configure Larix then return here to start streaming.")}catch(_){console.error("Error setting up mobile stream:",_),wA.error("Failed to setup mobile stream. Please check your connection and try again.")}finally{R(!1)}},at=async()=>{if(q_&&g&&m)try{R(!0);const e=Jm(q_,"sideRooms",m);await hv(e,{isMobileStreaming:!0,lastActive:Av()}),le(!0),he(!1),wA.success("Mobile streaming started! Your stream is now live.")}catch(_){console.error("Error starting mobile stream:",_),wA.error("Failed to start mobile stream")}finally{R(!1)}},ot=async()=>{if(!b||!g||!m||!b.isLive)return void wA.error("Room must be live to start recording");const e=b.mobilePlaybackId||b.currentStreamId;if(e)try{R(!0);const t=await fetch("http://localhost:3001/api/mux/start-recording",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({roomId:m,userId:g.uid,streamId:e})});if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to start recording")}const{recordingId:n}=await t.json(),r=Jm(q_,"sideRooms",m);await hv(r,{isRecording:!0,currentRecordingId:n,lastActive:Av()}),we(!0),wA.success("Recording started")}catch(_){console.error("Error starting recording:",_),wA.error(_ instanceof Error?_.message:"Failed to start recording")}finally{R(!1)}else wA.error("No active stream found. Please start streaming first.")},st=async()=>{if(b&&g&&m)try{R(!0);if(!(await fetch("http://localhost:3001/api/mux/stop-recording",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({roomId:m,userId:g.uid,recordingId:b.currentRecordingId})})).ok)throw new Error("Failed to stop recording");const e=Jm(q_,"sideRooms",m);await hv(e,{isRecording:!1,currentRecordingId:null,lastActive:Av()}),we(!1),wA.success("Recording stopped")}catch(_){console.error("Error stopping recording:",_),wA.error("Failed to stop recording")}finally{R(!1)}},lt=null===b||void 0===b||null===(h=b.members)||void 0===h?void 0:h.find((e=>"owner"===e.role)),ct=Be&&!Ue,[ut,dt]=(0,t.useState)(!1),[ht,pt]=(0,t.useState)(!1);(0,t.useEffect)((()=>{(async()=>{if(null===g||void 0===g||!g.uid||null===lt||void 0===lt||!lt.userId||g.uid===lt.userId)return;const e=Jm(q_,"users",lt.userId,"followers",g.uid),t=await lv(e);dt(t.exists())})()}),[null===g||void 0===g?void 0:g.uid,null===lt||void 0===lt?void 0:lt.userId]);const ft=async()=>{if(null!==g&&void 0!==g&&g.uid&&null!==lt&&void 0!==lt&&lt.userId){pt(!0);try{var e;const t=Jm(q_,"users",lt.userId,"followers",g.uid);await dv(t,{userId:g.uid,username:g.displayName||(null===(e=g.email)||void 0===e?void 0:e.split("@")[0])||"",avatar:g.photoURL||"",followedAt:Av()}),dt(!0),wA.success("You are now following the room owner!")}catch(mme){wA.error("Failed to follow the owner")}finally{pt(!1)}}},mt=()=>{Ne(!0)};if(v||E)return(0,Ve.jsx)(Xe,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:(0,Ve.jsx)(jL,{})});if(_)return(0,Ve.jsx)(Xe,{sx:{p:2},children:(0,Ve.jsx)(HM,{severity:"error",children:_})});if(!b)return null;null===(p=b.members)||void 0===p||p.some((e=>e.userId===(null===g||void 0===g?void 0:g.uid)&&"owner"===e.role));return(0,Ve.jsxs)(Xe,{sx:{display:"flex",height:"100vh",overflow:"hidden",flexDirection:{xs:"column",sm:"row"},...null!==b&&void 0!==b&&b.style?{bgcolor:b.style.backgroundColor,background:b.style.backgroundGradient?b.style.backgroundColor:void 0,color:b.style.textColor||"text.primary",fontFamily:b.style.font||"inherit",...b.style.glitterEffect&&{"&::before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'%3E%3Cg fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.2'%3E%3Cpath d='M11 0h2v2h-2zM13 2h2v2h-2zM15 4h2v2h-2zM17 6h2v2h-2zM19 8h2v2h-2zM21 10h2v2h-2zM23 12h2v2h-2zM25 14h2v2h-2zM27 16h2v2h-2zM29 18h2v2h-2zM31 20h2v2h-2zM33 22h2v2h-2zM35 24h2v2h-2zM37 26h2v2h-2zM39 28h2v2h-2zM41 30h2v2h-2zM43 32h2v2h-2zM45 34h2v2h-2zM47 36h2v2h-2zM49 38h2v2h-2zM51 40h2v2h-2zM53 42h2v2h-2zM55 44h2v2h-2zM57 46h2v2h-2zM59 48h2v2h-2zM61 50h2v2h-2zM63 52h2v2h-2zM65 54h2v2h-2zM67 56h2v2h-2zM69 58h2v2h-2zM71 60h2v2h-2zM73 62h2v2h-2zM75 64h2v2h-2zM77 66h2v2h-2zM79 68h2v2h-2zM81 70h2v2h-2zM83 72h2v2h-2zM85 74h2v2h-2zM87 76h2v2h-2zM89 78h2v2h-2zM91 80h2v2h-2zM93 82h2v2h-2zM95 84h2v2h-2zM97 86h2v2h-2zM99 88h2v2h-2zM101 90h2v2h-2zM103 92h2v2h-2zM105 94h2v2h-2zM107 96h2v2h-2zM109 98h2v2h-2z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E\")",opacity:.5,zIndex:1,pointerEvents:"none"}},...b.style.customCss?{...JSON.parse(b.style.customCss)}:{}}:{}},children:[(0,Ve.jsxs)(Xe,{sx:{flex:1,display:"flex",flexDirection:"column",height:{xs:"calc(100vh - 56px)",sm:"100%"},overflow:"hidden"},children:[(()=>{var e,t,n,r,i,a,o;return(0,Ve.jsx)(Xe,{sx:{position:"relative",p:{xs:1.5,sm:2},borderBottom:1,borderColor:"divider",background:null!==b&&void 0!==b&&null!==(e=b.style)&&void 0!==e&&e.headerGradient?null===b||void 0===b||null===(t=b.style)||void 0===t?void 0:t.headerColor:null===b||void 0===b||null===(n=b.style)||void 0===n?void 0:n.headerColor,minHeight:{xs:"56px",sm:"auto"},display:"flex",flexDirection:{xs:"column",sm:"row"},gap:{xs:1,sm:2}},children:(0,Ve.jsxs)(Xe,{sx:{position:"relative",zIndex:2,display:"flex",flexDirection:{xs:"column",sm:"row"},justifyContent:"space-between",alignItems:{xs:"flex-start",sm:"center"},width:"100%",gap:{xs:1,sm:2},color:null===b||void 0===b||null===(r=b.style)||void 0===r?void 0:r.textColor},children:[(0,Ve.jsxs)(Xe,{sx:{width:{xs:"100%",sm:"auto"}},children:[(0,Ve.jsx)(hS,{variant:"h4",component:"h1",sx:{fontFamily:null===b||void 0===b||null===(i=b.style)||void 0===i?void 0:i.font,textShadow:"2px 2px 4px rgba(0,0,0,0.3)",fontSize:{xs:"1.5rem",sm:`${(null===b||void 0===b||null===(a=b.style)||void 0===a?void 0:a.headerFontSize)||24}px`}},children:null===b||void 0===b?void 0:b.name}),(0,Ve.jsxs)(hS,{variant:"subtitle1",sx:{fontFamily:null===b||void 0===b||null===(o=b.style)||void 0===o?void 0:o.font,textShadow:"1px 1px 2px rgba(0,0,0,0.3)",fontSize:{xs:"0.875rem",sm:"1rem"}},children:["Created by ",(null===lt||void 0===lt?void 0:lt.username)||"Anonymous"]})]}),(0,Ve.jsxs)(Xe,{sx:{display:"flex",gap:{xs:.5,sm:1},flexWrap:"wrap",justifyContent:{xs:"flex-start",sm:"flex-end"},width:{xs:"100%",sm:"auto"}},children:[ct&&(0,Ve.jsxs)(Ve.Fragment,{children:[(0,Ve.jsx)(Ak,{variant:"outlined",color:"error",onClick:Ye,disabled:I,sx:{mr:1},children:"Leave Room"}),(0,Ve.jsx)(Ak,{variant:"contained",color:"primary",onClick:ft,disabled:ut||ht||!(null!==lt&&void 0!==lt&&lt.userId)||lt.userId===(null===g||void 0===g?void 0:g.uid),children:ut?"Following":ht?"Following...":"Follow Owner"})]}),(0,Ve.jsx)(kW,{title:"Share Room",children:(0,Ve.jsx)(ek,{onClick:mt,color:"primary",children:(0,Ve.jsx)(KW,{})})}),(0,Ve.jsx)(kW,{title:"Toggle Chat",children:(0,Ve.jsx)(ek,{onClick:()=>{B(!U),F(!1)},color:U?"primary":"default",children:(0,Ve.jsx)(YW,{})})}),(0,Ve.jsx)(kW,{title:"View Members",children:(0,Ve.jsx)(ek,{onClick:()=>{F(!j),B(!1)},color:j?"primary":"default",children:(0,Ve.jsx)(TV,{})})}),Ue&&(0,Ve.jsxs)(Ve.Fragment,{children:[(0,Ve.jsx)(kW,{title:"Room Settings",children:(0,Ve.jsx)(ek,{onClick:Ze,color:"primary",children:(0,Ve.jsx)(QW,{})})}),(0,Ve.jsxs)(uI,{anchorEl:W,open:Boolean(W),onClose:Je,children:[(0,Ve.jsxs)(xI,{onClick:et,children:[(0,Ve.jsx)(SI,{children:(0,Ve.jsx)(_V,{fontSize:"small"})}),(0,Ve.jsx)(RI,{children:"Edit Room"})]}),(0,Ve.jsxs)(xI,{onClick:tt,children:[(0,Ve.jsx)(SI,{children:(0,Ve.jsx)(FI,{fontSize:"small"})}),(0,Ve.jsx)(RI,{children:"Customize Room"})]}),(0,Ve.jsxs)(xI,{onClick:nt,children:[(0,Ve.jsx)(SI,{children:(0,Ve.jsx)(AV,{fontSize:"small"})}),(0,Ve.jsx)(RI,{children:"Delete Room"})]})]}),(0,Ve.jsx)(kW,{title:N?"Stop Streaming":"Go Live",children:(0,Ve.jsx)(ek,{onClick:Qe,color:N?"error":"primary",disabled:I,children:N?(0,Ve.jsx)(XW,{}):(0,Ve.jsx)(ZW,{})})}),N&&(0,Ve.jsx)(kW,{title:be?"Stop Recording":"Start Recording",children:(0,Ve.jsx)(ek,{onClick:be?st:ot,color:be?"error":"primary",disabled:I,children:be?(0,Ve.jsx)(JW,{}):(0,Ve.jsx)(ez,{})})}),(0,Ve.jsx)(Ak,{variant:"contained",color:"primary",onClick:it,startIcon:(0,Ve.jsx)(tz,{}),disabled:I,sx:{mb:2},children:"Start Mobile Stream"})]})]})]})})})(),(0,Ve.jsx)(Xe,{sx:{flex:1,overflow:"auto",p:{xs:1,sm:2},display:"flex",flexDirection:"column",gap:2},children:(null===b||void 0===b?void 0:b.isLive)&&(b?(0,Ve.jsx)(Xe,{sx:{mb:3},children:(0,Ve.jsx)(Ile,{isOwner:b.ownerId===(null===g||void 0===g?void 0:g.uid),roomId:m||""})}):null)})]}),(j||U)&&(0,Ve.jsxs)(Xe,{sx:{width:{xs:"100%",sm:300},height:{xs:"calc(100vh - 56px)",sm:"100%"},position:{xs:"fixed",sm:"relative"},right:0,top:{xs:"56px",sm:0},bgcolor:"background.paper",borderLeft:{xs:0,sm:1},borderTop:{xs:1,sm:0},borderColor:"divider",display:"flex",flexDirection:"column",zIndex:1200},children:[(0,Ve.jsxs)(Xe,{sx:{p:2,borderBottom:1,borderColor:"divider",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,Ve.jsx)(hS,{variant:"h6",children:U?"Chat":"Room Info"}),(0,Ve.jsx)(ek,{onClick:()=>{B(!1),F(!1)},children:(0,Ve.jsx)(vV,{})})]}),(0,Ve.jsx)(Xe,{sx:{flex:1,overflow:"auto",p:2},children:U?(0,Ve.jsx)(Xe,{children:(0,Ve.jsxs)(Xe,{sx:{display:"flex",flexDirection:"column",height:"100%",overflow:"hidden",bgcolor:"background.paper",borderRadius:1},children:[(0,Ve.jsxs)(Xe,{sx:{flex:1,overflow:"auto",p:2,display:"flex",flexDirection:"column",gap:1.5,"&::-webkit-scrollbar":{width:"8px"},"&::-webkit-scrollbar-track":{background:"transparent"},"&::-webkit-scrollbar-thumb":{background:"rgba(0, 0, 0, 0.1)",borderRadius:"4px","&:hover":{background:"rgba(0, 0, 0, 0.2)"}}},children:[D.map((e=>{var t,n,r,i,a;return(0,Ve.jsxs)(Xe,{sx:{display:"flex",gap:1.5,alignItems:"flex-start",maxWidth:"85%",alignSelf:e.userId===(null===g||void 0===g?void 0:g.uid)?"flex-end":"flex-start",animation:"fadeIn 0.3s ease-in-out","@keyframes fadeIn":{"0%":{opacity:0,transform:"translateY(10px)"},"100%":{opacity:1,transform:"translateY(0)"}}},children:[e.userId!==(null===g||void 0===g?void 0:g.uid)&&(0,Ve.jsx)(Ce,{to:`/profile/${e.userId}`,style:{textDecoration:"none"},children:(0,Ve.jsx)(aS,{src:e.avatar,alt:e.username,sx:{width:36,height:36,border:"2px solid",borderColor:"primary.main",cursor:"pointer",transition:"transform 0.2s","&:hover":{transform:"scale(1.1)"}},children:!e.avatar&&(null===(t=e.username)||void 0===t?void 0:t.charAt(0).toUpperCase())})}),(0,Ve.jsxs)(Xe,{sx:{display:"flex",flexDirection:"column",gap:.5},children:[e.userId!==(null===g||void 0===g?void 0:g.uid)&&(0,Ve.jsx)(Ce,{to:`/profile/${e.userId}`,style:{textDecoration:"none"},children:(0,Ve.jsx)(hS,{variant:"caption",sx:{fontWeight:600,color:"primary.main",ml:1,cursor:"pointer","&:hover":{textDecoration:"underline"}},children:e.username})}),(0,Ve.jsx)(Xe,{sx:{bgcolor:e.userId===(null===g||void 0===g?void 0:g.uid)?"primary.main":"background.default",color:e.userId===(null===g||void 0===g?void 0:g.uid)?"primary.contrastText":"text.primary",p:1.5,borderRadius:2,boxShadow:1,position:"relative","&::before":e.userId===(null===g||void 0===g?void 0:g.uid)?{content:'""',position:"absolute",right:-8,top:"50%",width:0,height:0,border:"8px solid transparent",borderLeftColor:"primary.main",transform:"translateY(-50%)"}:{content:'""',position:"absolute",left:-8,top:"50%",width:0,height:0,border:"8px solid transparent",borderRightColor:"background.default",transform:"translateY(-50%)"}},children:(0,Ve.jsx)(hS,{variant:"body2",sx:{wordBreak:"break-word",whiteSpace:"pre-wrap"},children:e.content})}),(0,Ve.jsx)(hS,{variant:"caption",sx:{color:"text.secondary",ml:1,fontSize:"0.7rem"},children:e.timestamp instanceof Date?e.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):(null===(n=e.timestamp)||void 0===n||null===(r=n.toDate)||void 0===r||null===(i=r.call(n))||void 0===i?void 0:i.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))||""})]}),e.userId===(null===g||void 0===g?void 0:g.uid)&&(0,Ve.jsx)(Ce,{to:`/profile/${e.userId}`,style:{textDecoration:"none"},children:(0,Ve.jsx)(aS,{src:e.avatar,alt:e.username,sx:{width:36,height:36,border:"2px solid",borderColor:"primary.main",cursor:"pointer",transition:"transform 0.2s","&:hover":{transform:"scale(1.1)"}},children:!e.avatar&&(null===(a=e.username)||void 0===a?void 0:a.charAt(0).toUpperCase())})})]},e.id)})),(0,Ve.jsx)("div",{ref:je})]}),(0,Ve.jsx)(Xe,{component:"form",onSubmit:qe,sx:{p:2,borderTop:1,borderColor:"divider",bgcolor:"background.paper"},children:(0,Ve.jsxs)(Xe,{sx:{display:"flex",gap:1,alignItems:"center"},children:[(0,Ve.jsx)(xL,{fullWidth:!0,placeholder:"Type a message...",value:P,onChange:e=>M(e.target.value),size:"small",sx:{"& .MuiOutlinedInput-root":{borderRadius:2,bgcolor:"background.default","&:hover":{bgcolor:"action.hover"},"&.Mui-focused":{bgcolor:"background.paper"}}}}),(0,Ve.jsx)(ek,{type:"submit",color:"primary",disabled:!P.trim(),sx:{bgcolor:"primary.main",color:"white","&:hover":{bgcolor:"primary.dark"},"&.Mui-disabled":{bgcolor:"action.disabledBackground",color:"action.disabled"}},children:(0,Ve.jsx)(nz,{})})]})})]})}):(0,Ve.jsxs)(Xe,{children:[(0,Ve.jsx)(hS,{variant:"h6",sx:{mb:2},children:"Viewers"}),(0,Ve.jsxs)(Dk,{children:[null===b||void 0===b||null===(f=b.viewers)||void 0===f?void 0:f.map((e=>(0,Ve.jsxs)(rR,{children:[(0,Ve.jsx)(lR,{children:(0,Ve.jsx)(aS,{src:e.avatar,children:e.username[0]})}),(0,Ve.jsx)(RI,{primary:e.username,secondary:`Joined ${e.joinedAt instanceof nl?e.joinedAt.toDate().toLocaleDateString():e.joinedAt.toLocaleDateString()}`})]},e.userId))),(!(null!==b&&void 0!==b&&b.viewers)||0===b.viewers.length)&&(0,Ve.jsx)(hS,{variant:"body2",color:"text.secondary",sx:{p:2,textAlign:"center"},children:"No viewers in the room"})]})]})})]}),(0,Ve.jsxs)(bR,{open:G,onClose:()=>K(!1),maxWidth:"sm",fullWidth:!0,children:[(0,Ve.jsx)(N$,{children:"Invite Members"}),(0,Ve.jsx)(w$,{children:(0,Ve.jsxs)(Xe,{sx:{display:"flex",flexDirection:"column",gap:2,pt:2},children:[(0,Ve.jsx)(xL,{fullWidth:!0,label:"Search users",variant:"outlined",onChange:e=>{const t=e.target.value;Q(t),t.trim()?(async e=>{if(e.trim()&&q_)try{const t=Wg(Zm(q_,"users"),Hg("username",">=",e.toLowerCase()),Hg("username","<=",e.toLowerCase()+"\uf8ff"),Qg(10)),n=(await uv(t)).docs.map((e=>({id:e.id,...e.data(),username:e.data().username||"Anonymous",avatar:e.data().avatar||""}))).filter((e=>{var t;return e.id!==(null===(t=G_.currentUser)||void 0===t?void 0:t.uid)}));ee(n)}catch(mme){console.error("Error searching users:",mme),wA.error("Failed to search users")}})(t):ee([])},InputProps:{startAdornment:(0,Ve.jsx)(EN,{position:"start",children:(0,Ve.jsx)(cW,{})})}}),(0,Ve.jsx)(Xe,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:te.map((e=>{var t;return(0,Ve.jsx)(eU,{avatar:(0,Ve.jsx)(aS,{src:e.avatar,children:null===(t=e.username)||void 0===t?void 0:t[0]}),label:e.username,onDelete:()=>ne((t=>t.filter((t=>t.id!==e.id))))},e.id)}))}),(0,Ve.jsx)(Dk,{children:X.map((e=>{var t;return(0,Ve.jsxs)(rR,{sx:{borderRadius:1,cursor:"pointer","&:hover":{bgcolor:"action.hover"}},onClick:()=>{te.some((t=>t.id===e.id))||ne((t=>[...t,e]))},children:[(0,Ve.jsx)(lR,{children:(0,Ve.jsx)(aS,{src:e.avatar,children:null===(t=e.username)||void 0===t?void 0:t[0]})}),(0,Ve.jsx)(RI,{primary:e.username})]},e.id)}))})]})}),(0,Ve.jsxs)(WF,{children:[(0,Ve.jsx)(Ak,{onClick:()=>K(!1),children:"Cancel"}),(0,Ve.jsx)(Ak,{variant:"contained",onClick:rt,disabled:re||0===te.length,children:re?"Sending...":"Send Invitations"})]})]}),(0,Ve.jsxs)(bR,{open:de,onClose:()=>he(!1),maxWidth:"sm",fullWidth:!0,children:[(0,Ve.jsx)(N$,{children:"Mobile Streaming Setup"}),(0,Ve.jsx)(w$,{children:(0,Ve.jsxs)(Xe,{sx:{mt:2},children:[(0,Ve.jsxs)(hS,{variant:"body1",gutterBottom:!0,children:["To stream from your mobile device, use the free ",(0,Ve.jsx)("b",{children:"Larix Broadcaster"})," app:"]}),(0,Ve.jsxs)(hS,{variant:"body2",color:"text.secondary",paragraph:!0,children:["1. Download Larix Broadcaster: ",(0,Ve.jsx)("br",{}),(0,Ve.jsx)("a",{href:"https://apps.apple.com/us/app/larix-broadcaster/id1042474385",target:"_blank",rel:"noopener noreferrer",children:"iOS (App Store)"})," | ",(0,Ve.jsx)("a",{href:"https://play.google.com/store/apps/details?id=com.wmspanel.larix_broadcaster",target:"_blank",rel:"noopener noreferrer",children:"Android (Google Play)"})]}),(0,Ve.jsxs)(hS,{variant:"body2",color:"text.secondary",paragraph:!0,children:["2. Open Larix Broadcaster and tap the gear/settings icon.",(0,Ve.jsx)("br",{}),"3. Go to ",(0,Ve.jsx)("b",{children:"Connections"})," and tap the ",(0,Ve.jsx)("b",{children:"+"})," to add a new connection.",(0,Ve.jsx)("br",{}),"4. ",(0,Ve.jsx)("b",{children:"URL:"})," ",(0,Ve.jsx)("span",{style:{fontFamily:"monospace"},children:"rtmps://global-live.mux.com:443/app"}),(0,Ve.jsx)("br",{}),"5. ",(0,Ve.jsx)("b",{children:"Stream Name/Key:"})," Use the stream key below."]}),(0,Ve.jsx)(Xe,{sx:{display:"flex",alignItems:"center",gap:1,mb:2},children:(0,Ve.jsx)(xL,{fullWidth:!0,label:"Stream Key",value:pe,InputProps:{readOnly:!0,endAdornment:(0,Ve.jsx)(EN,{position:"end",children:(0,Ve.jsx)(ek,{onClick:()=>{navigator.clipboard.writeText(pe),wA.success("Stream key copied to clipboard")},children:(0,Ve.jsx)(rz,{})})})},variant:"outlined"})}),(0,Ve.jsxs)(hS,{variant:"body2",color:"text.secondary",paragraph:!0,children:["6. Save the connection, return to the main screen, and tap the red record button in Larix to start streaming.",(0,Ve.jsx)("br",{}),"7. Allow camera and microphone access if prompted.",(0,Ve.jsx)("br",{}),"8. Once Larix is streaming, click the red button below to go live!"]}),(0,Ve.jsx)(Xe,{sx:{mt:3,display:"flex",justifyContent:"center"},children:(0,Ve.jsx)(Ak,{variant:"contained",color:"error",size:"large",onClick:at,disabled:I,startIcon:(0,Ve.jsx)(ez,{}),sx:{py:2,px:4,borderRadius:2,fontSize:"1.1rem",fontWeight:"bold"},children:I?"Starting Stream...":"START STREAMING"})})]})}),(0,Ve.jsx)(WF,{children:(0,Ve.jsx)(Ak,{onClick:()=>he(!1),children:"Close"})})]}),$&&(0,Ve.jsx)(Rle,{open:$,onClose:()=>V(!1),onSubmit:async e=>{if(b&&m&&g&&g.uid===b.ownerId)try{R(!0);const t=Jm(q_,"sideRooms",m),n=Jm(q_,"users",g.uid,"sideRooms",m),r={...e,updatedAt:Av(),lastActive:Av()};Object.keys(r).forEach((e=>{void 0===r[e]&&delete r[e]})),await _v(q_,(async i=>{var a;i.update(t,r),i.update(n,{name:e.name||b.name,description:e.description||b.description,category:e.category||b.category,updatedAt:Av(),lastActive:Av(),thumbnailUrl:(null===(a=b.style)||void 0===a?void 0:a.thumbnailUrl)||null})})),wA.success("Room updated successfully"),V(!1)}catch(mme){console.error("Error updating room:",mme),wA.error("Failed to update room")}finally{R(!1)}else wA.error("You do not have permission to edit this room")},initialData:b,title:"Edit Room",submitButtonText:"Save Changes",isProcessing:I}),me&&(0,Ve.jsxs)(bR,{open:me,onClose:()=>ge(!1),maxWidth:"sm",fullWidth:!0,children:[(0,Ve.jsx)(N$,{children:"Customize Room"}),(0,Ve.jsx)(w$,{children:(0,Ve.jsxs)(Xe,{sx:{display:"flex",flexDirection:"column",gap:2,pt:1},children:[(0,Ve.jsx)(Xe,{sx:{display:"flex",gap:1,flexWrap:"wrap",mb:1},children:Mle.map((e=>(0,Ve.jsx)(Ak,{variant:"outlined",size:"small",style:{background:e.value,color:"#000",minWidth:36,minHeight:36,border:ve.headerColor===e.value?"2px solid #1976d2":void 0},onClick:()=>ye((t=>({...t,headerColor:e.value,backgroundColor:e.value}))),children:e.name},e.name)))}),(0,Ve.jsx)(xL,{label:"Header Color",type:"color",value:ve.headerColor,onChange:e=>ye((t=>({...t,headerColor:e.target.value}))),InputLabelProps:{shrink:!0},fullWidth:!0}),(0,Ve.jsx)(xL,{label:"Background Color",type:"color",value:ve.backgroundColor,onChange:e=>ye((t=>({...t,backgroundColor:e.target.value}))),InputLabelProps:{shrink:!0},fullWidth:!0}),(0,Ve.jsx)(xL,{label:"Text Color",type:"color",value:ve.textColor,onChange:e=>ye((t=>({...t,textColor:e.target.value}))),InputLabelProps:{shrink:!0},fullWidth:!0}),(0,Ve.jsx)(xL,{label:"Accent Color",type:"color",value:ve.accentColor,onChange:e=>ye((t=>({...t,accentColor:e.target.value}))),InputLabelProps:{shrink:!0},fullWidth:!0}),(0,Ve.jsxs)(LD,{fullWidth:!0,children:[(0,Ve.jsx)(kD,{children:"Font"}),(0,Ve.jsx)(gL,{value:ve.font,label:"Font",onChange:e=>ye((t=>({...t,font:e.target.value}))),children:Ple.map((e=>(0,Ve.jsx)(xI,{value:e.value,children:e.label},e.value)))})]}),(0,Ve.jsx)(zW,{control:(0,Ve.jsx)(WV,{checked:ve.headerGradient,onChange:e=>ye((t=>({...t,headerGradient:e.target.checked})))}),label:"Header Gradient"}),(0,Ve.jsx)(zW,{control:(0,Ve.jsx)(WV,{checked:ve.backgroundGradient,onChange:e=>ye((t=>({...t,backgroundGradient:e.target.checked})))}),label:"Background Gradient"}),(0,Ve.jsx)(zW,{control:(0,Ve.jsx)(WV,{checked:ve.glitterEffect,onChange:e=>ye((t=>({...t,glitterEffect:e.target.checked})))}),label:"Glitter Effect"}),(0,Ve.jsx)(xL,{label:"Header Font Size",type:"number",value:ve.headerFontSize,onChange:e=>ye((t=>({...t,headerFontSize:Number(e.target.value)}))),InputProps:{inputProps:{min:12,max:64}},fullWidth:!0}),(0,Ve.jsxs)(Xe,{children:[(0,Ve.jsx)(hS,{variant:"subtitle2",children:"Stickers"}),(0,Ve.jsx)(Xe,{sx:{display:"flex",gap:1,flexWrap:"wrap",mb:1},children:Nle.map((e=>{var t;return(0,Ve.jsx)(Ak,{variant:null!==(t=ve.stickers)&&void 0!==t&&t.includes(e.value)?"contained":"outlined",onClick:()=>ye((t=>{var n;return{...t,stickers:null!==(n=t.stickers)&&void 0!==n&&n.includes(e.value)?t.stickers.filter((t=>t!==e.value)):[...t.stickers||[],e.value]}})),size:"small",children:e.value},e.value)}))})]})]})}),(0,Ve.jsxs)(WF,{children:[(0,Ve.jsx)(Ak,{onClick:()=>ge(!1),children:"Cancel"}),(0,Ve.jsx)(Ak,{onClick:async()=>{if(b&&m)try{R(!0);const e=Jm(q_,"sideRooms",m);await hv(e,{style:ve,updatedAt:new Date}),wA.success("Room style updated successfully"),ge(!1)}catch(mme){console.error("Error updating room style:",mme),$e(mme,"Failed to update room style")}finally{R(!1)}},variant:"contained",disabled:I,children:"Save Style"})]})]}),Me&&(0,Ve.jsxs)(bR,{open:Me,onClose:()=>Ne(!1),children:[(0,Ve.jsx)(N$,{children:"Share Room"}),(0,Ve.jsx)(w$,{children:(0,Ve.jsx)(hS,{gutterBottom:!0,children:"Share this live room to your feed or copy the link to share with others."})}),(0,Ve.jsxs)(WF,{children:[(0,Ve.jsx)(Ak,{onClick:async()=>{if(g&&b)try{var e,t,n;const r=null===(e=b.members)||void 0===e?void 0:e.find((e=>"owner"===e.role)),i={authorId:g.uid,authorUsername:g.displayName||(null===(t=g.email)||void 0===t?void 0:t.split("@")[0])||"",authorAvatar:g.photoURL||"",createdAt:Av(),content:`Check out this live room: ${b.name}`,roomId:m,roomName:b.name,roomDescription:b.description,roomOwner:(null===r||void 0===r?void 0:r.username)||"",roomThumbnail:(null===(n=b.style)||void 0===n?void 0:n.thumbnailUrl)||"",type:"room_share"};await fv(Zm(q_,"posts"),i),Ne(!1),wA.success("Room shared to your feed!")}catch(mme){wA.error("Failed to share to feed")}},variant:"contained",children:"Share to Feed"}),(0,Ve.jsx)(Ak,{onClick:()=>{navigator.clipboard.writeText(window.location.origin+"/side-room/"+m),wA.success("Room link copied!")},children:"Copy Link"}),(0,Ve.jsx)(Ak,{onClick:()=>Ne(!1),children:"Cancel"})]})]})]})},jle=()=>{const[e,n]=(0,t.useState)([]),[r,i]=(0,t.useState)(""),[a,o]=(0,t.useState)(""),[s,l]=(0,t.useState)(null);(0,t.useEffect)((()=>{const e=mv(Wg(Zm(q_,"messages"),Kg("timestamp","asc")),(e=>{const t=e.docs.map((e=>{var t;return{id:e.id,...e.data(),timestamp:null===(t=e.data().timestamp)||void 0===t?void 0:t.toDate()}}));n(t)}));return()=>e()}),[]);return(0,Ve.jsx)(rP,{maxWidth:"md",children:(0,Ve.jsxs)(Xe,{sx:{mt:4,mb:4},children:[(0,Ve.jsx)(hS,{variant:"h4",component:"h1",gutterBottom:!0,children:"Chat Room"}),(0,Ve.jsx)(Dk,{sx:{maxHeight:"60vh",overflow:"auto",bgcolor:"background.paper",borderRadius:1},children:e.map((e=>{var t;return(0,Ve.jsxs)(rR,{sx:{display:"flex",flexDirection:"column",alignItems:"flex-start"},children:[(0,Ve.jsx)(hS,{variant:"subtitle2",color:"primary",children:e.username}),(0,Ve.jsx)(hS,{variant:"body1",children:e.text}),(0,Ve.jsx)(hS,{variant:"caption",color:"text.secondary",children:null===(t=e.timestamp)||void 0===t?void 0:t.toLocaleTimeString()})]},e.id)}))}),(0,Ve.jsxs)(Xe,{component:"form",onSubmit:async e=>{if(e.preventDefault(),""!==r.trim()&&q_)try{var t;await fv(Zm(q_,"messages"),{text:r,userId:null===(t=G_.currentUser)||void 0===t?void 0:t.uid,username:a||"Anonymous",timestamp:Av()}),i("")}catch(s){console.error("Error sending message:",s)}},sx:{mt:2},children:[(0,Ve.jsx)(xL,{fullWidth:!0,variant:"outlined",placeholder:"Type your message...",value:r,onChange:e=>i(e.target.value),sx:{mb:2}}),(0,Ve.jsx)(Ak,{type:"submit",variant:"contained",color:"primary",children:"Send"})]})]})})};var Fle=n(5361);function Ule(e){return(0,_T.Ay)("MuiCollapse",e)}(0,Ge.A)("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);const Ble=["addEndListener","children","className","collapsedSize","component","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","orientation","style","timeout","TransitionComponent"],$le=(0,bT.Ay)("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.orientation],"entered"===n.state&&t.entered,"exited"===n.state&&!n.in&&"0px"===n.collapsedSize&&t.hidden]}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({height:0,overflow:"hidden",transition:t.transitions.create("height")},"horizontal"===n.orientation&&{height:"auto",width:0,transition:t.transitions.create("width")},"entered"===n.state&&(0,De.A)({height:"auto",overflow:"visible"},"horizontal"===n.orientation&&{width:"auto"}),"exited"===n.state&&!n.in&&"0px"===n.collapsedSize&&{visibility:"hidden"})})),Vle=(0,bT.Ay)("div",{name:"MuiCollapse",slot:"Wrapper",overridesResolver:(e,t)=>t.wrapper})((e=>{let{ownerState:t}=e;return(0,De.A)({display:"flex",width:"100%"},"horizontal"===t.orientation&&{width:"auto",height:"100%"})})),Wle=(0,bT.Ay)("div",{name:"MuiCollapse",slot:"WrapperInner",overridesResolver:(e,t)=>t.wrapperInner})((e=>{let{ownerState:t}=e;return(0,De.A)({width:"100%"},"horizontal"===t.orientation&&{width:"auto",height:"100%"})})),zle=t.forwardRef((function(e,n){const r=(0,Ze.b)({props:e,name:"MuiCollapse"}),{addEndListener:i,children:a,className:o,collapsedSize:s="0px",component:l,easing:c,in:u,onEnter:d,onEntered:h,onEntering:p,onExit:f,onExited:m,onExiting:g,orientation:v="vertical",style:y,timeout:b=Fle.p0.standard,TransitionComponent:w=eC}=r,E=(0,Le.A)(r,Ble),x=(0,De.A)({},r,{orientation:v,collapsedSize:s}),_=(e=>{const{orientation:t,classes:n}=e,r={root:["root",`${t}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${t}`],wrapperInner:["wrapperInner",`${t}`]};return(0,yT.A)(r,Ule,n)})(x),A=tC(),T=(0,kS.A)(),S=t.useRef(null),k=t.useRef(),C="number"===typeof s?`${s}px`:s,I="horizontal"===v,R=I?"width":"height",D=t.useRef(null),L=(0,pS.A)(n,D),P=e=>t=>{if(e){const n=D.current;void 0===t?e(n):e(n,t)}},M=()=>S.current?S.current[I?"clientWidth":"clientHeight"]:0,N=P(((e,t)=>{S.current&&I&&(S.current.style.position="absolute"),e.style[R]=C,d&&d(e,t)})),O=P(((e,t)=>{const n=M();S.current&&I&&(S.current.style.position="");const{duration:r,easing:i}=rC({style:y,timeout:b,easing:c},{mode:"enter"});if("auto"===b){const t=A.transitions.getAutoHeightDuration(n);e.style.transitionDuration=`${t}ms`,k.current=t}else e.style.transitionDuration="string"===typeof r?r:`${r}ms`;e.style[R]=`${n}px`,e.style.transitionTimingFunction=i,p&&p(e,t)})),j=P(((e,t)=>{e.style[R]="auto",h&&h(e,t)})),F=P((e=>{e.style[R]=`${M()}px`,f&&f(e)})),U=P(m),B=P((e=>{const t=M(),{duration:n,easing:r}=rC({style:y,timeout:b,easing:c},{mode:"exit"});if("auto"===b){const n=A.transitions.getAutoHeightDuration(t);e.style.transitionDuration=`${n}ms`,k.current=n}else e.style.transitionDuration="string"===typeof n?n:`${n}ms`;e.style[R]=C,e.style.transitionTimingFunction=r,g&&g(e)}));return(0,Ve.jsx)(w,(0,De.A)({in:u,onEnter:N,onEntered:j,onEntering:O,onExit:F,onExited:U,onExiting:B,addEndListener:e=>{"auto"===b&&T.start(k.current||0,e),i&&i(D.current,e)},nodeRef:D,timeout:"auto"===b?null:b},E,{children:(e,t)=>(0,Ve.jsx)($le,(0,De.A)({as:l,className:(0,Pe.A)(_.root,o,{entered:_.entered,exited:!u&&"0px"===C&&_.hidden}[e]),style:(0,De.A)({[I?"minWidth":"minHeight"]:C},y),ref:L},t,{ownerState:(0,De.A)({},x,{state:e}),children:(0,Ve.jsx)(Vle,{ownerState:(0,De.A)({},x,{state:e}),className:_.wrapper,ref:S,children:(0,Ve.jsx)(Wle,{ownerState:(0,De.A)({},x,{state:e}),className:_.wrapperInner,children:a})})}))}))}));zle.muiSupportAuto=!0;const Hle=zle;const qle=t.createContext({});function Gle(e){return(0,_T.Ay)("MuiAccordion",e)}const Kle=(0,Ge.A)("MuiAccordion",["root","rounded","expanded","disabled","gutters","region"]),Yle=["children","className","defaultExpanded","disabled","disableGutters","expanded","onChange","square","slots","slotProps","TransitionComponent","TransitionProps"],Qle=(0,bT.Ay)(CT,{name:"MuiAccordion",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${Kle.region}`]:t.region},t.root,!n.square&&t.rounded,!n.disableGutters&&t.gutters]}})((e=>{let{theme:t}=e;const n={duration:t.transitions.duration.shortest};return{position:"relative",transition:t.transitions.create(["margin"],n),overflowAnchor:"none","&::before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:(t.vars||t).palette.divider,transition:t.transitions.create(["opacity","background-color"],n)},"&:first-of-type":{"&::before":{display:"none"}},[`&.${Kle.expanded}`]:{"&::before":{opacity:0},"&:first-of-type":{marginTop:0},"&:last-of-type":{marginBottom:0},"& + &":{"&::before":{display:"none"}}},[`&.${Kle.disabled}`]:{backgroundColor:(t.vars||t).palette.action.disabledBackground}}}),(e=>{let{theme:t}=e;return{variants:[{props:e=>!e.square,style:{borderRadius:0,"&:first-of-type":{borderTopLeftRadius:(t.vars||t).shape.borderRadius,borderTopRightRadius:(t.vars||t).shape.borderRadius},"&:last-of-type":{borderBottomLeftRadius:(t.vars||t).shape.borderRadius,borderBottomRightRadius:(t.vars||t).shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}}},{props:e=>!e.disableGutters,style:{[`&.${Kle.expanded}`]:{margin:"16px 0"}}}]}})),Xle=t.forwardRef((function(e,n){const r=(0,Ze.b)({props:e,name:"MuiAccordion"}),{children:i,className:a,defaultExpanded:o=!1,disabled:s=!1,disableGutters:l=!1,expanded:c,onChange:u,square:d=!1,slots:h={},slotProps:p={},TransitionComponent:f,TransitionProps:m}=r,g=(0,Le.A)(r,Yle),[v,y]=(0,QD.A)({controlled:c,default:o,name:"Accordion",state:"expanded"}),b=t.useCallback((e=>{y(!v),u&&u(e,!v)}),[v,u,y]),[w,...E]=t.Children.toArray(i),x=t.useMemo((()=>({expanded:v,disabled:s,disableGutters:l,toggle:b})),[v,s,l,b]),_=(0,De.A)({},r,{square:d,disabled:s,disableGutters:l,expanded:v}),A=(e=>{const{classes:t,square:n,expanded:r,disabled:i,disableGutters:a}=e,o={root:["root",!n&&"rounded",r&&"expanded",i&&"disabled",!a&&"gutters"],region:["region"]};return(0,yT.A)(o,Gle,t)})(_),T=(0,De.A)({transition:f},h),S=(0,De.A)({transition:m},p),[k,C]=JT("transition",{elementType:Hle,externalForwardedProps:{slots:T,slotProps:S},ownerState:_});return(0,Ve.jsxs)(Qle,(0,De.A)({className:(0,Pe.A)(A.root,a),ref:n,ownerState:_,square:d},g,{children:[(0,Ve.jsx)(qle.Provider,{value:x,children:w}),(0,Ve.jsx)(k,(0,De.A)({in:v,timeout:"auto"},C,{children:(0,Ve.jsx)("div",{"aria-labelledby":w.props.id,id:w.props["aria-controls"],role:"region",className:A.region,children:E})}))]}))})),Zle=Xle;function Jle(e){return(0,_T.Ay)("MuiAccordionSummary",e)}const ece=(0,Ge.A)("MuiAccordionSummary",["root","expanded","focusVisible","disabled","gutters","contentGutters","content","expandIconWrapper"]),tce=["children","className","expandIcon","focusVisibleClassName","onClick"],nce=(0,bT.Ay)(KS,{name:"MuiAccordionSummary",slot:"Root",overridesResolver:(e,t)=>t.root})((e=>{let{theme:t}=e;const n={duration:t.transitions.duration.shortest};return{display:"flex",minHeight:48,padding:t.spacing(0,2),transition:t.transitions.create(["min-height","background-color"],n),[`&.${ece.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${ece.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity},[`&:hover:not(.${ece.disabled})`]:{cursor:"pointer"},variants:[{props:e=>!e.disableGutters,style:{[`&.${ece.expanded}`]:{minHeight:64}}}]}})),rce=(0,bT.Ay)("div",{name:"MuiAccordionSummary",slot:"Content",overridesResolver:(e,t)=>t.content})((e=>{let{theme:t}=e;return{display:"flex",flexGrow:1,margin:"12px 0",variants:[{props:e=>!e.disableGutters,style:{transition:t.transitions.create(["margin"],{duration:t.transitions.duration.shortest}),[`&.${ece.expanded}`]:{margin:"20px 0"}}}]}})),ice=(0,bT.Ay)("div",{name:"MuiAccordionSummary",slot:"ExpandIconWrapper",overridesResolver:(e,t)=>t.expandIconWrapper})((e=>{let{theme:t}=e;return{display:"flex",color:(t.vars||t).palette.action.active,transform:"rotate(0deg)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shortest}),[`&.${ece.expanded}`]:{transform:"rotate(180deg)"}}})),ace=t.forwardRef((function(e,n){const r=(0,Ze.b)({props:e,name:"MuiAccordionSummary"}),{children:i,className:a,expandIcon:o,focusVisibleClassName:s,onClick:l}=r,c=(0,Le.A)(r,tce),{disabled:u=!1,disableGutters:d,expanded:h,toggle:p}=t.useContext(qle),f=(0,De.A)({},r,{expanded:h,disabled:u,disableGutters:d}),m=(e=>{const{classes:t,expanded:n,disabled:r,disableGutters:i}=e,a={root:["root",n&&"expanded",r&&"disabled",!i&&"gutters"],focusVisible:["focusVisible"],content:["content",n&&"expanded",!i&&"contentGutters"],expandIconWrapper:["expandIconWrapper",n&&"expanded"]};return(0,yT.A)(a,Jle,t)})(f);return(0,Ve.jsxs)(nce,(0,De.A)({focusRipple:!1,disableRipple:!0,disabled:u,component:"div","aria-expanded":h,className:(0,Pe.A)(m.root,a),focusVisibleClassName:(0,Pe.A)(m.focusVisible,s),onClick:e=>{p&&p(e),l&&l(e)},ref:n,ownerState:f},c,{children:[(0,Ve.jsx)(rce,{className:m.content,ownerState:f,children:i}),o&&(0,Ve.jsx)(ice,{className:m.expandIconWrapper,ownerState:f,children:o})]}))})),oce=ace;function sce(e){return(0,_T.Ay)("MuiAccordionDetails",e)}(0,Ge.A)("MuiAccordionDetails",["root"]);const lce=["className"],cce=(0,bT.Ay)("div",{name:"MuiAccordionDetails",slot:"Root",overridesResolver:(e,t)=>t.root})((e=>{let{theme:t}=e;return{padding:t.spacing(1,2,2)}})),uce=t.forwardRef((function(e,t){const n=(0,Ze.b)({props:e,name:"MuiAccordionDetails"}),{className:r}=n,i=(0,Le.A)(n,lce),a=n,o=(e=>{const{classes:t}=e;return(0,yT.A)({root:["root"]},sce,t)})(a);return(0,Ve.jsx)(cce,(0,De.A)({className:(0,Pe.A)(o.root,r),ref:t,ownerState:a},i))})),dce=uce,hce=(0,BT.A)([(0,Ve.jsx)("path",{d:"M13 8.57c-.79 0-1.43.64-1.43 1.43s.64 1.43 1.43 1.43 1.43-.64 1.43-1.43-.64-1.43-1.43-1.43"},"0"),(0,Ve.jsx)("path",{d:"M13 3C9.25 3 6.2 5.94 6.02 9.64L4.1 12.2c-.25.33-.01.8.4.8H6v3c0 1.1.9 2 2 2h1v3h7v-4.68c2.36-1.12 4-3.53 4-6.32 0-3.87-3.13-7-7-7m3 7c0 .13-.01.26-.02.39l.83.66c.08.06.1.16.05.25l-.8 1.39c-.05.09-.16.12-.24.09l-.99-.4c-.21.16-.43.29-.67.39L14 13.83c-.01.1-.1.17-.2.17h-1.6c-.1 0-.18-.07-.2-.17l-.15-1.06c-.25-.1-.47-.23-.68-.39l-.99.4c-.09.03-.2 0-.25-.09l-.8-1.39c-.05-.08-.03-.19.05-.25l.84-.66c-.01-.13-.02-.26-.02-.39s.02-.27.04-.39l-.85-.66c-.08-.06-.1-.16-.05-.26l.8-1.38c.05-.09.15-.12.24-.09l1 .4c.2-.15.43-.29.67-.39L12 6.17c.02-.1.1-.17.2-.17h1.6c.1 0 .18.07.2.17l.15 1.06c.24.1.46.23.67.39l1-.4c.09-.03.2 0 .24.09l.8 1.38c.05.09.03.2-.05.26l-.85.66c.03.12.04.25.04.39"},"1")],"Psychology"),pce=(0,BT.A)((0,Ve.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39"}),"Public"),fce=(0,BT.A)((0,Ve.jsx)("path",{d:"M1 21h22L12 2zm12-3h-2v-2h2zm0-4h-2v-4h2z"}),"Warning"),mce=(0,BT.A)((0,Ve.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2M4 12c0-4.42 3.58-8 8-8 1.85 0 3.55.63 4.9 1.69L5.69 16.9C4.63 15.55 4 13.85 4 12m8 8c-1.85 0-3.55-.63-4.9-1.69L18.31 7.1C19.37 8.45 20 10.15 20 12c0 4.42-3.58 8-8 8"}),"Block"),gce=(0,BT.A)((0,Ve.jsx)("path",{d:"m5.2494 8.0688 2.83-2.8269 14.1343 14.15-2.83 2.8269zm4.2363-4.2415 2.828-2.8289 5.6577 5.656-2.828 2.8289zM.9989 12.3147l2.8284-2.8285 5.6569 5.6569-2.8285 2.8284zM1 21h12v2H1z"}),"Gavel"),vce=(0,BT.A)((0,Ve.jsx)("path",{d:"M12 1 3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5zm-2 16-4-4 1.41-1.41L10 14.17l6.59-6.59L18 9z"}),"VerifiedUser"),yce=(0,BT.A)((0,Ve.jsx)("path",{d:"M12 5.9c1.16 0 2.1.94 2.1 2.1s-.94 2.1-2.1 2.1S9.9 9.16 9.9 8s.94-2.1 2.1-2.1m0 9c2.97 0 6.1 1.46 6.1 2.1v1.1H5.9V17c0-.64 3.13-2.1 6.1-2.1M12 4C9.79 4 8 5.79 8 8s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4m0 9c-2.67 0-8 1.34-8 4v3h16v-3c0-2.66-5.33-4-8-4"}),"PersonOutline"),bce=(0,BT.A)((0,Ve.jsx)("path",{d:"M20 8h-2.81c-.45-.78-1.07-1.45-1.82-1.96L17 4.41 15.59 3l-2.17 2.17C12.96 5.06 12.49 5 12 5c-.49 0-.96.06-1.41.17L8.41 3 7 4.41l1.62 1.63C7.88 6.55 7.26 7.22 6.81 8H4v2h2.09c-.05.33-.09.66-.09 1v1H4v2h2v1c0 .34.04.67.09 1H4v2h2.81c1.04 1.79 2.97 3 5.19 3s4.15-1.21 5.19-3H20v-2h-2.09c.05-.33.09-.66.09-1v-1h2v-2h-2v-1c0-.34-.04-.67-.09-1H20zm-6 8h-4v-2h4zm0-4h-4v-2h4z"}),"BugReport"),wce=(0,BT.A)((0,Ve.jsx)("path",{d:"M15.73 3H8.27L3 8.27v7.46L8.27 21h7.46L21 15.73V8.27zM12 17.3c-.72 0-1.3-.58-1.3-1.3 0-.72.58-1.3 1.3-1.3.72 0 1.3.58 1.3 1.3 0 .72-.58 1.3-1.3 1.3m1-4.3h-2V7h2z"}),"Report"),Ece=(0,BT.A)((0,Ve.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 17h-2v-2h2zm2.07-7.75-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25"}),"Help"),xce=()=>(0,Ve.jsxs)(Xe,{sx:{mx:"auto"},children:[(0,Ve.jsx)(hS,{variant:"body1",sx:{mb:3},children:"These guidelines help ensure SideEye remains a platform where users can express themselves freely while maintaining a respectful and safe environment for all."}),(0,Ve.jsxs)(hS,{variant:"body1",sx:{mb:3,bgcolor:"info.light",p:2,borderRadius:1},children:[(0,Ve.jsx)("strong",{children:"Important Notice:"}),' SideEye uses an AI-powered moderation system that automatically scans all content against our community guidelines. Violations will result in strike points on your account, which can lead to warnings, restrictions, or account suspension. See the "Strike System" section below for more details.']}),(0,Ve.jsxs)(Zle,{children:[(0,Ve.jsx)(oce,{expandIcon:(0,Ve.jsx)(HV,{}),children:(0,Ve.jsx)(hS,{children:"Our Commitment to Safety"})}),(0,Ve.jsxs)(dce,{children:[(0,Ve.jsx)(hS,{paragraph:!0,children:"We are committed to maintaining a safe and respectful environment for all users. Our platform encourages healthy banter and shade while strictly prohibiting harassment, bullying, harmful content, misinformation, fraud, and cybercrime."}),(0,Ve.jsx)(hS,{paragraph:!0,children:"We believe in:"}),(0,Ve.jsxs)(Dk,{children:[(0,Ve.jsxs)(rR,{children:[(0,Ve.jsx)(SI,{children:(0,Ve.jsx)(GV,{})}),(0,Ve.jsx)(RI,{primary:"Protecting User Privacy",secondary:"We implement strict data protection measures and transparent privacy policies"})]}),(0,Ve.jsxs)(rR,{children:[(0,Ve.jsx)(SI,{children:(0,Ve.jsx)(hce,{})}),(0,Ve.jsx)(RI,{primary:"Mental Health Support",secondary:"We provide resources and tools to support users' wellbeing"})]}),(0,Ve.jsxs)(rR,{children:[(0,Ve.jsx)(SI,{children:(0,Ve.jsx)(pce,{})}),(0,Ve.jsx)(RI,{primary:"Inclusive Community",secondary:"We foster an environment that welcomes diverse perspectives and experiences"})]})]})]})]}),(0,Ve.jsxs)(Zle,{children:[(0,Ve.jsx)(oce,{expandIcon:(0,Ve.jsx)(fce,{}),children:(0,Ve.jsx)(hS,{children:"Prohibited Content"})}),(0,Ve.jsxs)(dce,{children:[(0,Ve.jsx)(hS,{paragraph:!0,children:"The following content is not permitted on our platform and may result in content removal, account restrictions, or termination:"}),(0,Ve.jsxs)(Dk,{children:[(0,Ve.jsxs)(rR,{children:[(0,Ve.jsx)(SI,{children:(0,Ve.jsx)(mce,{})}),(0,Ve.jsx)(RI,{primary:"Harassment & Bullying",secondary:"Targeted attacks, threats, persistent unwanted attention, or content designed to degrade or shame others"})]}),(0,Ve.jsxs)(rR,{children:[(0,Ve.jsx)(SI,{children:(0,Ve.jsx)(mce,{})}),(0,Ve.jsx)(RI,{primary:"Hate Speech",secondary:"Content that promotes discrimination, hostility, or violence against protected characteristics including race, ethnicity, national origin, religious affiliation, sexual orientation, gender, gender identity, or disability"})]}),(0,Ve.jsxs)(rR,{children:[(0,Ve.jsx)(SI,{children:(0,Ve.jsx)(mce,{})}),(0,Ve.jsx)(RI,{primary:"Misinformation",secondary:"Deliberate spreading of false information about health, science, elections, or current events that may cause public harm"})]}),(0,Ve.jsxs)(rR,{children:[(0,Ve.jsx)(SI,{children:(0,Ve.jsx)(mce,{})}),(0,Ve.jsx)(RI,{primary:"Fraud & Scams",secondary:"Financial scams, phishing attempts, pyramid schemes, deceptive business practices, or unauthorized promotions"})]}),(0,Ve.jsxs)(rR,{children:[(0,Ve.jsx)(SI,{children:(0,Ve.jsx)(mce,{})}),(0,Ve.jsx)(RI,{primary:"Cybercrime",secondary:"Hacking attempts, malware distribution, unauthorized access, or other illegal online activities"})]}),(0,Ve.jsxs)(rR,{children:[(0,Ve.jsx)(SI,{children:(0,Ve.jsx)(mce,{})}),(0,Ve.jsx)(RI,{primary:"Adult Content & Exploitation",secondary:"Sexually explicit content, non-consensual intimate imagery, sexual exploitation, or content that sexualizes minors"})]}),(0,Ve.jsxs)(rR,{children:[(0,Ve.jsx)(SI,{children:(0,Ve.jsx)(mce,{})}),(0,Ve.jsx)(RI,{primary:"Violence & Gore",secondary:"Gratuitous violence, content promoting self-harm, suicide, eating disorders, or graphic injury"})]}),(0,Ve.jsxs)(rR,{children:[(0,Ve.jsx)(SI,{children:(0,Ve.jsx)(mce,{})}),(0,Ve.jsx)(RI,{primary:"Copyright Infringement",secondary:"Content that violates copyright laws, including unauthorized use of intellectual property, especially in Vibits videos"})]})]})]})]}),(0,Ve.jsxs)(Zle,{children:[(0,Ve.jsx)(oce,{expandIcon:(0,Ve.jsx)(gce,{}),children:(0,Ve.jsx)(hS,{children:"Vibits Community Guidelines"})}),(0,Ve.jsxs)(dce,{children:[(0,Ve.jsx)(hS,{paragraph:!0,children:"Our Vibits video sharing feature has specific guidelines to ensure a safe and enjoyable experience for all users:"}),(0,Ve.jsxs)(Dk,{children:[(0,Ve.jsxs)(rR,{children:[(0,Ve.jsx)(SI,{children:(0,Ve.jsx)(vce,{})}),(0,Ve.jsx)(RI,{primary:"Content Ownership",secondary:"Only upload videos that you've created or have permission to use. Respect copyright and intellectual property rights"})]}),(0,Ve.jsxs)(rR,{children:[(0,Ve.jsx)(SI,{children:(0,Ve.jsx)(mce,{})}),(0,Ve.jsx)(RI,{primary:"Appropriate Content",secondary:"Videos must not contain nudity, pornography, violence, hate speech, dangerous activities, or illegal substances"})]}),(0,Ve.jsxs)(rR,{children:[(0,Ve.jsx)(SI,{children:(0,Ve.jsx)(yce,{})}),(0,Ve.jsx)(RI,{primary:"Privacy & Consent",secondary:"Get consent before featuring identifiable individuals in your videos, especially in private settings"})]}),(0,Ve.jsxs)(rR,{children:[(0,Ve.jsx)(SI,{children:(0,Ve.jsx)(KV,{})}),(0,Ve.jsx)(RI,{primary:"Disclosure",secondary:"Clearly disclose if your content is sponsored, contains affiliate links, or is otherwise commercial in nature"})]}),(0,Ve.jsxs)(rR,{children:[(0,Ve.jsx)(SI,{children:(0,Ve.jsx)(GV,{})}),(0,Ve.jsx)(RI,{primary:"Music & Audio",secondary:"Only use music and audio that you have rights to use or that is available through our platform's licensed library"})]})]}),(0,Ve.jsx)(hS,{paragraph:!0,children:"Vibits content is subject to both human and AI-powered moderation. Videos that violate these guidelines may be removed, and repeated violations may result in account restrictions or termination."})]})]}),(0,Ve.jsxs)(Zle,{children:[(0,Ve.jsx)(oce,{expandIcon:(0,Ve.jsx)(gce,{}),children:(0,Ve.jsx)(hS,{children:"Content Moderation"})}),(0,Ve.jsxs)(dce,{children:[(0,Ve.jsx)(hS,{paragraph:!0,children:"Our content moderation approach combines technology and human review to enforce our community guidelines fairly and consistently:"}),(0,Ve.jsxs)(Dk,{children:[(0,Ve.jsxs)(rR,{children:[(0,Ve.jsx)(SI,{children:(0,Ve.jsx)(vce,{})}),(0,Ve.jsx)(RI,{primary:"AI-Powered Detection",secondary:"Advanced algorithms detect harmful content, misinformation, and suspicious activities in real-time"})]}),(0,Ve.jsxs)(rR,{children:[(0,Ve.jsx)(SI,{children:(0,Ve.jsx)(bce,{})}),(0,Ve.jsx)(RI,{primary:"Automated Checks",secondary:"Real-time scanning for fraud, cybercrime, and policy violations using pattern recognition"})]}),(0,Ve.jsxs)(rR,{children:[(0,Ve.jsx)(SI,{children:(0,Ve.jsx)(yce,{})}),(0,Ve.jsx)(RI,{primary:"Human Review",secondary:"Trained moderators review flagged content and complex cases with cultural and contextual awareness"})]}),(0,Ve.jsxs)(rR,{children:[(0,Ve.jsx)(SI,{children:(0,Ve.jsx)(KV,{})}),(0,Ve.jsx)(RI,{primary:"Educational Approach",secondary:"First-time or minor violations may result in warnings with educational resources"})]})]}),(0,Ve.jsx)(NI,{sx:{my:2}}),(0,Ve.jsx)(hS,{variant:"h6",gutterBottom:!0,children:"Enforcement Actions"}),(0,Ve.jsx)(hS,{paragraph:!0,children:"Depending on the severity and frequency of violations, we may take the following actions:"}),(0,Ve.jsxs)("ul",{children:[(0,Ve.jsx)("li",{children:"Content removal"}),(0,Ve.jsx)("li",{children:"Warning notifications"}),(0,Ve.jsx)("li",{children:"Temporary feature restrictions"}),(0,Ve.jsx)("li",{children:"Temporary account suspension"}),(0,Ve.jsx)("li",{children:"Permanent account termination"})]})]})]}),(0,Ve.jsxs)(Zle,{children:[(0,Ve.jsx)(oce,{expandIcon:(0,Ve.jsx)(fce,{}),children:(0,Ve.jsx)(hS,{children:"Strike System"})}),(0,Ve.jsxs)(dce,{children:[(0,Ve.jsx)(hS,{paragraph:!0,children:"SideEye employs a strike system to enforce our community guidelines fairly and consistently:"}),(0,Ve.jsx)(hS,{variant:"h6",gutterBottom:!0,children:"Strike Points"}),(0,Ve.jsx)(hS,{paragraph:!0,children:"Violations of our guidelines result in strike points based on severity:"}),(0,Ve.jsxs)("ul",{children:[(0,Ve.jsxs)("li",{children:[(0,Ve.jsx)("strong",{children:"Standard violations:"})," 1 strike point"]}),(0,Ve.jsxs)("li",{children:[(0,Ve.jsx)("strong",{children:"Serious violations"})," (misinformation, fraud, violence): 1.5 strike points"]}),(0,Ve.jsxs)("li",{children:[(0,Ve.jsx)("strong",{children:"Severe violations"})," (harmful content, cybercrime, exploitation): 2 strike points"]})]}),(0,Ve.jsx)(hS,{variant:"h6",gutterBottom:!0,children:"Consequences"}),(0,Ve.jsx)(hS,{paragraph:!0,children:"As strike points accumulate, the following actions will be taken:"}),(0,Ve.jsxs)("ul",{children:[(0,Ve.jsxs)("li",{children:[(0,Ve.jsx)("strong",{children:"3+ points:"})," Warning and educational resources"]}),(0,Ve.jsxs)("li",{children:[(0,Ve.jsx)("strong",{children:"6+ points:"})," Temporary feature restrictions for 3 days"]}),(0,Ve.jsxs)("li",{children:[(0,Ve.jsx)("strong",{children:"9+ points:"})," Account suspension for 7 days"]}),(0,Ve.jsxs)("li",{children:[(0,Ve.jsx)("strong",{children:"12+ points:"})," Permanent account suspension"]})]}),(0,Ve.jsx)(hS,{variant:"h6",gutterBottom:!0,children:"Appeals"}),(0,Ve.jsx)(hS,{paragraph:!0,children:"If you believe a strike was issued in error, you can appeal through your account settings or by contacting support@sideeye.com."}),(0,Ve.jsx)(hS,{variant:"h6",gutterBottom:!0,children:"Expiration"}),(0,Ve.jsx)(hS,{paragraph:!0,children:"Strike points remain on your account for 6 months before beginning to expire."})]})]}),(0,Ve.jsxs)(Zle,{children:[(0,Ve.jsx)(oce,{expandIcon:(0,Ve.jsx)(wce,{}),children:(0,Ve.jsx)(hS,{children:"Reporting & Moderation"})}),(0,Ve.jsxs)(dce,{children:[(0,Ve.jsx)(hS,{paragraph:!0,children:"We rely on our community to help maintain a safe environment. If you encounter content that violates our guidelines, please report it immediately."}),(0,Ve.jsxs)(Dk,{children:[(0,Ve.jsxs)(rR,{children:[(0,Ve.jsx)(SI,{children:(0,Ve.jsx)(wce,{})}),(0,Ve.jsx)(RI,{primary:"How to Report",secondary:"Click the three dots menu on any post, comment, or profile and select 'Report' to flag content that violates our guidelines"})]}),(0,Ve.jsxs)(rR,{children:[(0,Ve.jsx)(SI,{children:(0,Ve.jsx)(wce,{})}),(0,Ve.jsx)(RI,{primary:"What Happens Next",secondary:"Our team reviews reports promptly, typically within 24-48 hours, and takes appropriate action based on our guidelines"})]}),(0,Ve.jsxs)(rR,{children:[(0,Ve.jsx)(SI,{children:(0,Ve.jsx)(wce,{})}),(0,Ve.jsx)(RI,{primary:"Appeals Process",secondary:"If you believe a moderation decision was made in error, you can appeal through your account settings or by contacting support@sideeye.com"})]}),(0,Ve.jsxs)(rR,{children:[(0,Ve.jsx)(SI,{children:(0,Ve.jsx)(wce,{})}),(0,Ve.jsx)(RI,{primary:"Transparency",secondary:"We publish regular reports on content moderation actions and policy enforcement to maintain accountability"})]})]})]})]}),(0,Ve.jsxs)(Zle,{children:[(0,Ve.jsx)(oce,{expandIcon:(0,Ve.jsx)(Ece,{}),children:(0,Ve.jsx)(hS,{children:"Getting Help"})}),(0,Ve.jsxs)(dce,{children:[(0,Ve.jsx)(hS,{paragraph:!0,children:"We're committed to supporting our users' wellbeing and safety both on and off the platform."}),(0,Ve.jsxs)(Dk,{children:[(0,Ve.jsxs)(rR,{children:[(0,Ve.jsx)(SI,{children:(0,Ve.jsx)(Ece,{})}),(0,Ve.jsx)(RI,{primary:"Support Resources",secondary:"Access to mental health resources, crisis helplines, and support services through our Help Center"})]}),(0,Ve.jsxs)(rR,{children:[(0,Ve.jsx)(SI,{children:(0,Ve.jsx)(Ece,{})}),(0,Ve.jsx)(RI,{primary:"Safety Tips",secondary:"Guidelines for protecting your privacy, recognizing potential scams, and staying safe online"})]}),(0,Ve.jsxs)(rR,{children:[(0,Ve.jsx)(SI,{children:(0,Ve.jsx)(Ece,{})}),(0,Ve.jsx)(RI,{primary:"Contact Us",secondary:"Reach out to our support team at support@sideeye.com for assistance with safety concerns"})]}),(0,Ve.jsxs)(rR,{children:[(0,Ve.jsx)(SI,{children:(0,Ve.jsx)(Ece,{})}),(0,Ve.jsx)(RI,{primary:"Emergency Situations",secondary:"If you're experiencing an emergency or believe someone is in immediate danger, please contact local emergency services immediately"})]})]}),(0,Ve.jsx)(hS,{variant:"body2",sx:{mt:2,fontStyle:"italic"},children:"SideEye is committed to continuously improving our safety measures and community guidelines. We regularly update our policies based on emerging threats, user feedback, and industry best practices."})]})]}),(0,Ve.jsxs)(Zle,{children:[(0,Ve.jsx)(oce,{expandIcon:(0,Ve.jsx)(HV,{}),children:(0,Ve.jsx)(hS,{children:"Vibits Security & Privacy"})}),(0,Ve.jsxs)(dce,{children:[(0,Ve.jsx)(hS,{paragraph:!0,children:"We take the security and privacy of your Vibits videos seriously. Here's how we protect your content:"}),(0,Ve.jsxs)(Dk,{children:[(0,Ve.jsxs)(rR,{children:[(0,Ve.jsx)(SI,{children:(0,Ve.jsx)(GV,{})}),(0,Ve.jsx)(RI,{primary:"Secure Storage",secondary:"All videos are stored using industry-standard encryption and secure cloud storage protocols"})]}),(0,Ve.jsxs)(rR,{children:[(0,Ve.jsx)(SI,{children:(0,Ve.jsx)(yce,{})}),(0,Ve.jsx)(RI,{primary:"Privacy Controls",secondary:"You can delete your videos at any time, and you control who can view, comment on, and share your content"})]}),(0,Ve.jsxs)(rR,{children:[(0,Ve.jsx)(SI,{children:(0,Ve.jsx)(vce,{})}),(0,Ve.jsx)(RI,{primary:"Content Protection",secondary:"We implement measures to prevent unauthorized downloading and redistribution of your videos"})]}),(0,Ve.jsxs)(rR,{children:[(0,Ve.jsx)(SI,{children:(0,Ve.jsx)(bce,{})}),(0,Ve.jsx)(RI,{primary:"Metadata Stripping",secondary:"We remove sensitive metadata from videos that could reveal your location or device information"})]}),(0,Ve.jsxs)(rR,{children:[(0,Ve.jsx)(SI,{children:(0,Ve.jsx)(mce,{})}),(0,Ve.jsx)(RI,{primary:"Report & Remove",secondary:"We provide tools to report videos that violate our guidelines, and we respond quickly to removal requests"})]})]}),(0,Ve.jsx)(hS,{paragraph:!0,children:"To enhance your privacy when using Vibits:"}),(0,Ve.jsxs)("ul",{children:[(0,Ve.jsx)("li",{children:"Be mindful of what's visible in your videos (addresses, personal documents, etc.)"}),(0,Ve.jsx)("li",{children:"Consider the environment you're filming in and who might be visible in the background"}),(0,Ve.jsx)("li",{children:"Review your videos before posting to ensure you're comfortable with all content"}),(0,Ve.jsx)("li",{children:"Use the reporting tools if you see content that violates our guidelines"})]})]})]})]}),_ce=()=>(0,Ve.jsx)(rP,{maxWidth:"lg",children:(0,Ve.jsxs)(Xe,{sx:{py:4},children:[(0,Ve.jsx)(hS,{variant:"h4",sx:{mb:3,fontWeight:"bold"},children:"Safety & Community Guidelines"}),(0,Ve.jsx)(CT,{elevation:3,sx:{p:{xs:2,md:4},borderRadius:2},children:(0,Ve.jsx)(xce,{})})]})}),Ace=(0,BT.A)((0,Ve.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8z"}),"CheckCircle"),Tce=(0,BT.A)((0,Ve.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-2h2zm0-4h-2V7h2z"}),"Error"),Sce=(0,BT.A)((0,Ve.jsx)("path",{d:"M11 7 9.6 8.4l2.6 2.6H2v2h10.2l-2.6 2.6L11 17l5-5zm9 12h-8v2h8c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-8v2h8z"}),"Login"),kce=(0,BT.A)((0,Ve.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore"),Cce=()=>{const{currentUser:e,userProfile:n}=XA(),{canViewProfile:r,canViewContent:i}=JA(),[a,o]=(0,t.useState)(!1),[s,l]=(0,t.useState)({emailVerified:!1,deviceVerified:!1,lastSecurityUpdate:null});(0,t.useEffect)((()=>{if(null===e||void 0===e||!e.uid)return;const t=mv(Jm(q_,"users",e.uid),(t=>{if(t.exists()){const n=t.data();o(n.isPrivate||!1),l({emailVerified:e.emailVerified||!1,deviceVerified:n.sourceCodeSetupComplete||!1,lastSecurityUpdate:n.lastSecurityUpdate||null})}}));return()=>t()}),[null===e||void 0===e?void 0:e.uid,null===e||void 0===e?void 0:e.emailVerified]);return(0,Ve.jsx)(rP,{maxWidth:"md",sx:{py:4},children:(0,Ve.jsxs)(CT,{elevation:3,sx:{p:4},children:[(0,Ve.jsxs)(hS,{variant:"h4",component:"h1",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[(0,Ve.jsx)(HV,{color:"primary"})," Security & Authentication"]}),(0,Ve.jsx)(HM,{severity:"info",sx:{mt:2,mb:4},children:"SideEye takes your security and privacy seriously. Our multi-layer authentication system helps protect your account and data from unauthorized access."}),(0,Ve.jsxs)(Xe,{sx:{mb:4},children:[(0,Ve.jsx)(hS,{variant:"h5",gutterBottom:!0,sx:{color:"primary.main",fontWeight:"medium"},children:"Security Status"}),(0,Ve.jsx)(NI,{sx:{mb:3}}),(0,Ve.jsxs)(jW,{direction:"row",spacing:2,sx:{mb:3},children:[(0,Ve.jsx)(eU,{icon:s.emailVerified?(0,Ve.jsx)(Ace,{}):(0,Ve.jsx)(Tce,{}),label:s.emailVerified?"Email Verified":"Email Not Verified",color:s.emailVerified?"success":"error",variant:"outlined"}),(0,Ve.jsx)(eU,{icon:s.deviceVerified?(0,Ve.jsx)(Ace,{}):(0,Ve.jsx)(Tce,{}),label:s.deviceVerified?"Device Verified":"Device Not Verified",color:s.deviceVerified?"success":"error",variant:"outlined"})]})]}),(0,Ve.jsxs)(Xe,{sx:{mb:4},children:[(0,Ve.jsx)(hS,{variant:"h5",gutterBottom:!0,sx:{color:"primary.main",fontWeight:"medium"},children:"Account Privacy"}),(0,Ve.jsx)(NI,{sx:{mb:3}}),(0,Ve.jsxs)(CT,{elevation:1,sx:{p:3},children:[(0,Ve.jsx)(zW,{control:(0,Ve.jsx)(WV,{checked:a,onChange:async()=>{if(null!==e&&void 0!==e&&e.uid)try{await hv(Jm(q_,"users",e.uid),{isPrivate:!a,lastSecurityUpdate:Av()}),wA.success("Account is now "+(a?"public":"private"))}catch(Rb){console.error("Error updating privacy settings:",Rb),wA.error("Failed to update privacy settings")}},color:"primary"}),label:(0,Ve.jsxs)(Xe,{children:[(0,Ve.jsx)(hS,{variant:"subtitle1",children:"Private Account"}),(0,Ve.jsx)(hS,{variant:"body2",color:"text.secondary",children:a?"Only approved followers can see your content":"Anyone can see your content"})]})}),(0,Ve.jsx)(HM,{severity:"info",sx:{mt:2},children:a?"When your account is private, only approved followers can see your content. New followers must send a follow request.":"When your account is public, anyone can see your content and follow you without approval."})]})]}),(0,Ve.jsxs)(Xe,{sx:{mb:4},children:[(0,Ve.jsx)(hS,{variant:"h5",gutterBottom:!0,sx:{color:"primary.main",fontWeight:"medium"},children:"Authentication Flow"}),(0,Ve.jsx)(NI,{sx:{mb:3}}),(0,Ve.jsxs)(Dk,{children:[(0,Ve.jsxs)(rR,{children:[(0,Ve.jsx)(SI,{children:(0,Ve.jsx)(Sce,{color:"primary"})}),(0,Ve.jsx)(RI,{primary:"Step 1: Email & Password Authentication",secondary:"First, you log in with your email and password. This provides the initial layer of account security."})]}),(0,Ve.jsxs)(rR,{children:[(0,Ve.jsx)(SI,{children:(0,Ve.jsx)(vce,{color:"primary"})}),(0,Ve.jsx)(RI,{primary:"Step 2: Email Verification",secondary:"New accounts must verify their email address before gaining full access to all features."})]}),(0,Ve.jsxs)(rR,{children:[(0,Ve.jsx)(SI,{children:(0,Ve.jsx)(JV,{color:"primary"})}),(0,Ve.jsx)(RI,{primary:"Step 3: Source Code Authentication",secondary:"When logging in from a new device, you must enter your 8-digit source code as an additional security measure."})]})]})]}),(0,Ve.jsxs)(Zle,{children:[(0,Ve.jsx)(oce,{expandIcon:(0,Ve.jsx)(kce,{}),children:(0,Ve.jsxs)(hS,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,Ve.jsx)(KV,{fontSize:"small"})," Browser Privacy Settings"]})}),(0,Ve.jsxs)(dce,{children:[(0,Ve.jsx)(hS,{variant:"body2",paragraph:!0,children:"Some browsers have strict privacy settings that can affect device registration:"}),(0,Ve.jsxs)(Dk,{dense:!0,children:[(0,Ve.jsx)(rR,{children:(0,Ve.jsx)(RI,{primary:"\u2022 Safari users may need to enable website data storage",secondary:"Safari > Preferences > Privacy > Website Data"})}),(0,Ve.jsx)(rR,{children:(0,Ve.jsx)(RI,{primary:"\u2022 Private/Incognito browsing may require re-authentication",secondary:"Devices won't be persistently registered in private browsing modes"})}),(0,Ve.jsx)(rR,{children:(0,Ve.jsx)(RI,{primary:"\u2022 Clearing browser data will remove device registration",secondary:"You'll need to re-authenticate with your Source Code"})})]})]})]})]})})},Ice=()=>(0,Ve.jsx)(rP,{maxWidth:"md",sx:{py:4},children:(0,Ve.jsxs)(CT,{elevation:3,sx:{p:4},children:[(0,Ve.jsx)(hS,{variant:"h4",component:"h1",gutterBottom:!0,children:"Privacy Policy"}),(0,Ve.jsxs)(hS,{variant:"body1",paragraph:!0,children:["Last updated: ",(new Date).toLocaleDateString()]}),(0,Ve.jsxs)(Xe,{sx:{mt:4},children:[(0,Ve.jsx)(hS,{variant:"h5",gutterBottom:!0,children:"1. Information We Collect"}),(0,Ve.jsx)(hS,{variant:"body1",paragraph:!0,children:"We collect information that you provide directly to us, including:"}),(0,Ve.jsxs)("ul",{children:[(0,Ve.jsx)("li",{children:"Account information (username, email, display name)"}),(0,Ve.jsx)("li",{children:"Profile information (bio, profile picture, custom avatars)"}),(0,Ve.jsx)("li",{children:"Content you post (posts, comments, likes, reposts)"}),(0,Ve.jsx)("li",{children:"Videos you upload to Vibits (including metadata and engagement data)"}),(0,Ve.jsx)("li",{children:"Connection data (followers, following relationships)"}),(0,Ve.jsx)("li",{children:"Messages and communications between users"}),(0,Ve.jsx)("li",{children:"Usage information and interaction with the platform"})]})]}),(0,Ve.jsxs)(Xe,{sx:{mt:4},children:[(0,Ve.jsx)(hS,{variant:"h5",gutterBottom:!0,children:"2. How We Use Your Information"}),(0,Ve.jsx)(hS,{variant:"body1",paragraph:!0,children:"We use the information we collect to:"}),(0,Ve.jsxs)("ul",{children:[(0,Ve.jsx)("li",{children:"Provide and maintain our services"}),(0,Ve.jsx)("li",{children:"Improve and personalize your experience"}),(0,Ve.jsx)("li",{children:"Facilitate connections between users"}),(0,Ve.jsx)("li",{children:"Display relevant content in your feed"}),(0,Ve.jsx)("li",{children:"Process and deliver messages between users"}),(0,Ve.jsx)("li",{children:"Recommend relevant videos in Vibits based on your preferences"}),(0,Ve.jsx)("li",{children:"Monitor and enforce our community guidelines"}),(0,Ve.jsx)("li",{children:"Communicate with you about updates and changes"}),(0,Ve.jsx)("li",{children:"Ensure platform safety and security"}),(0,Ve.jsx)("li",{children:"Comply with legal obligations"})]})]}),(0,Ve.jsxs)(Xe,{sx:{mt:4},children:[(0,Ve.jsx)(hS,{variant:"h5",gutterBottom:!0,children:"3. Sharing Your Information"}),(0,Ve.jsx)(hS,{variant:"body1",paragraph:!0,children:"We may share your information in the following ways:"}),(0,Ve.jsxs)("ul",{children:[(0,Ve.jsxs)("li",{children:[(0,Ve.jsx)("strong",{children:"With Other Users:"})," Your profile information, posts, videos, and content are shared with other users according to your privacy settings."]}),(0,Ve.jsxs)("li",{children:[(0,Ve.jsx)("strong",{children:"Service Providers:"})," We may share information with third-party vendors who provide services on our behalf, including video hosting and processing."]}),(0,Ve.jsxs)("li",{children:[(0,Ve.jsx)("strong",{children:"Legal Requirements:"})," We may disclose information if required by law or to protect rights, safety, and security."]}),(0,Ve.jsxs)("li",{children:[(0,Ve.jsx)("strong",{children:"Business Transfers:"})," In connection with a merger, acquisition, or sale of assets."]})]})]}),(0,Ve.jsxs)(Xe,{sx:{mt:4},children:[(0,Ve.jsx)(hS,{variant:"h5",gutterBottom:!0,children:"4. Data Security"}),(0,Ve.jsx)(hS,{variant:"body1",paragraph:!0,children:"We implement appropriate security measures to protect your personal information, including encryption of sensitive data, secure storage protocols, and regular security audits. However, no method of transmission over the internet is 100% secure, and we cannot guarantee absolute security."})]}),(0,Ve.jsxs)(Xe,{sx:{mt:4},children:[(0,Ve.jsx)(hS,{variant:"h5",gutterBottom:!0,children:"5. Your Rights"}),(0,Ve.jsx)(hS,{variant:"body1",paragraph:!0,children:"You have the right to:"}),(0,Ve.jsxs)("ul",{children:[(0,Ve.jsx)("li",{children:"Access your personal information"}),(0,Ve.jsx)("li",{children:"Correct inaccurate information"}),(0,Ve.jsx)("li",{children:"Delete your account and associated data"}),(0,Ve.jsx)("li",{children:"Delete videos you've uploaded to Vibits"}),(0,Ve.jsx)("li",{children:"Control your privacy settings and follower relationships"}),(0,Ve.jsx)("li",{children:"Restrict processing of your information"}),(0,Ve.jsx)("li",{children:"Request a data export of your content"}),(0,Ve.jsx)("li",{children:"Opt-out of marketing communications"})]})]}),(0,Ve.jsxs)(Xe,{sx:{mt:4},children:[(0,Ve.jsx)(hS,{variant:"h5",gutterBottom:!0,children:"6. Content Removal and Retention"}),(0,Ve.jsx)(hS,{variant:"body1",paragraph:!0,children:"When you delete content, it may remain in our backup systems for a limited time. Deleted content is moved to a temporary storage for 24 hours before permanent deletion, allowing for potential recovery if accidentally deleted. For Vibits videos, we may retain non-personally identifiable analytics data even after video deletion."})]}),(0,Ve.jsxs)(Xe,{sx:{mt:4},children:[(0,Ve.jsx)(hS,{variant:"h5",gutterBottom:!0,children:"7. Cookies and Tracking"}),(0,Ve.jsx)(hS,{variant:"body1",paragraph:!0,children:"We use cookies and similar tracking technologies to improve your experience, maintain login sessions, and analyze usage patterns. Please see our Cookie Policy for more details on how we use these technologies."})]}),(0,Ve.jsxs)(Xe,{sx:{mt:4},children:[(0,Ve.jsx)(hS,{variant:"h5",gutterBottom:!0,children:"8. Third-Party Links"}),(0,Ve.jsx)(hS,{variant:"body1",paragraph:!0,children:"Our service may contain links to third-party websites or services that are not owned or controlled by us. We have no control over and assume no responsibility for the content, privacy policies, or practices of any third-party services."})]}),(0,Ve.jsxs)(Xe,{sx:{mt:4},children:[(0,Ve.jsx)(hS,{variant:"h5",gutterBottom:!0,children:"9. Vibits Video Information"}),(0,Ve.jsx)(hS,{variant:"body1",paragraph:!0,children:"When you upload videos to Vibits, we collect:"}),(0,Ve.jsxs)("ul",{children:[(0,Ve.jsxs)("li",{children:[(0,Ve.jsx)("strong",{children:"Video Content:"})," The actual video file you upload"]}),(0,Ve.jsxs)("li",{children:[(0,Ve.jsx)("strong",{children:"Metadata:"})," Information such as upload time, duration, and format"]}),(0,Ve.jsxs)("li",{children:[(0,Ve.jsx)("strong",{children:"User Association:"})," Connection between your account and the video"]}),(0,Ve.jsxs)("li",{children:[(0,Ve.jsx)("strong",{children:"Engagement Data:"})," Likes, comments, shares, and viewing statistics"]}),(0,Ve.jsxs)("li",{children:[(0,Ve.jsx)("strong",{children:"Device Information:"})," Information about the device used to upload the video"]})]}),(0,Ve.jsx)(hS,{variant:"body1",paragraph:!0,children:"We use this information to provide the Vibits service, recommend videos to other users, and improve our platform. You maintain ownership of your videos and can delete them at any time, though we may retain anonymized analytics data."})]}),(0,Ve.jsxs)(Xe,{sx:{mt:4},children:[(0,Ve.jsx)(hS,{variant:"h5",gutterBottom:!0,children:"10. Children's Privacy"}),(0,Ve.jsx)(hS,{variant:"body1",paragraph:!0,children:"Our services are not intended for use by children under the age of 13. We do not knowingly collect personal information from children under 13. If you are a parent or guardian and believe your child has provided us with personal information, please contact us."})]}),(0,Ve.jsxs)(Xe,{sx:{mt:4},children:[(0,Ve.jsx)(hS,{variant:"h5",gutterBottom:!0,children:"11. Changes to This Policy"}),(0,Ve.jsx)(hS,{variant:"body1",paragraph:!0,children:'We may update this Privacy Policy from time to time. We will notify you of any changes by posting the new policy on this page and updating the "Last updated" date.'})]}),(0,Ve.jsxs)(Xe,{sx:{mt:4},children:[(0,Ve.jsx)(hS,{variant:"h5",gutterBottom:!0,children:"12. Contact Us"}),(0,Ve.jsxs)(hS,{variant:"body1",paragraph:!0,children:["If you have any questions about this Privacy Policy, please contact us at:",(0,Ve.jsx)("br",{}),"Email: privacy@sideeye.com"]})]})]})}),Rce=()=>(0,Ve.jsxs)(rP,{maxWidth:"lg",sx:{py:12},children:[(0,Ve.jsxs)(CT,{elevation:3,sx:{p:{xs:3,md:6},mb:6},children:[(0,Ve.jsx)(hS,{variant:"h1",component:"h1",sx:{textAlign:"center",fontWeight:"bold",mb:6,fontSize:{xs:"2.5rem",md:"3.5rem"},color:"primary.main",textTransform:"uppercase",letterSpacing:2},children:"About SideEye"}),(0,Ve.jsx)(NI,{sx:{my:6}}),(0,Ve.jsxs)(Xe,{sx:{mb:8},children:[(0,Ve.jsx)(hS,{variant:"h2",sx:{fontWeight:"medium",mb:4,fontSize:{xs:"2rem",md:"2.5rem"},color:"text.primary"},children:"Our Mission"}),(0,Ve.jsx)(hS,{variant:"h4",sx:{lineHeight:1.8,color:"text.secondary",fontSize:{xs:"1.25rem",md:"1.5rem"}},children:"SideEye is a moderated social media platform dedicated to creating a safe and engaging space for users to share their thoughts, connect with others, and express themselves through various forms of content. We believe in fostering meaningful conversations while maintaining a respectful and inclusive environment through our comprehensive moderation system that ensures all users can interact authentically within clear community guidelines."})]}),(0,Ve.jsxs)(Xe,{children:[(0,Ve.jsx)(hS,{variant:"h2",sx:{fontWeight:"medium",mb:6,fontSize:{xs:"2rem",md:"2.5rem"},color:"text.primary"},children:"Features"}),(0,Ve.jsxs)(Xe,{sx:{display:"flex",flexDirection:"column",gap:6},children:[(0,Ve.jsxs)(Xe,{children:[(0,Ve.jsx)(hS,{variant:"h3",sx:{fontWeight:"medium",mb:3,fontSize:{xs:"1.75rem",md:"2rem"},color:"primary.main"},children:"Side Rooms"}),(0,Ve.jsx)(hS,{variant:"h4",sx:{lineHeight:1.8,color:"text.secondary",fontSize:{xs:"1.25rem",md:"1.5rem"}},children:"Create or join interactive discussion rooms where you can connect with other users in real-time. Side Rooms support live streaming, allowing you to go live and interact directly with your audience. These rooms can be public or private, with customizable settings for membership, moderation, and content focus. Each room provides a dedicated space for conversations around specific interests or topics."})]}),(0,Ve.jsxs)(Xe,{children:[(0,Ve.jsx)(hS,{variant:"h3",sx:{fontWeight:"medium",mb:3,fontSize:{xs:"1.75rem",md:"2rem"},color:"primary.main"},children:"Feed"}),(0,Ve.jsx)(hS,{variant:"h4",sx:{lineHeight:1.8,color:"text.secondary",fontSize:{xs:"1.25rem",md:"1.5rem"}},children:"Stay connected with content from users you follow through our personalized Feed. See posts, updates, and activities from your network in real-time. Our Feed is designed to show you the most relevant content based on your interests and connections, creating a tailored experience that keeps you engaged with your community."})]}),(0,Ve.jsxs)(Xe,{children:[(0,Ve.jsx)(hS,{variant:"h3",sx:{fontWeight:"medium",mb:3,fontSize:{xs:"1.75rem",md:"2rem"},color:"primary.main"},children:"Discover"}),(0,Ve.jsx)(hS,{variant:"h4",sx:{lineHeight:1.8,color:"text.secondary",fontSize:{xs:"1.25rem",md:"1.5rem"}},children:"Explore new content, find interesting users to follow, and discover trending Side Rooms through our Discover feature. This curated exploration space helps you find content aligned with your interests and introduces you to new communities within the platform. Discover makes it easy to expand your network and find engaging discussions to join."})]}),(0,Ve.jsxs)(Xe,{children:[(0,Ve.jsx)(hS,{variant:"h3",sx:{fontWeight:"medium",mb:3,fontSize:{xs:"1.75rem",md:"2rem"},color:"primary.main"},children:"AI Moderation"}),(0,Ve.jsx)(hS,{variant:"h4",sx:{lineHeight:1.8,color:"text.secondary",fontSize:{xs:"1.25rem",md:"1.5rem"}},children:"Our advanced AI moderation system automatically scans all content against our community guidelines, detecting potential violations across multiple categories including harmful content, misinformation, fraud, cybercrime, adult content, and violence. This system helps maintain a safe environment by issuing appropriate warnings or restrictions when needed, while protecting users from harmful interactions."})]}),(0,Ve.jsxs)(Xe,{children:[(0,Ve.jsx)(hS,{variant:"h3",sx:{fontWeight:"medium",mb:3,fontSize:{xs:"1.75rem",md:"2rem"},color:"primary.main"},children:"User Expression"}),(0,Ve.jsx)(hS,{variant:"h4",sx:{lineHeight:1.8,color:"text.secondary",fontSize:{xs:"1.25rem",md:"1.5rem"}},children:"Express yourself through various reaction types including sideEye, tea, shade, and petty. Our platform encourages authentic communication with features designed for meaningful social interaction. Whether you're sharing thoughts, connecting with others, or participating in discussions, SideEye provides the tools for genuine self-expression within a respectful framework."})]}),(0,Ve.jsxs)(Xe,{children:[(0,Ve.jsx)(hS,{variant:"h3",sx:{fontWeight:"medium",mb:3,fontSize:{xs:"1.75rem",md:"2rem"},color:"primary.main"},children:"Vibits"}),(0,Ve.jsx)(hS,{variant:"h4",sx:{lineHeight:1.8,color:"text.secondary",fontSize:{xs:"1.25rem",md:"1.5rem"}},children:"Share and discover short-form videos through our Vibits feature. Create, upload, and engage with captivating video content in a vertical scrolling format. Interact with videos through likes, comments, and sharing, or follow content creators you enjoy. Vibits offers a dynamic way to express yourself creatively and connect with others through visual storytelling, with built-in moderation to ensure a safe viewing experience."})]}),(0,Ve.jsxs)(Xe,{children:[(0,Ve.jsx)(hS,{variant:"h3",sx:{fontWeight:"medium",mb:3,fontSize:{xs:"1.75rem",md:"2rem"},color:"primary.main"},children:"Live Streaming"}),(0,Ve.jsx)(hS,{variant:"h4",sx:{lineHeight:1.8,color:"text.secondary",fontSize:{xs:"1.25rem",md:"1.5rem"}},children:"Go live in Side Rooms to engage with your audience in real-time through video streaming. Host discussions, Q&A sessions, or casual hangouts with followers and community members. Our streaming feature supports interactive elements like viewer comments and reactions, creating an immersive and engaging experience for both hosts and viewers."})]})]})]})]}),(0,Ve.jsx)(Xe,{sx:{textAlign:"center",mt:8},children:(0,Ve.jsxs)(hS,{variant:"body2",color:"text.secondary",children:["\xa9 ",(new Date).getFullYear()," SideEye | Created by Enoch Asekomhe | All Rights Reserved"]})})]}),Dce=()=>(0,Ve.jsx)(rP,{maxWidth:"md",sx:{py:4},children:(0,Ve.jsxs)(CT,{elevation:3,sx:{p:4},children:[(0,Ve.jsx)(hS,{variant:"h4",component:"h1",gutterBottom:!0,children:"Terms of Service"}),(0,Ve.jsxs)(hS,{variant:"body1",paragraph:!0,children:["Last updated: ",(new Date).toLocaleDateString()]}),(0,Ve.jsxs)(Xe,{sx:{mt:4},children:[(0,Ve.jsx)(hS,{variant:"h5",gutterBottom:!0,children:"1. Acceptance of Terms"}),(0,Ve.jsx)(hS,{variant:"body1",paragraph:!0,children:"By accessing or using SideEye, you agree to be bound by these Terms of Service and all applicable laws and regulations. If you do not agree with any of these terms, you are prohibited from using or accessing this site."})]}),(0,Ve.jsxs)(Xe,{sx:{mt:4},children:[(0,Ve.jsx)(hS,{variant:"h5",gutterBottom:!0,children:"2. User Accounts"}),(0,Ve.jsx)(hS,{variant:"body1",paragraph:!0,children:"To use certain features of SideEye, you must create an account. You are responsible for:"}),(0,Ve.jsxs)("ul",{children:[(0,Ve.jsx)("li",{children:"Maintaining the confidentiality of your account information"}),(0,Ve.jsx)("li",{children:"All activities that occur under your account"}),(0,Ve.jsx)("li",{children:"Providing accurate and complete profile information"}),(0,Ve.jsx)("li",{children:"Securing your login credentials"}),(0,Ve.jsx)("li",{children:"Notifying us immediately of any unauthorized use"})]})]}),(0,Ve.jsxs)(Xe,{sx:{mt:4},children:[(0,Ve.jsx)(hS,{variant:"h5",gutterBottom:!0,children:"3. User Conduct"}),(0,Ve.jsx)(hS,{variant:"body1",paragraph:!0,children:"You agree not to:"}),(0,Ve.jsxs)("ul",{children:[(0,Ve.jsx)("li",{children:"Post or transmit any content that is unlawful, harmful, threatening, abusive, harassing, defamatory, vulgar, obscene, or otherwise objectionable"}),(0,Ve.jsx)("li",{children:"Upload videos to Vibits that contain inappropriate content, copyright infringement, or violate our Community Guidelines"}),(0,Ve.jsx)("li",{children:"Harass, bully, intimidate, or stalk other users"}),(0,Ve.jsx)("li",{children:"Impersonate any person or entity or falsely state or misrepresent your affiliation with a person or entity"}),(0,Ve.jsx)("li",{children:"Interfere with or disrupt the proper functioning of the service or servers"}),(0,Ve.jsx)("li",{children:"Attempt to gain unauthorized access to any portion of the service or other systems"}),(0,Ve.jsx)("li",{children:"Use the service for any illegal purpose or in violation of any local, state, national, or international law"}),(0,Ve.jsx)("li",{children:"Collect or store personal data about other users without their consent"}),(0,Ve.jsx)("li",{children:"Create multiple accounts to evade restrictions or limitations"}),(0,Ve.jsx)("li",{children:"Engage in spamming, phishing, or other deceptive practices"})]})]}),(0,Ve.jsxs)(Xe,{sx:{mt:4},children:[(0,Ve.jsx)(hS,{variant:"h5",gutterBottom:!0,children:"4. Content Ownership and License"}),(0,Ve.jsx)(hS,{variant:"body1",paragraph:!0,children:"You retain ownership of any content you post on SideEye, including videos uploaded to Vibits. By posting content, you grant us a worldwide, non-exclusive, royalty-free license (with the right to sublicense) to use, reproduce, process, adapt, modify, publish, transmit, display, and distribute your content in any and all media or distribution methods."}),(0,Ve.jsx)(hS,{variant:"body1",paragraph:!0,children:"This license allows us to make your content available to the rest of the world and to let others do the same. The license continues even if you stop using our services, but you can delete content from public view at any time."})]}),(0,Ve.jsxs)(Xe,{sx:{mt:4},children:[(0,Ve.jsx)(hS,{variant:"h5",gutterBottom:!0,children:"5. Vibits Video Sharing"}),(0,Ve.jsx)(hS,{variant:"body1",paragraph:!0,children:"Vibits is our video sharing feature that allows users to upload, view, like, comment on, and share short videos. When using Vibits, you agree to:"}),(0,Ve.jsxs)("ul",{children:[(0,Ve.jsx)("li",{children:"Only upload videos that you have created or for which you have the necessary rights and permissions"}),(0,Ve.jsx)("li",{children:"Not upload videos that infringe on others' intellectual property rights"}),(0,Ve.jsx)("li",{children:"Not upload videos containing explicit content, hate speech, violence, or any content that violates our Community Guidelines"}),(0,Ve.jsx)("li",{children:"Allow other users to view, like, comment on, and share your videos according to your privacy settings"}),(0,Ve.jsx)("li",{children:"Grant us the license as described in Section 4 for videos you upload to Vibits"}),(0,Ve.jsx)("li",{children:"Understand that we may remove videos that violate our policies without prior notice"})]}),(0,Ve.jsx)(hS,{variant:"body1",paragraph:!0,children:"We may provide tools to enhance or edit your videos, but we do not claim ownership of your original content. We reserve the right to display advertisements alongside or within Vibits content without providing compensation to you."})]}),(0,Ve.jsxs)(Xe,{sx:{mt:4},children:[(0,Ve.jsx)(hS,{variant:"h5",gutterBottom:!0,children:"6. Follower Relationships"}),(0,Ve.jsx)(hS,{variant:"body1",paragraph:!0,children:"SideEye allows users to follow other users and be followed by others. When you follow someone, you'll see their posts and activity on your feed. Users you follow will be able to see that you follow them. Similarly, users who follow you will be visible to you and others. You can unfollow users at any time."})]}),(0,Ve.jsxs)(Xe,{sx:{mt:4},children:[(0,Ve.jsx)(hS,{variant:"h5",gutterBottom:!0,children:"7. Direct Messages"}),(0,Ve.jsx)(hS,{variant:"body1",paragraph:!0,children:"SideEye provides a direct messaging feature for users to communicate privately. You are responsible for the content of your messages. While we strive to protect the privacy of your messages, we reserve the right to review content in the case of reported violations. We may take action if messages violate our guidelines."})]}),(0,Ve.jsxs)(Xe,{sx:{mt:4},children:[(0,Ve.jsx)(hS,{variant:"h5",gutterBottom:!0,children:"8. Content Moderation"}),(0,Ve.jsx)(hS,{variant:"body1",paragraph:!0,children:"We reserve the right to moderate content posted on our platform, including Vibits videos. We may remove, restrict, or disable access to any content or account that we determine violates these Terms or our Community Guidelines. Content moderation decisions are made in our sole discretion. Users can appeal moderation decisions through our support channels."})]}),(0,Ve.jsxs)(Xe,{sx:{mt:4},children:[(0,Ve.jsx)(hS,{variant:"h5",gutterBottom:!0,children:"9. Intellectual Property"}),(0,Ve.jsx)(hS,{variant:"body1",paragraph:!0,children:"The SideEye service and its original content, features, and functionality are and will remain the exclusive property of SideEye and its licensors. The service is protected by copyright, trademark, and other laws. Our trademarks and trade dress may not be used in connection with any product or service without the prior written consent of SideEye."})]}),(0,Ve.jsxs)(Xe,{sx:{mt:4},children:[(0,Ve.jsx)(hS,{variant:"h5",gutterBottom:!0,children:"10. Termination"}),(0,Ve.jsx)(hS,{variant:"body1",paragraph:!0,children:"We reserve the right to terminate or suspend your account and access to the service at our sole discretion, without notice, for conduct that we believe violates these Terms or is harmful to other users, us, or third parties, or for any other reason. Upon termination, your right to use the service will immediately cease."})]}),(0,Ve.jsxs)(Xe,{sx:{mt:4},children:[(0,Ve.jsx)(hS,{variant:"h5",gutterBottom:!0,children:"11. Content Removal and Recovery"}),(0,Ve.jsx)(hS,{variant:"body1",paragraph:!0,children:"When you delete content, including Vibits videos, it will be moved to a trash area for 24 hours before permanent deletion, allowing for recovery if accidentally deleted. We reserve the right to retain certain information as required by law or for legitimate business purposes."})]}),(0,Ve.jsxs)(Xe,{sx:{mt:4},children:[(0,Ve.jsx)(hS,{variant:"h5",gutterBottom:!0,children:"12. Disclaimer"}),(0,Ve.jsx)(hS,{variant:"body1",paragraph:!0,children:'The service is provided "as is" without any warranties, express or implied. We do not guarantee that the service will be uninterrupted, timely, secure, or error-free. We make no warranties or representations about the accuracy or completeness of the content provided by our users.'})]}),(0,Ve.jsxs)(Xe,{sx:{mt:4},children:[(0,Ve.jsx)(hS,{variant:"h5",gutterBottom:!0,children:"13. Limitation of Liability"}),(0,Ve.jsx)(hS,{variant:"body1",paragraph:!0,children:"In no event shall SideEye be liable for any indirect, incidental, special, consequential, or punitive damages arising out of or related to your use of the service, including but not limited to damages for loss of profits, goodwill, use, data, or other intangible losses."})]}),(0,Ve.jsxs)(Xe,{sx:{mt:4},children:[(0,Ve.jsx)(hS,{variant:"h5",gutterBottom:!0,children:"14. Indemnification"}),(0,Ve.jsx)(hS,{variant:"body1",paragraph:!0,children:"You agree to indemnify and hold harmless SideEye and its officers, directors, employees, and agents from any claims, damages, liabilities, costs, or expenses (including reasonable attorney fees) arising from your use of the service or your violation of these Terms."})]}),(0,Ve.jsxs)(Xe,{sx:{mt:4},children:[(0,Ve.jsx)(hS,{variant:"h5",gutterBottom:!0,children:"15. DMCA Compliance"}),(0,Ve.jsx)(hS,{variant:"body1",paragraph:!0,children:"SideEye respects the intellectual property rights of others. If you believe that your work has been copied in a way that constitutes copyright infringement on Vibits or elsewhere on our platform, please provide our copyright agent with the following information:"}),(0,Ve.jsxs)("ul",{children:[(0,Ve.jsx)("li",{children:"An electronic or physical signature of the person authorized to act on behalf of the copyright owner"}),(0,Ve.jsx)("li",{children:"A description of the copyrighted work that you claim has been infringed"}),(0,Ve.jsx)("li",{children:"A description of where the material that you claim is infringing is located on the site"}),(0,Ve.jsx)("li",{children:"Your address, telephone number, and email address"}),(0,Ve.jsx)("li",{children:"A statement by you that you have a good faith belief that the disputed use is not authorized by the copyright owner, its agent, or the law"}),(0,Ve.jsx)("li",{children:"A statement by you, made under penalty of perjury, that the above information is accurate and that you are the copyright owner or authorized to act on the copyright owner's behalf"})]}),(0,Ve.jsx)(hS,{variant:"body1",paragraph:!0,children:"Our copyright agent can be reached at: dmca@sideeye.com"})]}),(0,Ve.jsxs)(Xe,{sx:{mt:4},children:[(0,Ve.jsx)(hS,{variant:"h5",gutterBottom:!0,children:"16. Changes to Terms"}),(0,Ve.jsx)(hS,{variant:"body1",paragraph:!0,children:'We reserve the right to modify these Terms at any time. We will notify users of any material changes by posting the new Terms on the service and updating the "Last updated" date. Your continued use of the service after such changes constitutes your acceptance of the new Terms.'})]}),(0,Ve.jsxs)(Xe,{sx:{mt:4},children:[(0,Ve.jsx)(hS,{variant:"h5",gutterBottom:!0,children:"17. Governing Law"}),(0,Ve.jsx)(hS,{variant:"body1",paragraph:!0,children:"These Terms shall be governed by and construed in accordance with the laws of the jurisdiction in which we operate, without regard to its conflict of law provisions."})]}),(0,Ve.jsxs)(Xe,{sx:{mt:4},children:[(0,Ve.jsx)(hS,{variant:"h5",gutterBottom:!0,children:"18. Contact Information"}),(0,Ve.jsxs)(hS,{variant:"body1",paragraph:!0,children:["If you have any questions about these Terms, please contact us at:",(0,Ve.jsx)("br",{}),"Email: legal@sideeye.com"]})]})]})}),Lce=()=>(0,Ve.jsx)(rP,{maxWidth:"md",sx:{py:4},children:(0,Ve.jsxs)(CT,{elevation:3,sx:{p:4},children:[(0,Ve.jsx)(hS,{variant:"h4",component:"h1",gutterBottom:!0,children:"Cookie Policy"}),(0,Ve.jsxs)(hS,{variant:"body1",paragraph:!0,children:["Last updated: ",(new Date).toLocaleDateString()]}),(0,Ve.jsxs)(Xe,{sx:{mt:4},children:[(0,Ve.jsx)(hS,{variant:"h5",gutterBottom:!0,children:"Introduction"}),(0,Ve.jsx)(hS,{variant:"body1",paragraph:!0,children:"SideEye uses cookies and similar technologies to provide, improve, and secure our services. This Cookie Policy explains how we use cookies, what types we use, their purposes, and how you can control them."})]}),(0,Ve.jsxs)(Xe,{sx:{mt:4},children:[(0,Ve.jsx)(hS,{variant:"h5",gutterBottom:!0,children:"What Are Cookies?"}),(0,Ve.jsx)(hS,{variant:"body1",paragraph:!0,children:'Cookies are small text files that are stored on your device when you visit a website. They are widely used to make websites work more efficiently and provide information to the website owners. Cookies can be "persistent" or "session" cookies. Persistent cookies remain on your device after you close your browser, while session cookies are deleted when you close your browser.'})]}),(0,Ve.jsxs)(Xe,{sx:{mt:4},children:[(0,Ve.jsx)(hS,{variant:"h5",gutterBottom:!0,children:"Types of Cookies We Use"}),(0,Ve.jsx)(hS,{variant:"body1",paragraph:!0,children:"We use the following types of cookies for the purposes explained below:"}),(0,Ve.jsx)(hS,{variant:"h6",gutterBottom:!0,sx:{mt:2},children:"1. Essential Cookies"}),(0,Ve.jsx)(hS,{variant:"body1",paragraph:!0,children:"These cookies are necessary for the functioning of our platform and cannot be switched off. They include:"}),(0,Ve.jsxs)("ul",{children:[(0,Ve.jsx)("li",{children:"Authentication cookies to recognize you when you log in"}),(0,Ve.jsx)("li",{children:"Security cookies to prevent fraudulent activities"}),(0,Ve.jsx)("li",{children:"Session cookies to maintain your active session"})]}),(0,Ve.jsx)(hS,{variant:"h6",gutterBottom:!0,sx:{mt:2},children:"2. Performance Cookies"}),(0,Ve.jsx)(hS,{variant:"body1",paragraph:!0,children:"These cookies help us understand how visitors interact with our platform by collecting information anonymously. They include:"}),(0,Ve.jsxs)("ul",{children:[(0,Ve.jsx)("li",{children:"Analytics cookies to measure user interactions with content"}),(0,Ve.jsx)("li",{children:"Error monitoring cookies to identify and fix platform issues"}),(0,Ve.jsx)("li",{children:"Load balancing cookies to distribute traffic to our servers"})]}),(0,Ve.jsx)(hS,{variant:"h6",gutterBottom:!0,sx:{mt:2},children:"3. Functional Cookies"}),(0,Ve.jsx)(hS,{variant:"body1",paragraph:!0,children:"These cookies enable enhanced functionality and personalization. They include:"}),(0,Ve.jsxs)("ul",{children:[(0,Ve.jsx)("li",{children:"Preference cookies to remember your settings and choices"}),(0,Ve.jsx)("li",{children:"Interface customization cookies for personalized layouts"}),(0,Ve.jsx)("li",{children:"Language preference cookies"})]}),(0,Ve.jsx)(hS,{variant:"h6",gutterBottom:!0,sx:{mt:2},children:"4. Targeting/Advertising Cookies"}),(0,Ve.jsx)(hS,{variant:"body1",paragraph:!0,children:"These cookies may be set through our site by our advertising partners to build a profile of your interests. They include:"}),(0,Ve.jsxs)("ul",{children:[(0,Ve.jsx)("li",{children:"Social media cookies for content sharing and network integration"}),(0,Ve.jsx)("li",{children:"Recommendation cookies to suggest relevant content"})]})]}),(0,Ve.jsxs)(Xe,{sx:{mt:4},children:[(0,Ve.jsx)(hS,{variant:"h5",gutterBottom:!0,children:"Specific Cookies Used by SideEye"}),(0,Ve.jsx)(hS,{variant:"body1",paragraph:!0,children:"Below are some of the key cookies we use on SideEye:"}),(0,Ve.jsxs)("ul",{children:[(0,Ve.jsxs)("li",{children:[(0,Ve.jsx)("strong",{children:"sideeye_session"}),": Authentication and session management"]}),(0,Ve.jsxs)("li",{children:[(0,Ve.jsx)("strong",{children:"sideeye_preferences"}),": Stores user preferences like theme and layout settings"]}),(0,Ve.jsxs)("li",{children:[(0,Ve.jsx)("strong",{children:"sideeye_auth"}),": Maintains login state and authentication details"]}),(0,Ve.jsxs)("li",{children:[(0,Ve.jsx)("strong",{children:"sideeye_analytics"}),": Collects anonymous usage data to improve our services"]})]})]}),(0,Ve.jsxs)(Xe,{sx:{mt:4},children:[(0,Ve.jsx)(hS,{variant:"h5",gutterBottom:!0,children:"Third-Party Cookies"}),(0,Ve.jsx)(hS,{variant:"body1",paragraph:!0,children:"We may allow third parties to place cookies on your device when you visit our platform. These third parties include:"}),(0,Ve.jsxs)("ul",{children:[(0,Ve.jsxs)("li",{children:[(0,Ve.jsx)("strong",{children:"Analytics providers"})," (such as Google Analytics) to help us understand user behavior"]}),(0,Ve.jsxs)("li",{children:[(0,Ve.jsx)("strong",{children:"Social media platforms"})," (such as Twitter, Facebook) when you use social sharing features"]}),(0,Ve.jsxs)("li",{children:[(0,Ve.jsx)("strong",{children:"Security services"})," to protect against malicious activities"]})]}),(0,Ve.jsx)(hS,{variant:"body1",paragraph:!0,children:"These third parties may use cookies, web beacons, and similar technologies to collect information about your use of our platform and other websites. We do not control these third-party technologies and their use is governed by the privacy policies of these third parties."})]}),(0,Ve.jsxs)(Xe,{sx:{mt:4},children:[(0,Ve.jsx)(hS,{variant:"h5",gutterBottom:!0,children:"Managing Your Cookie Preferences"}),(0,Ve.jsx)(hS,{variant:"body1",paragraph:!0,children:"You can control and/or delete cookies as you wish. You can delete all cookies that are already on your device and you can set most browsers to prevent them from being placed. However, if you do this, you may have to manually adjust some preferences every time you visit our platform, and some services and functionalities may not work."}),(0,Ve.jsx)(hS,{variant:"body1",paragraph:!0,children:"You can manage your cookie preferences through your browser settings:"}),(0,Ve.jsxs)("ul",{children:[(0,Ve.jsxs)("li",{children:["Chrome: Settings ","->"," Privacy and Security ","->"," Cookies and other site data"]}),(0,Ve.jsxs)("li",{children:["Firefox: Options ","->"," Privacy & Security ","->"," Cookies and Site Data"]}),(0,Ve.jsxs)("li",{children:["Safari: Preferences ","->"," Privacy ","->"," Cookies and website data"]}),(0,Ve.jsxs)("li",{children:["Edge: Settings ","->"," Cookies and site permissions ","->"," Cookies and site data"]})]}),(0,Ve.jsx)(hS,{variant:"body1",paragraph:!0,children:"For more information about cookies and how to disable them, please visit www.allaboutcookies.org"})]}),(0,Ve.jsxs)(Xe,{sx:{mt:4},children:[(0,Ve.jsx)(hS,{variant:"h5",gutterBottom:!0,children:"Do Not Track"}),(0,Ve.jsx)(hS,{variant:"body1",paragraph:!0,children:'Some browsers have a "Do Not Track" feature that signals to websites that you visit that you do not want to have your online activity tracked. Given the diverse and evolving state of "Do Not Track" implementations, we may or may not respond to "Do Not Track" signals.'})]}),(0,Ve.jsxs)(Xe,{sx:{mt:4},children:[(0,Ve.jsx)(hS,{variant:"h5",gutterBottom:!0,children:"Changes to Our Cookie Policy"}),(0,Ve.jsx)(hS,{variant:"body1",paragraph:!0,children:"We may update our Cookie Policy from time to time. Any changes will be posted on this page with an updated revision date. We encourage you to review this Cookie Policy periodically to stay informed about our use of cookies."})]}),(0,Ve.jsxs)(Xe,{sx:{mt:4},children:[(0,Ve.jsx)(hS,{variant:"h5",gutterBottom:!0,children:"Contact Us"}),(0,Ve.jsxs)(hS,{variant:"body1",paragraph:!0,children:["If you have any questions about our use of cookies, please contact us at:",(0,Ve.jsx)("br",{}),"Email: privacy@sideeye.com"]})]})]})}),Pce=()=>{const e=Z(),{currentUser:n,user:r,loading:i,sendEmailVerification:a,forceCheckEmailVerification:o}=(Q(),XA()),[s,l]=(0,t.useState)(!1),[c,u]=(0,t.useState)(null),[d,h]=(0,t.useState)(!1),[p,f]=(0,t.useState)(!1),[m,g]=(0,t.useState)(null);(0,t.useEffect)((()=>{(async()=>{if(!i&&(n||r)){const t=n||r;try{const n=await o(t);console.log("Email verification status on page load:",n),n&&(console.log("User email is verified, redirecting to setup source code..."),e("/setup-source-code",{replace:!0}))}catch(mme){console.error("Error checking verification status:",mme)}}})()}),[n,r,i,e,o]);const v=async()=>{if(!(n||r))return u("Not logged in. Cannot resend verification email."),void e("/login");try{l(!0),u(null),h(!1),await a(),h(!0),u(null)}catch(c){console.error("Error sending verification email:",c),u(c.message||"Failed to send verification email. Please try again."),h(!1)}finally{l(!1)}};if(i)return(0,Ve.jsx)(rP,{maxWidth:"sm",children:(0,Ve.jsx)(Xe,{sx:{display:"flex",justifyContent:"center",mt:8},children:(0,Ve.jsx)(jL,{})})});const y=n||r,b=(null===y||void 0===y?void 0:y.email)||"your registered email";return(0,Ve.jsx)(rP,{maxWidth:"sm",children:(0,Ve.jsxs)(CT,{elevation:0,sx:{mt:8,p:4},children:[(0,Ve.jsx)(hS,{variant:"h4",gutterBottom:!0,align:"center",children:"Verify Your Email"}),(0,Ve.jsx)(hS,{variant:"body1",paragraph:!0,align:"center",children:"A verification email has been sent to:"}),(0,Ve.jsx)(hS,{variant:"h6",align:"center",gutterBottom:!0,sx:{fontWeight:"bold"},children:b}),(0,Ve.jsx)(hS,{variant:"body1",color:"text.secondary",paragraph:!0,align:"center",children:"Please check your inbox (and spam folder) and click the verification link."}),c&&(0,Ve.jsx)(HM,{severity:"error",sx:{mb:2},children:c}),d&&(0,Ve.jsx)(HM,{severity:"success",sx:{mb:2},children:"Verification email sent! Please check your inbox (and spam folder)."}),m&&!c&&(0,Ve.jsxs)(HM,{severity:"info",sx:{mb:2},children:["Verification status checked at ",m.toLocaleTimeString(),". Email is not yet verified."]}),(0,Ve.jsxs)(Xe,{sx:{display:"flex",flexDirection:"column",gap:2,mt:3},children:[(0,Ve.jsx)(Ak,{variant:"outlined",onClick:async()=>{const t=n||r;if(!t)return u("Not logged in. Cannot check verification status."),void e("/login");try{f(!0),u(null);const n=await o(t);g(new Date),console.log("Manual verification check result:",n),n?e("/setup-source-code",{replace:!0}):u("Email not verified yet. Please check your email and click the verification link.")}catch(c){console.error("Error checking verification status:",c),u(c.message||"Failed to check verification status. Please try again.")}finally{f(!1)}},disabled:s||p,color:"primary",fullWidth:!0,children:p?(0,Ve.jsx)(jL,{size:24,color:"inherit"}):"I've Verified My Email"}),(0,Ve.jsx)(Ak,{variant:"text",onClick:v,disabled:s||p,color:"secondary",fullWidth:!0,children:s?(0,Ve.jsx)(jL,{size:24,color:"inherit"}):"Resend Verification Email"})]}),(0,Ve.jsx)(NI,{sx:{my:3}}),(0,Ve.jsxs)(hS,{variant:"body2",color:"text.secondary",align:"center",children:["Having trouble? Try ",(0,Ve.jsx)(pN,{component:"button",onClick:v,children:"sending the email again"})," or ",(0,Ve.jsx)(pN,{component:"button",onClick:()=>e("/login"),children:"login with a different account"}),"."]})]})})};var Mce=n(5433),Nce=n(7813);const Oce=()=>{const{currentUser:e}=XA(),[n,r]=(0,t.useState)([]),[i,a]=(0,t.useState)(!0),[o,s]=(0,t.useState)(null),[l,c]=(0,t.useState)(null),[u,d]=(0,t.useState)(null);(0,t.useEffect)((()=>{e&&h()}),[e]);const h=async()=>{if(e)try{const t=Wg(Zm(q_,"deleted_posts"),Hg("userId","==",e.uid)),n=(await uv(t)).docs.map((e=>{var t,n;return{id:e.id,...e.data(),deletedAt:null===(t=e.data().deletedAt)||void 0===t?void 0:t.toDate(),scheduledForDeletion:null===(n=e.data().scheduledForDeletion)||void 0===n?void 0:n.toDate()}}));r(n)}catch(u){console.error("Error fetching deleted posts:",u),d("Failed to fetch deleted posts")}finally{a(!1)}};return i?(0,Ve.jsx)(Xe,{sx:{display:"flex",justifyContent:"center",mt:4},children:(0,Ve.jsx)(jL,{})}):0===n.length?(0,Ve.jsx)(hS,{sx:{mt:4,textAlign:"center"},children:"No deleted posts found"}):(0,Ve.jsx)(Xe,{sx:{mt:4},children:n.map((t=>(0,Ve.jsxs)(CT,{sx:{p:2,mb:2,borderRadius:2},children:[(0,Ve.jsxs)(Xe,{sx:{display:"flex",alignItems:"center",mb:2},children:[(0,Ve.jsx)(aS,{src:t.authorAvatar,alt:t.authorName||"Anonymous",sx:{mr:2},children:t.authorName?t.authorName.charAt(0):"A"}),(0,Ve.jsxs)(Xe,{children:[(0,Ve.jsx)(hS,{variant:"subtitle1",fontWeight:"bold",children:t.authorName||"Anonymous"}),(0,Ve.jsxs)(hS,{variant:"caption",color:"text.secondary",children:["Deleted ",fM(t.deletedAt)," ago"]})]})]}),(0,Ve.jsx)(hS,{sx:{mb:2},children:t.content}),t.imageUrl&&(0,Ve.jsx)(Xe,{component:"img",src:t.imageUrl,alt:"Post content",sx:{maxWidth:"100%",maxHeight:300,borderRadius:1,mb:2}}),t.tags&&t.tags.length>0&&(0,Ve.jsx)(Xe,{sx:{mb:2},children:t.tags.map((e=>(0,Ve.jsx)(eU,{label:`#${e}`,size:"small",sx:{mr:1,mb:1}},e)))}),(0,Ve.jsxs)(Xe,{sx:{display:"flex",justifyContent:"flex-end",gap:1},children:[(0,Ve.jsx)(Ak,{variant:"outlined",startIcon:(0,Ve.jsx)(Mce.A,{}),onClick:()=>(async t=>{if(e){s(t);try{const n=Jm(q_,"deleted_posts",t),i=(await lv(n)).data();if(!i)throw new Error("Post not found");const a=Jm(q_,"posts",t);await hv(a,{...i,deletedAt:null,scheduledForDeletion:null}),await pv(n),await hv(Jm(q_,"users",e.uid),{postCount:kv(1)}),r((e=>e.filter((e=>e.id!==t))))}catch(u){console.error("Error restoring post:",u)}finally{s(null)}}})(t.id),disabled:!!o,children:o===t.id?(0,Ve.jsx)(jL,{size:24}):"Restore"}),(0,Ve.jsx)(Ak,{variant:"outlined",color:"error",startIcon:(0,Ve.jsx)(Nce.A,{}),onClick:()=>(async t=>{if(e){c(t);try{const e=Jm(q_,"deleted_posts",t);await pv(e),r((e=>e.filter((e=>e.id!==t))))}catch(u){console.error("Error permanently deleting post:",u),d("Failed to permanently delete post")}finally{c(null)}}})(t.id),disabled:!!l,children:l===t.id?(0,Ve.jsx)(jL,{size:24}):"Delete Forever"})]})]},t.id)))})},jce=()=>(0,Ve.jsx)(rP,{maxWidth:"md",children:(0,Ve.jsxs)(Xe,{sx:{py:4},children:[(0,Ve.jsx)(hS,{variant:"h4",sx:{mb:4},children:"Trash"}),(0,Ve.jsx)(hS,{variant:"body1",color:"text.secondary",sx:{mb:4},children:"Posts in the trash will be automatically deleted after 24 hours. You can restore them before then."}),(0,Ve.jsx)(Oce,{})]})}),Fce=()=>{const{userId:e}=J(),{db:n}=UP(),[r,i]=(0,t.useState)([]),[a,o]=(0,t.useState)(!0),[s,l]=(0,t.useState)(null),{currentUser:c}=XA();return(0,t.useEffect)((()=>{(async()=>{if(n&&e){console.log("Firestore database initialized:",n),console.log("User ID:",e);try{const t=await lv(Jm(n,"users",e));if(!t.exists())return void l("User not found");const r=t.data().isPrivate||!1;if(!(!r||c&&c.uid===e))return void l("This account is private. Follow to see their followers.");const a=Zm(n,"users",e,"followers"),o=await uv(a);console.log("Followers snapshot size:",o.size);const s=o.docs.map((async e=>{const t=e.id,r=await lv(Jm(n,"users",t));if(r.exists()){return{...r.data(),id:t}}return null})),u=await Promise.all(s);i(u.filter(Boolean))}catch(mme){l("Failed to fetch followers"),console.error("Error fetching followers:",mme)}finally{o(!1)}}else console.error("Firestore database or userId is not initialized")})()}),[n,e,c]),a?(0,Ve.jsx)(Xe,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"200px",children:(0,Ve.jsx)(jL,{})}):s?(0,Ve.jsx)(Xe,{p:3,children:(0,Ve.jsx)(hS,{color:"error",children:s})}):(0,Ve.jsxs)(Xe,{p:3,children:[(0,Ve.jsx)(hS,{variant:"h5",gutterBottom:!0,children:"Followers"}),(0,Ve.jsxs)(Dk,{children:[r.map((e=>(0,Ve.jsxs)(rR,{component:Ce,to:`/profile/${e.id}`,sx:{textDecoration:"none",color:"inherit","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.04)"}},children:[(0,Ve.jsx)(lR,{children:(0,Ve.jsx)(aS,{src:e.profilePic,alt:e.username})}),(0,Ve.jsx)(RI,{primary:e.username,secondary:e.name})]},e.id))),0===r.length&&(0,Ve.jsx)(hS,{variant:"body1",color:"text.secondary",children:"No followers yet"})]})]})},Uce=()=>{const{userId:e}=J(),{db:n}=UP(),[r,i]=(0,t.useState)([]),[a,o]=(0,t.useState)(!0),[s,l]=(0,t.useState)(null);return(0,t.useEffect)((()=>{(async()=>{if(n&&e)try{const t=Zm(n,"users",e,"following"),r=await uv(t);console.log("Following snapshot size:",r.size);const a=r.docs.map((async e=>{const t=e.id,r=await lv(Jm(n,"users",t));if(r.exists()){return{...r.data(),id:t}}return null})),o=await Promise.all(a);i(o.filter(Boolean))}catch(mme){l("Failed to fetch following"),console.error("Error fetching following:",mme)}finally{o(!1)}})()}),[n,e]),a?(0,Ve.jsx)(Xe,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"200px",children:(0,Ve.jsx)(jL,{})}):s?(0,Ve.jsx)(Xe,{p:3,children:(0,Ve.jsx)(hS,{color:"error",children:s})}):(0,Ve.jsxs)(Xe,{p:3,children:[(0,Ve.jsx)(hS,{variant:"h5",gutterBottom:!0,children:"Following"}),(0,Ve.jsxs)(Dk,{children:[r.map((e=>(0,Ve.jsxs)(rR,{component:Ce,to:`/profile/${e.id}`,sx:{textDecoration:"none",color:"inherit","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.04)"}},children:[(0,Ve.jsx)(lR,{children:(0,Ve.jsx)(aS,{src:e.profilePic,alt:e.username})}),(0,Ve.jsx)(RI,{primary:e.username,secondary:e.name})]},e.id))),0===r.length&&(0,Ve.jsx)(hS,{variant:"body1",color:"text.secondary",children:"Not following anyone yet"})]})]})};function Bce(e){return(0,_T.Ay)("MuiDialogContentText",e)}(0,Ge.A)("MuiDialogContentText",["root"]);const $ce=["children","className"],Vce=(0,bT.Ay)(hS,{shouldForwardProp:e=>(0,pk.A)(e)||"classes"===e,name:"MuiDialogContentText",slot:"Root",overridesResolver:(e,t)=>t.root})({}),Wce=t.forwardRef((function(e,t){const n=(0,Ze.b)({props:e,name:"MuiDialogContentText"}),{className:r}=n,i=(0,Le.A)(n,$ce),a=(e=>{const{classes:t}=e,n=(0,yT.A)({root:["root"]},Bce,t);return(0,De.A)({},t,n)})(i);return(0,Ve.jsx)(Vce,(0,De.A)({component:"p",variant:"body1",color:"text.secondary",ref:t,ownerState:i,className:(0,Pe.A)(a.root,r)},n,{classes:a}))})),zce=Wce,Hce=(0,BT.A)([(0,Ve.jsx)("path",{d:"M12 5.99 19.53 19H4.47zM12 2 1 21h22z"},"0"),(0,Ve.jsx)("path",{d:"M13 16h-2v2h2zm0-6h-2v5h2z"},"1")],"WarningAmber"),qce=(0,BT.A)((0,Ve.jsx)("path",{d:"M6 19h4V5H6zm8-14v14h4V5z"}),"Pause"),Gce=(0,BT.A)((0,Ve.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zm2.46-7.12 1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14zM15.5 4l-1-1h-5l-1 1H5v2h14V4z"}),"DeleteForever"),Kce=()=>{const{currentUser:e,logout:n}=XA(),r=Z(),[i,a]=(0,t.useState)(!1),[o,s]=(0,t.useState)(!1),[l,c]=(0,t.useState)(!1),[u,d]=(0,t.useState)(""),[h,p]=(0,t.useState)(!1),[f,m]=(0,t.useState)(null);return(0,Ve.jsxs)(rP,{maxWidth:"md",sx:{py:4},children:[(0,Ve.jsxs)(CT,{elevation:3,sx:{p:4},children:[(0,Ve.jsxs)(hS,{variant:"h4",component:"h1",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[(0,Ve.jsx)(Hce,{color:"warning"})," Account Management"]}),(0,Ve.jsx)(HM,{severity:"info",sx:{mt:2,mb:4},children:"You have the right to control your data. You can deactivate your account temporarily or delete it permanently."}),f&&(0,Ve.jsx)(HM,{severity:"error",sx:{mt:2,mb:2},children:f}),(0,Ve.jsxs)(Xe,{sx:{mb:5},children:[(0,Ve.jsxs)(hS,{variant:"h5",gutterBottom:!0,sx:{color:"primary.main",fontWeight:"medium",display:"flex",alignItems:"center",gap:1},children:[(0,Ve.jsx)(qce,{})," Deactivate Account"]}),(0,Ve.jsx)(NI,{sx:{mb:3}}),(0,Ve.jsx)(hS,{variant:"body1",paragraph:!0,children:"Deactivating your account will temporarily hide your profile, posts, and comments from other users. Your account will remain in our systems, and you can reactivate it at any time by simply logging in again."}),(0,Ve.jsx)(hS,{variant:"body1",paragraph:!0,children:(0,Ve.jsx)("strong",{children:"What happens when you deactivate:"})}),(0,Ve.jsxs)("ul",{children:[(0,Ve.jsx)("li",{children:"Your profile becomes hidden from other users"}),(0,Ve.jsx)("li",{children:"Your posts and comments are hidden but not deleted"}),(0,Ve.jsx)("li",{children:"You won't receive notifications"}),(0,Ve.jsx)("li",{children:"You can reactivate by logging in at any time"})]}),(0,Ve.jsx)(Ak,{variant:"outlined",color:"warning",startIcon:(0,Ve.jsx)(qce,{}),onClick:()=>a(!0),sx:{mt:2},disabled:h,children:"Deactivate Account"})]}),(0,Ve.jsxs)(Xe,{children:[(0,Ve.jsxs)(hS,{variant:"h5",gutterBottom:!0,sx:{color:"error.main",fontWeight:"medium",display:"flex",alignItems:"center",gap:1},children:[(0,Ve.jsx)(Gce,{})," Delete Account Permanently"]}),(0,Ve.jsx)(NI,{sx:{mb:3}}),(0,Ve.jsx)(hS,{variant:"body1",paragraph:!0,children:"Deleting your account is permanent. All your data will be wiped from our systems and cannot be recovered."}),(0,Ve.jsx)(hS,{variant:"body1",paragraph:!0,children:(0,Ve.jsx)("strong",{children:"What happens when you delete your account:"})}),(0,Ve.jsxs)("ul",{children:[(0,Ve.jsx)("li",{children:"Your profile, posts, comments, and all other data are permanently deleted"}),(0,Ve.jsx)("li",{children:"You will lose access to your account history and connections"}),(0,Ve.jsx)("li",{children:"This action cannot be undone"}),(0,Ve.jsx)("li",{children:"If you want to use SideEye again, you'll need to create a new account"})]}),(0,Ve.jsx)(Ak,{variant:"contained",color:"error",startIcon:(0,Ve.jsx)(Gce,{}),onClick:()=>s(!0),sx:{mt:2},disabled:h,children:"Delete Account Permanently"})]})]}),(0,Ve.jsxs)(bR,{open:i,onClose:()=>a(!1),children:[(0,Ve.jsx)(N$,{children:"Confirm Account Deactivation"}),(0,Ve.jsx)(w$,{children:(0,Ve.jsx)(zce,{children:"Are you sure you want to deactivate your account? Your profile and content will be hidden until you log in again."})}),(0,Ve.jsxs)(WF,{children:[(0,Ve.jsx)(Ak,{onClick:()=>a(!1),disabled:h,children:"Cancel"}),(0,Ve.jsx)(Ak,{onClick:async()=>{if(e){p(!0),m(null);try{const t=Jm(q_,"users",e.uid);await hv(t,{isActive:!1,deactivatedAt:(new Date).toISOString()}),await n(),wA.success("Your account has been deactivated. You can reactivate it by logging in again."),r("/login")}catch(mme){console.error("Error deactivating account:",mme),m("Failed to deactivate account. Please try again.")}finally{p(!1),a(!1)}}else m("You must be logged in to deactivate your account")},color:"warning",disabled:h,startIcon:h?(0,Ve.jsx)(jL,{size:20}):null,children:h?"Deactivating...":"Deactivate Account"})]})]}),(0,Ve.jsxs)(bR,{open:o,onClose:()=>s(!1),children:[(0,Ve.jsx)(N$,{children:"Delete Account"}),(0,Ve.jsxs)(w$,{children:[(0,Ve.jsx)(zce,{sx:{mb:2},children:"To confirm account deletion, please enter your password. This will permanently delete your account and all associated data."}),(0,Ve.jsx)(xL,{autoFocus:!0,margin:"dense",label:"Password",type:"password",fullWidth:!0,value:u,onChange:e=>d(e.target.value),variant:"outlined"})]}),(0,Ve.jsxs)(WF,{children:[(0,Ve.jsx)(Ak,{onClick:()=>s(!1),disabled:h,children:"Cancel"}),(0,Ve.jsx)(Ak,{onClick:()=>c(!0),color:"error",disabled:h||!u,children:"Proceed"})]})]}),(0,Ve.jsxs)(bR,{open:l,onClose:()=>c(!1),children:[(0,Ve.jsxs)(N$,{children:[(0,Ve.jsx)(Hce,{color:"error"})," Final Warning"]}),(0,Ve.jsx)(w$,{children:(0,Ve.jsxs)(zce,{children:[(0,Ve.jsx)("strong",{children:"This action cannot be undone."})," Your account and all your data will be permanently deleted from our servers. Are you absolutely sure you want to proceed?"]})}),(0,Ve.jsxs)(WF,{children:[(0,Ve.jsx)(Ak,{onClick:()=>c(!1),disabled:h,children:"No, Keep My Account"}),(0,Ve.jsx)(Ak,{onClick:async()=>{if(e)if(u){p(!0),m(null);try{const t=ya.credential(e.email||"",u);await Ma(e,t);const n=Jm(q_,"users",e.uid);await pv(n),await async function(e){return Jt(e).delete()}(e),wA.success("Your account has been permanently deleted."),r("/login")}catch(mme){console.error("Error deleting account:",mme),"auth/wrong-password"===mme.code?m("Incorrect password. Please try again."):m("Failed to delete account. Please try again.")}finally{p(!1),c(!1),s(!1)}}else m("Please enter your password to confirm deletion");else m("You must be logged in to delete your account")},color:"error",disabled:h,startIcon:h?(0,Ve.jsx)(jL,{size:20}):(0,Ve.jsx)(Gce,{}),children:h?"Deleting...":"Yes, Delete Permanently"})]})]})]})},Yce=e=>{let{message:t="Loading..."}=e;return(0,Ve.jsxs)(Xe,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",p:3,textAlign:"center"},children:[(0,Ve.jsx)(jL,{size:60,thickness:4}),(0,Ve.jsx)(hS,{variant:"h6",sx:{mt:2},children:t})]})},Qce=e=>{let{children:t,requireAuth:n=!0,requireEmailVerification:r=!0,requireDeviceSetup:i=!0}=e;const{currentUser:a,userProfile:o,loading:s}=XA();return s?(0,Ve.jsx)(Yce,{message:"Checking authentication..."}):n&&!a?(0,Ve.jsx)(fe,{to:"/login",replace:!0}):r&&a&&!a.emailVerified?(0,Ve.jsx)(fe,{to:"/verify-email",replace:!0}):i&&a&&o&&!o.sourceCodeSetupComplete?(0,Ve.jsx)(fe,{to:"/setup-source-code",replace:!0}):(0,Ve.jsx)(Ve.Fragment,{children:t})};class Xce extends t.Component{constructor(){super(...arguments),this.state={hasError:!1,error:null},this.handleRetry=()=>{this.setState({hasError:!1,error:null})}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("Uncaught error:",e,t)}render(){var e;return this.state.hasError?(0,Ve.jsxs)(Xe,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",p:3,textAlign:"center"},children:[(0,Ve.jsx)(hS,{variant:"h4",gutterBottom:!0,children:"Oops! Something went wrong"}),(0,Ve.jsx)(hS,{variant:"body1",color:"text.secondary",paragraph:!0,children:(null===(e=this.state.error)||void 0===e?void 0:e.message)||"An unexpected error occurred"}),(0,Ve.jsx)(Ak,{variant:"contained",color:"primary",onClick:this.handleRetry,sx:{mt:2},children:"Try Again"})]}):this.props.children}}const Zce=Xce;const Jce=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{autoHideDuration:n=null,disableWindowBlurListener:r=!1,onClose:i,open:a,resumeHideDuration:o}=e,s=(0,kS.A)();t.useEffect((()=>{if(a)return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)};function e(e){e.defaultPrevented||"Escape"!==e.key&&"Esc"!==e.key||null==i||i(e,"escapeKeyDown")}}),[a,i]);const l=(0,kC.A)(((e,t)=>{null==i||i(e,t)})),c=(0,kC.A)((e=>{i&&null!=e&&s.start(e,(()=>{l(null,"timeout")}))}));t.useEffect((()=>(a&&c(n),s.clear)),[a,n,c,s]);const u=s.clear,d=t.useCallback((()=>{null!=n&&c(null!=o?o:.5*n)}),[n,o,c]),h=e=>t=>{const n=e.onFocus;null==n||n(t),u()},p=e=>t=>{const n=e.onMouseEnter;null==n||n(t),u()},f=e=>t=>{const n=e.onMouseLeave;null==n||n(t),d()};return t.useEffect((()=>{if(!r&&a)return window.addEventListener("focus",d),window.addEventListener("blur",u),()=>{window.removeEventListener("focus",d),window.removeEventListener("blur",u)}}),[r,a,d,u]),{getRootProps:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=(0,De.A)({},GT(e),GT(t));return(0,De.A)({role:"presentation"},t,n,{onBlur:(r=n,e=>{const t=r.onBlur;null==t||t(e),d()}),onFocus:h(n),onMouseEnter:p(n),onMouseLeave:f(n)});var r},onClickAway:e=>{null==i||i(e,"clickaway")}}};function eue(e){return e.substring(2).toLowerCase()}function tue(e){const{children:n,disableReactTree:r=!1,mouseEvent:i="onClick",onClickAway:a,touchEvent:o="onTouchEnd"}=e,s=t.useRef(!1),l=t.useRef(null),c=t.useRef(!1),u=t.useRef(!1);t.useEffect((()=>(setTimeout((()=>{c.current=!0}),0),()=>{c.current=!1})),[]);const d=(0,WT.A)(zk(n),l),h=(0,kC.A)((e=>{const t=u.current;u.current=!1;const n=(0,uC.A)(l.current);if(!c.current||!l.current||"clientX"in e&&function(e,t){return t.documentElement.clientWidth<e.clientX||t.documentElement.clientHeight<e.clientY}(e,n))return;if(s.current)return void(s.current=!1);let i;i=e.composedPath?e.composedPath().indexOf(l.current)>-1:!n.documentElement.contains(e.target)||l.current.contains(e.target),i||!r&&t||a(e)})),p=e=>t=>{u.current=!0;const r=n.props[e];r&&r(t)},f={ref:d};return!1!==o&&(f[o]=p(o)),t.useEffect((()=>{if(!1!==o){const e=eue(o),t=(0,uC.A)(l.current),n=()=>{s.current=!0};return t.addEventListener(e,h),t.addEventListener("touchmove",n),()=>{t.removeEventListener(e,h),t.removeEventListener("touchmove",n)}}}),[h,o]),!1!==i&&(f[i]=p(i)),t.useEffect((()=>{if(!1!==i){const e=eue(i),t=(0,uC.A)(l.current);return t.addEventListener(e,h),()=>{t.removeEventListener(e,h)}}}),[h,i]),(0,Ve.jsx)(t.Fragment,{children:t.cloneElement(n,f)})}function nue(e){return(0,_T.Ay)("MuiSnackbarContent",e)}(0,Ge.A)("MuiSnackbarContent",["root","message","action"]);const rue=["action","className","message","role"],iue=(0,bT.Ay)(CT,{name:"MuiSnackbarContent",slot:"Root",overridesResolver:(e,t)=>t.root})((e=>{let{theme:t}=e;const n="light"===t.palette.mode?.8:.98,r=(0,ET.tL)(t.palette.background.default,n);return(0,De.A)({},t.typography.body2,{color:t.vars?t.vars.palette.SnackbarContent.color:t.palette.getContrastText(r),backgroundColor:t.vars?t.vars.palette.SnackbarContent.bg:r,display:"flex",alignItems:"center",flexWrap:"wrap",padding:"6px 16px",borderRadius:(t.vars||t).shape.borderRadius,flexGrow:1,[t.breakpoints.up("sm")]:{flexGrow:"initial",minWidth:288}})})),aue=(0,bT.Ay)("div",{name:"MuiSnackbarContent",slot:"Message",overridesResolver:(e,t)=>t.message})({padding:"8px 0"}),oue=(0,bT.Ay)("div",{name:"MuiSnackbarContent",slot:"Action",overridesResolver:(e,t)=>t.action})({display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8}),sue=t.forwardRef((function(e,t){const n=(0,Ze.b)({props:e,name:"MuiSnackbarContent"}),{action:r,className:i,message:a,role:o="alert"}=n,s=(0,Le.A)(n,rue),l=n,c=(e=>{const{classes:t}=e;return(0,yT.A)({root:["root"],action:["action"],message:["message"]},nue,t)})(l);return(0,Ve.jsxs)(iue,(0,De.A)({role:o,square:!0,elevation:6,className:(0,Pe.A)(c.root,i),ownerState:l,ref:t},s,{children:[(0,Ve.jsx)(aue,{className:c.message,ownerState:l,children:a}),r?(0,Ve.jsx)(oue,{className:c.action,ownerState:l,children:r}):null]}))})),lue=sue;function cue(e){return(0,_T.Ay)("MuiSnackbar",e)}(0,Ge.A)("MuiSnackbar",["root","anchorOriginTopCenter","anchorOriginBottomCenter","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft"]);const uue=["onEnter","onExited"],due=["action","anchorOrigin","autoHideDuration","children","className","ClickAwayListenerProps","ContentProps","disableWindowBlurListener","message","onBlur","onClose","onFocus","onMouseEnter","onMouseLeave","open","resumeHideDuration","TransitionComponent","transitionDuration","TransitionProps"],hue=(0,bT.Ay)("div",{name:"MuiSnackbar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`anchorOrigin${(0,wT.A)(n.anchorOrigin.vertical)}${(0,wT.A)(n.anchorOrigin.horizontal)}`]]}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({zIndex:(t.vars||t).zIndex.snackbar,position:"fixed",display:"flex",left:8,right:8,justifyContent:"center",alignItems:"center"},"top"===n.anchorOrigin.vertical?{top:8}:{bottom:8},"left"===n.anchorOrigin.horizontal&&{justifyContent:"flex-start"},"right"===n.anchorOrigin.horizontal&&{justifyContent:"flex-end"},{[t.breakpoints.up("sm")]:(0,De.A)({},"top"===n.anchorOrigin.vertical?{top:24}:{bottom:24},"center"===n.anchorOrigin.horizontal&&{left:"50%",right:"auto",transform:"translateX(-50%)"},"left"===n.anchorOrigin.horizontal&&{left:24,right:"auto"},"right"===n.anchorOrigin.horizontal&&{right:24,left:"auto"})})})),pue=t.forwardRef((function(e,n){const r=(0,Ze.b)({props:e,name:"MuiSnackbar"}),i=tC(),a={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{action:o,anchorOrigin:{vertical:s,horizontal:l}={vertical:"bottom",horizontal:"left"},autoHideDuration:c=null,children:u,className:d,ClickAwayListenerProps:h,ContentProps:p,disableWindowBlurListener:f=!1,message:m,open:g,TransitionComponent:v=cC,transitionDuration:y=a,TransitionProps:{onEnter:b,onExited:w}={}}=r,E=(0,Le.A)(r.TransitionProps,uue),x=(0,Le.A)(r,due),_=(0,De.A)({},r,{anchorOrigin:{vertical:s,horizontal:l},autoHideDuration:c,disableWindowBlurListener:f,TransitionComponent:v,transitionDuration:y}),A=(e=>{const{classes:t,anchorOrigin:n}=e,r={root:["root",`anchorOrigin${(0,wT.A)(n.vertical)}${(0,wT.A)(n.horizontal)}`]};return(0,yT.A)(r,cue,t)})(_),{getRootProps:T,onClickAway:S}=Jce((0,De.A)({},_)),[k,C]=t.useState(!0),I=rk({elementType:hue,getSlotProps:T,externalForwardedProps:x,ownerState:_,additionalProps:{ref:n},className:[A.root,d]});return!g&&k?null:(0,Ve.jsx)(tue,(0,De.A)({onClickAway:S},h,{children:(0,Ve.jsx)(hue,(0,De.A)({},I,{children:(0,Ve.jsx)(v,(0,De.A)({appear:!0,in:g,timeout:y,direction:"top"===s?"down":"up",onEnter:(e,t)=>{C(!1),b&&b(e,t)},onExited:e=>{C(!0),w&&w(e)}},E,{children:u||(0,Ve.jsx)(lue,(0,De.A)({message:m,action:o},p))}))}))}))})),fue=pue,mue=e=>{let{children:n,maxRequests:r=10,timeWindow:i=6e4}=e;const[a,o]=(0,t.useState)(null),s=(0,t.useRef)(0),l=(0,t.useRef)(Date.now()),c=(0,t.useCallback)((()=>{const e=Date.now();return e-l.current>=i&&(s.current=0,l.current=e),s.current>=r?(o(`Rate limit exceeded. Please try again in ${Math.ceil((i-(e-l.current))/1e3)} seconds.`),!1):(s.current++,!0)}),[r,i]),u=()=>{o(null)};return(0,Ve.jsxs)(Ve.Fragment,{children:[t.Children.map(n,(e=>t.isValidElement(e)?t.cloneElement(e,{checkRateLimit:c}):e)),(0,Ve.jsx)(fue,{open:!!a,autoHideDuration:6e3,onClose:u,anchorOrigin:{vertical:"top",horizontal:"center"},children:(0,Ve.jsx)(HM,{onClose:u,severity:"error",sx:{width:"100%"},children:a})})]})},gue=()=>{const{notifications:e,markAsRead:n,deleteNotification:r,markAllAsRead:i}=(()=>{const e=(0,t.useContext)(eT);if(void 0===e)throw new Error("useNotifications must be used within a NotificationProvider");return e})(),a=Z(),o=e=>{switch(e){case"follow":return"\ud83d\udc65";case"like":return"\u2764\ufe0f";case"comment":return"\ud83d\udcac";case"tag":return"#\ufe0f\u20e3";case"mention":return"@\ufe0f";case"room_invite":return"\ud83d\udeaa";default:return"\ud83d\udce2"}};return(0,Ve.jsx)(rP,{maxWidth:"md",sx:{py:4},children:(0,Ve.jsxs)(CT,{elevation:0,sx:{p:3},children:[(0,Ve.jsxs)(Xe,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[(0,Ve.jsx)(hS,{variant:"h4",component:"h1",children:"Notifications"}),e.some((e=>!e.isRead))&&(0,Ve.jsx)(Ak,{onClick:()=>i(),children:"Mark all as read"})]}),(0,Ve.jsx)(Dk,{children:0===e.length?(0,Ve.jsx)(Xe,{sx:{textAlign:"center",py:4},children:(0,Ve.jsx)(hS,{variant:"body1",color:"text.secondary",children:"No notifications yet"})}):e.map(((e,i)=>(0,Ve.jsxs)(t.Fragment,{children:[i>0&&(0,Ve.jsx)(NI,{}),(0,Ve.jsxs)(rR,{button:!0,onClick:()=>(async e=>{e.isRead||await n(e.id);let t="/";"follow"===e.type?t=`/profile/${e.senderId}`:"like"===e.type||"comment"===e.type?t=`/post/${e.postId}`:"room_invite"===e.type&&(t=`/side-room/${e.roomId}`),a(t)})(e),sx:{backgroundColor:e.isRead?"transparent":"action.hover","&:hover":{backgroundColor:"action.hover"},mb:1,borderRadius:1},children:[(0,Ve.jsx)(lR,{children:(0,Ve.jsx)(aS,{sx:{bgcolor:"primary.main"},children:o(e.type)})}),(0,Ve.jsx)(RI,{primary:(0,Ve.jsx)(hS,{variant:"body1",sx:{fontWeight:e.isRead?"normal":"bold"},children:e.content}),secondary:gM(e.createdAt)}),(0,Ve.jsx)(ek,{edge:"end",onClick:t=>(async(e,t)=>{e.stopPropagation(),await r(t)})(t,e.id),sx:{ml:2},children:(0,Ve.jsx)(AV,{})})]})]},e.id)))})]})})},vue={randomUUID:"undefined"!==typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let yue;const bue=new Uint8Array(16);function wue(){if(!yue&&(yue="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!yue))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return yue(bue)}const Eue=[];for(let n=0;n<256;++n)Eue.push((n+256).toString(16).slice(1));function xue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Eue[e[t+0]]+Eue[e[t+1]]+Eue[e[t+2]]+Eue[e[t+3]]+"-"+Eue[e[t+4]]+Eue[e[t+5]]+"-"+Eue[e[t+6]]+Eue[e[t+7]]+"-"+Eue[e[t+8]]+Eue[e[t+9]]+"-"+Eue[e[t+10]]+Eue[e[t+11]]+Eue[e[t+12]]+Eue[e[t+13]]+Eue[e[t+14]]+Eue[e[t+15]]}const _ue=function(e,t,n){if(vue.randomUUID&&!t&&!e)return vue.randomUUID();const r=(e=e||{}).random||(e.rng||wue)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=r[e];return t}return xue(r)},Aue=()=>{const{currentUser:e,user:n,loading:r,userProfile:i}=XA(),a=Z(),[o,s]=(0,t.useState)(""),[l,c]=(0,t.useState)(""),[u,d]=(0,t.useState)(null),[h,p]=(0,t.useState)(null),[f,m]=(0,t.useState)(!1),[g,v]=(0,t.useState)("");(0,t.useEffect)((()=>{(async()=>{try{let t="";try{t=localStorage.getItem("deviceId")||""}catch(Q_){console.log("localStorage access blocked, generating new device ID")}if(!t){t=_ue();try{localStorage.setItem("deviceId",t)}catch(Q_){console.log("Failed to store device ID in localStorage")}}if(v(t),r)return;if(!(e||n))return void a("/login");null!==i&&void 0!==i&&i.sourceCodeSetupComplete&&a("/")}catch(mme){console.error("Device initialization error:",mme),d("Failed to initialize device")}})()}),[e,n,r,a,i]);return r?(0,Ve.jsx)(rP,{maxWidth:"sm",children:(0,Ve.jsx)(Xe,{display:"flex",justifyContent:"center",mt:8,children:(0,Ve.jsx)(jL,{})})}):(0,Ve.jsx)(rP,{maxWidth:"xs",children:(0,Ve.jsxs)(CT,{elevation:3,sx:{mt:8,p:4},children:[(0,Ve.jsx)(hS,{variant:"h5",align:"center",gutterBottom:!0,children:"Device Registration"}),(0,Ve.jsx)(hS,{variant:"body2",color:"text.secondary",align:"center",paragraph:!0,children:g?`Device ID: ${g.slice(0,8)}...`:"Generating device ID..."}),u&&(0,Ve.jsx)(HM,{severity:"error",sx:{mb:2},children:u}),h&&(0,Ve.jsx)(HM,{severity:"success",sx:{mb:2},children:h}),(0,Ve.jsxs)(Xe,{component:"form",onSubmit:async t=>{if(t.preventDefault(),!(/^\d{8}$/.test(o)?o===l||(d("Codes do not match"),0):(d("Source code must be exactly 8 digits"),0)))return;if(!g)return void d("Device identification failed. Please refresh the page.");const r=e||n;if(r&&q_){m(!0),d(null);try{const e=KA().genSaltSync(10),t=KA().hashSync(o,e);if(!g||"string"!==typeof g)throw new Error("Invalid device ID");const n=Jm(q_,"users",r.uid);await hv(n,{sourceCodeHash:t,sourceCodeSetupComplete:!0,registeredDevices:Tv(g),lastUpdated:Av()});const i=await lv(n);if(!i.exists()||!i.data().sourceCodeSetupComplete)throw new Error("Failed to update source code settings");localStorage.setItem("deviceId",g),p("Device registration successful! Redirecting..."),setTimeout((()=>a("/")),1500)}catch(mme){console.error("Setup error:",mme),d("permission-denied"===mme.code?"Permission denied. Please contact support.":mme.message.includes("device")?"Device registration failed. Please try again.":"Setup failed. Please try again.")}finally{m(!1)}}else d("Authentication error")},sx:{mt:2},children:[(0,Ve.jsx)(xL,{fullWidth:!0,margin:"normal",label:"8-Digit Security Code",value:o,type:"password",onChange:e=>s(e.target.value.replace(/\D/g,"").slice(0,8)),inputProps:{maxLength:8,inputMode:"numeric",pattern:"[0-9]*"},required:!0}),(0,Ve.jsx)(xL,{fullWidth:!0,margin:"normal",label:"Confirm Security Code",value:l,type:"password",onChange:e=>c(e.target.value.replace(/\D/g,"").slice(0,8)),inputProps:{maxLength:8,inputMode:"numeric",pattern:"[0-9]*"},required:!0}),(0,Ve.jsx)(Ak,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3},disabled:f||!g,children:f?(0,Ve.jsx)(jL,{size:24}):"Register This Device"})]})]})})},Tue=()=>{const{verifySourceCodeAndCompleteLogin:e,loading:n,error:r,setError:i,tempUserForSourceCode:a,currentUser:o}=XA(),s=Z(),[l,c]=(0,t.useState)("");(0,t.useEffect)((()=>{if(!o&&!a&&!n)return console.log("No temporary or current user found, redirecting to login."),void s("/login",{replace:!0});i(null)}),[o,a,s,n,i]);return(0,Ve.jsx)(rP,{maxWidth:"xs",children:(0,Ve.jsxs)(CT,{elevation:0,sx:{mt:8,p:4},children:[(0,Ve.jsx)(hS,{variant:"h5",component:"h1",gutterBottom:!0,align:"center",children:"Enter Source Code"}),(0,Ve.jsx)(hS,{variant:"body2",color:"text.secondary",align:"center",paragraph:!0,children:"Enter your 8-digit source code to complete login."}),(0,Ve.jsxs)(Xe,{component:"form",onSubmit:async t=>{t.preventDefault(),i(null),/^[0-9]{8}$/.test(l)?await e(l):i("Source code must be exactly 8 digits.")},noValidate:!0,sx:{mt:1},children:[(0,Ve.jsx)(xL,{margin:"normal",required:!0,fullWidth:!0,id:"source-code",label:"8-Digit Source Code",name:"source-code",type:"password",inputProps:{maxLength:8,pattern:"[0-9]*",inputMode:"numeric"},value:l,onChange:e=>c(e.target.value.replace(/\\D/g,"").slice(0,8)),autoFocus:!0}),r&&(0,Ve.jsx)(HM,{severity:"error",sx:{mt:2},children:r}),(0,Ve.jsx)(Ak,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},disabled:n,children:n?(0,Ve.jsx)(jL,{size:24}):"Verify Code"}),(0,Ve.jsx)(Xe,{textAlign:"center",children:(0,Ve.jsx)(pN,{component:Ce,to:"/reset-source-code",variant:"body2",sx:{mt:1},children:"Forgot Source Code?"})})]})]})})},Sue=()=>{Z();const[e,n]=(0,t.useState)(""),[r,i]=(0,t.useState)(!1),[a,o]=(0,t.useState)(null),[s,l]=(0,t.useState)(null);return(0,Ve.jsx)(rP,{maxWidth:"xs",children:(0,Ve.jsxs)(CT,{elevation:0,sx:{mt:8,p:4},children:[(0,Ve.jsx)(hS,{variant:"h5",component:"h1",gutterBottom:!0,align:"center",children:"Reset Source Code"}),(0,Ve.jsx)(hS,{variant:"body2",color:"text.secondary",align:"center",paragraph:!0,children:"Enter your account email address to receive a link to reset your 8-digit source code."}),(0,Ve.jsxs)(Xe,{component:"form",onSubmit:async t=>{if(t.preventDefault(),i(!0),o(null),l(null),!e)return o("Email is required."),void i(!1);try{await(async e=>{console.log(`Placeholder: Sending source code reset email to ${e}`),await new Promise((e=>setTimeout(e,1500)))})(e),l("If an account exists for this email, a reset link has been sent. Please check your inbox.")}catch(mme){console.error("Error sending source code reset email:",mme),o("Failed to send reset email. Please try again later.")}finally{i(!1)}},noValidate:!0,sx:{mt:1},children:[(0,Ve.jsx)(xL,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",value:e,onChange:e=>n(e.target.value),autoFocus:!0}),a&&(0,Ve.jsx)(HM,{severity:"error",sx:{mt:2},children:a}),s&&(0,Ve.jsx)(HM,{severity:"success",sx:{mt:2},children:s}),(0,Ve.jsx)(Ak,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},disabled:r,children:r?(0,Ve.jsx)(jL,{size:24}):"Send Reset Link"})]})]})})};function kue(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function Cue(e,t){zP(2,arguments);var n=HP(e),r=kue(t);return isNaN(r)?new Date(NaN):r?(n.setDate(n.getDate()+r),n):n}function Iue(e,t){zP(2,arguments);var n=HP(e).getTime(),r=kue(t);return new Date(n+r)}function Rue(e,t){zP(2,arguments);var n=HP(e),r=kue(t);if(isNaN(r))return new Date(NaN);if(!r)return n;var i=n.getDate(),a=new Date(n.getTime());return a.setMonth(n.getMonth()+r+1,0),i>=a.getDate()?a:(n.setFullYear(a.getFullYear(),a.getMonth(),i),n)}function Due(e,t){return zP(2,arguments),Rue(e,12*kue(t))}function Lue(e,t){zP(2,arguments);var n=HP(e),r=HP(t),i=qP(n,r),a=Math.abs(function(e,t){zP(2,arguments);var n=HP(e),r=HP(t);return n.getFullYear()-r.getFullYear()}(n,r));n.setFullYear(1584),r.setFullYear(1584);var o=qP(n,r)===-i,s=i*(a-Number(o));return 0===s?0:s}function Pue(e){zP(1,arguments);var t=HP(e);return t.setHours(0,0,0,0),t}function Mue(e,t){var n=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return n<0?-1:n>0?1:n}function Nue(e,t){zP(2,arguments);var n=HP(e),r=HP(t),i=Mue(n,r),a=Math.abs(function(e,t){zP(2,arguments);var n=Pue(e),r=Pue(t),i=n.getTime()-dM(n),a=r.getTime()-dM(r);return Math.round((i-a)/864e5)}(n,r));n.setDate(n.getDate()-i*a);var o=i*(a-Number(Mue(n,r)===-i));return 0===o?0:o}Math.pow(10,8);var Oue=6e4,jue=36e5;function Fue(e,t){var n,r,i,a,o,s,l,c;zP(1,arguments);var u=VP(),d=kue(null!==(n=null!==(r=null!==(i=null!==(a=null===t||void 0===t?void 0:t.weekStartsOn)&&void 0!==a?a:null===t||void 0===t||null===(o=t.locale)||void 0===o||null===(s=o.options)||void 0===s?void 0:s.weekStartsOn)&&void 0!==i?i:u.weekStartsOn)&&void 0!==r?r:null===(l=u.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.weekStartsOn)&&void 0!==n?n:0);if(!(d>=0&&d<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var h=HP(e),p=h.getDay(),f=6+(p<d?-7:0)-(p-d);return h.setDate(h.getDate()+f),h.setHours(23,59,59,999),h}function Uue(e){zP(1,arguments);var t=HP(e),n=t.getFullYear();return t.setFullYear(n+1,0,0),t.setHours(23,59,59,999),t}function Bue(e){if(zP(1,arguments),!function(e){return zP(1,arguments),e instanceof Date||"object"===WP(e)&&"[object Date]"===Object.prototype.toString.call(e)}(e)&&"number"!==typeof e)return!1;var t=HP(e);return!isNaN(Number(t))}function $ue(e,t){return zP(2,arguments),Iue(e,-kue(t))}function Vue(e){zP(1,arguments);var t=HP(e),n=t.getUTCDay(),r=(n<1?7:0)+n-1;return t.setUTCDate(t.getUTCDate()-r),t.setUTCHours(0,0,0,0),t}function Wue(e){zP(1,arguments);var t=HP(e),n=t.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var i=Vue(r),a=new Date(0);a.setUTCFullYear(n,0,4),a.setUTCHours(0,0,0,0);var o=Vue(a);return t.getTime()>=i.getTime()?n+1:t.getTime()>=o.getTime()?n:n-1}function zue(e){zP(1,arguments);var t=HP(e),n=Vue(t).getTime()-function(e){zP(1,arguments);var t=Wue(e),n=new Date(0);return n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0),Vue(n)}(t).getTime();return Math.round(n/6048e5)+1}function Hue(e,t){var n,r,i,a,o,s,l,c;zP(1,arguments);var u=VP(),d=kue(null!==(n=null!==(r=null!==(i=null!==(a=null===t||void 0===t?void 0:t.weekStartsOn)&&void 0!==a?a:null===t||void 0===t||null===(o=t.locale)||void 0===o||null===(s=o.options)||void 0===s?void 0:s.weekStartsOn)&&void 0!==i?i:u.weekStartsOn)&&void 0!==r?r:null===(l=u.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.weekStartsOn)&&void 0!==n?n:0);if(!(d>=0&&d<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var h=HP(e),p=h.getUTCDay(),f=(p<d?7:0)+p-d;return h.setUTCDate(h.getUTCDate()-f),h.setUTCHours(0,0,0,0),h}function que(e,t){var n,r,i,a,o,s,l,c;zP(1,arguments);var u=HP(e),d=u.getUTCFullYear(),h=VP(),p=kue(null!==(n=null!==(r=null!==(i=null!==(a=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==a?a:null===t||void 0===t||null===(o=t.locale)||void 0===o||null===(s=o.options)||void 0===s?void 0:s.firstWeekContainsDate)&&void 0!==i?i:h.firstWeekContainsDate)&&void 0!==r?r:null===(l=h.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.firstWeekContainsDate)&&void 0!==n?n:1);if(!(p>=1&&p<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var f=new Date(0);f.setUTCFullYear(d+1,0,p),f.setUTCHours(0,0,0,0);var m=Hue(f,t),g=new Date(0);g.setUTCFullYear(d,0,p),g.setUTCHours(0,0,0,0);var v=Hue(g,t);return u.getTime()>=m.getTime()?d+1:u.getTime()>=v.getTime()?d:d-1}function Gue(e,t){zP(1,arguments);var n=HP(e),r=Hue(n,t).getTime()-function(e,t){var n,r,i,a,o,s,l,c;zP(1,arguments);var u=VP(),d=kue(null!==(n=null!==(r=null!==(i=null!==(a=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==a?a:null===t||void 0===t||null===(o=t.locale)||void 0===o||null===(s=o.options)||void 0===s?void 0:s.firstWeekContainsDate)&&void 0!==i?i:u.firstWeekContainsDate)&&void 0!==r?r:null===(l=u.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.firstWeekContainsDate)&&void 0!==n?n:1),h=que(e,t),p=new Date(0);return p.setUTCFullYear(h,0,d),p.setUTCHours(0,0,0,0),Hue(p,t)}(n,t).getTime();return Math.round(r/6048e5)+1}function Kue(e,t){for(var n=e<0?"-":"",r=Math.abs(e).toString();r.length<t;)r="0"+r;return n+r}const Yue={y:function(e,t){var n=e.getUTCFullYear(),r=n>0?n:1-n;return Kue("yy"===t?r%100:r,t.length)},M:function(e,t){var n=e.getUTCMonth();return"M"===t?String(n+1):Kue(n+1,2)},d:function(e,t){return Kue(e.getUTCDate(),t.length)},a:function(e,t){var n=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return"am"===n?"a.m.":"p.m."}},h:function(e,t){return Kue(e.getUTCHours()%12||12,t.length)},H:function(e,t){return Kue(e.getUTCHours(),t.length)},m:function(e,t){return Kue(e.getUTCMinutes(),t.length)},s:function(e,t){return Kue(e.getUTCSeconds(),t.length)},S:function(e,t){var n=t.length,r=e.getUTCMilliseconds();return Kue(Math.floor(r*Math.pow(10,n-3)),t.length)}};var Que="midnight",Xue="noon",Zue="morning",Jue="afternoon",ede="evening",tde="night",nde={G:function(e,t,n){var r=e.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if("yo"===t){var r=e.getUTCFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return Yue.y(e,t)},Y:function(e,t,n,r){var i=que(e,r),a=i>0?i:1-i;return"YY"===t?Kue(a%100,2):"Yo"===t?n.ordinalNumber(a,{unit:"year"}):Kue(a,t.length)},R:function(e,t){return Kue(Wue(e),t.length)},u:function(e,t){return Kue(e.getUTCFullYear(),t.length)},Q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return Kue(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return Kue(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){var r=e.getUTCMonth();switch(t){case"M":case"MM":return Yue.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){var r=e.getUTCMonth();switch(t){case"L":return String(r+1);case"LL":return Kue(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){var i=Gue(e,r);return"wo"===t?n.ordinalNumber(i,{unit:"week"}):Kue(i,t.length)},I:function(e,t,n){var r=zue(e);return"Io"===t?n.ordinalNumber(r,{unit:"week"}):Kue(r,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getUTCDate(),{unit:"date"}):Yue.d(e,t)},D:function(e,t,n){var r=function(e){zP(1,arguments);var t=HP(e),n=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var r=n-t.getTime();return Math.floor(r/864e5)+1}(e);return"Do"===t?n.ordinalNumber(r,{unit:"dayOfYear"}):Kue(r,t.length)},E:function(e,t,n){var r=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){var i=e.getUTCDay(),a=(i-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(a);case"ee":return Kue(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){var i=e.getUTCDay(),a=(i-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(a);case"cc":return Kue(a,t.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,n){var r=e.getUTCDay(),i=0===r?7:r;switch(t){case"i":return String(i);case"ii":return Kue(i,t.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){var r=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,t,n){var r,i=e.getUTCHours();switch(r=12===i?Xue:0===i?Que:i/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(e,t,n){var r,i=e.getUTCHours();switch(r=i>=17?ede:i>=12?Jue:i>=4?Zue:tde,t){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){var r=e.getUTCHours()%12;return 0===r&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Yue.h(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getUTCHours(),{unit:"hour"}):Yue.H(e,t)},K:function(e,t,n){var r=e.getUTCHours()%12;return"Ko"===t?n.ordinalNumber(r,{unit:"hour"}):Kue(r,t.length)},k:function(e,t,n){var r=e.getUTCHours();return 0===r&&(r=24),"ko"===t?n.ordinalNumber(r,{unit:"hour"}):Kue(r,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):Yue.m(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):Yue.s(e,t)},S:function(e,t){return Yue.S(e,t)},X:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();if(0===i)return"Z";switch(t){case"X":return ide(i);case"XXXX":case"XX":return ade(i);default:return ade(i,":")}},x:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();switch(t){case"x":return ide(i);case"xxxx":case"xx":return ade(i);default:return ade(i,":")}},O:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+rde(i,":");default:return"GMT"+ade(i,":")}},z:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+rde(i,":");default:return"GMT"+ade(i,":")}},t:function(e,t,n,r){var i=r._originalDate||e;return Kue(Math.floor(i.getTime()/1e3),t.length)},T:function(e,t,n,r){return Kue((r._originalDate||e).getTime(),t.length)}};function rde(e,t){var n=e>0?"-":"+",r=Math.abs(e),i=Math.floor(r/60),a=r%60;if(0===a)return n+String(i);var o=t||"";return n+String(i)+o+Kue(a,2)}function ide(e,t){return e%60===0?(e>0?"-":"+")+Kue(Math.abs(e)/60,2):ade(e,t)}function ade(e,t){var n=t||"",r=e>0?"-":"+",i=Math.abs(e);return r+Kue(Math.floor(i/60),2)+n+Kue(i%60,2)}const ode=nde;var sde=function(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},lde=function(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},cde={p:lde,P:function(e,t){var n,r=e.match(/(P+)(p+)?/)||[],i=r[1],a=r[2];if(!a)return sde(e,t);switch(i){case"P":n=t.dateTime({width:"short"});break;case"PP":n=t.dateTime({width:"medium"});break;case"PPP":n=t.dateTime({width:"long"});break;default:n=t.dateTime({width:"full"})}return n.replace("{{date}}",sde(i,t)).replace("{{time}}",lde(a,t))}};const ude=cde;var dde=["D","DD"],hde=["YY","YYYY"];function pde(e){return-1!==dde.indexOf(e)}function fde(e){return-1!==hde.indexOf(e)}function mde(e,t,n){if("YYYY"===e)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("YY"===e)throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("D"===e)throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("DD"===e)throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var gde=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,vde=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,yde=/^'([^]*?)'?$/,bde=/''/g,wde=/[a-zA-Z]/;function Ede(e,t,n){var r,i,a,o,s,l,c,u,d,h,p,f,m,g,v,y,b,w;zP(2,arguments);var E=String(t),x=VP(),_=null!==(r=null!==(i=null===n||void 0===n?void 0:n.locale)&&void 0!==i?i:x.locale)&&void 0!==r?r:cM,A=kue(null!==(a=null!==(o=null!==(s=null!==(l=null===n||void 0===n?void 0:n.firstWeekContainsDate)&&void 0!==l?l:null===n||void 0===n||null===(c=n.locale)||void 0===c||null===(u=c.options)||void 0===u?void 0:u.firstWeekContainsDate)&&void 0!==s?s:x.firstWeekContainsDate)&&void 0!==o?o:null===(d=x.locale)||void 0===d||null===(h=d.options)||void 0===h?void 0:h.firstWeekContainsDate)&&void 0!==a?a:1);if(!(A>=1&&A<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var T=kue(null!==(p=null!==(f=null!==(m=null!==(g=null===n||void 0===n?void 0:n.weekStartsOn)&&void 0!==g?g:null===n||void 0===n||null===(v=n.locale)||void 0===v||null===(y=v.options)||void 0===y?void 0:y.weekStartsOn)&&void 0!==m?m:x.weekStartsOn)&&void 0!==f?f:null===(b=x.locale)||void 0===b||null===(w=b.options)||void 0===w?void 0:w.weekStartsOn)&&void 0!==p?p:0);if(!(T>=0&&T<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!_.localize)throw new RangeError("locale must contain localize property");if(!_.formatLong)throw new RangeError("locale must contain formatLong property");var S=HP(e);if(!Bue(S))throw new RangeError("Invalid time value");var k=$ue(S,dM(S)),C={firstWeekContainsDate:A,weekStartsOn:T,locale:_,_originalDate:S};return E.match(vde).map((function(e){var t=e[0];return"p"===t||"P"===t?(0,ude[t])(e,_.formatLong):e})).join("").match(gde).map((function(r){if("''"===r)return"'";var i=r[0];if("'"===i)return function(e){var t=e.match(yde);if(!t)return e;return t[1].replace(bde,"'")}(r);var a=ode[i];if(a)return null!==n&&void 0!==n&&n.useAdditionalWeekYearTokens||!fde(r)||mde(r,t,String(e)),null!==n&&void 0!==n&&n.useAdditionalDayOfYearTokens||!pde(r)||mde(r,t,String(e)),a(k,r,_.localize,C);if(i.match(wde))throw new RangeError("Format string contains an unescaped latin alphabet character `"+i+"`");return r})).join("")}function xde(e){zP(1,arguments);var t=HP(e),n=t.getFullYear(),r=t.getMonth(),i=new Date(0);return i.setFullYear(n,r+1,0),i.setHours(0,0,0,0),i.getDate()}function _de(e,t){var n,r,i,a,o,s,l,c;zP(1,arguments);var u=VP(),d=kue(null!==(n=null!==(r=null!==(i=null!==(a=null===t||void 0===t?void 0:t.weekStartsOn)&&void 0!==a?a:null===t||void 0===t||null===(o=t.locale)||void 0===o||null===(s=o.options)||void 0===s?void 0:s.weekStartsOn)&&void 0!==i?i:u.weekStartsOn)&&void 0!==r?r:null===(l=u.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.weekStartsOn)&&void 0!==n?n:0);if(!(d>=0&&d<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var h=HP(e),p=h.getDay(),f=(p<d?7:0)+p-d;return h.setDate(h.getDate()-f),h.setHours(0,0,0,0),h}function Ade(e,t){var n,r,i,a,o,s,l,c;zP(1,arguments);var u=VP(),d=kue(null!==(n=null!==(r=null!==(i=null!==(a=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==a?a:null===t||void 0===t||null===(o=t.locale)||void 0===o||null===(s=o.options)||void 0===s?void 0:s.firstWeekContainsDate)&&void 0!==i?i:u.firstWeekContainsDate)&&void 0!==r?r:null===(l=u.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.firstWeekContainsDate)&&void 0!==n?n:1),h=function(e,t){var n,r,i,a,o,s,l,c;zP(1,arguments);var u=HP(e),d=u.getFullYear(),h=VP(),p=kue(null!==(n=null!==(r=null!==(i=null!==(a=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==a?a:null===t||void 0===t||null===(o=t.locale)||void 0===o||null===(s=o.options)||void 0===s?void 0:s.firstWeekContainsDate)&&void 0!==i?i:h.firstWeekContainsDate)&&void 0!==r?r:null===(l=h.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.firstWeekContainsDate)&&void 0!==n?n:1);if(!(p>=1&&p<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var f=new Date(0);f.setFullYear(d+1,0,p),f.setHours(0,0,0,0);var m=_de(f,t),g=new Date(0);g.setFullYear(d,0,p),g.setHours(0,0,0,0);var v=_de(g,t);return u.getTime()>=m.getTime()?d+1:u.getTime()>=v.getTime()?d:d-1}(e,t),p=new Date(0);return p.setFullYear(h,0,d),p.setHours(0,0,0,0),_de(p,t)}function Tde(e,t){zP(2,arguments);var n=HP(e),r=HP(t);return n.getTime()>r.getTime()}function Sde(e,t){zP(2,arguments);var n=HP(e),r=HP(t);return n.getTime()<r.getTime()}function kde(e){zP(1,arguments);var t=HP(e);return t.setMinutes(0,0,0),t}function Cde(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Ide(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Cde(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Cde(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function Rde(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vS(e,t)}function Dde(e){return Dde=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Dde(e)}function Lde(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Lde=function(){return!!e})()}function Pde(e){var t=Lde();return function(){var n,r=Dde(e);if(t){var i=Dde(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==WP(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return gS(e)}(this,n)}}function Mde(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Nde(e){var t=function(e,t){if("object"!=WP(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=WP(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==WP(t)?t:t+""}function Ode(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Nde(r.key),r)}}function jde(e,t,n){return t&&Ode(e.prototype,t),n&&Ode(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Fde(e,t,n){return(t=Nde(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ude=function(){function e(){Mde(this,e),Fde(this,"priority",void 0),Fde(this,"subPriority",0)}return jde(e,[{key:"validate",value:function(e,t){return!0}}]),e}(),Bde=function(e){Rde(n,e);var t=Pde(n);function n(e,r,i,a,o){var s;return Mde(this,n),(s=t.call(this)).value=e,s.validateValue=r,s.setValue=i,s.priority=a,o&&(s.subPriority=o),s}return jde(n,[{key:"validate",value:function(e,t){return this.validateValue(e,this.value,t)}},{key:"set",value:function(e,t,n){return this.setValue(e,t,this.value,n)}}]),n}(Ude),$de=function(e){Rde(n,e);var t=Pde(n);function n(){var e;Mde(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return Fde(gS(e=t.call.apply(t,[this].concat(i))),"priority",10),Fde(gS(e),"subPriority",-1),e}return jde(n,[{key:"set",value:function(e,t){if(t.timestampIsSet)return e;var n=new Date(0);return n.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),n.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),n}}]),n}(Ude),Vde=function(){function e(){Mde(this,e),Fde(this,"incompatibleTokens",void 0),Fde(this,"priority",void 0),Fde(this,"subPriority",void 0)}return jde(e,[{key:"run",value:function(e,t,n,r){var i=this.parse(e,t,n,r);return i?{setter:new Bde(i.value,this.validate,this.set,this.priority,this.subPriority),rest:i.rest}:null}},{key:"validate",value:function(e,t,n){return!0}}]),e}(),Wde=function(e){Rde(n,e);var t=Pde(n);function n(){var e;Mde(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return Fde(gS(e=t.call.apply(t,[this].concat(i))),"priority",140),Fde(gS(e),"incompatibleTokens",["R","u","t","T"]),e}return jde(n,[{key:"parse",value:function(e,t,n){switch(t){case"G":case"GG":case"GGG":return n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"});case"GGGGG":return n.era(e,{width:"narrow"});default:return n.era(e,{width:"wide"})||n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"})}}},{key:"set",value:function(e,t,n){return t.era=n,e.setUTCFullYear(n,0,1),e.setUTCHours(0,0,0,0),e}}]),n}(Vde),zde=/^(1[0-2]|0?\d)/,Hde=/^(3[0-1]|[0-2]?\d)/,qde=/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,Gde=/^(5[0-3]|[0-4]?\d)/,Kde=/^(2[0-3]|[0-1]?\d)/,Yde=/^(2[0-4]|[0-1]?\d)/,Qde=/^(1[0-1]|0?\d)/,Xde=/^(1[0-2]|0?\d)/,Zde=/^[0-5]?\d/,Jde=/^[0-5]?\d/,ehe=/^\d/,the=/^\d{1,2}/,nhe=/^\d{1,3}/,rhe=/^\d{1,4}/,ihe=/^-?\d+/,ahe=/^-?\d/,ohe=/^-?\d{1,2}/,she=/^-?\d{1,3}/,lhe=/^-?\d{1,4}/,che=/^([+-])(\d{2})(\d{2})?|Z/,uhe=/^([+-])(\d{2})(\d{2})|Z/,dhe=/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,hhe=/^([+-])(\d{2}):(\d{2})|Z/,phe=/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/;function fhe(e,t){return e?{value:t(e.value),rest:e.rest}:e}function mhe(e,t){var n=t.match(e);return n?{value:parseInt(n[0],10),rest:t.slice(n[0].length)}:null}function ghe(e,t){var n=t.match(e);if(!n)return null;if("Z"===n[0])return{value:0,rest:t.slice(1)};var r="+"===n[1]?1:-1,i=n[2]?parseInt(n[2],10):0,a=n[3]?parseInt(n[3],10):0,o=n[5]?parseInt(n[5],10):0;return{value:r*(i*jue+a*Oue+1e3*o),rest:t.slice(n[0].length)}}function vhe(e){return mhe(ihe,e)}function yhe(e,t){switch(e){case 1:return mhe(ehe,t);case 2:return mhe(the,t);case 3:return mhe(nhe,t);case 4:return mhe(rhe,t);default:return mhe(new RegExp("^\\d{1,"+e+"}"),t)}}function bhe(e,t){switch(e){case 1:return mhe(ahe,t);case 2:return mhe(ohe,t);case 3:return mhe(she,t);case 4:return mhe(lhe,t);default:return mhe(new RegExp("^-?\\d{1,"+e+"}"),t)}}function whe(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;default:return 0}}function Ehe(e,t){var n,r=t>0,i=r?t:1-t;if(i<=50)n=e||100;else{var a=i+50;n=e+100*Math.floor(a/100)-(e>=a%100?100:0)}return r?n:1-n}function xhe(e){return e%400===0||e%4===0&&e%100!==0}var _he=function(e){Rde(n,e);var t=Pde(n);function n(){var e;Mde(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return Fde(gS(e=t.call.apply(t,[this].concat(i))),"priority",130),Fde(gS(e),"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"]),e}return jde(n,[{key:"parse",value:function(e,t,n){var r=function(e){return{year:e,isTwoDigitYear:"yy"===t}};switch(t){case"y":return fhe(yhe(4,e),r);case"yo":return fhe(n.ordinalNumber(e,{unit:"year"}),r);default:return fhe(yhe(t.length,e),r)}}},{key:"validate",value:function(e,t){return t.isTwoDigitYear||t.year>0}},{key:"set",value:function(e,t,n){var r=e.getUTCFullYear();if(n.isTwoDigitYear){var i=Ehe(n.year,r);return e.setUTCFullYear(i,0,1),e.setUTCHours(0,0,0,0),e}var a="era"in t&&1!==t.era?1-n.year:n.year;return e.setUTCFullYear(a,0,1),e.setUTCHours(0,0,0,0),e}}]),n}(Vde),Ahe=function(e){Rde(n,e);var t=Pde(n);function n(){var e;Mde(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return Fde(gS(e=t.call.apply(t,[this].concat(i))),"priority",130),Fde(gS(e),"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"]),e}return jde(n,[{key:"parse",value:function(e,t,n){var r=function(e){return{year:e,isTwoDigitYear:"YY"===t}};switch(t){case"Y":return fhe(yhe(4,e),r);case"Yo":return fhe(n.ordinalNumber(e,{unit:"year"}),r);default:return fhe(yhe(t.length,e),r)}}},{key:"validate",value:function(e,t){return t.isTwoDigitYear||t.year>0}},{key:"set",value:function(e,t,n,r){var i=que(e,r);if(n.isTwoDigitYear){var a=Ehe(n.year,i);return e.setUTCFullYear(a,0,r.firstWeekContainsDate),e.setUTCHours(0,0,0,0),Hue(e,r)}var o="era"in t&&1!==t.era?1-n.year:n.year;return e.setUTCFullYear(o,0,r.firstWeekContainsDate),e.setUTCHours(0,0,0,0),Hue(e,r)}}]),n}(Vde),The=function(e){Rde(n,e);var t=Pde(n);function n(){var e;Mde(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return Fde(gS(e=t.call.apply(t,[this].concat(i))),"priority",130),Fde(gS(e),"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]),e}return jde(n,[{key:"parse",value:function(e,t){return bhe("R"===t?4:t.length,e)}},{key:"set",value:function(e,t,n){var r=new Date(0);return r.setUTCFullYear(n,0,4),r.setUTCHours(0,0,0,0),Vue(r)}}]),n}(Vde),She=function(e){Rde(n,e);var t=Pde(n);function n(){var e;Mde(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return Fde(gS(e=t.call.apply(t,[this].concat(i))),"priority",130),Fde(gS(e),"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"]),e}return jde(n,[{key:"parse",value:function(e,t){return bhe("u"===t?4:t.length,e)}},{key:"set",value:function(e,t,n){return e.setUTCFullYear(n,0,1),e.setUTCHours(0,0,0,0),e}}]),n}(Vde),khe=function(e){Rde(n,e);var t=Pde(n);function n(){var e;Mde(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return Fde(gS(e=t.call.apply(t,[this].concat(i))),"priority",120),Fde(gS(e),"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]),e}return jde(n,[{key:"parse",value:function(e,t,n){switch(t){case"Q":case"QQ":return yhe(t.length,e);case"Qo":return n.ordinalNumber(e,{unit:"quarter"});case"QQQ":return n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return n.quarter(e,{width:"narrow",context:"formatting"});default:return n.quarter(e,{width:"wide",context:"formatting"})||n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=1&&t<=4}},{key:"set",value:function(e,t,n){return e.setUTCMonth(3*(n-1),1),e.setUTCHours(0,0,0,0),e}}]),n}(Vde),Che=function(e){Rde(n,e);var t=Pde(n);function n(){var e;Mde(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return Fde(gS(e=t.call.apply(t,[this].concat(i))),"priority",120),Fde(gS(e),"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]),e}return jde(n,[{key:"parse",value:function(e,t,n){switch(t){case"q":case"qq":return yhe(t.length,e);case"qo":return n.ordinalNumber(e,{unit:"quarter"});case"qqq":return n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return n.quarter(e,{width:"narrow",context:"standalone"});default:return n.quarter(e,{width:"wide",context:"standalone"})||n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(e,t){return t>=1&&t<=4}},{key:"set",value:function(e,t,n){return e.setUTCMonth(3*(n-1),1),e.setUTCHours(0,0,0,0),e}}]),n}(Vde),Ihe=function(e){Rde(n,e);var t=Pde(n);function n(){var e;Mde(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return Fde(gS(e=t.call.apply(t,[this].concat(i))),"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]),Fde(gS(e),"priority",110),e}return jde(n,[{key:"parse",value:function(e,t,n){var r=function(e){return e-1};switch(t){case"M":return fhe(mhe(zde,e),r);case"MM":return fhe(yhe(2,e),r);case"Mo":return fhe(n.ordinalNumber(e,{unit:"month"}),r);case"MMM":return n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return n.month(e,{width:"narrow",context:"formatting"});default:return n.month(e,{width:"wide",context:"formatting"})||n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=11}},{key:"set",value:function(e,t,n){return e.setUTCMonth(n,1),e.setUTCHours(0,0,0,0),e}}]),n}(Vde),Rhe=function(e){Rde(n,e);var t=Pde(n);function n(){var e;Mde(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return Fde(gS(e=t.call.apply(t,[this].concat(i))),"priority",110),Fde(gS(e),"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]),e}return jde(n,[{key:"parse",value:function(e,t,n){var r=function(e){return e-1};switch(t){case"L":return fhe(mhe(zde,e),r);case"LL":return fhe(yhe(2,e),r);case"Lo":return fhe(n.ordinalNumber(e,{unit:"month"}),r);case"LLL":return n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return n.month(e,{width:"narrow",context:"standalone"});default:return n.month(e,{width:"wide",context:"standalone"})||n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=11}},{key:"set",value:function(e,t,n){return e.setUTCMonth(n,1),e.setUTCHours(0,0,0,0),e}}]),n}(Vde);var Dhe=function(e){Rde(n,e);var t=Pde(n);function n(){var e;Mde(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return Fde(gS(e=t.call.apply(t,[this].concat(i))),"priority",100),Fde(gS(e),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"]),e}return jde(n,[{key:"parse",value:function(e,t,n){switch(t){case"w":return mhe(Gde,e);case"wo":return n.ordinalNumber(e,{unit:"week"});default:return yhe(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=53}},{key:"set",value:function(e,t,n,r){return Hue(function(e,t,n){zP(2,arguments);var r=HP(e),i=kue(t),a=Gue(r,n)-i;return r.setUTCDate(r.getUTCDate()-7*a),r}(e,n,r),r)}}]),n}(Vde);var Lhe=function(e){Rde(n,e);var t=Pde(n);function n(){var e;Mde(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return Fde(gS(e=t.call.apply(t,[this].concat(i))),"priority",100),Fde(gS(e),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]),e}return jde(n,[{key:"parse",value:function(e,t,n){switch(t){case"I":return mhe(Gde,e);case"Io":return n.ordinalNumber(e,{unit:"week"});default:return yhe(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=53}},{key:"set",value:function(e,t,n){return Vue(function(e,t){zP(2,arguments);var n=HP(e),r=kue(t),i=zue(n)-r;return n.setUTCDate(n.getUTCDate()-7*i),n}(e,n))}}]),n}(Vde),Phe=[31,28,31,30,31,30,31,31,30,31,30,31],Mhe=[31,29,31,30,31,30,31,31,30,31,30,31],Nhe=function(e){Rde(n,e);var t=Pde(n);function n(){var e;Mde(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return Fde(gS(e=t.call.apply(t,[this].concat(i))),"priority",90),Fde(gS(e),"subPriority",1),Fde(gS(e),"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"]),e}return jde(n,[{key:"parse",value:function(e,t,n){switch(t){case"d":return mhe(Hde,e);case"do":return n.ordinalNumber(e,{unit:"date"});default:return yhe(t.length,e)}}},{key:"validate",value:function(e,t){var n=xhe(e.getUTCFullYear()),r=e.getUTCMonth();return n?t>=1&&t<=Mhe[r]:t>=1&&t<=Phe[r]}},{key:"set",value:function(e,t,n){return e.setUTCDate(n),e.setUTCHours(0,0,0,0),e}}]),n}(Vde),Ohe=function(e){Rde(n,e);var t=Pde(n);function n(){var e;Mde(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return Fde(gS(e=t.call.apply(t,[this].concat(i))),"priority",90),Fde(gS(e),"subpriority",1),Fde(gS(e),"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]),e}return jde(n,[{key:"parse",value:function(e,t,n){switch(t){case"D":case"DD":return mhe(qde,e);case"Do":return n.ordinalNumber(e,{unit:"date"});default:return yhe(t.length,e)}}},{key:"validate",value:function(e,t){return xhe(e.getUTCFullYear())?t>=1&&t<=366:t>=1&&t<=365}},{key:"set",value:function(e,t,n){return e.setUTCMonth(0,n),e.setUTCHours(0,0,0,0),e}}]),n}(Vde);function jhe(e,t,n){var r,i,a,o,s,l,c,u;zP(2,arguments);var d=VP(),h=kue(null!==(r=null!==(i=null!==(a=null!==(o=null===n||void 0===n?void 0:n.weekStartsOn)&&void 0!==o?o:null===n||void 0===n||null===(s=n.locale)||void 0===s||null===(l=s.options)||void 0===l?void 0:l.weekStartsOn)&&void 0!==a?a:d.weekStartsOn)&&void 0!==i?i:null===(c=d.locale)||void 0===c||null===(u=c.options)||void 0===u?void 0:u.weekStartsOn)&&void 0!==r?r:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var p=HP(e),f=kue(t),m=((f%7+7)%7<h?7:0)+f-p.getUTCDay();return p.setUTCDate(p.getUTCDate()+m),p}var Fhe=function(e){Rde(n,e);var t=Pde(n);function n(){var e;Mde(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return Fde(gS(e=t.call.apply(t,[this].concat(i))),"priority",90),Fde(gS(e),"incompatibleTokens",["D","i","e","c","t","T"]),e}return jde(n,[{key:"parse",value:function(e,t,n){switch(t){case"E":case"EE":case"EEE":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return n.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=6}},{key:"set",value:function(e,t,n,r){return(e=jhe(e,n,r)).setUTCHours(0,0,0,0),e}}]),n}(Vde),Uhe=function(e){Rde(n,e);var t=Pde(n);function n(){var e;Mde(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return Fde(gS(e=t.call.apply(t,[this].concat(i))),"priority",90),Fde(gS(e),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]),e}return jde(n,[{key:"parse",value:function(e,t,n,r){var i=function(e){var t=7*Math.floor((e-1)/7);return(e+r.weekStartsOn+6)%7+t};switch(t){case"e":case"ee":return fhe(yhe(t.length,e),i);case"eo":return fhe(n.ordinalNumber(e,{unit:"day"}),i);case"eee":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"eeeee":return n.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=6}},{key:"set",value:function(e,t,n,r){return(e=jhe(e,n,r)).setUTCHours(0,0,0,0),e}}]),n}(Vde),Bhe=function(e){Rde(n,e);var t=Pde(n);function n(){var e;Mde(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return Fde(gS(e=t.call.apply(t,[this].concat(i))),"priority",90),Fde(gS(e),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]),e}return jde(n,[{key:"parse",value:function(e,t,n,r){var i=function(e){var t=7*Math.floor((e-1)/7);return(e+r.weekStartsOn+6)%7+t};switch(t){case"c":case"cc":return fhe(yhe(t.length,e),i);case"co":return fhe(n.ordinalNumber(e,{unit:"day"}),i);case"ccc":return n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});case"ccccc":return n.day(e,{width:"narrow",context:"standalone"});case"cccccc":return n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});default:return n.day(e,{width:"wide",context:"standalone"})||n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=6}},{key:"set",value:function(e,t,n,r){return(e=jhe(e,n,r)).setUTCHours(0,0,0,0),e}}]),n}(Vde);var $he=function(e){Rde(n,e);var t=Pde(n);function n(){var e;Mde(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return Fde(gS(e=t.call.apply(t,[this].concat(i))),"priority",90),Fde(gS(e),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]),e}return jde(n,[{key:"parse",value:function(e,t,n){var r=function(e){return 0===e?7:e};switch(t){case"i":case"ii":return yhe(t.length,e);case"io":return n.ordinalNumber(e,{unit:"day"});case"iii":return fhe(n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),r);case"iiiii":return fhe(n.day(e,{width:"narrow",context:"formatting"}),r);case"iiiiii":return fhe(n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),r);default:return fhe(n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),r)}}},{key:"validate",value:function(e,t){return t>=1&&t<=7}},{key:"set",value:function(e,t,n){return e=function(e,t){zP(2,arguments);var n=kue(t);n%7===0&&(n-=7);var r=HP(e),i=((n%7+7)%7<1?7:0)+n-r.getUTCDay();return r.setUTCDate(r.getUTCDate()+i),r}(e,n),e.setUTCHours(0,0,0,0),e}}]),n}(Vde),Vhe=function(e){Rde(n,e);var t=Pde(n);function n(){var e;Mde(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return Fde(gS(e=t.call.apply(t,[this].concat(i))),"priority",80),Fde(gS(e),"incompatibleTokens",["b","B","H","k","t","T"]),e}return jde(n,[{key:"parse",value:function(e,t,n){switch(t){case"a":case"aa":case"aaa":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(e,t,n){return e.setUTCHours(whe(n),0,0,0),e}}]),n}(Vde),Whe=function(e){Rde(n,e);var t=Pde(n);function n(){var e;Mde(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return Fde(gS(e=t.call.apply(t,[this].concat(i))),"priority",80),Fde(gS(e),"incompatibleTokens",["a","B","H","k","t","T"]),e}return jde(n,[{key:"parse",value:function(e,t,n){switch(t){case"b":case"bb":case"bbb":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(e,t,n){return e.setUTCHours(whe(n),0,0,0),e}}]),n}(Vde),zhe=function(e){Rde(n,e);var t=Pde(n);function n(){var e;Mde(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return Fde(gS(e=t.call.apply(t,[this].concat(i))),"priority",80),Fde(gS(e),"incompatibleTokens",["a","b","t","T"]),e}return jde(n,[{key:"parse",value:function(e,t,n){switch(t){case"B":case"BB":case"BBB":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(e,t,n){return e.setUTCHours(whe(n),0,0,0),e}}]),n}(Vde),Hhe=function(e){Rde(n,e);var t=Pde(n);function n(){var e;Mde(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return Fde(gS(e=t.call.apply(t,[this].concat(i))),"priority",70),Fde(gS(e),"incompatibleTokens",["H","K","k","t","T"]),e}return jde(n,[{key:"parse",value:function(e,t,n){switch(t){case"h":return mhe(Xde,e);case"ho":return n.ordinalNumber(e,{unit:"hour"});default:return yhe(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=12}},{key:"set",value:function(e,t,n){var r=e.getUTCHours()>=12;return r&&n<12?e.setUTCHours(n+12,0,0,0):r||12!==n?e.setUTCHours(n,0,0,0):e.setUTCHours(0,0,0,0),e}}]),n}(Vde),qhe=function(e){Rde(n,e);var t=Pde(n);function n(){var e;Mde(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return Fde(gS(e=t.call.apply(t,[this].concat(i))),"priority",70),Fde(gS(e),"incompatibleTokens",["a","b","h","K","k","t","T"]),e}return jde(n,[{key:"parse",value:function(e,t,n){switch(t){case"H":return mhe(Kde,e);case"Ho":return n.ordinalNumber(e,{unit:"hour"});default:return yhe(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=23}},{key:"set",value:function(e,t,n){return e.setUTCHours(n,0,0,0),e}}]),n}(Vde),Ghe=function(e){Rde(n,e);var t=Pde(n);function n(){var e;Mde(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return Fde(gS(e=t.call.apply(t,[this].concat(i))),"priority",70),Fde(gS(e),"incompatibleTokens",["h","H","k","t","T"]),e}return jde(n,[{key:"parse",value:function(e,t,n){switch(t){case"K":return mhe(Qde,e);case"Ko":return n.ordinalNumber(e,{unit:"hour"});default:return yhe(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=11}},{key:"set",value:function(e,t,n){return e.getUTCHours()>=12&&n<12?e.setUTCHours(n+12,0,0,0):e.setUTCHours(n,0,0,0),e}}]),n}(Vde),Khe=function(e){Rde(n,e);var t=Pde(n);function n(){var e;Mde(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return Fde(gS(e=t.call.apply(t,[this].concat(i))),"priority",70),Fde(gS(e),"incompatibleTokens",["a","b","h","H","K","t","T"]),e}return jde(n,[{key:"parse",value:function(e,t,n){switch(t){case"k":return mhe(Yde,e);case"ko":return n.ordinalNumber(e,{unit:"hour"});default:return yhe(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=24}},{key:"set",value:function(e,t,n){var r=n<=24?n%24:n;return e.setUTCHours(r,0,0,0),e}}]),n}(Vde),Yhe=function(e){Rde(n,e);var t=Pde(n);function n(){var e;Mde(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return Fde(gS(e=t.call.apply(t,[this].concat(i))),"priority",60),Fde(gS(e),"incompatibleTokens",["t","T"]),e}return jde(n,[{key:"parse",value:function(e,t,n){switch(t){case"m":return mhe(Zde,e);case"mo":return n.ordinalNumber(e,{unit:"minute"});default:return yhe(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=59}},{key:"set",value:function(e,t,n){return e.setUTCMinutes(n,0,0),e}}]),n}(Vde),Qhe=function(e){Rde(n,e);var t=Pde(n);function n(){var e;Mde(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return Fde(gS(e=t.call.apply(t,[this].concat(i))),"priority",50),Fde(gS(e),"incompatibleTokens",["t","T"]),e}return jde(n,[{key:"parse",value:function(e,t,n){switch(t){case"s":return mhe(Jde,e);case"so":return n.ordinalNumber(e,{unit:"second"});default:return yhe(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=59}},{key:"set",value:function(e,t,n){return e.setUTCSeconds(n,0),e}}]),n}(Vde),Xhe=function(e){Rde(n,e);var t=Pde(n);function n(){var e;Mde(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return Fde(gS(e=t.call.apply(t,[this].concat(i))),"priority",30),Fde(gS(e),"incompatibleTokens",["t","T"]),e}return jde(n,[{key:"parse",value:function(e,t){return fhe(yhe(t.length,e),(function(e){return Math.floor(e*Math.pow(10,3-t.length))}))}},{key:"set",value:function(e,t,n){return e.setUTCMilliseconds(n),e}}]),n}(Vde),Zhe=function(e){Rde(n,e);var t=Pde(n);function n(){var e;Mde(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return Fde(gS(e=t.call.apply(t,[this].concat(i))),"priority",10),Fde(gS(e),"incompatibleTokens",["t","T","x"]),e}return jde(n,[{key:"parse",value:function(e,t){switch(t){case"X":return ghe(che,e);case"XX":return ghe(uhe,e);case"XXXX":return ghe(dhe,e);case"XXXXX":return ghe(phe,e);default:return ghe(hhe,e)}}},{key:"set",value:function(e,t,n){return t.timestampIsSet?e:new Date(e.getTime()-n)}}]),n}(Vde),Jhe=function(e){Rde(n,e);var t=Pde(n);function n(){var e;Mde(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return Fde(gS(e=t.call.apply(t,[this].concat(i))),"priority",10),Fde(gS(e),"incompatibleTokens",["t","T","X"]),e}return jde(n,[{key:"parse",value:function(e,t){switch(t){case"x":return ghe(che,e);case"xx":return ghe(uhe,e);case"xxxx":return ghe(dhe,e);case"xxxxx":return ghe(phe,e);default:return ghe(hhe,e)}}},{key:"set",value:function(e,t,n){return t.timestampIsSet?e:new Date(e.getTime()-n)}}]),n}(Vde),epe=function(e){Rde(n,e);var t=Pde(n);function n(){var e;Mde(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return Fde(gS(e=t.call.apply(t,[this].concat(i))),"priority",40),Fde(gS(e),"incompatibleTokens","*"),e}return jde(n,[{key:"parse",value:function(e){return vhe(e)}},{key:"set",value:function(e,t,n){return[new Date(1e3*n),{timestampIsSet:!0}]}}]),n}(Vde),tpe=function(e){Rde(n,e);var t=Pde(n);function n(){var e;Mde(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return Fde(gS(e=t.call.apply(t,[this].concat(i))),"priority",20),Fde(gS(e),"incompatibleTokens","*"),e}return jde(n,[{key:"parse",value:function(e){return vhe(e)}},{key:"set",value:function(e,t,n){return[new Date(n),{timestampIsSet:!0}]}}]),n}(Vde),npe={G:new Wde,y:new _he,Y:new Ahe,R:new The,u:new She,Q:new khe,q:new Che,M:new Ihe,L:new Rhe,w:new Dhe,I:new Lhe,d:new Nhe,D:new Ohe,E:new Fhe,e:new Uhe,c:new Bhe,i:new $he,a:new Vhe,b:new Whe,B:new zhe,h:new Hhe,H:new qhe,K:new Ghe,k:new Khe,m:new Yhe,s:new Qhe,S:new Xhe,X:new Zhe,x:new Jhe,t:new epe,T:new tpe},rpe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,ipe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,ape=/^'([^]*?)'?$/,ope=/''/g,spe=/\S/,lpe=/[a-zA-Z]/;function cpe(e,t,n,r){var i,a,o,s,l,c,u,d,h,p,f,m,g,v,y,b,w,E;zP(3,arguments);var x=String(e),_=String(t),A=VP(),T=null!==(i=null!==(a=null===r||void 0===r?void 0:r.locale)&&void 0!==a?a:A.locale)&&void 0!==i?i:cM;if(!T.match)throw new RangeError("locale must contain match property");var S=kue(null!==(o=null!==(s=null!==(l=null!==(c=null===r||void 0===r?void 0:r.firstWeekContainsDate)&&void 0!==c?c:null===r||void 0===r||null===(u=r.locale)||void 0===u||null===(d=u.options)||void 0===d?void 0:d.firstWeekContainsDate)&&void 0!==l?l:A.firstWeekContainsDate)&&void 0!==s?s:null===(h=A.locale)||void 0===h||null===(p=h.options)||void 0===p?void 0:p.firstWeekContainsDate)&&void 0!==o?o:1);if(!(S>=1&&S<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var k=kue(null!==(f=null!==(m=null!==(g=null!==(v=null===r||void 0===r?void 0:r.weekStartsOn)&&void 0!==v?v:null===r||void 0===r||null===(y=r.locale)||void 0===y||null===(b=y.options)||void 0===b?void 0:b.weekStartsOn)&&void 0!==g?g:A.weekStartsOn)&&void 0!==m?m:null===(w=A.locale)||void 0===w||null===(E=w.options)||void 0===E?void 0:E.weekStartsOn)&&void 0!==f?f:0);if(!(k>=0&&k<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(""===_)return""===x?HP(n):new Date(NaN);var C,I={firstWeekContainsDate:S,weekStartsOn:k,locale:T},R=[new $de],D=_.match(ipe).map((function(e){var t=e[0];return t in ude?(0,ude[t])(e,T.formatLong):e})).join("").match(rpe),L=[],P=Ide(D);try{var M=function(){var t=C.value;null!==r&&void 0!==r&&r.useAdditionalWeekYearTokens||!fde(t)||mde(t,_,e),null!==r&&void 0!==r&&r.useAdditionalDayOfYearTokens||!pde(t)||mde(t,_,e);var n=t[0],i=npe[n];if(i){var a=i.incompatibleTokens;if(Array.isArray(a)){var o=L.find((function(e){return a.includes(e.token)||e.token===n}));if(o)throw new RangeError("The format string mustn't contain `".concat(o.fullToken,"` and `").concat(t,"` at the same time"))}else if("*"===i.incompatibleTokens&&L.length>0)throw new RangeError("The format string mustn't contain `".concat(t,"` and any other token at the same time"));L.push({token:n,fullToken:t});var s=i.run(x,t,T.match,I);if(!s)return{v:new Date(NaN)};R.push(s.setter),x=s.rest}else{if(n.match(lpe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+n+"`");if("''"===t?t="'":"'"===n&&(t=t.match(ape)[1].replace(ope,"'")),0!==x.indexOf(t))return{v:new Date(NaN)};x=x.slice(t.length)}};for(P.s();!(C=P.n()).done;){var N=M();if("object"===WP(N))return N.v}}catch(mme){P.e(mme)}finally{P.f()}if(x.length>0&&spe.test(x))return new Date(NaN);var O=R.map((function(e){return e.priority})).sort((function(e,t){return t-e})).filter((function(e,t,n){return n.indexOf(e)===t})).map((function(e){return R.filter((function(t){return t.priority===e})).sort((function(e,t){return t.subPriority-e.subPriority}))})).map((function(e){return e[0]})),j=HP(n);if(isNaN(j.getTime()))return new Date(NaN);var F,U=$ue(j,dM(j)),B={},$=Ide(O);try{for($.s();!(F=$.n()).done;){var V=F.value;if(!V.validate(U,I))return new Date(NaN);var W=V.set(U,B,I);Array.isArray(W)?(U=W[0],uM(B,W[1])):U=W}}catch(mme){$.e(mme)}finally{$.f()}return U}function upe(e){zP(1,arguments);var t=HP(e);return t.setDate(1),t.setHours(0,0,0,0),t}function dpe(e){zP(1,arguments);var t=HP(e),n=new Date(0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}function hpe(e,t){var n;zP(1,arguments);var r=kue(null!==(n=null===t||void 0===t?void 0:t.additionalDigits)&&void 0!==n?n:2);if(2!==r&&1!==r&&0!==r)throw new RangeError("additionalDigits must be 0, 1 or 2");if("string"!==typeof e&&"[object String]"!==Object.prototype.toString.call(e))return new Date(NaN);var i,a=function(e){var t,n={},r=e.split(ppe.dateTimeDelimiter);if(r.length>2)return n;/:/.test(r[0])?t=r[0]:(n.date=r[0],t=r[1],ppe.timeZoneDelimiter.test(n.date)&&(n.date=e.split(ppe.timeZoneDelimiter)[0],t=e.substr(n.date.length,e.length)));if(t){var i=ppe.timezone.exec(t);i?(n.time=t.replace(i[1],""),n.timezone=i[1]):n.time=t}return n}(e);if(a.date){var o=function(e,t){var n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(n);if(!r)return{year:NaN,restDateString:""};var i=r[1]?parseInt(r[1]):null,a=r[2]?parseInt(r[2]):null;return{year:null===a?i:100*a,restDateString:e.slice((r[1]||r[2]).length)}}(a.date,r);i=function(e,t){if(null===t)return new Date(NaN);var n=e.match(fpe);if(!n)return new Date(NaN);var r=!!n[4],i=vpe(n[1]),a=vpe(n[2])-1,o=vpe(n[3]),s=vpe(n[4]),l=vpe(n[5])-1;if(r)return function(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}(0,s,l)?function(e,t,n){var r=new Date(0);r.setUTCFullYear(e,0,4);var i=r.getUTCDay()||7,a=7*(t-1)+n+1-i;return r.setUTCDate(r.getUTCDate()+a),r}(t,s,l):new Date(NaN);var c=new Date(0);return function(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(bpe[t]||(wpe(e)?29:28))}(t,a,o)&&function(e,t){return t>=1&&t<=(wpe(e)?366:365)}(t,i)?(c.setUTCFullYear(t,a,Math.max(i,o)),c):new Date(NaN)}(o.restDateString,o.year)}if(!i||isNaN(i.getTime()))return new Date(NaN);var s,l=i.getTime(),c=0;if(a.time&&(c=function(e){var t=e.match(mpe);if(!t)return NaN;var n=ype(t[1]),r=ype(t[2]),i=ype(t[3]);if(!function(e,t,n){if(24===e)return 0===t&&0===n;return n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}(n,r,i))return NaN;return n*jue+r*Oue+1e3*i}(a.time),isNaN(c)))return new Date(NaN);if(!a.timezone){var u=new Date(l+c),d=new Date(0);return d.setFullYear(u.getUTCFullYear(),u.getUTCMonth(),u.getUTCDate()),d.setHours(u.getUTCHours(),u.getUTCMinutes(),u.getUTCSeconds(),u.getUTCMilliseconds()),d}return s=function(e){if("Z"===e)return 0;var t=e.match(gpe);if(!t)return 0;var n="+"===t[1]?-1:1,r=parseInt(t[2]),i=t[3]&&parseInt(t[3])||0;if(!function(e,t){return t>=0&&t<=59}(0,i))return NaN;return n*(r*jue+i*Oue)}(a.timezone),isNaN(s)?new Date(NaN):new Date(l+c+s)}var ppe={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},fpe=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,mpe=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,gpe=/^([+-])(\d{2})(?::?(\d{2}))?$/;function vpe(e){return e?parseInt(e):1}function ype(e){return e&&parseFloat(e.replace(",","."))||0}var bpe=[31,null,31,30,31,30,31,31,30,31,30,31];function wpe(e){return e%400===0||e%4===0&&e%100!==0}var Epe=n(4894),xpe=n.n(Epe);const _pe={y:{sectionType:"year",contentType:"digit",maxLength:4},yy:"year",yyy:{sectionType:"year",contentType:"digit",maxLength:4},yyyy:"year",M:{sectionType:"month",contentType:"digit",maxLength:2},MM:"month",MMMM:{sectionType:"month",contentType:"letter"},MMM:{sectionType:"month",contentType:"letter"},L:{sectionType:"month",contentType:"digit",maxLength:2},LL:"month",LLL:{sectionType:"month",contentType:"letter"},LLLL:{sectionType:"month",contentType:"letter"},d:{sectionType:"day",contentType:"digit",maxLength:2},dd:"day",do:{sectionType:"day",contentType:"digit-with-letter"},E:{sectionType:"weekDay",contentType:"letter"},EE:{sectionType:"weekDay",contentType:"letter"},EEE:{sectionType:"weekDay",contentType:"letter"},EEEE:{sectionType:"weekDay",contentType:"letter"},EEEEE:{sectionType:"weekDay",contentType:"letter"},i:{sectionType:"weekDay",contentType:"digit",maxLength:1},ii:"weekDay",iii:{sectionType:"weekDay",contentType:"letter"},iiii:{sectionType:"weekDay",contentType:"letter"},e:{sectionType:"weekDay",contentType:"digit",maxLength:1},ee:"weekDay",eee:{sectionType:"weekDay",contentType:"letter"},eeee:{sectionType:"weekDay",contentType:"letter"},eeeee:{sectionType:"weekDay",contentType:"letter"},eeeeee:{sectionType:"weekDay",contentType:"letter"},c:{sectionType:"weekDay",contentType:"digit",maxLength:1},cc:"weekDay",ccc:{sectionType:"weekDay",contentType:"letter"},cccc:{sectionType:"weekDay",contentType:"letter"},ccccc:{sectionType:"weekDay",contentType:"letter"},cccccc:{sectionType:"weekDay",contentType:"letter"},a:"meridiem",aa:"meridiem",aaa:"meridiem",H:{sectionType:"hours",contentType:"digit",maxLength:2},HH:"hours",h:{sectionType:"hours",contentType:"digit",maxLength:2},hh:"hours",m:{sectionType:"minutes",contentType:"digit",maxLength:2},mm:"minutes",s:{sectionType:"seconds",contentType:"digit",maxLength:2},ss:"seconds"},Ape={year:"yyyy",month:"LLLL",monthShort:"MMM",dayOfMonth:"d",weekday:"EEEE",weekdayShort:"EEEEEE",hours24h:"HH",hours12h:"hh",meridiem:"aa",minutes:"mm",seconds:"ss",fullDate:"PP",fullDateWithWeekday:"PPPP",keyboardDate:"P",shortDate:"MMM d",normalDate:"d MMMM",normalDateWithWeekday:"EEE, MMM d",monthAndYear:"LLLL yyyy",monthAndDate:"MMMM d",fullTime:"p",fullTime12h:"hh:mm aa",fullTime24h:"HH:mm",fullDateTime:"PP p",fullDateTime12h:"PP hh:mm aa",fullDateTime24h:"PP HH:mm",keyboardDateTime:"P p",keyboardDateTime12h:"P hh:mm aa",keyboardDateTime24h:"P HH:mm"};class Tpe{constructor(e){this.isMUIAdapter=!0,this.isTimezoneCompatible=!1,this.lib="date-fns",this.locale=void 0,this.formats=void 0,this.formatTokenMap=_pe,this.escapedCharacters={start:"'",end:"'"},this.longFormatters=void 0,this.date=e=>"undefined"===typeof e?new Date:null===e?null:new Date(e),this.dateWithTimezone=e=>this.date(e),this.getTimezone=()=>"default",this.setTimezone=e=>e,this.toJsDate=e=>e,this.getCurrentLocaleCode=()=>{var e;return(null==(e=this.locale)?void 0:e.code)||"en-US"},this.is12HourCycleInCurrentLocale=()=>!this.locale||/a/.test(this.locale.formatLong.time({width:"short"})),this.expandFormat=e=>e.match(/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g).map((e=>{const t=e[0];if("p"===t||"P"===t){return(0,this.longFormatters[t])(e,this.locale.formatLong)}return e})).join(""),this.getFormatHelperText=e=>this.expandFormat(e).replace(/(aaa|aa|a)/g,"(a|p)m").toLocaleLowerCase(),this.isNull=e=>null===e,this.formatNumber=e=>e,this.getMeridiemText=e=>"am"===e?"AM":"PM";const{locale:t,formats:n,longFormatters:r}=e;this.locale=t,this.formats=(0,De.A)({},Ape,n),this.longFormatters=r}}class Spe extends Tpe{constructor(){let{locale:e,formats:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super({locale:null!=e?e:lM,formats:t,longFormatters:xpe()}),this.parseISO=e=>hpe(e),this.toISO=e=>function(e,t){var n,r;zP(1,arguments);var i=HP(e);if(isNaN(i.getTime()))throw new RangeError("Invalid time value");var a=String(null!==(n=null===t||void 0===t?void 0:t.format)&&void 0!==n?n:"extended"),o=String(null!==(r=null===t||void 0===t?void 0:t.representation)&&void 0!==r?r:"complete");if("extended"!==a&&"basic"!==a)throw new RangeError("format must be 'extended' or 'basic'");if("date"!==o&&"time"!==o&&"complete"!==o)throw new RangeError("representation must be 'date', 'time', or 'complete'");var s="",l="",c="extended"===a?"-":"",u="extended"===a?":":"";if("time"!==o){var d=Kue(i.getDate(),2),h=Kue(i.getMonth()+1,2),p=Kue(i.getFullYear(),4);s="".concat(p).concat(c).concat(h).concat(c).concat(d)}if("date"!==o){var f=i.getTimezoneOffset();if(0!==f){var m=Math.abs(f),g=Kue(Math.floor(m/60),2),v=Kue(m%60,2);l="".concat(f<0?"+":"-").concat(g,":").concat(v)}else l="Z";var y=""===s?"":"T",b=[Kue(i.getHours(),2),Kue(i.getMinutes(),2),Kue(i.getSeconds(),2)].join(u);s="".concat(s).concat(y).concat(b).concat(l)}return s}(e,{format:"extended"}),this.parse=(e,t)=>""===e?null:cpe(e,t,new Date,{locale:this.locale}),this.isValid=e=>Bue(this.date(e)),this.format=(e,t)=>this.formatByString(e,this.formats[t]),this.formatByString=(e,t)=>Ede(e,t,{locale:this.locale}),this.getDiff=(e,t,n)=>{switch(n){case"years":return Lue(e,this.date(t));case"quarters":return function(e,t,n){zP(2,arguments);var r=YP(e,t)/3;return ZP(null===n||void 0===n?void 0:n.roundingMethod)(r)}(e,this.date(t));case"months":return YP(e,this.date(t));case"weeks":return function(e,t,n){zP(2,arguments);var r=Nue(e,t)/7;return ZP(null===n||void 0===n?void 0:n.roundingMethod)(r)}(e,this.date(t));case"days":return Nue(e,this.date(t));case"hours":return function(e,t,n){zP(2,arguments);var r=QP(e,t)/jue;return ZP(null===n||void 0===n?void 0:n.roundingMethod)(r)}(e,this.date(t));case"minutes":return function(e,t,n){zP(2,arguments);var r=QP(e,t)/Oue;return ZP(null===n||void 0===n?void 0:n.roundingMethod)(r)}(e,this.date(t));case"seconds":return JP(e,this.date(t));default:return QP(e,this.date(t))}},this.isEqual=(e,t)=>null===e&&null===t||function(e,t){zP(2,arguments);var n=HP(e),r=HP(t);return n.getTime()===r.getTime()}(e,t),this.isSameYear=(e,t)=>function(e,t){zP(2,arguments);var n=HP(e),r=HP(t);return n.getFullYear()===r.getFullYear()}(e,t),this.isSameMonth=(e,t)=>function(e,t){zP(2,arguments);var n=HP(e),r=HP(t);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}(e,t),this.isSameDay=(e,t)=>function(e,t){zP(2,arguments);var n=Pue(e),r=Pue(t);return n.getTime()===r.getTime()}(e,t),this.isSameHour=(e,t)=>function(e,t){zP(2,arguments);var n=kde(e),r=kde(t);return n.getTime()===r.getTime()}(e,t),this.isAfter=(e,t)=>Tde(e,t),this.isAfterYear=(e,t)=>Tde(e,Uue(t)),this.isAfterDay=(e,t)=>Tde(e,GP(t)),this.isBefore=(e,t)=>Sde(e,t),this.isBeforeYear=(e,t)=>Sde(e,dpe(t)),this.isBeforeDay=(e,t)=>Sde(e,Pue(t)),this.isWithinRange=(e,t)=>{let[n,r]=t;return function(e,t){zP(2,arguments);var n=HP(e).getTime(),r=HP(t.start).getTime(),i=HP(t.end).getTime();if(!(r<=i))throw new RangeError("Invalid interval");return n>=r&&n<=i}(e,{start:n,end:r})},this.startOfYear=e=>dpe(e),this.startOfMonth=e=>upe(e),this.startOfWeek=e=>_de(e,{locale:this.locale}),this.startOfDay=e=>Pue(e),this.endOfYear=e=>Uue(e),this.endOfMonth=e=>KP(e),this.endOfWeek=e=>Fue(e,{locale:this.locale}),this.endOfDay=e=>GP(e),this.addYears=(e,t)=>Due(e,t),this.addMonths=(e,t)=>Rue(e,t),this.addWeeks=(e,t)=>function(e,t){return zP(2,arguments),Cue(e,7*kue(t))}(e,t),this.addDays=(e,t)=>Cue(e,t),this.addHours=(e,t)=>function(e,t){return zP(2,arguments),Iue(e,36e5*kue(t))}(e,t),this.addMinutes=(e,t)=>function(e,t){return zP(2,arguments),Iue(e,6e4*kue(t))}(e,t),this.addSeconds=(e,t)=>function(e,t){return zP(2,arguments),Iue(e,1e3*kue(t))}(e,t),this.getYear=e=>function(e){return zP(1,arguments),HP(e).getFullYear()}(e),this.getMonth=e=>function(e){return zP(1,arguments),HP(e).getMonth()}(e),this.getDate=e=>function(e){return zP(1,arguments),HP(e).getDate()}(e),this.getHours=e=>function(e){return zP(1,arguments),HP(e).getHours()}(e),this.getMinutes=e=>function(e){return zP(1,arguments),HP(e).getMinutes()}(e),this.getSeconds=e=>function(e){return zP(1,arguments),HP(e).getSeconds()}(e),this.getMilliseconds=e=>function(e){return zP(1,arguments),HP(e).getMilliseconds()}(e),this.setYear=(e,t)=>function(e,t){zP(2,arguments);var n=HP(e),r=kue(t);return isNaN(n.getTime())?new Date(NaN):(n.setFullYear(r),n)}(e,t),this.setMonth=(e,t)=>function(e,t){zP(2,arguments);var n=HP(e),r=kue(t),i=n.getFullYear(),a=n.getDate(),o=new Date(0);o.setFullYear(i,r,15),o.setHours(0,0,0,0);var s=xde(o);return n.setMonth(r,Math.min(a,s)),n}(e,t),this.setDate=(e,t)=>function(e,t){zP(2,arguments);var n=HP(e),r=kue(t);return n.setDate(r),n}(e,t),this.setHours=(e,t)=>function(e,t){zP(2,arguments);var n=HP(e),r=kue(t);return n.setHours(r),n}(e,t),this.setMinutes=(e,t)=>function(e,t){zP(2,arguments);var n=HP(e),r=kue(t);return n.setMinutes(r),n}(e,t),this.setSeconds=(e,t)=>function(e,t){zP(2,arguments);var n=HP(e),r=kue(t);return n.setSeconds(r),n}(e,t),this.setMilliseconds=(e,t)=>function(e,t){zP(2,arguments);var n=HP(e),r=kue(t);return n.setMilliseconds(r),n}(e,t),this.getDaysInMonth=e=>xde(e),this.getNextMonth=e=>Rue(e,1),this.getPreviousMonth=e=>Rue(e,-1),this.getMonthArray=e=>{const t=[dpe(e)];for(;t.length<12;){const e=t[t.length-1];t.push(this.getNextMonth(e))}return t},this.mergeDateAndTime=(e,t)=>this.setSeconds(this.setMinutes(this.setHours(e,this.getHours(t)),this.getMinutes(t)),this.getSeconds(t)),this.getWeekdays=()=>{const e=new Date;return function(e,t){var n;zP(1,arguments);var r=e||{},i=HP(r.start),a=HP(r.end).getTime();if(!(i.getTime()<=a))throw new RangeError("Invalid interval");var o=[],s=i;s.setHours(0,0,0,0);var l=Number(null!==(n=null===t||void 0===t?void 0:t.step)&&void 0!==n?n:1);if(l<1||isNaN(l))throw new RangeError("`options.step` must be a number greater than 1");for(;s.getTime()<=a;)o.push(HP(s)),s.setDate(s.getDate()+l),s.setHours(0,0,0,0);return o}({start:_de(e,{locale:this.locale}),end:Fue(e,{locale:this.locale})}).map((e=>this.formatByString(e,"EEEEEE")))},this.getWeekArray=e=>{const t=_de(upe(e),{locale:this.locale}),n=Fue(KP(e),{locale:this.locale});let r=0,i=t;const a=[];for(;Sde(i,n);){const e=Math.floor(r/7);a[e]=a[e]||[],a[e].push(i),i=Cue(i,1),r+=1}return a},this.getWeekNumber=e=>function(e,t){zP(1,arguments);var n=HP(e),r=_de(n,t).getTime()-Ade(n,t).getTime();return Math.round(r/6048e5)+1}(e,{locale:this.locale}),this.getYearRange=(e,t)=>{const n=dpe(e),r=Uue(t),i=[];let a=n;for(;Sde(a,r);)i.push(a),a=Due(a,1);return i}}}const kpe=(0,BT.A)((0,Ve.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),Cpe=(0,BT.A)((0,Ve.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),Ipe=(0,BT.A)((0,Ve.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function Rpe(e){return(0,_T.Ay)("MuiCheckbox",e)}const Dpe=(0,Ge.A)("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),Lpe=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],Ppe=(0,bT.Ay)(MV,{shouldForwardProp:e=>(0,pk.A)(e)||"classes"===e,name:"MuiCheckbox",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.indeterminate&&t.indeterminate,t[`size${(0,wT.A)(n.size)}`],"default"!==n.color&&t[`color${(0,wT.A)(n.color)}`]]}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({color:(t.vars||t).palette.text.secondary},!n.disableRipple&&{"&:hover":{backgroundColor:t.vars?`rgba(${"default"===n.color?t.vars.palette.action.activeChannel:t.vars.palette[n.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:(0,ET.X4)("default"===n.color?t.palette.action.active:t.palette[n.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==n.color&&{[`&.${Dpe.checked}, &.${Dpe.indeterminate}`]:{color:(t.vars||t).palette[n.color].main},[`&.${Dpe.disabled}`]:{color:(t.vars||t).palette.action.disabled}})})),Mpe=(0,Ve.jsx)(Cpe,{}),Npe=(0,Ve.jsx)(kpe,{}),Ope=(0,Ve.jsx)(Ipe,{}),jpe=t.forwardRef((function(e,n){var r,i;const a=(0,Ze.b)({props:e,name:"MuiCheckbox"}),{checkedIcon:o=Mpe,color:s="primary",icon:l=Npe,indeterminate:c=!1,indeterminateIcon:u=Ope,inputProps:d,size:h="medium",className:p}=a,f=(0,Le.A)(a,Lpe),m=c?u:l,g=c?u:o,v=(0,De.A)({},a,{color:s,indeterminate:c,size:h}),y=(e=>{const{classes:t,indeterminate:n,color:r,size:i}=e,a={root:["root",n&&"indeterminate",`color${(0,wT.A)(r)}`,`size${(0,wT.A)(i)}`]},o=(0,yT.A)(a,Rpe,t);return(0,De.A)({},t,o)})(v);return(0,Ve.jsx)(Ppe,(0,De.A)({type:"checkbox",inputProps:(0,De.A)({"data-indeterminate":c},d),icon:t.cloneElement(m,{fontSize:null!=(r=m.props.fontSize)?r:h}),checkedIcon:t.cloneElement(g,{fontSize:null!=(i=g.props.fontSize)?i:h}),ownerState:v,ref:n,className:(0,Pe.A)(y.root,p)},f,{classes:y}))})),Fpe=jpe,Upe=()=>{const e=Z(),[n,r]=(0,t.useState)(!1),[i,a]=(0,t.useState)({necessary:!0,functionality:!1,analytics:!1});(0,t.useEffect)((()=>{localStorage.getItem("cookiePreferences")||r(!0)}),[]);const o=e=>t=>{a({...i,[e]:t.target.checked})};return(0,Ve.jsxs)(bR,{open:n,onClose:()=>{},maxWidth:"sm",fullWidth:!0,PaperProps:{style:{position:"fixed",bottom:20,right:20,margin:0,maxWidth:"500px",borderRadius:"12px",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.15)"}},children:[(0,Ve.jsxs)(N$,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",pb:1},children:[(0,Ve.jsx)(hS,{variant:"h6",component:"div",children:"Cookie Preferences"}),(0,Ve.jsx)(ek,{onClick:()=>r(!1),size:"small",sx:{color:"text.secondary"},children:(0,Ve.jsx)(wM.A,{})})]}),(0,Ve.jsx)(NI,{}),(0,Ve.jsxs)(w$,{children:[(0,Ve.jsx)(hS,{variant:"body1",paragraph:!0,children:"We use cookies to enhance your experience. Please select your preferences:"}),(0,Ve.jsxs)(Xe,{sx:{display:"flex",flexDirection:"column",gap:2},children:[(0,Ve.jsx)(zW,{control:(0,Ve.jsx)(Fpe,{checked:i.necessary,disabled:!0,color:"primary"}),label:(0,Ve.jsxs)(Xe,{children:[(0,Ve.jsx)(hS,{variant:"body2",fontWeight:"bold",children:"Necessary Cookies"}),(0,Ve.jsx)(hS,{variant:"body2",color:"text.secondary",children:"Required for the app to function properly. Cannot be disabled."})]})}),(0,Ve.jsx)(zW,{control:(0,Ve.jsx)(Fpe,{checked:i.functionality,onChange:o("functionality"),color:"primary"}),label:(0,Ve.jsxs)(Xe,{children:[(0,Ve.jsx)(hS,{variant:"body2",fontWeight:"bold",children:"Functionality Cookies"}),(0,Ve.jsx)(hS,{variant:"body2",color:"text.secondary",children:"Remember your preferences and settings."})]})}),(0,Ve.jsx)(zW,{control:(0,Ve.jsx)(Fpe,{checked:i.analytics,onChange:o("analytics"),color:"primary"}),label:(0,Ve.jsxs)(Xe,{children:[(0,Ve.jsx)(hS,{variant:"body2",fontWeight:"bold",children:"Analytics Cookies"}),(0,Ve.jsx)(hS,{variant:"body2",color:"text.secondary",children:"Help us understand how you use our app."})]})})]}),(0,Ve.jsx)(Xe,{sx:{mt:2},children:(0,Ve.jsx)(pN,{component:"button",variant:"body2",onClick:()=>{e("/cookies"),r(!1)},sx:{color:"primary.main"},children:"Learn more about how we use cookies"})})]}),(0,Ve.jsx)(NI,{}),(0,Ve.jsxs)(WF,{sx:{p:2,gap:1},children:[(0,Ve.jsx)(Ak,{onClick:()=>{localStorage.setItem("cookiePreferences",JSON.stringify(i)),r(!1)},variant:"outlined",color:"primary",sx:{minWidth:"120px"},children:"Save Preferences"}),(0,Ve.jsx)(Ak,{onClick:()=>{const e={necessary:!0,functionality:!0,analytics:!0};a(e),localStorage.setItem("cookiePreferences",JSON.stringify(e)),r(!1)},variant:"contained",color:"primary",sx:{minWidth:"120px"},children:"Accept All"})]})]})};function Bpe(e){return(0,_T.Ay)("MuiBottomNavigation",e)}(0,Ge.A)("MuiBottomNavigation",["root"]);const $pe=["children","className","component","onChange","showLabels","value"],Vpe=(0,bT.Ay)("div",{name:"MuiBottomNavigation",slot:"Root",overridesResolver:(e,t)=>t.root})((e=>{let{theme:t}=e;return{display:"flex",justifyContent:"center",height:56,backgroundColor:(t.vars||t).palette.background.paper}})),Wpe=t.forwardRef((function(e,n){const r=(0,Ze.b)({props:e,name:"MuiBottomNavigation"}),{children:i,className:a,component:o="div",onChange:s,showLabels:l=!1,value:c}=r,u=(0,Le.A)(r,$pe),d=(0,De.A)({},r,{component:o,showLabels:l}),h=(e=>{const{classes:t}=e;return(0,yT.A)({root:["root"]},Bpe,t)})(d);return(0,Ve.jsx)(Vpe,(0,De.A)({as:o,className:(0,Pe.A)(h.root,a),ref:n,ownerState:d},u,{children:t.Children.map(i,((e,n)=>{if(!t.isValidElement(e))return null;const r=void 0===e.props.value?n:e.props.value;return t.cloneElement(e,{selected:r===c,showLabel:void 0!==e.props.showLabel?e.props.showLabel:l,value:r,onChange:s})}))}))})),zpe=Wpe;function Hpe(e){return(0,_T.Ay)("MuiBottomNavigationAction",e)}const qpe=(0,Ge.A)("MuiBottomNavigationAction",["root","iconOnly","selected","label"]),Gpe=["className","icon","label","onChange","onClick","selected","showLabel","value"],Kpe=(0,bT.Ay)(KS,{name:"MuiBottomNavigationAction",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.showLabel&&!n.selected&&t.iconOnly]}})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({transition:t.transitions.create(["color","padding-top"],{duration:t.transitions.duration.short}),padding:"0px 12px",minWidth:80,maxWidth:168,color:(t.vars||t).palette.text.secondary,flexDirection:"column",flex:"1"},!n.showLabel&&!n.selected&&{paddingTop:14},!n.showLabel&&!n.selected&&!n.label&&{paddingTop:0},{[`&.${qpe.selected}`]:{color:(t.vars||t).palette.primary.main}})})),Ype=(0,bT.Ay)("span",{name:"MuiBottomNavigationAction",slot:"Label",overridesResolver:(e,t)=>t.label})((e=>{let{theme:t,ownerState:n}=e;return(0,De.A)({fontFamily:t.typography.fontFamily,fontSize:t.typography.pxToRem(12),opacity:1,transition:"font-size 0.2s, opacity 0.2s",transitionDelay:"0.1s"},!n.showLabel&&!n.selected&&{opacity:0,transitionDelay:"0s"},{[`&.${qpe.selected}`]:{fontSize:t.typography.pxToRem(14)}})})),Qpe=t.forwardRef((function(e,t){const n=(0,Ze.b)({props:e,name:"MuiBottomNavigationAction"}),{className:r,icon:i,label:a,onChange:o,onClick:s,value:l}=n,c=(0,Le.A)(n,Gpe),u=n,d=(e=>{const{classes:t,showLabel:n,selected:r}=e,i={root:["root",!n&&!r&&"iconOnly",r&&"selected"],label:["label",!n&&!r&&"iconOnly",r&&"selected"]};return(0,yT.A)(i,Hpe,t)})(u);return(0,Ve.jsxs)(Kpe,(0,De.A)({ref:t,className:(0,Pe.A)(d.root,r),focusRipple:!0,onClick:e=>{o&&o(e,l),s&&s(e)},ownerState:u},c,{children:[i,(0,Ve.jsx)(Ype,{className:d.label,ownerState:u,children:a})]}))})),Xpe=Qpe,Zpe=(0,BT.A)((0,Ve.jsx)("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"}),"Home"),Jpe=(0,BT.A)((0,Ve.jsx)("path",{d:"M14 6v15H3v-2h2V3h9v1h5v15h2v2h-4V6zm-4 5v2h2v-2z"}),"MeetingRoom"),efe=(0,BT.A)((0,Ve.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"Person"),tfe=(0,BT.A)((0,Ve.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M8.5 8c.83 0 1.5.67 1.5 1.5S9.33 11 8.5 11 7 10.33 7 9.5 7.67 8 8.5 8M12 18c-2.28 0-4.22-1.66-5-4h10c-.78 2.34-2.72 4-5 4m3.5-7c-.83 0-1.5-.67-1.5-1.5S14.67 8 15.5 8s1.5.67 1.5 1.5-.67 1.5-1.5 1.5"}),"EmojiEmotions"),nfe=e=>{var n;let{open:r,onClose:i}=e;const[a,o]=(0,t.useState)(""),[s,l]=(0,t.useState)(null),[c,u]=(0,t.useState)(null),[d,h]=(0,t.useState)(!1),[p,f]=(0,t.useState)(null),[m,g]=(0,t.useState)(!1),[v,y]=(0,t.useState)(0),b=280,w=(0,t.useRef)(null),{currentUser:E,userProfile:x}=XA();return(0,Ve.jsxs)(bR,{open:r,onClose:i,maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:2,maxHeight:"80vh"}},children:[(0,Ve.jsxs)(N$,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",pb:1},children:[(0,Ve.jsxs)(Xe,{sx:{display:"flex",alignItems:"center",gap:2},children:[(0,Ve.jsx)(aS,{src:(null===x||void 0===x?void 0:x.profilePic)||(null===E||void 0===E?void 0:E.photoURL)||"",alt:(null===x||void 0===x?void 0:x.name)||(null===E||void 0===E?void 0:E.displayName)||"User",sx:{width:40,height:40}}),(0,Ve.jsxs)(Xe,{children:[(0,Ve.jsx)(hS,{variant:"subtitle1",fontWeight:"bold",children:(null===x||void 0===x?void 0:x.name)||(null===E||void 0===E?void 0:E.displayName)||"Anonymous"}),(0,Ve.jsxs)(hS,{variant:"caption",color:"text.secondary",children:["@",(null===x||void 0===x?void 0:x.username)||(null===E||void 0===E||null===(n=E.email)||void 0===n?void 0:n.split("@")[0])||"user"]})]})]}),(0,Ve.jsx)(ek,{onClick:i,size:"small",children:(0,Ve.jsx)(vV,{})})]}),(0,Ve.jsxs)(w$,{children:[(0,Ve.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),E&&q_&&x)if(a.trim()){h(!0),f(null);try{var t;let e=null;if(s){const t=cb(K_,`posts/${E.uid}/${Date.now()}_${s.name}`);await ab(t,s),e=await sb(t)}const n={content:a.trim(),authorId:E.uid,userId:E.uid,timestamp:Av(),likes:0,likedBy:[],authorName:x.name||E.displayName||"Anonymous",authorAvatar:x.profilePic||E.photoURL||"",authorUsername:x.username||(null===(t=E.email)||void 0===t?void 0:t.split("@")[0])||"user",...e&&{imageUrl:e},comments:[],tags:a.match(/#[a-zA-Z0-9_]+/g)||[],isPrivate:!1,reposts:0,repostedBy:[],views:0,isPinned:!1,isEdited:!1,isArchived:!1,deleted:!1};await fv(Zm(q_,"posts"),n),wA.success("Post created successfully"),o(""),l(null),u(null),y(0),i()}catch(p){console.error("Error creating post:",p),f("Failed to create post. Please try again.")}finally{h(!1)}}else f("Please enter some content");else f("Please sign in and ensure profile is loaded to create a post")},children:[(0,Ve.jsx)(xL,{fullWidth:!0,multiline:!0,rows:4,variant:"outlined",placeholder:"What's on your mind?",value:a,onChange:e=>{const t=e.target.value;o(t),y(t.length),t.length>b?f("Post cannot exceed 280 characters"):f(null)},sx:{mb:2}}),c&&(0,Ve.jsxs)(Xe,{sx:{position:"relative",mb:2},children:[(0,Ve.jsx)("img",{src:c,alt:"Preview",style:{maxWidth:"100%",maxHeight:"400px",borderRadius:"8px",objectFit:"contain"}}),(0,Ve.jsx)(ek,{onClick:()=>{l(null),u(null),w.current&&(w.current.value=""),f(null)},sx:{position:"absolute",top:8,right:8,backgroundColor:"rgba(0,0,0,0.5)","&:hover":{backgroundColor:"rgba(0,0,0,0.7)"}},children:(0,Ve.jsx)(AV,{sx:{color:"white"}})})]}),(0,Ve.jsxs)(Xe,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,Ve.jsxs)(Xe,{children:[(0,Ve.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{if(e.target.files&&e.target.files[0]){const t=e.target.files[0];if(t.size>5242880)return void f("Image size should be less than 5MB");if(!t.type.match(/image\/(jpeg|png|gif)/))return void f("Only JPEG, PNG, and GIF images are allowed");l(t),u(URL.createObjectURL(t)),f(null)}},style:{display:"none"},ref:w}),(0,Ve.jsx)(ek,{onClick:()=>{var e;return null===(e=w.current)||void 0===e?void 0:e.click()},children:(0,Ve.jsx)(EV,{})}),(0,Ve.jsx)(ek,{onClick:e=>{g(!0)},children:(0,Ve.jsx)(tfe,{})})]}),(0,Ve.jsx)(Ak,{variant:"contained",type:"submit",disabled:!a.trim()&&!s||d,children:d?(0,Ve.jsx)(jL,{size:24}):"Post"})]})]}),p&&(0,Ve.jsx)(HM,{severity:"error",sx:{mt:2},children:p})]})]})},rfe=()=>{const e=Z(),n=Q(),[r,i]=(0,t.useState)(!1),{currentUser:a}=XA();return(0,Ve.jsxs)(Ve.Fragment,{children:[(0,Ve.jsxs)(zpe,{value:n.pathname,onChange:(t,n)=>{"create-post"===n?i(!0):e(n)},sx:{position:"fixed",bottom:0,left:0,right:0,backgroundColor:"background.paper",borderTop:"1px solid",borderColor:"divider",zIndex:1e3},children:[(0,Ve.jsx)(Xpe,{label:"Home",value:"/",icon:(0,Ve.jsx)(Zpe,{})}),(0,Ve.jsx)(Xpe,{label:"Discover",value:"/discover",icon:(0,Ve.jsx)(lW,{})}),(0,Ve.jsx)(Xpe,{label:"Post",value:"create-post",icon:(0,Ve.jsx)(CW,{})}),(0,Ve.jsx)(Xpe,{label:"Side Rooms",value:"/side-rooms",icon:(0,Ve.jsx)(Jpe,{})}),(0,Ve.jsx)(Xpe,{label:"Vibits",value:"/vibits",icon:(0,Ve.jsx)(hW,{})}),(0,Ve.jsx)(Xpe,{label:"Profile",value:`/profile/${null===a||void 0===a?void 0:a.uid}`,icon:(0,Ve.jsx)(efe,{})})]}),(0,Ve.jsx)(bR,{open:r,onClose:()=>i(!1),maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:2,maxHeight:"80vh"}},children:a&&(0,Ve.jsx)(nfe,{open:r,onClose:()=>i(!1)})})]})};var ife=n(1375);const afe={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"};const ofe=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(e,t)=>e===t;return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))};function sfe(e,t){return e-t}function lfe(e,t){var n;const{index:r}=null!=(n=e.reduce(((e,n,r)=>{const i=Math.abs(t-n);return null===e||i<e.distance||i===e.distance?{distance:i,index:r}:e}),null))?n:{};return r}function cfe(e,t){if(void 0!==t.current&&e.changedTouches){const n=e;for(let e=0;e<n.changedTouches.length;e+=1){const r=n.changedTouches[e];if(r.identifier===t.current)return{x:r.clientX,y:r.clientY}}return!1}return{x:e.clientX,y:e.clientY}}function ufe(e,t,n){return 100*(e-t)/(n-t)}function dfe(e,t,n){const r=Math.round((e-n)/t)*t+n;return Number(r.toFixed(function(e){if(Math.abs(e)<1){const t=e.toExponential().split("e-"),n=t[0].split(".")[1];return(n?n.length:0)+parseInt(t[1],10)}const t=e.toString().split(".")[1];return t?t.length:0}(t)))}function hfe(e){let{values:t,newValue:n,index:r}=e;const i=t.slice();return i[r]=n,i.sort(sfe)}function pfe(e){let{sliderRef:t,activeIndex:n,setActive:r}=e;var i,a;const o=(0,uC.A)(t.current);var s;null!=(i=t.current)&&i.contains(o.activeElement)&&Number(null==o||null==(a=o.activeElement)?void 0:a.getAttribute("data-index"))===n||(null==(s=t.current)||s.querySelector(`[type="range"][data-index="${n}"]`).focus());r&&r(n)}function ffe(e,t){return"number"===typeof e&&"number"===typeof t?e===t:"object"===typeof e&&"object"===typeof t&&ofe(e,t)}const mfe={horizontal:{offset:e=>({left:`${e}%`}),leap:e=>({width:`${e}%`})},"horizontal-reverse":{offset:e=>({right:`${e}%`}),leap:e=>({width:`${e}%`})},vertical:{offset:e=>({bottom:`${e}%`}),leap:e=>({height:`${e}%`})}},gfe=e=>e;let vfe;function yfe(){return void 0===vfe&&(vfe="undefined"===typeof CSS||"function"!==typeof CSS.supports||CSS.supports("touch-action","none")),vfe}function bfe(e){const{"aria-labelledby":n,defaultValue:r,disabled:i=!1,disableSwap:a=!1,isRtl:o=!1,marks:s=!1,max:l=100,min:c=0,name:u,onChange:d,onChangeCommitted:h,orientation:p="horizontal",rootRef:f,scale:m=gfe,step:g=1,shiftStep:v=10,tabIndex:y,value:b}=e,w=t.useRef(void 0),[E,x]=t.useState(-1),[_,A]=t.useState(-1),[T,S]=t.useState(!1),k=t.useRef(0),[C,I]=(0,SF.A)({controlled:b,default:null!=r?r:c,name:"Slider"}),R=d&&((e,t,n)=>{const r=e.nativeEvent||e,i=new r.constructor(r.type,r);Object.defineProperty(i,"target",{writable:!0,value:{value:t,name:u}}),d(i,t,n)}),D=Array.isArray(C);let L=D?C.slice().sort(sfe):[C];L=L.map((e=>null==e?c:(0,UU.A)(e,c,l)));const P=!0===s&&null!==g?[...Array(Math.floor((l-c)/g)+1)].map(((e,t)=>({value:c+g*t}))):s||[],M=P.map((e=>e.value)),{isFocusVisibleRef:N,onBlur:O,onFocus:j,ref:F}=(0,ife.A)(),[U,B]=t.useState(-1),$=t.useRef(null),V=(0,WT.A)(F,$),W=(0,WT.A)(f,V),z=e=>t=>{var n;const r=Number(t.currentTarget.getAttribute("data-index"));j(t),!0===N.current&&B(r),A(r),null==e||null==(n=e.onFocus)||n.call(e,t)},H=e=>t=>{var n;O(t),!1===N.current&&B(-1),A(-1),null==e||null==(n=e.onBlur)||n.call(e,t)},q=(e,t)=>{const n=Number(e.currentTarget.getAttribute("data-index")),r=L[n],i=M.indexOf(r);let o=t;if(P&&null==g){const e=M[M.length-1];o=o>e?e:o<M[0]?M[0]:o<r?M[i-1]:M[i+1]}if(o=(0,UU.A)(o,c,l),D){a&&(o=(0,UU.A)(o,L[n-1]||-1/0,L[n+1]||1/0));const e=o;o=hfe({values:L,newValue:o,index:n});let t=n;a||(t=o.indexOf(e)),pfe({sliderRef:$,activeIndex:t})}I(o),B(n),R&&!ffe(o,C)&&R(e,o,n),h&&h(e,o)},G=e=>t=>{var n;if(null!==g){const e=Number(t.currentTarget.getAttribute("data-index")),n=L[e];let r=null;("ArrowLeft"===t.key||"ArrowDown"===t.key)&&t.shiftKey||"PageDown"===t.key?r=Math.max(n-v,c):(("ArrowRight"===t.key||"ArrowUp"===t.key)&&t.shiftKey||"PageUp"===t.key)&&(r=Math.min(n+v,l)),null!==r&&(q(t,r),t.preventDefault())}null==e||null==(n=e.onKeyDown)||n.call(e,t)};(0,mC.A)((()=>{var e;i&&$.current.contains(document.activeElement)&&(null==(e=document.activeElement)||e.blur())}),[i]),i&&-1!==E&&x(-1),i&&-1!==U&&B(-1);const K=t.useRef(void 0);let Y=p;o&&"horizontal"===p&&(Y+="-reverse");const Q=e=>{let{finger:t,move:n=!1}=e;const{current:r}=$,{width:i,height:o,bottom:s,left:u}=r.getBoundingClientRect();let d,h;if(d=0===Y.indexOf("vertical")?(s-t.y)/o:(t.x-u)/i,-1!==Y.indexOf("-reverse")&&(d=1-d),h=function(e,t,n){return(n-t)*e+t}(d,c,l),g)h=dfe(h,g,c);else{const e=lfe(M,h);h=M[e]}h=(0,UU.A)(h,c,l);let p=0;if(D){p=n?K.current:lfe(L,h),a&&(h=(0,UU.A)(h,L[p-1]||-1/0,L[p+1]||1/0));const e=h;h=hfe({values:L,newValue:h,index:p}),a&&n||(p=h.indexOf(e),K.current=p)}return{newValue:h,activeIndex:p}},X=(0,kC.A)((e=>{const t=cfe(e,w);if(!t)return;if(k.current+=1,"mousemove"===e.type&&0===e.buttons)return void Z(e);const{newValue:n,activeIndex:r}=Q({finger:t,move:!0});pfe({sliderRef:$,activeIndex:r,setActive:x}),I(n),!T&&k.current>2&&S(!0),R&&!ffe(n,C)&&R(e,n,r)})),Z=(0,kC.A)((e=>{const t=cfe(e,w);if(S(!1),!t)return;const{newValue:n}=Q({finger:t,move:!0});x(-1),"touchend"===e.type&&A(-1),h&&h(e,n),w.current=void 0,ee()})),J=(0,kC.A)((e=>{if(i)return;yfe()||e.preventDefault();const t=e.changedTouches[0];null!=t&&(w.current=t.identifier);const n=cfe(e,w);if(!1!==n){const{newValue:t,activeIndex:r}=Q({finger:n});pfe({sliderRef:$,activeIndex:r,setActive:x}),I(t),R&&!ffe(t,C)&&R(e,t,r)}k.current=0;const r=(0,uC.A)($.current);r.addEventListener("touchmove",X,{passive:!0}),r.addEventListener("touchend",Z,{passive:!0})})),ee=t.useCallback((()=>{const e=(0,uC.A)($.current);e.removeEventListener("mousemove",X),e.removeEventListener("mouseup",Z),e.removeEventListener("touchmove",X),e.removeEventListener("touchend",Z)}),[Z,X]);t.useEffect((()=>{const{current:e}=$;return e.addEventListener("touchstart",J,{passive:yfe()}),()=>{e.removeEventListener("touchstart",J),ee()}}),[ee,J]),t.useEffect((()=>{i&&ee()}),[i,ee]);const te=ufe(D?L[0]:c,c,l),ne=ufe(L[L.length-1],c,l)-te,re=e=>t=>{var n;null==(n=e.onMouseLeave)||n.call(e,t),A(-1)};return{active:E,axis:Y,axisProps:mfe,dragging:T,focusedThumbIndex:U,getHiddenInputProps:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var r;const a=GT(t),s={onChange:(d=a||{},e=>{var t;null==(t=d.onChange)||t.call(d,e),q(e,e.target.valueAsNumber)}),onFocus:z(a||{}),onBlur:H(a||{}),onKeyDown:G(a||{})};var d;const h=(0,De.A)({},a,s);return(0,De.A)({tabIndex:y,"aria-labelledby":n,"aria-orientation":p,"aria-valuemax":m(l),"aria-valuemin":m(c),name:u,type:"range",min:e.min,max:e.max,step:null===e.step&&e.marks?"any":null!=(r=e.step)?r:void 0,disabled:i},t,h,{style:(0,De.A)({},afe,{direction:o?"rtl":"ltr",width:"100%",height:"100%"})})},getRootProps:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=GT(e),n={onMouseDown:(r=t||{},e=>{var t;if(null==(t=r.onMouseDown)||t.call(r,e),i)return;if(e.defaultPrevented)return;if(0!==e.button)return;e.preventDefault();const n=cfe(e,w);if(!1!==n){const{newValue:t,activeIndex:r}=Q({finger:n});pfe({sliderRef:$,activeIndex:r,setActive:x}),I(t),R&&!ffe(t,C)&&R(e,t,r)}k.current=0;const a=(0,uC.A)($.current);a.addEventListener("mousemove",X,{passive:!0}),a.addEventListener("mouseup",Z)})};var r;const a=(0,De.A)({},t,n);return(0,De.A)({},e,{ref:W},a)},getThumbProps:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=GT(e),n={onMouseOver:(r=t||{},e=>{var t;null==(t=r.onMouseOver)||t.call(r,e);const n=Number(e.currentTarget.getAttribute("data-index"));A(n)}),onMouseLeave:re(t||{})};var r;return(0,De.A)({},e,t,n)},marks:P,open:_,range:D,rootRef:W,trackLeap:ne,trackOffset:te,values:L,getThumbStyle:e=>({pointerEvents:-1!==E&&E!==e?"none":void 0})}}const wfe=e=>!e||!zT(e);function Efe(e){return(0,_T.Ay)("MuiSlider",e)}const xfe=(0,Ge.A)("MuiSlider",["root","active","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","disabled","dragging","focusVisible","mark","markActive","marked","markLabel","markLabelActive","rail","sizeSmall","thumb","thumbColorPrimary","thumbColorSecondary","thumbColorError","thumbColorSuccess","thumbColorInfo","thumbColorWarning","track","trackInverted","trackFalse","thumbSizeSmall","valueLabel","valueLabelOpen","valueLabelCircle","valueLabelLabel","vertical"]);const _fe=["aria-label","aria-valuetext","aria-labelledby","component","components","componentsProps","color","classes","className","disableSwap","disabled","getAriaLabel","getAriaValueText","marks","max","min","name","onChange","onChangeCommitted","orientation","shiftStep","size","step","scale","slotProps","slots","tabIndex","track","value","valueLabelDisplay","valueLabelFormat"];function Afe(e){return e}const Tfe=(0,bT.Ay)("span",{name:"MuiSlider",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`color${(0,wT.A)(n.color)}`],"medium"!==n.size&&t[`size${(0,wT.A)(n.size)}`],n.marked&&t.marked,"vertical"===n.orientation&&t.vertical,"inverted"===n.track&&t.trackInverted,!1===n.track&&t.trackFalse]}})((e=>{let{theme:t}=e;var n;return{borderRadius:12,boxSizing:"content-box",display:"inline-block",position:"relative",cursor:"pointer",touchAction:"none",WebkitTapHighlightColor:"transparent","@media print":{colorAdjust:"exact"},[`&.${xfe.disabled}`]:{pointerEvents:"none",cursor:"default",color:(t.vars||t).palette.grey[400]},[`&.${xfe.dragging}`]:{[`& .${xfe.thumb}, & .${xfe.track}`]:{transition:"none"}},variants:[...Object.keys((null!=(n=t.vars)?n:t).palette).filter((e=>{var n;return(null!=(n=t.vars)?n:t).palette[e].main})).map((e=>({props:{color:e},style:{color:(t.vars||t).palette[e].main}}))),{props:{orientation:"horizontal"},style:{height:4,width:"100%",padding:"13px 0","@media (pointer: coarse)":{padding:"20px 0"}}},{props:{orientation:"horizontal",size:"small"},style:{height:2}},{props:{orientation:"horizontal",marked:!0},style:{marginBottom:20}},{props:{orientation:"vertical"},style:{height:"100%",width:4,padding:"0 13px","@media (pointer: coarse)":{padding:"0 20px"}}},{props:{orientation:"vertical",size:"small"},style:{width:2}},{props:{orientation:"vertical",marked:!0},style:{marginRight:44}}]}})),Sfe=(0,bT.Ay)("span",{name:"MuiSlider",slot:"Rail",overridesResolver:(e,t)=>t.rail})({display:"block",position:"absolute",borderRadius:"inherit",backgroundColor:"currentColor",opacity:.38,variants:[{props:{orientation:"horizontal"},style:{width:"100%",height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{height:"100%",width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:"inverted"},style:{opacity:1}}]}),kfe=(0,bT.Ay)("span",{name:"MuiSlider",slot:"Track",overridesResolver:(e,t)=>t.track})((e=>{let{theme:t}=e;var n;return{display:"block",position:"absolute",borderRadius:"inherit",border:"1px solid currentColor",backgroundColor:"currentColor",transition:t.transitions.create(["left","width","bottom","height"],{duration:t.transitions.duration.shortest}),variants:[{props:{size:"small"},style:{border:"none"}},{props:{orientation:"horizontal"},style:{height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:!1},style:{display:"none"}},...Object.keys((null!=(n=t.vars)?n:t).palette).filter((e=>{var n;return(null!=(n=t.vars)?n:t).palette[e].main})).map((e=>({props:{color:e,track:"inverted"},style:(0,De.A)({},t.vars?{backgroundColor:t.vars.palette.Slider[`${e}Track`],borderColor:t.vars.palette.Slider[`${e}Track`]}:(0,De.A)({backgroundColor:(0,ET.a)(t.palette[e].main,.62),borderColor:(0,ET.a)(t.palette[e].main,.62)},t.applyStyles("dark",{backgroundColor:(0,ET.e$)(t.palette[e].main,.5)}),t.applyStyles("dark",{borderColor:(0,ET.e$)(t.palette[e].main,.5)})))})))]}})),Cfe=(0,bT.Ay)("span",{name:"MuiSlider",slot:"Thumb",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.thumb,t[`thumbColor${(0,wT.A)(n.color)}`],"medium"!==n.size&&t[`thumbSize${(0,wT.A)(n.size)}`]]}})((e=>{let{theme:t}=e;var n;return{position:"absolute",width:20,height:20,boxSizing:"border-box",borderRadius:"50%",outline:0,backgroundColor:"currentColor",display:"flex",alignItems:"center",justifyContent:"center",transition:t.transitions.create(["box-shadow","left","bottom"],{duration:t.transitions.duration.shortest}),"&::before":{position:"absolute",content:'""',borderRadius:"inherit",width:"100%",height:"100%",boxShadow:(t.vars||t).shadows[2]},"&::after":{position:"absolute",content:'""',borderRadius:"50%",width:42,height:42,top:"50%",left:"50%",transform:"translate(-50%, -50%)"},[`&.${xfe.disabled}`]:{"&:hover":{boxShadow:"none"}},variants:[{props:{size:"small"},style:{width:12,height:12,"&::before":{boxShadow:"none"}}},{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-50%, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 50%)"}},...Object.keys((null!=(n=t.vars)?n:t).palette).filter((e=>{var n;return(null!=(n=t.vars)?n:t).palette[e].main})).map((e=>({props:{color:e},style:{[`&:hover, &.${xfe.focusVisible}`]:(0,De.A)({},t.vars?{boxShadow:`0px 0px 0px 8px rgba(${t.vars.palette[e].mainChannel} / 0.16)`}:{boxShadow:`0px 0px 0px 8px ${(0,ET.X4)(t.palette[e].main,.16)}`},{"@media (hover: none)":{boxShadow:"none"}}),[`&.${xfe.active}`]:(0,De.A)({},t.vars?{boxShadow:`0px 0px 0px 14px rgba(${t.vars.palette[e].mainChannel} / 0.16)`}:{boxShadow:`0px 0px 0px 14px ${(0,ET.X4)(t.palette[e].main,.16)}`})}})))]}})),Ife=(0,bT.Ay)((function(e){const{children:n,className:r,value:i}=e,a=(e=>{const{open:t}=e;return{offset:(0,Pe.A)(t&&xfe.valueLabelOpen),circle:xfe.valueLabelCircle,label:xfe.valueLabelLabel}})(e);return n?t.cloneElement(n,{className:(0,Pe.A)(n.props.className)},(0,Ve.jsxs)(t.Fragment,{children:[n.props.children,(0,Ve.jsx)("span",{className:(0,Pe.A)(a.offset,r),"aria-hidden":!0,children:(0,Ve.jsx)("span",{className:a.circle,children:(0,Ve.jsx)("span",{className:a.label,children:i})})})]})):null}),{name:"MuiSlider",slot:"ValueLabel",overridesResolver:(e,t)=>t.valueLabel})((e=>{let{theme:t}=e;return(0,De.A)({zIndex:1,whiteSpace:"nowrap"},t.typography.body2,{fontWeight:500,transition:t.transitions.create(["transform"],{duration:t.transitions.duration.shortest}),position:"absolute",backgroundColor:(t.vars||t).palette.grey[600],borderRadius:2,color:(t.vars||t).palette.common.white,display:"flex",alignItems:"center",justifyContent:"center",padding:"0.25rem 0.75rem",variants:[{props:{orientation:"horizontal"},style:{transform:"translateY(-100%) scale(0)",top:"-10px",transformOrigin:"bottom center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, 50%) rotate(45deg)",backgroundColor:"inherit",bottom:0,left:"50%"},[`&.${xfe.valueLabelOpen}`]:{transform:"translateY(-100%) scale(1)"}}},{props:{orientation:"vertical"},style:{transform:"translateY(-50%) scale(0)",right:"30px",top:"50%",transformOrigin:"right center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, -50%) rotate(45deg)",backgroundColor:"inherit",right:-8,top:"50%"},[`&.${xfe.valueLabelOpen}`]:{transform:"translateY(-50%) scale(1)"}}},{props:{size:"small"},style:{fontSize:t.typography.pxToRem(12),padding:"0.25rem 0.5rem"}},{props:{orientation:"vertical",size:"small"},style:{right:"20px"}}]})})),Rfe=(0,bT.Ay)("span",{name:"MuiSlider",slot:"Mark",shouldForwardProp:e=>(0,YD.A)(e)&&"markActive"!==e,overridesResolver:(e,t)=>{const{markActive:n}=e;return[t.mark,n&&t.markActive]}})((e=>{let{theme:t}=e;return{position:"absolute",width:2,height:2,borderRadius:1,backgroundColor:"currentColor",variants:[{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-1px, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 1px)"}},{props:{markActive:!0},style:{backgroundColor:(t.vars||t).palette.background.paper,opacity:.8}}]}})),Dfe=(0,bT.Ay)("span",{name:"MuiSlider",slot:"MarkLabel",shouldForwardProp:e=>(0,YD.A)(e)&&"markLabelActive"!==e,overridesResolver:(e,t)=>t.markLabel})((e=>{let{theme:t}=e;return(0,De.A)({},t.typography.body2,{color:(t.vars||t).palette.text.secondary,position:"absolute",whiteSpace:"nowrap",variants:[{props:{orientation:"horizontal"},style:{top:30,transform:"translateX(-50%)","@media (pointer: coarse)":{top:40}}},{props:{orientation:"vertical"},style:{left:36,transform:"translateY(50%)","@media (pointer: coarse)":{left:44}}},{props:{markLabelActive:!0},style:{color:(t.vars||t).palette.text.primary}}]})})),Lfe=e=>{let{children:t}=e;return t},Pfe=t.forwardRef((function(e,n){var r,i,a,o,s,l,c,u,d,h,p,f,m,g,v,y,b,w,E,x,_,A,T,S;const k=(0,Ze.b)({props:e,name:"MuiSlider"}),C=lT(),{"aria-label":I,"aria-valuetext":R,"aria-labelledby":D,component:L="span",components:P={},componentsProps:M={},color:N="primary",classes:O,className:j,disableSwap:F=!1,disabled:U=!1,getAriaLabel:B,getAriaValueText:$,marks:V=!1,max:W=100,min:z=0,orientation:H="horizontal",shiftStep:q=10,size:G="medium",step:K=1,scale:Y=Afe,slotProps:Q,slots:X,track:Z="normal",valueLabelDisplay:J="off",valueLabelFormat:ee=Afe}=k,te=(0,Le.A)(k,_fe),ne=(0,De.A)({},k,{isRtl:C,max:W,min:z,classes:O,disabled:U,disableSwap:F,orientation:H,marks:V,color:N,size:G,step:K,shiftStep:q,scale:Y,track:Z,valueLabelDisplay:J,valueLabelFormat:ee}),{axisProps:re,getRootProps:ie,getHiddenInputProps:ae,getThumbProps:oe,open:se,active:le,axis:ce,focusedThumbIndex:ue,range:de,dragging:he,marks:pe,values:fe,trackOffset:me,trackLeap:ge,getThumbStyle:ve}=bfe((0,De.A)({},ne,{rootRef:n}));ne.marked=pe.length>0&&pe.some((e=>e.label)),ne.dragging=he,ne.focusedThumbIndex=ue;const ye=(e=>{const{disabled:t,dragging:n,marked:r,orientation:i,track:a,classes:o,color:s,size:l}=e,c={root:["root",t&&"disabled",n&&"dragging",r&&"marked","vertical"===i&&"vertical","inverted"===a&&"trackInverted",!1===a&&"trackFalse",s&&`color${(0,wT.A)(s)}`,l&&`size${(0,wT.A)(l)}`],rail:["rail"],track:["track"],mark:["mark"],markActive:["markActive"],markLabel:["markLabel"],markLabelActive:["markLabelActive"],valueLabel:["valueLabel"],thumb:["thumb",t&&"disabled",l&&`thumbSize${(0,wT.A)(l)}`,s&&`thumbColor${(0,wT.A)(s)}`],active:["active"],disabled:["disabled"],focusVisible:["focusVisible"]};return(0,yT.A)(c,Efe,o)})(ne),be=null!=(r=null!=(i=null==X?void 0:X.root)?i:P.Root)?r:Tfe,we=null!=(a=null!=(o=null==X?void 0:X.rail)?o:P.Rail)?a:Sfe,Ee=null!=(s=null!=(l=null==X?void 0:X.track)?l:P.Track)?s:kfe,xe=null!=(c=null!=(u=null==X?void 0:X.thumb)?u:P.Thumb)?c:Cfe,_e=null!=(d=null!=(h=null==X?void 0:X.valueLabel)?h:P.ValueLabel)?d:Ife,Ae=null!=(p=null!=(f=null==X?void 0:X.mark)?f:P.Mark)?p:Rfe,Te=null!=(m=null!=(g=null==X?void 0:X.markLabel)?g:P.MarkLabel)?m:Dfe,Se=null!=(v=null!=(y=null==X?void 0:X.input)?y:P.Input)?v:"input",ke=null!=(b=null==Q?void 0:Q.root)?b:M.root,Ce=null!=(w=null==Q?void 0:Q.rail)?w:M.rail,Ie=null!=(E=null==Q?void 0:Q.track)?E:M.track,Re=null!=(x=null==Q?void 0:Q.thumb)?x:M.thumb,Me=null!=(_=null==Q?void 0:Q.valueLabel)?_:M.valueLabel,Ne=null!=(A=null==Q?void 0:Q.mark)?A:M.mark,Oe=null!=(T=null==Q?void 0:Q.markLabel)?T:M.markLabel,je=null!=(S=null==Q?void 0:Q.input)?S:M.input,Fe=rk({elementType:be,getSlotProps:ie,externalSlotProps:ke,externalForwardedProps:te,additionalProps:(0,De.A)({},wfe(be)&&{as:L}),ownerState:(0,De.A)({},ne,null==ke?void 0:ke.ownerState),className:[ye.root,j]}),Ue=rk({elementType:we,externalSlotProps:Ce,ownerState:ne,className:ye.rail}),Be=rk({elementType:Ee,externalSlotProps:Ie,additionalProps:{style:(0,De.A)({},re[ce].offset(me),re[ce].leap(ge))},ownerState:(0,De.A)({},ne,null==Ie?void 0:Ie.ownerState),className:ye.track}),$e=rk({elementType:xe,getSlotProps:oe,externalSlotProps:Re,ownerState:(0,De.A)({},ne,null==Re?void 0:Re.ownerState),className:ye.thumb}),We=rk({elementType:_e,externalSlotProps:Me,ownerState:(0,De.A)({},ne,null==Me?void 0:Me.ownerState),className:ye.valueLabel}),ze=rk({elementType:Ae,externalSlotProps:Ne,ownerState:ne,className:ye.mark}),He=rk({elementType:Te,externalSlotProps:Oe,ownerState:ne,className:ye.markLabel}),qe=rk({elementType:Se,getSlotProps:ae,externalSlotProps:je,ownerState:ne});return(0,Ve.jsxs)(be,(0,De.A)({},Fe,{children:[(0,Ve.jsx)(we,(0,De.A)({},Ue)),(0,Ve.jsx)(Ee,(0,De.A)({},Be)),pe.filter((e=>e.value>=z&&e.value<=W)).map(((e,n)=>{const r=ufe(e.value,z,W),i=re[ce].offset(r);let a;return a=!1===Z?-1!==fe.indexOf(e.value):"normal"===Z&&(de?e.value>=fe[0]&&e.value<=fe[fe.length-1]:e.value<=fe[0])||"inverted"===Z&&(de?e.value<=fe[0]||e.value>=fe[fe.length-1]:e.value>=fe[0]),(0,Ve.jsxs)(t.Fragment,{children:[(0,Ve.jsx)(Ae,(0,De.A)({"data-index":n},ze,!zT(Ae)&&{markActive:a},{style:(0,De.A)({},i,ze.style),className:(0,Pe.A)(ze.className,a&&ye.markActive)})),null!=e.label?(0,Ve.jsx)(Te,(0,De.A)({"aria-hidden":!0,"data-index":n},He,!zT(Te)&&{markLabelActive:a},{style:(0,De.A)({},i,He.style),className:(0,Pe.A)(ye.markLabel,He.className,a&&ye.markLabelActive),children:e.label})):null]},n)})),fe.map(((e,t)=>{const n=ufe(e,z,W),r=re[ce].offset(n),i="off"===J?Lfe:_e;return(0,Ve.jsx)(i,(0,De.A)({},!zT(i)&&{valueLabelFormat:ee,valueLabelDisplay:J,value:"function"===typeof ee?ee(Y(e),t):ee,index:t,open:se===t||le===t||"on"===J,disabled:U},We,{children:(0,Ve.jsx)(xe,(0,De.A)({"data-index":t},$e,{className:(0,Pe.A)(ye.thumb,$e.className,le===t&&ye.active,ue===t&&ye.focusVisible),style:(0,De.A)({},r,ve(t),$e.style),children:(0,Ve.jsx)(Se,(0,De.A)({"data-index":t,"aria-label":B?B(t):I,"aria-valuenow":Y(e),"aria-labelledby":D,"aria-valuetext":$?$(Y(e),t):R,value:fe[t]},qe))}))}),t)}))]}))})),Mfe=Pfe;function Nfe(e){return(0,_T.Ay)("MuiLinearProgress",e)}(0,Ge.A)("MuiLinearProgress",["root","colorPrimary","colorSecondary","determinate","indeterminate","buffer","query","dashed","dashedColorPrimary","dashedColorSecondary","bar","barColorPrimary","barColorSecondary","bar1Indeterminate","bar1Determinate","bar1Buffer","bar2Indeterminate","bar2Buffer"]);const Ofe=["className","color","value","valueBuffer","variant"];let jfe,Ffe,Ufe,Bfe,$fe,Vfe,Wfe=e=>e;const zfe=(0,SS.i7)(jfe||(jfe=Wfe`
  0% {
    left: -35%;
    right: 100%;
  }

  60% {
    left: 100%;
    right: -90%;
  }

  100% {
    left: 100%;
    right: -90%;
  }
`)),Hfe=(0,SS.i7)(Ffe||(Ffe=Wfe`
  0% {
    left: -200%;
    right: 100%;
  }

  60% {
    left: 107%;
    right: -8%;
  }

  100% {
    left: 107%;
    right: -8%;
  }
`)),qfe=(0,SS.i7)(Ufe||(Ufe=Wfe`
  0% {
    opacity: 1;
    background-position: 0 -23px;
  }

  60% {
    opacity: 0;
    background-position: 0 -23px;
  }

  100% {
    opacity: 1;
    background-position: -200px -23px;
  }
`)),Gfe=(e,t)=>"inherit"===t?"currentColor":e.vars?e.vars.palette.LinearProgress[`${t}Bg`]:"light"===e.palette.mode?(0,ET.a)(e.palette[t].main,.62):(0,ET.e$)(e.palette[t].main,.5),Kfe=(0,bT.Ay)("span",{name:"MuiLinearProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`color${(0,wT.A)(n.color)}`],t[n.variant]]}})((e=>{let{ownerState:t,theme:n}=e;return(0,De.A)({position:"relative",overflow:"hidden",display:"block",height:4,zIndex:0,"@media print":{colorAdjust:"exact"},backgroundColor:Gfe(n,t.color)},"inherit"===t.color&&"buffer"!==t.variant&&{backgroundColor:"none","&::before":{content:'""',position:"absolute",left:0,top:0,right:0,bottom:0,backgroundColor:"currentColor",opacity:.3}},"buffer"===t.variant&&{backgroundColor:"transparent"},"query"===t.variant&&{transform:"rotate(180deg)"})})),Yfe=(0,bT.Ay)("span",{name:"MuiLinearProgress",slot:"Dashed",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.dashed,t[`dashedColor${(0,wT.A)(n.color)}`]]}})((e=>{let{ownerState:t,theme:n}=e;const r=Gfe(n,t.color);return(0,De.A)({position:"absolute",marginTop:0,height:"100%",width:"100%"},"inherit"===t.color&&{opacity:.3},{backgroundImage:`radial-gradient(${r} 0%, ${r} 16%, transparent 42%)`,backgroundSize:"10px 10px",backgroundPosition:"0 -23px"})}),(0,SS.AH)(Bfe||(Bfe=Wfe`
    animation: ${0} 3s infinite linear;
  `),qfe)),Qfe=(0,bT.Ay)("span",{name:"MuiLinearProgress",slot:"Bar1",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.bar,t[`barColor${(0,wT.A)(n.color)}`],("indeterminate"===n.variant||"query"===n.variant)&&t.bar1Indeterminate,"determinate"===n.variant&&t.bar1Determinate,"buffer"===n.variant&&t.bar1Buffer]}})((e=>{let{ownerState:t,theme:n}=e;return(0,De.A)({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",backgroundColor:"inherit"===t.color?"currentColor":(n.vars||n).palette[t.color].main},"determinate"===t.variant&&{transition:"transform .4s linear"},"buffer"===t.variant&&{zIndex:1,transition:"transform .4s linear"})}),(e=>{let{ownerState:t}=e;return("indeterminate"===t.variant||"query"===t.variant)&&(0,SS.AH)($fe||($fe=Wfe`
      width: auto;
      animation: ${0} 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;
    `),zfe)})),Xfe=(0,bT.Ay)("span",{name:"MuiLinearProgress",slot:"Bar2",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.bar,t[`barColor${(0,wT.A)(n.color)}`],("indeterminate"===n.variant||"query"===n.variant)&&t.bar2Indeterminate,"buffer"===n.variant&&t.bar2Buffer]}})((e=>{let{ownerState:t,theme:n}=e;return(0,De.A)({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left"},"buffer"!==t.variant&&{backgroundColor:"inherit"===t.color?"currentColor":(n.vars||n).palette[t.color].main},"inherit"===t.color&&{opacity:.3},"buffer"===t.variant&&{backgroundColor:Gfe(n,t.color),transition:"transform .4s linear"})}),(e=>{let{ownerState:t}=e;return("indeterminate"===t.variant||"query"===t.variant)&&(0,SS.AH)(Vfe||(Vfe=Wfe`
      width: auto;
      animation: ${0} 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite;
    `),Hfe)})),Zfe=t.forwardRef((function(e,t){const n=(0,Ze.b)({props:e,name:"MuiLinearProgress"}),{className:r,color:i="primary",value:a,valueBuffer:o,variant:s="indeterminate"}=n,l=(0,Le.A)(n,Ofe),c=(0,De.A)({},n,{color:i,variant:s}),u=(e=>{const{classes:t,variant:n,color:r}=e,i={root:["root",`color${(0,wT.A)(r)}`,n],dashed:["dashed",`dashedColor${(0,wT.A)(r)}`],bar1:["bar",`barColor${(0,wT.A)(r)}`,("indeterminate"===n||"query"===n)&&"bar1Indeterminate","determinate"===n&&"bar1Determinate","buffer"===n&&"bar1Buffer"],bar2:["bar","buffer"!==n&&`barColor${(0,wT.A)(r)}`,"buffer"===n&&`color${(0,wT.A)(r)}`,("indeterminate"===n||"query"===n)&&"bar2Indeterminate","buffer"===n&&"bar2Buffer"]};return(0,yT.A)(i,Nfe,t)})(c),d=lT(),h={},p={bar1:{},bar2:{}};if("determinate"===s||"buffer"===s)if(void 0!==a){h["aria-valuenow"]=Math.round(a),h["aria-valuemin"]=0,h["aria-valuemax"]=100;let e=a-100;d&&(e=-e),p.bar1.transform=`translateX(${e}%)`}else 0;if("buffer"===s)if(void 0!==o){let e=(o||0)-100;d&&(e=-e),p.bar2.transform=`translateX(${e}%)`}else 0;return(0,Ve.jsxs)(Kfe,(0,De.A)({className:(0,Pe.A)(u.root,r),ownerState:c,role:"progressbar"},h,{ref:t},l,{children:["buffer"===s?(0,Ve.jsx)(Yfe,{className:u.dashed,ownerState:c}):null,(0,Ve.jsx)(Qfe,{className:u.bar1,ownerState:c,style:p.bar1}),"determinate"===s?null:(0,Ve.jsx)(Xfe,{className:u.bar2,ownerState:c,style:p.bar2})]}))})),Jfe=Zfe,eme=(0,BT.A)((0,Ve.jsx)("path",{d:"M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3m-4.4 15.55-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05"}),"FavoriteBorder"),tme=(0,BT.A)((0,Ve.jsx)("path",{d:"M8 5v14l11-7z"}),"PlayArrow"),nme=(0,BT.A)((0,Ve.jsx)("path",{d:"M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63m2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71M4.27 3 3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9zM12 4 9.91 6.09 12 8.18z"}),"VolumeOff"),rme=(0,BT.A)((0,Ve.jsx)("path",{d:"M3 9v6h4l5 5V4L7 9zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02M14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77"}),"VolumeUp"),ime=(0,BT.A)((0,Ve.jsx)("path",{d:"M13 8c0-2.21-1.79-4-4-4S5 5.79 5 8s1.79 4 4 4 4-1.79 4-4m2 2v2h3v3h2v-3h3v-2h-3V7h-2v3zM1 18v2h16v-2c0-2.66-5.33-4-8-4s-8 1.34-8 4"}),"PersonAddAlt1"),ame=(0,BT.A)((0,Ve.jsx)("path",{d:"M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2"}),"Bookmark"),ome=(0,BT.A)((0,Ve.jsx)("path",{d:"M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2m0 15-5-2.18L7 18V5h10z"}),"BookmarkBorder"),sme=(0,BT.A)((0,Ve.jsx)("path",{d:"M19 4H5c-1.11 0-2 .9-2 2v12c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m-8 11H9.5v-2h-2v2H6V9h1.5v2.5h2V9H11zm7-1c0 .55-.45 1-1 1h-.75v1.5h-1.5V15H14c-.55 0-1-.45-1-1v-4c0-.55.45-1 1-1h3c.55 0 1 .45 1 1zm-3.5-.5h2v-3h-2z"}),"HighQuality"),lme=(0,BT.A)((0,Ve.jsx)("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3m3-10H5V5h10z"}),"Save"),cme=()=>{var e,n,r,i,a,o,s,l,c,u,d,h,p;const{currentUser:f}=XA(),[m,g]=(0,t.useState)([]),[v,y]=(0,t.useState)(0),[b,w]=(0,t.useState)(!0),[E,x]=(0,t.useState)(!1),[_,A]=(0,t.useState)(new Set),[T,S]=(0,t.useState)(new Set),[k,C]=(0,t.useState)(!1),[I,R]=(0,t.useState)(null),[D,L]=(0,t.useState)(""),[P,M]=(0,t.useState)(!1),N=(0,t.useRef)(null),O=(0,t.useRef)(0),[j,F]=((0,t.useRef)(0),(0,t.useState)(0)),[U,B]=(0,t.useState)(!1),[$,V]=(0,t.useState)(null),[W,z]=(0,t.useState)(new Set),[H,q]=(0,t.useState)("auto"),[G,K]=(0,t.useState)(null),[Y,Q]=(0,t.useState)(null),[X,Z]=(0,t.useState)({duration:"0:00",resolution:"Unknown"}),[J,ee]=(0,t.useState)(!1),[te,ne]=(0,t.useState)(.5),[re,ie]=(0,t.useState)(!0),ae=(0,t.useRef)(null),[oe,se]=(0,t.useState)(null),[le,ce]=(0,t.useState)(0),[ue,de]=(0,t.useState)(!1),[he,pe]=(0,t.useState)(!1),fe=((0,t.useRef)(null),(0,t.useRef)(0)),[me,ge]=(0,t.useState)(0),[ve,ye]=(TN(tC().breakpoints.down("sm")),(0,t.useState)(!1));(0,t.useEffect)((()=>{N.current&&(N.current.volume=te,re?N.current.play():N.current.pause())}),[te,re]),(0,t.useEffect)((()=>{we(),f&&(Ee(),xe(),_e())}),[f]),(0,t.useEffect)((()=>{const e=e=>{"VolumeUp"!==e.key&&"VolumeDown"!==e.key||console.log("Volume button pressed")};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}}),[]);const be=(0,t.useCallback)((()=>{console.log("Double tap detected")}),[]),we=async()=>{try{const e=Wg(Zm(q_,"videos"),Kg("timestamp","desc"),Qg(10)),t=(await uv(e)).docs.map((e=>({id:e.id,...e.data()})));g(t)}catch(Rb){console.error("Error fetching videos:",Rb),wA.error("Failed to load videos")}finally{w(!1)}},Ee=async()=>{if(f)try{const e=Wg(Zm(q_,`users/${f.uid}/likes`)),t=await uv(e),n=new Set(t.docs.map((e=>e.id)));A(n)}catch(Rb){console.error("Error fetching liked videos:",Rb)}},xe=async()=>{if(f)try{const e=Wg(Zm(q_,`users/${f.uid}/favorites`)),t=await uv(e),n=new Set(t.docs.map((e=>e.id)));S(n)}catch(Rb){console.error("Error fetching favorite videos:",Rb)}},_e=async()=>{if(f)try{const e=Wg(Zm(q_,`users/${f.uid}/following`)),t=await uv(e),n=new Set(t.docs.map((e=>e.id)));z(n)}catch(Rb){console.error("Error fetching following:",Rb)}},Ae=async e=>{if(e)try{const t=Wg(Zm(q_,`videos/${e}/comments`),Kg("timestamp","desc")),n=await uv(t),r=await Promise.all(n.docs.map((async e=>{const t=e.data(),n=Jm(q_,"users",t.userId),r=(await lv(n)).data();return console.log("Fetched user data:",r),{id:e.id,...t,userPhotoURL:(null===r||void 0===r?void 0:r.photoURL)||"",username:(null===r||void 0===r?void 0:r.username)||(null===r||void 0===r?void 0:r.displayName)||t.username||t.photoURL||"Anonymous"}})));R((e=>e?{...e,commentsList:r}:null))}catch(Rb){console.error("Error fetching comments:",Rb),wA.error("Failed to load comments")}},Te=async e=>{if(f&&D.trim()&&e){M(!0);try{const t=Jm(q_,"videos",e),n=(await lv(t)).data(),r=await fv(Zm(q_,`videos/${e}/comments`),{content:D.trim(),userId:f.uid,username:f.displayName||"Anonymous",userPhotoURL:f.photoURL||"",timestamp:Av()});if(await hv(t,{comments:kv(1)}),n&&n.userId!==f.uid){const t={type:"comment",senderId:f.uid,senderName:f.displayName||"Anonymous",senderAvatar:f.photoURL||"",recipientId:n.userId,postId:e,commentId:r.id,content:`${f.displayName||"Someone"} commented on your video: "${D.trim()}"`,createdAt:Av(),isRead:!1};await fv(Zm(q_,"users",n.userId,"notifications"),t)}const i={id:r.id,content:D.trim(),userId:f.uid,username:f.displayName||"Anonymous",userPhotoURL:f.photoURL||"",timestamp:new Date};R((e=>{var t;return e?{...e,comments:(null!==(t=e.comments)&&void 0!==t?t:0)+1,commentsList:[...e.commentsList||[],i]}:null})),L(""),wA.success("Comment added successfully")}catch(Rb){console.error("Error adding comment:",Rb),wA.error("Failed to add comment")}finally{M(!1)}}else wA.error("Please enter a comment and make sure you are logged in")},Se=()=>{K(null)},ke=e=>{q(e),Se(),wA.success(`Resolution changed to ${e}`)},Ie=async()=>{if(f)try{const e=new Set(W);e.add(f.uid);const t=Wg(Zm(q_,"videos"),Hg("userId","in",Array.from(e)),Kg("timestamp","desc"),Qg(10)),n=(await uv(t)).docs.map((e=>({id:e.id,...e.data()})));g(n)}catch(Rb){console.error("Error fetching following videos:",Rb),wA.error("Failed to load following videos")}},Re=()=>(0,Ve.jsx)(H$,{anchor:"bottom",open:k,onClose:()=>C(!1),PaperProps:{sx:{height:"80vh",borderTopLeftRadius:16,borderTopRightRadius:16}},children:(0,Ve.jsxs)(Xe,{sx:{p:2,height:"100%",display:"flex",flexDirection:"column"},children:[(0,Ve.jsxs)(Xe,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,Ve.jsx)(hS,{variant:"h6",children:"Comments"}),(0,Ve.jsx)(ek,{onClick:()=>C(!1),children:(0,Ve.jsx)(vV,{})})]}),(0,Ve.jsx)(Xe,{sx:{flex:1,overflow:"auto",mb:2},children:null!==I&&void 0!==I&&I.commentsList&&I.commentsList.length>0?(0,Ve.jsx)(Dk,{children:I.commentsList.map((e=>{return(0,Ve.jsxs)(rR,{alignItems:"flex-start",children:[(0,Ve.jsx)(lR,{children:(0,Ve.jsx)(aS,{src:e.userPhotoURL,alt:e.username,sx:{width:40,height:40},children:!e.userPhotoURL&&e.username.charAt(0)})}),(0,Ve.jsx)(RI,{primary:(0,Ve.jsxs)(Xe,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,Ve.jsx)(hS,{variant:"subtitle2",component:"span",children:e.username}),(0,Ve.jsx)(hS,{variant:"caption",color:"text.secondary",children:(t=e.timestamp,t?gM(t):"")}),e.userId===(null===f||void 0===f?void 0:f.uid)&&(0,Ve.jsx)(ek,{edge:"end","aria-label":"delete",onClick:()=>(async e=>{if(f&&I)try{await pv(Jm(q_,`videos/${I.id}/comments/${e}`)),R((t=>{var n,r;return t?{...t,comments:(null!==(n=t.comments)&&void 0!==n?n:0)-1,commentsList:null===(r=t.commentsList)||void 0===r?void 0:r.filter((t=>t.id!==e))}:null})),wA.success("Comment deleted successfully"),Ae(I.id)}catch(Rb){console.error("Error deleting comment:",Rb),wA.error("Failed to delete comment")}})(e.id),children:(0,Ve.jsx)(AV,{fontSize:"small"})})]}),secondary:(0,Ve.jsxs)(Xe,{children:[(0,Ve.jsx)(hS,{variant:"body2",color:"text.primary",children:e.content}),(0,Ve.jsxs)(Xe,{sx:{display:"flex",alignItems:"center",gap:1,mt:1},children:[(0,Ve.jsx)(ek,{color:"primary",onClick:()=>(async e=>{if(f&&I)try{(await lv(Jm(q_,`videos/${I.id}/comments/${e}`))).data(),await hv(Jm(q_,`videos/${I.id}/comments/${e}/likes`),{likes:kv(1)}),R((t=>{var n;return t?{...t,commentsList:null===(n=t.commentsList)||void 0===n?void 0:n.map((t=>{var n;return t.id===e?{...t,likes:(null!==(n=t.likes)&&void 0!==n?n:0)+1}:t}))}:null})),wA.success("Comment liked successfully"),Ae(I.id)}catch(Rb){console.error("Error liking comment:",Rb),wA.error("Failed to like comment")}})(e.id),children:(0,Ve.jsx)(eme,{fontSize:"small"})}),(0,Ve.jsx)(hS,{variant:"caption",color:"text.secondary",children:e.likes||0}),(0,Ve.jsx)(ek,{color:"primary",onClick:()=>{return t=e.id,void console.log("Reply to comment:",t);var t},children:(0,Ve.jsx)(bV,{fontSize:"small"})})]})]})})]},e.id);var t}))}):(0,Ve.jsxs)(Xe,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"50%"},children:[(0,Ve.jsx)(bV,{sx:{fontSize:48,color:"text.secondary",mb:2}}),(0,Ve.jsx)(hS,{color:"text.secondary",children:"No comments yet"})]})}),(0,Ve.jsx)(Xe,{sx:{p:2,bgcolor:"background.paper",borderTop:1,borderColor:"divider"},children:(0,Ve.jsxs)(Xe,{sx:{display:"flex",gap:1},children:[(0,Ve.jsx)(xL,{fullWidth:!0,variant:"outlined",placeholder:"Add a comment...",value:D,onChange:e=>L(e.target.value),size:"small",onKeyDown:e=>{"Enter"===e.key&&null!==I&&void 0!==I&&I.id&&!e.shiftKey&&(e.preventDefault(),Te(I.id))},multiline:!0,maxRows:4,InputProps:{sx:{"& .MuiInputBase-input":{padding:"8px 12px"}}}}),(0,Ve.jsx)(Ak,{variant:"contained",onClick:()=>(null===I||void 0===I?void 0:I.id)&&Te(I.id),disabled:!D.trim()||P||!(null!==I&&void 0!==I&&I.id),startIcon:(0,Ve.jsx)(nz,{}),children:P?(0,Ve.jsx)(jL,{size:20}):"Send"})]})})]})});return b?(0,Ve.jsx)(Xe,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:(0,Ve.jsx)(jL,{})}):(0,Ve.jsxs)(Xe,{sx:{height:"calc(100vh - 56px)",position:"relative",overflow:"hidden",bgcolor:"black",display:"flex",flexDirection:"column"},children:[(0,Ve.jsxs)(Xe,{sx:{position:"relative",width:"100%",bgcolor:"background.default",height:"48px",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center"},children:[(0,Ve.jsxs)(DP,{value:me,onChange:(e,t)=>{ge(t),0===t?we():Ie()},indicatorColor:"primary",textColor:"primary",centered:!0,sx:{width:"100%",height:"100%","& .MuiTab-root":{color:"text.primary",fontSize:"1.1rem",fontWeight:500,textTransform:"none",minHeight:"48px","&.Mui-selected":{color:"primary.main"}},"& .MuiTabs-indicator":{height:"3px"}},children:[(0,Ve.jsx)(jP,{label:"DISCOVER",sx:{flex:1,maxWidth:"none"}}),(0,Ve.jsx)(jP,{label:"FOLLOWING",sx:{flex:1,maxWidth:"none"}})]}),(0,Ve.jsx)(Xe,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"32px",height:"32px",bgcolor:"primary.main",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2,boxShadow:2,cursor:"pointer"},children:(0,Ve.jsx)(hW,{sx:{color:"#fff",fontSize:20}})})]}),b?(0,Ve.jsx)(Xe,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},children:(0,Ve.jsx)(jL,{})}):m.length>0?(0,Ve.jsxs)(Xe,{sx:{height:"100%",width:"100%",position:"relative",overflow:"hidden",mt:"0"},onTouchStart:e=>{const t=(new Date).getTime(),n=t-fe.current;n<300&&n>0&&be(),fe.current=t,O.current=e.touches[0].clientY},onTouchMove:e=>{const t=e.touches[0].clientY,n=O.current-t;Math.abs(n)>10&&(se(n>0?"up":"down"),ce(Math.abs(n)))},onTouchEnd:()=>{oe&&le>100?(de(!0),"up"===oe&&v<m.length-1?y((e=>e+1)):"down"===oe&&v>0&&y((e=>e-1)),setTimeout((()=>{de(!1),se(null),ce(0)}),500)):(se(null),ce(0))},children:[(0,Ve.jsx)("video",{ref:N,src:null===(e=m[v])||void 0===e?void 0:e.url,autoPlay:!0,loop:!0,muted:J,playsInline:!0,preload:"metadata",poster:null===(n=m[v])||void 0===n?void 0:n.thumbnailUrl,style:{width:"100%",height:"100%",objectFit:"contain",position:"absolute",top:0,left:0,zIndex:1,transition:"transform 0.5s ease-in-out",transform:ue?"up"===oe?"translateY(-100%)":"translateY(100%)":"translateY(0)",backgroundColor:"black"},onClick:()=>ie(!re)}),v>0&&(0,Ve.jsx)("video",{src:m[v-1].url,style:{width:"100%",height:"100%",objectFit:"cover",position:"absolute",top:0,left:0,zIndex:0,transition:"transform 0.5s ease-in-out",transform:ue&&"down"===oe?"translateY(0)":"translateY(-100%)"}}),v<m.length-1&&(0,Ve.jsx)("video",{src:m[v+1].url,style:{width:"100%",height:"100%",objectFit:"cover",position:"absolute",top:0,left:0,zIndex:0,transition:"transform 0.5s ease-in-out",transform:ue&&"up"===oe?"translateY(0)":"translateY(100%)"}}),(0,Ve.jsxs)(Xe,{sx:{position:"absolute",top:16,right:16,zIndex:10,display:"flex",gap:1},children:[(0,Ve.jsx)(ek,{color:"primary",onClick:()=>ie(!re),sx:{backgroundColor:"rgba(0,0,0,0.5)"},children:re?(0,Ve.jsx)(qce,{}):(0,Ve.jsx)(tme,{})}),(0,Ve.jsx)(ek,{color:"primary",onClick:()=>ee(!J),sx:{backgroundColor:"rgba(0,0,0,0.5)"},children:J?(0,Ve.jsx)(nme,{}):(0,Ve.jsx)(rme,{})}),!J&&(0,Ve.jsx)(Xe,{sx:{display:"flex",alignItems:"center",backgroundColor:"rgba(0,0,0,0.5)",borderRadius:1,px:1,py:.5},children:(0,Ve.jsx)(Mfe,{value:te,onChange:(e,t)=>{ne(t)},min:0,max:1,step:.1,sx:{width:100,color:"white","& .MuiSlider-thumb":{width:12,height:12},"& .MuiSlider-track":{height:4},"& .MuiSlider-rail":{height:4}}})}),(0,Ve.jsx)(ek,{color:"primary",onClick:e=>{if(!I)return;const t=I.duration||0,n=`${Math.floor(t/60)}:${Math.floor(t%60).toString().padStart(2,"0")}`;Z({duration:n,resolution:I.resolution||"Unknown"}),Q(e.currentTarget)},sx:{backgroundColor:"rgba(0,0,0,0.5)"},children:(0,Ve.jsx)(QW,{})})]}),(0,Ve.jsxs)(uI,{anchorEl:Y,open:Boolean(Y),onClose:()=>{Q(null)},children:[(0,Ve.jsx)(xI,{disabled:!0,children:(0,Ve.jsx)(hS,{variant:"subtitle2",children:"Video Information"})}),(0,Ve.jsxs)(xI,{disabled:!0,children:[(0,Ve.jsx)(KV,{fontSize:"small",sx:{mr:1}}),"Duration: ",X.duration]}),(0,Ve.jsxs)(xI,{disabled:!0,children:[(0,Ve.jsx)(KV,{fontSize:"small",sx:{mr:1}}),"Resolution: ",X.resolution]})]}),(0,Ve.jsx)(Re,{}),E&&(0,Ve.jsx)(bR,{open:E,maxWidth:"sm",fullWidth:!0,children:(0,Ve.jsxs)(w$,{children:[(0,Ve.jsx)(hS,{variant:"h6",gutterBottom:!0,children:"Uploading Video..."}),(0,Ve.jsx)(Jfe,{variant:"determinate",value:j,sx:{height:10,borderRadius:5}}),(0,Ve.jsxs)(hS,{variant:"body2",align:"center",sx:{mt:1},children:[Math.round(j),"%"]})]})}),(0,Ve.jsxs)(Xe,{sx:{position:"absolute",bottom:0,left:0,right:0,p:2,background:"linear-gradient(transparent, rgba(0,0,0,0.7))",zIndex:10},children:[(0,Ve.jsxs)(Xe,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:1,mb:1,width:"100%"},children:[(0,Ve.jsx)(Ce,{to:`/profile/${null===(r=m[v])||void 0===r?void 0:r.userId}`,style:{textDecoration:"none",color:"white"},children:(0,Ve.jsxs)(hS,{variant:"h6",sx:{"&:hover":{textDecoration:"underline",cursor:"pointer"}},children:["@",null===(i=m[v])||void 0===i?void 0:i.username]})}),f&&(null===(a=m[v])||void 0===a?void 0:a.userId)!==f.uid&&(0,Ve.jsx)(Ak,{variant:"contained",size:"small",onClick:()=>{var e;return(async e=>{if(f&&e!==f.uid)try{const t=Jm(q_,`users/${f.uid}/following`,e),n=Jm(q_,`users/${e}/followers`,f.uid);if(W.has(e))await pv(t),await pv(n),z((t=>{const n=new Set(t);return n.delete(e),n})),wA.success("Unfollowed user");else{await dv(t,{timestamp:Av()}),await dv(n,{timestamp:Av()}),z((t=>new Set(t).add(e)));const r={type:"follow",senderId:f.uid,senderName:f.displayName||"Anonymous",senderAvatar:f.photoURL||"",recipientId:e,content:`${f.displayName||"Someone"} started following you`,createdAt:Av(),isRead:!1};await fv(Zm(q_,"users",e,"notifications"),r),wA.success("Followed user")}}catch(Rb){console.error("Error toggling follow:",Rb),wA.error("Failed to update follow status")}})(null===(e=m[v])||void 0===e?void 0:e.userId)},startIcon:W.has(null===(o=m[v])||void 0===o?void 0:o.userId)?(0,Ve.jsx)(ime,{}):(0,Ve.jsx)(gV,{}),color:W.has(null===(s=m[v])||void 0===s?void 0:s.userId)?"primary":"secondary",sx:{fontWeight:"bold",borderRadius:"20px",px:2,minWidth:"100px"},children:W.has(null===(l=m[v])||void 0===l?void 0:l.userId)?"Following":"Follow"})]}),(0,Ve.jsxs)(Xe,{sx:{display:"flex",gap:2},children:[(0,Ve.jsx)(ek,{color:"primary",onClick:()=>{var e;return(async e=>{if(f)try{const t=Jm(q_,"videos",e),n=Jm(q_,`users/${f.uid}/likes`,e);if(_.has(e))await pv(n),await hv(t,{likes:kv(-1)}),A((t=>{const n=new Set(t);return n.delete(e),n}));else{await fv(Zm(q_,`users/${f.uid}/likes`),{videoId:e,timestamp:Av()}),await hv(t,{likes:kv(1)}),A((t=>new Set(t).add(e)));const n=(await lv(t)).data();if(n&&n.userId!==f.uid){const t={type:"like",senderId:f.uid,senderName:f.displayName||"Anonymous",senderAvatar:f.photoURL||"",recipientId:n.userId,postId:e,content:`${f.displayName||"Someone"} liked your video`,createdAt:Av(),isRead:!1};await fv(Zm(q_,"users",n.userId,"notifications"),t)}}}catch(Rb){console.error("Error toggling like:",Rb),wA.error("Failed to update like")}})(null===(e=m[v])||void 0===e?void 0:e.id)},children:_.has(null===(c=m[v])||void 0===c?void 0:c.id)?(0,Ve.jsx)(yV,{}):(0,Ve.jsx)(eme,{})}),(0,Ve.jsx)(ek,{color:"primary",onClick:()=>{return e=m[v],R(e),C(!0),void Ae(e.id);var e},children:(0,Ve.jsx)(bV,{})}),(0,Ve.jsx)(ek,{color:"primary",onClick:()=>{var e;return(async e=>{if(f)try{const t=Jm(q_,`users/${f.uid}/favorites`,e);T.has(e)?(await pv(t),S((t=>{const n=new Set(t);return n.delete(e),n}))):(await fv(Zm(q_,`users/${f.uid}/favorites`),{videoId:e,timestamp:Av()}),S((t=>new Set(t).add(e))))}catch(Rb){console.error("Error toggling favorite:",Rb),wA.error("Failed to update favorites")}})(null===(e=m[v])||void 0===e?void 0:e.id)},children:T.has(null===(u=m[v])||void 0===u?void 0:u.id)?(0,Ve.jsx)(ame,{}):(0,Ve.jsx)(ome,{})}),(0,Ve.jsx)(ek,{color:"primary",onClick:()=>{var e;return(async e=>{try{const t=`${window.location.origin}/vibits/${e}`;await navigator.clipboard.writeText(t),wA.success("Video link copied to clipboard")}catch(Rb){console.error("Error sharing video:",Rb),wA.error("Failed to share video")}})(null===(e=m[v])||void 0===e?void 0:e.id)},children:(0,Ve.jsx)(KW,{})}),(0,Ve.jsx)(ek,{color:"primary",onClick:e=>{K(e.currentTarget)},children:(0,Ve.jsx)(sme,{})}),(null===f||void 0===f?void 0:f.uid)===(null===(d=m[v])||void 0===d?void 0:d.userId)&&(0,Ve.jsx)(ek,{color:"error",onClick:()=>{V(m[v]),B(!0)},children:(0,Ve.jsx)(AV,{})}),(0,Ve.jsx)(ek,{color:"primary",onClick:async()=>{try{if(null===I||void 0===I||!I.url)throw new Error("No video selected");const e=I.url.split("/"),t=e.indexOf("videos"),n=decodeURIComponent(e.slice(t).join("/").split("?")[0]),r=cb(ub(),n),i=await sb(r),a=document.createElement("a");a.href=i,a.download=`vibit_${Date.now()}.mp4`,document.body.appendChild(a),a.click(),document.body.removeChild(a),wA.success("Video download started!")}catch(Rb){console.error("Error saving video:",Rb),wA.error("Failed to save video. Please try again.")}},children:(0,Ve.jsx)(lme,{})})]})]})]}):(0,Ve.jsxs)(Xe,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%",gap:2},children:[(0,Ve.jsx)(hS,{variant:"h6",children:"No videos yet"}),(0,Ve.jsx)(hS,{variant:"body2",color:"text.secondary",children:"Be the first to share a video!"})]}),(0,Ve.jsxs)(uI,{anchorEl:G,open:Boolean(G),onClose:Se,children:[(0,Ve.jsx)(xI,{disabled:!0,children:(0,Ve.jsx)(hS,{variant:"subtitle2",children:"Select Quality"})}),(0,Ve.jsx)(xI,{onClick:()=>ke("auto"),children:"Auto (Recommended)"}),null===(h=m[v])||void 0===h||null===(p=h.resolutions)||void 0===p?void 0:p.map((e=>(0,Ve.jsx)(xI,{onClick:()=>ke(e),children:e},e)))]}),(0,Ve.jsxs)(bR,{open:U,onClose:()=>{B(!1),V(null)},children:[(0,Ve.jsx)(N$,{children:"Delete Video"}),(0,Ve.jsx)(w$,{children:(0,Ve.jsx)(hS,{children:"Are you sure you want to delete this video? This action cannot be undone."})}),(0,Ve.jsxs)(WF,{children:[(0,Ve.jsx)(Ak,{onClick:()=>{B(!1),V(null)},children:"Cancel"}),(0,Ve.jsx)(Ak,{color:"error",onClick:()=>$&&(async e=>{if(f&&e.userId===f.uid)try{const t=ub(),n=e.url.split("/"),r=n.indexOf("videos"),i=cb(t,decodeURIComponent(n.slice(r).join("/").split("?")[0]));await lb(i),await pv(Jm(q_,"videos",e.id));const a=Wg(Zm(q_,`users/${f.uid}/likes`));(await uv(a)).forEach((async t=>{t.id===e.id&&await pv(t.ref)}));const o=Wg(Zm(q_,`videos/${e.id}/comments`));(await uv(o)).forEach((async e=>{await pv(e.ref)})),wA.success("Video deleted successfully"),we()}catch(Rb){console.error("Error deleting video:",Rb),wA.error("Failed to delete video")}finally{B(!1),V(null)}})($),children:"Delete"})]})]}),(0,Ve.jsx)("input",{type:"file",accept:"video/*",onChange:async e=>{var t;const n=null===(t=e.target.files)||void 0===t?void 0:t[0];if(n&&f)try{x(!0),F(0);const e=URL.createObjectURL(n),t=document.createElement("video");t.src=e,await new Promise(((e,n)=>{t.onloadedmetadata=e,t.onerror=n,t.load()}));const r=t.duration;if(URL.revokeObjectURL(e),r<5||r>180)return wA.error("Videos must be between 5 seconds and 3 minutes long"),void x(!1);const i=ub(),a=Date.now(),o=`${a}_${n.name}`,s=cb(i,`videos/${f.uid}/${o}`),l=document.createElement("canvas"),c=l.getContext("2d");l.width=t.videoWidth,l.height=t.videoHeight,c&&c.drawImage(t,0,0,l.width,l.height);const u=await new Promise((e=>{l.toBlob((t=>{t&&e(t)}),"image/jpeg",.7)})),d=cb(i,`thumbnails/${f.uid}/${a}.jpg`);await ab(d,u);const h=await sb(d);ob(s,n).on("state_changed",(e=>{const t=e.bytesTransferred/e.totalBytes*100;F(t)}),(e=>{console.error("Upload error:",e),wA.error("Upload failed"),x(!1)}),(async()=>{try{const e=await sb(s),n=(await lv(Jm(q_,"users",f.uid))).data(),i=(null===n||void 0===n?void 0:n.username)||f.displayName||"Anonymous";await fv(Zm(q_,"videos"),{url:e,thumbnailUrl:h,userId:f.uid,username:i,likes:0,comments:0,timestamp:Av(),duration:r,resolution:`${t.videoWidth}x${t.videoHeight}`}),wA.success("Video uploaded successfully!"),we()}catch(Rb){console.error("Error saving video data:",Rb),wA.error("Failed to save video data")}finally{x(!1),F(0)}}))}catch(Rb){console.error("Error uploading video:",Rb),wA.error("Failed to upload video. Please try again."),x(!1),F(0)}},style:{display:"none"},id:"video-upload",ref:ae}),(0,Ve.jsx)("label",{htmlFor:"video-upload",children:(0,Ve.jsx)(ek,{color:"primary",component:"span",sx:{position:"fixed",bottom:140,right:16,backgroundColor:"primary.main","&:hover":{backgroundColor:"primary.dark"},boxShadow:3,width:56,height:56,zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center"},onClick:()=>{wA("Videos must be between 5 seconds and 3 minutes long"),setTimeout((()=>{var e;null===(e=ae.current)||void 0===e||e.click()}),1e3)},children:E?(0,Ve.jsx)(jL,{size:24,color:"inherit",sx:{position:"absolute",top:"50%",left:"50%",marginTop:"-12px",marginLeft:"-12px"}}):(0,Ve.jsx)(CW,{sx:{fontSize:32}})})})]})},ume=(0,He.A)({components:{MuiButton:{styleOverrides:{root:{"&.MuiButton-root":{}}}},MuiButtonBase:{styleOverrides:{root:{"&.MuiButtonBase-root":{}}}}}}),dme=e=>{let{children:t}=e;return(0,Ve.jsxs)(mT,{theme:ume,children:[(0,Ve.jsx)(at,{}),t]})},hme=()=>{const{currentUser:e}=XA(),t=Q();return!e||["/login","/register"].includes(t.pathname)?null:(0,Ve.jsx)(rfe,{})},pme=()=>{const e="/vibits"===Q().pathname;return(0,Ve.jsxs)(Xe,{sx:{display:"flex",flexDirection:"column",minHeight:"100vh"},children:[!e&&(0,Ve.jsx)($I,{}),(0,Ve.jsx)(Xe,{component:"main",sx:{flexGrow:1,pt:{xs:2,sm:3}},children:(0,Ve.jsxs)(ve,{children:[(0,Ve.jsx)(me,{path:"/login",element:(0,Ve.jsx)(fN,{})}),(0,Ve.jsx)(me,{path:"/register",element:(0,Ve.jsx)(R$,{})}),(0,Ve.jsx)(me,{path:"/reset-password",element:(0,Ve.jsx)(D$,{})}),(0,Ve.jsx)(me,{path:"/verify-email",element:(0,Ve.jsx)(Pce,{})}),(0,Ve.jsx)(me,{path:"/setup-source-code",element:(0,Ve.jsx)(Aue,{})}),(0,Ve.jsx)(me,{path:"/enter-source-code",element:(0,Ve.jsx)(Tue,{})}),(0,Ve.jsx)(me,{path:"/reset-source-code",element:(0,Ve.jsx)(Sue,{})}),(0,Ve.jsx)(me,{path:"/",element:(0,Ve.jsx)(Qce,{requireEmailVerification:!0,requireDeviceSetup:!0,children:(0,Ve.jsx)(RM,{})})}),(0,Ve.jsx)(me,{path:"/vibits",element:(0,Ve.jsx)(Qce,{requireEmailVerification:!0,requireDeviceSetup:!0,children:(0,Ve.jsx)(cme,{})})}),(0,Ve.jsx)(me,{path:"/profile/:userId",element:(0,Ve.jsx)(Qce,{requireEmailVerification:!0,requireDeviceSetup:!0,children:(0,Ve.jsx)(CV,{})})}),(0,Ve.jsx)(me,{path:"/settings",element:(0,Ve.jsx)(Qce,{requireEmailVerification:!0,requireDeviceSetup:!0,children:(0,Ve.jsx)(nW,{})})}),(0,Ve.jsx)(me,{path:"/security",element:(0,Ve.jsx)(Qce,{requireEmailVerification:!0,requireDeviceSetup:!0,children:(0,Ve.jsx)(Cce,{})})}),(0,Ve.jsx)(me,{path:"/search",element:(0,Ve.jsx)(Qce,{children:(0,Ve.jsx)(sW,{})})}),(0,Ve.jsx)(me,{path:"/discover",element:(0,Ve.jsx)(Qce,{children:(0,Ve.jsx)(pW,{})})}),(0,Ve.jsx)(me,{path:"/messages",element:(0,Ve.jsx)(Qce,{children:(0,Ve.jsx)(fW,{})})}),(0,Ve.jsx)(me,{path:"/side-rooms",element:(0,Ve.jsx)(Qce,{children:(0,Ve.jsx)(GW,{})})}),(0,Ve.jsx)(me,{path:"/side-room/:roomId",element:(0,Ve.jsx)(Qce,{children:(0,Ve.jsx)(Ole,{})})}),(0,Ve.jsx)(me,{path:"/chat/:userId",element:(0,Ve.jsx)(Qce,{children:(0,Ve.jsx)(jle,{})})}),(0,Ve.jsx)(me,{path:"/safety",element:(0,Ve.jsx)(_ce,{})}),(0,Ve.jsx)(me,{path:"/privacy-policy",element:(0,Ve.jsx)(Ice,{})}),(0,Ve.jsx)(me,{path:"/about",element:(0,Ve.jsx)(Rce,{})}),(0,Ve.jsx)(me,{path:"/terms",element:(0,Ve.jsx)(Dce,{})}),(0,Ve.jsx)(me,{path:"/cookies",element:(0,Ve.jsx)(Lce,{})}),(0,Ve.jsx)(me,{path:"/trash",element:(0,Ve.jsx)(Qce,{children:(0,Ve.jsx)(jce,{})})}),(0,Ve.jsx)(me,{path:"/profile/:userId/followers",element:(0,Ve.jsx)(Qce,{children:(0,Ve.jsx)(Fce,{})})}),(0,Ve.jsx)(me,{path:"/profile/:userId/following",element:(0,Ve.jsx)(Qce,{children:(0,Ve.jsx)(Uce,{})})}),(0,Ve.jsx)(me,{path:"/notifications",element:(0,Ve.jsx)(Qce,{children:(0,Ve.jsx)(gue,{})})}),(0,Ve.jsx)(me,{path:"/account-management",element:(0,Ve.jsx)(Qce,{children:(0,Ve.jsx)(Kce,{})})})]})}),(0,Ve.jsx)(Upe,{}),(0,Ve.jsx)(qA,{position:"bottom-right"}),(0,Ve.jsx)(hme,{})]})},fme=()=>(0,Ve.jsx)(Zce,{children:(0,Ve.jsx)(Te,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:(0,Ve.jsx)(dme,{children:(0,Ve.jsxs)(vT,{children:[(0,Ve.jsx)(at,{}),(0,Ve.jsx)(fO,{dateAdapter:Spe,children:(0,Ve.jsx)(QA,{children:(0,Ve.jsx)(BP,{children:(0,Ve.jsx)(tT,{children:(0,Ve.jsx)(mue,{children:(0,Ve.jsx)(pme,{})})})})})})]})})})});i.createRoot(document.getElementById("root")).render((0,Ve.jsx)(fme,{}))})()})();