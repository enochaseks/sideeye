"use strict";(self.webpackChunkside_eye=self.webpackChunkside_eye||[]).push([[250],{7357:(e,t,a)=>{a.d(t,{A:()=>A});var s=a(8587),r=a(8168),o=a(9950),n=a(2004),i=a(8465),c=a(9269),d=a(9254),l=a(9608),u=a(8463),p=a(4184),m=a(9044),h=a(1506),b=a(3372),f=a(9813),y=a(4414);const v=["alignItems","autoFocus","component","children","dense","disableGutters","divider","focusVisibleClassName","selected","className"],x=(0,d.Ay)(p.A,{shouldForwardProp:e=>(0,l.A)(e)||"classes"===e,name:"MuiListItemButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,a.dense&&t.dense,"flex-start"===a.alignItems&&t.alignItemsFlexStart,a.divider&&t.divider,!a.disableGutters&&t.gutters]}})((e=>{let{theme:t,ownerState:a}=e;return(0,r.A)({display:"flex",flexGrow:1,justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minWidth:0,boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},["&.".concat(f.A.selected)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / ").concat(t.vars.palette.action.selectedOpacity,")"):(0,c.X4)(t.palette.primary.main,t.palette.action.selectedOpacity),["&.".concat(f.A.focusVisible)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.focusOpacity,"))"):(0,c.X4)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},["&.".concat(f.A.selected,":hover")]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.hoverOpacity,"))"):(0,c.X4)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / ").concat(t.vars.palette.action.selectedOpacity,")"):(0,c.X4)(t.palette.primary.main,t.palette.action.selectedOpacity)}},["&.".concat(f.A.focusVisible)]:{backgroundColor:(t.vars||t).palette.action.focus},["&.".concat(f.A.disabled)]:{opacity:(t.vars||t).palette.action.disabledOpacity}},a.divider&&{borderBottom:"1px solid ".concat((t.vars||t).palette.divider),backgroundClip:"padding-box"},"flex-start"===a.alignItems&&{alignItems:"flex-start"},!a.disableGutters&&{paddingLeft:16,paddingRight:16},a.dense&&{paddingTop:4,paddingBottom:4})})),A=o.forwardRef((function(e,t){const a=(0,u.b)({props:e,name:"MuiListItemButton"}),{alignItems:c="center",autoFocus:d=!1,component:l="div",children:p,dense:A=!1,disableGutters:g=!1,divider:C=!1,focusVisibleClassName:j,selected:w=!1,className:k}=a,G=(0,s.A)(a,v),I=o.useContext(b.A),O=o.useMemo((()=>({dense:A||I.dense||!1,alignItems:c,disableGutters:g})),[c,I.dense,A,g]),S=o.useRef(null);(0,m.A)((()=>{d&&S.current&&S.current.focus()}),[d]);const L=(0,r.A)({},a,{alignItems:c,dense:O.dense,disableGutters:g,divider:C,selected:w}),M=(e=>{const{alignItems:t,classes:a,dense:s,disabled:o,disableGutters:n,divider:c,selected:d}=e,l={root:["root",s&&"dense",!n&&"gutters",c&&"divider",o&&"disabled","flex-start"===t&&"alignItemsFlexStart",d&&"selected"]},u=(0,i.A)(l,f.Y,a);return(0,r.A)({},a,u)})(L),R=(0,h.A)(S,t);return(0,y.jsx)(b.A.Provider,{value:O,children:(0,y.jsx)(x,(0,r.A)({ref:R,href:G.href||G.to,component:(G.href||G.to)&&"div"===l?"button":l,focusVisibleClassName:(0,n.A)(M.focusVisible,j),ownerState:L,className:(0,n.A)(M.root,k)},G,{classes:M,children:p}))})}))},9250:(e,t,a)=>{a.r(t),a.d(t,{default:()=>j});var s=a(9379),r=a(9950),o=a(8429),n=a(4857),i=a(6589),c=a(9808),d=a(2053),l=a(3174),u=a(6491),p=a(2236),m=a(4142),h=a(6639),b=a(249),f=a(7357),y=a(8614),v=a(1413),x=a(3563),A=a(6220),g=a(301),C=a(4414);const j=()=>{const e=(0,o.Zp)(),{searchQuery:t}=(0,o.g)(),{db:a,loading:j,error:w}=(0,g.j)(),[k,G]=(0,r.useState)([]),[I,O]=(0,r.useState)(!0),[S,L]=(0,r.useState)(null),[M,R]=(0,r.useState)(0),B=(0,n.A)();(0,i.A)(B.breakpoints.down("sm"));(0,r.useEffect)((()=>{(async()=>{if(t&&a)try{O(!0);const e=[],r=(0,A.P)((0,A.rJ)(a,"users"),(0,A._M)("username",">=",t.toLowerCase()),(0,A._M)("username","<=",t.toLowerCase()+"\uf8ff"),(0,A.AB)(20));(await(0,A.GG)(r)).forEach((t=>{const a=t.data();e.push({id:t.id,type:"user",data:a})}));const o=(0,A.P)((0,A.rJ)(a,"posts"),(0,A._M)("content",">=",t.toLowerCase()),(0,A._M)("content","<=",t.toLowerCase()+"\uf8ff"),(0,A.My)("content"),(0,A.AB)(20)),n=await(0,A.GG)(o);for(const t of n.docs){const r=t.data(),o=(await(0,A.x7)((0,A.H9)(a,"users",r.authorId))).data();e.push({id:t.id,type:"post",data:(0,s.A)((0,s.A)({},r),{},{author:o})})}const i=(0,A.P)((0,A.rJ)(a,"forums"),(0,A._M)("title",">=",t.toLowerCase()),(0,A._M)("title","<=",t.toLowerCase()+"\uf8ff"),(0,A.AB)(20));(await(0,A.GG)(i)).forEach((t=>{const a=t.data();e.push({id:t.id,type:"forum",data:a})}));const c=(0,A.P)((0,A.rJ)(a,"sideRooms"),(0,A._M)("name",">=",t.toLowerCase()),(0,A._M)("name","<=",t.toLowerCase()+"\uf8ff"),(0,A.AB)(20));(await(0,A.GG)(c)).forEach((t=>{const a=t.data();e.push({id:t.id,type:"sideRoom",data:a})})),G(e)}catch(e){console.error("Error searching:",e),L("Failed to search. Please try again later.")}finally{O(!1)}})()}),[t,a]);const _=k.filter((e=>{switch(M){case 0:return"user"===e.type;case 1:return"post"===e.type;case 2:return"forum"===e.type;case 3:return"sideRoom"===e.type;default:return!0}}));return j?(0,C.jsx)("div",{children:"Loading..."}):w?(0,C.jsxs)("div",{children:["Error: ",w.message]}):a?(0,C.jsxs)(c.A,{maxWidth:"md",sx:{mt:4},children:[(0,C.jsxs)(d.A,{variant:"h4",gutterBottom:!0,children:['Search Results for "',t,'"']}),S&&(0,C.jsx)(l.A,{severity:"error",sx:{mb:2},children:S}),(0,C.jsx)(u.A,{sx:{borderBottom:1,borderColor:"divider",mb:2},children:(0,C.jsxs)(p.A,{value:M,onChange:(e,t)=>R(t),children:[(0,C.jsx)(m.A,{label:"Users"}),(0,C.jsx)(m.A,{label:"Posts"}),(0,C.jsx)(m.A,{label:"Forums"}),(0,C.jsx)(m.A,{label:"Side Rooms"})]})}),I?(0,C.jsx)(u.A,{sx:{display:"flex",justifyContent:"center",mt:4},children:(0,C.jsx)(h.A,{})}):0===_.length?(0,C.jsx)(d.A,{variant:"body1",color:"text.secondary",children:"No results found"}):(0,C.jsx)(b.A,{children:_.map((t=>(0,C.jsxs)(f.A,{onClick:()=>(t=>{switch(t.type){case"user":e("/profile/".concat(t.id));break;case"post":e("/post/".concat(t.id));break;case"forum":e("/forum/".concat(t.id));break;case"sideRoom":e("/side-room/".concat(t.id))}})(t),sx:{mb:1,borderRadius:1},children:[(0,C.jsx)(y.A,{children:"user"===t.type?(0,C.jsx)(v.A,{src:t.data.avatar}):(0,C.jsx)(v.A,{children:"post"===t.type?"P":"forum"===t.type?"F":"S"})}),(0,C.jsx)(x.A,{primary:t.data.title||t.data.username||t.data.name,secondary:"post"===t.type?t.data.content.substring(0,100)+"...":t.data.description})]},t.id)))})]}):(0,C.jsx)("div",{children:"Error: Database connection failed"})}}}]);